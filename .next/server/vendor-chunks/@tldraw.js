"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@tldraw";
exports.ids = ["vendor-chunks/@tldraw"];
exports.modules = {

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arc2d: () => (/* reexport safe */ _lib_primitives_geometry_Arc2d_mjs__WEBPACK_IMPORTED_MODULE_87__.Arc2d),\n/* harmony export */   ArrayOfValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.ArrayOfValidator),\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.ArrowShapeArrowheadStartStyle),\n/* harmony export */   AssetRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.AssetRecordType),\n/* harmony export */   BaseBoxShapeTool: () => (/* reexport safe */ _lib_editor_tools_BaseBoxShapeTool_BaseBoxShapeTool_mjs__WEBPACK_IMPORTED_MODULE_55__.BaseBoxShapeTool),\n/* harmony export */   BaseBoxShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_BaseBoxShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_50__.BaseBoxShapeUtil),\n/* harmony export */   BindingUtil: () => (/* reexport safe */ _lib_editor_bindings_BindingUtil_mjs__WEBPACK_IMPORTED_MODULE_40__.BindingUtil),\n/* harmony export */   BoundsSnaps: () => (/* reexport safe */ _lib_editor_managers_SnapManager_BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_45__.BoundsSnaps),\n/* harmony export */   Box: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_83__.Box),\n/* harmony export */   CameraRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.CameraRecordType),\n/* harmony export */   Circle2d: () => (/* reexport safe */ _lib_primitives_geometry_Circle2d_mjs__WEBPACK_IMPORTED_MODULE_88__.Circle2d),\n/* harmony export */   ClickManager: () => (/* reexport safe */ _lib_editor_managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_41__.ClickManager),\n/* harmony export */   ContainerProvider: () => (/* reexport safe */ _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_62__.ContainerProvider),\n/* harmony export */   CubicBezier2d: () => (/* reexport safe */ _lib_primitives_geometry_CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_89__.CubicBezier2d),\n/* harmony export */   CubicSpline2d: () => (/* reexport safe */ _lib_primitives_geometry_CubicSpline2d_mjs__WEBPACK_IMPORTED_MODULE_90__.CubicSpline2d),\n/* harmony export */   DEFAULT_ANIMATION_OPTIONS: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_38__.DEFAULT_ANIMATION_OPTIONS),\n/* harmony export */   DEFAULT_CAMERA_OPTIONS: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_38__.DEFAULT_CAMERA_OPTIONS),\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   DefaultBackground: () => (/* reexport safe */ _lib_components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_15__.DefaultBackground),\n/* harmony export */   DefaultBrush: () => (/* reexport safe */ _lib_components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultBrush),\n/* harmony export */   DefaultCanvas: () => (/* reexport safe */ _lib_components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_17__.DefaultCanvas),\n/* harmony export */   DefaultCollaboratorHint: () => (/* reexport safe */ _lib_components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_18__.DefaultCollaboratorHint),\n/* harmony export */   DefaultColorStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultColorThemePalette),\n/* harmony export */   DefaultCursor: () => (/* reexport safe */ _lib_components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_19__.DefaultCursor),\n/* harmony export */   DefaultDashStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultDashStyle),\n/* harmony export */   DefaultErrorFallback: () => (/* reexport safe */ _lib_components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_20__.DefaultErrorFallback),\n/* harmony export */   DefaultFillStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultFillStyle),\n/* harmony export */   DefaultFontFamilies: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultFontStyle),\n/* harmony export */   DefaultGrid: () => (/* reexport safe */ _lib_components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_21__.DefaultGrid),\n/* harmony export */   DefaultHandle: () => (/* reexport safe */ _lib_components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_22__.DefaultHandle),\n/* harmony export */   DefaultHandles: () => (/* reexport safe */ _lib_components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_23__.DefaultHandles),\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultHorizontalAlignStyle),\n/* harmony export */   DefaultScribble: () => (/* reexport safe */ _lib_components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_24__.DefaultScribble),\n/* harmony export */   DefaultSelectionBackground: () => (/* reexport safe */ _lib_components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_25__.DefaultSelectionBackground),\n/* harmony export */   DefaultSelectionForeground: () => (/* reexport safe */ _lib_components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_26__.DefaultSelectionForeground),\n/* harmony export */   DefaultShapeIndicator: () => (/* reexport safe */ _lib_components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_27__.DefaultShapeIndicator),\n/* harmony export */   DefaultShapeIndicators: () => (/* reexport safe */ _lib_components_default_components_DefaultShapeIndicators_mjs__WEBPACK_IMPORTED_MODULE_28__.DefaultShapeIndicators),\n/* harmony export */   DefaultSizeStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultSizeStyle),\n/* harmony export */   DefaultSnapIndicator: () => (/* reexport safe */ _lib_components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_29__.DefaultSnapIndicator),\n/* harmony export */   DefaultSpinner: () => (/* reexport safe */ _lib_components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_30__.DefaultSpinner),\n/* harmony export */   DefaultSvgDefs: () => (/* reexport safe */ _lib_components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_31__.DefaultSvgDefs),\n/* harmony export */   DefaultTextAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultTextAlignStyle),\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DefaultVerticalAlignStyle),\n/* harmony export */   DictValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.DictValidator),\n/* harmony export */   DocumentRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.DocumentRecordType),\n/* harmony export */   EASINGS: () => (/* reexport safe */ _lib_primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_86__.EASINGS),\n/* harmony export */   EMPTY_ARRAY: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.EMPTY_ARRAY),\n/* harmony export */   EVENT_NAME_MAP: () => (/* reexport safe */ _lib_editor_types_event_types_mjs__WEBPACK_IMPORTED_MODULE_58__.EVENT_NAME_MAP),\n/* harmony export */   Edge2d: () => (/* reexport safe */ _lib_primitives_geometry_Edge2d_mjs__WEBPACK_IMPORTED_MODULE_91__.Edge2d),\n/* harmony export */   EdgeScrollManager: () => (/* reexport safe */ _lib_editor_managers_EdgeScrollManager_mjs__WEBPACK_IMPORTED_MODULE_42__.EdgeScrollManager),\n/* harmony export */   Editor: () => (/* reexport safe */ _lib_editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_39__.Editor),\n/* harmony export */   EffectScheduler: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.EffectScheduler),\n/* harmony export */   Ellipse2d: () => (/* reexport safe */ _lib_primitives_geometry_Ellipse2d_mjs__WEBPACK_IMPORTED_MODULE_92__.Ellipse2d),\n/* harmony export */   EnumStyleProp: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.EnumStyleProp),\n/* harmony export */   ErrorBoundary: () => (/* reexport safe */ _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_12__.ErrorBoundary),\n/* harmony export */   ErrorScreen: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.ErrorScreen),\n/* harmony export */   FileHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.FileHelpers),\n/* harmony export */   GeoShapeGeoStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.GeoShapeGeoStyle),\n/* harmony export */   Geometry2d: () => (/* reexport safe */ _lib_primitives_geometry_Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_93__.Geometry2d),\n/* harmony export */   Group2d: () => (/* reexport safe */ _lib_primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_94__.Group2d),\n/* harmony export */   GroupShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_52__.GroupShapeUtil),\n/* harmony export */   HALF_PI: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.HALF_PI),\n/* harmony export */   HTMLContainer: () => (/* reexport safe */ _lib_components_HTMLContainer_mjs__WEBPACK_IMPORTED_MODULE_13__.HTMLContainer),\n/* harmony export */   HandleSnaps: () => (/* reexport safe */ _lib_editor_managers_SnapManager_HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_46__.HandleSnaps),\n/* harmony export */   HistoryManager: () => (/* reexport safe */ _lib_editor_managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_43__.HistoryManager),\n/* harmony export */   Image: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Image),\n/* harmony export */   ImageShapeCrop: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.ImageShapeCrop),\n/* harmony export */   IncrementalSetConstructor: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.IncrementalSetConstructor),\n/* harmony export */   InstancePageStateRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.InstancePageStateRecordType),\n/* harmony export */   InstancePresenceRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.InstancePresenceRecordType),\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.LANGUAGES),\n/* harmony export */   LicenseManager: () => (/* reexport safe */ _lib_license_LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_81__.LicenseManager),\n/* harmony export */   LineShapeSplineStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.LineShapeSplineStyle),\n/* harmony export */   LoadingScreen: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.LoadingScreen),\n/* harmony export */   Mat: () => (/* reexport safe */ _lib_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_84__.Mat),\n/* harmony export */   MediaHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.MediaHelpers),\n/* harmony export */   MigrationFailureReason: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.MigrationFailureReason),\n/* harmony export */   ObjectValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.ObjectValidator),\n/* harmony export */   OptionalErrorBoundary: () => (/* reexport safe */ _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_12__.OptionalErrorBoundary),\n/* harmony export */   PI: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.PI),\n/* harmony export */   PI2: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.PI2),\n/* harmony export */   PageRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.PageRecordType),\n/* harmony export */   PerformanceTracker: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.PerformanceTracker),\n/* harmony export */   PngHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.PngHelpers),\n/* harmony export */   Point2d: () => (/* reexport safe */ _lib_primitives_geometry_Point2d_mjs__WEBPACK_IMPORTED_MODULE_95__.Point2d),\n/* harmony export */   PointerRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.PointerRecordType),\n/* harmony export */   Polygon2d: () => (/* reexport safe */ _lib_primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_96__.Polygon2d),\n/* harmony export */   Polyline2d: () => (/* reexport safe */ _lib_primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_97__.Polyline2d),\n/* harmony export */   ROTATE_CORNER_TO_SELECTION_CORNER: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_83__.ROTATE_CORNER_TO_SELECTION_CORNER),\n/* harmony export */   ReadonlySharedStyleMap: () => (/* reexport safe */ _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_102__.ReadonlySharedStyleMap),\n/* harmony export */   RecordType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.RecordType),\n/* harmony export */   Rectangle2d: () => (/* reexport safe */ _lib_primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_98__.Rectangle2d),\n/* harmony export */   Result: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result),\n/* harmony export */   SIDES: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_38__.SIDES),\n/* harmony export */   SIN: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.SIN),\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   SVGContainer: () => (/* reexport safe */ _lib_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_14__.SVGContainer),\n/* harmony export */   ScribbleManager: () => (/* reexport safe */ _lib_editor_managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_44__.ScribbleManager),\n/* harmony export */   ShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_51__.ShapeUtil),\n/* harmony export */   SharedStyleMap: () => (/* reexport safe */ _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_102__.SharedStyleMap),\n/* harmony export */   SnapManager: () => (/* reexport safe */ _lib_editor_managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_47__.SnapManager),\n/* harmony export */   Stadium2d: () => (/* reexport safe */ _lib_primitives_geometry_Stadium2d_mjs__WEBPACK_IMPORTED_MODULE_99__.Stadium2d),\n/* harmony export */   StateNode: () => (/* reexport safe */ _lib_editor_tools_StateNode_mjs__WEBPACK_IMPORTED_MODULE_56__.StateNode),\n/* harmony export */   Store: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.Store),\n/* harmony export */   StoreQueries: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.StoreQueries),\n/* harmony export */   StoreSchema: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.StoreSchema),\n/* harmony export */   StoreSideEffects: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.StoreSideEffects),\n/* harmony export */   StyleProp: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.StyleProp),\n/* harmony export */   T: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.T),\n/* harmony export */   TAB_ID: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_33__.TAB_ID),\n/* harmony export */   TLDOCUMENT_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TLDOCUMENT_ID),\n/* harmony export */   TLINSTANCE_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TLINSTANCE_ID),\n/* harmony export */   TLPOINTER_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TLPOINTER_ID),\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   TL_CURSOR_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TL_CURSOR_TYPES),\n/* harmony export */   TL_HANDLE_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TL_HANDLE_TYPES),\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.TL_SCRIBBLE_STATES),\n/* harmony export */   TextManager: () => (/* reexport safe */ _lib_editor_managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_48__.TextManager),\n/* harmony export */   Timers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Timers),\n/* harmony export */   TldrawEditor: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.TldrawEditor),\n/* harmony export */   USER_COLORS: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__.USER_COLORS),\n/* harmony export */   UnionValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.UnionValidator),\n/* harmony export */   UserPreferencesManager: () => (/* reexport safe */ _lib_editor_managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_49__.UserPreferencesManager),\n/* harmony export */   Validator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__.Validator),\n/* harmony export */   Vec: () => (/* reexport safe */ _lib_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_85__.Vec),\n/* harmony export */   WeakCache: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.WeakCache),\n/* harmony export */   ZERO_INDEX_KEY: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.ZERO_INDEX_KEY),\n/* harmony export */   angleDistance: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.angleDistance),\n/* harmony export */   annotateError: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.annotateError),\n/* harmony export */   applyRotationToSnapshotShapes: () => (/* reexport safe */ _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_114__.applyRotationToSnapshotShapes),\n/* harmony export */   approximately: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.approximately),\n/* harmony export */   areAnglesCompatible: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.areAnglesCompatible),\n/* harmony export */   areArraysShallowEqual: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areArraysShallowEqual),\n/* harmony export */   areObjectsShallowEqual: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual),\n/* harmony export */   arrowBindingMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.arrowBindingProps),\n/* harmony export */   arrowShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.arrowShapeProps),\n/* harmony export */   assert: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert),\n/* harmony export */   assertExists: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assertExists),\n/* harmony export */   assertIdType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.assertIdType),\n/* harmony export */   assetIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.assetIdValidator),\n/* harmony export */   assetMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.assetMigrations),\n/* harmony export */   assetValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.assetValidator),\n/* harmony export */   atom: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.atom),\n/* harmony export */   average: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.average),\n/* harmony export */   bind: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind),\n/* harmony export */   bindingIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.bindingIdValidator),\n/* harmony export */   bookmarkShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.bookmarkShapeProps),\n/* harmony export */   boxModelValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.boxModelValidator),\n/* harmony export */   canonicalizeRotation: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.canonicalizeRotation),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.canvasUiColorTypeValidator),\n/* harmony export */   centerOfCircleFromThreePoints: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.centerOfCircleFromThreePoints),\n/* harmony export */   clamp: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.clamp),\n/* harmony export */   clampRadians: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.clampRadians),\n/* harmony export */   clearLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearSessionStorage),\n/* harmony export */   clockwiseAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.clockwiseAngleDist),\n/* harmony export */   compact: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact),\n/* harmony export */   computed: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.computed),\n/* harmony export */   coreShapes: () => (/* reexport safe */ _lib_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_37__.coreShapes),\n/* harmony export */   counterClockwiseAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.counterClockwiseAngleDist),\n/* harmony export */   createAssetValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createAssetValidator),\n/* harmony export */   createBindingId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createBindingPropsMigrationSequence),\n/* harmony export */   createBindingValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createBindingValidator),\n/* harmony export */   createComputedCache: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createComputedCache),\n/* harmony export */   createDeepLinkString: () => (/* reexport safe */ _lib_utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_105__.createDeepLinkString),\n/* harmony export */   createEmptyRecordsDiff: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createEmptyRecordsDiff),\n/* harmony export */   createMigrationIds: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createMigrationSequence),\n/* harmony export */   createPresenceStateDerivation: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createPresenceStateDerivation),\n/* harmony export */   createRecordMigrationSequence: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createRecordMigrationSequence),\n/* harmony export */   createRecordType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.createRecordType),\n/* harmony export */   createSessionStateSnapshotSignal: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_33__.createSessionStateSnapshotSignal),\n/* harmony export */   createShapeId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createShapePropsMigrationSequence),\n/* harmony export */   createShapeValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createShapeValidator),\n/* harmony export */   createTLSchema: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.createTLSchema),\n/* harmony export */   createTLSchemaFromUtils: () => (/* reexport safe */ _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_35__.createTLSchemaFromUtils),\n/* harmony export */   createTLStore: () => (/* reexport safe */ _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_35__.createTLStore),\n/* harmony export */   createTLUser: () => (/* reexport safe */ _lib_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_36__.createTLUser),\n/* harmony export */   dataUrlToFile: () => (/* reexport safe */ _lib_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_103__.dataUrlToFile),\n/* harmony export */   debounce: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.debounce),\n/* harmony export */   debugEnableLicensing: () => (/* binding */ debugEnableLicensing),\n/* harmony export */   debugFlags: () => (/* reexport safe */ _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_104__.debugFlags),\n/* harmony export */   dedupe: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.dedupe),\n/* harmony export */   defaultBindingSchemas: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.defaultBindingSchemas),\n/* harmony export */   defaultColorNames: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.defaultColorNames),\n/* harmony export */   defaultShapeSchemas: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.defaultShapeSchemas),\n/* harmony export */   defaultTldrawOptions: () => (/* reexport safe */ _lib_options_mjs__WEBPACK_IMPORTED_MODULE_82__.defaultTldrawOptions),\n/* harmony export */   defaultUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__.defaultUserPreferences),\n/* harmony export */   defineMigrations: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.defineMigrations),\n/* harmony export */   degreesToRadians: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.degreesToRadians),\n/* harmony export */   deleteFromLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.deleteFromSessionStorage),\n/* harmony export */   devFreeze: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.devFreeze),\n/* harmony export */   drawShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.drawShapeProps),\n/* harmony export */   embedShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.embedShapeMigrations),\n/* harmony export */   embedShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.embedShapeProps),\n/* harmony export */   exhaustiveSwitchError: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError),\n/* harmony export */   extractSessionStateFromLegacySnapshot: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_33__.extractSessionStateFromLegacySnapshot),\n/* harmony export */   featureFlags: () => (/* reexport safe */ _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_104__.featureFlags),\n/* harmony export */   fetch: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.fetch),\n/* harmony export */   filterEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.filterEntries),\n/* harmony export */   fpsThrottle: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.fpsThrottle),\n/* harmony export */   frameShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.frameShapeProps),\n/* harmony export */   geoShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.geoShapeProps),\n/* harmony export */   getArcMeasure: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.getArcMeasure),\n/* harmony export */   getCursor: () => (/* reexport safe */ _lib_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_63__.getCursor),\n/* harmony export */   getDefaultCdnBaseUrl: () => (/* reexport safe */ _lib_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_103__.getDefaultCdnBaseUrl),\n/* harmony export */   getDefaultColorTheme: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.getDefaultColorTheme),\n/* harmony export */   getDefaultTranslationLocale: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.getDefaultTranslationLocale),\n/* harmony export */   getErrorAnnotations: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getErrorAnnotations),\n/* harmony export */   getFirstFromIterable: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getFirstFromIterable),\n/* harmony export */   getFreshUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__.getFreshUserPreferences),\n/* harmony export */   getFromLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getFromSessionStorage),\n/* harmony export */   getHashForBuffer: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getHashForObject),\n/* harmony export */   getHashForString: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getHashForString),\n/* harmony export */   getIncrementedName: () => (/* reexport safe */ _lib_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_107__.getIncrementedName),\n/* harmony export */   getIndexAbove: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndexBetween),\n/* harmony export */   getIndices: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndices),\n/* harmony export */   getIndicesAbove: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween),\n/* harmony export */   getOwnProperty: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty),\n/* harmony export */   getPerfectDashProps: () => (/* reexport safe */ _lib_editor_shapes_shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_53__.getPerfectDashProps),\n/* harmony export */   getPointInArcT: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.getPointInArcT),\n/* harmony export */   getPointOnCircle: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.getPointOnCircle),\n/* harmony export */   getPointerInfo: () => (/* reexport safe */ _lib_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_108__.getPointerInfo),\n/* harmony export */   getPointsOnArc: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.getPointsOnArc),\n/* harmony export */   getPolygonVertices: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.getPolygonVertices),\n/* harmony export */   getRotationSnapshot: () => (/* reexport safe */ _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_114__.getRotationSnapshot),\n/* harmony export */   getShapePropKeysByStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.getShapePropKeysByStyle),\n/* harmony export */   getSnapshot: () => (/* reexport safe */ _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_32__.getSnapshot),\n/* harmony export */   getSvgPathFromPoints: () => (/* reexport safe */ _lib_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_109__.getSvgPathFromPoints),\n/* harmony export */   getUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__.getUserPreferences),\n/* harmony export */   groupBy: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.groupBy),\n/* harmony export */   groupShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.groupShapeProps),\n/* harmony export */   hardReset: () => (/* reexport safe */ _lib_utils_sync_hardReset_mjs__WEBPACK_IMPORTED_MODULE_116__.hardReset),\n/* harmony export */   hardResetEditor: () => (/* reexport safe */ _lib_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_110__.hardResetEditor),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty),\n/* harmony export */   highlightShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.highlightShapeProps),\n/* harmony export */   idValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.idValidator),\n/* harmony export */   imageShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.imageShapeProps),\n/* harmony export */   inlineBase64AssetStore: () => (/* reexport safe */ _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_35__.inlineBase64AssetStore),\n/* harmony export */   intersectCircleCircle: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectCircleCircle),\n/* harmony export */   intersectCirclePolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectCirclePolygon),\n/* harmony export */   intersectCirclePolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectCirclePolyline),\n/* harmony export */   intersectLineSegmentCircle: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectLineSegmentCircle),\n/* harmony export */   intersectLineSegmentLineSegment: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectLineSegmentLineSegment),\n/* harmony export */   intersectLineSegmentPolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectLineSegmentPolygon),\n/* harmony export */   intersectLineSegmentPolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectLineSegmentPolyline),\n/* harmony export */   intersectPolygonBounds: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectPolygonBounds),\n/* harmony export */   intersectPolygonPolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.intersectPolygonPolygon),\n/* harmony export */   invLerp: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.invLerp),\n/* harmony export */   isAccelKey: () => (/* reexport safe */ _lib_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_111__.isAccelKey),\n/* harmony export */   isBinding: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.isBinding),\n/* harmony export */   isBindingId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.isBindingId),\n/* harmony export */   isDefined: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.isNonNull),\n/* harmony export */   isNonNullish: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.isNonNullish),\n/* harmony export */   isPageId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.isPageId),\n/* harmony export */   isRecordsDiffEmpty: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.isRecordsDiffEmpty),\n/* harmony export */   isSafeFloat: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.isSafeFloat),\n/* harmony export */   isShape: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.isShape),\n/* harmony export */   isShapeId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.isShapeId),\n/* harmony export */   last: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.last),\n/* harmony export */   lerp: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.lerp),\n/* harmony export */   lineShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.lineShapeProps),\n/* harmony export */   linesIntersect: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.linesIntersect),\n/* harmony export */   lns: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.lns),\n/* harmony export */   loadSessionStateSnapshotIntoStore: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_33__.loadSessionStateSnapshotIntoStore),\n/* harmony export */   loadSnapshot: () => (/* reexport safe */ _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_32__.loadSnapshot),\n/* harmony export */   loopToHtmlElement: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__.loopToHtmlElement),\n/* harmony export */   mapObjectMapValues: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.mapObjectMapValues),\n/* harmony export */   measureAverageDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.measureCbDuration),\n/* harmony export */   measureDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.measureDuration),\n/* harmony export */   minBy: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.minBy),\n/* harmony export */   mockUniqueId: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.mockUniqueId),\n/* harmony export */   modulate: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.modulate),\n/* harmony export */   noop: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.noop),\n/* harmony export */   normalizeWheel: () => (/* reexport safe */ _lib_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_112__.normalizeWheel),\n/* harmony export */   noteShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.noteShapeProps),\n/* harmony export */   objectMapEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapValues),\n/* harmony export */   omitFromStackTrace: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.omitFromStackTrace),\n/* harmony export */   opacityValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.opacityValidator),\n/* harmony export */   openWindow: () => (/* reexport safe */ _lib_utils_window_open_mjs__WEBPACK_IMPORTED_MODULE_118__.openWindow),\n/* harmony export */   pageIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.pageIdValidator),\n/* harmony export */   parentIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.parentIdValidator),\n/* harmony export */   parseDeepLinkString: () => (/* reexport safe */ _lib_utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_105__.parseDeepLinkString),\n/* harmony export */   parseMigrationId: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.parseMigrationId),\n/* harmony export */   partition: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.partition),\n/* harmony export */   perimeterOfEllipse: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.perimeterOfEllipse),\n/* harmony export */   pluckPreservingValues: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.pluckPreservingValues),\n/* harmony export */   pointInPolygon: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.pointInPolygon),\n/* harmony export */   polygonIntersectsPolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.polygonIntersectsPolyline),\n/* harmony export */   polygonsIntersect: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__.polygonsIntersect),\n/* harmony export */   precise: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.precise),\n/* harmony export */   preventDefault: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__.preventDefault),\n/* harmony export */   promiseWithResolve: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.promiseWithResolve),\n/* harmony export */   radiansToDegrees: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.radiansToDegrees),\n/* harmony export */   rangeIntersection: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.rangeIntersection),\n/* harmony export */   react: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.react),\n/* harmony export */   refreshPage: () => (/* reexport safe */ _lib_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_113__.refreshPage),\n/* harmony export */   registerTldrawLibraryVersion: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion),\n/* harmony export */   releasePointerCapture: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__.releasePointerCapture),\n/* harmony export */   resizeBox: () => (/* reexport safe */ _lib_editor_shapes_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_54__.resizeBox),\n/* harmony export */   restoreUniqueId: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.restoreUniqueId),\n/* harmony export */   reverseRecordsDiff: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.reverseRecordsDiff),\n/* harmony export */   rng: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.rng),\n/* harmony export */   rootBindingMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.rootBindingMigrations),\n/* harmony export */   rootShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.rootShapeMigrations),\n/* harmony export */   rotateArray: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.rotateArray),\n/* harmony export */   rotateSelectionHandle: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_83__.rotateSelectionHandle),\n/* harmony export */   runtime: () => (/* reexport safe */ _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_115__.runtime),\n/* harmony export */   safeParseUrl: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl),\n/* harmony export */   sanitizeId: () => (/* reexport safe */ _lib_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_77__.sanitizeId),\n/* harmony export */   scribbleValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.scribbleValidator),\n/* harmony export */   setInLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.setInSessionStorage),\n/* harmony export */   setPointerCapture: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__.setPointerCapture),\n/* harmony export */   setRuntimeOverrides: () => (/* reexport safe */ _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_115__.setRuntimeOverrides),\n/* harmony export */   setUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__.setUserPreferences),\n/* harmony export */   shapeIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.shapeIdValidator),\n/* harmony export */   shortAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.shortAngleDist),\n/* harmony export */   sleep: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sleep),\n/* harmony export */   snapAngle: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.snapAngle),\n/* harmony export */   sortById: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortById),\n/* harmony export */   sortByIndex: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex),\n/* harmony export */   squashRecordDiffs: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_8__.squashRecordDiffsMutable),\n/* harmony export */   stopEventPropagation: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__.stopEventPropagation),\n/* harmony export */   structuredClone: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone),\n/* harmony export */   textShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.textShapeProps),\n/* harmony export */   throttle: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.throttle),\n/* harmony export */   throttleToNextFrame: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.throttleToNextFrame),\n/* harmony export */   tlenv: () => (/* reexport safe */ _lib_globals_environment_mjs__WEBPACK_IMPORTED_MODULE_59__.tlenv),\n/* harmony export */   tlmenus: () => (/* reexport safe */ _lib_globals_menus_mjs__WEBPACK_IMPORTED_MODULE_60__.tlmenus),\n/* harmony export */   tltime: () => (/* reexport safe */ _lib_globals_time_mjs__WEBPACK_IMPORTED_MODULE_61__.tltime),\n/* harmony export */   toDomPrecision: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.toDomPrecision),\n/* harmony export */   toFixed: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.toFixed),\n/* harmony export */   toPrecision: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__.toPrecision),\n/* harmony export */   track: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.track),\n/* harmony export */   transact: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.transact),\n/* harmony export */   transaction: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.transaction),\n/* harmony export */   uniq: () => (/* reexport safe */ _lib_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_117__.uniq),\n/* harmony export */   uniqueId: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniqueId),\n/* harmony export */   useAtom: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useAtom),\n/* harmony export */   useComputed: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useComputed),\n/* harmony export */   useContainer: () => (/* reexport safe */ _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_62__.useContainer),\n/* harmony export */   useContainerIfExists: () => (/* reexport safe */ _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_62__.useContainerIfExists),\n/* harmony export */   useDelaySvgExport: () => (/* reexport safe */ _lib_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_57__.useDelaySvgExport),\n/* harmony export */   useEditor: () => (/* reexport safe */ _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_64__.useEditor),\n/* harmony export */   useEditorComponents: () => (/* reexport safe */ _lib_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_65__.useEditorComponents),\n/* harmony export */   useEvent: () => (/* reexport safe */ _lib_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_66__.useEvent),\n/* harmony export */   useGlobalMenuIsOpen: () => (/* reexport safe */ _lib_hooks_useGlobalMenuIsOpen_mjs__WEBPACK_IMPORTED_MODULE_67__.useGlobalMenuIsOpen),\n/* harmony export */   useIsCropping: () => (/* reexport safe */ _lib_hooks_useIsCropping_mjs__WEBPACK_IMPORTED_MODULE_69__.useIsCropping),\n/* harmony export */   useIsDarkMode: () => (/* reexport safe */ _lib_hooks_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_70__.useIsDarkMode),\n/* harmony export */   useIsEditing: () => (/* reexport safe */ _lib_hooks_useIsEditing_mjs__WEBPACK_IMPORTED_MODULE_71__.useIsEditing),\n/* harmony export */   useLocalStore: () => (/* reexport safe */ _lib_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_72__.useLocalStore),\n/* harmony export */   useMaybeEditor: () => (/* reexport safe */ _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_64__.useMaybeEditor),\n/* harmony export */   useOnMount: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useOnMount),\n/* harmony export */   usePassThroughWheelEvents: () => (/* reexport safe */ _lib_hooks_usePassThroughWheelEvents_mjs__WEBPACK_IMPORTED_MODULE_73__.usePassThroughWheelEvents),\n/* harmony export */   usePeerIds: () => (/* reexport safe */ _lib_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_74__.usePeerIds),\n/* harmony export */   usePresence: () => (/* reexport safe */ _lib_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_75__.usePresence),\n/* harmony export */   useQuickReactor: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useQuickReactor),\n/* harmony export */   useReactor: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useReactor),\n/* harmony export */   useRefState: () => (/* reexport safe */ _lib_hooks_useRefState_mjs__WEBPACK_IMPORTED_MODULE_76__.useRefState),\n/* harmony export */   useSafeId: () => (/* reexport safe */ _lib_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_77__.useSafeId),\n/* harmony export */   useSelectionEvents: () => (/* reexport safe */ _lib_hooks_useSelectionEvents_mjs__WEBPACK_IMPORTED_MODULE_78__.useSelectionEvents),\n/* harmony export */   useShallowArrayIdentity: () => (/* reexport safe */ _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_68__.useShallowArrayIdentity),\n/* harmony export */   useShallowObjectIdentity: () => (/* reexport safe */ _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_68__.useShallowObjectIdentity),\n/* harmony export */   useStateTracking: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useStateTracking),\n/* harmony export */   useSvgExportContext: () => (/* reexport safe */ _lib_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_57__.useSvgExportContext),\n/* harmony export */   useTLSchemaFromUtils: () => (/* reexport safe */ _lib_hooks_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_79__.useTLSchemaFromUtils),\n/* harmony export */   useTLStore: () => (/* reexport safe */ _lib_hooks_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_79__.useTLStore),\n/* harmony export */   useTldrawUser: () => (/* reexport safe */ _lib_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_36__.useTldrawUser),\n/* harmony export */   useTransform: () => (/* reexport safe */ _lib_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_80__.useTransform),\n/* harmony export */   useValue: () => (/* reexport safe */ _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__.useValue),\n/* harmony export */   validateIndexKey: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.validateIndexKey),\n/* harmony export */   vecModelValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.vecModelValidator),\n/* harmony export */   videoShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__.videoShapeProps),\n/* harmony export */   warnDeprecatedGetter: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.warnDeprecatedGetter),\n/* harmony export */   warnOnce: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.warnOnce),\n/* harmony export */   whyAmIRunning: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_6__.whyAmIRunning)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var core_js_stable_array_at_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/stable/array/at.js */ \"(ssr)/./node_modules/core-js/stable/array/at.js\");\n/* harmony import */ var core_js_stable_array_flat_map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/stable/array/flat-map.js */ \"(ssr)/./node_modules/core-js/stable/array/flat-map.js\");\n/* harmony import */ var core_js_stable_array_flat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/stable/array/flat.js */ \"(ssr)/./node_modules/core-js/stable/array/flat.js\");\n/* harmony import */ var core_js_stable_string_at_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/stable/string/at.js */ \"(ssr)/./node_modules/core-js/stable/string/at.js\");\n/* harmony import */ var core_js_stable_string_replace_all_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/stable/string/replace-all.js */ \"(ssr)/./node_modules/core-js/stable/string/replace-all.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/TldrawEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\");\n/* harmony import */ var _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/components/ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n/* harmony import */ var _lib_components_HTMLContainer_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/components/HTMLContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs\");\n/* harmony import */ var _lib_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/components/SVGContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/components/default-components/DefaultBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/components/default-components/DefaultBrush.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCanvas.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCollaboratorHint.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/components/default-components/DefaultGrid.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lib/components/default-components/DefaultHandle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./lib/components/default-components/DefaultHandles.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./lib/components/default-components/DefaultScribble.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSelectionBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSelectionForeground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./lib/components/default-components/DefaultShapeIndicator.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultShapeIndicators_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./lib/components/default-components/DefaultShapeIndicators.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicators.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSnapIndictor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSpinner.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSvgDefs.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\");\n/* harmony import */ var _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./lib/config/TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./lib/config/TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n/* harmony import */ var _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./lib/config/TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\n/* harmony import */ var _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./lib/config/createTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\");\n/* harmony import */ var _lib_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./lib/config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _lib_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./lib/config/defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n/* harmony import */ var _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./lib/constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _lib_editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./lib/editor/Editor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\");\n/* harmony import */ var _lib_editor_bindings_BindingUtil_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./lib/editor/bindings/BindingUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs\");\n/* harmony import */ var _lib_editor_managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./lib/editor/managers/ClickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\");\n/* harmony import */ var _lib_editor_managers_EdgeScrollManager_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./lib/editor/managers/EdgeScrollManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EdgeScrollManager.mjs\");\n/* harmony import */ var _lib_editor_managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./lib/editor/managers/HistoryManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\");\n/* harmony import */ var _lib_editor_managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./lib/editor/managers/ScribbleManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/BoundsSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/HandleSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/SnapManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\");\n/* harmony import */ var _lib_editor_managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./lib/editor/managers/TextManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\");\n/* harmony import */ var _lib_editor_managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./lib/editor/managers/UserPreferencesManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\");\n/* harmony import */ var _lib_editor_shapes_BaseBoxShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./lib/editor/shapes/BaseBoxShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./lib/editor/shapes/ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./lib/editor/shapes/group/GroupShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./lib/editor/shapes/shared/getPerfectDashProps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs\");\n/* harmony import */ var _lib_editor_shapes_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./lib/editor/shapes/shared/resizeBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\");\n/* harmony import */ var _lib_editor_tools_BaseBoxShapeTool_BaseBoxShapeTool_mjs__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs\");\n/* harmony import */ var _lib_editor_tools_StateNode_mjs__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./lib/editor/tools/StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n/* harmony import */ var _lib_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./lib/editor/types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n/* harmony import */ var _lib_editor_types_event_types_mjs__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./lib/editor/types/event-types.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\");\n/* harmony import */ var _lib_globals_environment_mjs__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./lib/globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n/* harmony import */ var _lib_globals_menus_mjs__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./lib/globals/menus.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs\");\n/* harmony import */ var _lib_globals_time_mjs__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./lib/globals/time.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/time.mjs\");\n/* harmony import */ var _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./lib/hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _lib_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./lib/hooks/useCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\");\n/* harmony import */ var _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./lib/hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _lib_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./lib/hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _lib_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./lib/hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n/* harmony import */ var _lib_hooks_useGlobalMenuIsOpen_mjs__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./lib/hooks/useGlobalMenuIsOpen.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGlobalMenuIsOpen.mjs\");\n/* harmony import */ var _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./lib/hooks/useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n/* harmony import */ var _lib_hooks_useIsCropping_mjs__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./lib/hooks/useIsCropping.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs\");\n/* harmony import */ var _lib_hooks_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./lib/hooks/useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n/* harmony import */ var _lib_hooks_useIsEditing_mjs__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./lib/hooks/useIsEditing.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs\");\n/* harmony import */ var _lib_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./lib/hooks/useLocalStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\");\n/* harmony import */ var _lib_hooks_usePassThroughWheelEvents_mjs__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./lib/hooks/usePassThroughWheelEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePassThroughWheelEvents.mjs\");\n/* harmony import */ var _lib_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./lib/hooks/usePeerIds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\");\n/* harmony import */ var _lib_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./lib/hooks/usePresence.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\");\n/* harmony import */ var _lib_hooks_useRefState_mjs__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./lib/hooks/useRefState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs\");\n/* harmony import */ var _lib_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./lib/hooks/useSafeId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\");\n/* harmony import */ var _lib_hooks_useSelectionEvents_mjs__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./lib/hooks/useSelectionEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs\");\n/* harmony import */ var _lib_hooks_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./lib/hooks/useTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs\");\n/* harmony import */ var _lib_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./lib/hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _lib_license_LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./lib/license/LicenseManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs\");\n/* harmony import */ var _lib_options_mjs__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./lib/options.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\");\n/* harmony import */ var _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./lib/primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _lib_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./lib/primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _lib_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./lib/primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _lib_primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./lib/primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Arc2d_mjs__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./lib/primitives/geometry/Arc2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Circle2d_mjs__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./lib/primitives/geometry/Circle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./lib/primitives/geometry/CubicBezier2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_CubicSpline2d_mjs__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./lib/primitives/geometry/CubicSpline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Edge2d_mjs__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./lib/primitives/geometry/Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Ellipse2d_mjs__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./lib/primitives/geometry/Ellipse2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./lib/primitives/geometry/Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./lib/primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Point2d_mjs__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./lib/primitives/geometry/Point2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./lib/primitives/geometry/Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./lib/primitives/geometry/Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./lib/primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Stadium2d_mjs__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./lib/primitives/geometry/Stadium2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs\");\n/* harmony import */ var _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./lib/primitives/intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./lib/primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./lib/utils/SharedStylesMap.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\");\n/* harmony import */ var _lib_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./lib/utils/assets.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\");\n/* harmony import */ var _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./lib/utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _lib_utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./lib/utils/deepLinks.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/deepLinks.mjs\");\n/* harmony import */ var _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./lib/utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _lib_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./lib/utils/getIncrementedName.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\");\n/* harmony import */ var _lib_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./lib/utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _lib_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./lib/utils/getSvgPathFromPoints.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\");\n/* harmony import */ var _lib_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./lib/utils/hardResetEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\");\n/* harmony import */ var _lib_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./lib/utils/keyboard.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\");\n/* harmony import */ var _lib_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! ./lib/utils/normalizeWheel.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\");\n/* harmony import */ var _lib_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(/*! ./lib/utils/refreshPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\");\n/* harmony import */ var _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(/*! ./lib/utils/rotation.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\");\n/* harmony import */ var _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(/*! ./lib/utils/runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n/* harmony import */ var _lib_utils_sync_hardReset_mjs__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(/*! ./lib/utils/sync/hardReset.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs\");\n/* harmony import */ var _lib_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(/*! ./lib/utils/uniq.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\");\n/* harmony import */ var _lib_utils_window_open_mjs__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(/*! ./lib/utils/window-open.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction debugEnableLicensing() {\n  return;\n}\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/editor\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkQ7QUFDekI7QUFDTTtBQUNKO0FBQ0Q7QUFDUztBQVV2QjtBQVNNO0FBQ0M7QUFDRztBQUNIO0FBQ0c7QUFNRDtBQUlZO0FBQ3VCO0FBQ0Y7QUFDNkI7QUFDVjtBQUdyQjtBQUdVO0FBR1Y7QUFHTztBQUNZO0FBR25CO0FBR0M7QUFHQztBQUdXO0FBR0E7QUFHTDtBQUNpQztBQUduQztBQUNtQjtBQUNBO0FBSTdDO0FBTU07QUFPTDtBQUtKO0FBQ29DO0FBQ2hCO0FBQ21DO0FBRzlEO0FBR2M7QUFDdUI7QUFDVTtBQUNOO0FBQ0U7QUFHakI7QUFDcUI7QUFHckI7QUFDUztBQUNzQjtBQUNkO0FBR2pDO0FBQ21DO0FBQ1c7QUFDcEI7QUFDdUI7QUFDL0I7QUFJWjtBQUdMO0FBQ1U7QUFDSjtBQUNGO0FBS1Y7QUFDZ0I7QUFDZ0I7QUFDSTtBQUN0QjtBQUNzQjtBQUNzQjtBQUNsQztBQUNBO0FBQ0Y7QUFDRTtBQUN3QjtBQUM5QjtBQUNFO0FBQ0E7QUFDUTtBQUNNO0FBQ007QUFDbEI7QUFHbEI7QUFDZTtBQUt2QjtBQUNhO0FBQ0E7QUFDUTtBQUNLO0FBQ007QUFDVTtBQUNBO0FBQ2Q7QUFDTTtBQUNFO0FBQ047QUFDQTtBQUNJO0FBQ0U7QUFDRTtBQUNKO0FBYzVCO0FBaUNKO0FBSUs7QUFDb0M7QUFJeEM7QUFJRjtBQU9OO0FBQzJDO0FBQ1I7QUFDWTtBQUNWO0FBQ1o7QUFDVTtBQUNOO0FBSXhCO0FBQ3FDO0FBQ1o7QUFDZjtBQUNhO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLDJFQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQTJNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vaW5kZXgubWpzP2RjMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbiB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgXCJjb3JlLWpzL3N0YWJsZS9hcnJheS9hdC5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9zdGFibGUvYXJyYXkvZmxhdC1tYXAuanNcIjtcbmltcG9ydCBcImNvcmUtanMvc3RhYmxlL2FycmF5L2ZsYXQuanNcIjtcbmltcG9ydCBcImNvcmUtanMvc3RhYmxlL3N0cmluZy9hdC5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9zdGFibGUvc3RyaW5nL3JlcGxhY2UtYWxsLmpzXCI7XG5pbXBvcnQge1xuICBFTVBUWV9BUlJBWSxcbiAgRWZmZWN0U2NoZWR1bGVyLFxuICBhdG9tLFxuICBjb21wdXRlZCxcbiAgcmVhY3QsXG4gIHRyYW5zYWN0LFxuICB0cmFuc2FjdGlvbixcbiAgd2h5QW1JUnVubmluZ1xufSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHtcbiAgdHJhY2ssXG4gIHVzZUF0b20sXG4gIHVzZUNvbXB1dGVkLFxuICB1c2VRdWlja1JlYWN0b3IsXG4gIHVzZVJlYWN0b3IsXG4gIHVzZVN0YXRlVHJhY2tpbmcsXG4gIHVzZVZhbHVlXG59IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuZXhwb3J0ICogZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmV4cG9ydCAqIGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5leHBvcnQgKiBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHtcbiAgRXJyb3JTY3JlZW4sXG4gIExvYWRpbmdTY3JlZW4sXG4gIFRsZHJhd0VkaXRvcixcbiAgdXNlT25Nb3VudFxufSBmcm9tIFwiLi9saWIvVGxkcmF3RWRpdG9yLm1qc1wiO1xuaW1wb3J0IHtcbiAgRXJyb3JCb3VuZGFyeSxcbiAgT3B0aW9uYWxFcnJvckJvdW5kYXJ5XG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkubWpzXCI7XG5pbXBvcnQgeyBIVE1MQ29udGFpbmVyIH0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvSFRNTENvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IFNWR0NvbnRhaW5lciB9IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL1NWR0NvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRCYWNrZ3JvdW5kIH0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCYWNrZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEJydXNoIH0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCcnVzaC5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRDYW52YXNcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDYW52YXMubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0Q29sbGFib3JhdG9ySGludFxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdENvbGxhYm9yYXRvckhpbnQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0Q3Vyc29yXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0Q3Vyc29yLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEVycm9yRmFsbGJhY2tcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEdyaWQgfSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEdyaWQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0SGFuZGxlXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0SGFuZGxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEhhbmRsZXNcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGVzLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNjcmliYmxlXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2NyaWJibGUubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZFxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZFxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2hhcGVJbmRpY2F0b3Jcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvci5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaGFwZUluZGljYXRvcnMgfSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlSW5kaWNhdG9ycy5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRTbmFwSW5kaWNhdG9yXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U25hcEluZGljdG9yLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNwaW5uZXIgfSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNwaW5uZXIubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U3ZnRGVmcyB9IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U3ZnRGVmcy5tanNcIjtcbmltcG9ydCB7XG4gIGdldFNuYXBzaG90LFxuICBsb2FkU25hcHNob3Rcbn0gZnJvbSBcIi4vbGliL2NvbmZpZy9UTEVkaXRvclNuYXBzaG90Lm1qc1wiO1xuaW1wb3J0IHtcbiAgVEFCX0lELFxuICBjcmVhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdFNpZ25hbCxcbiAgZXh0cmFjdFNlc3Npb25TdGF0ZUZyb21MZWdhY3lTbmFwc2hvdCxcbiAgbG9hZFNlc3Npb25TdGF0ZVNuYXBzaG90SW50b1N0b3JlXG59IGZyb20gXCIuL2xpYi9jb25maWcvVExTZXNzaW9uU3RhdGVTbmFwc2hvdC5tanNcIjtcbmltcG9ydCB7XG4gIFVTRVJfQ09MT1JTLFxuICBkZWZhdWx0VXNlclByZWZlcmVuY2VzLFxuICBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcyxcbiAgZ2V0VXNlclByZWZlcmVuY2VzLFxuICBzZXRVc2VyUHJlZmVyZW5jZXNcbn0gZnJvbSBcIi4vbGliL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRMU2NoZW1hRnJvbVV0aWxzLFxuICBjcmVhdGVUTFN0b3JlLFxuICBpbmxpbmVCYXNlNjRBc3NldFN0b3JlXG59IGZyb20gXCIuL2xpYi9jb25maWcvY3JlYXRlVExTdG9yZS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVRMVXNlciwgdXNlVGxkcmF3VXNlciB9IGZyb20gXCIuL2xpYi9jb25maWcvY3JlYXRlVExVc2VyLm1qc1wiO1xuaW1wb3J0IHsgY29yZVNoYXBlcyB9IGZyb20gXCIuL2xpYi9jb25maWcvZGVmYXVsdFNoYXBlcy5tanNcIjtcbmltcG9ydCB7IERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMsIERFRkFVTFRfQ0FNRVJBX09QVElPTlMsIFNJREVTIH0gZnJvbSBcIi4vbGliL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7XG4gIEVkaXRvclxufSBmcm9tIFwiLi9saWIvZWRpdG9yL0VkaXRvci5tanNcIjtcbmltcG9ydCB7XG4gIEJpbmRpbmdVdGlsXG59IGZyb20gXCIuL2xpYi9lZGl0b3IvYmluZGluZ3MvQmluZGluZ1V0aWwubWpzXCI7XG5pbXBvcnQgeyBDbGlja01hbmFnZXIgfSBmcm9tIFwiLi9saWIvZWRpdG9yL21hbmFnZXJzL0NsaWNrTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IEVkZ2VTY3JvbGxNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9FZGdlU2Nyb2xsTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IEhpc3RvcnlNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFNjcmliYmxlTWFuYWdlciB9IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvU2NyaWJibGVNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHtcbiAgQm91bmRzU25hcHNcbn0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9Cb3VuZHNTbmFwcy5tanNcIjtcbmltcG9ydCB7IEhhbmRsZVNuYXBzIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9IYW5kbGVTbmFwcy5tanNcIjtcbmltcG9ydCB7XG4gIFNuYXBNYW5hZ2VyXG59IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvU25hcE1hbmFnZXIvU25hcE1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBUZXh0TWFuYWdlciB9IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvVGV4dE1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgQmFzZUJveFNoYXBlVXRpbCB9IGZyb20gXCIuL2xpYi9lZGl0b3Ivc2hhcGVzL0Jhc2VCb3hTaGFwZVV0aWwubWpzXCI7XG5pbXBvcnQge1xuICBTaGFwZVV0aWxcbn0gZnJvbSBcIi4vbGliL2VkaXRvci9zaGFwZXMvU2hhcGVVdGlsLm1qc1wiO1xuaW1wb3J0IHsgR3JvdXBTaGFwZVV0aWwgfSBmcm9tIFwiLi9saWIvZWRpdG9yL3NoYXBlcy9ncm91cC9Hcm91cFNoYXBlVXRpbC5tanNcIjtcbmltcG9ydCB7IGdldFBlcmZlY3REYXNoUHJvcHMgfSBmcm9tIFwiLi9saWIvZWRpdG9yL3NoYXBlcy9zaGFyZWQvZ2V0UGVyZmVjdERhc2hQcm9wcy5tanNcIjtcbmltcG9ydCB7IHJlc2l6ZUJveCB9IGZyb20gXCIuL2xpYi9lZGl0b3Ivc2hhcGVzL3NoYXJlZC9yZXNpemVCb3gubWpzXCI7XG5pbXBvcnQgeyBCYXNlQm94U2hhcGVUb29sIH0gZnJvbSBcIi4vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL0Jhc2VCb3hTaGFwZVRvb2wubWpzXCI7XG5pbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi9saWIvZWRpdG9yL3Rvb2xzL1N0YXRlTm9kZS5tanNcIjtcbmltcG9ydCB7XG4gIHVzZURlbGF5U3ZnRXhwb3J0LFxuICB1c2VTdmdFeHBvcnRDb250ZXh0XG59IGZyb20gXCIuL2xpYi9lZGl0b3IvdHlwZXMvU3ZnRXhwb3J0Q29udGV4dC5tanNcIjtcbmltcG9ydCB7XG4gIEVWRU5UX05BTUVfTUFQXG59IGZyb20gXCIuL2xpYi9lZGl0b3IvdHlwZXMvZXZlbnQtdHlwZXMubWpzXCI7XG5pbXBvcnQgeyB0bGVudiB9IGZyb20gXCIuL2xpYi9nbG9iYWxzL2Vudmlyb25tZW50Lm1qc1wiO1xuaW1wb3J0IHsgdGxtZW51cyB9IGZyb20gXCIuL2xpYi9nbG9iYWxzL21lbnVzLm1qc1wiO1xuaW1wb3J0IHsgdGx0aW1lIH0gZnJvbSBcIi4vbGliL2dsb2JhbHMvdGltZS5tanNcIjtcbmltcG9ydCB7XG4gIENvbnRhaW5lclByb3ZpZGVyLFxuICB1c2VDb250YWluZXIsXG4gIHVzZUNvbnRhaW5lcklmRXhpc3RzXG59IGZyb20gXCIuL2xpYi9ob29rcy91c2VDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJzb3IgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlQ3Vyc29yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yLCB1c2VNYXliZUVkaXRvciB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3JDb21wb25lbnRzIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VFdmVudCB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VFdmVudC5tanNcIjtcbmltcG9ydCB7IHVzZUdsb2JhbE1lbnVJc09wZW4gfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlR2xvYmFsTWVudUlzT3Blbi5tanNcIjtcbmltcG9ydCB7IHVzZVNoYWxsb3dBcnJheUlkZW50aXR5LCB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlSWRlbnRpdHkubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0Nyb3BwaW5nIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUlzQ3JvcHBpbmcubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0RhcmtNb2RlIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUlzRGFya01vZGUubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0VkaXRpbmcgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlSXNFZGl0aW5nLm1qc1wiO1xuaW1wb3J0IHsgdXNlTG9jYWxTdG9yZSB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VMb2NhbFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgdXNlUGFzc1Rocm91Z2hXaGVlbEV2ZW50cyB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VQYXNzVGhyb3VnaFdoZWVsRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlUGVlcklkcyB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VQZWVySWRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlUHJlc2VuY2UgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlUHJlc2VuY2UubWpzXCI7XG5pbXBvcnQgeyB1c2VSZWZTdGF0ZSB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VSZWZTdGF0ZS5tanNcIjtcbmltcG9ydCB7IHNhbml0aXplSWQsIHVzZVNhZmVJZCB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VTYWZlSWQubWpzXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3Rpb25FdmVudHMgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlU2VsZWN0aW9uRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlVExTY2hlbWFGcm9tVXRpbHMsIHVzZVRMU3RvcmUgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlVExTdG9yZS5tanNcIjtcbmltcG9ydCB7IHVzZVRyYW5zZm9ybSB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VUcmFuc2Zvcm0ubWpzXCI7XG5pbXBvcnQge1xuICBMaWNlbnNlTWFuYWdlclxufSBmcm9tIFwiLi9saWIvbGljZW5zZS9MaWNlbnNlTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRUbGRyYXdPcHRpb25zIH0gZnJvbSBcIi4vbGliL29wdGlvbnMubWpzXCI7XG5pbXBvcnQge1xuICBCb3gsXG4gIFJPVEFURV9DT1JORVJfVE9fU0VMRUNUSU9OX0NPUk5FUixcbiAgcm90YXRlU2VsZWN0aW9uSGFuZGxlXG59IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL0JveC5tanNcIjtcbmltcG9ydCB7IE1hdCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL01hdC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IEVBU0lOR1MgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9lYXNpbmdzLm1qc1wiO1xuaW1wb3J0IHsgQXJjMmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9BcmMyZC5tanNcIjtcbmltcG9ydCB7IENpcmNsZTJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ2lyY2xlMmQubWpzXCI7XG5pbXBvcnQgeyBDdWJpY0JlemllcjJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNCZXppZXIyZC5tanNcIjtcbmltcG9ydCB7IEN1YmljU3BsaW5lMmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9DdWJpY1NwbGluZTJkLm1qc1wiO1xuaW1wb3J0IHsgRWRnZTJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWRnZTJkLm1qc1wiO1xuaW1wb3J0IHsgRWxsaXBzZTJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWxsaXBzZTJkLm1qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0dlb21ldHJ5MmQubWpzXCI7XG5pbXBvcnQgeyBHcm91cDJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanNcIjtcbmltcG9ydCB7IFBvaW50MmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2ludDJkLm1qc1wiO1xuaW1wb3J0IHsgUG9seWdvbjJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWdvbjJkLm1qc1wiO1xuaW1wb3J0IHsgUG9seWxpbmUyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1BvbHlsaW5lMmQubWpzXCI7XG5pbXBvcnQgeyBSZWN0YW5nbGUyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1JlY3RhbmdsZTJkLm1qc1wiO1xuaW1wb3J0IHsgU3RhZGl1bTJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvU3RhZGl1bTJkLm1qc1wiO1xuaW1wb3J0IHtcbiAgaW50ZXJzZWN0Q2lyY2xlQ2lyY2xlLFxuICBpbnRlcnNlY3RDaXJjbGVQb2x5Z29uLFxuICBpbnRlcnNlY3RDaXJjbGVQb2x5bGluZSxcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRDaXJjbGUsXG4gIGludGVyc2VjdExpbmVTZWdtZW50TGluZVNlZ21lbnQsXG4gIGludGVyc2VjdExpbmVTZWdtZW50UG9seWdvbixcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRQb2x5bGluZSxcbiAgaW50ZXJzZWN0UG9seWdvbkJvdW5kcyxcbiAgaW50ZXJzZWN0UG9seWdvblBvbHlnb24sXG4gIGxpbmVzSW50ZXJzZWN0LFxuICBwb2x5Z29uSW50ZXJzZWN0c1BvbHlsaW5lLFxuICBwb2x5Z29uc0ludGVyc2VjdFxufSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9pbnRlcnNlY3QubWpzXCI7XG5pbXBvcnQge1xuICBIQUxGX1BJLFxuICBQSSxcbiAgUEkyLFxuICBTSU4sXG4gIGFuZ2xlRGlzdGFuY2UsXG4gIGFwcHJveGltYXRlbHksXG4gIGFyZUFuZ2xlc0NvbXBhdGlibGUsXG4gIGF2ZXJhZ2UsXG4gIGNhbm9uaWNhbGl6ZVJvdGF0aW9uLFxuICBjZW50ZXJPZkNpcmNsZUZyb21UaHJlZVBvaW50cyxcbiAgY2xhbXAsXG4gIGNsYW1wUmFkaWFucyxcbiAgY2xvY2t3aXNlQW5nbGVEaXN0LFxuICBjb3VudGVyQ2xvY2t3aXNlQW5nbGVEaXN0LFxuICBkZWdyZWVzVG9SYWRpYW5zLFxuICBnZXRBcmNNZWFzdXJlLFxuICBnZXRQb2ludEluQXJjVCxcbiAgZ2V0UG9pbnRPbkNpcmNsZSxcbiAgZ2V0UG9pbnRzT25BcmMsXG4gIGdldFBvbHlnb25WZXJ0aWNlcyxcbiAgaXNTYWZlRmxvYXQsXG4gIHBlcmltZXRlck9mRWxsaXBzZSxcbiAgcG9pbnRJblBvbHlnb24sXG4gIHByZWNpc2UsXG4gIHJhZGlhbnNUb0RlZ3JlZXMsXG4gIHJhbmdlSW50ZXJzZWN0aW9uLFxuICBzaG9ydEFuZ2xlRGlzdCxcbiAgc25hcEFuZ2xlLFxuICB0b0RvbVByZWNpc2lvbixcbiAgdG9GaXhlZCxcbiAgdG9QcmVjaXNpb25cbn0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5pbXBvcnQge1xuICBSZWFkb25seVNoYXJlZFN0eWxlTWFwLFxuICBTaGFyZWRTdHlsZU1hcFxufSBmcm9tIFwiLi9saWIvdXRpbHMvU2hhcmVkU3R5bGVzTWFwLm1qc1wiO1xuaW1wb3J0IHsgZGF0YVVybFRvRmlsZSwgZ2V0RGVmYXVsdENkbkJhc2VVcmwgfSBmcm9tIFwiLi9saWIvdXRpbHMvYXNzZXRzLm1qc1wiO1xuaW1wb3J0IHtcbiAgZGVidWdGbGFncyxcbiAgZmVhdHVyZUZsYWdzXG59IGZyb20gXCIuL2xpYi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZURlZXBMaW5rU3RyaW5nLFxuICBwYXJzZURlZXBMaW5rU3RyaW5nXG59IGZyb20gXCIuL2xpYi91dGlscy9kZWVwTGlua3MubWpzXCI7XG5pbXBvcnQge1xuICBsb29wVG9IdG1sRWxlbWVudCxcbiAgcHJldmVudERlZmF1bHQsXG4gIHJlbGVhc2VQb2ludGVyQ2FwdHVyZSxcbiAgc2V0UG9pbnRlckNhcHR1cmUsXG4gIHN0b3BFdmVudFByb3BhZ2F0aW9uXG59IGZyb20gXCIuL2xpYi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRJbmNyZW1lbnRlZE5hbWUgfSBmcm9tIFwiLi9saWIvdXRpbHMvZ2V0SW5jcmVtZW50ZWROYW1lLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UG9pbnRlckluZm8gfSBmcm9tIFwiLi9saWIvdXRpbHMvZ2V0UG9pbnRlckluZm8ubWpzXCI7XG5pbXBvcnQgeyBnZXRTdmdQYXRoRnJvbVBvaW50cyB9IGZyb20gXCIuL2xpYi91dGlscy9nZXRTdmdQYXRoRnJvbVBvaW50cy5tanNcIjtcbmltcG9ydCB7IGhhcmRSZXNldEVkaXRvciB9IGZyb20gXCIuL2xpYi91dGlscy9oYXJkUmVzZXRFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyBpc0FjY2VsS2V5IH0gZnJvbSBcIi4vbGliL3V0aWxzL2tleWJvYXJkLm1qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplV2hlZWwgfSBmcm9tIFwiLi9saWIvdXRpbHMvbm9ybWFsaXplV2hlZWwubWpzXCI7XG5pbXBvcnQgeyByZWZyZXNoUGFnZSB9IGZyb20gXCIuL2xpYi91dGlscy9yZWZyZXNoUGFnZS5tanNcIjtcbmltcG9ydCB7XG4gIGFwcGx5Um90YXRpb25Ub1NuYXBzaG90U2hhcGVzLFxuICBnZXRSb3RhdGlvblNuYXBzaG90XG59IGZyb20gXCIuL2xpYi91dGlscy9yb3RhdGlvbi5tanNcIjtcbmltcG9ydCB7IHJ1bnRpbWUsIHNldFJ1bnRpbWVPdmVycmlkZXMgfSBmcm9tIFwiLi9saWIvdXRpbHMvcnVudGltZS5tanNcIjtcbmltcG9ydCB7IGhhcmRSZXNldCB9IGZyb20gXCIuL2xpYi91dGlscy9zeW5jL2hhcmRSZXNldC5tanNcIjtcbmltcG9ydCB7IHVuaXEgfSBmcm9tIFwiLi9saWIvdXRpbHMvdW5pcS5tanNcIjtcbmltcG9ydCB7IG9wZW5XaW5kb3cgfSBmcm9tIFwiLi9saWIvdXRpbHMvd2luZG93LW9wZW4ubWpzXCI7XG5mdW5jdGlvbiBkZWJ1Z0VuYWJsZUxpY2Vuc2luZygpIHtcbiAgcmV0dXJuO1xufVxucmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbihcbiAgXCJAdGxkcmF3L2VkaXRvclwiLFxuICBcIjMuMy4xXCIsXG4gIFwiZXNtXCJcbik7XG5leHBvcnQge1xuICBBcmMyZCxcbiAgQmFzZUJveFNoYXBlVG9vbCxcbiAgQmFzZUJveFNoYXBlVXRpbCxcbiAgQmluZGluZ1V0aWwsXG4gIEJvdW5kc1NuYXBzLFxuICBCb3gsXG4gIENpcmNsZTJkLFxuICBDbGlja01hbmFnZXIsXG4gIENvbnRhaW5lclByb3ZpZGVyLFxuICBDdWJpY0JlemllcjJkLFxuICBDdWJpY1NwbGluZTJkLFxuICBERUZBVUxUX0FOSU1BVElPTl9PUFRJT05TLFxuICBERUZBVUxUX0NBTUVSQV9PUFRJT05TLFxuICBEZWZhdWx0QmFja2dyb3VuZCxcbiAgRGVmYXVsdEJydXNoLFxuICBEZWZhdWx0Q2FudmFzLFxuICBEZWZhdWx0Q29sbGFib3JhdG9ySGludCxcbiAgRGVmYXVsdEN1cnNvcixcbiAgRGVmYXVsdEVycm9yRmFsbGJhY2ssXG4gIERlZmF1bHRHcmlkLFxuICBEZWZhdWx0SGFuZGxlLFxuICBEZWZhdWx0SGFuZGxlcyxcbiAgRGVmYXVsdFNjcmliYmxlLFxuICBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZCxcbiAgRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQsXG4gIERlZmF1bHRTaGFwZUluZGljYXRvcixcbiAgRGVmYXVsdFNoYXBlSW5kaWNhdG9ycyxcbiAgRGVmYXVsdFNuYXBJbmRpY2F0b3IsXG4gIERlZmF1bHRTcGlubmVyLFxuICBEZWZhdWx0U3ZnRGVmcyxcbiAgRUFTSU5HUyxcbiAgRU1QVFlfQVJSQVksXG4gIEVWRU5UX05BTUVfTUFQLFxuICBFZGdlMmQsXG4gIEVkZ2VTY3JvbGxNYW5hZ2VyLFxuICBFZGl0b3IsXG4gIEVmZmVjdFNjaGVkdWxlcixcbiAgRWxsaXBzZTJkLFxuICBFcnJvckJvdW5kYXJ5LFxuICBFcnJvclNjcmVlbixcbiAgR2VvbWV0cnkyZCxcbiAgR3JvdXAyZCxcbiAgR3JvdXBTaGFwZVV0aWwsXG4gIEhBTEZfUEksXG4gIEhUTUxDb250YWluZXIsXG4gIEhhbmRsZVNuYXBzLFxuICBIaXN0b3J5TWFuYWdlcixcbiAgTGljZW5zZU1hbmFnZXIsXG4gIExvYWRpbmdTY3JlZW4sXG4gIE1hdCxcbiAgT3B0aW9uYWxFcnJvckJvdW5kYXJ5LFxuICBQSSxcbiAgUEkyLFxuICBQb2ludDJkLFxuICBQb2x5Z29uMmQsXG4gIFBvbHlsaW5lMmQsXG4gIFJPVEFURV9DT1JORVJfVE9fU0VMRUNUSU9OX0NPUk5FUixcbiAgUmVhZG9ubHlTaGFyZWRTdHlsZU1hcCxcbiAgUmVjdGFuZ2xlMmQsXG4gIFNJREVTLFxuICBTSU4sXG4gIFNWR0NvbnRhaW5lcixcbiAgU2NyaWJibGVNYW5hZ2VyLFxuICBTaGFwZVV0aWwsXG4gIFNoYXJlZFN0eWxlTWFwLFxuICBTbmFwTWFuYWdlcixcbiAgU3RhZGl1bTJkLFxuICBTdGF0ZU5vZGUsXG4gIFRBQl9JRCxcbiAgVGV4dE1hbmFnZXIsXG4gIFRsZHJhd0VkaXRvcixcbiAgVVNFUl9DT0xPUlMsXG4gIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIsXG4gIFZlYyxcbiAgYW5nbGVEaXN0YW5jZSxcbiAgYXBwbHlSb3RhdGlvblRvU25hcHNob3RTaGFwZXMsXG4gIGFwcHJveGltYXRlbHksXG4gIGFyZUFuZ2xlc0NvbXBhdGlibGUsXG4gIGF0b20sXG4gIGF2ZXJhZ2UsXG4gIGNhbm9uaWNhbGl6ZVJvdGF0aW9uLFxuICBjZW50ZXJPZkNpcmNsZUZyb21UaHJlZVBvaW50cyxcbiAgY2xhbXAsXG4gIGNsYW1wUmFkaWFucyxcbiAgY2xvY2t3aXNlQW5nbGVEaXN0LFxuICBjb21wdXRlZCxcbiAgY29yZVNoYXBlcyxcbiAgY291bnRlckNsb2Nrd2lzZUFuZ2xlRGlzdCxcbiAgY3JlYXRlRGVlcExpbmtTdHJpbmcsXG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBjcmVhdGVUTFNjaGVtYUZyb21VdGlscyxcbiAgY3JlYXRlVExTdG9yZSxcbiAgY3JlYXRlVExVc2VyLFxuICBkYXRhVXJsVG9GaWxlLFxuICBkZWJ1Z0VuYWJsZUxpY2Vuc2luZyxcbiAgZGVidWdGbGFncyxcbiAgZGVmYXVsdFRsZHJhd09wdGlvbnMsXG4gIGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMsXG4gIGRlZ3JlZXNUb1JhZGlhbnMsXG4gIGV4dHJhY3RTZXNzaW9uU3RhdGVGcm9tTGVnYWN5U25hcHNob3QsXG4gIGZlYXR1cmVGbGFncyxcbiAgZ2V0QXJjTWVhc3VyZSxcbiAgZ2V0Q3Vyc29yLFxuICBnZXREZWZhdWx0Q2RuQmFzZVVybCxcbiAgZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMsXG4gIGdldEluY3JlbWVudGVkTmFtZSxcbiAgZ2V0UGVyZmVjdERhc2hQcm9wcyxcbiAgZ2V0UG9pbnRJbkFyY1QsXG4gIGdldFBvaW50T25DaXJjbGUsXG4gIGdldFBvaW50ZXJJbmZvLFxuICBnZXRQb2ludHNPbkFyYyxcbiAgZ2V0UG9seWdvblZlcnRpY2VzLFxuICBnZXRSb3RhdGlvblNuYXBzaG90LFxuICBnZXRTbmFwc2hvdCxcbiAgZ2V0U3ZnUGF0aEZyb21Qb2ludHMsXG4gIGdldFVzZXJQcmVmZXJlbmNlcyxcbiAgaGFyZFJlc2V0LFxuICBoYXJkUmVzZXRFZGl0b3IsXG4gIGlubGluZUJhc2U2NEFzc2V0U3RvcmUsXG4gIGludGVyc2VjdENpcmNsZUNpcmNsZSxcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWdvbixcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWxpbmUsXG4gIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudExpbmVTZWdtZW50LFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlnb24sXG4gIGludGVyc2VjdExpbmVTZWdtZW50UG9seWxpbmUsXG4gIGludGVyc2VjdFBvbHlnb25Cb3VuZHMsXG4gIGludGVyc2VjdFBvbHlnb25Qb2x5Z29uLFxuICBpc0FjY2VsS2V5LFxuICBpc1NhZmVGbG9hdCxcbiAgbGluZXNJbnRlcnNlY3QsXG4gIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZSxcbiAgbG9hZFNuYXBzaG90LFxuICBsb29wVG9IdG1sRWxlbWVudCxcbiAgbm9ybWFsaXplV2hlZWwsXG4gIG9wZW5XaW5kb3csXG4gIHBhcnNlRGVlcExpbmtTdHJpbmcsXG4gIHBlcmltZXRlck9mRWxsaXBzZSxcbiAgcG9pbnRJblBvbHlnb24sXG4gIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUsXG4gIHBvbHlnb25zSW50ZXJzZWN0LFxuICBwcmVjaXNlLFxuICBwcmV2ZW50RGVmYXVsdCxcbiAgcmFkaWFuc1RvRGVncmVlcyxcbiAgcmFuZ2VJbnRlcnNlY3Rpb24sXG4gIHJlYWN0LFxuICByZWZyZXNoUGFnZSxcbiAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLFxuICByZXNpemVCb3gsXG4gIHJvdGF0ZVNlbGVjdGlvbkhhbmRsZSxcbiAgcnVudGltZSxcbiAgc2FuaXRpemVJZCxcbiAgc2V0UG9pbnRlckNhcHR1cmUsXG4gIHNldFJ1bnRpbWVPdmVycmlkZXMsXG4gIHNldFVzZXJQcmVmZXJlbmNlcyxcbiAgc2hvcnRBbmdsZURpc3QsXG4gIHNuYXBBbmdsZSxcbiAgc3RvcEV2ZW50UHJvcGFnYXRpb24sXG4gIHRsZW52LFxuICB0bG1lbnVzLFxuICB0bHRpbWUsXG4gIHRvRG9tUHJlY2lzaW9uLFxuICB0b0ZpeGVkLFxuICB0b1ByZWNpc2lvbixcbiAgdHJhY2ssXG4gIHRyYW5zYWN0LFxuICB0cmFuc2FjdGlvbixcbiAgdW5pcSxcbiAgdXNlQXRvbSxcbiAgdXNlQ29tcHV0ZWQsXG4gIHVzZUNvbnRhaW5lcixcbiAgdXNlQ29udGFpbmVySWZFeGlzdHMsXG4gIHVzZURlbGF5U3ZnRXhwb3J0LFxuICB1c2VFZGl0b3IsXG4gIHVzZUVkaXRvckNvbXBvbmVudHMsXG4gIHVzZUV2ZW50LFxuICB1c2VHbG9iYWxNZW51SXNPcGVuLFxuICB1c2VJc0Nyb3BwaW5nLFxuICB1c2VJc0RhcmtNb2RlLFxuICB1c2VJc0VkaXRpbmcsXG4gIHVzZUxvY2FsU3RvcmUsXG4gIHVzZU1heWJlRWRpdG9yLFxuICB1c2VPbk1vdW50LFxuICB1c2VQYXNzVGhyb3VnaFdoZWVsRXZlbnRzLFxuICB1c2VQZWVySWRzLFxuICB1c2VQcmVzZW5jZSxcbiAgdXNlUXVpY2tSZWFjdG9yLFxuICB1c2VSZWFjdG9yLFxuICB1c2VSZWZTdGF0ZSxcbiAgdXNlU2FmZUlkLFxuICB1c2VTZWxlY3Rpb25FdmVudHMsXG4gIHVzZVNoYWxsb3dBcnJheUlkZW50aXR5LFxuICB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHksXG4gIHVzZVN0YXRlVHJhY2tpbmcsXG4gIHVzZVN2Z0V4cG9ydENvbnRleHQsXG4gIHVzZVRMU2NoZW1hRnJvbVV0aWxzLFxuICB1c2VUTFN0b3JlLFxuICB1c2VUbGRyYXdVc2VyLFxuICB1c2VUcmFuc2Zvcm0sXG4gIHVzZVZhbHVlLFxuICB3aHlBbUlSdW5uaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorScreen: () => (/* binding */ ErrorScreen),\n/* harmony export */   LoadingScreen: () => (/* binding */ LoadingScreen),\n/* harmony export */   TL_CONTAINER_CLASS: () => (/* binding */ TL_CONTAINER_CLASS),\n/* harmony export */   TldrawEditor: () => (/* binding */ TldrawEditor),\n/* harmony export */   useOnMount: () => (/* binding */ useOnMount)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _version_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../version.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/version.mjs\");\n/* harmony import */ var _components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n/* harmony import */ var _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./editor/Editor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\");\n/* harmony import */ var _hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./hooks/useCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\");\n/* harmony import */ var _hooks_useDarkMode_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hooks/useDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n/* harmony import */ var _hooks_useForceUpdate_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/useForceUpdate.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs\");\n/* harmony import */ var _hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n/* harmony import */ var _hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./hooks/useLocalStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\");\n/* harmony import */ var _hooks_useRefState_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./hooks/useRefState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs\");\n/* harmony import */ var _hooks_useZoomCss_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/useZoomCss.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs\");\n/* harmony import */ var _license_LicenseProvider_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./license/LicenseProvider.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseProvider.mjs\");\n/* harmony import */ var _license_Watermark_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./license/Watermark.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/Watermark.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EMPTY_SHAPE_UTILS_ARRAY = [];\nconst EMPTY_BINDING_UTILS_ARRAY = [];\nconst EMPTY_TOOLS_ARRAY = [];\nconst TL_CONTAINER_CLASS = \"tl-container\";\nconst TldrawEditor = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function TldrawEditor2({\n  store,\n  components,\n  className,\n  user: _user,\n  ...rest\n}) {\n  const [container, setContainer] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  const user = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => _user ?? (0,_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_8__.createTLUser)(), [_user]);\n  const ErrorFallback = components?.ErrorFallback === void 0 ? _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultErrorFallback : components?.ErrorFallback;\n  const withDefaults = {\n    ...rest,\n    shapeUtils: rest.shapeUtils ?? EMPTY_SHAPE_UTILS_ARRAY,\n    bindingUtils: rest.bindingUtils ?? EMPTY_BINDING_UTILS_ARRAY,\n    tools: rest.tools ?? EMPTY_TOOLS_ARRAY,\n    components\n  };\n  return (\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: setContainer,\n        \"data-tldraw\": _version_mjs__WEBPACK_IMPORTED_MODULE_5__.version,\n        draggable: false,\n        className: classnames__WEBPACK_IMPORTED_MODULE_4__(`${TL_CONTAINER_CLASS} tl-theme__light`, className),\n        onPointerDown: _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_23__.stopEventPropagation,\n        tabIndex: -1,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          _components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__.OptionalErrorBoundary,\n          {\n            fallback: ErrorFallback,\n            onError: (error) => (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.annotateError)(error, { tags: { origin: \"react.tldraw-before-app\" } }),\n            children: container && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_license_LicenseProvider_mjs__WEBPACK_IMPORTED_MODULE_21__.LicenseProvider, { licenseKey: rest.licenseKey, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_10__.ContainerProvider, { container, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_14__.EditorComponentsProvider, { overrides: components, children: store ? store instanceof _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.Store ? (\n              // Store is ready to go, whether externally synced or not\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithReadyStore, { ...withDefaults, store, user }))\n            ) : (\n              // Store is a synced store, so handle syncing stages internally\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithLoadingStore, { ...withDefaults, store, user }))\n            ) : (\n              // We have no store (it's undefined) so create one and possibly sync it\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithOwnStore, { ...withDefaults, store, user }))\n            ) }) }) })\n          }\n        )\n      }\n    )\n  );\n});\nfunction TldrawEditorWithOwnStore(props) {\n  const {\n    defaultName,\n    snapshot,\n    initialData,\n    shapeUtils,\n    bindingUtils,\n    persistenceKey,\n    sessionId,\n    user,\n    assets\n  } = props;\n  const syncedStore = (0,_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_18__.useLocalStore)({\n    shapeUtils,\n    bindingUtils,\n    initialData,\n    persistenceKey,\n    sessionId,\n    defaultName,\n    snapshot,\n    assets\n  });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithLoadingStore, { ...props, store: syncedStore, user });\n}\nconst TldrawEditorWithLoadingStore = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function TldrawEditorBeforeLoading({\n  store,\n  user,\n  ...rest\n}) {\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_10__.useContainer)();\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    if (user.userPreferences.get().colorScheme === \"dark\") {\n      container.classList.remove(\"tl-theme__light\");\n      container.classList.add(\"tl-theme__dark\");\n    }\n  }, [container, user]);\n  const { LoadingScreen: LoadingScreen2 } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_14__.useEditorComponents)();\n  switch (store.status) {\n    case \"error\": {\n      throw store.error;\n    }\n    case \"loading\": {\n      return LoadingScreen2 ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingScreen2, {}) : null;\n    }\n    case \"not-synced\": {\n      break;\n    }\n    case \"synced-local\": {\n      break;\n    }\n    case \"synced-remote\": {\n      break;\n    }\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithReadyStore, { ...rest, store: store.store, user });\n});\nconst noAutoFocus = () => document.location.search.includes(\"tldraw_preserve_focus\");\nfunction TldrawEditorWithReadyStore({\n  onMount,\n  children,\n  store,\n  tools,\n  shapeUtils,\n  bindingUtils,\n  user,\n  initialState,\n  autoFocus = true,\n  inferDarkMode,\n  cameraOptions,\n  options,\n  licenseKey,\n  deepLinks: _deepLinks,\n  isShapeHidden\n}) {\n  const { ErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_14__.useEditorComponents)();\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_10__.useContainer)();\n  const [editor, setEditor] = (0,_hooks_useRefState_mjs__WEBPACK_IMPORTED_MODULE_19__.useRefState)(null);\n  const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const deepLinks = (0,_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_17__.useShallowObjectIdentity)(_deepLinks === true ? {} : _deepLinks);\n  const editorOptionsRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)({\n    // for these, it's because they're only used when the editor first mounts:\n    autoFocus: autoFocus && !noAutoFocus(),\n    inferDarkMode,\n    initialState,\n    // for these, it's because we keep them up to date in a separate effect:\n    cameraOptions,\n    deepLinks\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    editorOptionsRef.current = {\n      autoFocus: autoFocus && !noAutoFocus(),\n      inferDarkMode,\n      initialState,\n      cameraOptions,\n      deepLinks\n    };\n  }, [autoFocus, inferDarkMode, initialState, cameraOptions, deepLinks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(\n    () => {\n      const { autoFocus: autoFocus2, inferDarkMode: inferDarkMode2, initialState: initialState2, cameraOptions: cameraOptions2, deepLinks: deepLinks2 } = editorOptionsRef.current;\n      const editor2 = new _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_9__.Editor({\n        store,\n        shapeUtils,\n        bindingUtils,\n        tools,\n        getContainer: () => container,\n        user,\n        initialState: initialState2,\n        // we should check for some kind of query parameter that turns off autofocus\n        autoFocus: autoFocus2,\n        inferDarkMode: inferDarkMode2,\n        cameraOptions: cameraOptions2,\n        options,\n        licenseKey,\n        isShapeHidden\n      });\n      editor2.updateViewportScreenBounds(canvasRef.current ?? container);\n      if (deepLinks2) {\n        if (!deepLinks2?.getUrl) {\n          editor2.navigateToDeepLink(deepLinks2);\n        } else {\n          editor2.navigateToDeepLink({ ...deepLinks2, url: deepLinks2.getUrl(editor2) });\n        }\n      }\n      setEditor(editor2);\n      return () => {\n        editor2.dispose();\n      };\n    },\n    // if any of these change, we need to recreate the editor.\n    [\n      bindingUtils,\n      container,\n      options,\n      shapeUtils,\n      store,\n      tools,\n      user,\n      setEditor,\n      licenseKey,\n      isShapeHidden\n    ]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    if (!editor) return;\n    if (deepLinks) {\n      return editor.registerDeepLinkListener(deepLinks);\n    }\n  }, [editor, deepLinks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    if (editor && cameraOptions) {\n      editor.setCameraOptions(cameraOptions);\n    }\n  }, [editor, cameraOptions]);\n  const crashingError = (0,react__WEBPACK_IMPORTED_MODULE_3__.useSyncExternalStore)(\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(\n      (onStoreChange) => {\n        if (editor) {\n          editor.on(\"crash\", onStoreChange);\n          return () => editor.off(\"crash\", onStoreChange);\n        }\n        return () => {\n        };\n      },\n      [editor]\n    ),\n    () => editor?.getCrashingError() ?? null\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(\n    function handleFocusOnPointerDownForPreserveFocusMode() {\n      if (!editor) return;\n      function handleFocusOnPointerDown() {\n        if (!editor) return;\n        editor.focus();\n      }\n      function handleBlurOnPointerDown() {\n        if (!editor) return;\n        editor.blur();\n      }\n      if (autoFocus && noAutoFocus()) {\n        editor.getContainer().addEventListener(\"pointerdown\", handleFocusOnPointerDown);\n        document.body.addEventListener(\"pointerdown\", handleBlurOnPointerDown);\n        return () => {\n          editor.getContainer()?.removeEventListener(\"pointerdown\", handleFocusOnPointerDown);\n          document.body.removeEventListener(\"pointerdown\", handleBlurOnPointerDown);\n        };\n      }\n    },\n    [editor, autoFocus]\n  );\n  const { Canvas } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_14__.useEditorComponents)();\n  if (!editor) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-canvas\", ref: canvasRef });\n  }\n  return (\n    // the top-level tldraw component also renders an error boundary almost\n    // identical to this one. the reason we have two is because this one has\n    // access to `App`, which means that here we can enrich errors with data\n    // from app for reporting, and also still attempt to render the user's\n    // document in the event of an error to reassure them that their work is\n    // not lost.\n    /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__.OptionalErrorBoundary, {\n      fallback: ErrorFallback,\n      onError: (error) => editor.annotateError(error, { origin: \"react.tldraw\", willCrashApp: true }),\n      children: crashingError ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Crash, { crashingError }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_13__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Layout, { onMount, children: [\n        children ?? (Canvas ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Canvas, {}) : null),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_license_Watermark_mjs__WEBPACK_IMPORTED_MODULE_22__.Watermark, {})\n      ] }) })\n    }))\n  );\n}\nfunction Layout({ children, onMount }) {\n  (0,_hooks_useZoomCss_mjs__WEBPACK_IMPORTED_MODULE_20__.useZoomCss)();\n  (0,_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_11__.useCursor)();\n  (0,_hooks_useDarkMode_mjs__WEBPACK_IMPORTED_MODULE_12__.useDarkMode)();\n  (0,_hooks_useForceUpdate_mjs__WEBPACK_IMPORTED_MODULE_16__.useForceUpdate)();\n  useOnMount((editor) => {\n    const teardownStore = editor.store.props.onMount(editor);\n    const teardownCallback = onMount?.(editor);\n    return () => {\n      teardownStore?.();\n      teardownCallback?.();\n    };\n  });\n  return children;\n}\nfunction Crash({ crashingError }) {\n  throw crashingError;\n}\nfunction LoadingScreen({ children }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-loading\", children });\n}\nfunction ErrorScreen({ children }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-loading\", children });\n}\nfunction useOnMount(onMount) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_13__.useEditor)();\n  const onMountEvent = (0,_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_15__.useEvent)((editor2) => {\n    let teardown = void 0;\n    editor2.run(\n      () => {\n        teardown = onMount?.(editor2);\n        editor2.emit(\"mount\");\n      },\n      { history: \"ignore\" }\n    );\n    window.tldrawReady = true;\n    return teardown;\n  });\n  react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect(() => {\n    if (editor) return onMountEvent?.(editor);\n  }, [editor, onMountEvent]);\n}\n\n//# sourceMappingURL=TldrawEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL1RsZHJhd0VkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDUjtBQUNRO0FBVS9CO0FBQ3FCO0FBQ0s7QUFDOEI7QUFDeUI7QUFDdkM7QUFDWjtBQUM4QjtBQUN6QjtBQUNJO0FBQ1c7QUFJeEI7QUFDTztBQUNZO0FBQ087QUFDVDtBQUNKO0FBQ0Y7QUFDWTtBQUNaO0FBQ0c7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkNBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0MsK0NBQVE7QUFDNUMsZUFBZSw4Q0FBTyxnQkFBZ0Isc0VBQVk7QUFDbEQsK0RBQStELHlHQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpREFBTztBQUM5QjtBQUNBLG1CQUFtQix1Q0FBVSxJQUFJLG9CQUFvQjtBQUNyRCx1QkFBdUIsaUVBQW9CO0FBQzNDO0FBQ0Esa0NBQWtDLHNEQUFHO0FBQ3JDLFVBQVUsZ0ZBQXFCO0FBQy9CO0FBQ0E7QUFDQSxnQ0FBZ0MsNERBQWEsVUFBVSxRQUFRLHFDQUFxQztBQUNwRyxtREFBbUQsc0RBQUcsQ0FBQywwRUFBZSxJQUFJLHVEQUF1RCxzREFBRyxDQUFDLHVFQUFpQixJQUFJLHFDQUFxQyxzREFBRyxDQUFDLHFGQUF3QixJQUFJLDBEQUEwRCxnREFBSztBQUM5UjtBQUNBLCtCQUErQixzREFBRywrQkFBK0IsOEJBQThCO0FBQy9GO0FBQ0E7QUFDQSwrQkFBK0Isc0RBQUcsaUNBQWlDLDhCQUE4QjtBQUNqRztBQUNBO0FBQ0EsK0JBQStCLHNEQUFHLDZCQUE2Qiw4QkFBOEI7QUFDN0YsZUFBZSxHQUFHLEdBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNCQUFzQix3RUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixzREFBRyxpQ0FBaUMsb0NBQW9DO0FBQ2pHO0FBQ0EscUNBQXFDLDJDQUFJO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQkFBb0Isc0VBQVk7QUFDaEMsRUFBRSxzREFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxVQUFVLGdDQUFnQyxFQUFFLG9GQUFtQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNEQUFHLG1CQUFtQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLCtCQUErQixtQ0FBbUM7QUFDOUYsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsVUFBVSxnQkFBZ0IsRUFBRSxvRkFBbUI7QUFDL0Msb0JBQW9CLHNFQUFZO0FBQ2hDLDhCQUE4QixvRUFBVztBQUN6QyxvQkFBb0IsNkNBQU07QUFDMUIsb0JBQW9CLGlGQUF3QiwwQkFBMEI7QUFDdEUsMkJBQTJCLDZDQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsc0RBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxzREFBZTtBQUNqQjtBQUNBLGNBQWMsMElBQTBJO0FBQ3hKLDBCQUEwQixzREFBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHVDQUF1QyxnREFBZ0Q7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsc0RBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHdCQUF3QiwyREFBb0I7QUFDNUMsSUFBSSxrREFBVztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsVUFBVSxTQUFTLEVBQUUsb0ZBQW1CO0FBQ3hDO0FBQ0EsMkJBQTJCLHNEQUFHLFVBQVUsd0NBQXdDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0RBQUcsQ0FBQyxnRkFBcUI7QUFDOUM7QUFDQSx3REFBd0QsNENBQTRDO0FBQ3BHLGdEQUFnRCxzREFBRyxVQUFVLGVBQWUsb0JBQW9CLHNEQUFHLENBQUMsZ0VBQWEsYUFBYSx5Q0FBeUMsdURBQUksV0FBVztBQUN0TCw4Q0FBOEMsc0RBQUcsV0FBVztBQUM1RCx3QkFBd0Isc0RBQUcsQ0FBQyw4REFBUyxJQUFJO0FBQ3pDLFNBQVMsR0FBRztBQUNaLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQyxFQUFFLGtFQUFVO0FBQ1osRUFBRSxnRUFBUztBQUNYLEVBQUUsb0VBQVc7QUFDYixFQUFFLDBFQUFjO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxpQkFBaUIsZUFBZTtBQUNoQztBQUNBO0FBQ0EseUJBQXlCLFVBQVU7QUFDbkMseUJBQXlCLHNEQUFHLFVBQVUsbUNBQW1DO0FBQ3pFO0FBQ0EsdUJBQXVCLFVBQVU7QUFDakMseUJBQXlCLHNEQUFHLFVBQVUsbUNBQW1DO0FBQ3pFO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQVM7QUFDMUIsdUJBQXVCLDhEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGtEQUFxQjtBQUN2QjtBQUNBLEdBQUc7QUFDSDtBQU9FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvVGxkcmF3RWRpdG9yLm1qcz8xZWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgU3RvcmUgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgYW5ub3RhdGVFcnJvciB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgUmVhY3QsIHtcbiAgbWVtbyxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUVmZmVjdCxcbiAgdXNlTGF5b3V0RWZmZWN0LFxuICB1c2VNZW1vLFxuICB1c2VSZWYsXG4gIHVzZVN0YXRlLFxuICB1c2VTeW5jRXh0ZXJuYWxTdG9yZVxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL3ZlcnNpb24ubWpzXCI7XG5pbXBvcnQgeyBPcHRpb25hbEVycm9yQm91bmRhcnkgfSBmcm9tIFwiLi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RXJyb3JGYWxsYmFjayB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlVExVc2VyIH0gZnJvbSBcIi4vY29uZmlnL2NyZWF0ZVRMVXNlci5tanNcIjtcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gXCIuL2VkaXRvci9FZGl0b3IubWpzXCI7XG5pbXBvcnQgeyBDb250YWluZXJQcm92aWRlciwgdXNlQ29udGFpbmVyIH0gZnJvbSBcIi4vaG9va3MvdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlQ3Vyc29yIH0gZnJvbSBcIi4vaG9va3MvdXNlQ3Vyc29yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRGFya01vZGUgfSBmcm9tIFwiLi9ob29rcy91c2VEYXJrTW9kZS5tanNcIjtcbmltcG9ydCB7IEVkaXRvckNvbnRleHQsIHVzZUVkaXRvciB9IGZyb20gXCIuL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7XG4gIEVkaXRvckNvbXBvbmVudHNQcm92aWRlcixcbiAgdXNlRWRpdG9yQ29tcG9uZW50c1xufSBmcm9tIFwiLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlRXZlbnQgfSBmcm9tIFwiLi9ob29rcy91c2VFdmVudC5tanNcIjtcbmltcG9ydCB7IHVzZUZvcmNlVXBkYXRlIH0gZnJvbSBcIi4vaG9va3MvdXNlRm9yY2VVcGRhdGUubWpzXCI7XG5pbXBvcnQgeyB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkgfSBmcm9tIFwiLi9ob29rcy91c2VJZGVudGl0eS5tanNcIjtcbmltcG9ydCB7IHVzZUxvY2FsU3RvcmUgfSBmcm9tIFwiLi9ob29rcy91c2VMb2NhbFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgdXNlUmVmU3RhdGUgfSBmcm9tIFwiLi9ob29rcy91c2VSZWZTdGF0ZS5tanNcIjtcbmltcG9ydCB7IHVzZVpvb21Dc3MgfSBmcm9tIFwiLi9ob29rcy91c2Vab29tQ3NzLm1qc1wiO1xuaW1wb3J0IHsgTGljZW5zZVByb3ZpZGVyIH0gZnJvbSBcIi4vbGljZW5zZS9MaWNlbnNlUHJvdmlkZXIubWpzXCI7XG5pbXBvcnQgeyBXYXRlcm1hcmsgfSBmcm9tIFwiLi9saWNlbnNlL1dhdGVybWFyay5tanNcIjtcbmltcG9ydCB7IHN0b3BFdmVudFByb3BhZ2F0aW9uIH0gZnJvbSBcIi4vdXRpbHMvZG9tLm1qc1wiO1xuY29uc3QgRU1QVFlfU0hBUEVfVVRJTFNfQVJSQVkgPSBbXTtcbmNvbnN0IEVNUFRZX0JJTkRJTkdfVVRJTFNfQVJSQVkgPSBbXTtcbmNvbnN0IEVNUFRZX1RPT0xTX0FSUkFZID0gW107XG5jb25zdCBUTF9DT05UQUlORVJfQ0xBU1MgPSBcInRsLWNvbnRhaW5lclwiO1xuY29uc3QgVGxkcmF3RWRpdG9yID0gbWVtbyhmdW5jdGlvbiBUbGRyYXdFZGl0b3IyKHtcbiAgc3RvcmUsXG4gIGNvbXBvbmVudHMsXG4gIGNsYXNzTmFtZSxcbiAgdXNlcjogX3VzZXIsXG4gIC4uLnJlc3Rcbn0pIHtcbiAgY29uc3QgW2NvbnRhaW5lciwgc2V0Q29udGFpbmVyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCB1c2VyID0gdXNlTWVtbygoKSA9PiBfdXNlciA/PyBjcmVhdGVUTFVzZXIoKSwgW191c2VyXSk7XG4gIGNvbnN0IEVycm9yRmFsbGJhY2sgPSBjb21wb25lbnRzPy5FcnJvckZhbGxiYWNrID09PSB2b2lkIDAgPyBEZWZhdWx0RXJyb3JGYWxsYmFjayA6IGNvbXBvbmVudHM/LkVycm9yRmFsbGJhY2s7XG4gIGNvbnN0IHdpdGhEZWZhdWx0cyA9IHtcbiAgICAuLi5yZXN0LFxuICAgIHNoYXBlVXRpbHM6IHJlc3Quc2hhcGVVdGlscyA/PyBFTVBUWV9TSEFQRV9VVElMU19BUlJBWSxcbiAgICBiaW5kaW5nVXRpbHM6IHJlc3QuYmluZGluZ1V0aWxzID8/IEVNUFRZX0JJTkRJTkdfVVRJTFNfQVJSQVksXG4gICAgdG9vbHM6IHJlc3QudG9vbHMgPz8gRU1QVFlfVE9PTFNfQVJSQVksXG4gICAgY29tcG9uZW50c1xuICB9O1xuICByZXR1cm4gKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICBcImRpdlwiLFxuICAgICAge1xuICAgICAgICByZWY6IHNldENvbnRhaW5lcixcbiAgICAgICAgXCJkYXRhLXRsZHJhd1wiOiB2ZXJzaW9uLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoYCR7VExfQ09OVEFJTkVSX0NMQVNTfSB0bC10aGVtZV9fbGlnaHRgLCBjbGFzc05hbWUpLFxuICAgICAgICBvblBvaW50ZXJEb3duOiBzdG9wRXZlbnRQcm9wYWdhdGlvbixcbiAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBPcHRpb25hbEVycm9yQm91bmRhcnksXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmFsbGJhY2s6IEVycm9yRmFsbGJhY2ssXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IGFubm90YXRlRXJyb3IoZXJyb3IsIHsgdGFnczogeyBvcmlnaW46IFwicmVhY3QudGxkcmF3LWJlZm9yZS1hcHBcIiB9IH0pLFxuICAgICAgICAgICAgY2hpbGRyZW46IGNvbnRhaW5lciAmJiAvKiBAX19QVVJFX18gKi8ganN4KExpY2Vuc2VQcm92aWRlciwgeyBsaWNlbnNlS2V5OiByZXN0LmxpY2Vuc2VLZXksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENvbnRhaW5lclByb3ZpZGVyLCB7IGNvbnRhaW5lciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRWRpdG9yQ29tcG9uZW50c1Byb3ZpZGVyLCB7IG92ZXJyaWRlczogY29tcG9uZW50cywgY2hpbGRyZW46IHN0b3JlID8gc3RvcmUgaW5zdGFuY2VvZiBTdG9yZSA/IChcbiAgICAgICAgICAgICAgLy8gU3RvcmUgaXMgcmVhZHkgdG8gZ28sIHdoZXRoZXIgZXh0ZXJuYWxseSBzeW5jZWQgb3Igbm90XG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyAoanN4KFRsZHJhd0VkaXRvcldpdGhSZWFkeVN0b3JlLCB7IC4uLndpdGhEZWZhdWx0cywgc3RvcmUsIHVzZXIgfSkpXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAvLyBTdG9yZSBpcyBhIHN5bmNlZCBzdG9yZSwgc28gaGFuZGxlIHN5bmNpbmcgc3RhZ2VzIGludGVybmFsbHlcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIChqc3goVGxkcmF3RWRpdG9yV2l0aExvYWRpbmdTdG9yZSwgeyAuLi53aXRoRGVmYXVsdHMsIHN0b3JlLCB1c2VyIH0pKVxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBubyBzdG9yZSAoaXQncyB1bmRlZmluZWQpIHNvIGNyZWF0ZSBvbmUgYW5kIHBvc3NpYmx5IHN5bmMgaXRcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIChqc3goVGxkcmF3RWRpdG9yV2l0aE93blN0b3JlLCB7IC4uLndpdGhEZWZhdWx0cywgc3RvcmUsIHVzZXIgfSkpXG4gICAgICAgICAgICApIH0pIH0pIH0pXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgKVxuICApO1xufSk7XG5mdW5jdGlvbiBUbGRyYXdFZGl0b3JXaXRoT3duU3RvcmUocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRlZmF1bHROYW1lLFxuICAgIHNuYXBzaG90LFxuICAgIGluaXRpYWxEYXRhLFxuICAgIHNoYXBlVXRpbHMsXG4gICAgYmluZGluZ1V0aWxzLFxuICAgIHBlcnNpc3RlbmNlS2V5LFxuICAgIHNlc3Npb25JZCxcbiAgICB1c2VyLFxuICAgIGFzc2V0c1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHN5bmNlZFN0b3JlID0gdXNlTG9jYWxTdG9yZSh7XG4gICAgc2hhcGVVdGlscyxcbiAgICBiaW5kaW5nVXRpbHMsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgcGVyc2lzdGVuY2VLZXksXG4gICAgc2Vzc2lvbklkLFxuICAgIGRlZmF1bHROYW1lLFxuICAgIHNuYXBzaG90LFxuICAgIGFzc2V0c1xuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goVGxkcmF3RWRpdG9yV2l0aExvYWRpbmdTdG9yZSwgeyAuLi5wcm9wcywgc3RvcmU6IHN5bmNlZFN0b3JlLCB1c2VyIH0pO1xufVxuY29uc3QgVGxkcmF3RWRpdG9yV2l0aExvYWRpbmdTdG9yZSA9IG1lbW8oZnVuY3Rpb24gVGxkcmF3RWRpdG9yQmVmb3JlTG9hZGluZyh7XG4gIHN0b3JlLFxuICB1c2VyLFxuICAuLi5yZXN0XG59KSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5jb2xvclNjaGVtZSA9PT0gXCJkYXJrXCIpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwidGwtdGhlbWVfX2xpZ2h0XCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0bC10aGVtZV9fZGFya1wiKTtcbiAgICB9XG4gIH0sIFtjb250YWluZXIsIHVzZXJdKTtcbiAgY29uc3QgeyBMb2FkaW5nU2NyZWVuOiBMb2FkaW5nU2NyZWVuMiB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBzd2l0Y2ggKHN0b3JlLnN0YXR1cykge1xuICAgIGNhc2UgXCJlcnJvclwiOiB7XG4gICAgICB0aHJvdyBzdG9yZS5lcnJvcjtcbiAgICB9XG4gICAgY2FzZSBcImxvYWRpbmdcIjoge1xuICAgICAgcmV0dXJuIExvYWRpbmdTY3JlZW4yID8gLyogQF9fUFVSRV9fICovIGpzeChMb2FkaW5nU2NyZWVuMiwge30pIDogbnVsbDtcbiAgICB9XG4gICAgY2FzZSBcIm5vdC1zeW5jZWRcIjoge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJzeW5jZWQtbG9jYWxcIjoge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJzeW5jZWQtcmVtb3RlXCI6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChUbGRyYXdFZGl0b3JXaXRoUmVhZHlTdG9yZSwgeyAuLi5yZXN0LCBzdG9yZTogc3RvcmUuc3RvcmUsIHVzZXIgfSk7XG59KTtcbmNvbnN0IG5vQXV0b0ZvY3VzID0gKCkgPT4gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKFwidGxkcmF3X3ByZXNlcnZlX2ZvY3VzXCIpO1xuZnVuY3Rpb24gVGxkcmF3RWRpdG9yV2l0aFJlYWR5U3RvcmUoe1xuICBvbk1vdW50LFxuICBjaGlsZHJlbixcbiAgc3RvcmUsXG4gIHRvb2xzLFxuICBzaGFwZVV0aWxzLFxuICBiaW5kaW5nVXRpbHMsXG4gIHVzZXIsXG4gIGluaXRpYWxTdGF0ZSxcbiAgYXV0b0ZvY3VzID0gdHJ1ZSxcbiAgaW5mZXJEYXJrTW9kZSxcbiAgY2FtZXJhT3B0aW9ucyxcbiAgb3B0aW9ucyxcbiAgbGljZW5zZUtleSxcbiAgZGVlcExpbmtzOiBfZGVlcExpbmtzLFxuICBpc1NoYXBlSGlkZGVuXG59KSB7XG4gIGNvbnN0IHsgRXJyb3JGYWxsYmFjayB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgW2VkaXRvciwgc2V0RWRpdG9yXSA9IHVzZVJlZlN0YXRlKG51bGwpO1xuICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGRlZXBMaW5rcyA9IHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eShfZGVlcExpbmtzID09PSB0cnVlID8ge30gOiBfZGVlcExpbmtzKTtcbiAgY29uc3QgZWRpdG9yT3B0aW9uc1JlZiA9IHVzZVJlZih7XG4gICAgLy8gZm9yIHRoZXNlLCBpdCdzIGJlY2F1c2UgdGhleSdyZSBvbmx5IHVzZWQgd2hlbiB0aGUgZWRpdG9yIGZpcnN0IG1vdW50czpcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyAmJiAhbm9BdXRvRm9jdXMoKSxcbiAgICBpbmZlckRhcmtNb2RlLFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICAvLyBmb3IgdGhlc2UsIGl0J3MgYmVjYXVzZSB3ZSBrZWVwIHRoZW0gdXAgdG8gZGF0ZSBpbiBhIHNlcGFyYXRlIGVmZmVjdDpcbiAgICBjYW1lcmFPcHRpb25zLFxuICAgIGRlZXBMaW5rc1xuICB9KTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBlZGl0b3JPcHRpb25zUmVmLmN1cnJlbnQgPSB7XG4gICAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyAmJiAhbm9BdXRvRm9jdXMoKSxcbiAgICAgIGluZmVyRGFya01vZGUsXG4gICAgICBpbml0aWFsU3RhdGUsXG4gICAgICBjYW1lcmFPcHRpb25zLFxuICAgICAgZGVlcExpbmtzXG4gICAgfTtcbiAgfSwgW2F1dG9Gb2N1cywgaW5mZXJEYXJrTW9kZSwgaW5pdGlhbFN0YXRlLCBjYW1lcmFPcHRpb25zLCBkZWVwTGlua3NdKTtcbiAgdXNlTGF5b3V0RWZmZWN0KFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHsgYXV0b0ZvY3VzOiBhdXRvRm9jdXMyLCBpbmZlckRhcmtNb2RlOiBpbmZlckRhcmtNb2RlMiwgaW5pdGlhbFN0YXRlOiBpbml0aWFsU3RhdGUyLCBjYW1lcmFPcHRpb25zOiBjYW1lcmFPcHRpb25zMiwgZGVlcExpbmtzOiBkZWVwTGlua3MyIH0gPSBlZGl0b3JPcHRpb25zUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBlZGl0b3IyID0gbmV3IEVkaXRvcih7XG4gICAgICAgIHN0b3JlLFxuICAgICAgICBzaGFwZVV0aWxzLFxuICAgICAgICBiaW5kaW5nVXRpbHMsXG4gICAgICAgIHRvb2xzLFxuICAgICAgICBnZXRDb250YWluZXI6ICgpID0+IGNvbnRhaW5lcixcbiAgICAgICAgdXNlcixcbiAgICAgICAgaW5pdGlhbFN0YXRlOiBpbml0aWFsU3RhdGUyLFxuICAgICAgICAvLyB3ZSBzaG91bGQgY2hlY2sgZm9yIHNvbWUga2luZCBvZiBxdWVyeSBwYXJhbWV0ZXIgdGhhdCB0dXJucyBvZmYgYXV0b2ZvY3VzXG4gICAgICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzMixcbiAgICAgICAgaW5mZXJEYXJrTW9kZTogaW5mZXJEYXJrTW9kZTIsXG4gICAgICAgIGNhbWVyYU9wdGlvbnM6IGNhbWVyYU9wdGlvbnMyLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBsaWNlbnNlS2V5LFxuICAgICAgICBpc1NoYXBlSGlkZGVuXG4gICAgICB9KTtcbiAgICAgIGVkaXRvcjIudXBkYXRlVmlld3BvcnRTY3JlZW5Cb3VuZHMoY2FudmFzUmVmLmN1cnJlbnQgPz8gY29udGFpbmVyKTtcbiAgICAgIGlmIChkZWVwTGlua3MyKSB7XG4gICAgICAgIGlmICghZGVlcExpbmtzMj8uZ2V0VXJsKSB7XG4gICAgICAgICAgZWRpdG9yMi5uYXZpZ2F0ZVRvRGVlcExpbmsoZGVlcExpbmtzMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWRpdG9yMi5uYXZpZ2F0ZVRvRGVlcExpbmsoeyAuLi5kZWVwTGlua3MyLCB1cmw6IGRlZXBMaW5rczIuZ2V0VXJsKGVkaXRvcjIpIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRFZGl0b3IoZWRpdG9yMik7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBlZGl0b3IyLmRpc3Bvc2UoKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICAvLyBpZiBhbnkgb2YgdGhlc2UgY2hhbmdlLCB3ZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBlZGl0b3IuXG4gICAgW1xuICAgICAgYmluZGluZ1V0aWxzLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHNoYXBlVXRpbHMsXG4gICAgICBzdG9yZSxcbiAgICAgIHRvb2xzLFxuICAgICAgdXNlcixcbiAgICAgIHNldEVkaXRvcixcbiAgICAgIGxpY2Vuc2VLZXksXG4gICAgICBpc1NoYXBlSGlkZGVuXG4gICAgXVxuICApO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZWRpdG9yKSByZXR1cm47XG4gICAgaWYgKGRlZXBMaW5rcykge1xuICAgICAgcmV0dXJuIGVkaXRvci5yZWdpc3RlckRlZXBMaW5rTGlzdGVuZXIoZGVlcExpbmtzKTtcbiAgICB9XG4gIH0sIFtlZGl0b3IsIGRlZXBMaW5rc10pO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChlZGl0b3IgJiYgY2FtZXJhT3B0aW9ucykge1xuICAgICAgZWRpdG9yLnNldENhbWVyYU9wdGlvbnMoY2FtZXJhT3B0aW9ucyk7XG4gICAgfVxuICB9LCBbZWRpdG9yLCBjYW1lcmFPcHRpb25zXSk7XG4gIGNvbnN0IGNyYXNoaW5nRXJyb3IgPSB1c2VTeW5jRXh0ZXJuYWxTdG9yZShcbiAgICB1c2VDYWxsYmFjayhcbiAgICAgIChvblN0b3JlQ2hhbmdlKSA9PiB7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBlZGl0b3Iub24oXCJjcmFzaFwiLCBvblN0b3JlQ2hhbmdlKTtcbiAgICAgICAgICByZXR1cm4gKCkgPT4gZWRpdG9yLm9mZihcImNyYXNoXCIsIG9uU3RvcmVDaGFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgW2VkaXRvcl1cbiAgICApLFxuICAgICgpID0+IGVkaXRvcj8uZ2V0Q3Jhc2hpbmdFcnJvcigpID8/IG51bGxcbiAgKTtcbiAgdXNlRWZmZWN0KFxuICAgIGZ1bmN0aW9uIGhhbmRsZUZvY3VzT25Qb2ludGVyRG93bkZvclByZXNlcnZlRm9jdXNNb2RlKCkge1xuICAgICAgaWYgKCFlZGl0b3IpIHJldHVybjtcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZUZvY3VzT25Qb2ludGVyRG93bigpIHtcbiAgICAgICAgaWYgKCFlZGl0b3IpIHJldHVybjtcbiAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBoYW5kbGVCbHVyT25Qb2ludGVyRG93bigpIHtcbiAgICAgICAgaWYgKCFlZGl0b3IpIHJldHVybjtcbiAgICAgICAgZWRpdG9yLmJsdXIoKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdXRvRm9jdXMgJiYgbm9BdXRvRm9jdXMoKSkge1xuICAgICAgICBlZGl0b3IuZ2V0Q29udGFpbmVyKCkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZUZvY3VzT25Qb2ludGVyRG93bik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZUJsdXJPblBvaW50ZXJEb3duKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBlZGl0b3IuZ2V0Q29udGFpbmVyKCk/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBoYW5kbGVGb2N1c09uUG9pbnRlckRvd24pO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZUJsdXJPblBvaW50ZXJEb3duKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlZGl0b3IsIGF1dG9Gb2N1c11cbiAgKTtcbiAgY29uc3QgeyBDYW52YXMgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCFlZGl0b3IpIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1jYW52YXNcIiwgcmVmOiBjYW52YXNSZWYgfSk7XG4gIH1cbiAgcmV0dXJuIChcbiAgICAvLyB0aGUgdG9wLWxldmVsIHRsZHJhdyBjb21wb25lbnQgYWxzbyByZW5kZXJzIGFuIGVycm9yIGJvdW5kYXJ5IGFsbW9zdFxuICAgIC8vIGlkZW50aWNhbCB0byB0aGlzIG9uZS4gdGhlIHJlYXNvbiB3ZSBoYXZlIHR3byBpcyBiZWNhdXNlIHRoaXMgb25lIGhhc1xuICAgIC8vIGFjY2VzcyB0byBgQXBwYCwgd2hpY2ggbWVhbnMgdGhhdCBoZXJlIHdlIGNhbiBlbnJpY2ggZXJyb3JzIHdpdGggZGF0YVxuICAgIC8vIGZyb20gYXBwIGZvciByZXBvcnRpbmcsIGFuZCBhbHNvIHN0aWxsIGF0dGVtcHQgdG8gcmVuZGVyIHRoZSB1c2VyJ3NcbiAgICAvLyBkb2N1bWVudCBpbiB0aGUgZXZlbnQgb2YgYW4gZXJyb3IgdG8gcmVhc3N1cmUgdGhlbSB0aGF0IHRoZWlyIHdvcmsgaXNcbiAgICAvLyBub3QgbG9zdC5cbiAgICAvKiBAX19QVVJFX18gKi8gKGpzeChPcHRpb25hbEVycm9yQm91bmRhcnksIHtcbiAgICAgIGZhbGxiYWNrOiBFcnJvckZhbGxiYWNrLFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiBlZGl0b3IuYW5ub3RhdGVFcnJvcihlcnJvciwgeyBvcmlnaW46IFwicmVhY3QudGxkcmF3XCIsIHdpbGxDcmFzaEFwcDogdHJ1ZSB9KSxcbiAgICAgIGNoaWxkcmVuOiBjcmFzaGluZ0Vycm9yID8gLyogQF9fUFVSRV9fICovIGpzeChDcmFzaCwgeyBjcmFzaGluZ0Vycm9yIH0pIDogLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBlZGl0b3IsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhMYXlvdXQsIHsgb25Nb3VudCwgY2hpbGRyZW46IFtcbiAgICAgICAgY2hpbGRyZW4gPz8gKENhbnZhcyA/IC8qIEBfX1BVUkVfXyAqLyBqc3goQ2FudmFzLCB7fSkgOiBudWxsKSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChXYXRlcm1hcmssIHt9KVxuICAgICAgXSB9KSB9KVxuICAgIH0pKVxuICApO1xufVxuZnVuY3Rpb24gTGF5b3V0KHsgY2hpbGRyZW4sIG9uTW91bnQgfSkge1xuICB1c2Vab29tQ3NzKCk7XG4gIHVzZUN1cnNvcigpO1xuICB1c2VEYXJrTW9kZSgpO1xuICB1c2VGb3JjZVVwZGF0ZSgpO1xuICB1c2VPbk1vdW50KChlZGl0b3IpID0+IHtcbiAgICBjb25zdCB0ZWFyZG93blN0b3JlID0gZWRpdG9yLnN0b3JlLnByb3BzLm9uTW91bnQoZWRpdG9yKTtcbiAgICBjb25zdCB0ZWFyZG93bkNhbGxiYWNrID0gb25Nb3VudD8uKGVkaXRvcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRlYXJkb3duU3RvcmU/LigpO1xuICAgICAgdGVhcmRvd25DYWxsYmFjaz8uKCk7XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cbmZ1bmN0aW9uIENyYXNoKHsgY3Jhc2hpbmdFcnJvciB9KSB7XG4gIHRocm93IGNyYXNoaW5nRXJyb3I7XG59XG5mdW5jdGlvbiBMb2FkaW5nU2NyZWVuKHsgY2hpbGRyZW4gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1sb2FkaW5nXCIsIGNoaWxkcmVuIH0pO1xufVxuZnVuY3Rpb24gRXJyb3JTY3JlZW4oeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWxvYWRpbmdcIiwgY2hpbGRyZW4gfSk7XG59XG5mdW5jdGlvbiB1c2VPbk1vdW50KG9uTW91bnQpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IG9uTW91bnRFdmVudCA9IHVzZUV2ZW50KChlZGl0b3IyKSA9PiB7XG4gICAgbGV0IHRlYXJkb3duID0gdm9pZCAwO1xuICAgIGVkaXRvcjIucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0ZWFyZG93biA9IG9uTW91bnQ/LihlZGl0b3IyKTtcbiAgICAgICAgZWRpdG9yMi5lbWl0KFwibW91bnRcIik7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH1cbiAgICApO1xuICAgIHdpbmRvdy50bGRyYXdSZWFkeSA9IHRydWU7XG4gICAgcmV0dXJuIHRlYXJkb3duO1xuICB9KTtcbiAgUmVhY3QudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZWRpdG9yKSByZXR1cm4gb25Nb3VudEV2ZW50Py4oZWRpdG9yKTtcbiAgfSwgW2VkaXRvciwgb25Nb3VudEV2ZW50XSk7XG59XG5leHBvcnQge1xuICBFcnJvclNjcmVlbixcbiAgTG9hZGluZ1NjcmVlbixcbiAgVExfQ09OVEFJTkVSX0NMQVNTLFxuICBUbGRyYXdFZGl0b3IsXG4gIHVzZU9uTW91bnRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UbGRyYXdFZGl0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorBoundary: () => (/* binding */ ErrorBoundary),\n/* harmony export */   OptionalErrorBoundary: () => (/* binding */ OptionalErrorBoundary)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nconst initialState = { error: null };\nclass ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_1__.Component {\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  state = initialState;\n  componentDidCatch(error) {\n    this.props.onError?.(error);\n  }\n  render() {\n    const { error } = this.state;\n    if (error !== null) {\n      const { fallback: Fallback } = this.props;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Fallback, { error });\n    }\n    return this.props.children;\n  }\n}\nfunction OptionalErrorBoundary({\n  children,\n  fallback,\n  ...props\n}) {\n  if (fallback === null) {\n    return children;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorBoundary, { fallback, ...props, children });\n}\n\n//# sourceMappingURL=ErrorBoundary.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvRXJyb3JCb3VuZGFyeS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNUO0FBQy9CLHVCQUF1QjtBQUN2Qiw0QkFBNEIsNENBQWU7QUFDM0M7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0EsY0FBYyxxQkFBcUI7QUFDbkMsNkJBQTZCLHNEQUFHLGFBQWEsT0FBTztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxrQkFBa0IsOEJBQThCO0FBQzVFO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkubWpzP2NiOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHsgZXJyb3I6IG51bGwgfTtcbmNsYXNzIEVycm9yQm91bmRhcnkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuICBzdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3IpIHtcbiAgICB0aGlzLnByb3BzLm9uRXJyb3I/LihlcnJvcik7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKGVycm9yICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB7IGZhbGxiYWNrOiBGYWxsYmFjayB9ID0gdGhpcy5wcm9wcztcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZhbGxiYWNrLCB7IGVycm9yIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxufVxuZnVuY3Rpb24gT3B0aW9uYWxFcnJvckJvdW5kYXJ5KHtcbiAgY2hpbGRyZW4sXG4gIGZhbGxiYWNrLFxuICAuLi5wcm9wc1xufSkge1xuICBpZiAoZmFsbGJhY2sgPT09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRXJyb3JCb3VuZGFyeSwgeyBmYWxsYmFjaywgLi4ucHJvcHMsIGNoaWxkcmVuIH0pO1xufVxuZXhwb3J0IHtcbiAgRXJyb3JCb3VuZGFyeSxcbiAgT3B0aW9uYWxFcnJvckJvdW5kYXJ5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXJyb3JCb3VuZGFyeS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeometryDebuggingView: () => (/* binding */ GeometryDebuggingView)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n\n\n\n\n\n\nfunction useTick(isEnabled = true) {\n  const [_, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!isEnabled) return;\n    const update = () => setTick((tick) => tick + 1);\n    editor.on(\"tick\", update);\n    return () => {\n      editor.off(\"tick\", update);\n    };\n  }, [editor, isEnabled]);\n}\nconst GeometryDebuggingView = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.track)(function GeometryDebuggingView2({\n  showStroke = true,\n  showVertices = true,\n  showClosestPointOnOutline = true\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  useTick(showClosestPointOnOutline);\n  const zoomLevel = editor.getZoomLevel();\n  const renderingShapes = editor.getRenderingShapes();\n  const {\n    inputs: { currentPagePoint }\n  } = editor;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"svg\",\n    {\n      style: {\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        zIndex: 999999999,\n        top: 0,\n        left: 0,\n        overflow: \"visible\"\n      },\n      children: renderingShapes.map((result) => {\n        const shape = editor.getShape(result.id);\n        if (shape.type === \"group\") return null;\n        const geometry = editor.getShapeGeometry(shape);\n        const pageTransform = editor.getShapePageTransform(shape);\n        const pointInShapeSpace = editor.getPointInShapeSpace(shape, currentPagePoint);\n        const nearestPointOnShape = geometry.nearestPoint(pointInShapeSpace);\n        const distanceToPoint = geometry.distanceToPoint(pointInShapeSpace, true);\n        const dist = Math.abs(distanceToPoint) * zoomLevel;\n        const hitInside = distanceToPoint < 0;\n        const { vertices } = geometry;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n          \"g\",\n          {\n            transform: pageTransform.toCssString(),\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [\n              showStroke && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                \"g\",\n                {\n                  stroke: geometry.debugColor ?? \"red\",\n                  opacity: \"1\",\n                  strokeWidth: 2 / zoomLevel,\n                  fill: \"none\",\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GeometryStroke, { geometry })\n                }\n              ),\n              showVertices && vertices.map((v, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                \"circle\",\n                {\n                  cx: v.x,\n                  cy: v.y,\n                  r: 2 / zoomLevel,\n                  fill: `hsl(${(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.modulate)(i, [0, vertices.length - 1], [120, 200])}, 100%, 50%)`,\n                  stroke: \"black\",\n                  strokeWidth: 1 / zoomLevel\n                },\n                `v${i}`\n              )),\n              showClosestPointOnOutline && dist < 150 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                \"line\",\n                {\n                  x1: nearestPointOnShape.x,\n                  y1: nearestPointOnShape.y,\n                  x2: pointInShapeSpace.x,\n                  y2: pointInShapeSpace.y,\n                  opacity: 1 - dist / 150,\n                  stroke: hitInside ? \"goldenrod\" : \"dodgerblue\",\n                  strokeWidth: 2 / zoomLevel\n                }\n              )\n            ]\n          },\n          result.id + \"_outline\"\n        );\n      })\n    }\n  );\n});\nfunction GeometryStroke({ geometry }) {\n  if (geometry instanceof _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Group2d) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [...geometry.children, ...geometry.ignoredChildren].map((child, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GeometryStroke, { geometry: child }, i)) });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: geometry.toSimpleSvgPath() });\n}\n\n//# sourceMappingURL=GeometryDebuggingView.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvR2VvbWV0cnlEZWJ1Z2dpbmdWaWV3Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdEO0FBQ1o7QUFDSDtBQUNHO0FBQ087QUFDVTtBQUM3RDtBQUNBLHVCQUF1QiwrQ0FBUTtBQUMvQixpQkFBaUIsK0RBQVM7QUFDMUIsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDhCQUE4QiwwREFBSztBQUNuQztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLElBQUk7QUFDSix5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0IsK0JBQStCLHVEQUFJO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxzREFBRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0RBQUcsbUJBQW1CLFVBQVU7QUFDNUU7QUFDQTtBQUNBLHFFQUFxRSxzREFBRztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFRLDBDQUEwQztBQUNqRjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLG9CQUFvQixFQUFFO0FBQ3RCO0FBQ0EseUVBQXlFLHNEQUFHO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLFVBQVU7QUFDcEMsMEJBQTBCLHFFQUFPO0FBQ2pDLDJCQUEyQixzREFBRyxDQUFDLHVEQUFRLElBQUksZ0dBQWdHLHNEQUFHLG1CQUFtQixpQkFBaUIsT0FBTztBQUN6TDtBQUNBLHlCQUF5QixzREFBRyxXQUFXLCtCQUErQjtBQUN0RTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9HZW9tZXRyeURlYnVnZ2luZ1ZpZXcubWpzPzE1NjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdHJhY2sgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgbW9kdWxhdGUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IEdyb3VwMmQgfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy9nZW9tZXRyeS9Hcm91cDJkLm1qc1wiO1xuZnVuY3Rpb24gdXNlVGljayhpc0VuYWJsZWQgPSB0cnVlKSB7XG4gIGNvbnN0IFtfLCBzZXRUaWNrXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzRW5hYmxlZCkgcmV0dXJuO1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHNldFRpY2soKHRpY2spID0+IHRpY2sgKyAxKTtcbiAgICBlZGl0b3Iub24oXCJ0aWNrXCIsIHVwZGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVkaXRvci5vZmYoXCJ0aWNrXCIsIHVwZGF0ZSk7XG4gICAgfTtcbiAgfSwgW2VkaXRvciwgaXNFbmFibGVkXSk7XG59XG5jb25zdCBHZW9tZXRyeURlYnVnZ2luZ1ZpZXcgPSB0cmFjayhmdW5jdGlvbiBHZW9tZXRyeURlYnVnZ2luZ1ZpZXcyKHtcbiAgc2hvd1N0cm9rZSA9IHRydWUsXG4gIHNob3dWZXJ0aWNlcyA9IHRydWUsXG4gIHNob3dDbG9zZXN0UG9pbnRPbk91dGxpbmUgPSB0cnVlXG59KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICB1c2VUaWNrKHNob3dDbG9zZXN0UG9pbnRPbk91dGxpbmUpO1xuICBjb25zdCB6b29tTGV2ZWwgPSBlZGl0b3IuZ2V0Wm9vbUxldmVsKCk7XG4gIGNvbnN0IHJlbmRlcmluZ1NoYXBlcyA9IGVkaXRvci5nZXRSZW5kZXJpbmdTaGFwZXMoKTtcbiAgY29uc3Qge1xuICAgIGlucHV0czogeyBjdXJyZW50UGFnZVBvaW50IH1cbiAgfSA9IGVkaXRvcjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgXCJzdmdcIixcbiAgICB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICAgICAgekluZGV4OiA5OTk5OTk5OTksXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgb3ZlcmZsb3c6IFwidmlzaWJsZVwiXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IHJlbmRlcmluZ1NoYXBlcy5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShyZXN1bHQuaWQpO1xuICAgICAgICBpZiAoc2hhcGUudHlwZSA9PT0gXCJncm91cFwiKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBlZGl0b3IuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSk7XG4gICAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgICAgY29uc3QgcG9pbnRJblNoYXBlU3BhY2UgPSBlZGl0b3IuZ2V0UG9pbnRJblNoYXBlU3BhY2Uoc2hhcGUsIGN1cnJlbnRQYWdlUG9pbnQpO1xuICAgICAgICBjb25zdCBuZWFyZXN0UG9pbnRPblNoYXBlID0gZ2VvbWV0cnkubmVhcmVzdFBvaW50KHBvaW50SW5TaGFwZVNwYWNlKTtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VUb1BvaW50ID0gZ2VvbWV0cnkuZGlzdGFuY2VUb1BvaW50KHBvaW50SW5TaGFwZVNwYWNlLCB0cnVlKTtcbiAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGRpc3RhbmNlVG9Qb2ludCkgKiB6b29tTGV2ZWw7XG4gICAgICAgIGNvbnN0IGhpdEluc2lkZSA9IGRpc3RhbmNlVG9Qb2ludCA8IDA7XG4gICAgICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IGdlb21ldHJ5O1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXG4gICAgICAgICAgXCJnXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBwYWdlVHJhbnNmb3JtLnRvQ3NzU3RyaW5nKCksXG4gICAgICAgICAgICBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsXG4gICAgICAgICAgICBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgc2hvd1N0cm9rZSAmJiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgICAgIFwiZ1wiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0cm9rZTogZ2VvbWV0cnkuZGVidWdDb2xvciA/PyBcInJlZFwiLFxuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogXCIxXCIsXG4gICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMiAvIHpvb21MZXZlbCxcbiAgICAgICAgICAgICAgICAgIGZpbGw6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goR2VvbWV0cnlTdHJva2UsIHsgZ2VvbWV0cnkgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIHNob3dWZXJ0aWNlcyAmJiB2ZXJ0aWNlcy5tYXAoKHYsIGkpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgICAgICAgXCJjaXJjbGVcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjeDogdi54LFxuICAgICAgICAgICAgICAgICAgY3k6IHYueSxcbiAgICAgICAgICAgICAgICAgIHI6IDIgLyB6b29tTGV2ZWwsXG4gICAgICAgICAgICAgICAgICBmaWxsOiBgaHNsKCR7bW9kdWxhdGUoaSwgWzAsIHZlcnRpY2VzLmxlbmd0aCAtIDFdLCBbMTIwLCAyMDBdKX0sIDEwMCUsIDUwJSlgLFxuICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBcImJsYWNrXCIsXG4gICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMSAvIHpvb21MZXZlbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYHYke2l9YFxuICAgICAgICAgICAgICApKSxcbiAgICAgICAgICAgICAgc2hvd0Nsb3Nlc3RQb2ludE9uT3V0bGluZSAmJiBkaXN0IDwgMTUwICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgeDE6IG5lYXJlc3RQb2ludE9uU2hhcGUueCxcbiAgICAgICAgICAgICAgICAgIHkxOiBuZWFyZXN0UG9pbnRPblNoYXBlLnksXG4gICAgICAgICAgICAgICAgICB4MjogcG9pbnRJblNoYXBlU3BhY2UueCxcbiAgICAgICAgICAgICAgICAgIHkyOiBwb2ludEluU2hhcGVTcGFjZS55LFxuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSAtIGRpc3QgLyAxNTAsXG4gICAgICAgICAgICAgICAgICBzdHJva2U6IGhpdEluc2lkZSA/IFwiZ29sZGVucm9kXCIgOiBcImRvZGdlcmJsdWVcIixcbiAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAyIC8gem9vbUxldmVsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXN1bHQuaWQgKyBcIl9vdXRsaW5lXCJcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgfVxuICApO1xufSk7XG5mdW5jdGlvbiBHZW9tZXRyeVN0cm9rZSh7IGdlb21ldHJ5IH0pIHtcbiAgaWYgKGdlb21ldHJ5IGluc3RhbmNlb2YgR3JvdXAyZCkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbLi4uZ2VvbWV0cnkuY2hpbGRyZW4sIC4uLmdlb21ldHJ5Lmlnbm9yZWRDaGlsZHJlbl0ubWFwKChjaGlsZCwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChHZW9tZXRyeVN0cm9rZSwgeyBnZW9tZXRyeTogY2hpbGQgfSwgaSkpIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IGdlb21ldHJ5LnRvU2ltcGxlU3ZnUGF0aCgpIH0pO1xufVxuZXhwb3J0IHtcbiAgR2VvbWV0cnlEZWJ1Z2dpbmdWaWV3XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlEZWJ1Z2dpbmdWaWV3Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HTMLContainer: () => (/* binding */ HTMLContainer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n\n\nfunction HTMLContainer({ children, className = \"\", ...rest }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ...rest, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-html-container\", className), children });\n}\n\n//# sourceMappingURL=HTMLContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvSFRNTENvbnRhaW5lci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDO0FBQ0o7QUFDcEMseUJBQXlCLG1DQUFtQztBQUM1RCx5QkFBeUIsc0RBQUcsVUFBVSxvQkFBb0IsdUNBQVUsNENBQTRDO0FBQ2hIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL0hUTUxDb250YWluZXIubWpzPzEwMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuZnVuY3Rpb24gSFRNTENvbnRhaW5lcih7IGNoaWxkcmVuLCBjbGFzc05hbWUgPSBcIlwiLCAuLi5yZXN0IH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyAuLi5yZXN0LCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1odG1sLWNvbnRhaW5lclwiLCBjbGFzc05hbWUpLCBjaGlsZHJlbiB9KTtcbn1cbmV4cG9ydCB7XG4gIEhUTUxDb250YWluZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IVE1MQ29udGFpbmVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveCollaborators: () => (/* binding */ LiveCollaborators)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/usePeerIds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\");\n/* harmony import */ var _hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/usePresence.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\");\n\n\n\n\n\n\n\nconst LiveCollaborators = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.track)(function Collaborators() {\n  const peerIds = (0,_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_5__.usePeerIds)();\n  return peerIds.map((id) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CollaboratorGuard, { collaboratorId: id }, id));\n});\nconst CollaboratorGuard = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.track)(function CollaboratorGuard2({\n  collaboratorId\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const presence = (0,_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_6__.usePresence)(collaboratorId);\n  const collaboratorState = useCollaboratorState(editor, presence);\n  if (!(presence && presence.currentPageId === editor.getCurrentPageId())) {\n    return null;\n  }\n  switch (collaboratorState) {\n    case \"inactive\": {\n      const { followingUserId, highlightedUserIds } = editor.getInstanceState();\n      if (!(followingUserId === presence.userId || highlightedUserIds.includes(presence.userId))) {\n        return null;\n      }\n      break;\n    }\n    case \"idle\": {\n      const { highlightedUserIds } = editor.getInstanceState();\n      if (presence.followingUserId === editor.user.getId() && !(presence.chatMessage || highlightedUserIds.includes(presence.userId))) {\n        return null;\n      }\n      break;\n    }\n    case \"active\": {\n      break;\n    }\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Collaborator, { latestPresence: presence });\n});\nconst Collaborator = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.track)(function Collaborator2({\n  latestPresence\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const {\n    CollaboratorBrush,\n    CollaboratorScribble,\n    CollaboratorCursor,\n    CollaboratorHint,\n    CollaboratorShapeIndicator\n  } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditorComponents)();\n  const zoomLevel = editor.getZoomLevel();\n  const viewportPageBounds = editor.getViewportPageBounds();\n  const { userId, chatMessage, brush, scribbles, selectedShapeIds, userName, cursor, color } = latestPresence;\n  const isCursorInViewport = !(cursor.x < viewportPageBounds.minX - 12 / zoomLevel || cursor.y < viewportPageBounds.minY - 16 / zoomLevel || cursor.x > viewportPageBounds.maxX - 12 / zoomLevel || cursor.y > viewportPageBounds.maxY - 16 / zoomLevel);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    brush && CollaboratorBrush ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorBrush,\n      {\n        className: \"tl-collaborator__brush\",\n        brush,\n        color,\n        opacity: 0.1\n      },\n      userId + \"_brush\"\n    ) : null,\n    isCursorInViewport && CollaboratorCursor ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorCursor,\n      {\n        className: \"tl-collaborator__cursor\",\n        point: cursor,\n        color,\n        zoom: zoomLevel,\n        name: userName !== \"New User\" ? userName : null,\n        chatMessage\n      },\n      userId + \"_cursor\"\n    ) : CollaboratorHint ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorHint,\n      {\n        className: \"tl-collaborator__cursor-hint\",\n        point: cursor,\n        color,\n        zoom: zoomLevel,\n        viewport: viewportPageBounds\n      },\n      userId + \"_cursor_hint\"\n    ) : null,\n    CollaboratorScribble && scribbles.length ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: scribbles.map((scribble) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorScribble,\n      {\n        className: \"tl-collaborator__scribble\",\n        scribble,\n        color,\n        zoom: zoomLevel,\n        opacity: scribble.color === \"laser\" ? 0.5 : 0.1\n      },\n      userId + \"_scribble_\" + scribble.id\n    )) }) : null,\n    CollaboratorShapeIndicator && selectedShapeIds.filter((id) => !editor.isShapeHidden(id)).map((shapeId) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorShapeIndicator,\n      {\n        className: \"tl-collaborator__shape-indicator\",\n        shapeId,\n        color,\n        opacity: 0.5\n      },\n      userId + \"_\" + shapeId\n    ))\n  ] });\n});\nfunction getStateFromElapsedTime(editor, elapsed) {\n  return elapsed > editor.options.collaboratorInactiveTimeoutMs ? \"inactive\" : elapsed > editor.options.collaboratorIdleTimeoutMs ? \"idle\" : \"active\";\n}\nfunction useCollaboratorState(editor, latestPresence) {\n  const rLastActivityTimestamp = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(latestPresence?.lastActivityTimestamp ?? -1);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    () => getStateFromElapsedTime(editor, Date.now() - rLastActivityTimestamp.current)\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const interval = editor.timers.setInterval(() => {\n      setState(getStateFromElapsedTime(editor, Date.now() - rLastActivityTimestamp.current));\n    }, editor.options.collaboratorCheckIntervalMs);\n    return () => clearInterval(interval);\n  }, [editor]);\n  if (latestPresence) {\n    rLastActivityTimestamp.current = latestPresence.lastActivityTimestamp;\n  }\n  return state;\n}\n\n//# sourceMappingURL=LiveCollaborators.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvTGl2ZUNvbGxhYm9yYXRvcnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ1o7QUFDUTtBQUNEO0FBQ29CO0FBQ2xCO0FBQ0U7QUFDdkQsMEJBQTBCLDBEQUFLO0FBQy9CLGtCQUFrQixpRUFBVTtBQUM1Qiw2Q0FBNkMsc0RBQUcsc0JBQXNCLG9CQUFvQjtBQUMxRixDQUFDO0FBQ0QsMEJBQTBCLDBEQUFLO0FBQy9CO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiwrREFBUztBQUMxQixtQkFBbUIsbUVBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzQ0FBc0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQkFBcUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLGlCQUFpQiwwQkFBMEI7QUFDdkUsQ0FBQztBQUNELHFCQUFxQiwwREFBSztBQUMxQjtBQUNBLENBQUM7QUFDRCxpQkFBaUIsK0RBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFLG1GQUFtQjtBQUN6QjtBQUNBO0FBQ0EsVUFBVSxtRkFBbUY7QUFDN0Y7QUFDQSx5QkFBeUIsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQzFDLGlEQUFpRCxzREFBRztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLCtEQUErRCxzREFBRztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMkNBQTJDLHNEQUFHO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSwrREFBK0Qsc0RBQUcsQ0FBQyx1REFBUSxJQUFJLHNEQUFzRCxzREFBRztBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFFBQVE7QUFDUiw4SEFBOEgsc0RBQUc7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDZDQUFNO0FBQ3ZDLDRCQUE0QiwrQ0FBUTtBQUNwQztBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9MaXZlQ29sbGFib3JhdG9ycy5tanM/NDY0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGcmFnbWVudCwganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB0cmFjayB9IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3JDb21wb25lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VQZWVySWRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZVBlZXJJZHMubWpzXCI7XG5pbXBvcnQgeyB1c2VQcmVzZW5jZSB9IGZyb20gXCIuLi9ob29rcy91c2VQcmVzZW5jZS5tanNcIjtcbmNvbnN0IExpdmVDb2xsYWJvcmF0b3JzID0gdHJhY2soZnVuY3Rpb24gQ29sbGFib3JhdG9ycygpIHtcbiAgY29uc3QgcGVlcklkcyA9IHVzZVBlZXJJZHMoKTtcbiAgcmV0dXJuIHBlZXJJZHMubWFwKChpZCkgPT4gLyogQF9fUFVSRV9fICovIGpzeChDb2xsYWJvcmF0b3JHdWFyZCwgeyBjb2xsYWJvcmF0b3JJZDogaWQgfSwgaWQpKTtcbn0pO1xuY29uc3QgQ29sbGFib3JhdG9yR3VhcmQgPSB0cmFjayhmdW5jdGlvbiBDb2xsYWJvcmF0b3JHdWFyZDIoe1xuICBjb2xsYWJvcmF0b3JJZFxufSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgcHJlc2VuY2UgPSB1c2VQcmVzZW5jZShjb2xsYWJvcmF0b3JJZCk7XG4gIGNvbnN0IGNvbGxhYm9yYXRvclN0YXRlID0gdXNlQ29sbGFib3JhdG9yU3RhdGUoZWRpdG9yLCBwcmVzZW5jZSk7XG4gIGlmICghKHByZXNlbmNlICYmIHByZXNlbmNlLmN1cnJlbnRQYWdlSWQgPT09IGVkaXRvci5nZXRDdXJyZW50UGFnZUlkKCkpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3dpdGNoIChjb2xsYWJvcmF0b3JTdGF0ZSkge1xuICAgIGNhc2UgXCJpbmFjdGl2ZVwiOiB7XG4gICAgICBjb25zdCB7IGZvbGxvd2luZ1VzZXJJZCwgaGlnaGxpZ2h0ZWRVc2VySWRzIH0gPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgaWYgKCEoZm9sbG93aW5nVXNlcklkID09PSBwcmVzZW5jZS51c2VySWQgfHwgaGlnaGxpZ2h0ZWRVc2VySWRzLmluY2x1ZGVzKHByZXNlbmNlLnVzZXJJZCkpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJpZGxlXCI6IHtcbiAgICAgIGNvbnN0IHsgaGlnaGxpZ2h0ZWRVc2VySWRzIH0gPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgaWYgKHByZXNlbmNlLmZvbGxvd2luZ1VzZXJJZCA9PT0gZWRpdG9yLnVzZXIuZ2V0SWQoKSAmJiAhKHByZXNlbmNlLmNoYXRNZXNzYWdlIHx8IGhpZ2hsaWdodGVkVXNlcklkcy5pbmNsdWRlcyhwcmVzZW5jZS51c2VySWQpKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiYWN0aXZlXCI6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDb2xsYWJvcmF0b3IsIHsgbGF0ZXN0UHJlc2VuY2U6IHByZXNlbmNlIH0pO1xufSk7XG5jb25zdCBDb2xsYWJvcmF0b3IgPSB0cmFjayhmdW5jdGlvbiBDb2xsYWJvcmF0b3IyKHtcbiAgbGF0ZXN0UHJlc2VuY2Vcbn0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHtcbiAgICBDb2xsYWJvcmF0b3JCcnVzaCxcbiAgICBDb2xsYWJvcmF0b3JTY3JpYmJsZSxcbiAgICBDb2xsYWJvcmF0b3JDdXJzb3IsXG4gICAgQ29sbGFib3JhdG9ySGludCxcbiAgICBDb2xsYWJvcmF0b3JTaGFwZUluZGljYXRvclxuICB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCB6b29tTGV2ZWwgPSBlZGl0b3IuZ2V0Wm9vbUxldmVsKCk7XG4gIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IGVkaXRvci5nZXRWaWV3cG9ydFBhZ2VCb3VuZHMoKTtcbiAgY29uc3QgeyB1c2VySWQsIGNoYXRNZXNzYWdlLCBicnVzaCwgc2NyaWJibGVzLCBzZWxlY3RlZFNoYXBlSWRzLCB1c2VyTmFtZSwgY3Vyc29yLCBjb2xvciB9ID0gbGF0ZXN0UHJlc2VuY2U7XG4gIGNvbnN0IGlzQ3Vyc29ySW5WaWV3cG9ydCA9ICEoY3Vyc29yLnggPCB2aWV3cG9ydFBhZ2VCb3VuZHMubWluWCAtIDEyIC8gem9vbUxldmVsIHx8IGN1cnNvci55IDwgdmlld3BvcnRQYWdlQm91bmRzLm1pblkgLSAxNiAvIHpvb21MZXZlbCB8fCBjdXJzb3IueCA+IHZpZXdwb3J0UGFnZUJvdW5kcy5tYXhYIC0gMTIgLyB6b29tTGV2ZWwgfHwgY3Vyc29yLnkgPiB2aWV3cG9ydFBhZ2VCb3VuZHMubWF4WSAtIDE2IC8gem9vbUxldmVsKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgYnJ1c2ggJiYgQ29sbGFib3JhdG9yQnJ1c2ggPyAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yQnJ1c2gsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX2JydXNoXCIsXG4gICAgICAgIGJydXNoLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgb3BhY2l0eTogMC4xXG4gICAgICB9LFxuICAgICAgdXNlcklkICsgXCJfYnJ1c2hcIlxuICAgICkgOiBudWxsLFxuICAgIGlzQ3Vyc29ySW5WaWV3cG9ydCAmJiBDb2xsYWJvcmF0b3JDdXJzb3IgPyAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yQ3Vyc29yLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwidGwtY29sbGFib3JhdG9yX19jdXJzb3JcIixcbiAgICAgICAgcG9pbnQ6IGN1cnNvcixcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHpvb206IHpvb21MZXZlbCxcbiAgICAgICAgbmFtZTogdXNlck5hbWUgIT09IFwiTmV3IFVzZXJcIiA/IHVzZXJOYW1lIDogbnVsbCxcbiAgICAgICAgY2hhdE1lc3NhZ2VcbiAgICAgIH0sXG4gICAgICB1c2VySWQgKyBcIl9jdXJzb3JcIlxuICAgICkgOiBDb2xsYWJvcmF0b3JIaW50ID8gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIENvbGxhYm9yYXRvckhpbnQsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX2N1cnNvci1oaW50XCIsXG4gICAgICAgIHBvaW50OiBjdXJzb3IsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICB6b29tOiB6b29tTGV2ZWwsXG4gICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydFBhZ2VCb3VuZHNcbiAgICAgIH0sXG4gICAgICB1c2VySWQgKyBcIl9jdXJzb3JfaGludFwiXG4gICAgKSA6IG51bGwsXG4gICAgQ29sbGFib3JhdG9yU2NyaWJibGUgJiYgc2NyaWJibGVzLmxlbmd0aCA/IC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHNjcmliYmxlcy5tYXAoKHNjcmliYmxlKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yU2NyaWJibGUsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX3NjcmliYmxlXCIsXG4gICAgICAgIHNjcmliYmxlLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgem9vbTogem9vbUxldmVsLFxuICAgICAgICBvcGFjaXR5OiBzY3JpYmJsZS5jb2xvciA9PT0gXCJsYXNlclwiID8gMC41IDogMC4xXG4gICAgICB9LFxuICAgICAgdXNlcklkICsgXCJfc2NyaWJibGVfXCIgKyBzY3JpYmJsZS5pZFxuICAgICkpIH0pIDogbnVsbCxcbiAgICBDb2xsYWJvcmF0b3JTaGFwZUluZGljYXRvciAmJiBzZWxlY3RlZFNoYXBlSWRzLmZpbHRlcigoaWQpID0+ICFlZGl0b3IuaXNTaGFwZUhpZGRlbihpZCkpLm1hcCgoc2hhcGVJZCkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIENvbGxhYm9yYXRvclNoYXBlSW5kaWNhdG9yLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwidGwtY29sbGFib3JhdG9yX19zaGFwZS1pbmRpY2F0b3JcIixcbiAgICAgICAgc2hhcGVJZCxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIG9wYWNpdHk6IDAuNVxuICAgICAgfSxcbiAgICAgIHVzZXJJZCArIFwiX1wiICsgc2hhcGVJZFxuICAgICkpXG4gIF0gfSk7XG59KTtcbmZ1bmN0aW9uIGdldFN0YXRlRnJvbUVsYXBzZWRUaW1lKGVkaXRvciwgZWxhcHNlZCkge1xuICByZXR1cm4gZWxhcHNlZCA+IGVkaXRvci5vcHRpb25zLmNvbGxhYm9yYXRvckluYWN0aXZlVGltZW91dE1zID8gXCJpbmFjdGl2ZVwiIDogZWxhcHNlZCA+IGVkaXRvci5vcHRpb25zLmNvbGxhYm9yYXRvcklkbGVUaW1lb3V0TXMgPyBcImlkbGVcIiA6IFwiYWN0aXZlXCI7XG59XG5mdW5jdGlvbiB1c2VDb2xsYWJvcmF0b3JTdGF0ZShlZGl0b3IsIGxhdGVzdFByZXNlbmNlKSB7XG4gIGNvbnN0IHJMYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSB1c2VSZWYobGF0ZXN0UHJlc2VuY2U/Lmxhc3RBY3Rpdml0eVRpbWVzdGFtcCA/PyAtMSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoXG4gICAgKCkgPT4gZ2V0U3RhdGVGcm9tRWxhcHNlZFRpbWUoZWRpdG9yLCBEYXRlLm5vdygpIC0gckxhc3RBY3Rpdml0eVRpbWVzdGFtcC5jdXJyZW50KVxuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGludGVydmFsID0gZWRpdG9yLnRpbWVycy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRTdGF0ZShnZXRTdGF0ZUZyb21FbGFwc2VkVGltZShlZGl0b3IsIERhdGUubm93KCkgLSByTGFzdEFjdGl2aXR5VGltZXN0YW1wLmN1cnJlbnQpKTtcbiAgICB9LCBlZGl0b3Iub3B0aW9ucy5jb2xsYWJvcmF0b3JDaGVja0ludGVydmFsTXMpO1xuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSwgW2VkaXRvcl0pO1xuICBpZiAobGF0ZXN0UHJlc2VuY2UpIHtcbiAgICByTGFzdEFjdGl2aXR5VGltZXN0YW1wLmN1cnJlbnQgPSBsYXRlc3RQcmVzZW5jZS5sYXN0QWN0aXZpdHlUaW1lc3RhbXA7XG4gIH1cbiAgcmV0dXJuIHN0YXRlO1xufVxuZXhwb3J0IHtcbiAgTGl2ZUNvbGxhYm9yYXRvcnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaXZlQ29sbGFib3JhdG9ycy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SVGContainer: () => (/* binding */ SVGContainer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n\n\nfunction SVGContainer({ children, className = \"\", ...rest }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { ...rest, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-svg-container\", className), children });\n}\n\n//# sourceMappingURL=SVGContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvU1ZHQ29udGFpbmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDSjtBQUNwQyx3QkFBd0IsbUNBQW1DO0FBQzNELHlCQUF5QixzREFBRyxVQUFVLG9CQUFvQix1Q0FBVSwyQ0FBMkM7QUFDL0c7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvU1ZHQ29udGFpbmVyLm1qcz9iZjJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmZ1bmN0aW9uIFNWR0NvbnRhaW5lcih7IGNoaWxkcmVuLCBjbGFzc05hbWUgPSBcIlwiLCAuLi5yZXN0IH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyAuLi5yZXN0LCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1zdmctY29udGFpbmVyXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuIH0pO1xufVxuZXhwb3J0IHtcbiAgU1ZHQ29udGFpbmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U1ZHQ29udGFpbmVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InnerShape: () => (/* binding */ InnerShape),\n/* harmony export */   InnerShapeBackground: () => (/* binding */ InnerShapeBackground),\n/* harmony export */   Shape: () => (/* binding */ Shape)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\n\nconst Shape = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function Shape2({\n  id,\n  shape,\n  util,\n  index,\n  backgroundIndex,\n  opacity\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const { ShapeErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditorComponents)();\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const bgContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const memoizedStuffRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n    transform: \"\",\n    clipPath: \"none\",\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n    isCulled: false\n  });\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set shape stuff\",\n    () => {\n      const shape2 = editor.getShape(id);\n      if (!shape2) return;\n      const prev = memoizedStuffRef.current;\n      const clipPath = editor.getShapeClipPath(id) ?? \"none\";\n      if (clipPath !== prev.clipPath) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"clip-path\", clipPath);\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"clip-path\", clipPath);\n        prev.clipPath = clipPath;\n      }\n      const pageTransform = editor.getShapePageTransform(id);\n      const transform = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_5__.Mat.toCssString(pageTransform);\n      const bounds = editor.getShapeGeometry(shape2).bounds;\n      if (transform !== prev.transform) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"transform\", transform);\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"transform\", transform);\n        prev.transform = transform;\n      }\n      const width = Math.max(bounds.width, 1);\n      const height = Math.max(bounds.height, 1);\n      if (width !== prev.width || height !== prev.height) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"width\", width + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"height\", height + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"width\", width + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"height\", height + \"px\");\n        prev.width = width;\n        prev.height = height;\n      }\n    },\n    [editor]\n  );\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set opacity and z-index\",\n    () => {\n      const container = containerRef.current;\n      const bgContainer = bgContainerRef.current;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(container, \"opacity\", opacity);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainer, \"opacity\", opacity);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(container, \"z-index\", index);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainer, \"z-index\", backgroundIndex);\n    },\n    [opacity, index, backgroundIndex]\n  );\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set display\",\n    () => {\n      const shape2 = editor.getShape(id);\n      if (!shape2) return;\n      const culledShapes = editor.getCulledShapes();\n      const isCulled = culledShapes.has(id);\n      if (isCulled !== memoizedStuffRef.current.isCulled) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"display\", isCulled ? \"none\" : \"block\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"display\", isCulled ? \"none\" : \"block\");\n        memoizedStuffRef.current.isCulled = isCulled;\n      }\n    },\n    [editor]\n  );\n  const annotateError = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (error) => editor.annotateError(error, { origin: \"shape\", willCrashApp: false }),\n    [editor]\n  );\n  if (!shape) return null;\n  const isFilledShape = \"fill\" in shape.props && shape.props.fill !== \"none\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    util.backgroundComponent && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: bgContainerRef,\n        className: \"tl-shape tl-shape-background\",\n        \"data-shape-type\": shape.type,\n        draggable: false,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__.OptionalErrorBoundary, { fallback: ShapeErrorFallback, onError: annotateError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerShapeBackground, { shape, util }) })\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: containerRef,\n        className: \"tl-shape\",\n        \"data-shape-type\": shape.type,\n        \"data-shape-is-filled\": isFilledShape,\n        draggable: false,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__.OptionalErrorBoundary, { fallback: ShapeErrorFallback, onError: annotateError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerShape, { shape, util }) })\n      }\n    )\n  ] });\n});\nconst InnerShape = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(\n  function InnerShape2({ shape, util }) {\n    return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      \"InnerShape:\" + shape.type,\n      () => (\n        // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n        // calling the render method with stale data.\n        (util.component(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n      )\n    );\n  },\n  (prev, next) => prev.shape.props === next.shape.props && prev.shape.meta === next.shape.meta\n);\nconst InnerShapeBackground = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(\n  function InnerShapeBackground2({\n    shape,\n    util\n  }) {\n    return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      \"InnerShape:\" + shape.type,\n      () => (\n        // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n        // calling the render method with stale data.\n        (util.backgroundComponent?.(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n      )\n    );\n  },\n  (prev, next) => prev.shape.props === next.shape.props && prev.shape.meta === next.shape.meta\n);\n\n//# sourceMappingURL=Shape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2dCO0FBQ3RCO0FBQ0M7QUFDb0I7QUFDM0I7QUFDUTtBQUNRO0FBQzVELGNBQWMsMkNBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiwrREFBUztBQUMxQixVQUFVLHFCQUFxQixFQUFFLG1GQUFtQjtBQUNwRCx1QkFBdUIsNkNBQU07QUFDN0IseUJBQXlCLDZDQUFNO0FBQy9CLDJCQUEyQiw2Q0FBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLG9FQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFHO0FBQzNCO0FBQ0E7QUFDQSxRQUFRLGdFQUFnQjtBQUN4QixRQUFRLGdFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLG9FQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRUFBZ0I7QUFDdEIsTUFBTSxnRUFBZ0I7QUFDdEIsTUFBTSxnRUFBZ0I7QUFDdEIsTUFBTSxnRUFBZ0I7QUFDdEIsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLG9FQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esd0JBQXdCLGtEQUFXO0FBQ25DLDZDQUE2QyxzQ0FBc0M7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQzFDLGdEQUFnRCxzREFBRztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0RBQUcsQ0FBQyxxRUFBcUIsSUFBSSxnRkFBZ0Ysc0RBQUcseUJBQXlCLGFBQWEsR0FBRztBQUMzTDtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFHLENBQUMscUVBQXFCLElBQUksZ0ZBQWdGLHNEQUFHLGVBQWUsYUFBYSxHQUFHO0FBQ2pMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELG1CQUFtQiwyQ0FBSTtBQUN2Qix5QkFBeUIsYUFBYTtBQUN0QyxXQUFXLHFFQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNkJBQTZCLDJDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxXQUFXLHFFQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL1NoYXBlLm1qcz84MGNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVF1aWNrUmVhY3RvciwgdXNlU3RhdGVUcmFja2luZyB9IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5pbXBvcnQgeyBtZW1vLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgc2V0U3R5bGVQcm9wZXJ0eSB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBPcHRpb25hbEVycm9yQm91bmRhcnkgfSBmcm9tIFwiLi9FcnJvckJvdW5kYXJ5Lm1qc1wiO1xuY29uc3QgU2hhcGUgPSBtZW1vKGZ1bmN0aW9uIFNoYXBlMih7XG4gIGlkLFxuICBzaGFwZSxcbiAgdXRpbCxcbiAgaW5kZXgsXG4gIGJhY2tncm91bmRJbmRleCxcbiAgb3BhY2l0eVxufSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgeyBTaGFwZUVycm9yRmFsbGJhY2sgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBiZ0NvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbWVtb2l6ZWRTdHVmZlJlZiA9IHVzZVJlZih7XG4gICAgdHJhbnNmb3JtOiBcIlwiLFxuICAgIGNsaXBQYXRoOiBcIm5vbmVcIixcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDAsXG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIGlzQ3VsbGVkOiBmYWxzZVxuICB9KTtcbiAgdXNlUXVpY2tSZWFjdG9yKFxuICAgIFwic2V0IHNoYXBlIHN0dWZmXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3Qgc2hhcGUyID0gZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmICghc2hhcGUyKSByZXR1cm47XG4gICAgICBjb25zdCBwcmV2ID0gbWVtb2l6ZWRTdHVmZlJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgY2xpcFBhdGggPSBlZGl0b3IuZ2V0U2hhcGVDbGlwUGF0aChpZCkgPz8gXCJub25lXCI7XG4gICAgICBpZiAoY2xpcFBhdGggIT09IHByZXYuY2xpcFBhdGgpIHtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShjb250YWluZXJSZWYuY3VycmVudCwgXCJjbGlwLXBhdGhcIiwgY2xpcFBhdGgpO1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyUmVmLmN1cnJlbnQsIFwiY2xpcC1wYXRoXCIsIGNsaXBQYXRoKTtcbiAgICAgICAgcHJldi5jbGlwUGF0aCA9IGNsaXBQYXRoO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oaWQpO1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gTWF0LnRvQ3NzU3RyaW5nKHBhZ2VUcmFuc2Zvcm0pO1xuICAgICAgY29uc3QgYm91bmRzID0gZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUyKS5ib3VuZHM7XG4gICAgICBpZiAodHJhbnNmb3JtICE9PSBwcmV2LnRyYW5zZm9ybSkge1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGNvbnRhaW5lclJlZi5jdXJyZW50LCBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyUmVmLmN1cnJlbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSk7XG4gICAgICAgIHByZXYudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgfVxuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heChib3VuZHMud2lkdGgsIDEpO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoYm91bmRzLmhlaWdodCwgMSk7XG4gICAgICBpZiAod2lkdGggIT09IHByZXYud2lkdGggfHwgaGVpZ2h0ICE9PSBwcmV2LmhlaWdodCkge1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGNvbnRhaW5lclJlZi5jdXJyZW50LCBcIndpZHRoXCIsIHdpZHRoICsgXCJweFwiKTtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShjb250YWluZXJSZWYuY3VycmVudCwgXCJoZWlnaHRcIiwgaGVpZ2h0ICsgXCJweFwiKTtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShiZ0NvbnRhaW5lclJlZi5jdXJyZW50LCBcIndpZHRoXCIsIHdpZHRoICsgXCJweFwiKTtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShiZ0NvbnRhaW5lclJlZi5jdXJyZW50LCBcImhlaWdodFwiLCBoZWlnaHQgKyBcInB4XCIpO1xuICAgICAgICBwcmV2LndpZHRoID0gd2lkdGg7XG4gICAgICAgIHByZXYuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfVxuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgdXNlUXVpY2tSZWFjdG9yKFxuICAgIFwic2V0IG9wYWNpdHkgYW5kIHotaW5kZXhcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGJnQ29udGFpbmVyID0gYmdDb250YWluZXJSZWYuY3VycmVudDtcbiAgICAgIHNldFN0eWxlUHJvcGVydHkoY29udGFpbmVyLCBcIm9wYWNpdHlcIiwgb3BhY2l0eSk7XG4gICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyLCBcIm9wYWNpdHlcIiwgb3BhY2l0eSk7XG4gICAgICBzZXRTdHlsZVByb3BlcnR5KGNvbnRhaW5lciwgXCJ6LWluZGV4XCIsIGluZGV4KTtcbiAgICAgIHNldFN0eWxlUHJvcGVydHkoYmdDb250YWluZXIsIFwiei1pbmRleFwiLCBiYWNrZ3JvdW5kSW5kZXgpO1xuICAgIH0sXG4gICAgW29wYWNpdHksIGluZGV4LCBiYWNrZ3JvdW5kSW5kZXhdXG4gICk7XG4gIHVzZVF1aWNrUmVhY3RvcihcbiAgICBcInNldCBkaXNwbGF5XCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3Qgc2hhcGUyID0gZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmICghc2hhcGUyKSByZXR1cm47XG4gICAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSBlZGl0b3IuZ2V0Q3VsbGVkU2hhcGVzKCk7XG4gICAgICBjb25zdCBpc0N1bGxlZCA9IGN1bGxlZFNoYXBlcy5oYXMoaWQpO1xuICAgICAgaWYgKGlzQ3VsbGVkICE9PSBtZW1vaXplZFN0dWZmUmVmLmN1cnJlbnQuaXNDdWxsZWQpIHtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShjb250YWluZXJSZWYuY3VycmVudCwgXCJkaXNwbGF5XCIsIGlzQ3VsbGVkID8gXCJub25lXCIgOiBcImJsb2NrXCIpO1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyUmVmLmN1cnJlbnQsIFwiZGlzcGxheVwiLCBpc0N1bGxlZCA/IFwibm9uZVwiIDogXCJibG9ja1wiKTtcbiAgICAgICAgbWVtb2l6ZWRTdHVmZlJlZi5jdXJyZW50LmlzQ3VsbGVkID0gaXNDdWxsZWQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICBjb25zdCBhbm5vdGF0ZUVycm9yID0gdXNlQ2FsbGJhY2soXG4gICAgKGVycm9yKSA9PiBlZGl0b3IuYW5ub3RhdGVFcnJvcihlcnJvciwgeyBvcmlnaW46IFwic2hhcGVcIiwgd2lsbENyYXNoQXBwOiBmYWxzZSB9KSxcbiAgICBbZWRpdG9yXVxuICApO1xuICBpZiAoIXNoYXBlKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgaXNGaWxsZWRTaGFwZSA9IFwiZmlsbFwiIGluIHNoYXBlLnByb3BzICYmIHNoYXBlLnByb3BzLmZpbGwgIT09IFwibm9uZVwiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICB1dGlsLmJhY2tncm91bmRDb21wb25lbnQgJiYgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogYmdDb250YWluZXJSZWYsXG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1zaGFwZSB0bC1zaGFwZS1iYWNrZ3JvdW5kXCIsXG4gICAgICAgIFwiZGF0YS1zaGFwZS10eXBlXCI6IHNoYXBlLnR5cGUsXG4gICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KE9wdGlvbmFsRXJyb3JCb3VuZGFyeSwgeyBmYWxsYmFjazogU2hhcGVFcnJvckZhbGxiYWNrLCBvbkVycm9yOiBhbm5vdGF0ZUVycm9yLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChJbm5lclNoYXBlQmFja2dyb3VuZCwgeyBzaGFwZSwgdXRpbCB9KSB9KVxuICAgICAgfVxuICAgICksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogY29udGFpbmVyUmVmLFxuICAgICAgICBjbGFzc05hbWU6IFwidGwtc2hhcGVcIixcbiAgICAgICAgXCJkYXRhLXNoYXBlLXR5cGVcIjogc2hhcGUudHlwZSxcbiAgICAgICAgXCJkYXRhLXNoYXBlLWlzLWZpbGxlZFwiOiBpc0ZpbGxlZFNoYXBlLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChPcHRpb25hbEVycm9yQm91bmRhcnksIHsgZmFsbGJhY2s6IFNoYXBlRXJyb3JGYWxsYmFjaywgb25FcnJvcjogYW5ub3RhdGVFcnJvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goSW5uZXJTaGFwZSwgeyBzaGFwZSwgdXRpbCB9KSB9KVxuICAgICAgfVxuICAgIClcbiAgXSB9KTtcbn0pO1xuY29uc3QgSW5uZXJTaGFwZSA9IG1lbW8oXG4gIGZ1bmN0aW9uIElubmVyU2hhcGUyKHsgc2hhcGUsIHV0aWwgfSkge1xuICAgIHJldHVybiB1c2VTdGF0ZVRyYWNraW5nKFxuICAgICAgXCJJbm5lclNoYXBlOlwiICsgc2hhcGUudHlwZSxcbiAgICAgICgpID0+IChcbiAgICAgICAgLy8gYWx3YXlzIGZldGNoIHRoZSBsYXRlc3Qgc2hhcGUgZnJvbSB0aGUgc3RvcmUgZXZlbiBpZiB0aGUgcHJvcHMvbWV0YSBoYXZlIG5vdCBjaGFuZ2VkLCB0byBhdm9pZFxuICAgICAgICAvLyBjYWxsaW5nIHRoZSByZW5kZXIgbWV0aG9kIHdpdGggc3RhbGUgZGF0YS5cbiAgICAgICAgKHV0aWwuY29tcG9uZW50KHV0aWwuZWRpdG9yLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKHNoYXBlLmlkKSkpXG4gICAgICApXG4gICAgKTtcbiAgfSxcbiAgKHByZXYsIG5leHQpID0+IHByZXYuc2hhcGUucHJvcHMgPT09IG5leHQuc2hhcGUucHJvcHMgJiYgcHJldi5zaGFwZS5tZXRhID09PSBuZXh0LnNoYXBlLm1ldGFcbik7XG5jb25zdCBJbm5lclNoYXBlQmFja2dyb3VuZCA9IG1lbW8oXG4gIGZ1bmN0aW9uIElubmVyU2hhcGVCYWNrZ3JvdW5kMih7XG4gICAgc2hhcGUsXG4gICAgdXRpbFxuICB9KSB7XG4gICAgcmV0dXJuIHVzZVN0YXRlVHJhY2tpbmcoXG4gICAgICBcIklubmVyU2hhcGU6XCIgKyBzaGFwZS50eXBlLFxuICAgICAgKCkgPT4gKFxuICAgICAgICAvLyBhbHdheXMgZmV0Y2ggdGhlIGxhdGVzdCBzaGFwZSBmcm9tIHRoZSBzdG9yZSBldmVuIGlmIHRoZSBwcm9wcy9tZXRhIGhhdmUgbm90IGNoYW5nZWQsIHRvIGF2b2lkXG4gICAgICAgIC8vIGNhbGxpbmcgdGhlIHJlbmRlciBtZXRob2Qgd2l0aCBzdGFsZSBkYXRhLlxuICAgICAgICAodXRpbC5iYWNrZ3JvdW5kQ29tcG9uZW50Py4odXRpbC5lZGl0b3Iuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUoc2hhcGUuaWQpKSlcbiAgICAgIClcbiAgICApO1xuICB9LFxuICAocHJldiwgbmV4dCkgPT4gcHJldi5zaGFwZS5wcm9wcyA9PT0gbmV4dC5zaGFwZS5wcm9wcyAmJiBwcmV2LnNoYXBlLm1ldGEgPT09IG5leHQuc2hhcGUubWV0YVxuKTtcbmV4cG9ydCB7XG4gIElubmVyU2hhcGUsXG4gIElubmVyU2hhcGVCYWNrZ3JvdW5kLFxuICBTaGFwZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultBackground: () => (/* binding */ DefaultBackground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nfunction DefaultBackground() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-background\" });\n}\n\n//# sourceMappingURL=DefaultBackground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCYWNrZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLHlCQUF5QixzREFBRyxVQUFVLDRCQUE0QjtBQUNsRTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEJhY2tncm91bmQubWpzPzAyZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBEZWZhdWx0QmFja2dyb3VuZCgpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtYmFja2dyb3VuZFwiIH0pO1xufVxuZXhwb3J0IHtcbiAgRGVmYXVsdEJhY2tncm91bmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0QmFja2dyb3VuZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultBrush: () => (/* binding */ DefaultBrush)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nconst DefaultBrush = ({ brush, color, opacity, className }) => {\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__.useTransform)(rSvg, brush.x, brush.y);\n  const w = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, brush.w));\n  const h = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, brush.h));\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-overlays__item\", ref: rSvg, children: color ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: \"tl-brush\", opacity, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: w, height: h, fill: color, opacity: 0.75 }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: w, height: h, fill: \"none\", stroke: color, opacity: 0.1 })\n  ] }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { className: `tl-brush tl-brush__default ${className}`, width: w, height: h }) });\n};\n\n//# sourceMappingURL=DefaultBrush.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCcnVzaC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7QUFDZjtBQUM2QjtBQUNBO0FBQzVELHdCQUF3QixrQ0FBa0M7QUFDMUQsZUFBZSw2Q0FBTTtBQUNyQixFQUFFLHFFQUFZO0FBQ2QsWUFBWSxxRUFBYztBQUMxQixZQUFZLHFFQUFjO0FBQzFCLHlCQUF5QixzREFBRyxVQUFVLDZFQUE2RSx1REFBSSxRQUFRO0FBQy9ILG9CQUFvQixzREFBRyxXQUFXLGlEQUFpRDtBQUNuRixvQkFBb0Isc0RBQUcsV0FBVyxnRUFBZ0U7QUFDbEcsS0FBSyxvQkFBb0Isc0RBQUcsV0FBVyx5Q0FBeUMsVUFBVSx3QkFBd0IsR0FBRztBQUNySDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEJydXNoLm1qcz9iZGIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlVHJhbnNmb3JtLm1qc1wiO1xuaW1wb3J0IHsgdG9Eb21QcmVjaXNpb24gfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmNvbnN0IERlZmF1bHRCcnVzaCA9ICh7IGJydXNoLCBjb2xvciwgb3BhY2l0eSwgY2xhc3NOYW1lIH0pID0+IHtcbiAgY29uc3QgclN2ZyA9IHVzZVJlZihudWxsKTtcbiAgdXNlVHJhbnNmb3JtKHJTdmcsIGJydXNoLngsIGJydXNoLnkpO1xuICBjb25zdCB3ID0gdG9Eb21QcmVjaXNpb24oTWF0aC5tYXgoMSwgYnJ1c2gudykpO1xuICBjb25zdCBoID0gdG9Eb21QcmVjaXNpb24oTWF0aC5tYXgoMSwgYnJ1c2guaCkpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7IGNsYXNzTmFtZTogXCJ0bC1vdmVybGF5c19faXRlbVwiLCByZWY6IHJTdmcsIGNoaWxkcmVuOiBjb2xvciA/IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZ1wiLCB7IGNsYXNzTmFtZTogXCJ0bC1icnVzaFwiLCBvcGFjaXR5LCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJyZWN0XCIsIHsgd2lkdGg6IHcsIGhlaWdodDogaCwgZmlsbDogY29sb3IsIG9wYWNpdHk6IDAuNzUgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcInJlY3RcIiwgeyB3aWR0aDogdywgaGVpZ2h0OiBoLCBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBjb2xvciwgb3BhY2l0eTogMC4xIH0pXG4gIF0gfSkgOiAvKiBAX19QVVJFX18gKi8ganN4KFwicmVjdFwiLCB7IGNsYXNzTmFtZTogYHRsLWJydXNoIHRsLWJydXNoX19kZWZhdWx0ICR7Y2xhc3NOYW1lfWAsIHdpZHRoOiB3LCBoZWlnaHQ6IGggfSkgfSk7XG59O1xuZXhwb3J0IHtcbiAgRGVmYXVsdEJydXNoXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEJydXNoLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCanvas: () => (/* binding */ DefaultCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n/* harmony import */ var _hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hooks/useCanvasEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs\");\n/* harmony import */ var _hooks_useCoarsePointer_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../hooks/useCoarsePointer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs\");\n/* harmony import */ var _hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _hooks_useDocumentEvents_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../hooks/useDocumentEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_useFixSafariDoubleTapZoomPencilEvents_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../hooks/useFixSafariDoubleTapZoomPencilEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs\");\n/* harmony import */ var _hooks_useGestureEvents_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../hooks/useGestureEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs\");\n/* harmony import */ var _hooks_useHandleEvents_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../hooks/useHandleEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs\");\n/* harmony import */ var _hooks_useScreenBounds_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../hooks/useScreenBounds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _GeometryDebuggingView_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../GeometryDebuggingView.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs\");\n/* harmony import */ var _LiveCollaborators_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../LiveCollaborators.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs\");\n/* harmony import */ var _Shape_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../Shape.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction DefaultCanvas({ className }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const { Background, SvgDefs, ShapeIndicators } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  const rCanvas = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const rHtmlLayer = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const rHtmlLayer2 = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__.useContainer)();\n  (0,_hooks_useScreenBounds_mjs__WEBPACK_IMPORTED_MODULE_16__.useScreenBounds)(rCanvas);\n  (0,_hooks_useDocumentEvents_mjs__WEBPACK_IMPORTED_MODULE_10__.useDocumentEvents)();\n  (0,_hooks_useCoarsePointer_mjs__WEBPACK_IMPORTED_MODULE_8__.useCoarsePointer)();\n  (0,_hooks_useGestureEvents_mjs__WEBPACK_IMPORTED_MODULE_14__.useGestureEvents)(rCanvas);\n  (0,_hooks_useFixSafariDoubleTapZoomPencilEvents_mjs__WEBPACK_IMPORTED_MODULE_13__.useFixSafariDoubleTapZoomPencilEvents)(rCanvas);\n  const rMemoizedStuff = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)({ lodDisableTextOutline: false, allowTextOutline: true });\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useQuickReactor)(\n    \"position layers\",\n    function positionLayersWhenCameraMoves() {\n      const { x, y, z } = editor.getCamera();\n      if (rMemoizedStuff.current.allowTextOutline && _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_6__.tlenv.isSafari) {\n        container.style.setProperty(\"--tl-text-outline\", \"none\");\n        rMemoizedStuff.current.allowTextOutline = false;\n      }\n      if (rMemoizedStuff.current.allowTextOutline && z < editor.options.textShadowLod !== rMemoizedStuff.current.lodDisableTextOutline) {\n        const lodDisableTextOutline = z < editor.options.textShadowLod;\n        container.style.setProperty(\n          \"--tl-text-outline\",\n          lodDisableTextOutline ? \"none\" : `var(--tl-text-outline-reference)`\n        );\n        rMemoizedStuff.current.lodDisableTextOutline = lodDisableTextOutline;\n      }\n      const offset = z >= 1 ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.modulate)(z, [1, 8], [0.125, 0.5], true) : (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.modulate)(z, [0.1, 1], [-2, 0.125], true);\n      const transform = `scale(${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.toDomPrecision)(z)}) translate(${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.toDomPrecision)(\n        x + offset\n      )}px,${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.toDomPrecision)(y + offset)}px)`;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_21__.setStyleProperty)(rHtmlLayer.current, \"transform\", transform);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_21__.setStyleProperty)(rHtmlLayer2.current, \"transform\", transform);\n    },\n    [editor, container]\n  );\n  const events = (0,_hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_7__.useCanvasEvents)();\n  const shapeSvgDefs = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"shapeSvgDefs\",\n    () => {\n      const shapeSvgDefsByKey = /* @__PURE__ */ new Map();\n      for (const util of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.objectMapValues)(editor.shapeUtils)) {\n        if (!util) return;\n        const defs = util.getCanvasSvgDefs();\n        for (const { key, component: Component } of defs) {\n          if (shapeSvgDefsByKey.has(key)) continue;\n          shapeSvgDefsByKey.set(key, /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component, {}, key));\n        }\n      }\n      return [...shapeSvgDefsByKey.values()];\n    },\n    [editor]\n  );\n  const hideShapes = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"debug_shapes\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags.hideShapes.get(), [_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags]);\n  const debugSvg = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"debug_svg\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags.debugSvg.get(), [_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags]);\n  const debugGeometry = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"debug_geometry\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags.debugGeometry.get(), [\n    _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_20__.debugFlags\n  ]);\n  const isEditingAnything = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"isEditingAnything\",\n    () => editor.getEditingShapeId() !== null,\n    [editor]\n  );\n  const isSelectingAnything = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"isSelectingAnything\",\n    () => !!editor.getSelectedShapeIds().length,\n    [editor]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n      \"div\",\n      {\n        ref: rCanvas,\n        draggable: false,\n        \"data-iseditinganything\": isEditingAnything,\n        \"data-isselectinganything\": isSelectingAnything,\n        className: classnames__WEBPACK_IMPORTED_MODULE_4__(\"tl-canvas\", className),\n        \"data-testid\": \"canvas\",\n        ...events,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-svg-context\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"defs\", { children: [\n            shapeSvgDefs,\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CursorDef, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CollaboratorHintDef, {}),\n            SvgDefs && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgDefs, {})\n          ] }) }),\n          Background && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-background__wrapper\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Background, {}) }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rHtmlLayer, className: \"tl-html-layer tl-shapes\", draggable: false, children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OnTheCanvasWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionBackgroundWrapper, {}),\n            hideShapes ? null : debugSvg ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapesWithSVGs, {}) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapesToDisplay, {})\n          ] }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-overlays\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rHtmlLayer2, className: \"tl-html-layer\", children: [\n            debugGeometry ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_GeometryDebuggingView_mjs__WEBPACK_IMPORTED_MODULE_22__.GeometryDebuggingView, {}) : null,\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HandlesWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BrushWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ScribbleWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ZoomBrushWrapper, {}),\n            ShapeIndicators && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicators, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HintedShapeIndicator, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SnapIndicatorWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionForegroundWrapper, {}),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LiveCollaborators_mjs__WEBPACK_IMPORTED_MODULE_23__.LiveCollaborators, {})\n          ] }) }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MovingCameraHitTestBlocker, {})\n        ]\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InFrontOfTheCanvasWrapper, {})\n  ] });\n}\nfunction InFrontOfTheCanvasWrapper() {\n  const { InFrontOfTheCanvas } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!InFrontOfTheCanvas) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InFrontOfTheCanvas, {});\n}\nfunction GridWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const gridSize = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"gridSize\", () => editor.getDocumentSettings().gridSize, [editor]);\n  const { x, y, z } = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"camera\", () => editor.getCamera(), [editor]);\n  const isGridMode = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"isGridMode\", () => editor.getInstanceState().isGridMode, [editor]);\n  const { Grid } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!(Grid && isGridMode)) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Grid, { x, y, z, size: gridSize });\n}\nfunction ScribbleWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const scribbles = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"scribbles\", () => editor.getInstanceState().scribbles, [editor]);\n  const zoomLevel = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const { Scribble } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!(Scribble && scribbles.length)) return null;\n  return scribbles.map((scribble) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Scribble, { className: \"tl-user-scribble\", scribble, zoom: zoomLevel }, scribble.id));\n}\nfunction BrushWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const brush = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"brush\", () => editor.getInstanceState().brush, [editor]);\n  const { Brush } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!(Brush && brush)) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Brush, { className: \"tl-user-brush\", brush });\n}\nfunction ZoomBrushWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const zoomBrush = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"zoomBrush\", () => editor.getInstanceState().zoomBrush, [editor]);\n  const { ZoomBrush } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!(ZoomBrush && zoomBrush)) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ZoomBrush, { className: \"tl-user-brush tl-zoom-brush\", brush: zoomBrush });\n}\nfunction SnapIndicatorWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const lines = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"snapLines\", () => editor.snaps.getIndicators(), [editor]);\n  const zoomLevel = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const { SnapIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!(SnapIndicator && lines.length > 0)) return null;\n  return lines.map((line) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SnapIndicator, { className: \"tl-user-snapline\", line, zoom: zoomLevel }, line.id));\n}\nfunction HandlesWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const shapeIdWithHandles = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"handles shapeIdWithHandles\",\n    () => {\n      const { isReadonly, isChangingStyle } = editor.getInstanceState();\n      if (isReadonly || isChangingStyle) return false;\n      const onlySelectedShape = editor.getOnlySelectedShape();\n      if (!onlySelectedShape) return false;\n      const handles = editor.getShapeHandles(onlySelectedShape);\n      if (!handles) return false;\n      return onlySelectedShape.id;\n    },\n    [editor]\n  );\n  if (!shapeIdWithHandles) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HandlesWrapperInner, { shapeId: shapeIdWithHandles });\n}\nfunction HandlesWrapperInner({ shapeId }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const { Handles } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  const zoomLevel = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const isCoarse = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"coarse pointer\", () => editor.getInstanceState().isCoarsePointer, [\n    editor\n  ]);\n  const transform = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"handles transform\", () => editor.getShapePageTransform(shapeId), [\n    editor,\n    shapeId\n  ]);\n  const handles = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"handles\",\n    () => {\n      const handles2 = editor.getShapeHandles(shapeId);\n      if (!handles2) return null;\n      const minDistBetweenVirtualHandlesAndRegularHandles = (isCoarse ? editor.options.coarseHandleRadius : editor.options.handleRadius) / zoomLevel * 2;\n      return handles2.filter(\n        (handle) => (\n          // if the handle isn't a virtual handle, we'll display it\n          (// but for virtual handles, we'll only display them if they're far enough away from vertex handles\n          handle.type !== \"virtual\" || !handles2.some(\n            (h) => (\n              // skip the handle we're checking against\n              (// and check that their distance isn't below the minimum distance\n              h !== handle && // only check against vertex handles\n              h.type === \"vertex\" && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_18__.Vec.Dist(handle, h) < minDistBetweenVirtualHandlesAndRegularHandles)\n            )\n          ))\n        )\n      ).sort((a) => a.type === \"vertex\" ? 1 : -1);\n    },\n    [editor, zoomLevel, isCoarse, shapeId]\n  );\n  const isHidden = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"isHidden\", () => editor.isShapeHidden(shapeId), [editor, shapeId]);\n  if (!Handles || !handles || !transform || isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Handles, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_17__.Mat.toCssString(transform), children: handles.map((handle) => {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      HandleWrapper,\n      {\n        shapeId,\n        handle,\n        zoom: zoomLevel,\n        isCoarse\n      },\n      handle.id\n    );\n  }) }) });\n}\nfunction HandleWrapper({\n  shapeId,\n  handle,\n  zoom,\n  isCoarse\n}) {\n  const events = (0,_hooks_useHandleEvents_mjs__WEBPACK_IMPORTED_MODULE_15__.useHandleEvents)(shapeId, handle.id);\n  const { Handle } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!Handle) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { \"aria-label\": \"handle\", transform: `translate(${handle.x}, ${handle.y})`, ...events, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Handle, { shapeId, handle, zoom, isCoarse }) });\n}\nfunction ShapesWithSVGs() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const renderingShapes = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  return renderingShapes.map((result) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Shape_mjs__WEBPACK_IMPORTED_MODULE_24__.Shape, { ...result }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DebugSvgCopy, { id: result.id, mode: \"iframe\" })\n  ] }, result.id + \"_fragment\"));\n}\nfunction ReflowIfNeeded() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const culledShapesRef = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(/* @__PURE__ */ new Set());\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useQuickReactor)(\n    \"reflow for culled shapes\",\n    () => {\n      const culledShapes = editor.getCulledShapes();\n      if (culledShapesRef.current.size === culledShapes.size && [...culledShapes].every((id) => culledShapesRef.current.has(id)))\n        return;\n      culledShapesRef.current = culledShapes;\n      const canvas = document.getElementsByClassName(\"tl-canvas\");\n      if (canvas.length === 0) return;\n      const _height = canvas[0].offsetHeight;\n    },\n    [editor]\n  );\n  return null;\n}\nfunction ShapesToDisplay() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const renderingShapes = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    renderingShapes.map((result) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Shape_mjs__WEBPACK_IMPORTED_MODULE_24__.Shape, { ...result }, result.id + \"_shape\")),\n    _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_6__.tlenv.isSafari && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReflowIfNeeded, {})\n  ] });\n}\nfunction HintedShapeIndicator() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const { ShapeIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  const ids = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"hinting shape ids\", () => (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.dedupe)(editor.getHintingShapeIds()), [editor]);\n  if (!ids.length) return null;\n  if (!ShapeIndicator) return null;\n  return ids.map((id) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicator, { className: \"tl-user-indicator__hint\", shapeId: id }, id + \"_hinting\"));\n}\nfunction CursorDef() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { id: \"cursor\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"rgba(0,0,0,.2)\", transform: \"translate(-11,-11)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"white\", transform: \"translate(-12,-12)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"currentColor\", transform: \"translate(-12,-12)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m13 10.814v11.188l2.969-2.866.428-.139h4.768z\" })\n    ] })\n  ] });\n}\nfunction CollaboratorHintDef() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { id: \"cursor_hint\", fill: \"currentColor\", d: \"M -2,-5 2,0 -2,5 Z\" });\n}\nfunction DebugSvgCopy({ id, mode }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(null);\n  const isInRoot = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"is in root\",\n    () => {\n      const shape = editor.getShape(id);\n      return shape?.parentId === editor.getCurrentPageId();\n    },\n    [editor, id]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    if (!isInRoot) return;\n    let latest = null;\n    const unsubscribe = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.react)(\"shape to svg\", async () => {\n      const renderId = Math.random();\n      latest = renderId;\n      const isSingleFrame = editor.isShapeOfType(id, \"frame\");\n      const padding = isSingleFrame ? 0 : 10;\n      let bounds = editor.getShapePageBounds(id);\n      if (!bounds) return;\n      bounds = bounds.clone().expandBy(padding);\n      const result = await editor.getSvgString([id], {\n        padding,\n        background: editor.getInstanceState().exportBackground\n      });\n      if (latest !== renderId || !result) return;\n      const svgDataUrl = `data:image/svg+xml;utf8,${encodeURIComponent(result.svg)}`;\n      setImage({ src: svgDataUrl, bounds });\n    });\n    return () => {\n      latest = null;\n      unsubscribe();\n    };\n  }, [editor, id, isInRoot]);\n  if (!isInRoot || !image) return null;\n  if (mode === \"iframe\") {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"iframe\",\n      {\n        src: image.src,\n        width: image.bounds.width,\n        height: image.bounds.height,\n        referrerPolicy: \"no-referrer\",\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          border: \"none\",\n          transform: `translate(${image.bounds.x}px, ${image.bounds.maxY + 12}px)`,\n          outline: \"1px solid black\",\n          maxWidth: \"none\"\n        }\n      }\n    );\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"img\",\n    {\n      src: image.src,\n      width: image.bounds.width,\n      height: image.bounds.height,\n      referrerPolicy: \"no-referrer\",\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        transform: `translate(${image.bounds.x}px, ${image.bounds.maxY + 12}px)`,\n        outline: \"1px solid black\",\n        maxWidth: \"none\"\n      }\n    }\n  );\n}\nfunction SelectionForegroundWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const selectionRotation = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"selection rotation\", () => editor.getSelectionRotation(), [\n    editor\n  ]);\n  const selectionBounds = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"selection bounds\",\n    () => editor.getSelectionRotatedPageBounds(),\n    [editor]\n  );\n  const { SelectionForeground } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!selectionBounds || !SelectionForeground) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionForeground, { bounds: selectionBounds, rotation: selectionRotation });\n}\nfunction SelectionBackgroundWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const selectionRotation = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"selection rotation\", () => editor.getSelectionRotation(), [\n    editor\n  ]);\n  const selectionBounds = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\n    \"selection bounds\",\n    () => editor.getSelectionRotatedPageBounds(),\n    [editor]\n  );\n  const { SelectionBackground } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!selectionBounds || !SelectionBackground) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionBackground, { bounds: selectionBounds, rotation: selectionRotation });\n}\nfunction OnTheCanvasWrapper() {\n  const { OnTheCanvas } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditorComponents)();\n  if (!OnTheCanvas) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OnTheCanvas, {});\n}\nfunction MovingCameraHitTestBlocker() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_11__.useEditor)();\n  const cameraState = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_2__.useValue)(\"camera state\", () => editor.getCameraState(), [editor]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"div\",\n    {\n      className: classnames__WEBPACK_IMPORTED_MODULE_4__(\"tl-hit-test-blocker\", {\n        \"tl-hit-test-blocker__hidden\": cameraState === \"idle\"\n      })\n    }\n  );\n}\n\n//# sourceMappingURL=DefaultCanvas.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDYW52YXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2xCO0FBQzBCO0FBQ0U7QUFDOUI7QUFDdUM7QUFDckI7QUFDWTtBQUNFO0FBQ1I7QUFDVTtBQUNoQjtBQUNvQjtBQUNvQztBQUMxQztBQUNGO0FBQ0E7QUFDbkI7QUFDQTtBQUNhO0FBQ0g7QUFDRjtBQUNjO0FBQ1I7QUFDeEI7QUFDckMseUJBQXlCLFdBQVc7QUFDcEMsaUJBQWlCLGdFQUFTO0FBQzFCLFVBQVUsdUNBQXVDLEVBQUUsb0ZBQW1CO0FBQ3RFLGtCQUFrQiw2Q0FBTTtBQUN4QixxQkFBcUIsNkNBQU07QUFDM0Isc0JBQXNCLDZDQUFNO0FBQzVCLG9CQUFvQixxRUFBWTtBQUNoQyxFQUFFLDRFQUFlO0FBQ2pCLEVBQUUsZ0ZBQWlCO0FBQ25CLEVBQUUsNkVBQWdCO0FBQ2xCLEVBQUUsOEVBQWdCO0FBQ2xCLEVBQUUsd0hBQXFDO0FBQ3ZDLHlCQUF5Qiw2Q0FBTSxHQUFHLHNEQUFzRDtBQUN4RixFQUFFLG9FQUFlO0FBQ2pCO0FBQ0E7QUFDQSxjQUFjLFVBQVU7QUFDeEIscURBQXFELDJEQUFLO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQVEsa0NBQWtDLHVEQUFRO0FBQ2hGLGlDQUFpQyxzRUFBYyxJQUFJLGNBQWMsc0VBQWM7QUFDL0U7QUFDQSxRQUFRLEtBQUssc0VBQWMsYUFBYTtBQUN4QyxNQUFNLGlFQUFnQjtBQUN0QixNQUFNLGlFQUFnQjtBQUN0QixLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQiwyRUFBZTtBQUNoQyx1QkFBdUIsNkRBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFlO0FBQ3hDO0FBQ0E7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pEO0FBQ0EscURBQXFELHNEQUFHLGNBQWM7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQVEsdUJBQXVCLCtEQUFVLG9CQUFvQiwrREFBVTtBQUM1RixtQkFBbUIsNkRBQVEsb0JBQW9CLCtEQUFVLGtCQUFrQiwrREFBVTtBQUNyRix3QkFBd0IsNkRBQVEseUJBQXlCLCtEQUFVO0FBQ25FLElBQUksK0RBQVU7QUFDZDtBQUNBLDRCQUE0Qiw2REFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2REFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDMUMsb0JBQW9CLHVEQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1Q0FBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUcsVUFBVSx1REFBdUQsdURBQUksV0FBVztBQUM3RztBQUNBLDRCQUE0QixzREFBRyxjQUFjO0FBQzdDLDRCQUE0QixzREFBRyx3QkFBd0I7QUFDdkQsdUNBQXVDLHNEQUFHLFlBQVk7QUFDdEQsYUFBYSxHQUFHO0FBQ2hCLHdDQUF3QyxzREFBRyxVQUFVLCtEQUErRCxzREFBRyxlQUFlLEdBQUc7QUFDekksMEJBQTBCLHNEQUFHLGdCQUFnQjtBQUM3QywwQkFBMEIsdURBQUksVUFBVTtBQUN4Qyw0QkFBNEIsc0RBQUcsdUJBQXVCO0FBQ3RELDRCQUE0QixzREFBRywrQkFBK0I7QUFDOUQsMkRBQTJELHNEQUFHLG1CQUFtQixvQkFBb0Isc0RBQUcsb0JBQW9CO0FBQzVILGFBQWE7QUFDYiwwQkFBMEIsc0RBQUcsVUFBVSxvREFBb0QsdURBQUksVUFBVTtBQUN6Ryw0Q0FBNEMsc0RBQUcsQ0FBQyw4RUFBcUIsSUFBSTtBQUN6RSw0QkFBNEIsc0RBQUcsbUJBQW1CO0FBQ2xELDRCQUE0QixzREFBRyxpQkFBaUI7QUFDaEQsNEJBQTRCLHNEQUFHLG9CQUFvQjtBQUNuRCw0QkFBNEIsc0RBQUcscUJBQXFCO0FBQ3BELCtDQUErQyxzREFBRyxvQkFBb0I7QUFDdEUsNEJBQTRCLHNEQUFHLHlCQUF5QjtBQUN4RCw0QkFBNEIsc0RBQUcseUJBQXlCO0FBQ3hELDRCQUE0QixzREFBRywrQkFBK0I7QUFDOUQsNEJBQTRCLHNEQUFHLENBQUMsc0VBQWlCLElBQUk7QUFDckQsYUFBYSxHQUFHO0FBQ2hCLDBCQUEwQixzREFBRywrQkFBK0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHLDhCQUE4QjtBQUNyRCxLQUFLO0FBQ0w7QUFDQTtBQUNBLFVBQVUscUJBQXFCLEVBQUUsb0ZBQW1CO0FBQ3BEO0FBQ0EseUJBQXlCLHNEQUFHLHVCQUF1QjtBQUNuRDtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLG1CQUFtQiw2REFBUTtBQUMzQixVQUFVLFVBQVUsRUFBRSw2REFBUTtBQUM5QixxQkFBcUIsNkRBQVE7QUFDN0IsVUFBVSxPQUFPLEVBQUUsb0ZBQW1CO0FBQ3RDO0FBQ0EseUJBQXlCLHNEQUFHLFNBQVMseUJBQXlCO0FBQzlEO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQVM7QUFDMUIsb0JBQW9CLDZEQUFRO0FBQzVCLG9CQUFvQiw2REFBUTtBQUM1QixVQUFVLFdBQVcsRUFBRSxvRkFBbUI7QUFDMUM7QUFDQSxxREFBcUQsc0RBQUcsYUFBYSwwREFBMEQ7QUFDL0g7QUFDQTtBQUNBLGlCQUFpQixnRUFBUztBQUMxQixnQkFBZ0IsNkRBQVE7QUFDeEIsVUFBVSxRQUFRLEVBQUUsb0ZBQW1CO0FBQ3ZDO0FBQ0EseUJBQXlCLHNEQUFHLFVBQVUsbUNBQW1DO0FBQ3pFO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQVM7QUFDMUIsb0JBQW9CLDZEQUFRO0FBQzVCLFVBQVUsWUFBWSxFQUFFLG9GQUFtQjtBQUMzQztBQUNBLHlCQUF5QixzREFBRyxjQUFjLDREQUE0RDtBQUN0RztBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLGdCQUFnQiw2REFBUTtBQUN4QixvQkFBb0IsNkRBQVE7QUFDNUIsVUFBVSxnQkFBZ0IsRUFBRSxvRkFBbUI7QUFDL0M7QUFDQSw2Q0FBNkMsc0RBQUcsa0JBQWtCLHNEQUFzRDtBQUN4SDtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLDZCQUE2Qiw2REFBUTtBQUNyQztBQUNBO0FBQ0EsY0FBYyw4QkFBOEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRyx3QkFBd0IsNkJBQTZCO0FBQ2pGO0FBQ0EsK0JBQStCLFNBQVM7QUFDeEMsaUJBQWlCLGdFQUFTO0FBQzFCLFVBQVUsVUFBVSxFQUFFLG9GQUFtQjtBQUN6QyxvQkFBb0IsNkRBQVE7QUFDNUIsbUJBQW1CLDZEQUFRO0FBQzNCO0FBQ0E7QUFDQSxvQkFBb0IsNkRBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMscURBQUc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQiw2REFBUTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUcsWUFBWSwwQkFBMEIsc0RBQUcsUUFBUSxXQUFXLHFEQUFHO0FBQzNGLDJCQUEyQixzREFBRztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUcsR0FBRyxHQUFHO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiw0RUFBZTtBQUNoQyxVQUFVLFNBQVMsRUFBRSxvRkFBbUI7QUFDeEM7QUFDQSx5QkFBeUIsc0RBQUcsUUFBUSxnREFBZ0QsU0FBUyxJQUFJLFNBQVMseUNBQXlDLHNEQUFHLFdBQVcsaUNBQWlDLEdBQUc7QUFDck07QUFDQTtBQUNBLGlCQUFpQixnRUFBUztBQUMxQiwwQkFBMEIsNkRBQVE7QUFDbEMseURBQXlELHVEQUFJLENBQUMsMkNBQVMsSUFBSTtBQUMzRSxvQkFBb0Isc0RBQUcsQ0FBQyw4Q0FBSyxJQUFJLFdBQVc7QUFDNUMsb0JBQW9CLHNEQUFHLGlCQUFpQiwrQkFBK0I7QUFDdkUsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQVM7QUFDMUIsMEJBQTBCLDZDQUFNO0FBQ2hDLEVBQUUsb0VBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQVM7QUFDMUIsMEJBQTBCLDZEQUFRO0FBQ2xDLHlCQUF5Qix1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDMUMsb0RBQW9ELHNEQUFHLENBQUMsOENBQUssSUFBSSxXQUFXO0FBQzVFLElBQUksMkRBQUssNkJBQTZCLHNEQUFHLG1CQUFtQjtBQUM1RCxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQixnRUFBUztBQUMxQixVQUFVLGlCQUFpQixFQUFFLG9GQUFtQjtBQUNoRCxjQUFjLDZEQUFRLDRCQUE0QixxREFBTTtBQUN4RDtBQUNBO0FBQ0EseUNBQXlDLHNEQUFHLG1CQUFtQixtREFBbUQ7QUFDbEg7QUFDQTtBQUNBLHlCQUF5Qix1REFBSSxRQUFRO0FBQ3JDLG9CQUFvQix1REFBSSxRQUFRO0FBQ2hDLHNCQUFzQixzREFBRyxXQUFXLDBEQUEwRDtBQUM5RixzQkFBc0Isc0RBQUcsV0FBVyw2REFBNkQ7QUFDakcsT0FBTztBQUNQLG9CQUFvQix1REFBSSxRQUFRO0FBQ2hDLHNCQUFzQixzREFBRyxXQUFXLDBEQUEwRDtBQUM5RixzQkFBc0Isc0RBQUcsV0FBVyw2REFBNkQ7QUFDakcsT0FBTztBQUNQLG9CQUFvQix1REFBSSxRQUFRO0FBQ2hDLHNCQUFzQixzREFBRyxXQUFXLHNEQUFzRDtBQUMxRixzQkFBc0Isc0RBQUcsV0FBVyxvREFBb0Q7QUFDeEYsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLFdBQVcsa0VBQWtFO0FBQ3pHO0FBQ0Esd0JBQXdCLFVBQVU7QUFDbEMsaUJBQWlCLGdFQUFTO0FBQzFCLDRCQUE0QiwrQ0FBUTtBQUNwQyxtQkFBbUIsNkRBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsNkNBQTZDLE9BQU8sK0JBQStCO0FBQ25GLGlCQUFpQix5QkFBeUI7QUFDMUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxlQUFlLE1BQU0sdUJBQXVCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlLE1BQU0sdUJBQXVCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLDRCQUE0Qiw2REFBUTtBQUNwQztBQUNBO0FBQ0EsMEJBQTBCLDZEQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzQkFBc0IsRUFBRSxvRkFBbUI7QUFDckQ7QUFDQSx5QkFBeUIsc0RBQUcsd0JBQXdCLHNEQUFzRDtBQUMxRztBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLDRCQUE0Qiw2REFBUTtBQUNwQztBQUNBO0FBQ0EsMEJBQTBCLDZEQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzQkFBc0IsRUFBRSxvRkFBbUI7QUFDckQ7QUFDQSx5QkFBeUIsc0RBQUcsd0JBQXdCLHNEQUFzRDtBQUMxRztBQUNBO0FBQ0EsVUFBVSxjQUFjLEVBQUUsb0ZBQW1CO0FBQzdDO0FBQ0EseUJBQXlCLHNEQUFHLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLHNCQUFzQiw2REFBUTtBQUM5Qix5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBLGlCQUFpQix1Q0FBVTtBQUMzQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDYW52YXMubWpzPzQ3OGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgcmVhY3QgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgdXNlUXVpY2tSZWFjdG9yLCB1c2VWYWx1ZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5pbXBvcnQgeyBkZWR1cGUsIG1vZHVsYXRlLCBvYmplY3RNYXBWYWx1ZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50MiwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0bGVudiB9IGZyb20gXCIuLi8uLi9nbG9iYWxzL2Vudmlyb25tZW50Lm1qc1wiO1xuaW1wb3J0IHsgdXNlQ2FudmFzRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUNhbnZhc0V2ZW50cy5tanNcIjtcbmltcG9ydCB7IHVzZUNvYXJzZVBvaW50ZXIgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlQ29hcnNlUG9pbnRlci5tanNcIjtcbmltcG9ydCB7IHVzZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyB1c2VEb2N1bWVudEV2ZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VEb2N1bWVudEV2ZW50cy5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3JDb21wb25lbnRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VGaXhTYWZhcmlEb3VibGVUYXBab29tUGVuY2lsRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VHZXN0dXJlRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUdlc3R1cmVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VIYW5kbGVFdmVudHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlSGFuZGxlRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlU2NyZWVuQm91bmRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVNjcmVlbkJvdW5kcy5tanNcIjtcbmltcG9ydCB7IE1hdCB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL01hdC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IHRvRG9tUHJlY2lzaW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBkZWJ1Z0ZsYWdzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RlYnVnLWZsYWdzLm1qc1wiO1xuaW1wb3J0IHsgc2V0U3R5bGVQcm9wZXJ0eSB9IGZyb20gXCIuLi8uLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeURlYnVnZ2luZ1ZpZXcgfSBmcm9tIFwiLi4vR2VvbWV0cnlEZWJ1Z2dpbmdWaWV3Lm1qc1wiO1xuaW1wb3J0IHsgTGl2ZUNvbGxhYm9yYXRvcnMgfSBmcm9tIFwiLi4vTGl2ZUNvbGxhYm9yYXRvcnMubWpzXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9TaGFwZS5tanNcIjtcbmZ1bmN0aW9uIERlZmF1bHRDYW52YXMoeyBjbGFzc05hbWUgfSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgeyBCYWNrZ3JvdW5kLCBTdmdEZWZzLCBTaGFwZUluZGljYXRvcnMgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgY29uc3QgckNhbnZhcyA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgckh0bWxMYXllciA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgckh0bWxMYXllcjIgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICB1c2VTY3JlZW5Cb3VuZHMockNhbnZhcyk7XG4gIHVzZURvY3VtZW50RXZlbnRzKCk7XG4gIHVzZUNvYXJzZVBvaW50ZXIoKTtcbiAgdXNlR2VzdHVyZUV2ZW50cyhyQ2FudmFzKTtcbiAgdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50cyhyQ2FudmFzKTtcbiAgY29uc3Qgck1lbW9pemVkU3R1ZmYgPSB1c2VSZWYoeyBsb2REaXNhYmxlVGV4dE91dGxpbmU6IGZhbHNlLCBhbGxvd1RleHRPdXRsaW5lOiB0cnVlIH0pO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJwb3NpdGlvbiBsYXllcnNcIixcbiAgICBmdW5jdGlvbiBwb3NpdGlvbkxheWVyc1doZW5DYW1lcmFNb3ZlcygpIHtcbiAgICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gZWRpdG9yLmdldENhbWVyYSgpO1xuICAgICAgaWYgKHJNZW1vaXplZFN0dWZmLmN1cnJlbnQuYWxsb3dUZXh0T3V0bGluZSAmJiB0bGVudi5pc1NhZmFyaSkge1xuICAgICAgICBjb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLXRsLXRleHQtb3V0bGluZVwiLCBcIm5vbmVcIik7XG4gICAgICAgIHJNZW1vaXplZFN0dWZmLmN1cnJlbnQuYWxsb3dUZXh0T3V0bGluZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHJNZW1vaXplZFN0dWZmLmN1cnJlbnQuYWxsb3dUZXh0T3V0bGluZSAmJiB6IDwgZWRpdG9yLm9wdGlvbnMudGV4dFNoYWRvd0xvZCAhPT0gck1lbW9pemVkU3R1ZmYuY3VycmVudC5sb2REaXNhYmxlVGV4dE91dGxpbmUpIHtcbiAgICAgICAgY29uc3QgbG9kRGlzYWJsZVRleHRPdXRsaW5lID0geiA8IGVkaXRvci5vcHRpb25zLnRleHRTaGFkb3dMb2Q7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICBcIi0tdGwtdGV4dC1vdXRsaW5lXCIsXG4gICAgICAgICAgbG9kRGlzYWJsZVRleHRPdXRsaW5lID8gXCJub25lXCIgOiBgdmFyKC0tdGwtdGV4dC1vdXRsaW5lLXJlZmVyZW5jZSlgXG4gICAgICAgICk7XG4gICAgICAgIHJNZW1vaXplZFN0dWZmLmN1cnJlbnQubG9kRGlzYWJsZVRleHRPdXRsaW5lID0gbG9kRGlzYWJsZVRleHRPdXRsaW5lO1xuICAgICAgfVxuICAgICAgY29uc3Qgb2Zmc2V0ID0geiA+PSAxID8gbW9kdWxhdGUoeiwgWzEsIDhdLCBbMC4xMjUsIDAuNV0sIHRydWUpIDogbW9kdWxhdGUoeiwgWzAuMSwgMV0sIFstMiwgMC4xMjVdLCB0cnVlKTtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGBzY2FsZSgke3RvRG9tUHJlY2lzaW9uKHopfSkgdHJhbnNsYXRlKCR7dG9Eb21QcmVjaXNpb24oXG4gICAgICAgIHggKyBvZmZzZXRcbiAgICAgICl9cHgsJHt0b0RvbVByZWNpc2lvbih5ICsgb2Zmc2V0KX1weClgO1xuICAgICAgc2V0U3R5bGVQcm9wZXJ0eShySHRtbExheWVyLmN1cnJlbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSk7XG4gICAgICBzZXRTdHlsZVByb3BlcnR5KHJIdG1sTGF5ZXIyLmN1cnJlbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSk7XG4gICAgfSxcbiAgICBbZWRpdG9yLCBjb250YWluZXJdXG4gICk7XG4gIGNvbnN0IGV2ZW50cyA9IHVzZUNhbnZhc0V2ZW50cygpO1xuICBjb25zdCBzaGFwZVN2Z0RlZnMgPSB1c2VWYWx1ZShcbiAgICBcInNoYXBlU3ZnRGVmc1wiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlU3ZnRGVmc0J5S2V5ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIGZvciAoY29uc3QgdXRpbCBvZiBvYmplY3RNYXBWYWx1ZXMoZWRpdG9yLnNoYXBlVXRpbHMpKSB7XG4gICAgICAgIGlmICghdXRpbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBkZWZzID0gdXRpbC5nZXRDYW52YXNTdmdEZWZzKCk7XG4gICAgICAgIGZvciAoY29uc3QgeyBrZXksIGNvbXBvbmVudDogQ29tcG9uZW50IH0gb2YgZGVmcykge1xuICAgICAgICAgIGlmIChzaGFwZVN2Z0RlZnNCeUtleS5oYXMoa2V5KSkgY29udGludWU7XG4gICAgICAgICAgc2hhcGVTdmdEZWZzQnlLZXkuc2V0KGtleSwgLyogQF9fUFVSRV9fICovIGpzeChDb21wb25lbnQsIHt9LCBrZXkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5zaGFwZVN2Z0RlZnNCeUtleS52YWx1ZXMoKV07XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICBjb25zdCBoaWRlU2hhcGVzID0gdXNlVmFsdWUoXCJkZWJ1Z19zaGFwZXNcIiwgKCkgPT4gZGVidWdGbGFncy5oaWRlU2hhcGVzLmdldCgpLCBbZGVidWdGbGFnc10pO1xuICBjb25zdCBkZWJ1Z1N2ZyA9IHVzZVZhbHVlKFwiZGVidWdfc3ZnXCIsICgpID0+IGRlYnVnRmxhZ3MuZGVidWdTdmcuZ2V0KCksIFtkZWJ1Z0ZsYWdzXSk7XG4gIGNvbnN0IGRlYnVnR2VvbWV0cnkgPSB1c2VWYWx1ZShcImRlYnVnX2dlb21ldHJ5XCIsICgpID0+IGRlYnVnRmxhZ3MuZGVidWdHZW9tZXRyeS5nZXQoKSwgW1xuICAgIGRlYnVnRmxhZ3NcbiAgXSk7XG4gIGNvbnN0IGlzRWRpdGluZ0FueXRoaW5nID0gdXNlVmFsdWUoXG4gICAgXCJpc0VkaXRpbmdBbnl0aGluZ1wiLFxuICAgICgpID0+IGVkaXRvci5nZXRFZGl0aW5nU2hhcGVJZCgpICE9PSBudWxsLFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGNvbnN0IGlzU2VsZWN0aW5nQW55dGhpbmcgPSB1c2VWYWx1ZShcbiAgICBcImlzU2VsZWN0aW5nQW55dGhpbmdcIixcbiAgICAoKSA9PiAhIWVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCkubGVuZ3RoLFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgICAgXCJkaXZcIixcbiAgICAgIHtcbiAgICAgICAgcmVmOiByQ2FudmFzLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBcImRhdGEtaXNlZGl0aW5nYW55dGhpbmdcIjogaXNFZGl0aW5nQW55dGhpbmcsXG4gICAgICAgIFwiZGF0YS1pc3NlbGVjdGluZ2FueXRoaW5nXCI6IGlzU2VsZWN0aW5nQW55dGhpbmcsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLWNhbnZhc1wiLCBjbGFzc05hbWUpLFxuICAgICAgICBcImRhdGEtdGVzdGlkXCI6IFwiY2FudmFzXCIsXG4gICAgICAgIC4uLmV2ZW50cyxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBcInRsLXN2Zy1jb250ZXh0XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhcImRlZnNcIiwgeyBjaGlsZHJlbjogW1xuICAgICAgICAgICAgc2hhcGVTdmdEZWZzLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChDdXJzb3JEZWYsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goQ29sbGFib3JhdG9ySGludERlZiwge30pLFxuICAgICAgICAgICAgU3ZnRGVmcyAmJiAvKiBAX19QVVJFX18gKi8ganN4KFN2Z0RlZnMsIHt9KVxuICAgICAgICAgIF0gfSkgfSksXG4gICAgICAgICAgQmFja2dyb3VuZCAmJiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWJhY2tncm91bmRfX3dyYXBwZXJcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goQmFja2dyb3VuZCwge30pIH0pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goR3JpZFdyYXBwZXIsIHt9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IHJlZjogckh0bWxMYXllciwgY2xhc3NOYW1lOiBcInRsLWh0bWwtbGF5ZXIgdGwtc2hhcGVzXCIsIGRyYWdnYWJsZTogZmFsc2UsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KE9uVGhlQ2FudmFzV3JhcHBlciwge30pLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChTZWxlY3Rpb25CYWNrZ3JvdW5kV3JhcHBlciwge30pLFxuICAgICAgICAgICAgaGlkZVNoYXBlcyA/IG51bGwgOiBkZWJ1Z1N2ZyA/IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVzV2l0aFNWR3MsIHt9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVzVG9EaXNwbGF5LCB7fSlcbiAgICAgICAgICBdIH0pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtb3ZlcmxheXNcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgcmVmOiBySHRtbExheWVyMiwgY2xhc3NOYW1lOiBcInRsLWh0bWwtbGF5ZXJcIiwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIGRlYnVnR2VvbWV0cnkgPyAvKiBAX19QVVJFX18gKi8ganN4KEdlb21ldHJ5RGVidWdnaW5nVmlldywge30pIDogbnVsbCxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goSGFuZGxlc1dyYXBwZXIsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goQnJ1c2hXcmFwcGVyLCB7fSksXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFNjcmliYmxlV3JhcHBlciwge30pLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChab29tQnJ1c2hXcmFwcGVyLCB7fSksXG4gICAgICAgICAgICBTaGFwZUluZGljYXRvcnMgJiYgLyogQF9fUFVSRV9fICovIGpzeChTaGFwZUluZGljYXRvcnMsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goSGludGVkU2hhcGVJbmRpY2F0b3IsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goU25hcEluZGljYXRvcldyYXBwZXIsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goU2VsZWN0aW9uRm9yZWdyb3VuZFdyYXBwZXIsIHt9KSxcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goTGl2ZUNvbGxhYm9yYXRvcnMsIHt9KVxuICAgICAgICAgIF0gfSkgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChNb3ZpbmdDYW1lcmFIaXRUZXN0QmxvY2tlciwge30pXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICApLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goSW5Gcm9udE9mVGhlQ2FudmFzV3JhcHBlciwge30pXG4gIF0gfSk7XG59XG5mdW5jdGlvbiBJbkZyb250T2ZUaGVDYW52YXNXcmFwcGVyKCkge1xuICBjb25zdCB7IEluRnJvbnRPZlRoZUNhbnZhcyB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIUluRnJvbnRPZlRoZUNhbnZhcykgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEluRnJvbnRPZlRoZUNhbnZhcywge30pO1xufVxuZnVuY3Rpb24gR3JpZFdyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBncmlkU2l6ZSA9IHVzZVZhbHVlKFwiZ3JpZFNpemVcIiwgKCkgPT4gZWRpdG9yLmdldERvY3VtZW50U2V0dGluZ3MoKS5ncmlkU2l6ZSwgW2VkaXRvcl0pO1xuICBjb25zdCB7IHgsIHksIHogfSA9IHVzZVZhbHVlKFwiY2FtZXJhXCIsICgpID0+IGVkaXRvci5nZXRDYW1lcmEoKSwgW2VkaXRvcl0pO1xuICBjb25zdCBpc0dyaWRNb2RlID0gdXNlVmFsdWUoXCJpc0dyaWRNb2RlXCIsICgpID0+IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNHcmlkTW9kZSwgW2VkaXRvcl0pO1xuICBjb25zdCB7IEdyaWQgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCEoR3JpZCAmJiBpc0dyaWRNb2RlKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEdyaWQsIHsgeCwgeSwgeiwgc2l6ZTogZ3JpZFNpemUgfSk7XG59XG5mdW5jdGlvbiBTY3JpYmJsZVdyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBzY3JpYmJsZXMgPSB1c2VWYWx1ZShcInNjcmliYmxlc1wiLCAoKSA9PiBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLnNjcmliYmxlcywgW2VkaXRvcl0pO1xuICBjb25zdCB6b29tTGV2ZWwgPSB1c2VWYWx1ZShcInpvb21MZXZlbFwiLCAoKSA9PiBlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgeyBTY3JpYmJsZSB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIShTY3JpYmJsZSAmJiBzY3JpYmJsZXMubGVuZ3RoKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBzY3JpYmJsZXMubWFwKChzY3JpYmJsZSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChTY3JpYmJsZSwgeyBjbGFzc05hbWU6IFwidGwtdXNlci1zY3JpYmJsZVwiLCBzY3JpYmJsZSwgem9vbTogem9vbUxldmVsIH0sIHNjcmliYmxlLmlkKSk7XG59XG5mdW5jdGlvbiBCcnVzaFdyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBicnVzaCA9IHVzZVZhbHVlKFwiYnJ1c2hcIiwgKCkgPT4gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5icnVzaCwgW2VkaXRvcl0pO1xuICBjb25zdCB7IEJydXNoIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghKEJydXNoICYmIGJydXNoKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEJydXNoLCB7IGNsYXNzTmFtZTogXCJ0bC11c2VyLWJydXNoXCIsIGJydXNoIH0pO1xufVxuZnVuY3Rpb24gWm9vbUJydXNoV3JhcHBlcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHpvb21CcnVzaCA9IHVzZVZhbHVlKFwiem9vbUJydXNoXCIsICgpID0+IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuem9vbUJydXNoLCBbZWRpdG9yXSk7XG4gIGNvbnN0IHsgWm9vbUJydXNoIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghKFpvb21CcnVzaCAmJiB6b29tQnJ1c2gpKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goWm9vbUJydXNoLCB7IGNsYXNzTmFtZTogXCJ0bC11c2VyLWJydXNoIHRsLXpvb20tYnJ1c2hcIiwgYnJ1c2g6IHpvb21CcnVzaCB9KTtcbn1cbmZ1bmN0aW9uIFNuYXBJbmRpY2F0b3JXcmFwcGVyKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgbGluZXMgPSB1c2VWYWx1ZShcInNuYXBMaW5lc1wiLCAoKSA9PiBlZGl0b3Iuc25hcHMuZ2V0SW5kaWNhdG9ycygpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IHpvb21MZXZlbCA9IHVzZVZhbHVlKFwiem9vbUxldmVsXCIsICgpID0+IGVkaXRvci5nZXRab29tTGV2ZWwoKSwgW2VkaXRvcl0pO1xuICBjb25zdCB7IFNuYXBJbmRpY2F0b3IgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCEoU25hcEluZGljYXRvciAmJiBsaW5lcy5sZW5ndGggPiAwKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goU25hcEluZGljYXRvciwgeyBjbGFzc05hbWU6IFwidGwtdXNlci1zbmFwbGluZVwiLCBsaW5lLCB6b29tOiB6b29tTGV2ZWwgfSwgbGluZS5pZCkpO1xufVxuZnVuY3Rpb24gSGFuZGxlc1dyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBzaGFwZUlkV2l0aEhhbmRsZXMgPSB1c2VWYWx1ZShcbiAgICBcImhhbmRsZXMgc2hhcGVJZFdpdGhIYW5kbGVzXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgeyBpc1JlYWRvbmx5LCBpc0NoYW5naW5nU3R5bGUgfSA9IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgICBpZiAoaXNSZWFkb25seSB8fCBpc0NoYW5naW5nU3R5bGUpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IG9ubHlTZWxlY3RlZFNoYXBlID0gZWRpdG9yLmdldE9ubHlTZWxlY3RlZFNoYXBlKCk7XG4gICAgICBpZiAoIW9ubHlTZWxlY3RlZFNoYXBlKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBoYW5kbGVzID0gZWRpdG9yLmdldFNoYXBlSGFuZGxlcyhvbmx5U2VsZWN0ZWRTaGFwZSk7XG4gICAgICBpZiAoIWhhbmRsZXMpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBvbmx5U2VsZWN0ZWRTaGFwZS5pZDtcbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGlmICghc2hhcGVJZFdpdGhIYW5kbGVzKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goSGFuZGxlc1dyYXBwZXJJbm5lciwgeyBzaGFwZUlkOiBzaGFwZUlkV2l0aEhhbmRsZXMgfSk7XG59XG5mdW5jdGlvbiBIYW5kbGVzV3JhcHBlcklubmVyKHsgc2hhcGVJZCB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB7IEhhbmRsZXMgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgY29uc3Qgem9vbUxldmVsID0gdXNlVmFsdWUoXCJ6b29tTGV2ZWxcIiwgKCkgPT4gZWRpdG9yLmdldFpvb21MZXZlbCgpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IGlzQ29hcnNlID0gdXNlVmFsdWUoXCJjb2Fyc2UgcG9pbnRlclwiLCAoKSA9PiBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzQ29hcnNlUG9pbnRlciwgW1xuICAgIGVkaXRvclxuICBdKTtcbiAgY29uc3QgdHJhbnNmb3JtID0gdXNlVmFsdWUoXCJoYW5kbGVzIHRyYW5zZm9ybVwiLCAoKSA9PiBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWQpLCBbXG4gICAgZWRpdG9yLFxuICAgIHNoYXBlSWRcbiAgXSk7XG4gIGNvbnN0IGhhbmRsZXMgPSB1c2VWYWx1ZShcbiAgICBcImhhbmRsZXNcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVzMiA9IGVkaXRvci5nZXRTaGFwZUhhbmRsZXMoc2hhcGVJZCk7XG4gICAgICBpZiAoIWhhbmRsZXMyKSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IG1pbkRpc3RCZXR3ZWVuVmlydHVhbEhhbmRsZXNBbmRSZWd1bGFySGFuZGxlcyA9IChpc0NvYXJzZSA/IGVkaXRvci5vcHRpb25zLmNvYXJzZUhhbmRsZVJhZGl1cyA6IGVkaXRvci5vcHRpb25zLmhhbmRsZVJhZGl1cykgLyB6b29tTGV2ZWwgKiAyO1xuICAgICAgcmV0dXJuIGhhbmRsZXMyLmZpbHRlcihcbiAgICAgICAgKGhhbmRsZSkgPT4gKFxuICAgICAgICAgIC8vIGlmIHRoZSBoYW5kbGUgaXNuJ3QgYSB2aXJ0dWFsIGhhbmRsZSwgd2UnbGwgZGlzcGxheSBpdFxuICAgICAgICAgICgvLyBidXQgZm9yIHZpcnR1YWwgaGFuZGxlcywgd2UnbGwgb25seSBkaXNwbGF5IHRoZW0gaWYgdGhleSdyZSBmYXIgZW5vdWdoIGF3YXkgZnJvbSB2ZXJ0ZXggaGFuZGxlc1xuICAgICAgICAgIGhhbmRsZS50eXBlICE9PSBcInZpcnR1YWxcIiB8fCAhaGFuZGxlczIuc29tZShcbiAgICAgICAgICAgIChoKSA9PiAoXG4gICAgICAgICAgICAgIC8vIHNraXAgdGhlIGhhbmRsZSB3ZSdyZSBjaGVja2luZyBhZ2FpbnN0XG4gICAgICAgICAgICAgICgvLyBhbmQgY2hlY2sgdGhhdCB0aGVpciBkaXN0YW5jZSBpc24ndCBiZWxvdyB0aGUgbWluaW11bSBkaXN0YW5jZVxuICAgICAgICAgICAgICBoICE9PSBoYW5kbGUgJiYgLy8gb25seSBjaGVjayBhZ2FpbnN0IHZlcnRleCBoYW5kbGVzXG4gICAgICAgICAgICAgIGgudHlwZSA9PT0gXCJ2ZXJ0ZXhcIiAmJiBWZWMuRGlzdChoYW5kbGUsIGgpIDwgbWluRGlzdEJldHdlZW5WaXJ0dWFsSGFuZGxlc0FuZFJlZ3VsYXJIYW5kbGVzKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkpXG4gICAgICAgIClcbiAgICAgICkuc29ydCgoYSkgPT4gYS50eXBlID09PSBcInZlcnRleFwiID8gMSA6IC0xKTtcbiAgICB9LFxuICAgIFtlZGl0b3IsIHpvb21MZXZlbCwgaXNDb2Fyc2UsIHNoYXBlSWRdXG4gICk7XG4gIGNvbnN0IGlzSGlkZGVuID0gdXNlVmFsdWUoXCJpc0hpZGRlblwiLCAoKSA9PiBlZGl0b3IuaXNTaGFwZUhpZGRlbihzaGFwZUlkKSwgW2VkaXRvciwgc2hhcGVJZF0pO1xuICBpZiAoIUhhbmRsZXMgfHwgIWhhbmRsZXMgfHwgIXRyYW5zZm9ybSB8fCBpc0hpZGRlbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEhhbmRsZXMsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgdHJhbnNmb3JtOiBNYXQudG9Dc3NTdHJpbmcodHJhbnNmb3JtKSwgY2hpbGRyZW46IGhhbmRsZXMubWFwKChoYW5kbGUpID0+IHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIEhhbmRsZVdyYXBwZXIsXG4gICAgICB7XG4gICAgICAgIHNoYXBlSWQsXG4gICAgICAgIGhhbmRsZSxcbiAgICAgICAgem9vbTogem9vbUxldmVsLFxuICAgICAgICBpc0NvYXJzZVxuICAgICAgfSxcbiAgICAgIGhhbmRsZS5pZFxuICAgICk7XG4gIH0pIH0pIH0pO1xufVxuZnVuY3Rpb24gSGFuZGxlV3JhcHBlcih7XG4gIHNoYXBlSWQsXG4gIGhhbmRsZSxcbiAgem9vbSxcbiAgaXNDb2Fyc2Vcbn0pIHtcbiAgY29uc3QgZXZlbnRzID0gdXNlSGFuZGxlRXZlbnRzKHNoYXBlSWQsIGhhbmRsZS5pZCk7XG4gIGNvbnN0IHsgSGFuZGxlIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghSGFuZGxlKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgXCJhcmlhLWxhYmVsXCI6IFwiaGFuZGxlXCIsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2hhbmRsZS54fSwgJHtoYW5kbGUueX0pYCwgLi4uZXZlbnRzLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChIYW5kbGUsIHsgc2hhcGVJZCwgaGFuZGxlLCB6b29tLCBpc0NvYXJzZSB9KSB9KTtcbn1cbmZ1bmN0aW9uIFNoYXBlc1dpdGhTVkdzKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgcmVuZGVyaW5nU2hhcGVzID0gdXNlVmFsdWUoXCJyZW5kZXJpbmcgc2hhcGVzXCIsICgpID0+IGVkaXRvci5nZXRSZW5kZXJpbmdTaGFwZXMoKSwgW2VkaXRvcl0pO1xuICByZXR1cm4gcmVuZGVyaW5nU2hhcGVzLm1hcCgocmVzdWx0KSA9PiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudDIsIHsgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFNoYXBlLCB7IC4uLnJlc3VsdCB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KERlYnVnU3ZnQ29weSwgeyBpZDogcmVzdWx0LmlkLCBtb2RlOiBcImlmcmFtZVwiIH0pXG4gIF0gfSwgcmVzdWx0LmlkICsgXCJfZnJhZ21lbnRcIikpO1xufVxuZnVuY3Rpb24gUmVmbG93SWZOZWVkZWQoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjdWxsZWRTaGFwZXNSZWYgPSB1c2VSZWYoLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gIHVzZVF1aWNrUmVhY3RvcihcbiAgICBcInJlZmxvdyBmb3IgY3VsbGVkIHNoYXBlc1wiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IGN1bGxlZFNoYXBlcyA9IGVkaXRvci5nZXRDdWxsZWRTaGFwZXMoKTtcbiAgICAgIGlmIChjdWxsZWRTaGFwZXNSZWYuY3VycmVudC5zaXplID09PSBjdWxsZWRTaGFwZXMuc2l6ZSAmJiBbLi4uY3VsbGVkU2hhcGVzXS5ldmVyeSgoaWQpID0+IGN1bGxlZFNoYXBlc1JlZi5jdXJyZW50LmhhcyhpZCkpKVxuICAgICAgICByZXR1cm47XG4gICAgICBjdWxsZWRTaGFwZXNSZWYuY3VycmVudCA9IGN1bGxlZFNoYXBlcztcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0bC1jYW52YXNcIik7XG4gICAgICBpZiAoY2FudmFzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgY29uc3QgX2hlaWdodCA9IGNhbnZhc1swXS5vZmZzZXRIZWlnaHQ7XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIFNoYXBlc1RvRGlzcGxheSgpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHJlbmRlcmluZ1NoYXBlcyA9IHVzZVZhbHVlKFwicmVuZGVyaW5nIHNoYXBlc1wiLCAoKSA9PiBlZGl0b3IuZ2V0UmVuZGVyaW5nU2hhcGVzKCksIFtlZGl0b3JdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgcmVuZGVyaW5nU2hhcGVzLm1hcCgocmVzdWx0KSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFNoYXBlLCB7IC4uLnJlc3VsdCB9LCByZXN1bHQuaWQgKyBcIl9zaGFwZVwiKSksXG4gICAgdGxlbnYuaXNTYWZhcmkgJiYgLyogQF9fUFVSRV9fICovIGpzeChSZWZsb3dJZk5lZWRlZCwge30pXG4gIF0gfSk7XG59XG5mdW5jdGlvbiBIaW50ZWRTaGFwZUluZGljYXRvcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHsgU2hhcGVJbmRpY2F0b3IgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgY29uc3QgaWRzID0gdXNlVmFsdWUoXCJoaW50aW5nIHNoYXBlIGlkc1wiLCAoKSA9PiBkZWR1cGUoZWRpdG9yLmdldEhpbnRpbmdTaGFwZUlkcygpKSwgW2VkaXRvcl0pO1xuICBpZiAoIWlkcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICBpZiAoIVNoYXBlSW5kaWNhdG9yKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIGlkcy5tYXAoKGlkKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFNoYXBlSW5kaWNhdG9yLCB7IGNsYXNzTmFtZTogXCJ0bC11c2VyLWluZGljYXRvcl9faGludFwiLCBzaGFwZUlkOiBpZCB9LCBpZCArIFwiX2hpbnRpbmdcIikpO1xufVxuZnVuY3Rpb24gQ3Vyc29yRGVmKCkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJnXCIsIHsgaWQ6IFwiY3Vyc29yXCIsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJnXCIsIHsgZmlsbDogXCJyZ2JhKDAsMCwwLC4yKVwiLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC0xMSwtMTEpXCIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IFwibTEyIDI0LjQyMTl2LTE2LjAxNWwxMS41OTEgMTEuNjE5aC02Ljc4MWwtLjQxMS4xMjR6XCIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IFwibTIxLjA4NDUgMjUuMDk2Mi0zLjYwNSAxLjUzNS00LjY4Mi0xMS4wODkgMy42ODYtMS41NTN6XCIgfSlcbiAgICBdIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZ1wiLCB7IGZpbGw6IFwid2hpdGVcIiwgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtMTIsLTEyKVwiLCBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInBhdGhcIiwgeyBkOiBcIm0xMiAyNC40MjE5di0xNi4wMTVsMTEuNTkxIDExLjYxOWgtNi43ODFsLS40MTEuMTI0elwiIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInBhdGhcIiwgeyBkOiBcIm0yMS4wODQ1IDI1LjA5NjItMy42MDUgMS41MzUtNC42ODItMTEuMDg5IDMuNjg2LTEuNTUzelwiIH0pXG4gICAgXSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC0xMiwtMTIpXCIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IFwibTE5Ljc1MSAyNC40MTU1LTEuODQ0Ljc3NC0zLjEtNy4zNzQgMS44NDEtLjc3NXpcIiB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogXCJtMTMgMTAuODE0djExLjE4OGwyLjk2OS0yLjg2Ni40MjgtLjEzOWg0Ljc2OHpcIiB9KVxuICAgIF0gfSlcbiAgXSB9KTtcbn1cbmZ1bmN0aW9uIENvbGxhYm9yYXRvckhpbnREZWYoKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGlkOiBcImN1cnNvcl9oaW50XCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIGQ6IFwiTSAtMiwtNSAyLDAgLTIsNSBaXCIgfSk7XG59XG5mdW5jdGlvbiBEZWJ1Z1N2Z0NvcHkoeyBpZCwgbW9kZSB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBbaW1hZ2UsIHNldEltYWdlXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBpc0luUm9vdCA9IHVzZVZhbHVlKFxuICAgIFwiaXMgaW4gcm9vdFwiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgICAgIHJldHVybiBzaGFwZT8ucGFyZW50SWQgPT09IGVkaXRvci5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgfSxcbiAgICBbZWRpdG9yLCBpZF1cbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzSW5Sb290KSByZXR1cm47XG4gICAgbGV0IGxhdGVzdCA9IG51bGw7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSByZWFjdChcInNoYXBlIHRvIHN2Z1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJJZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgICBsYXRlc3QgPSByZW5kZXJJZDtcbiAgICAgIGNvbnN0IGlzU2luZ2xlRnJhbWUgPSBlZGl0b3IuaXNTaGFwZU9mVHlwZShpZCwgXCJmcmFtZVwiKTtcbiAgICAgIGNvbnN0IHBhZGRpbmcgPSBpc1NpbmdsZUZyYW1lID8gMCA6IDEwO1xuICAgICAgbGV0IGJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpO1xuICAgICAgaWYgKCFib3VuZHMpIHJldHVybjtcbiAgICAgIGJvdW5kcyA9IGJvdW5kcy5jbG9uZSgpLmV4cGFuZEJ5KHBhZGRpbmcpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZWRpdG9yLmdldFN2Z1N0cmluZyhbaWRdLCB7XG4gICAgICAgIHBhZGRpbmcsXG4gICAgICAgIGJhY2tncm91bmQ6IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuZXhwb3J0QmFja2dyb3VuZFxuICAgICAgfSk7XG4gICAgICBpZiAobGF0ZXN0ICE9PSByZW5kZXJJZCB8fCAhcmVzdWx0KSByZXR1cm47XG4gICAgICBjb25zdCBzdmdEYXRhVXJsID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5zdmcpfWA7XG4gICAgICBzZXRJbWFnZSh7IHNyYzogc3ZnRGF0YVVybCwgYm91bmRzIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsYXRlc3QgPSBudWxsO1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBpZCwgaXNJblJvb3RdKTtcbiAgaWYgKCFpc0luUm9vdCB8fCAhaW1hZ2UpIHJldHVybiBudWxsO1xuICBpZiAobW9kZSA9PT0gXCJpZnJhbWVcIikge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgXCJpZnJhbWVcIixcbiAgICAgIHtcbiAgICAgICAgc3JjOiBpbWFnZS5zcmMsXG4gICAgICAgIHdpZHRoOiBpbWFnZS5ib3VuZHMud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuYm91bmRzLmhlaWdodCxcbiAgICAgICAgcmVmZXJyZXJQb2xpY3k6IFwibm8tcmVmZXJyZXJcIixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7aW1hZ2UuYm91bmRzLnh9cHgsICR7aW1hZ2UuYm91bmRzLm1heFkgKyAxMn1weClgLFxuICAgICAgICAgIG91dGxpbmU6IFwiMXB4IHNvbGlkIGJsYWNrXCIsXG4gICAgICAgICAgbWF4V2lkdGg6IFwibm9uZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwiaW1nXCIsXG4gICAge1xuICAgICAgc3JjOiBpbWFnZS5zcmMsXG4gICAgICB3aWR0aDogaW1hZ2UuYm91bmRzLndpZHRoLFxuICAgICAgaGVpZ2h0OiBpbWFnZS5ib3VuZHMuaGVpZ2h0LFxuICAgICAgcmVmZXJyZXJQb2xpY3k6IFwibm8tcmVmZXJyZXJcIixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7aW1hZ2UuYm91bmRzLnh9cHgsICR7aW1hZ2UuYm91bmRzLm1heFkgKyAxMn1weClgLFxuICAgICAgICBvdXRsaW5lOiBcIjFweCBzb2xpZCBibGFja1wiLFxuICAgICAgICBtYXhXaWR0aDogXCJub25lXCJcbiAgICAgIH1cbiAgICB9XG4gICk7XG59XG5mdW5jdGlvbiBTZWxlY3Rpb25Gb3JlZ3JvdW5kV3JhcHBlcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHNlbGVjdGlvblJvdGF0aW9uID0gdXNlVmFsdWUoXCJzZWxlY3Rpb24gcm90YXRpb25cIiwgKCkgPT4gZWRpdG9yLmdldFNlbGVjdGlvblJvdGF0aW9uKCksIFtcbiAgICBlZGl0b3JcbiAgXSk7XG4gIGNvbnN0IHNlbGVjdGlvbkJvdW5kcyA9IHVzZVZhbHVlKFxuICAgIFwic2VsZWN0aW9uIGJvdW5kc1wiLFxuICAgICgpID0+IGVkaXRvci5nZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kcygpLFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGNvbnN0IHsgU2VsZWN0aW9uRm9yZWdyb3VuZCB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIXNlbGVjdGlvbkJvdW5kcyB8fCAhU2VsZWN0aW9uRm9yZWdyb3VuZCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFNlbGVjdGlvbkZvcmVncm91bmQsIHsgYm91bmRzOiBzZWxlY3Rpb25Cb3VuZHMsIHJvdGF0aW9uOiBzZWxlY3Rpb25Sb3RhdGlvbiB9KTtcbn1cbmZ1bmN0aW9uIFNlbGVjdGlvbkJhY2tncm91bmRXcmFwcGVyKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3Qgc2VsZWN0aW9uUm90YXRpb24gPSB1c2VWYWx1ZShcInNlbGVjdGlvbiByb3RhdGlvblwiLCAoKSA9PiBlZGl0b3IuZ2V0U2VsZWN0aW9uUm90YXRpb24oKSwgW1xuICAgIGVkaXRvclxuICBdKTtcbiAgY29uc3Qgc2VsZWN0aW9uQm91bmRzID0gdXNlVmFsdWUoXG4gICAgXCJzZWxlY3Rpb24gYm91bmRzXCIsXG4gICAgKCkgPT4gZWRpdG9yLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCksXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgeyBTZWxlY3Rpb25CYWNrZ3JvdW5kIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghc2VsZWN0aW9uQm91bmRzIHx8ICFTZWxlY3Rpb25CYWNrZ3JvdW5kKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goU2VsZWN0aW9uQmFja2dyb3VuZCwgeyBib3VuZHM6IHNlbGVjdGlvbkJvdW5kcywgcm90YXRpb246IHNlbGVjdGlvblJvdGF0aW9uIH0pO1xufVxuZnVuY3Rpb24gT25UaGVDYW52YXNXcmFwcGVyKCkge1xuICBjb25zdCB7IE9uVGhlQ2FudmFzIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghT25UaGVDYW52YXMpIHJldHVybiBudWxsO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChPblRoZUNhbnZhcywge30pO1xufVxuZnVuY3Rpb24gTW92aW5nQ2FtZXJhSGl0VGVzdEJsb2NrZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjYW1lcmFTdGF0ZSA9IHVzZVZhbHVlKFwiY2FtZXJhIHN0YXRlXCIsICgpID0+IGVkaXRvci5nZXRDYW1lcmFTdGF0ZSgpLCBbZWRpdG9yXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtaGl0LXRlc3QtYmxvY2tlclwiLCB7XG4gICAgICAgIFwidGwtaGl0LXRlc3QtYmxvY2tlcl9faGlkZGVuXCI6IGNhbWVyYVN0YXRlID09PSBcImlkbGVcIlxuICAgICAgfSlcbiAgICB9XG4gICk7XG59XG5leHBvcnQge1xuICBEZWZhdWx0Q2FudmFzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdENhbnZhcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCollaboratorHint: () => (/* binding */ DefaultCollaboratorHint)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\n\n\nfunction DefaultCollaboratorHint({\n  className,\n  zoom,\n  point,\n  color,\n  viewport,\n  opacity = 1\n}) {\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__.useTransform)(\n    rSvg,\n    (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.clamp)(point.x, viewport.minX + 5 / zoom, viewport.maxX - 5 / zoom),\n    (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.clamp)(point.y, viewport.minY + 5 / zoom, viewport.maxY - 5 / zoom),\n    1 / zoom,\n    _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Angle(viewport.center, point)\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", { ref: rSvg, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor_hint\", color, strokeWidth: 3, stroke: \"var(--color-background)\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor_hint\", color, opacity })\n  ] });\n}\n\n//# sourceMappingURL=DefaultCollaboratorHint.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDb2xsYWJvcmF0b3JIaW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQ1Y7QUFDTDtBQUM2QjtBQUNiO0FBQ0k7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZUFBZSw2Q0FBTTtBQUNyQixFQUFFLHFFQUFZO0FBQ2Q7QUFDQSxJQUFJLDREQUFLO0FBQ1QsSUFBSSw0REFBSztBQUNUO0FBQ0EsSUFBSSxvREFBRztBQUNQO0FBQ0EseUJBQXlCLHVEQUFJLFVBQVUsc0JBQXNCLHVDQUFVO0FBQ3ZFLG9CQUFvQixzREFBRyxVQUFVLGdGQUFnRjtBQUNqSCxvQkFBb0Isc0RBQUcsVUFBVSxzQ0FBc0M7QUFDdkUsS0FBSztBQUNMO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0Q29sbGFib3JhdG9ySGludC5tanM/NDRiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VUcmFuc2Zvcm0ubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL3V0aWxzLm1qc1wiO1xuZnVuY3Rpb24gRGVmYXVsdENvbGxhYm9yYXRvckhpbnQoe1xuICBjbGFzc05hbWUsXG4gIHpvb20sXG4gIHBvaW50LFxuICBjb2xvcixcbiAgdmlld3BvcnQsXG4gIG9wYWNpdHkgPSAxXG59KSB7XG4gIGNvbnN0IHJTdmcgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVRyYW5zZm9ybShcbiAgICByU3ZnLFxuICAgIGNsYW1wKHBvaW50LngsIHZpZXdwb3J0Lm1pblggKyA1IC8gem9vbSwgdmlld3BvcnQubWF4WCAtIDUgLyB6b29tKSxcbiAgICBjbGFtcChwb2ludC55LCB2aWV3cG9ydC5taW5ZICsgNSAvIHpvb20sIHZpZXdwb3J0Lm1heFkgLSA1IC8gem9vbSksXG4gICAgMSAvIHpvb20sXG4gICAgVmVjLkFuZ2xlKHZpZXdwb3J0LmNlbnRlciwgcG9pbnQpXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcInN2Z1wiLCB7IHJlZjogclN2ZywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtb3ZlcmxheXNfX2l0ZW1cIiwgY2xhc3NOYW1lKSwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwidXNlXCIsIHsgaHJlZjogXCIjY3Vyc29yX2hpbnRcIiwgY29sb3IsIHN0cm9rZVdpZHRoOiAzLCBzdHJva2U6IFwidmFyKC0tY29sb3ItYmFja2dyb3VuZClcIiB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwidXNlXCIsIHsgaHJlZjogXCIjY3Vyc29yX2hpbnRcIiwgY29sb3IsIG9wYWNpdHkgfSlcbiAgXSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRDb2xsYWJvcmF0b3JIaW50XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdENvbGxhYm9yYXRvckhpbnQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCursor: () => (/* binding */ DefaultCursor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n\n\n\n\nconst DefaultCursor = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function DefaultCursor2({\n  className,\n  zoom,\n  point,\n  color,\n  name,\n  chatMessage\n}) {\n  const rCursor = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__.useTransform)(rCursor, point?.x, point?.y, 1 / zoom);\n  if (!point) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rCursor, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-cursor\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor\", color }) }),\n    chatMessage ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n      name && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag-title\", style: { color }, children: name }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag-chat\", style: { backgroundColor: color }, children: chatMessage })\n    ] }) : name && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag\", style: { backgroundColor: color }, children: name })\n  ] });\n});\n\n//# sourceMappingURL=DefaultCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDdXJzb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ3BCO0FBQ0M7QUFDdUI7QUFDNUQsc0JBQXNCLDJDQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IsNkNBQU07QUFDeEIsRUFBRSxxRUFBWTtBQUNkO0FBQ0EseUJBQXlCLHVEQUFJLFVBQVUseUJBQXlCLHVDQUFVO0FBQzFFLG9CQUFvQixzREFBRyxVQUFVLGtEQUFrRCxzREFBRyxVQUFVLHdCQUF3QixHQUFHO0FBQzNILGtDQUFrQyx1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDbkQsOEJBQThCLHNEQUFHLFVBQVUsd0NBQXdDLE9BQU8sa0JBQWtCO0FBQzVHLHNCQUFzQixzREFBRyxVQUFVLHVDQUF1Qyx3QkFBd0IseUJBQXlCO0FBQzNILE9BQU8sNEJBQTRCLHNEQUFHLFVBQVUsa0NBQWtDLHdCQUF3QixrQkFBa0I7QUFDNUgsS0FBSztBQUNMLENBQUM7QUFHQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDdXJzb3IubWpzPzgwZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IG1lbW8sIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmNvbnN0IERlZmF1bHRDdXJzb3IgPSBtZW1vKGZ1bmN0aW9uIERlZmF1bHRDdXJzb3IyKHtcbiAgY2xhc3NOYW1lLFxuICB6b29tLFxuICBwb2ludCxcbiAgY29sb3IsXG4gIG5hbWUsXG4gIGNoYXRNZXNzYWdlXG59KSB7XG4gIGNvbnN0IHJDdXJzb3IgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVRyYW5zZm9ybShyQ3Vyc29yLCBwb2ludD8ueCwgcG9pbnQ/LnksIDEgLyB6b29tKTtcbiAgaWYgKCFwb2ludCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IHJlZjogckN1cnNvciwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtb3ZlcmxheXNfX2l0ZW1cIiwgY2xhc3NOYW1lKSwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBcInRsLWN1cnNvclwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcInVzZVwiLCB7IGhyZWY6IFwiI2N1cnNvclwiLCBjb2xvciB9KSB9KSxcbiAgICBjaGF0TWVzc2FnZSA/IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICBuYW1lICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtbmFtZXRhZy10aXRsZVwiLCBzdHlsZTogeyBjb2xvciB9LCBjaGlsZHJlbjogbmFtZSB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtbmFtZXRhZy1jaGF0XCIsIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfSwgY2hpbGRyZW46IGNoYXRNZXNzYWdlIH0pXG4gICAgXSB9KSA6IG5hbWUgJiYgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1uYW1ldGFnXCIsIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfSwgY2hpbGRyZW46IG5hbWUgfSlcbiAgXSB9KTtcbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdEN1cnNvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRDdXJzb3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultErrorFallback: () => (/* binding */ DefaultErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/hardResetEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\");\n/* harmony import */ var _utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/refreshPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst BASE_ERROR_URL = \"https://github.com/tldraw/tldraw/issues/new\";\nconst DefaultErrorFallback = ({ error, editor }) => {\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const [shouldShowError, setShouldShowError] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(\"development\" === \"development\");\n  const [didCopy, setDidCopy] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const [shouldShowResetConfirmation, setShouldShowResetConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  let Canvas = null;\n  try {\n    const components = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_6__.useEditorComponents)();\n    Canvas = components.Canvas ?? null;\n  } catch (e) {\n  }\n  const errorMessage = error instanceof Error ? error.message : String(error);\n  const errorStack = error instanceof Error ? error.stack : null;\n  const isDarkModeFromApp = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"isDarkMode\",\n    () => {\n      try {\n        if (editor) {\n          return editor.user.getIsDarkMode();\n        }\n      } catch {\n      }\n      return null;\n    },\n    [editor]\n  );\n  const [isDarkMode, setIsDarkMode] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    if (isDarkModeFromApp !== null) {\n      setIsDarkMode(isDarkModeFromApp);\n    }\n    let parent = containerRef.current?.parentElement;\n    let foundParentThemeClass = false;\n    while (parent) {\n      if (parent.classList.contains(\"tl-theme__dark\") || parent.classList.contains(\"tl-theme__light\")) {\n        foundParentThemeClass = true;\n        break;\n      }\n      parent = parent.parentElement;\n    }\n    if (foundParentThemeClass) {\n      setIsDarkMode(null);\n      return;\n    }\n    if (typeof window !== \"undefined\" && \"matchMedia\" in window) {\n      setIsDarkMode(window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\n    }\n  }, [isDarkModeFromApp]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    if (didCopy) {\n      const timeout = editor?.timers.setTimeout(() => {\n        setDidCopy(false);\n      }, 2e3);\n      return () => clearTimeout(timeout);\n    }\n  }, [didCopy, editor]);\n  const copyError = () => {\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = errorStack ?? errorMessage;\n    document.body.appendChild(textarea);\n    textarea.select();\n    document.execCommand(\"copy\");\n    textarea.remove();\n    setDidCopy(true);\n  };\n  const refresh = () => {\n    (0,_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_8__.refreshPage)();\n  };\n  const resetLocalState = async () => {\n    (0,_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_7__.hardResetEditor)();\n  };\n  const url = new URL(BASE_ERROR_URL);\n  url.searchParams.set(\"title\", errorMessage);\n  url.searchParams.set(\"labels\", `bug`);\n  url.searchParams.set(\n    \"body\",\n    `Hey, I ran into an error while using tldraw:\n\n\\`\\`\\`js\n${errorStack ?? errorMessage}\n\\`\\`\\`\n\nMy browser: ${navigator.userAgent}`\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n    \"div\",\n    {\n      ref: containerRef,\n      className: classnames__WEBPACK_IMPORTED_MODULE_3__(\n        \"tl-container tl-error-boundary\",\n        // error-boundary is sometimes used outside of the theme\n        // container, so we need to provide it with a theme for our\n        // styles to work correctly\n        isDarkMode === null ? \"\" : isDarkMode ? \"tl-theme__dark\" : \"tl-theme__light\"\n      ),\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-error-boundary__overlay\" }),\n        editor && // opportunistically attempt to render the canvas to reassure\n        // the user that their document is still there. there's a good\n        // chance this won't work (ie the error that we're currently\n        // notifying the user about originates in the canvas) so it's\n        // not a big deal if it doesn't work - in that case we just have\n        // a plain grey background.\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, { onError: _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.noop, fallback: () => null, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-overlay tl-error-boundary__canvas\", children: Canvas ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Canvas, {}) : null }) }) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"div\",\n          {\n            className: classnames__WEBPACK_IMPORTED_MODULE_3__(\"tl-modal\", \"tl-error-boundary__content\", {\n              \"tl-error-boundary__content__expanded\": shouldShowError && !shouldShowResetConfirmation\n            }),\n            children: shouldShowResetConfirmation ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", { children: \"Are you sure?\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Resetting your data will delete your drawing and cannot be undone.\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions\", children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: () => setShouldShowResetConfirmation(false), children: \"Cancel\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: \"tl-error-boundary__reset\", onClick: resetLocalState, children: \"Reset data\" })\n              ] })\n            ] }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", { children: \"Something's gone wrong.\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { children: [\n                \"Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can \",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: url.toString(), children: \"create a GitHub issue\" }),\n                \" or\",\n                \" \",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"https://discord.gg/Cq6cPsTfNy\", children: \"ask for help on Discord\" }),\n                \".\"\n              ] }),\n              shouldShowError && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n                \"Message:\",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h4\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", { children: errorMessage }) }),\n                \"Stack trace:\",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__error\", children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"pre\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", { children: errorStack ?? errorMessage }) }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: copyError, children: didCopy ? \"Copied!\" : \"Copy\" })\n                ] })\n              ] }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions\", children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: () => setShouldShowError(!shouldShowError), children: shouldShowError ? \"Hide details\" : \"Show details\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions__group\", children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                    \"button\",\n                    {\n                      className: \"tl-error-boundary__reset\",\n                      onClick: () => setShouldShowResetConfirmation(true),\n                      children: \"Reset data\"\n                    }\n                  ),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: \"tl-error-boundary__refresh\", onClick: refresh, children: \"Refresh Page\" })\n                ] })\n              ] })\n            ] })\n          }\n        )\n      ]\n    }\n  );\n};\n\n//# sourceMappingURL=DefaultErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNUO0FBQ1Y7QUFDRDtBQUNpQztBQUNYO0FBQ2dCO0FBQ1I7QUFDUjtBQUNMO0FBQ3JEO0FBQ0EsZ0NBQWdDLGVBQWU7QUFDL0MsdUJBQXVCLDZDQUFNO0FBQzdCLGdEQUFnRCwrQ0FBUSxDQUFDLGFBQW9CO0FBQzdFLGdDQUFnQywrQ0FBUTtBQUN4Qyx3RUFBd0UsK0NBQVE7QUFDaEY7QUFDQTtBQUNBLHVCQUF1QixtRkFBbUI7QUFDMUM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQ0FBc0MsK0NBQVE7QUFDOUMsRUFBRSxzREFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1FQUFXO0FBQ2Y7QUFDQTtBQUNBLElBQUksMkVBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsY0FBYyxvQkFBb0I7QUFDbEM7QUFDQSx5QkFBeUIsdURBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVDQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHLFVBQVUseUNBQXlDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzREFBRyxDQUFDLDZEQUFhLElBQUksU0FBUywrQ0FBSSxrREFBa0Qsc0RBQUcsQ0FBQywrREFBYSxhQUFhLHlDQUF5QyxzREFBRyxVQUFVLHNGQUFzRixzREFBRyxXQUFXLFVBQVUsR0FBRyxHQUFHO0FBQ3BULHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0EsdUJBQXVCLHVDQUFVO0FBQ2pDO0FBQ0EsYUFBYTtBQUNiLG9FQUFvRSx1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDckYsOEJBQThCLHNEQUFHLFNBQVMsMkJBQTJCO0FBQ3JFLDhCQUE4QixzREFBRyxRQUFRLGdGQUFnRjtBQUN6SCw4QkFBOEIsdURBQUksVUFBVTtBQUM1QyxnQ0FBZ0Msc0RBQUcsYUFBYSwwRUFBMEU7QUFDMUgsZ0NBQWdDLHNEQUFHLGFBQWEseUZBQXlGO0FBQ3pJLGlCQUFpQjtBQUNqQixlQUFlLG9CQUFvQix1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDcEQsOEJBQThCLHNEQUFHLFNBQVMscUNBQXFDO0FBQy9FLDhCQUE4Qix1REFBSSxRQUFRO0FBQzFDO0FBQ0EsZ0NBQWdDLHNEQUFHLFFBQVEseURBQXlEO0FBQ3BHO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUcsUUFBUSw0RUFBNEU7QUFDdkg7QUFDQSxpQkFBaUI7QUFDakIsaURBQWlELHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUNsRTtBQUNBLGdDQUFnQyxzREFBRyxTQUFTLDBCQUEwQixzREFBRyxXQUFXLHdCQUF3QixHQUFHO0FBQy9HO0FBQ0EsZ0NBQWdDLHVEQUFJLFVBQVU7QUFDOUMsa0NBQWtDLHNEQUFHLFVBQVUsMEJBQTBCLHNEQUFHLFdBQVcsc0NBQXNDLEdBQUc7QUFDaEksa0NBQWtDLHNEQUFHLGFBQWEsNERBQTREO0FBQzlHLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakIsOEJBQThCLHVEQUFJLFVBQVU7QUFDNUMsZ0NBQWdDLHNEQUFHLGFBQWEsa0hBQWtIO0FBQ2xLLGdDQUFnQyx1REFBSSxVQUFVO0FBQzlDLGtDQUFrQyxzREFBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxzREFBRyxhQUFhLHFGQUFxRjtBQUN2SSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qcz9hMWNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IG5vb3AgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvckNvbXBvbmVudHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanNcIjtcbmltcG9ydCB7IGhhcmRSZXNldEVkaXRvciB9IGZyb20gXCIuLi8uLi91dGlscy9oYXJkUmVzZXRFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyByZWZyZXNoUGFnZSB9IGZyb20gXCIuLi8uLi91dGlscy9yZWZyZXNoUGFnZS5tanNcIjtcbmltcG9ydCB7IEVycm9yQm91bmRhcnkgfSBmcm9tIFwiLi4vRXJyb3JCb3VuZGFyeS5tanNcIjtcbmNvbnN0IEJBU0VfRVJST1JfVVJMID0gXCJodHRwczovL2dpdGh1Yi5jb20vdGxkcmF3L3RsZHJhdy9pc3N1ZXMvbmV3XCI7XG5jb25zdCBEZWZhdWx0RXJyb3JGYWxsYmFjayA9ICh7IGVycm9yLCBlZGl0b3IgfSkgPT4ge1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtzaG91bGRTaG93RXJyb3IsIHNldFNob3VsZFNob3dFcnJvcl0gPSB1c2VTdGF0ZShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKTtcbiAgY29uc3QgW2RpZENvcHksIHNldERpZENvcHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvdWxkU2hvd1Jlc2V0Q29uZmlybWF0aW9uLCBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBsZXQgQ2FudmFzID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb21wb25lbnRzID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICAgIENhbnZhcyA9IGNvbXBvbmVudHMuQ2FudmFzID8/IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gIGNvbnN0IGVycm9yU3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiBudWxsO1xuICBjb25zdCBpc0RhcmtNb2RlRnJvbUFwcCA9IHVzZVZhbHVlKFxuICAgIFwiaXNEYXJrTW9kZVwiLFxuICAgICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICByZXR1cm4gZWRpdG9yLnVzZXIuZ2V0SXNEYXJrTW9kZSgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgW2lzRGFya01vZGUsIHNldElzRGFya01vZGVdID0gdXNlU3RhdGUobnVsbCk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRGFya01vZGVGcm9tQXBwICE9PSBudWxsKSB7XG4gICAgICBzZXRJc0RhcmtNb2RlKGlzRGFya01vZGVGcm9tQXBwKTtcbiAgICB9XG4gICAgbGV0IHBhcmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5wYXJlbnRFbGVtZW50O1xuICAgIGxldCBmb3VuZFBhcmVudFRoZW1lQ2xhc3MgPSBmYWxzZTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcInRsLXRoZW1lX19kYXJrXCIpIHx8IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC10aGVtZV9fbGlnaHRcIikpIHtcbiAgICAgICAgZm91bmRQYXJlbnRUaGVtZUNsYXNzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgaWYgKGZvdW5kUGFyZW50VGhlbWVDbGFzcykge1xuICAgICAgc2V0SXNEYXJrTW9kZShudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJtYXRjaE1lZGlhXCIgaW4gd2luZG93KSB7XG4gICAgICBzZXRJc0RhcmtNb2RlKHdpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzKTtcbiAgICB9XG4gIH0sIFtpc0RhcmtNb2RlRnJvbUFwcF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkaWRDb3B5KSB7XG4gICAgICBjb25zdCB0aW1lb3V0ID0gZWRpdG9yPy50aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldERpZENvcHkoZmFsc2UpO1xuICAgICAgfSwgMmUzKTtcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgfVxuICB9LCBbZGlkQ29weSwgZWRpdG9yXSk7XG4gIGNvbnN0IGNvcHlFcnJvciA9ICgpID0+IHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IGVycm9yU3RhY2sgPz8gZXJyb3JNZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgIHRleHRhcmVhLnNlbGVjdCgpO1xuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcbiAgICB0ZXh0YXJlYS5yZW1vdmUoKTtcbiAgICBzZXREaWRDb3B5KHRydWUpO1xuICB9O1xuICBjb25zdCByZWZyZXNoID0gKCkgPT4ge1xuICAgIHJlZnJlc2hQYWdlKCk7XG4gIH07XG4gIGNvbnN0IHJlc2V0TG9jYWxTdGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBoYXJkUmVzZXRFZGl0b3IoKTtcbiAgfTtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChCQVNFX0VSUk9SX1VSTCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwidGl0bGVcIiwgZXJyb3JNZXNzYWdlKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJsYWJlbHNcIiwgYGJ1Z2ApO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldChcbiAgICBcImJvZHlcIixcbiAgICBgSGV5LCBJIHJhbiBpbnRvIGFuIGVycm9yIHdoaWxlIHVzaW5nIHRsZHJhdzpcblxuXFxgXFxgXFxganNcbiR7ZXJyb3JTdGFjayA/PyBlcnJvck1lc3NhZ2V9XG5cXGBcXGBcXGBcblxuTXkgYnJvd3NlcjogJHtuYXZpZ2F0b3IudXNlckFnZW50fWBcbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgcmVmOiBjb250YWluZXJSZWYsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXG4gICAgICAgIFwidGwtY29udGFpbmVyIHRsLWVycm9yLWJvdW5kYXJ5XCIsXG4gICAgICAgIC8vIGVycm9yLWJvdW5kYXJ5IGlzIHNvbWV0aW1lcyB1c2VkIG91dHNpZGUgb2YgdGhlIHRoZW1lXG4gICAgICAgIC8vIGNvbnRhaW5lciwgc28gd2UgbmVlZCB0byBwcm92aWRlIGl0IHdpdGggYSB0aGVtZSBmb3Igb3VyXG4gICAgICAgIC8vIHN0eWxlcyB0byB3b3JrIGNvcnJlY3RseVxuICAgICAgICBpc0RhcmtNb2RlID09PSBudWxsID8gXCJcIiA6IGlzRGFya01vZGUgPyBcInRsLXRoZW1lX19kYXJrXCIgOiBcInRsLXRoZW1lX19saWdodFwiXG4gICAgICApLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fb3ZlcmxheVwiIH0pLFxuICAgICAgICBlZGl0b3IgJiYgLy8gb3Bwb3J0dW5pc3RpY2FsbHkgYXR0ZW1wdCB0byByZW5kZXIgdGhlIGNhbnZhcyB0byByZWFzc3VyZVxuICAgICAgICAvLyB0aGUgdXNlciB0aGF0IHRoZWlyIGRvY3VtZW50IGlzIHN0aWxsIHRoZXJlLiB0aGVyZSdzIGEgZ29vZFxuICAgICAgICAvLyBjaGFuY2UgdGhpcyB3b24ndCB3b3JrIChpZSB0aGUgZXJyb3IgdGhhdCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gbm90aWZ5aW5nIHRoZSB1c2VyIGFib3V0IG9yaWdpbmF0ZXMgaW4gdGhlIGNhbnZhcykgc28gaXQnc1xuICAgICAgICAvLyBub3QgYSBiaWcgZGVhbCBpZiBpdCBkb2Vzbid0IHdvcmsgLSBpbiB0aGF0IGNhc2Ugd2UganVzdCBoYXZlXG4gICAgICAgIC8vIGEgcGxhaW4gZ3JleSBiYWNrZ3JvdW5kLlxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KEVycm9yQm91bmRhcnksIHsgb25FcnJvcjogbm9vcCwgZmFsbGJhY2s6ICgpID0+IG51bGwsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KEVkaXRvckNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGVkaXRvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtb3ZlcmxheSB0bC1lcnJvci1ib3VuZGFyeV9fY2FudmFzXCIsIGNoaWxkcmVuOiBDYW52YXMgPyAvKiBAX19QVVJFX18gKi8ganN4KENhbnZhcywge30pIDogbnVsbCB9KSB9KSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW1vZGFsXCIsIFwidGwtZXJyb3ItYm91bmRhcnlfX2NvbnRlbnRcIiwge1xuICAgICAgICAgICAgICBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19leHBhbmRlZFwiOiBzaG91bGRTaG93RXJyb3IgJiYgIXNob3VsZFNob3dSZXNldENvbmZpcm1hdGlvblxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjaGlsZHJlbjogc2hvdWxkU2hvd1Jlc2V0Q29uZmlybWF0aW9uID8gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImgyXCIsIHsgY2hpbGRyZW46IFwiQXJlIHlvdSBzdXJlP1wiIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIlJlc2V0dGluZyB5b3VyIGRhdGEgd2lsbCBkZWxldGUgeW91ciBkcmF3aW5nIGFuZCBjYW5ub3QgYmUgdW5kb25lLlwiIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fY29udGVudF9fYWN0aW9uc1wiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb24oZmFsc2UpLCBjaGlsZHJlbjogXCJDYW5jZWxcIiB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19yZXNldFwiLCBvbkNsaWNrOiByZXNldExvY2FsU3RhdGUsIGNoaWxkcmVuOiBcIlJlc2V0IGRhdGFcIiB9KVxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdIH0pIDogLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImgyXCIsIHsgY2hpbGRyZW46IFwiU29tZXRoaW5nJ3MgZ29uZSB3cm9uZy5cIiB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJwXCIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBcIlNvcnJ5LCB3ZSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgdG8gY29udGludWUuIElmIHlvdSBrZWVwIHNlZWluZyB0aGlzIGVycm9yLCB5b3UgY2FuIFwiLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJhXCIsIHsgaHJlZjogdXJsLnRvU3RyaW5nKCksIGNoaWxkcmVuOiBcImNyZWF0ZSBhIEdpdEh1YiBpc3N1ZVwiIH0pLFxuICAgICAgICAgICAgICAgIFwiIG9yXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vZGlzY29yZC5nZy9DcTZjUHNUZk55XCIsIGNoaWxkcmVuOiBcImFzayBmb3IgaGVscCBvbiBEaXNjb3JkXCIgfSksXG4gICAgICAgICAgICAgICAgXCIuXCJcbiAgICAgICAgICAgICAgXSB9KSxcbiAgICAgICAgICAgICAgc2hvdWxkU2hvd0Vycm9yICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgXCJNZXNzYWdlOlwiLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJoNFwiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiY29kZVwiLCB7IGNoaWxkcmVuOiBlcnJvck1lc3NhZ2UgfSkgfSksXG4gICAgICAgICAgICAgICAgXCJTdGFjayB0cmFjZTpcIixcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fY29udGVudF9fZXJyb3JcIiwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwcmVcIiwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcImNvZGVcIiwgeyBjaGlsZHJlbjogZXJyb3JTdGFjayA/PyBlcnJvck1lc3NhZ2UgfSkgfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgb25DbGljazogY29weUVycm9yLCBjaGlsZHJlbjogZGlkQ29weSA/IFwiQ29waWVkIVwiIDogXCJDb3B5XCIgfSlcbiAgICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19hY3Rpb25zXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNob3VsZFNob3dFcnJvcighc2hvdWxkU2hvd0Vycm9yKSwgY2hpbGRyZW46IHNob3VsZFNob3dFcnJvciA/IFwiSGlkZSBkZXRhaWxzXCIgOiBcIlNob3cgZGV0YWlsc1wiIH0pLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19hY3Rpb25zX19ncm91cFwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICAgICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fcmVzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb24odHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUmVzZXQgZGF0YVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19yZWZyZXNoXCIsIG9uQ2xpY2s6IHJlZnJlc2gsIGNoaWxkcmVuOiBcIlJlZnJlc2ggUGFnZVwiIH0pXG4gICAgICAgICAgICAgICAgXSB9KVxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdIH0pXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICBdXG4gICAgfVxuICApO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRFcnJvckZhbGxiYWNrXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEVycm9yRmFsbGJhY2subWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs":
/*!************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultGrid: () => (/* binding */ DefaultGrid)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useSafeId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\");\n\n\n\n\nfunction DefaultGrid({ x, y, z, size }) {\n  const id = `grid_${(0,_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_3__.useSafeId)()}`;\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const { gridSteps } = editor.options;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", { className: \"tl-grid\", version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"defs\", { children: gridSteps.map(({ min, mid, step }, i) => {\n      const s = step * size * z;\n      const xo = 0.5 + x * z;\n      const yo = 0.5 + y * z;\n      const gxo = xo > 0 ? xo % s : s + xo % s;\n      const gyo = yo > 0 ? yo % s : s + yo % s;\n      const opacity = z < mid ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.modulate)(z, [min, mid], [0, 1]) : 1;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"pattern\",\n        {\n          id: `${id}_${step}`,\n          width: s,\n          height: s,\n          patternUnits: \"userSpaceOnUse\",\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-grid-dot\", cx: gxo, cy: gyo, r: 1, opacity })\n        },\n        i\n      );\n    }) }),\n    gridSteps.map(({ step }, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: \"100%\", height: \"100%\", fill: `url(#${id}_${step})` }, i))\n  ] });\n}\n\n//# sourceMappingURL=DefaultGrid.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRHcmlkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QztBQUNMO0FBQ2E7QUFDQTtBQUN0RCx1QkFBdUIsZUFBZTtBQUN0QyxxQkFBcUIsK0RBQVMsR0FBRztBQUNqQyxpQkFBaUIsK0RBQVM7QUFDMUIsVUFBVSxZQUFZO0FBQ3RCLHlCQUF5Qix1REFBSSxVQUFVO0FBQ3ZDLG9CQUFvQixzREFBRyxXQUFXLDJCQUEyQixnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1REFBUTtBQUN4Qyw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQTtBQUNBLGlCQUFpQixHQUFHLEdBQUcsS0FBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msc0RBQUcsYUFBYSwyREFBMkQ7QUFDL0csU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLLEdBQUc7QUFDUixxQkFBcUIsTUFBTSx3QkFBd0Isc0RBQUcsV0FBVyw2Q0FBNkMsR0FBRyxHQUFHLEtBQUssSUFBSTtBQUM3SCxLQUFLO0FBQ0w7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRHcmlkLm1qcz85ZjY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgbW9kdWxhdGUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZVNhZmVJZCB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VTYWZlSWQubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0R3JpZCh7IHgsIHksIHosIHNpemUgfSkge1xuICBjb25zdCBpZCA9IGBncmlkXyR7dXNlU2FmZUlkKCl9YDtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHsgZ3JpZFN0ZXBzIH0gPSBlZGl0b3Iub3B0aW9ucztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBcInRsLWdyaWRcIiwgdmVyc2lvbjogXCIxLjFcIiwgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiZGVmc1wiLCB7IGNoaWxkcmVuOiBncmlkU3RlcHMubWFwKCh7IG1pbiwgbWlkLCBzdGVwIH0sIGkpID0+IHtcbiAgICAgIGNvbnN0IHMgPSBzdGVwICogc2l6ZSAqIHo7XG4gICAgICBjb25zdCB4byA9IDAuNSArIHggKiB6O1xuICAgICAgY29uc3QgeW8gPSAwLjUgKyB5ICogejtcbiAgICAgIGNvbnN0IGd4byA9IHhvID4gMCA/IHhvICUgcyA6IHMgKyB4byAlIHM7XG4gICAgICBjb25zdCBneW8gPSB5byA+IDAgPyB5byAlIHMgOiBzICsgeW8gJSBzO1xuICAgICAgY29uc3Qgb3BhY2l0eSA9IHogPCBtaWQgPyBtb2R1bGF0ZSh6LCBbbWluLCBtaWRdLCBbMCwgMV0pIDogMTtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICBcInBhdHRlcm5cIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBgJHtpZH1fJHtzdGVwfWAsXG4gICAgICAgICAgd2lkdGg6IHMsXG4gICAgICAgICAgaGVpZ2h0OiBzLFxuICAgICAgICAgIHBhdHRlcm5Vbml0czogXCJ1c2VyU3BhY2VPblVzZVwiLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgY2xhc3NOYW1lOiBcInRsLWdyaWQtZG90XCIsIGN4OiBneG8sIGN5OiBneW8sIHI6IDEsIG9wYWNpdHkgfSlcbiAgICAgICAgfSxcbiAgICAgICAgaVxuICAgICAgKTtcbiAgICB9KSB9KSxcbiAgICBncmlkU3RlcHMubWFwKCh7IHN0ZXAgfSwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcInJlY3RcIiwgeyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIsIGZpbGw6IGB1cmwoIyR7aWR9XyR7c3RlcH0pYCB9LCBpKSlcbiAgXSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRHcmlkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEdyaWQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHandle: () => (/* binding */ DefaultHandle)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\nfunction DefaultHandle({ handle, isCoarse, className, zoom }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const br = (isCoarse ? editor.options.coarseHandleRadius : editor.options.handleRadius) / zoom;\n  if (handle.type === \"clone\") {\n    const fr2 = 3 / zoom;\n    const path = `M0,${-fr2} A${fr2},${fr2} 0 0,1 0,${fr2}`;\n    const index = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.SIDES.indexOf(handle.id);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(`tl-handle tl-handle__${handle.type}`, className), children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__bg\", r: br }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { className: \"tl-handle__fg\", d: path, transform: `rotate(${-90 + 90 * index})` })\n    ] });\n  }\n  const fr = (handle.type === \"create\" && isCoarse ? 3 : 4) / Math.max(zoom, 0.25);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(`tl-handle tl-handle__${handle.type}`, className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__bg\", r: br }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__fg\", r: fr })\n  ] });\n}\n\n//# sourceMappingURL=DefaultHandle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQ1Y7QUFDUTtBQUNVO0FBQ3RELHlCQUF5QixtQ0FBbUM7QUFDNUQsaUJBQWlCLCtEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixNQUFNLEdBQUcsSUFBSSxHQUFHLEtBQUssVUFBVSxJQUFJO0FBQzFELGtCQUFrQixpREFBSztBQUN2QiwyQkFBMkIsdURBQUksUUFBUSxXQUFXLHVDQUFVLHlCQUF5QixZQUFZO0FBQ2pHLHNCQUFzQixzREFBRyxhQUFhLG1DQUFtQztBQUN6RSxzQkFBc0Isc0RBQUcsV0FBVywwREFBMEQsaUJBQWlCLElBQUk7QUFDbkgsT0FBTztBQUNQO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksUUFBUSxXQUFXLHVDQUFVLHlCQUF5QixZQUFZO0FBQy9GLG9CQUFvQixzREFBRyxhQUFhLG1DQUFtQztBQUN2RSxvQkFBb0Isc0RBQUcsYUFBYSxtQ0FBbUM7QUFDdkUsS0FBSztBQUNMO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0SGFuZGxlLm1qcz9lMmRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IFNJREVTIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0SGFuZGxlKHsgaGFuZGxlLCBpc0NvYXJzZSwgY2xhc3NOYW1lLCB6b29tIH0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGJyID0gKGlzQ29hcnNlID8gZWRpdG9yLm9wdGlvbnMuY29hcnNlSGFuZGxlUmFkaXVzIDogZWRpdG9yLm9wdGlvbnMuaGFuZGxlUmFkaXVzKSAvIHpvb207XG4gIGlmIChoYW5kbGUudHlwZSA9PT0gXCJjbG9uZVwiKSB7XG4gICAgY29uc3QgZnIyID0gMyAvIHpvb207XG4gICAgY29uc3QgcGF0aCA9IGBNMCwkey1mcjJ9IEEke2ZyMn0sJHtmcjJ9IDAgMCwxIDAsJHtmcjJ9YDtcbiAgICBjb25zdCBpbmRleCA9IFNJREVTLmluZGV4T2YoaGFuZGxlLmlkKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJnXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGB0bC1oYW5kbGUgdGwtaGFuZGxlX18ke2hhbmRsZS50eXBlfWAsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgY2xhc3NOYW1lOiBcInRsLWhhbmRsZV9fYmdcIiwgcjogYnIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGNsYXNzTmFtZTogXCJ0bC1oYW5kbGVfX2ZnXCIsIGQ6IHBhdGgsIHRyYW5zZm9ybTogYHJvdGF0ZSgkey05MCArIDkwICogaW5kZXh9KWAgfSlcbiAgICBdIH0pO1xuICB9XG4gIGNvbnN0IGZyID0gKGhhbmRsZS50eXBlID09PSBcImNyZWF0ZVwiICYmIGlzQ29hcnNlID8gMyA6IDQpIC8gTWF0aC5tYXgoem9vbSwgMC4yNSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoYHRsLWhhbmRsZSB0bC1oYW5kbGVfXyR7aGFuZGxlLnR5cGV9YCwgY2xhc3NOYW1lKSwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgY2xhc3NOYW1lOiBcInRsLWhhbmRsZV9fYmdcIiwgcjogYnIgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcImNpcmNsZVwiLCB7IGNsYXNzTmFtZTogXCJ0bC1oYW5kbGVfX2ZnXCIsIHI6IGZyIH0pXG4gIF0gfSk7XG59XG5leHBvcnQge1xuICBEZWZhdWx0SGFuZGxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEhhbmRsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHandles: () => (/* binding */ DefaultHandles)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultHandles = ({ children }) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-user-handles tl-overlays__item\", children });\n};\n\n//# sourceMappingURL=DefaultHandles.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QywwQkFBMEIsVUFBVTtBQUNwQyx5QkFBeUIsc0RBQUcsVUFBVSwwREFBMEQ7QUFDaEc7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGVzLm1qcz8zODBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY29uc3QgRGVmYXVsdEhhbmRsZXMgPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBcInRsLXVzZXItaGFuZGxlcyB0bC1vdmVybGF5c19faXRlbVwiLCBjaGlsZHJlbiB9KTtcbn07XG5leHBvcnQge1xuICBEZWZhdWx0SGFuZGxlc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRIYW5kbGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLoadingScreen: () => (/* binding */ DefaultLoadingScreen)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../TldrawEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n\n\n\nconst DefaultLoadingScreen = () => {\n  const { Spinner } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditorComponents)();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.LoadingScreen, { children: Spinner ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Spinner, {}) : null });\n};\n\n//# sourceMappingURL=DefaultLoadingScreen.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRMb2FkaW5nU2NyZWVuLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ2U7QUFDbUI7QUFDMUU7QUFDQSxVQUFVLFVBQVUsRUFBRSxtRkFBbUI7QUFDekMseUJBQXlCLHNEQUFHLENBQUMsNERBQWEsSUFBSSxvQ0FBb0Msc0RBQUcsWUFBWSxVQUFVO0FBQzNHO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0TG9hZGluZ1NjcmVlbi5tanM/MTliYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IExvYWRpbmdTY3JlZW4gfSBmcm9tIFwiLi4vLi4vVGxkcmF3RWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuY29uc3QgRGVmYXVsdExvYWRpbmdTY3JlZW4gPSAoKSA9PiB7XG4gIGNvbnN0IHsgU3Bpbm5lciB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChMb2FkaW5nU2NyZWVuLCB7IGNoaWxkcmVuOiBTcGlubmVyID8gLyogQF9fUFVSRV9fICovIGpzeChTcGlubmVyLCB7fSkgOiBudWxsIH0pO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRMb2FkaW5nU2NyZWVuXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdExvYWRpbmdTY3JlZW4ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultScribble: () => (/* binding */ DefaultScribble)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/getSvgPathFromPoints.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\");\n\n\n\nfunction DefaultScribble({ scribble, zoom, color, opacity, className }) {\n  if (!scribble.points.length) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: className ? classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className) : className, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"path\",\n    {\n      className: \"tl-scribble\",\n      d: (0,_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_2__.getSvgPathFromPoints)(scribble.points, false),\n      stroke: color ?? `var(--color-${scribble.color})`,\n      fill: \"none\",\n      strokeWidth: 8 / zoom,\n      opacity: opacity ?? scribble.opacity\n    }\n  ) });\n}\n\n//# sourceMappingURL=DefaultScribble.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTY3JpYmJsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNKO0FBQ3dDO0FBQzVFLDJCQUEyQiwyQ0FBMkM7QUFDdEU7QUFDQSx5QkFBeUIsc0RBQUcsVUFBVSx1QkFBdUIsdUNBQVUsd0VBQXdFLHNEQUFHO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUZBQW9CO0FBQzdCLHNDQUFzQyxlQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2NyaWJibGUubWpzP2RiYTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgZ2V0U3ZnUGF0aEZyb21Qb2ludHMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZ2V0U3ZnUGF0aEZyb21Qb2ludHMubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0U2NyaWJibGUoeyBzY3JpYmJsZSwgem9vbSwgY29sb3IsIG9wYWNpdHksIGNsYXNzTmFtZSB9KSB7XG4gIGlmICghc2NyaWJibGUucG9pbnRzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgPyBjbGFzc05hbWVzKFwidGwtb3ZlcmxheXNfX2l0ZW1cIiwgY2xhc3NOYW1lKSA6IGNsYXNzTmFtZSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgXCJwYXRoXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcInRsLXNjcmliYmxlXCIsXG4gICAgICBkOiBnZXRTdmdQYXRoRnJvbVBvaW50cyhzY3JpYmJsZS5wb2ludHMsIGZhbHNlKSxcbiAgICAgIHN0cm9rZTogY29sb3IgPz8gYHZhcigtLWNvbG9yLSR7c2NyaWJibGUuY29sb3J9KWAsXG4gICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZVdpZHRoOiA4IC8gem9vbSxcbiAgICAgIG9wYWNpdHk6IG9wYWNpdHkgPz8gc2NyaWJibGUub3BhY2l0eVxuICAgIH1cbiAgKSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRTY3JpYmJsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRTY3JpYmJsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSelectionBackground: () => (/* binding */ DefaultSelectionBackground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nfunction DefaultSelectionBackground({ bounds, rotation }) {\n  const rDiv = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__.useTransform)(rDiv, bounds.x, bounds.y, 1, rotation);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    const div = rDiv.current;\n    if (!div) return;\n    div.style.width = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, bounds.width)) + \"px\";\n    div.style.height = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, bounds.height)) + \"px\";\n  }, [bounds.width, bounds.height]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref: rDiv, className: \"tl-selection__bg\", draggable: false });\n}\n\n//# sourceMappingURL=DefaultSelectionBackground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QztBQUNUO0FBQzZCO0FBQ0E7QUFDNUQsc0NBQXNDLGtCQUFrQjtBQUN4RCxlQUFlLHlDQUFZO0FBQzNCLEVBQUUscUVBQVk7QUFDZCxFQUFFLGtEQUFxQjtBQUN2QjtBQUNBO0FBQ0Esc0JBQXNCLHFFQUFjO0FBQ3BDLHVCQUF1QixxRUFBYztBQUNyQyxHQUFHO0FBQ0gseUJBQXlCLHNEQUFHLFVBQVUsNERBQTREO0FBQ2xHO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZC5tanM/YWY1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmltcG9ydCB7IHRvRG9tUHJlY2lzaW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZCh7IGJvdW5kcywgcm90YXRpb24gfSkge1xuICBjb25zdCByRGl2ID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICB1c2VUcmFuc2Zvcm0ockRpdiwgYm91bmRzLngsIGJvdW5kcy55LCAxLCByb3RhdGlvbik7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZGl2ID0gckRpdi5jdXJyZW50O1xuICAgIGlmICghZGl2KSByZXR1cm47XG4gICAgZGl2LnN0eWxlLndpZHRoID0gdG9Eb21QcmVjaXNpb24oTWF0aC5tYXgoMSwgYm91bmRzLndpZHRoKSkgKyBcInB4XCI7XG4gICAgZGl2LnN0eWxlLmhlaWdodCA9IHRvRG9tUHJlY2lzaW9uKE1hdGgubWF4KDEsIGJvdW5kcy5oZWlnaHQpKSArIFwicHhcIjtcbiAgfSwgW2JvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodF0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IHJlZjogckRpdiwgY2xhc3NOYW1lOiBcInRsLXNlbGVjdGlvbl9fYmdcIiwgZHJhZ2dhYmxlOiBmYWxzZSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSelectionForeground: () => (/* binding */ DefaultSelectionForeground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\n\n\n\nfunction DefaultSelectionForeground({ bounds, rotation }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const onlyShape = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"only selected shape\", () => editor.getOnlySelectedShape(), [editor]);\n  const expandOutlineBy = onlyShape ? editor.getShapeUtil(onlyShape).expandSelectionOutlinePx(onlyShape) : 0;\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_5__.useTransform)(rSvg, bounds?.x, bounds?.y, 1, rotation, {\n    x: -expandOutlineBy,\n    y: -expandOutlineBy\n  });\n  bounds = bounds.clone().expandBy(expandOutlineBy).zeroFix();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"svg\",\n    {\n      ref: rSvg,\n      className: \"tl-overlays__item tl-selection__fg\",\n      \"data-testid\": \"selection-foreground\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"rect\",\n        {\n          className: classnames__WEBPACK_IMPORTED_MODULE_2__(\"tl-selection__fg__outline\"),\n          width: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.toDomPrecision)(bounds.width),\n          height: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.toDomPrecision)(bounds.height)\n        }\n      )\n    }\n  );\n}\n\n//# sourceMappingURL=DefaultSelectionForeground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3QztBQUNPO0FBQ1g7QUFDTDtBQUN1QjtBQUNNO0FBQ0E7QUFDNUQsc0NBQXNDLGtCQUFrQjtBQUN4RCxpQkFBaUIsK0RBQVM7QUFDMUIsZUFBZSw2Q0FBTTtBQUNyQixvQkFBb0IsNkRBQVE7QUFDNUI7QUFDQSxFQUFFLHFFQUFZO0FBQ2Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5QixzREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNEQUFHO0FBQ25DO0FBQ0E7QUFDQSxxQkFBcUIsdUNBQVU7QUFDL0IsaUJBQWlCLHFFQUFjO0FBQy9CLGtCQUFrQixxRUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZC5tanM/Y2I4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlVHJhbnNmb3JtLm1qc1wiO1xuaW1wb3J0IHsgdG9Eb21QcmVjaXNpb24gfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmZ1bmN0aW9uIERlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kKHsgYm91bmRzLCByb3RhdGlvbiB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCByU3ZnID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBvbmx5U2hhcGUgPSB1c2VWYWx1ZShcIm9ubHkgc2VsZWN0ZWQgc2hhcGVcIiwgKCkgPT4gZWRpdG9yLmdldE9ubHlTZWxlY3RlZFNoYXBlKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgZXhwYW5kT3V0bGluZUJ5ID0gb25seVNoYXBlID8gZWRpdG9yLmdldFNoYXBlVXRpbChvbmx5U2hhcGUpLmV4cGFuZFNlbGVjdGlvbk91dGxpbmVQeChvbmx5U2hhcGUpIDogMDtcbiAgdXNlVHJhbnNmb3JtKHJTdmcsIGJvdW5kcz8ueCwgYm91bmRzPy55LCAxLCByb3RhdGlvbiwge1xuICAgIHg6IC1leHBhbmRPdXRsaW5lQnksXG4gICAgeTogLWV4cGFuZE91dGxpbmVCeVxuICB9KTtcbiAgYm91bmRzID0gYm91bmRzLmNsb25lKCkuZXhwYW5kQnkoZXhwYW5kT3V0bGluZUJ5KS56ZXJvRml4KCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwic3ZnXCIsXG4gICAge1xuICAgICAgcmVmOiByU3ZnLFxuICAgICAgY2xhc3NOYW1lOiBcInRsLW92ZXJsYXlzX19pdGVtIHRsLXNlbGVjdGlvbl9fZmdcIixcbiAgICAgIFwiZGF0YS10ZXN0aWRcIjogXCJzZWxlY3Rpb24tZm9yZWdyb3VuZFwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgIFwicmVjdFwiLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtc2VsZWN0aW9uX19mZ19fb3V0bGluZVwiKSxcbiAgICAgICAgICB3aWR0aDogdG9Eb21QcmVjaXNpb24oYm91bmRzLndpZHRoKSxcbiAgICAgICAgICBoZWlnaHQ6IHRvRG9tUHJlY2lzaW9uKGJvdW5kcy5oZWlnaHQpXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICk7XG59XG5leHBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeErrorFallback: () => (/* binding */ DefaultShapeErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultShapeErrorFallback = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-shape-error-boundary\" });\n};\n\n//# sourceMappingURL=DefaultShapeErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUVycm9yRmFsbGJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBQ3hDO0FBQ0EseUJBQXlCLHNEQUFHLFVBQVUsc0NBQXNDO0FBQzVFO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVFcnJvckZhbGxiYWNrLm1qcz8yODgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY29uc3QgRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjayA9ICgpID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtc2hhcGUtZXJyb3ItYm91bmRhcnlcIiB9KTtcbn07XG5leHBvcnQge1xuICBEZWZhdWx0U2hhcGVFcnJvckZhbGxiYWNrXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjay5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeIndicator: () => (/* binding */ DefaultShapeIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\nconst EvenInnererIndicator = ({ shape, util }) => {\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n    \"Indicator: \" + shape.type,\n    () => (\n      // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n      // calling the render method with stale data.\n      (util.indicator(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n    )\n  );\n};\nconst InnerIndicator = ({ editor, id }) => {\n  const shape = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"shape for indicator\", () => editor.store.get(id), [editor, id]);\n  const { ShapeIndicatorErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditorComponents)();\n  if (!shape || shape.isLocked) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__.OptionalErrorBoundary,\n    {\n      fallback: ShapeIndicatorErrorFallback,\n      onError: (error) => editor.annotateError(error, { origin: \"react.shapeIndicator\", willCrashApp: false }),\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EvenInnererIndicator, { shape, util: editor.getShapeUtil(shape) }, shape.id)\n    }\n  );\n};\nconst DefaultShapeIndicator = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function DefaultShapeIndicator2({\n  shapeId,\n  className,\n  color,\n  hidden,\n  opacity\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const rIndicator = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"indicator transform\",\n    () => {\n      const elm = rIndicator.current;\n      if (!elm) return;\n      const pageTransform = editor.getShapePageTransform(shapeId);\n      if (!pageTransform) return;\n      elm.style.setProperty(\"transform\", pageTransform.toCssString());\n    },\n    [editor, shapeId]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    const elm = rIndicator.current;\n    if (!elm) return;\n    elm.style.setProperty(\"display\", hidden ? \"none\" : \"block\");\n  }, [hidden]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { ref: rIndicator, className: classnames__WEBPACK_IMPORTED_MODULE_2__(\"tl-overlays__item\", className), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className: \"tl-shape-indicator\", stroke: color ?? \"var(--color-selected)\", opacity, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerIndicator, { editor, id: shapeId }) }) });\n});\n\n//# sourceMappingURL=DefaultShapeIndicator.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0M7QUFDMEM7QUFDOUM7QUFDa0I7QUFDQTtBQUNvQjtBQUNiO0FBQzdELGdDQUFnQyxhQUFhO0FBQzdDLFNBQVMscUVBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsWUFBWTtBQUN0QyxnQkFBZ0IsNkRBQVE7QUFDeEIsVUFBVSw4QkFBOEIsRUFBRSxtRkFBbUI7QUFDN0Q7QUFDQSx5QkFBeUIsc0RBQUc7QUFDNUIsSUFBSSxxRUFBcUI7QUFDekI7QUFDQTtBQUNBLHdEQUF3RCxxREFBcUQ7QUFDN0csZ0NBQWdDLHNEQUFHLHlCQUF5Qix5Q0FBeUM7QUFDckc7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJDQUFJO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCLHFCQUFxQiw2Q0FBTTtBQUMzQixFQUFFLG9FQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsc0RBQUcsVUFBVSw0QkFBNEIsdUNBQVUsNERBQTRELHNEQUFHLFFBQVEsOEdBQThHLHNEQUFHLG1CQUFtQixxQkFBcUIsR0FBRyxHQUFHO0FBQ2xULENBQUM7QUFHQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvci5tanM/MTU5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVF1aWNrUmVhY3RvciwgdXNlU3RhdGVUcmFja2luZywgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IG1lbW8sIHVzZUxheW91dEVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuaW1wb3J0IHsgT3B0aW9uYWxFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4uL0Vycm9yQm91bmRhcnkubWpzXCI7XG5jb25zdCBFdmVuSW5uZXJlckluZGljYXRvciA9ICh7IHNoYXBlLCB1dGlsIH0pID0+IHtcbiAgcmV0dXJuIHVzZVN0YXRlVHJhY2tpbmcoXG4gICAgXCJJbmRpY2F0b3I6IFwiICsgc2hhcGUudHlwZSxcbiAgICAoKSA9PiAoXG4gICAgICAvLyBhbHdheXMgZmV0Y2ggdGhlIGxhdGVzdCBzaGFwZSBmcm9tIHRoZSBzdG9yZSBldmVuIGlmIHRoZSBwcm9wcy9tZXRhIGhhdmUgbm90IGNoYW5nZWQsIHRvIGF2b2lkXG4gICAgICAvLyBjYWxsaW5nIHRoZSByZW5kZXIgbWV0aG9kIHdpdGggc3RhbGUgZGF0YS5cbiAgICAgICh1dGlsLmluZGljYXRvcih1dGlsLmVkaXRvci5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShzaGFwZS5pZCkpKVxuICAgIClcbiAgKTtcbn07XG5jb25zdCBJbm5lckluZGljYXRvciA9ICh7IGVkaXRvciwgaWQgfSkgPT4ge1xuICBjb25zdCBzaGFwZSA9IHVzZVZhbHVlKFwic2hhcGUgZm9yIGluZGljYXRvclwiLCAoKSA9PiBlZGl0b3Iuc3RvcmUuZ2V0KGlkKSwgW2VkaXRvciwgaWRdKTtcbiAgY29uc3QgeyBTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2sgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCFzaGFwZSB8fCBzaGFwZS5pc0xvY2tlZCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIE9wdGlvbmFsRXJyb3JCb3VuZGFyeSxcbiAgICB7XG4gICAgICBmYWxsYmFjazogU2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrLFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiBlZGl0b3IuYW5ub3RhdGVFcnJvcihlcnJvciwgeyBvcmlnaW46IFwicmVhY3Quc2hhcGVJbmRpY2F0b3JcIiwgd2lsbENyYXNoQXBwOiBmYWxzZSB9KSxcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KEV2ZW5Jbm5lcmVySW5kaWNhdG9yLCB7IHNoYXBlLCB1dGlsOiBlZGl0b3IuZ2V0U2hhcGVVdGlsKHNoYXBlKSB9LCBzaGFwZS5pZClcbiAgICB9XG4gICk7XG59O1xuY29uc3QgRGVmYXVsdFNoYXBlSW5kaWNhdG9yID0gbWVtbyhmdW5jdGlvbiBEZWZhdWx0U2hhcGVJbmRpY2F0b3IyKHtcbiAgc2hhcGVJZCxcbiAgY2xhc3NOYW1lLFxuICBjb2xvcixcbiAgaGlkZGVuLFxuICBvcGFjaXR5XG59KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBySW5kaWNhdG9yID0gdXNlUmVmKG51bGwpO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJpbmRpY2F0b3IgdHJhbnNmb3JtXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgZWxtID0gckluZGljYXRvci5jdXJyZW50O1xuICAgICAgaWYgKCFlbG0pIHJldHVybjtcbiAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWQpO1xuICAgICAgaWYgKCFwYWdlVHJhbnNmb3JtKSByZXR1cm47XG4gICAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJ0cmFuc2Zvcm1cIiwgcGFnZVRyYW5zZm9ybS50b0Nzc1N0cmluZygpKTtcbiAgICB9LFxuICAgIFtlZGl0b3IsIHNoYXBlSWRdXG4gICk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWxtID0gckluZGljYXRvci5jdXJyZW50O1xuICAgIGlmICghZWxtKSByZXR1cm47XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBoaWRkZW4gPyBcIm5vbmVcIiA6IFwiYmxvY2tcIik7XG4gIH0sIFtoaWRkZW5dKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyByZWY6IHJJbmRpY2F0b3IsIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW92ZXJsYXlzX19pdGVtXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IGNsYXNzTmFtZTogXCJ0bC1zaGFwZS1pbmRpY2F0b3JcIiwgc3Ryb2tlOiBjb2xvciA/PyBcInZhcigtLWNvbG9yLXNlbGVjdGVkKVwiLCBvcGFjaXR5LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChJbm5lckluZGljYXRvciwgeyBlZGl0b3IsIGlkOiBzaGFwZUlkIH0pIH0pIH0pO1xufSk7XG5leHBvcnQge1xuICBEZWZhdWx0U2hhcGVJbmRpY2F0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U2hhcGVJbmRpY2F0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeIndicatorErrorFallback: () => (/* binding */ DefaultShapeIndicatorErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultShapeIndicatorErrorFallback = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { cx: 4, cy: 4, r: 8, strokeWidth: \"1\", stroke: \"red\" });\n};\n\n//# sourceMappingURL=DefaultShapeIndicatorErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBQ3hDO0FBQ0EseUJBQXlCLHNEQUFHLGFBQWEscURBQXFEO0FBQzlGO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrLm1qcz83Y2IzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuY29uc3QgRGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjayA9ICgpID0+IHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJjaXJjbGVcIiwgeyBjeDogNCwgY3k6IDQsIHI6IDgsIHN0cm9rZVdpZHRoOiBcIjFcIiwgc3Ryb2tlOiBcInJlZFwiIH0pO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2tcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicators.mjs":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicators.mjs ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeIndicators: () => (/* binding */ DefaultShapeIndicators)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n\n\n\n\n\nconst DefaultShapeIndicators = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function DefaultShapeIndicators2() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const rPreviousSelectedShapeIds = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(/* @__PURE__ */ new Set());\n  const idsToDisplay = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"should display selected ids\",\n    () => {\n      const prev = rPreviousSelectedShapeIds.current;\n      const next = /* @__PURE__ */ new Set();\n      if (\n        // We only show indicators when in the following states...\n        editor.isInAny(\n          \"select.idle\",\n          \"select.brushing\",\n          \"select.scribble_brushing\",\n          \"select.editing_shape\",\n          \"select.pointing_shape\",\n          \"select.pointing_selection\",\n          \"select.pointing_handle\"\n        ) && // ...but we hide indicators when we've just changed a style (so that the user can see the change)\n        !editor.getInstanceState().isChangingStyle\n      ) {\n        const selected = editor.getSelectedShapeIds();\n        for (const id of selected) {\n          next.add(id);\n        }\n        if (editor.isInAny(\"select.idle\", \"select.editing_shape\")) {\n          const instanceState = editor.getInstanceState();\n          if (instanceState.isHoveringCanvas && !instanceState.isCoarsePointer) {\n            const hovered = editor.getHoveredShapeId();\n            if (hovered) next.add(hovered);\n          }\n        }\n      }\n      if (prev.size !== next.size) {\n        rPreviousSelectedShapeIds.current = next;\n        return next;\n      }\n      for (const id of next) {\n        if (!prev.has(id)) {\n          rPreviousSelectedShapeIds.current = next;\n          return next;\n        }\n      }\n      return prev;\n    },\n    [editor]\n  );\n  const renderingShapes = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  const { ShapeIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditorComponents)();\n  if (!ShapeIndicator) return null;\n  return renderingShapes.map(({ id }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicator, { shapeId: id, hidden: !idsToDisplay.has(id) }, id + \"_indicator\"));\n});\n\n//# sourceMappingURL=DefaultShapeIndicators.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvcnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3QztBQUNPO0FBQ1Y7QUFDaUI7QUFDb0I7QUFDMUUsK0JBQStCLDJDQUFJO0FBQ25DLGlCQUFpQiwrREFBUztBQUMxQixvQ0FBb0MsNkNBQU07QUFDMUMsdUJBQXVCLDZEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwwQkFBMEIsNkRBQVE7QUFDbEMsVUFBVSxpQkFBaUIsRUFBRSxtRkFBbUI7QUFDaEQ7QUFDQSxnQ0FBZ0MsSUFBSSxxQkFBcUIsc0RBQUcsbUJBQW1CLDRDQUE0QztBQUMzSCxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3JzLm1qcz82NTY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgbWVtbywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuY29uc3QgRGVmYXVsdFNoYXBlSW5kaWNhdG9ycyA9IG1lbW8oZnVuY3Rpb24gRGVmYXVsdFNoYXBlSW5kaWNhdG9yczIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCByUHJldmlvdXNTZWxlY3RlZFNoYXBlSWRzID0gdXNlUmVmKC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICBjb25zdCBpZHNUb0Rpc3BsYXkgPSB1c2VWYWx1ZShcbiAgICBcInNob3VsZCBkaXNwbGF5IHNlbGVjdGVkIGlkc1wiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHByZXYgPSByUHJldmlvdXNTZWxlY3RlZFNoYXBlSWRzLmN1cnJlbnQ7XG4gICAgICBjb25zdCBuZXh0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGlmIChcbiAgICAgICAgLy8gV2Ugb25seSBzaG93IGluZGljYXRvcnMgd2hlbiBpbiB0aGUgZm9sbG93aW5nIHN0YXRlcy4uLlxuICAgICAgICBlZGl0b3IuaXNJbkFueShcbiAgICAgICAgICBcInNlbGVjdC5pZGxlXCIsXG4gICAgICAgICAgXCJzZWxlY3QuYnJ1c2hpbmdcIixcbiAgICAgICAgICBcInNlbGVjdC5zY3JpYmJsZV9icnVzaGluZ1wiLFxuICAgICAgICAgIFwic2VsZWN0LmVkaXRpbmdfc2hhcGVcIixcbiAgICAgICAgICBcInNlbGVjdC5wb2ludGluZ19zaGFwZVwiLFxuICAgICAgICAgIFwic2VsZWN0LnBvaW50aW5nX3NlbGVjdGlvblwiLFxuICAgICAgICAgIFwic2VsZWN0LnBvaW50aW5nX2hhbmRsZVwiXG4gICAgICAgICkgJiYgLy8gLi4uYnV0IHdlIGhpZGUgaW5kaWNhdG9ycyB3aGVuIHdlJ3ZlIGp1c3QgY2hhbmdlZCBhIHN0eWxlIChzbyB0aGF0IHRoZSB1c2VyIGNhbiBzZWUgdGhlIGNoYW5nZSlcbiAgICAgICAgIWVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNDaGFuZ2luZ1N0eWxlXG4gICAgICApIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIHNlbGVjdGVkKSB7XG4gICAgICAgICAgbmV4dC5hZGQoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlZGl0b3IuaXNJbkFueShcInNlbGVjdC5pZGxlXCIsIFwic2VsZWN0LmVkaXRpbmdfc2hhcGVcIikpIHtcbiAgICAgICAgICBjb25zdCBpbnN0YW5jZVN0YXRlID0gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKTtcbiAgICAgICAgICBpZiAoaW5zdGFuY2VTdGF0ZS5pc0hvdmVyaW5nQ2FudmFzICYmICFpbnN0YW5jZVN0YXRlLmlzQ29hcnNlUG9pbnRlcikge1xuICAgICAgICAgICAgY29uc3QgaG92ZXJlZCA9IGVkaXRvci5nZXRIb3ZlcmVkU2hhcGVJZCgpO1xuICAgICAgICAgICAgaWYgKGhvdmVyZWQpIG5leHQuYWRkKGhvdmVyZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHByZXYuc2l6ZSAhPT0gbmV4dC5zaXplKSB7XG4gICAgICAgIHJQcmV2aW91c1NlbGVjdGVkU2hhcGVJZHMuY3VycmVudCA9IG5leHQ7XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpZCBvZiBuZXh0KSB7XG4gICAgICAgIGlmICghcHJldi5oYXMoaWQpKSB7XG4gICAgICAgICAgclByZXZpb3VzU2VsZWN0ZWRTaGFwZUlkcy5jdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICBjb25zdCByZW5kZXJpbmdTaGFwZXMgPSB1c2VWYWx1ZShcInJlbmRlcmluZyBzaGFwZXNcIiwgKCkgPT4gZWRpdG9yLmdldFJlbmRlcmluZ1NoYXBlcygpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IHsgU2hhcGVJbmRpY2F0b3IgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCFTaGFwZUluZGljYXRvcikgcmV0dXJuIG51bGw7XG4gIHJldHVybiByZW5kZXJpbmdTaGFwZXMubWFwKCh7IGlkIH0pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVJbmRpY2F0b3IsIHsgc2hhcGVJZDogaWQsIGhpZGRlbjogIWlkc1RvRGlzcGxheS5oYXMoaWQpIH0sIGlkICsgXCJfaW5kaWNhdG9yXCIpKTtcbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdFNoYXBlSW5kaWNhdG9yc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRTaGFwZUluZGljYXRvcnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicators.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSnapIndicator: () => (/* binding */ DefaultSnapIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nfunction PointsSnapIndicator({ points, zoom }) {\n  const l = 2.5 / zoom;\n  const minX = points.reduce((acc, p) => Math.min(acc, p.x), Infinity);\n  const maxX = points.reduce((acc, p) => Math.max(acc, p.x), -Infinity);\n  const minY = points.reduce((acc, p) => Math.min(acc, p.y), Infinity);\n  const maxY = points.reduce((acc, p) => Math.max(acc, p.y), -Infinity);\n  const useNWtoSEdireciton = points.some((p) => p.x === minX && p.y === minY);\n  let firstX, firstY, secondX, secondY;\n  if (useNWtoSEdireciton) {\n    firstX = minX;\n    firstY = minY;\n    secondX = maxX;\n    secondY = maxY;\n  } else {\n    firstX = minX;\n    firstY = maxY;\n    secondX = maxX;\n    secondY = minY;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: \"tl-snap-indicator\", stroke: \"lime\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: firstX, y1: firstY, x2: secondX, y2: secondY }),\n    points.map((p, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: `translate(${p.x},${p.y})`, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"path\",\n      {\n        className: \"tl-snap-point\",\n        d: `M ${-l},${-l} L ${l},${l} M ${-l},${l} L ${l},${-l}`\n      }\n    ) }, i))\n  ] });\n}\nfunction GapsSnapIndicator({ gaps, direction, zoom }) {\n  const l = 3.5 / zoom;\n  let edgeIntersection = [-Infinity, Infinity];\n  let nextEdgeIntersection = null;\n  const horizontal = direction === \"horizontal\";\n  for (const gap of gaps) {\n    nextEdgeIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.rangeIntersection)(\n      edgeIntersection[0],\n      edgeIntersection[1],\n      horizontal ? gap.startEdge[0].y : gap.startEdge[0].x,\n      horizontal ? gap.startEdge[1].y : gap.startEdge[1].x\n    );\n    if (nextEdgeIntersection) {\n      edgeIntersection = nextEdgeIntersection;\n    } else {\n      continue;\n    }\n    nextEdgeIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.rangeIntersection)(\n      edgeIntersection[0],\n      edgeIntersection[1],\n      horizontal ? gap.endEdge[0].y : gap.endEdge[0].x,\n      horizontal ? gap.endEdge[1].y : gap.endEdge[1].x\n    );\n    if (nextEdgeIntersection) {\n      edgeIntersection = nextEdgeIntersection;\n    } else {\n      continue;\n    }\n  }\n  if (edgeIntersection === null) {\n    return null;\n  }\n  const midPoint = (edgeIntersection[0] + edgeIntersection[1]) / 2;\n  return (\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className: \"tl-snap-indicator\", stroke: \"cyan\", children: gaps.map(({ startEdge, endEdge }, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: horizontal ? (\n      // horizontal gap\n      /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: startEdge[0].x,\n            y1: midPoint - 2 * l,\n            x2: startEdge[1].x,\n            y2: midPoint + 2 * l\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: endEdge[0].x,\n            y1: midPoint - 2 * l,\n            x2: endEdge[1].x,\n            y2: midPoint + 2 * l\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: startEdge[0].x, y1: midPoint, x2: endEdge[0].x, y2: midPoint }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: (startEdge[0].x + endEdge[0].x) / 2,\n            y1: midPoint - l,\n            x2: (startEdge[0].x + endEdge[0].x) / 2,\n            y2: midPoint + l\n          }\n        )\n      ] }))\n    ) : (\n      // vertical gap\n      /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - 2 * l,\n            y1: startEdge[0].y,\n            x2: midPoint + 2 * l,\n            y2: startEdge[1].y\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - 2 * l,\n            y1: endEdge[0].y,\n            x2: midPoint + 2 * l,\n            y2: endEdge[1].y\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: midPoint, y1: startEdge[0].y, x2: midPoint, y2: endEdge[0].y }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - l,\n            y1: (startEdge[0].y + endEdge[0].y) / 2,\n            x2: midPoint + l,\n            y2: (startEdge[0].y + endEdge[0].y) / 2\n          }\n        )\n      ] }))\n    ) }, i)) })\n  );\n}\nfunction DefaultSnapIndicator({ className, line, zoom }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: line.type === \"points\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PointsSnapIndicator, { ...line, zoom }) : line.type === \"gaps\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GapsSnapIndicator, { ...line, zoom }) : null });\n}\n\n//# sourceMappingURL=DefaultSnapIndictor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTbmFwSW5kaWN0b3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ3BCO0FBQ0w7QUFDZ0M7QUFDL0QsK0JBQStCLGNBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksUUFBUTtBQUNyQyxvQkFBb0Isc0RBQUcsV0FBVyxrREFBa0Q7QUFDcEYseUNBQXlDLHNEQUFHLFFBQVEsd0JBQXdCLElBQUksR0FBRyxJQUFJLDhCQUE4QixzREFBRztBQUN4SDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksRUFBRSxHQUFHLEdBQUc7QUFDL0Q7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHLFFBQVEsc0VBQXNFLG9CQUFvQix3QkFBd0Isc0RBQUcsQ0FBQywyQ0FBYyxJQUFJO0FBQ3ZLO0FBQ0EsdUJBQXVCLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUN4Qyx3QkFBd0Isc0RBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHLFdBQVcsa0VBQWtFO0FBQ3hHLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQ3hDLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQUcsV0FBVyxrRUFBa0U7QUFDeEcsd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTyxPQUFPO0FBQ2Q7QUFDQTtBQUNBLGdDQUFnQyx1QkFBdUI7QUFDdkQseUJBQXlCLHNEQUFHLFVBQVUsV0FBVyx1Q0FBVSxxRkFBcUYsc0RBQUcsd0JBQXdCLGVBQWUsMkNBQTJDLHNEQUFHLHNCQUFzQixlQUFlLFVBQVU7QUFDdlI7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTbmFwSW5kaWN0b3IubWpzP2I0M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcmFuZ2VJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmZ1bmN0aW9uIFBvaW50c1NuYXBJbmRpY2F0b3IoeyBwb2ludHMsIHpvb20gfSkge1xuICBjb25zdCBsID0gMi41IC8gem9vbTtcbiAgY29uc3QgbWluWCA9IHBvaW50cy5yZWR1Y2UoKGFjYywgcCkgPT4gTWF0aC5taW4oYWNjLCBwLngpLCBJbmZpbml0eSk7XG4gIGNvbnN0IG1heFggPSBwb2ludHMucmVkdWNlKChhY2MsIHApID0+IE1hdGgubWF4KGFjYywgcC54KSwgLUluZmluaXR5KTtcbiAgY29uc3QgbWluWSA9IHBvaW50cy5yZWR1Y2UoKGFjYywgcCkgPT4gTWF0aC5taW4oYWNjLCBwLnkpLCBJbmZpbml0eSk7XG4gIGNvbnN0IG1heFkgPSBwb2ludHMucmVkdWNlKChhY2MsIHApID0+IE1hdGgubWF4KGFjYywgcC55KSwgLUluZmluaXR5KTtcbiAgY29uc3QgdXNlTld0b1NFZGlyZWNpdG9uID0gcG9pbnRzLnNvbWUoKHApID0+IHAueCA9PT0gbWluWCAmJiBwLnkgPT09IG1pblkpO1xuICBsZXQgZmlyc3RYLCBmaXJzdFksIHNlY29uZFgsIHNlY29uZFk7XG4gIGlmICh1c2VOV3RvU0VkaXJlY2l0b24pIHtcbiAgICBmaXJzdFggPSBtaW5YO1xuICAgIGZpcnN0WSA9IG1pblk7XG4gICAgc2Vjb25kWCA9IG1heFg7XG4gICAgc2Vjb25kWSA9IG1heFk7XG4gIH0gZWxzZSB7XG4gICAgZmlyc3RYID0gbWluWDtcbiAgICBmaXJzdFkgPSBtYXhZO1xuICAgIHNlY29uZFggPSBtYXhYO1xuICAgIHNlY29uZFkgPSBtaW5ZO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBjbGFzc05hbWU6IFwidGwtc25hcC1pbmRpY2F0b3JcIiwgc3Ryb2tlOiBcImxpbWVcIiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwibGluZVwiLCB7IHgxOiBmaXJzdFgsIHkxOiBmaXJzdFksIHgyOiBzZWNvbmRYLCB5Mjogc2Vjb25kWSB9KSxcbiAgICBwb2ludHMubWFwKChwLCBpKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3AueH0sJHtwLnl9KWAsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgXCJwYXRoXCIsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1zbmFwLXBvaW50XCIsXG4gICAgICAgIGQ6IGBNICR7LWx9LCR7LWx9IEwgJHtsfSwke2x9IE0gJHstbH0sJHtsfSBMICR7bH0sJHstbH1gXG4gICAgICB9XG4gICAgKSB9LCBpKSlcbiAgXSB9KTtcbn1cbmZ1bmN0aW9uIEdhcHNTbmFwSW5kaWNhdG9yKHsgZ2FwcywgZGlyZWN0aW9uLCB6b29tIH0pIHtcbiAgY29uc3QgbCA9IDMuNSAvIHpvb207XG4gIGxldCBlZGdlSW50ZXJzZWN0aW9uID0gWy1JbmZpbml0eSwgSW5maW5pdHldO1xuICBsZXQgbmV4dEVkZ2VJbnRlcnNlY3Rpb24gPSBudWxsO1xuICBjb25zdCBob3Jpem9udGFsID0gZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIjtcbiAgZm9yIChjb25zdCBnYXAgb2YgZ2Fwcykge1xuICAgIG5leHRFZGdlSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICBlZGdlSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgZWRnZUludGVyc2VjdGlvblsxXSxcbiAgICAgIGhvcml6b250YWwgPyBnYXAuc3RhcnRFZGdlWzBdLnkgOiBnYXAuc3RhcnRFZGdlWzBdLngsXG4gICAgICBob3Jpem9udGFsID8gZ2FwLnN0YXJ0RWRnZVsxXS55IDogZ2FwLnN0YXJ0RWRnZVsxXS54XG4gICAgKTtcbiAgICBpZiAobmV4dEVkZ2VJbnRlcnNlY3Rpb24pIHtcbiAgICAgIGVkZ2VJbnRlcnNlY3Rpb24gPSBuZXh0RWRnZUludGVyc2VjdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG5leHRFZGdlSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICBlZGdlSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgZWRnZUludGVyc2VjdGlvblsxXSxcbiAgICAgIGhvcml6b250YWwgPyBnYXAuZW5kRWRnZVswXS55IDogZ2FwLmVuZEVkZ2VbMF0ueCxcbiAgICAgIGhvcml6b250YWwgPyBnYXAuZW5kRWRnZVsxXS55IDogZ2FwLmVuZEVkZ2VbMV0ueFxuICAgICk7XG4gICAgaWYgKG5leHRFZGdlSW50ZXJzZWN0aW9uKSB7XG4gICAgICBlZGdlSW50ZXJzZWN0aW9uID0gbmV4dEVkZ2VJbnRlcnNlY3Rpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgfVxuICBpZiAoZWRnZUludGVyc2VjdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IG1pZFBvaW50ID0gKGVkZ2VJbnRlcnNlY3Rpb25bMF0gKyBlZGdlSW50ZXJzZWN0aW9uWzFdKSAvIDI7XG4gIHJldHVybiAoXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcImdcIiwgeyBjbGFzc05hbWU6IFwidGwtc25hcC1pbmRpY2F0b3JcIiwgc3Ryb2tlOiBcImN5YW5cIiwgY2hpbGRyZW46IGdhcHMubWFwKCh7IHN0YXJ0RWRnZSwgZW5kRWRnZSB9LCBpKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFJlYWN0LkZyYWdtZW50LCB7IGNoaWxkcmVuOiBob3Jpem9udGFsID8gKFxuICAgICAgLy8gaG9yaXpvbnRhbCBnYXBcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIFwibGluZVwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHgxOiBzdGFydEVkZ2VbMF0ueCxcbiAgICAgICAgICAgIHkxOiBtaWRQb2ludCAtIDIgKiBsLFxuICAgICAgICAgICAgeDI6IHN0YXJ0RWRnZVsxXS54LFxuICAgICAgICAgICAgeTI6IG1pZFBvaW50ICsgMiAqIGxcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDE6IGVuZEVkZ2VbMF0ueCxcbiAgICAgICAgICAgIHkxOiBtaWRQb2ludCAtIDIgKiBsLFxuICAgICAgICAgICAgeDI6IGVuZEVkZ2VbMV0ueCxcbiAgICAgICAgICAgIHkyOiBtaWRQb2ludCArIDIgKiBsXG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwibGluZVwiLCB7IHgxOiBzdGFydEVkZ2VbMF0ueCwgeTE6IG1pZFBvaW50LCB4MjogZW5kRWRnZVswXS54LCB5MjogbWlkUG9pbnQgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDE6IChzdGFydEVkZ2VbMF0ueCArIGVuZEVkZ2VbMF0ueCkgLyAyLFxuICAgICAgICAgICAgeTE6IG1pZFBvaW50IC0gbCxcbiAgICAgICAgICAgIHgyOiAoc3RhcnRFZGdlWzBdLnggKyBlbmRFZGdlWzBdLngpIC8gMixcbiAgICAgICAgICAgIHkyOiBtaWRQb2ludCArIGxcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIF0gfSkpXG4gICAgKSA6IChcbiAgICAgIC8vIHZlcnRpY2FsIGdhcFxuICAgICAgLyogQF9fUFVSRV9fICovIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDE6IG1pZFBvaW50IC0gMiAqIGwsXG4gICAgICAgICAgICB5MTogc3RhcnRFZGdlWzBdLnksXG4gICAgICAgICAgICB4MjogbWlkUG9pbnQgKyAyICogbCxcbiAgICAgICAgICAgIHkyOiBzdGFydEVkZ2VbMV0ueVxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBcImxpbmVcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4MTogbWlkUG9pbnQgLSAyICogbCxcbiAgICAgICAgICAgIHkxOiBlbmRFZGdlWzBdLnksXG4gICAgICAgICAgICB4MjogbWlkUG9pbnQgKyAyICogbCxcbiAgICAgICAgICAgIHkyOiBlbmRFZGdlWzFdLnlcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJsaW5lXCIsIHsgeDE6IG1pZFBvaW50LCB5MTogc3RhcnRFZGdlWzBdLnksIHgyOiBtaWRQb2ludCwgeTI6IGVuZEVkZ2VbMF0ueSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBcImxpbmVcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4MTogbWlkUG9pbnQgLSBsLFxuICAgICAgICAgICAgeTE6IChzdGFydEVkZ2VbMF0ueSArIGVuZEVkZ2VbMF0ueSkgLyAyLFxuICAgICAgICAgICAgeDI6IG1pZFBvaW50ICsgbCxcbiAgICAgICAgICAgIHkyOiAoc3RhcnRFZGdlWzBdLnkgKyBlbmRFZGdlWzBdLnkpIC8gMlxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgXSB9KSlcbiAgICApIH0sIGkpKSB9KVxuICApO1xufVxuZnVuY3Rpb24gRGVmYXVsdFNuYXBJbmRpY2F0b3IoeyBjbGFzc05hbWUsIGxpbmUsIHpvb20gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW92ZXJsYXlzX19pdGVtXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBsaW5lLnR5cGUgPT09IFwicG9pbnRzXCIgPyAvKiBAX19QVVJFX18gKi8ganN4KFBvaW50c1NuYXBJbmRpY2F0b3IsIHsgLi4ubGluZSwgem9vbSB9KSA6IGxpbmUudHlwZSA9PT0gXCJnYXBzXCIgPyAvKiBAX19QVVJFX18gKi8ganN4KEdhcHNTbmFwSW5kaWNhdG9yLCB7IC4uLmxpbmUsIHpvb20gfSkgOiBudWxsIH0pO1xufVxuZXhwb3J0IHtcbiAgRGVmYXVsdFNuYXBJbmRpY2F0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U25hcEluZGljdG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSpinner: () => (/* binding */ DefaultSpinner)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nfunction DefaultSpinner() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { width: 16, height: 16, viewBox: \"0 0 16 16\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { strokeWidth: 2, fill: \"none\", fillRule: \"evenodd\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { strokeOpacity: 0.25, cx: 8, cy: 8, r: 7, stroke: \"currentColor\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { strokeLinecap: \"round\", d: \"M15 8c0-4.5-4.5-7-7-7\", stroke: \"currentColor\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"animateTransform\",\n      {\n        attributeName: \"transform\",\n        type: \"rotate\",\n        from: \"0 8 8\",\n        to: \"360 8 8\",\n        dur: \"1s\",\n        repeatCount: \"indefinite\"\n      }\n    ) })\n  ] }) });\n}\n\n//# sourceMappingURL=DefaultSpinner.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTcGlubmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUM5QztBQUNBLHlCQUF5QixzREFBRyxVQUFVLHVFQUF1RSx1REFBSSxRQUFRO0FBQ3pILG9CQUFvQixzREFBRyxhQUFhLGlFQUFpRTtBQUNyRyxvQkFBb0Isc0RBQUcsV0FBVyxzR0FBc0csc0RBQUc7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUssR0FBRztBQUNSO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U3Bpbm5lci5tanM/MmZkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIERlZmF1bHRTcGlubmVyKCkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7IHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgdmlld0JveDogXCIwIDAgMTYgMTZcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZ1wiLCB7IHN0cm9rZVdpZHRoOiAyLCBmaWxsOiBcIm5vbmVcIiwgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJjaXJjbGVcIiwgeyBzdHJva2VPcGFjaXR5OiAwLjI1LCBjeDogOCwgY3k6IDgsIHI6IDcsIHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgZDogXCJNMTUgOGMwLTQuNS00LjUtNy03LTdcIiwgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiYW5pbWF0ZVRyYW5zZm9ybVwiLFxuICAgICAge1xuICAgICAgICBhdHRyaWJ1dGVOYW1lOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICB0eXBlOiBcInJvdGF0ZVwiLFxuICAgICAgICBmcm9tOiBcIjAgOCA4XCIsXG4gICAgICAgIHRvOiBcIjM2MCA4IDhcIixcbiAgICAgICAgZHVyOiBcIjFzXCIsXG4gICAgICAgIHJlcGVhdENvdW50OiBcImluZGVmaW5pdGVcIlxuICAgICAgfVxuICAgICkgfSlcbiAgXSB9KSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRTcGlubmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNwaW5uZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSvgDefs: () => (/* binding */ DefaultSvgDefs)\n/* harmony export */ });\nconst DefaultSvgDefs = () => {\n  return null;\n};\n\n//# sourceMappingURL=DefaultSvgDefs.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTdmdEZWZzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U3ZnRGVmcy5tanM/OTkzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEZWZhdWx0U3ZnRGVmcyA9ICgpID0+IHtcbiAgcmV0dXJuIG51bGw7XG59O1xuZXhwb3J0IHtcbiAgRGVmYXVsdFN2Z0RlZnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U3ZnRGVmcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSnapshot: () => (/* binding */ getSnapshot),\n/* harmony export */   loadSnapshot: () => (/* binding */ loadSnapshot)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n\n\n\nfunction loadSnapshot(store, _snapshot, opts) {\n  let snapshot = {};\n  if (\"store\" in _snapshot) {\n    const migrationResult = store.schema.migrateStoreSnapshot(_snapshot);\n    if (migrationResult.type !== \"success\") {\n      throw new Error(\"Failed to migrate store snapshot: \" + migrationResult.reason);\n    }\n    snapshot.document = {\n      schema: store.schema.serialize(),\n      store: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(\n        migrationResult.value,\n        (_, { typeName }) => store.scopedTypes.document.has(typeName)\n      )\n    };\n  } else {\n    snapshot = _snapshot;\n  }\n  const preservingInstanceState = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.pluckPreservingValues)(store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.TLINSTANCE_ID));\n  const preservingSessionState = sessionStateCache.get(store, _TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.createSessionStateSnapshotSignal).get();\n  store.atomic(() => {\n    if (snapshot.document) {\n      store.loadStoreSnapshot(snapshot.document);\n    }\n    if (preservingInstanceState) {\n      store.update(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.TLINSTANCE_ID, (r) => ({ ...r, ...preservingInstanceState }));\n    }\n    if (preservingSessionState) {\n      (0,_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.loadSessionStateSnapshotIntoStore)(store, preservingSessionState);\n    }\n    if (snapshot.session) {\n      (0,_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.loadSessionStateSnapshotIntoStore)(store, snapshot.session, {\n        forceOverwrite: opts?.forceOverwriteSessionState\n      });\n    }\n  });\n}\nconst sessionStateCache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\nfunction getSnapshot(store) {\n  const sessionState$ = sessionStateCache.get(store, _TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.createSessionStateSnapshotSignal);\n  const session = sessionState$.get();\n  if (!session) {\n    throw new Error(\"Session state is not ready yet\");\n  }\n  return {\n    document: store.getStoreSnapshot(),\n    session\n  };\n}\n\n//# sourceMappingURL=TLEditorSnapshot.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTEVkaXRvclNuYXBzaG90Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RTtBQUNmO0FBSW5CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNERBQWE7QUFDMUI7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esa0NBQWtDLHVFQUFxQixXQUFXLDJEQUFhO0FBQy9FLDhEQUE4RCx5RkFBZ0M7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwyREFBYSxZQUFZLGtDQUFrQztBQUM5RTtBQUNBO0FBQ0EsTUFBTSw4RkFBaUM7QUFDdkM7QUFDQTtBQUNBLE1BQU0sOEZBQWlDO0FBQ3ZDO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsOEJBQThCLG9EQUFTO0FBQ3ZDO0FBQ0EscURBQXFELHlGQUFnQztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTEVkaXRvclNuYXBzaG90Lm1qcz83OWJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRMSU5TVEFOQ0VfSUQsIHBsdWNrUHJlc2VydmluZ1ZhbHVlcyB9IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQgeyBXZWFrQ2FjaGUsIGZpbHRlckVudHJpZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2Vzc2lvblN0YXRlU25hcHNob3RTaWduYWwsXG4gIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZVxufSBmcm9tIFwiLi9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qc1wiO1xuZnVuY3Rpb24gbG9hZFNuYXBzaG90KHN0b3JlLCBfc25hcHNob3QsIG9wdHMpIHtcbiAgbGV0IHNuYXBzaG90ID0ge307XG4gIGlmIChcInN0b3JlXCIgaW4gX3NuYXBzaG90KSB7XG4gICAgY29uc3QgbWlncmF0aW9uUmVzdWx0ID0gc3RvcmUuc2NoZW1hLm1pZ3JhdGVTdG9yZVNuYXBzaG90KF9zbmFwc2hvdCk7XG4gICAgaWYgKG1pZ3JhdGlvblJlc3VsdC50eXBlICE9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIG1pZ3JhdGUgc3RvcmUgc25hcHNob3Q6IFwiICsgbWlncmF0aW9uUmVzdWx0LnJlYXNvbik7XG4gICAgfVxuICAgIHNuYXBzaG90LmRvY3VtZW50ID0ge1xuICAgICAgc2NoZW1hOiBzdG9yZS5zY2hlbWEuc2VyaWFsaXplKCksXG4gICAgICBzdG9yZTogZmlsdGVyRW50cmllcyhcbiAgICAgICAgbWlncmF0aW9uUmVzdWx0LnZhbHVlLFxuICAgICAgICAoXywgeyB0eXBlTmFtZSB9KSA9PiBzdG9yZS5zY29wZWRUeXBlcy5kb2N1bWVudC5oYXModHlwZU5hbWUpXG4gICAgICApXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBzbmFwc2hvdCA9IF9zbmFwc2hvdDtcbiAgfVxuICBjb25zdCBwcmVzZXJ2aW5nSW5zdGFuY2VTdGF0ZSA9IHBsdWNrUHJlc2VydmluZ1ZhbHVlcyhzdG9yZS5nZXQoVExJTlNUQU5DRV9JRCkpO1xuICBjb25zdCBwcmVzZXJ2aW5nU2Vzc2lvblN0YXRlID0gc2Vzc2lvblN0YXRlQ2FjaGUuZ2V0KHN0b3JlLCBjcmVhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdFNpZ25hbCkuZ2V0KCk7XG4gIHN0b3JlLmF0b21pYygoKSA9PiB7XG4gICAgaWYgKHNuYXBzaG90LmRvY3VtZW50KSB7XG4gICAgICBzdG9yZS5sb2FkU3RvcmVTbmFwc2hvdChzbmFwc2hvdC5kb2N1bWVudCk7XG4gICAgfVxuICAgIGlmIChwcmVzZXJ2aW5nSW5zdGFuY2VTdGF0ZSkge1xuICAgICAgc3RvcmUudXBkYXRlKFRMSU5TVEFOQ0VfSUQsIChyKSA9PiAoeyAuLi5yLCAuLi5wcmVzZXJ2aW5nSW5zdGFuY2VTdGF0ZSB9KSk7XG4gICAgfVxuICAgIGlmIChwcmVzZXJ2aW5nU2Vzc2lvblN0YXRlKSB7XG4gICAgICBsb2FkU2Vzc2lvblN0YXRlU25hcHNob3RJbnRvU3RvcmUoc3RvcmUsIHByZXNlcnZpbmdTZXNzaW9uU3RhdGUpO1xuICAgIH1cbiAgICBpZiAoc25hcHNob3Quc2Vzc2lvbikge1xuICAgICAgbG9hZFNlc3Npb25TdGF0ZVNuYXBzaG90SW50b1N0b3JlKHN0b3JlLCBzbmFwc2hvdC5zZXNzaW9uLCB7XG4gICAgICAgIGZvcmNlT3ZlcndyaXRlOiBvcHRzPy5mb3JjZU92ZXJ3cml0ZVNlc3Npb25TdGF0ZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cbmNvbnN0IHNlc3Npb25TdGF0ZUNhY2hlID0gbmV3IFdlYWtDYWNoZSgpO1xuZnVuY3Rpb24gZ2V0U25hcHNob3Qoc3RvcmUpIHtcbiAgY29uc3Qgc2Vzc2lvblN0YXRlJCA9IHNlc3Npb25TdGF0ZUNhY2hlLmdldChzdG9yZSwgY3JlYXRlU2Vzc2lvblN0YXRlU25hcHNob3RTaWduYWwpO1xuICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvblN0YXRlJC5nZXQoKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBzdGF0ZSBpcyBub3QgcmVhZHkgeWV0XCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZG9jdW1lbnQ6IHN0b3JlLmdldFN0b3JlU25hcHNob3QoKSxcbiAgICBzZXNzaW9uXG4gIH07XG59XG5leHBvcnQge1xuICBnZXRTbmFwc2hvdCxcbiAgbG9hZFNuYXBzaG90XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExFZGl0b3JTbmFwc2hvdC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TAB_ID: () => (/* binding */ TAB_ID),\n/* harmony export */   createSessionStateSnapshotSignal: () => (/* binding */ createSessionStateSnapshotSignal),\n/* harmony export */   extractSessionStateFromLegacySnapshot: () => (/* binding */ extractSessionStateFromLegacySnapshot),\n/* harmony export */   loadSessionStateSnapshotIntoStore: () => (/* binding */ loadSessionStateSnapshotIntoStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n\n\n\n\n\nconst tabIdKey = \"TLDRAW_TAB_ID_v2\";\nconst window = globalThis.window;\nfunction iOS() {\n  if (!window) return false;\n  return [\"iPad Simulator\", \"iPhone Simulator\", \"iPod Simulator\", \"iPad\", \"iPhone\", \"iPod\"].includes(\n    // eslint-disable-next-line deprecation/deprecation\n    window.navigator.platform\n  ) || // iPad on iOS 13 detection\n  _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_4__.tlenv.isDarwin && \"ontouchend\" in document;\n}\nconst TAB_ID = window ? window[tabIdKey] ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.getFromSessionStorage)(tabIdKey) ?? `TLDRAW_INSTANCE_STATE_V1_` + (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.uniqueId)() : \"<error>\";\nif (window) {\n  window[tabIdKey] = TAB_ID;\n  if (iOS()) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInSessionStorage)(tabIdKey, TAB_ID);\n  } else {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.deleteFromSessionStorage)(tabIdKey);\n  }\n}\nwindow?.addEventListener(\"beforeunload\", () => {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInSessionStorage)(tabIdKey, TAB_ID);\n});\nconst Versions = {\n  Initial: 0\n};\nconst CURRENT_SESSION_STATE_SNAPSHOT_VERSION = Math.max(...Object.values(Versions));\nfunction migrate(snapshot) {\n  if (snapshot.version < Versions.Initial) {\n  }\n  snapshot.version = CURRENT_SESSION_STATE_SNAPSHOT_VERSION;\n}\nconst sessionStateSnapshotValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n  version: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n  currentPageId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pageIdValidator.optional(),\n  isFocusMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.optional(),\n  exportBackground: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.optional(),\n  isDebugMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.optional(),\n  isToolLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.optional(),\n  isGridMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.optional(),\n  pageStates: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.arrayOf(\n    _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n      pageId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pageIdValidator,\n      camera: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n        x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n        y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n        z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number\n      }).optional(),\n      selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.arrayOf(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.shapeIdValidator).optional(),\n      focusedGroupId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.shapeIdValidator.nullable().optional()\n    })\n  ).optional()\n});\nfunction migrateAndValidateSessionStateSnapshot(state) {\n  if (!state || typeof state !== \"object\") {\n    console.warn(\"Invalid instance state\");\n    return null;\n  }\n  if (!(\"version\" in state) || typeof state.version !== \"number\") {\n    console.warn(\"No version in instance state\");\n    return null;\n  }\n  if (state.version !== CURRENT_SESSION_STATE_SNAPSHOT_VERSION) {\n    state = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.structuredClone)(state);\n    migrate(state);\n  }\n  try {\n    return sessionStateSnapshotValidator.validate(state);\n  } catch (e) {\n    console.warn(e);\n    return null;\n  }\n}\nfunction createSessionStateSnapshotSignal(store) {\n  const $allPageIds = store.query.ids(\"page\");\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"sessionStateSnapshot\", () => {\n    const instanceState = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID);\n    if (!instanceState) return null;\n    const allPageIds = [...$allPageIds.get()];\n    return {\n      version: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n      currentPageId: instanceState.currentPageId,\n      exportBackground: instanceState.exportBackground,\n      isFocusMode: instanceState.isFocusMode,\n      isDebugMode: instanceState.isDebugMode,\n      isToolLocked: instanceState.isToolLocked,\n      isGridMode: instanceState.isGridMode,\n      pageStates: allPageIds.map((id) => {\n        const ps = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.createId(id));\n        const camera = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(id));\n        return {\n          pageId: id,\n          camera: {\n            x: camera?.x ?? 0,\n            y: camera?.y ?? 0,\n            z: camera?.z ?? 1\n          },\n          selectedShapeIds: ps?.selectedShapeIds ?? [],\n          focusedGroupId: ps?.focusedGroupId ?? null\n        };\n      })\n    };\n  });\n}\nfunction loadSessionStateSnapshotIntoStore(store, snapshot, opts) {\n  const res = migrateAndValidateSessionStateSnapshot(snapshot);\n  if (!res) return;\n  const preserved = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pluckPreservingValues)(store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID));\n  const primary = opts?.forceOverwrite ? res : preserved;\n  const secondary = opts?.forceOverwrite ? preserved : res;\n  const instanceState = store.schema.types.instance.create({\n    id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID,\n    ...preserved,\n    // the integrity checker will ensure that the currentPageId is valid\n    currentPageId: res.currentPageId,\n    isDebugMode: primary?.isDebugMode ?? secondary?.isDebugMode,\n    isFocusMode: primary?.isFocusMode ?? secondary?.isFocusMode,\n    isToolLocked: primary?.isToolLocked ?? secondary?.isToolLocked,\n    isGridMode: primary?.isGridMode ?? secondary?.isGridMode,\n    exportBackground: primary?.exportBackground ?? secondary?.exportBackground\n  });\n  store.atomic(() => {\n    for (const ps of res.pageStates ?? []) {\n      if (!store.has(ps.pageId)) continue;\n      const cameraId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(ps.pageId);\n      const instancePageState = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.createId(ps.pageId);\n      const previousCamera = store.get(cameraId);\n      const previousInstanceState = store.get(instancePageState);\n      store.put([\n        _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.create({\n          id: cameraId,\n          x: ps.camera?.x ?? previousCamera?.x,\n          y: ps.camera?.y ?? previousCamera?.y,\n          z: ps.camera?.z ?? previousCamera?.z\n        }),\n        _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.create({\n          id: instancePageState,\n          pageId: ps.pageId,\n          selectedShapeIds: ps.selectedShapeIds ?? previousInstanceState?.selectedShapeIds,\n          focusedGroupId: ps.focusedGroupId ?? previousInstanceState?.focusedGroupId\n        })\n      ]);\n    }\n    store.put([instanceState]);\n    store.ensureStoreIsUsable();\n  });\n}\nfunction extractSessionStateFromLegacySnapshot(store) {\n  const instanceRecords = [];\n  for (const record of Object.values(store)) {\n    if (record.typeName?.match(/^(instance.*|pointer|camera)$/)) {\n      instanceRecords.push(record);\n    }\n  }\n  const oldInstance = instanceRecords.filter(\n    (r) => r.typeName === \"instance\" && r.id !== _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID\n  )[0];\n  if (!oldInstance) return null;\n  const result = {\n    version: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n    currentPageId: oldInstance.currentPageId,\n    exportBackground: !!oldInstance.exportBackground,\n    isFocusMode: !!oldInstance.isFocusMode,\n    isDebugMode: !!oldInstance.isDebugMode,\n    isToolLocked: !!oldInstance.isToolLocked,\n    isGridMode: false,\n    pageStates: instanceRecords.filter((r) => r.typeName === \"instance_page_state\" && r.instanceId === oldInstance.id).map((ps) => {\n      const camera = store[ps.cameraId] ?? { x: 0, y: 0, z: 1 };\n      return {\n        pageId: ps.pageId,\n        camera: {\n          x: camera.x,\n          y: camera.y,\n          z: camera.z\n        },\n        selectedShapeIds: ps.selectedShapeIds,\n        focusedGroupId: ps.focusedGroupId\n      };\n    })\n  };\n  try {\n    sessionStateSnapshotValidator.validate(result);\n    return result;\n  } catch (e) {\n    return null;\n  }\n}\n\n//# sourceMappingURL=TLSessionStateSnapshot.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUM7QUFRZjtBQU9IO0FBQ2M7QUFDYztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyREFBSztBQUNQO0FBQ0EsNENBQTRDLG9FQUFxQiw0Q0FBNEMsdURBQVE7QUFDckg7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBbUI7QUFDdkIsSUFBSTtBQUNKLElBQUksdUVBQXdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0VBQW1CO0FBQ3JCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0RBQVE7QUFDOUMsV0FBVyxzREFBUTtBQUNuQixpQkFBaUIsNkRBQWU7QUFDaEMsZUFBZSx1REFBUztBQUN4QixvQkFBb0IsdURBQVM7QUFDN0IsZUFBZSx1REFBUztBQUN4QixnQkFBZ0IsdURBQVM7QUFDekIsY0FBYyx1REFBUztBQUN2QixjQUFjLHVEQUFTO0FBQ3ZCLElBQUksc0RBQVE7QUFDWixjQUFjLDZEQUFlO0FBQzdCLGNBQWMsc0RBQVE7QUFDdEIsV0FBVyxzREFBUTtBQUNuQixXQUFXLHNEQUFRO0FBQ25CLFdBQVcsc0RBQVE7QUFDbkIsT0FBTztBQUNQLHdCQUF3Qix1REFBUyxDQUFDLDhEQUFnQjtBQUNsRCxzQkFBc0IsOERBQWdCO0FBQ3RDLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQixvQ0FBb0MsMkRBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5RUFBMkI7QUFDeEQsaUNBQWlDLDhEQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVFQUFxQixXQUFXLDJEQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkRBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsOERBQWdCO0FBQ3ZDLGdDQUFnQyx5RUFBMkI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSx5RUFBMkI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDJEQUFhO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qcz8xMzdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7XG4gIENhbWVyYVJlY29yZFR5cGUsXG4gIEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSxcbiAgVExJTlNUQU5DRV9JRCxcbiAgcGFnZUlkVmFsaWRhdG9yLFxuICBwbHVja1ByZXNlcnZpbmdWYWx1ZXMsXG4gIHNoYXBlSWRWYWxpZGF0b3Jcbn0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7XG4gIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSxcbiAgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLFxuICBzZXRJblNlc3Npb25TdG9yYWdlLFxuICBzdHJ1Y3R1cmVkQ2xvbmUsXG4gIHVuaXF1ZUlkXG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IHRsZW52IH0gZnJvbSBcIi4uL2dsb2JhbHMvZW52aXJvbm1lbnQubWpzXCI7XG5jb25zdCB0YWJJZEtleSA9IFwiVExEUkFXX1RBQl9JRF92MlwiO1xuY29uc3Qgd2luZG93ID0gZ2xvYmFsVGhpcy53aW5kb3c7XG5mdW5jdGlvbiBpT1MoKSB7XG4gIGlmICghd2luZG93KSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBbXCJpUGFkIFNpbXVsYXRvclwiLCBcImlQaG9uZSBTaW11bGF0b3JcIiwgXCJpUG9kIFNpbXVsYXRvclwiLCBcImlQYWRcIiwgXCJpUGhvbmVcIiwgXCJpUG9kXCJdLmluY2x1ZGVzKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICAgIHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm1cbiAgKSB8fCAvLyBpUGFkIG9uIGlPUyAxMyBkZXRlY3Rpb25cbiAgdGxlbnYuaXNEYXJ3aW4gJiYgXCJvbnRvdWNoZW5kXCIgaW4gZG9jdW1lbnQ7XG59XG5jb25zdCBUQUJfSUQgPSB3aW5kb3cgPyB3aW5kb3dbdGFiSWRLZXldID8/IGdldEZyb21TZXNzaW9uU3RvcmFnZSh0YWJJZEtleSkgPz8gYFRMRFJBV19JTlNUQU5DRV9TVEFURV9WMV9gICsgdW5pcXVlSWQoKSA6IFwiPGVycm9yPlwiO1xuaWYgKHdpbmRvdykge1xuICB3aW5kb3dbdGFiSWRLZXldID0gVEFCX0lEO1xuICBpZiAoaU9TKCkpIHtcbiAgICBzZXRJblNlc3Npb25TdG9yYWdlKHRhYklkS2V5LCBUQUJfSUQpO1xuICB9IGVsc2Uge1xuICAgIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSh0YWJJZEtleSk7XG4gIH1cbn1cbndpbmRvdz8uYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoKSA9PiB7XG4gIHNldEluU2Vzc2lvblN0b3JhZ2UodGFiSWRLZXksIFRBQl9JRCk7XG59KTtcbmNvbnN0IFZlcnNpb25zID0ge1xuICBJbml0aWFsOiAwXG59O1xuY29uc3QgQ1VSUkVOVF9TRVNTSU9OX1NUQVRFX1NOQVBTSE9UX1ZFUlNJT04gPSBNYXRoLm1heCguLi5PYmplY3QudmFsdWVzKFZlcnNpb25zKSk7XG5mdW5jdGlvbiBtaWdyYXRlKHNuYXBzaG90KSB7XG4gIGlmIChzbmFwc2hvdC52ZXJzaW9uIDwgVmVyc2lvbnMuSW5pdGlhbCkge1xuICB9XG4gIHNuYXBzaG90LnZlcnNpb24gPSBDVVJSRU5UX1NFU1NJT05fU1RBVEVfU05BUFNIT1RfVkVSU0lPTjtcbn1cbmNvbnN0IHNlc3Npb25TdGF0ZVNuYXBzaG90VmFsaWRhdG9yID0gVC5vYmplY3Qoe1xuICB2ZXJzaW9uOiBULm51bWJlcixcbiAgY3VycmVudFBhZ2VJZDogcGFnZUlkVmFsaWRhdG9yLm9wdGlvbmFsKCksXG4gIGlzRm9jdXNNb2RlOiBULmJvb2xlYW4ub3B0aW9uYWwoKSxcbiAgZXhwb3J0QmFja2dyb3VuZDogVC5ib29sZWFuLm9wdGlvbmFsKCksXG4gIGlzRGVidWdNb2RlOiBULmJvb2xlYW4ub3B0aW9uYWwoKSxcbiAgaXNUb29sTG9ja2VkOiBULmJvb2xlYW4ub3B0aW9uYWwoKSxcbiAgaXNHcmlkTW9kZTogVC5ib29sZWFuLm9wdGlvbmFsKCksXG4gIHBhZ2VTdGF0ZXM6IFQuYXJyYXlPZihcbiAgICBULm9iamVjdCh7XG4gICAgICBwYWdlSWQ6IHBhZ2VJZFZhbGlkYXRvcixcbiAgICAgIGNhbWVyYTogVC5vYmplY3Qoe1xuICAgICAgICB4OiBULm51bWJlcixcbiAgICAgICAgeTogVC5udW1iZXIsXG4gICAgICAgIHo6IFQubnVtYmVyXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgc2VsZWN0ZWRTaGFwZUlkczogVC5hcnJheU9mKHNoYXBlSWRWYWxpZGF0b3IpLm9wdGlvbmFsKCksXG4gICAgICBmb2N1c2VkR3JvdXBJZDogc2hhcGVJZFZhbGlkYXRvci5udWxsYWJsZSgpLm9wdGlvbmFsKClcbiAgICB9KVxuICApLm9wdGlvbmFsKClcbn0pO1xuZnVuY3Rpb24gbWlncmF0ZUFuZFZhbGlkYXRlU2Vzc2lvblN0YXRlU25hcHNob3Qoc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZSB8fCB0eXBlb2Ygc3RhdGUgIT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJJbnZhbGlkIGluc3RhbmNlIHN0YXRlXCIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmICghKFwidmVyc2lvblwiIGluIHN0YXRlKSB8fCB0eXBlb2Ygc3RhdGUudmVyc2lvbiAhPT0gXCJudW1iZXJcIikge1xuICAgIGNvbnNvbGUud2FybihcIk5vIHZlcnNpb24gaW4gaW5zdGFuY2Ugc3RhdGVcIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHN0YXRlLnZlcnNpb24gIT09IENVUlJFTlRfU0VTU0lPTl9TVEFURV9TTkFQU0hPVF9WRVJTSU9OKSB7XG4gICAgc3RhdGUgPSBzdHJ1Y3R1cmVkQ2xvbmUoc3RhdGUpO1xuICAgIG1pZ3JhdGUoc3RhdGUpO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHNlc3Npb25TdGF0ZVNuYXBzaG90VmFsaWRhdG9yLnZhbGlkYXRlKHN0YXRlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihlKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlU2Vzc2lvblN0YXRlU25hcHNob3RTaWduYWwoc3RvcmUpIHtcbiAgY29uc3QgJGFsbFBhZ2VJZHMgPSBzdG9yZS5xdWVyeS5pZHMoXCJwYWdlXCIpO1xuICByZXR1cm4gY29tcHV0ZWQoXCJzZXNzaW9uU3RhdGVTbmFwc2hvdFwiLCAoKSA9PiB7XG4gICAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IHN0b3JlLmdldChUTElOU1RBTkNFX0lEKTtcbiAgICBpZiAoIWluc3RhbmNlU3RhdGUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGFsbFBhZ2VJZHMgPSBbLi4uJGFsbFBhZ2VJZHMuZ2V0KCldO1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uOiBDVVJSRU5UX1NFU1NJT05fU1RBVEVfU05BUFNIT1RfVkVSU0lPTixcbiAgICAgIGN1cnJlbnRQYWdlSWQ6IGluc3RhbmNlU3RhdGUuY3VycmVudFBhZ2VJZCxcbiAgICAgIGV4cG9ydEJhY2tncm91bmQ6IGluc3RhbmNlU3RhdGUuZXhwb3J0QmFja2dyb3VuZCxcbiAgICAgIGlzRm9jdXNNb2RlOiBpbnN0YW5jZVN0YXRlLmlzRm9jdXNNb2RlLFxuICAgICAgaXNEZWJ1Z01vZGU6IGluc3RhbmNlU3RhdGUuaXNEZWJ1Z01vZGUsXG4gICAgICBpc1Rvb2xMb2NrZWQ6IGluc3RhbmNlU3RhdGUuaXNUb29sTG9ja2VkLFxuICAgICAgaXNHcmlkTW9kZTogaW5zdGFuY2VTdGF0ZS5pc0dyaWRNb2RlLFxuICAgICAgcGFnZVN0YXRlczogYWxsUGFnZUlkcy5tYXAoKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IHBzID0gc3RvcmUuZ2V0KEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChpZCkpO1xuICAgICAgICBjb25zdCBjYW1lcmEgPSBzdG9yZS5nZXQoQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZChpZCkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhZ2VJZDogaWQsXG4gICAgICAgICAgY2FtZXJhOiB7XG4gICAgICAgICAgICB4OiBjYW1lcmE/LnggPz8gMCxcbiAgICAgICAgICAgIHk6IGNhbWVyYT8ueSA/PyAwLFxuICAgICAgICAgICAgejogY2FtZXJhPy56ID8/IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdGVkU2hhcGVJZHM6IHBzPy5zZWxlY3RlZFNoYXBlSWRzID8/IFtdLFxuICAgICAgICAgIGZvY3VzZWRHcm91cElkOiBwcz8uZm9jdXNlZEdyb3VwSWQgPz8gbnVsbFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZShzdG9yZSwgc25hcHNob3QsIG9wdHMpIHtcbiAgY29uc3QgcmVzID0gbWlncmF0ZUFuZFZhbGlkYXRlU2Vzc2lvblN0YXRlU25hcHNob3Qoc25hcHNob3QpO1xuICBpZiAoIXJlcykgcmV0dXJuO1xuICBjb25zdCBwcmVzZXJ2ZWQgPSBwbHVja1ByZXNlcnZpbmdWYWx1ZXMoc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpKTtcbiAgY29uc3QgcHJpbWFyeSA9IG9wdHM/LmZvcmNlT3ZlcndyaXRlID8gcmVzIDogcHJlc2VydmVkO1xuICBjb25zdCBzZWNvbmRhcnkgPSBvcHRzPy5mb3JjZU92ZXJ3cml0ZSA/IHByZXNlcnZlZCA6IHJlcztcbiAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IHN0b3JlLnNjaGVtYS50eXBlcy5pbnN0YW5jZS5jcmVhdGUoe1xuICAgIGlkOiBUTElOU1RBTkNFX0lELFxuICAgIC4uLnByZXNlcnZlZCxcbiAgICAvLyB0aGUgaW50ZWdyaXR5IGNoZWNrZXIgd2lsbCBlbnN1cmUgdGhhdCB0aGUgY3VycmVudFBhZ2VJZCBpcyB2YWxpZFxuICAgIGN1cnJlbnRQYWdlSWQ6IHJlcy5jdXJyZW50UGFnZUlkLFxuICAgIGlzRGVidWdNb2RlOiBwcmltYXJ5Py5pc0RlYnVnTW9kZSA/PyBzZWNvbmRhcnk/LmlzRGVidWdNb2RlLFxuICAgIGlzRm9jdXNNb2RlOiBwcmltYXJ5Py5pc0ZvY3VzTW9kZSA/PyBzZWNvbmRhcnk/LmlzRm9jdXNNb2RlLFxuICAgIGlzVG9vbExvY2tlZDogcHJpbWFyeT8uaXNUb29sTG9ja2VkID8/IHNlY29uZGFyeT8uaXNUb29sTG9ja2VkLFxuICAgIGlzR3JpZE1vZGU6IHByaW1hcnk/LmlzR3JpZE1vZGUgPz8gc2Vjb25kYXJ5Py5pc0dyaWRNb2RlLFxuICAgIGV4cG9ydEJhY2tncm91bmQ6IHByaW1hcnk/LmV4cG9ydEJhY2tncm91bmQgPz8gc2Vjb25kYXJ5Py5leHBvcnRCYWNrZ3JvdW5kXG4gIH0pO1xuICBzdG9yZS5hdG9taWMoKCkgPT4ge1xuICAgIGZvciAoY29uc3QgcHMgb2YgcmVzLnBhZ2VTdGF0ZXMgPz8gW10pIHtcbiAgICAgIGlmICghc3RvcmUuaGFzKHBzLnBhZ2VJZCkpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgY2FtZXJhSWQgPSBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZUlkKHBzLnBhZ2VJZCk7XG4gICAgICBjb25zdCBpbnN0YW5jZVBhZ2VTdGF0ZSA9IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChwcy5wYWdlSWQpO1xuICAgICAgY29uc3QgcHJldmlvdXNDYW1lcmEgPSBzdG9yZS5nZXQoY2FtZXJhSWQpO1xuICAgICAgY29uc3QgcHJldmlvdXNJbnN0YW5jZVN0YXRlID0gc3RvcmUuZ2V0KGluc3RhbmNlUGFnZVN0YXRlKTtcbiAgICAgIHN0b3JlLnB1dChbXG4gICAgICAgIENhbWVyYVJlY29yZFR5cGUuY3JlYXRlKHtcbiAgICAgICAgICBpZDogY2FtZXJhSWQsXG4gICAgICAgICAgeDogcHMuY2FtZXJhPy54ID8/IHByZXZpb3VzQ2FtZXJhPy54LFxuICAgICAgICAgIHk6IHBzLmNhbWVyYT8ueSA/PyBwcmV2aW91c0NhbWVyYT8ueSxcbiAgICAgICAgICB6OiBwcy5jYW1lcmE/LnogPz8gcHJldmlvdXNDYW1lcmE/LnpcbiAgICAgICAgfSksXG4gICAgICAgIEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGUoe1xuICAgICAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZSxcbiAgICAgICAgICBwYWdlSWQ6IHBzLnBhZ2VJZCxcbiAgICAgICAgICBzZWxlY3RlZFNoYXBlSWRzOiBwcy5zZWxlY3RlZFNoYXBlSWRzID8/IHByZXZpb3VzSW5zdGFuY2VTdGF0ZT8uc2VsZWN0ZWRTaGFwZUlkcyxcbiAgICAgICAgICBmb2N1c2VkR3JvdXBJZDogcHMuZm9jdXNlZEdyb3VwSWQgPz8gcHJldmlvdXNJbnN0YW5jZVN0YXRlPy5mb2N1c2VkR3JvdXBJZFxuICAgICAgICB9KVxuICAgICAgXSk7XG4gICAgfVxuICAgIHN0b3JlLnB1dChbaW5zdGFuY2VTdGF0ZV0pO1xuICAgIHN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90KHN0b3JlKSB7XG4gIGNvbnN0IGluc3RhbmNlUmVjb3JkcyA9IFtdO1xuICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKHN0b3JlKSkge1xuICAgIGlmIChyZWNvcmQudHlwZU5hbWU/Lm1hdGNoKC9eKGluc3RhbmNlLip8cG9pbnRlcnxjYW1lcmEpJC8pKSB7XG4gICAgICBpbnN0YW5jZVJlY29yZHMucHVzaChyZWNvcmQpO1xuICAgIH1cbiAgfVxuICBjb25zdCBvbGRJbnN0YW5jZSA9IGluc3RhbmNlUmVjb3Jkcy5maWx0ZXIoXG4gICAgKHIpID0+IHIudHlwZU5hbWUgPT09IFwiaW5zdGFuY2VcIiAmJiByLmlkICE9PSBUTElOU1RBTkNFX0lEXG4gIClbMF07XG4gIGlmICghb2xkSW5zdGFuY2UpIHJldHVybiBudWxsO1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgdmVyc2lvbjogQ1VSUkVOVF9TRVNTSU9OX1NUQVRFX1NOQVBTSE9UX1ZFUlNJT04sXG4gICAgY3VycmVudFBhZ2VJZDogb2xkSW5zdGFuY2UuY3VycmVudFBhZ2VJZCxcbiAgICBleHBvcnRCYWNrZ3JvdW5kOiAhIW9sZEluc3RhbmNlLmV4cG9ydEJhY2tncm91bmQsXG4gICAgaXNGb2N1c01vZGU6ICEhb2xkSW5zdGFuY2UuaXNGb2N1c01vZGUsXG4gICAgaXNEZWJ1Z01vZGU6ICEhb2xkSW5zdGFuY2UuaXNEZWJ1Z01vZGUsXG4gICAgaXNUb29sTG9ja2VkOiAhIW9sZEluc3RhbmNlLmlzVG9vbExvY2tlZCxcbiAgICBpc0dyaWRNb2RlOiBmYWxzZSxcbiAgICBwYWdlU3RhdGVzOiBpbnN0YW5jZVJlY29yZHMuZmlsdGVyKChyKSA9PiByLnR5cGVOYW1lID09PSBcImluc3RhbmNlX3BhZ2Vfc3RhdGVcIiAmJiByLmluc3RhbmNlSWQgPT09IG9sZEluc3RhbmNlLmlkKS5tYXAoKHBzKSA9PiB7XG4gICAgICBjb25zdCBjYW1lcmEgPSBzdG9yZVtwcy5jYW1lcmFJZF0gPz8geyB4OiAwLCB5OiAwLCB6OiAxIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYWdlSWQ6IHBzLnBhZ2VJZCxcbiAgICAgICAgY2FtZXJhOiB7XG4gICAgICAgICAgeDogY2FtZXJhLngsXG4gICAgICAgICAgeTogY2FtZXJhLnksXG4gICAgICAgICAgejogY2FtZXJhLnpcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0ZWRTaGFwZUlkczogcHMuc2VsZWN0ZWRTaGFwZUlkcyxcbiAgICAgICAgZm9jdXNlZEdyb3VwSWQ6IHBzLmZvY3VzZWRHcm91cElkXG4gICAgICB9O1xuICAgIH0pXG4gIH07XG4gIHRyeSB7XG4gICAgc2Vzc2lvblN0YXRlU25hcHNob3RWYWxpZGF0b3IudmFsaWRhdGUocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFRBQl9JRCxcbiAgY3JlYXRlU2Vzc2lvblN0YXRlU25hcHNob3RTaWduYWwsXG4gIGV4dHJhY3RTZXNzaW9uU3RhdGVGcm9tTGVnYWN5U25hcHNob3QsXG4gIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMU2Vzc2lvblN0YXRlU25hcHNob3QubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USER_COLORS: () => (/* binding */ USER_COLORS),\n/* harmony export */   defaultUserPreferences: () => (/* binding */ defaultUserPreferences),\n/* harmony export */   getFreshUserPreferences: () => (/* binding */ getFreshUserPreferences),\n/* harmony export */   getUserPreferences: () => (/* binding */ getUserPreferences),\n/* harmony export */   setUserPreferences: () => (/* binding */ setUserPreferences),\n/* harmony export */   userPrefersReducedMotion: () => (/* binding */ userPrefersReducedMotion)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\n\n\n\nconst USER_DATA_KEY = \"TLDRAW_USER_DATA_v3\";\nconst userTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string,\n  name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  locale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  color: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  colorScheme: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.literalEnum(\"light\", \"dark\", \"system\").optional(),\n  animationSpeed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number.nullable().optional(),\n  edgeScrollSpeed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number.nullable().optional(),\n  isSnapMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional(),\n  isWrapMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional(),\n  isDynamicSizeMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional(),\n  isPasteAtCursorMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional()\n});\nconst Versions = {\n  AddAnimationSpeed: 1,\n  AddIsSnapMode: 2,\n  MakeFieldsNullable: 3,\n  AddEdgeScrollSpeed: 4,\n  AddExcalidrawSelectMode: 5,\n  AddDynamicSizeMode: 6,\n  AllowSystemColorScheme: 7,\n  AddPasteAtCursor: 8\n};\nconst CURRENT_VERSION = Math.max(...Object.values(Versions));\nfunction migrateSnapshot(data) {\n  if (data.version < Versions.AddAnimationSpeed) {\n    data.user.animationSpeed = 1;\n  }\n  if (data.version < Versions.AddIsSnapMode) {\n    data.user.isSnapMode = false;\n  }\n  if (data.version < Versions.MakeFieldsNullable) {\n  }\n  if (data.version < Versions.AddEdgeScrollSpeed) {\n    data.user.edgeScrollSpeed = 1;\n  }\n  if (data.version < Versions.AddExcalidrawSelectMode) {\n    data.user.isWrapMode = false;\n  }\n  if (data.version < Versions.AllowSystemColorScheme) {\n    if (data.user.isDarkMode === true) {\n      data.user.colorScheme = \"dark\";\n    } else if (data.user.isDarkMode === false) {\n      data.user.colorScheme = \"light\";\n    }\n    delete data.user.isDarkMode;\n  }\n  if (data.version < Versions.AddDynamicSizeMode) {\n    data.user.isDynamicSizeMode = false;\n  }\n  if (data.version < Versions.AddPasteAtCursor) {\n    data.user.isPasteAtCursorMode = false;\n  }\n  data.version = CURRENT_VERSION;\n}\nconst USER_COLORS = [\n  \"#FF802B\",\n  \"#EC5E41\",\n  \"#F2555A\",\n  \"#F04F88\",\n  \"#E34BA9\",\n  \"#BD54C6\",\n  \"#9D5BD2\",\n  \"#7B66DC\",\n  \"#02B1CC\",\n  \"#11B3A3\",\n  \"#39B178\",\n  \"#55B467\"\n];\nfunction getRandomColor() {\n  return USER_COLORS[Math.floor(Math.random() * USER_COLORS.length)];\n}\nfunction userPrefersReducedMotion() {\n  if (typeof window !== \"undefined\" && \"matchMedia\" in window) {\n    return window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches ?? false;\n  }\n  return false;\n}\nconst defaultUserPreferences = Object.freeze({\n  name: \"New User\",\n  locale: (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.getDefaultTranslationLocale)(),\n  color: getRandomColor(),\n  edgeScrollSpeed: 1,\n  animationSpeed: userPrefersReducedMotion() ? 0 : 1,\n  isSnapMode: false,\n  isWrapMode: false,\n  isDynamicSizeMode: false,\n  isPasteAtCursorMode: false,\n  colorScheme: \"system\"\n});\nfunction getFreshUserPreferences() {\n  return {\n    id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.uniqueId)(),\n    color: getRandomColor()\n  };\n}\nfunction migrateUserPreferences(userData) {\n  if (userData === null || typeof userData !== \"object\") {\n    return getFreshUserPreferences();\n  }\n  if (!(\"version\" in userData) || !(\"user\" in userData) || typeof userData.version !== \"number\") {\n    return getFreshUserPreferences();\n  }\n  const snapshot = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.structuredClone)(userData);\n  migrateSnapshot(snapshot);\n  try {\n    return userTypeValidator.validate(snapshot.user);\n  } catch (e) {\n    return getFreshUserPreferences();\n  }\n}\nfunction loadUserPreferences() {\n  const userData = JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.getFromLocalStorage)(USER_DATA_KEY) || \"null\") ?? null;\n  return migrateUserPreferences(userData);\n}\nconst globalUserPreferences = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"globalUserData\", null);\nfunction storeUserPreferences() {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInLocalStorage)(\n    USER_DATA_KEY,\n    JSON.stringify({\n      version: CURRENT_VERSION,\n      user: globalUserPreferences.get()\n    })\n  );\n}\nfunction setUserPreferences(user) {\n  userTypeValidator.validate(user);\n  globalUserPreferences.set(user);\n  storeUserPreferences();\n  broadcastUserPreferencesChange();\n}\nconst isTest = typeof process !== \"undefined\" && \"development\" === \"test\";\nconst channel = typeof BroadcastChannel !== \"undefined\" && !isTest ? new BroadcastChannel(\"tldraw-user-sync\") : null;\nchannel?.addEventListener(\"message\", (e) => {\n  const data = e.data;\n  if (data?.type === broadcastEventKey && data?.origin !== getBroadcastOrigin()) {\n    globalUserPreferences.set(migrateUserPreferences(data.data));\n  }\n});\nlet _broadcastOrigin = null;\nfunction getBroadcastOrigin() {\n  if (_broadcastOrigin === null) {\n    _broadcastOrigin = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.uniqueId)();\n  }\n  return _broadcastOrigin;\n}\nconst broadcastEventKey = \"tldraw-user-preferences-change\";\nfunction broadcastUserPreferencesChange() {\n  channel?.postMessage({\n    type: broadcastEventKey,\n    origin: getBroadcastOrigin(),\n    data: {\n      user: getUserPreferences(),\n      version: CURRENT_VERSION\n    }\n  });\n}\nfunction getUserPreferences() {\n  let prefs = globalUserPreferences.get();\n  if (!prefs) {\n    prefs = loadUserPreferences();\n    setUserPreferences(prefs);\n  }\n  return prefs;\n}\n\n//# sourceMappingURL=TLUserPreferences.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUMwQjtBQUNtQztBQUM3RDtBQUNyQztBQUNBLDBCQUEwQixzREFBUTtBQUNsQyxNQUFNLHNEQUFRO0FBQ2QsUUFBUSxzREFBUTtBQUNoQixVQUFVLHNEQUFRO0FBQ2xCLFNBQVMsc0RBQVE7QUFDakIsZUFBZSwyREFBYTtBQUM1QixrQkFBa0Isc0RBQVE7QUFDMUIsbUJBQW1CLHNEQUFRO0FBQzNCLGNBQWMsdURBQVM7QUFDdkIsY0FBYyx1REFBUztBQUN2QixxQkFBcUIsdURBQVM7QUFDOUIsdUJBQXVCLHVEQUFTO0FBQ2hDLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2RUFBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsUUFBUSx1REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4REFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0VBQW1CO0FBQ2pEO0FBQ0E7QUFDQSw4QkFBOEIsbURBQUk7QUFDbEM7QUFDQSxFQUFFLGdFQUFpQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGFBQW9CO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uZmlnL1RMVXNlclByZWZlcmVuY2VzLm1qcz9iMGUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20gfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IGdldEZyb21Mb2NhbFN0b3JhZ2UsIHNldEluTG9jYWxTdG9yYWdlLCBzdHJ1Y3R1cmVkQ2xvbmUsIHVuaXF1ZUlkIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuY29uc3QgVVNFUl9EQVRBX0tFWSA9IFwiVExEUkFXX1VTRVJfREFUQV92M1wiO1xuY29uc3QgdXNlclR5cGVWYWxpZGF0b3IgPSBULm9iamVjdCh7XG4gIGlkOiBULnN0cmluZyxcbiAgbmFtZTogVC5zdHJpbmcubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBsb2NhbGU6IFQuc3RyaW5nLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgY29sb3I6IFQuc3RyaW5nLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgY29sb3JTY2hlbWU6IFQubGl0ZXJhbEVudW0oXCJsaWdodFwiLCBcImRhcmtcIiwgXCJzeXN0ZW1cIikub3B0aW9uYWwoKSxcbiAgYW5pbWF0aW9uU3BlZWQ6IFQubnVtYmVyLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZWRnZVNjcm9sbFNwZWVkOiBULm51bWJlci5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGlzU25hcE1vZGU6IFQuYm9vbGVhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGlzV3JhcE1vZGU6IFQuYm9vbGVhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGlzRHluYW1pY1NpemVNb2RlOiBULmJvb2xlYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBpc1Bhc3RlQXRDdXJzb3JNb2RlOiBULmJvb2xlYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IFZlcnNpb25zID0ge1xuICBBZGRBbmltYXRpb25TcGVlZDogMSxcbiAgQWRkSXNTbmFwTW9kZTogMixcbiAgTWFrZUZpZWxkc051bGxhYmxlOiAzLFxuICBBZGRFZGdlU2Nyb2xsU3BlZWQ6IDQsXG4gIEFkZEV4Y2FsaWRyYXdTZWxlY3RNb2RlOiA1LFxuICBBZGREeW5hbWljU2l6ZU1vZGU6IDYsXG4gIEFsbG93U3lzdGVtQ29sb3JTY2hlbWU6IDcsXG4gIEFkZFBhc3RlQXRDdXJzb3I6IDhcbn07XG5jb25zdCBDVVJSRU5UX1ZFUlNJT04gPSBNYXRoLm1heCguLi5PYmplY3QudmFsdWVzKFZlcnNpb25zKSk7XG5mdW5jdGlvbiBtaWdyYXRlU25hcHNob3QoZGF0YSkge1xuICBpZiAoZGF0YS52ZXJzaW9uIDwgVmVyc2lvbnMuQWRkQW5pbWF0aW9uU3BlZWQpIHtcbiAgICBkYXRhLnVzZXIuYW5pbWF0aW9uU3BlZWQgPSAxO1xuICB9XG4gIGlmIChkYXRhLnZlcnNpb24gPCBWZXJzaW9ucy5BZGRJc1NuYXBNb2RlKSB7XG4gICAgZGF0YS51c2VyLmlzU25hcE1vZGUgPSBmYWxzZTtcbiAgfVxuICBpZiAoZGF0YS52ZXJzaW9uIDwgVmVyc2lvbnMuTWFrZUZpZWxkc051bGxhYmxlKSB7XG4gIH1cbiAgaWYgKGRhdGEudmVyc2lvbiA8IFZlcnNpb25zLkFkZEVkZ2VTY3JvbGxTcGVlZCkge1xuICAgIGRhdGEudXNlci5lZGdlU2Nyb2xsU3BlZWQgPSAxO1xuICB9XG4gIGlmIChkYXRhLnZlcnNpb24gPCBWZXJzaW9ucy5BZGRFeGNhbGlkcmF3U2VsZWN0TW9kZSkge1xuICAgIGRhdGEudXNlci5pc1dyYXBNb2RlID0gZmFsc2U7XG4gIH1cbiAgaWYgKGRhdGEudmVyc2lvbiA8IFZlcnNpb25zLkFsbG93U3lzdGVtQ29sb3JTY2hlbWUpIHtcbiAgICBpZiAoZGF0YS51c2VyLmlzRGFya01vZGUgPT09IHRydWUpIHtcbiAgICAgIGRhdGEudXNlci5jb2xvclNjaGVtZSA9IFwiZGFya1wiO1xuICAgIH0gZWxzZSBpZiAoZGF0YS51c2VyLmlzRGFya01vZGUgPT09IGZhbHNlKSB7XG4gICAgICBkYXRhLnVzZXIuY29sb3JTY2hlbWUgPSBcImxpZ2h0XCI7XG4gICAgfVxuICAgIGRlbGV0ZSBkYXRhLnVzZXIuaXNEYXJrTW9kZTtcbiAgfVxuICBpZiAoZGF0YS52ZXJzaW9uIDwgVmVyc2lvbnMuQWRkRHluYW1pY1NpemVNb2RlKSB7XG4gICAgZGF0YS51c2VyLmlzRHluYW1pY1NpemVNb2RlID0gZmFsc2U7XG4gIH1cbiAgaWYgKGRhdGEudmVyc2lvbiA8IFZlcnNpb25zLkFkZFBhc3RlQXRDdXJzb3IpIHtcbiAgICBkYXRhLnVzZXIuaXNQYXN0ZUF0Q3Vyc29yTW9kZSA9IGZhbHNlO1xuICB9XG4gIGRhdGEudmVyc2lvbiA9IENVUlJFTlRfVkVSU0lPTjtcbn1cbmNvbnN0IFVTRVJfQ09MT1JTID0gW1xuICBcIiNGRjgwMkJcIixcbiAgXCIjRUM1RTQxXCIsXG4gIFwiI0YyNTU1QVwiLFxuICBcIiNGMDRGODhcIixcbiAgXCIjRTM0QkE5XCIsXG4gIFwiI0JENTRDNlwiLFxuICBcIiM5RDVCRDJcIixcbiAgXCIjN0I2NkRDXCIsXG4gIFwiIzAyQjFDQ1wiLFxuICBcIiMxMUIzQTNcIixcbiAgXCIjMzlCMTc4XCIsXG4gIFwiIzU1QjQ2N1wiXG5dO1xuZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gIHJldHVybiBVU0VSX0NPTE9SU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBVU0VSX0NPTE9SUy5sZW5ndGgpXTtcbn1cbmZ1bmN0aW9uIHVzZXJQcmVmZXJzUmVkdWNlZE1vdGlvbigpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJtYXRjaE1lZGlhXCIgaW4gd2luZG93KSB7XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhPy4oXCIocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKVwiKT8ubWF0Y2hlcyA/PyBmYWxzZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5jb25zdCBkZWZhdWx0VXNlclByZWZlcmVuY2VzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIG5hbWU6IFwiTmV3IFVzZXJcIixcbiAgbG9jYWxlOiBnZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGUoKSxcbiAgY29sb3I6IGdldFJhbmRvbUNvbG9yKCksXG4gIGVkZ2VTY3JvbGxTcGVlZDogMSxcbiAgYW5pbWF0aW9uU3BlZWQ6IHVzZXJQcmVmZXJzUmVkdWNlZE1vdGlvbigpID8gMCA6IDEsXG4gIGlzU25hcE1vZGU6IGZhbHNlLFxuICBpc1dyYXBNb2RlOiBmYWxzZSxcbiAgaXNEeW5hbWljU2l6ZU1vZGU6IGZhbHNlLFxuICBpc1Bhc3RlQXRDdXJzb3JNb2RlOiBmYWxzZSxcbiAgY29sb3JTY2hlbWU6IFwic3lzdGVtXCJcbn0pO1xuZnVuY3Rpb24gZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMoKSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IHVuaXF1ZUlkKCksXG4gICAgY29sb3I6IGdldFJhbmRvbUNvbG9yKClcbiAgfTtcbn1cbmZ1bmN0aW9uIG1pZ3JhdGVVc2VyUHJlZmVyZW5jZXModXNlckRhdGEpIHtcbiAgaWYgKHVzZXJEYXRhID09PSBudWxsIHx8IHR5cGVvZiB1c2VyRGF0YSAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcygpO1xuICB9XG4gIGlmICghKFwidmVyc2lvblwiIGluIHVzZXJEYXRhKSB8fCAhKFwidXNlclwiIGluIHVzZXJEYXRhKSB8fCB0eXBlb2YgdXNlckRhdGEudmVyc2lvbiAhPT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcygpO1xuICB9XG4gIGNvbnN0IHNuYXBzaG90ID0gc3RydWN0dXJlZENsb25lKHVzZXJEYXRhKTtcbiAgbWlncmF0ZVNuYXBzaG90KHNuYXBzaG90KTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdXNlclR5cGVWYWxpZGF0b3IudmFsaWRhdGUoc25hcHNob3QudXNlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMoKTtcbiAgfVxufVxuZnVuY3Rpb24gbG9hZFVzZXJQcmVmZXJlbmNlcygpIHtcbiAgY29uc3QgdXNlckRhdGEgPSBKU09OLnBhcnNlKGdldEZyb21Mb2NhbFN0b3JhZ2UoVVNFUl9EQVRBX0tFWSkgfHwgXCJudWxsXCIpID8/IG51bGw7XG4gIHJldHVybiBtaWdyYXRlVXNlclByZWZlcmVuY2VzKHVzZXJEYXRhKTtcbn1cbmNvbnN0IGdsb2JhbFVzZXJQcmVmZXJlbmNlcyA9IGF0b20oXCJnbG9iYWxVc2VyRGF0YVwiLCBudWxsKTtcbmZ1bmN0aW9uIHN0b3JlVXNlclByZWZlcmVuY2VzKCkge1xuICBzZXRJbkxvY2FsU3RvcmFnZShcbiAgICBVU0VSX0RBVEFfS0VZLFxuICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHZlcnNpb246IENVUlJFTlRfVkVSU0lPTixcbiAgICAgIHVzZXI6IGdsb2JhbFVzZXJQcmVmZXJlbmNlcy5nZXQoKVxuICAgIH0pXG4gICk7XG59XG5mdW5jdGlvbiBzZXRVc2VyUHJlZmVyZW5jZXModXNlcikge1xuICB1c2VyVHlwZVZhbGlkYXRvci52YWxpZGF0ZSh1c2VyKTtcbiAgZ2xvYmFsVXNlclByZWZlcmVuY2VzLnNldCh1c2VyKTtcbiAgc3RvcmVVc2VyUHJlZmVyZW5jZXMoKTtcbiAgYnJvYWRjYXN0VXNlclByZWZlcmVuY2VzQ2hhbmdlKCk7XG59XG5jb25zdCBpc1Rlc3QgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCI7XG5jb25zdCBjaGFubmVsID0gdHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgIT09IFwidW5kZWZpbmVkXCIgJiYgIWlzVGVzdCA/IG5ldyBCcm9hZGNhc3RDaGFubmVsKFwidGxkcmF3LXVzZXItc3luY1wiKSA6IG51bGw7XG5jaGFubmVsPy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZSkgPT4ge1xuICBjb25zdCBkYXRhID0gZS5kYXRhO1xuICBpZiAoZGF0YT8udHlwZSA9PT0gYnJvYWRjYXN0RXZlbnRLZXkgJiYgZGF0YT8ub3JpZ2luICE9PSBnZXRCcm9hZGNhc3RPcmlnaW4oKSkge1xuICAgIGdsb2JhbFVzZXJQcmVmZXJlbmNlcy5zZXQobWlncmF0ZVVzZXJQcmVmZXJlbmNlcyhkYXRhLmRhdGEpKTtcbiAgfVxufSk7XG5sZXQgX2Jyb2FkY2FzdE9yaWdpbiA9IG51bGw7XG5mdW5jdGlvbiBnZXRCcm9hZGNhc3RPcmlnaW4oKSB7XG4gIGlmIChfYnJvYWRjYXN0T3JpZ2luID09PSBudWxsKSB7XG4gICAgX2Jyb2FkY2FzdE9yaWdpbiA9IHVuaXF1ZUlkKCk7XG4gIH1cbiAgcmV0dXJuIF9icm9hZGNhc3RPcmlnaW47XG59XG5jb25zdCBicm9hZGNhc3RFdmVudEtleSA9IFwidGxkcmF3LXVzZXItcHJlZmVyZW5jZXMtY2hhbmdlXCI7XG5mdW5jdGlvbiBicm9hZGNhc3RVc2VyUHJlZmVyZW5jZXNDaGFuZ2UoKSB7XG4gIGNoYW5uZWw/LnBvc3RNZXNzYWdlKHtcbiAgICB0eXBlOiBicm9hZGNhc3RFdmVudEtleSxcbiAgICBvcmlnaW46IGdldEJyb2FkY2FzdE9yaWdpbigpLFxuICAgIGRhdGE6IHtcbiAgICAgIHVzZXI6IGdldFVzZXJQcmVmZXJlbmNlcygpLFxuICAgICAgdmVyc2lvbjogQ1VSUkVOVF9WRVJTSU9OXG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFVzZXJQcmVmZXJlbmNlcygpIHtcbiAgbGV0IHByZWZzID0gZ2xvYmFsVXNlclByZWZlcmVuY2VzLmdldCgpO1xuICBpZiAoIXByZWZzKSB7XG4gICAgcHJlZnMgPSBsb2FkVXNlclByZWZlcmVuY2VzKCk7XG4gICAgc2V0VXNlclByZWZlcmVuY2VzKHByZWZzKTtcbiAgfVxuICByZXR1cm4gcHJlZnM7XG59XG5leHBvcnQge1xuICBVU0VSX0NPTE9SUyxcbiAgZGVmYXVsdFVzZXJQcmVmZXJlbmNlcyxcbiAgZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMsXG4gIGdldFVzZXJQcmVmZXJlbmNlcyxcbiAgc2V0VXNlclByZWZlcmVuY2VzLFxuICB1c2VyUHJlZmVyc1JlZHVjZWRNb3Rpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFVzZXJQcmVmZXJlbmNlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLSchemaFromUtils: () => (/* binding */ createTLSchemaFromUtils),\n/* harmony export */   createTLStore: () => (/* binding */ createTLStore),\n/* harmony export */   inlineBase64AssetStore: () => (/* binding */ inlineBase64AssetStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../editor/Editor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\");\n/* harmony import */ var _TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./defaultBindings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\");\n/* harmony import */ var _defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n\n\n\n\n\n\n\nconst defaultAssetResolve = (asset) => asset.props.src;\nconst inlineBase64AssetStore = {\n  upload: (_, file) => _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.FileHelpers.blobToDataUrl(file)\n};\nfunction createTLSchemaFromUtils(opts) {\n  if (\"schema\" in opts && opts.schema) return opts.schema;\n  return (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.createTLSchema)({\n    shapes: \"shapeUtils\" in opts && opts.shapeUtils ? utilsToMap((0,_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_6__.checkShapesAndAddCore)(opts.shapeUtils)) : void 0,\n    bindings: \"bindingUtils\" in opts && opts.bindingUtils ? utilsToMap((0,_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_5__.checkBindings)(opts.bindingUtils)) : void 0,\n    migrations: \"migrations\" in opts ? opts.migrations : void 0\n  });\n}\nfunction createTLStore({\n  initialData,\n  defaultName = \"\",\n  id,\n  assets = inlineBase64AssetStore,\n  onMount,\n  collaboration,\n  ...rest\n} = {}) {\n  const schema = createTLSchemaFromUtils(rest);\n  const store = new _tldraw_store__WEBPACK_IMPORTED_MODULE_0__.Store({\n    id,\n    schema,\n    initialData,\n    props: {\n      defaultName,\n      assets: {\n        upload: assets.upload,\n        resolve: assets.resolve ?? defaultAssetResolve\n      },\n      onMount: (editor) => {\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.assert)(editor instanceof _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_3__.Editor);\n        onMount?.(editor);\n      },\n      collaboration\n    }\n  });\n  if (rest.snapshot) {\n    if (initialData) throw new Error(\"Cannot provide both initialData and snapshot\");\n    (0,_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_4__.loadSnapshot)(store, rest.snapshot);\n  }\n  return store;\n}\nfunction utilsToMap(utils) {\n  return Object.fromEntries(\n    utils.map((s) => [\n      s.type,\n      {\n        props: s.props,\n        migrations: s.migrations\n      }\n    ])\n  );\n}\n\n//# sourceMappingURL=createTLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXNDO0FBR1o7QUFDMEI7QUFDTjtBQUNRO0FBQ0E7QUFDTTtBQUM1RDtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0VBQWM7QUFDdkIsaUVBQWlFLHlFQUFxQjtBQUN0Rix1RUFBdUUsbUVBQWE7QUFDcEY7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQSxvQkFBb0IsZ0RBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFFBQVEscURBQU0sbUJBQW1CLHNEQUFNO0FBQ3ZDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUksbUVBQVk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uZmlnL2NyZWF0ZVRMU3RvcmUubWpzP2RlYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RvcmUgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlVExTY2hlbWFcbn0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IEZpbGVIZWxwZXJzLCBhc3NlcnQgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcIi4uL2VkaXRvci9FZGl0b3IubWpzXCI7XG5pbXBvcnQgeyBsb2FkU25hcHNob3QgfSBmcm9tIFwiLi9UTEVkaXRvclNuYXBzaG90Lm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tCaW5kaW5ncyB9IGZyb20gXCIuL2RlZmF1bHRCaW5kaW5ncy5tanNcIjtcbmltcG9ydCB7IGNoZWNrU2hhcGVzQW5kQWRkQ29yZSB9IGZyb20gXCIuL2RlZmF1bHRTaGFwZXMubWpzXCI7XG5jb25zdCBkZWZhdWx0QXNzZXRSZXNvbHZlID0gKGFzc2V0KSA9PiBhc3NldC5wcm9wcy5zcmM7XG5jb25zdCBpbmxpbmVCYXNlNjRBc3NldFN0b3JlID0ge1xuICB1cGxvYWQ6IChfLCBmaWxlKSA9PiBGaWxlSGVscGVycy5ibG9iVG9EYXRhVXJsKGZpbGUpXG59O1xuZnVuY3Rpb24gY3JlYXRlVExTY2hlbWFGcm9tVXRpbHMob3B0cykge1xuICBpZiAoXCJzY2hlbWFcIiBpbiBvcHRzICYmIG9wdHMuc2NoZW1hKSByZXR1cm4gb3B0cy5zY2hlbWE7XG4gIHJldHVybiBjcmVhdGVUTFNjaGVtYSh7XG4gICAgc2hhcGVzOiBcInNoYXBlVXRpbHNcIiBpbiBvcHRzICYmIG9wdHMuc2hhcGVVdGlscyA/IHV0aWxzVG9NYXAoY2hlY2tTaGFwZXNBbmRBZGRDb3JlKG9wdHMuc2hhcGVVdGlscykpIDogdm9pZCAwLFxuICAgIGJpbmRpbmdzOiBcImJpbmRpbmdVdGlsc1wiIGluIG9wdHMgJiYgb3B0cy5iaW5kaW5nVXRpbHMgPyB1dGlsc1RvTWFwKGNoZWNrQmluZGluZ3Mob3B0cy5iaW5kaW5nVXRpbHMpKSA6IHZvaWQgMCxcbiAgICBtaWdyYXRpb25zOiBcIm1pZ3JhdGlvbnNcIiBpbiBvcHRzID8gb3B0cy5taWdyYXRpb25zIDogdm9pZCAwXG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlVExTdG9yZSh7XG4gIGluaXRpYWxEYXRhLFxuICBkZWZhdWx0TmFtZSA9IFwiXCIsXG4gIGlkLFxuICBhc3NldHMgPSBpbmxpbmVCYXNlNjRBc3NldFN0b3JlLFxuICBvbk1vdW50LFxuICBjb2xsYWJvcmF0aW9uLFxuICAuLi5yZXN0XG59ID0ge30pIHtcbiAgY29uc3Qgc2NoZW1hID0gY3JlYXRlVExTY2hlbWFGcm9tVXRpbHMocmVzdCk7XG4gIGNvbnN0IHN0b3JlID0gbmV3IFN0b3JlKHtcbiAgICBpZCxcbiAgICBzY2hlbWEsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgcHJvcHM6IHtcbiAgICAgIGRlZmF1bHROYW1lLFxuICAgICAgYXNzZXRzOiB7XG4gICAgICAgIHVwbG9hZDogYXNzZXRzLnVwbG9hZCxcbiAgICAgICAgcmVzb2x2ZTogYXNzZXRzLnJlc29sdmUgPz8gZGVmYXVsdEFzc2V0UmVzb2x2ZVxuICAgICAgfSxcbiAgICAgIG9uTW91bnQ6IChlZGl0b3IpID0+IHtcbiAgICAgICAgYXNzZXJ0KGVkaXRvciBpbnN0YW5jZW9mIEVkaXRvcik7XG4gICAgICAgIG9uTW91bnQ/LihlZGl0b3IpO1xuICAgICAgfSxcbiAgICAgIGNvbGxhYm9yYXRpb25cbiAgICB9XG4gIH0pO1xuICBpZiAocmVzdC5zbmFwc2hvdCkge1xuICAgIGlmIChpbml0aWFsRGF0YSkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHByb3ZpZGUgYm90aCBpbml0aWFsRGF0YSBhbmQgc25hcHNob3RcIik7XG4gICAgbG9hZFNuYXBzaG90KHN0b3JlLCByZXN0LnNuYXBzaG90KTtcbiAgfVxuICByZXR1cm4gc3RvcmU7XG59XG5mdW5jdGlvbiB1dGlsc1RvTWFwKHV0aWxzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgdXRpbHMubWFwKChzKSA9PiBbXG4gICAgICBzLnR5cGUsXG4gICAgICB7XG4gICAgICAgIHByb3BzOiBzLnByb3BzLFxuICAgICAgICBtaWdyYXRpb25zOiBzLm1pZ3JhdGlvbnNcbiAgICAgIH1cbiAgICBdKVxuICApO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlVExTY2hlbWFGcm9tVXRpbHMsXG4gIGNyZWF0ZVRMU3RvcmUsXG4gIGlubGluZUJhc2U2NEFzc2V0U3RvcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVUTFN0b3JlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLUser: () => (/* binding */ createTLUser),\n/* harmony export */   useTldrawUser: () => (/* binding */ useTldrawUser)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n/* harmony import */ var _TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\n\n\n\n\n\nconst defaultLocalStorageUserPrefs = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n  \"defaultLocalStorageUserPrefs\",\n  () => (0,_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_4__.getUserPreferences)()\n);\nfunction createTLUser(opts = {}) {\n  return {\n    userPreferences: opts.userPreferences ?? defaultLocalStorageUserPrefs,\n    setUserPreferences: opts.setUserPreferences ?? _TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_4__.setUserPreferences\n  };\n}\nfunction useTldrawUser(opts) {\n  const prefs = (0,_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_3__.useShallowObjectIdentity)(opts.userPreferences ?? defaultLocalStorageUserPrefs);\n  const userAtom = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useAtom)(\"userAtom\", prefs);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    userAtom.set(prefs);\n  }, [prefs, userAtom]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => createTLUser({\n      userPreferences: (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"userPreferences\", () => {\n        const userStuff = userAtom.get();\n        return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isSignal)(userStuff) ? userStuff.get() : userStuff;\n      }),\n      setUserPreferences: opts.setUserPreferences\n    }),\n    [userAtom, opts.setUserPreferences]\n  );\n}\n\n//# sourceMappingURL=createTLUser.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9jcmVhdGVUTFVzZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBbUQ7QUFDTDtBQUNIO0FBQ3lCO0FBQ2E7QUFDakYscUNBQXFDLHVEQUFRO0FBQzdDO0FBQ0EsUUFBUSwwRUFBa0I7QUFDMUI7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBLG1EQUFtRCxzRUFBa0I7QUFDckU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdGQUF3QjtBQUN4QyxtQkFBbUIsNERBQU87QUFDMUIsRUFBRSxnREFBUztBQUNYO0FBQ0EsR0FBRztBQUNILFNBQVMsOENBQU87QUFDaEI7QUFDQSx1QkFBdUIsdURBQVE7QUFDL0I7QUFDQSxlQUFlLHVEQUFRO0FBQ3ZCLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9jcmVhdGVUTFVzZXIubWpzPzk3ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIGlzU2lnbmFsIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHVzZUF0b20gfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkgfSBmcm9tIFwiLi4vaG9va3MvdXNlSWRlbnRpdHkubWpzXCI7XG5pbXBvcnQgeyBnZXRVc2VyUHJlZmVyZW5jZXMsIHNldFVzZXJQcmVmZXJlbmNlcyB9IGZyb20gXCIuL1RMVXNlclByZWZlcmVuY2VzLm1qc1wiO1xuY29uc3QgZGVmYXVsdExvY2FsU3RvcmFnZVVzZXJQcmVmcyA9IGNvbXB1dGVkKFxuICBcImRlZmF1bHRMb2NhbFN0b3JhZ2VVc2VyUHJlZnNcIixcbiAgKCkgPT4gZ2V0VXNlclByZWZlcmVuY2VzKClcbik7XG5mdW5jdGlvbiBjcmVhdGVUTFVzZXIob3B0cyA9IHt9KSB7XG4gIHJldHVybiB7XG4gICAgdXNlclByZWZlcmVuY2VzOiBvcHRzLnVzZXJQcmVmZXJlbmNlcyA/PyBkZWZhdWx0TG9jYWxTdG9yYWdlVXNlclByZWZzLFxuICAgIHNldFVzZXJQcmVmZXJlbmNlczogb3B0cy5zZXRVc2VyUHJlZmVyZW5jZXMgPz8gc2V0VXNlclByZWZlcmVuY2VzXG4gIH07XG59XG5mdW5jdGlvbiB1c2VUbGRyYXdVc2VyKG9wdHMpIHtcbiAgY29uc3QgcHJlZnMgPSB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkob3B0cy51c2VyUHJlZmVyZW5jZXMgPz8gZGVmYXVsdExvY2FsU3RvcmFnZVVzZXJQcmVmcyk7XG4gIGNvbnN0IHVzZXJBdG9tID0gdXNlQXRvbShcInVzZXJBdG9tXCIsIHByZWZzKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB1c2VyQXRvbS5zZXQocHJlZnMpO1xuICB9LCBbcHJlZnMsIHVzZXJBdG9tXSk7XG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZVRMVXNlcih7XG4gICAgICB1c2VyUHJlZmVyZW5jZXM6IGNvbXB1dGVkKFwidXNlclByZWZlcmVuY2VzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlclN0dWZmID0gdXNlckF0b20uZ2V0KCk7XG4gICAgICAgIHJldHVybiBpc1NpZ25hbCh1c2VyU3R1ZmYpID8gdXNlclN0dWZmLmdldCgpIDogdXNlclN0dWZmO1xuICAgICAgfSksXG4gICAgICBzZXRVc2VyUHJlZmVyZW5jZXM6IG9wdHMuc2V0VXNlclByZWZlcmVuY2VzXG4gICAgfSksXG4gICAgW3VzZXJBdG9tLCBvcHRzLnNldFVzZXJQcmVmZXJlbmNlc11cbiAgKTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVRMVXNlcixcbiAgdXNlVGxkcmF3VXNlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVRMVXNlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkBindings: () => (/* binding */ checkBindings)\n/* harmony export */ });\nfunction checkBindings(customBindings) {\n  const bindings = [];\n  const addedCustomBindingTypes = /* @__PURE__ */ new Set();\n  for (const customBinding of customBindings) {\n    if (addedCustomBindingTypes.has(customBinding.type)) {\n      throw new Error(`Binding type \"${customBinding.type}\" is defined more than once`);\n    }\n    bindings.push(customBinding);\n    addedCustomBindingTypes.add(customBinding.type);\n  }\n  return bindings;\n}\n\n//# sourceMappingURL=defaultBindings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0QmluZGluZ3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG1CQUFtQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0QmluZGluZ3MubWpzPzZhMWIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY2hlY2tCaW5kaW5ncyhjdXN0b21CaW5kaW5ncykge1xuICBjb25zdCBiaW5kaW5ncyA9IFtdO1xuICBjb25zdCBhZGRlZEN1c3RvbUJpbmRpbmdUeXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGZvciAoY29uc3QgY3VzdG9tQmluZGluZyBvZiBjdXN0b21CaW5kaW5ncykge1xuICAgIGlmIChhZGRlZEN1c3RvbUJpbmRpbmdUeXBlcy5oYXMoY3VzdG9tQmluZGluZy50eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBCaW5kaW5nIHR5cGUgXCIke2N1c3RvbUJpbmRpbmcudHlwZX1cIiBpcyBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlYCk7XG4gICAgfVxuICAgIGJpbmRpbmdzLnB1c2goY3VzdG9tQmluZGluZyk7XG4gICAgYWRkZWRDdXN0b21CaW5kaW5nVHlwZXMuYWRkKGN1c3RvbUJpbmRpbmcudHlwZSk7XG4gIH1cbiAgcmV0dXJuIGJpbmRpbmdzO1xufVxuZXhwb3J0IHtcbiAgY2hlY2tCaW5kaW5nc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRCaW5kaW5ncy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkShapesAndAddCore: () => (/* binding */ checkShapesAndAddCore),\n/* harmony export */   coreShapes: () => (/* binding */ coreShapes)\n/* harmony export */ });\n/* harmony import */ var _editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../editor/shapes/group/GroupShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\");\n\nconst coreShapes = [\n  // created by grouping interactions, probably the corest core shape that we have\n  _editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_0__.GroupShapeUtil\n];\nconst coreShapeTypes = new Set(coreShapes.map((s) => s.type));\nfunction checkShapesAndAddCore(customShapes) {\n  const shapes = [...coreShapes];\n  const addedCustomShapeTypes = /* @__PURE__ */ new Set();\n  for (const customShape of customShapes) {\n    if (coreShapeTypes.has(customShape.type)) {\n      throw new Error(\n        `Shape type \"${customShape.type}\" is a core shapes type and cannot be overridden`\n      );\n    }\n    if (addedCustomShapeTypes.has(customShape.type)) {\n      throw new Error(`Shape type \"${customShape.type}\" is defined more than once`);\n    }\n    shapes.push(customShape);\n    addedCustomShapeTypes.add(customShape.type);\n  }\n  return shapes;\n}\n\n//# sourceMappingURL=defaultShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkU7QUFDM0U7QUFDQTtBQUNBLEVBQUUsbUZBQWM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQkFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGlCQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qcz9hN2RmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyb3VwU2hhcGVVdGlsIH0gZnJvbSBcIi4uL2VkaXRvci9zaGFwZXMvZ3JvdXAvR3JvdXBTaGFwZVV0aWwubWpzXCI7XG5jb25zdCBjb3JlU2hhcGVzID0gW1xuICAvLyBjcmVhdGVkIGJ5IGdyb3VwaW5nIGludGVyYWN0aW9ucywgcHJvYmFibHkgdGhlIGNvcmVzdCBjb3JlIHNoYXBlIHRoYXQgd2UgaGF2ZVxuICBHcm91cFNoYXBlVXRpbFxuXTtcbmNvbnN0IGNvcmVTaGFwZVR5cGVzID0gbmV3IFNldChjb3JlU2hhcGVzLm1hcCgocykgPT4gcy50eXBlKSk7XG5mdW5jdGlvbiBjaGVja1NoYXBlc0FuZEFkZENvcmUoY3VzdG9tU2hhcGVzKSB7XG4gIGNvbnN0IHNoYXBlcyA9IFsuLi5jb3JlU2hhcGVzXTtcbiAgY29uc3QgYWRkZWRDdXN0b21TaGFwZVR5cGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZm9yIChjb25zdCBjdXN0b21TaGFwZSBvZiBjdXN0b21TaGFwZXMpIHtcbiAgICBpZiAoY29yZVNoYXBlVHlwZXMuaGFzKGN1c3RvbVNoYXBlLnR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBTaGFwZSB0eXBlIFwiJHtjdXN0b21TaGFwZS50eXBlfVwiIGlzIGEgY29yZSBzaGFwZXMgdHlwZSBhbmQgY2Fubm90IGJlIG92ZXJyaWRkZW5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoYWRkZWRDdXN0b21TaGFwZVR5cGVzLmhhcyhjdXN0b21TaGFwZS50eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTaGFwZSB0eXBlIFwiJHtjdXN0b21TaGFwZS50eXBlfVwiIGlzIGRlZmluZWQgbW9yZSB0aGFuIG9uY2VgKTtcbiAgICB9XG4gICAgc2hhcGVzLnB1c2goY3VzdG9tU2hhcGUpO1xuICAgIGFkZGVkQ3VzdG9tU2hhcGVUeXBlcy5hZGQoY3VzdG9tU2hhcGUudHlwZSk7XG4gIH1cbiAgcmV0dXJuIHNoYXBlcztcbn1cbmV4cG9ydCB7XG4gIGNoZWNrU2hhcGVzQW5kQWRkQ29yZSxcbiAgY29yZVNoYXBlc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRTaGFwZXMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_ANIMATION_OPTIONS: () => (/* binding */ DEFAULT_ANIMATION_OPTIONS),\n/* harmony export */   DEFAULT_CAMERA_OPTIONS: () => (/* binding */ DEFAULT_CAMERA_OPTIONS),\n/* harmony export */   INTERNAL_POINTER_IDS: () => (/* binding */ INTERNAL_POINTER_IDS),\n/* harmony export */   LEFT_MOUSE_BUTTON: () => (/* binding */ LEFT_MOUSE_BUTTON),\n/* harmony export */   MIDDLE_MOUSE_BUTTON: () => (/* binding */ MIDDLE_MOUSE_BUTTON),\n/* harmony export */   RIGHT_MOUSE_BUTTON: () => (/* binding */ RIGHT_MOUSE_BUTTON),\n/* harmony export */   SIDES: () => (/* binding */ SIDES),\n/* harmony export */   STYLUS_ERASER_BUTTON: () => (/* binding */ STYLUS_ERASER_BUTTON),\n/* harmony export */   ZOOM_TO_FIT_PADDING: () => (/* binding */ ZOOM_TO_FIT_PADDING)\n/* harmony export */ });\n/* harmony import */ var _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n\nconst DEFAULT_CAMERA_OPTIONS = {\n  isLocked: false,\n  wheelBehavior: \"pan\",\n  panSpeed: 1,\n  zoomSpeed: 1,\n  zoomSteps: [0.1, 0.25, 0.5, 1, 2, 4, 8]\n};\nconst DEFAULT_ANIMATION_OPTIONS = {\n  duration: 0,\n  easing: _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_0__.EASINGS.easeInOutCubic\n};\nconst INTERNAL_POINTER_IDS = {\n  CAMERA_MOVE: -10\n};\nconst SIDES = [\"top\", \"right\", \"bottom\", \"left\"];\nconst LEFT_MOUSE_BUTTON = 0;\nconst RIGHT_MOUSE_BUTTON = 2;\nconst MIDDLE_MOUSE_BUTTON = 1;\nconst STYLUS_ERASER_BUTTON = 5;\nconst ZOOM_TO_FIT_PADDING = 128;\n\n//# sourceMappingURL=constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbnN0YW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDREQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb25zdGFudHMubWpzP2FjYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRUFTSU5HUyB9IGZyb20gXCIuL3ByaW1pdGl2ZXMvZWFzaW5ncy5tanNcIjtcbmNvbnN0IERFRkFVTFRfQ0FNRVJBX09QVElPTlMgPSB7XG4gIGlzTG9ja2VkOiBmYWxzZSxcbiAgd2hlZWxCZWhhdmlvcjogXCJwYW5cIixcbiAgcGFuU3BlZWQ6IDEsXG4gIHpvb21TcGVlZDogMSxcbiAgem9vbVN0ZXBzOiBbMC4xLCAwLjI1LCAwLjUsIDEsIDIsIDQsIDhdXG59O1xuY29uc3QgREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyA9IHtcbiAgZHVyYXRpb246IDAsXG4gIGVhc2luZzogRUFTSU5HUy5lYXNlSW5PdXRDdWJpY1xufTtcbmNvbnN0IElOVEVSTkFMX1BPSU5URVJfSURTID0ge1xuICBDQU1FUkFfTU9WRTogLTEwXG59O1xuY29uc3QgU0lERVMgPSBbXCJ0b3BcIiwgXCJyaWdodFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIl07XG5jb25zdCBMRUZUX01PVVNFX0JVVFRPTiA9IDA7XG5jb25zdCBSSUdIVF9NT1VTRV9CVVRUT04gPSAyO1xuY29uc3QgTUlERExFX01PVVNFX0JVVFRPTiA9IDE7XG5jb25zdCBTVFlMVVNfRVJBU0VSX0JVVFRPTiA9IDU7XG5jb25zdCBaT09NX1RPX0ZJVF9QQURESU5HID0gMTI4O1xuZXhwb3J0IHtcbiAgREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyxcbiAgREVGQVVMVF9DQU1FUkFfT1BUSU9OUyxcbiAgSU5URVJOQUxfUE9JTlRFUl9JRFMsXG4gIExFRlRfTU9VU0VfQlVUVE9OLFxuICBNSURETEVfTU9VU0VfQlVUVE9OLFxuICBSSUdIVF9NT1VTRV9CVVRUT04sXG4gIFNJREVTLFxuICBTVFlMVVNfRVJBU0VSX0JVVFRPTixcbiAgWk9PTV9UT19GSVRfUEFERElOR1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Editor: () => (/* binding */ Editor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! eventemitter3 */ \"(ssr)/./node_modules/eventemitter3/index.js\");\n/* harmony import */ var _config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config/TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _config_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../config/defaultBindings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\");\n/* harmony import */ var _config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../config/defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _exports_exportToSvg_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../exports/exportToSvg.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/exportToSvg.mjs\");\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n/* harmony import */ var _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../globals/menus.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs\");\n/* harmony import */ var _globals_time_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../globals/time.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/time.mjs\");\n/* harmony import */ var _options_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../options.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../primitives/intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../utils/SharedStylesMap.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\");\n/* harmony import */ var _utils_assets_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../utils/assets.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../utils/deepLinks.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/deepLinks.mjs\");\n/* harmony import */ var _utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../utils/getIncrementedName.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\");\n/* harmony import */ var _utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../utils/keyboard.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\");\n/* harmony import */ var _utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../utils/reorderShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs\");\n/* harmony import */ var _utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../utils/rotation.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\");\n/* harmony import */ var _derivations_bindingsIndex_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./derivations/bindingsIndex.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs\");\n/* harmony import */ var _derivations_notVisibleShapes_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./derivations/notVisibleShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs\");\n/* harmony import */ var _derivations_parentsToChildren_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./derivations/parentsToChildren.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs\");\n/* harmony import */ var _derivations_shapeIdsInCurrentPage_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./derivations/shapeIdsInCurrentPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs\");\n/* harmony import */ var _managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./managers/ClickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\");\n/* harmony import */ var _managers_EdgeScrollManager_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./managers/EdgeScrollManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EdgeScrollManager.mjs\");\n/* harmony import */ var _managers_FocusManager_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./managers/FocusManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs\");\n/* harmony import */ var _managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./managers/HistoryManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\");\n/* harmony import */ var _managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./managers/ScribbleManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\");\n/* harmony import */ var _managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./managers/SnapManager/SnapManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\");\n/* harmony import */ var _managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./managers/TextManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\");\n/* harmony import */ var _managers_TickManager_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./managers/TickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs\");\n/* harmony import */ var _managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./managers/UserPreferencesManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\");\n/* harmony import */ var _tools_RootState_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./tools/RootState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar __setMetaKeyTimeout_dec, __setCtrlKeyTimeout_dec, __setAltKeyTimeout_dec, __setShiftKeyTimeout_dec, _getIsReadonly_dec, _getIsFocused_dec, _getSharedOpacity_dec, _getSharedStyles_dec, __getSelectionSharedStyles_dec, __getBindingsIndexCache_dec, _getCurrentPageRenderingShapesSorted_dec, _getCurrentPageShapesSorted_dec, _getCurrentPageShapes_dec, _getCurrentPageBounds_dec, _getCulledShapes_dec, __notVisibleShapes_dec, __getShapeMaskedPageBoundsCache_dec, __getShapeMaskCache_dec, __getShapeClipPathCache_dec, __getShapePageBoundsCache_dec, __getShapePageTransformCache_dec, __getShapeHandlesCache_dec, __getShapeGeometryCache_dec, __getAllAssetsQuery_dec, _getCurrentPageShapeIdsSorted_dec, _getCurrentPageId_dec, _getPages_dec, __getAllPagesQuery_dec, _getRenderingShapes_dec, _getCollaboratorsOnCurrentPage_dec, _getCollaborators_dec, __getCollaboratorsQuery_dec, _getViewportPageBounds_dec, _getViewportScreenCenter_dec, _getViewportScreenBounds_dec, _getZoomLevel_dec, _getCameraForFollowing_dec, _getViewportPageBoundsForFollowing_dec, _getCamera_dec, __unsafe_getCameraId_dec, _getErasingShapes_dec, _getErasingShapeIds_dec, _getHintingShape_dec, _getHintingShapeIds_dec, _getHoveredShape_dec, _getHoveredShapeId_dec, _getEditingShape_dec, _getEditingShapeId_dec, _getFocusedGroup_dec, _getFocusedGroupId_dec, _getSelectionRotatedScreenBounds_dec, _getSelectionRotatedPageBounds_dec, _getSelectionRotation_dec, _getSelectionPageBounds_dec, _getOnlySelectedShape_dec, _getOnlySelectedShapeId_dec, _getSelectedShapes_dec, _getSelectedShapeIds_dec, __getCurrentPageStateId_dec, _getCurrentPageState_dec, __getPageStatesQuery_dec, _getPageStates_dec, _getIsMenuOpen_dec, _getOpenMenus_dec, _getInstanceState_dec, _getDocumentSettings_dec, _getCurrentToolId_dec, _getCurrentTool_dec, _getPath_dec, _getCanRedo_dec, _getCanUndo_dec, _getIsShapeHiddenCache_dec, _a, _init;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Editor extends (_a = eventemitter3__WEBPACK_IMPORTED_MODULE_4__, _getIsShapeHiddenCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCanUndo_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCanRedo_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getPath_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentTool_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentToolId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getDocumentSettings_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getInstanceState_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getOpenMenus_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsMenuOpen_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getPageStates_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getPageStatesQuery_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageState_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getCurrentPageStateId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectedShapeIds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectedShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getOnlySelectedShapeId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getOnlySelectedShape_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectionPageBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectionRotation_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectionRotatedPageBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSelectionRotatedScreenBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getFocusedGroupId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getFocusedGroup_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getEditingShapeId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getEditingShape_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getHoveredShapeId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getHoveredShape_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getHintingShapeIds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getHintingShape_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getErasingShapeIds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getErasingShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __unsafe_getCameraId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCamera_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getViewportPageBoundsForFollowing_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCameraForFollowing_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getZoomLevel_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getViewportScreenBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getViewportScreenCenter_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getViewportPageBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getCollaboratorsQuery_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCollaborators_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCollaboratorsOnCurrentPage_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getRenderingShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getAllPagesQuery_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getPages_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageShapeIdsSorted_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getAllAssetsQuery_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapeGeometryCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapeHandlesCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapePageTransformCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapePageBoundsCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapeClipPathCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapeMaskCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getShapeMaskedPageBoundsCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __notVisibleShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCulledShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageBounds_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageShapesSorted_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentPageRenderingShapesSorted_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getBindingsIndexCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __getSelectionSharedStyles_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSharedStyles_dec = [(0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)({ isEqual: (a, b) => a.equals(b) })], _getSharedOpacity_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsFocused_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsReadonly_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], __setShiftKeyTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.bind], __setAltKeyTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.bind], __setCtrlKeyTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.bind], __setMetaKeyTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.bind], _a) {\n  constructor({\n    store,\n    user,\n    shapeUtils,\n    bindingUtils,\n    tools,\n    getContainer,\n    cameraOptions,\n    initialState,\n    autoFocus,\n    inferDarkMode,\n    options,\n    isShapeHidden\n  }) {\n    super();\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"_isShapeHiddenPredicate\");\n    __publicField(this, \"options\");\n    __publicField(this, \"contextId\", (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.uniqueId)());\n    /**\n     * The editor's store\n     *\n     * @public\n     */\n    __publicField(this, \"store\");\n    /**\n     * The root state of the statechart.\n     *\n     * @public\n     */\n    __publicField(this, \"root\");\n    /**\n     * A set of functions to call when the app is disposed.\n     *\n     * @public\n     */\n    __publicField(this, \"disposables\", /* @__PURE__ */ new Set());\n    /**\n     * Whether the editor is disposed.\n     *\n     * @public\n     */\n    __publicField(this, \"isDisposed\", false);\n    /** @internal */\n    __publicField(this, \"_tickManager\");\n    /**\n     * A manager for the app's snapping feature.\n     *\n     * @public\n     */\n    __publicField(this, \"snaps\");\n    /**\n     * A manager for the any asynchronous events and making sure they're\n     * cleaned up upon disposal.\n     *\n     * @public\n     */\n    __publicField(this, \"timers\", _globals_time_mjs__WEBPACK_IMPORTED_MODULE_13__.tltime.forContext(this.contextId));\n    /**\n     * A manager for the user and their preferences.\n     *\n     * @public\n     */\n    __publicField(this, \"user\");\n    /**\n     * A helper for measuring text.\n     *\n     * @public\n     */\n    __publicField(this, \"textMeasure\");\n    /**\n     * A manager for the editor's environment.\n     *\n     * @deprecated This is deprecated and will be removed in a future version. Use the `tlenv` global export instead.\n     * @public\n     */\n    __publicField(this, \"environment\", _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_11__.tlenv);\n    /**\n     * A manager for the editor's scribbles.\n     *\n     * @public\n     */\n    __publicField(this, \"scribbles\");\n    /**\n     * A manager for side effects and correct state enforcement. See {@link @tldraw/store#StoreSideEffects} for details.\n     *\n     * @public\n     */\n    __publicField(this, \"sideEffects\");\n    /**\n     * A manager for moving the camera when the mouse is at the edge of the screen.\n     *\n     * @public\n     */\n    __publicField(this, \"edgeScrollManager\");\n    /**\n     * A manager for ensuring correct focus. See FocusManager for details.\n     *\n     * @internal\n     */\n    __publicField(this, \"focusManager\");\n    /**\n     * The current HTML element containing the editor.\n     *\n     * @example\n     * ```ts\n     * const container = editor.getContainer()\n     * ```\n     *\n     * @public\n     */\n    __publicField(this, \"getContainer\");\n    /* ------------------- Shape Utils ------------------ */\n    /**\n     * A map of shape utility classes (TLShapeUtils) by shape type.\n     *\n     * @public\n     */\n    __publicField(this, \"shapeUtils\");\n    __publicField(this, \"styleProps\");\n    /* ------------------- Binding Utils ------------------ */\n    /**\n     * A map of shape utility classes (TLShapeUtils) by shape type.\n     *\n     * @public\n     */\n    __publicField(this, \"bindingUtils\");\n    /* --------------------- History -------------------- */\n    /**\n     * A manager for the app's history.\n     *\n     * @readonly\n     */\n    __publicField(this, \"history\");\n    __publicField(this, \"_shouldIgnoreShapeLock\", false);\n    /** @internal */\n    __publicField(this, \"_crashingError\", null);\n    /** @internal */\n    __publicField(this, \"_isChangingStyleTimeout\", -1);\n    // Menus\n    __publicField(this, \"menus\", _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_12__.tlmenus.forContext(this.contextId));\n    __publicField(this, \"_cameraOptions\", (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"camera options\", _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_CAMERA_OPTIONS));\n    /** @internal */\n    __publicField(this, \"_viewportAnimation\", null);\n    // Viewport\n    /** @internal */\n    __publicField(this, \"_willSetInitialBounds\", true);\n    // Following\n    // When we are 'locked on' to a user, our camera is derived from their camera.\n    __publicField(this, \"_isLockedOnFollowingUser\", (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"isLockedOnFollowingUser\", false));\n    // Camera state\n    // Camera state does two things: first, it allows us to subscribe to whether\n    // the camera is moving or not; and second, it allows us to update the rendering\n    // shapes on the canvas. Changing the rendering shapes may cause shapes to\n    // unmount / remount in the DOM, which is expensive; and computing visibility is\n    // also expensive in large projects. For this reason, we use a second bounding\n    // box just for rendering, and we only update after the camera stops moving.\n    __publicField(this, \"_cameraState\", (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"camera state\", \"idle\"));\n    __publicField(this, \"_cameraStateTimeoutRemaining\", 0);\n    /* @internal */\n    __publicField(this, \"_currentPageShapeIds\");\n    // Parents and children\n    /**\n     * A cache of parents to children.\n     *\n     * @internal\n     */\n    __publicField(this, \"_parentIdsToChildIds\");\n    __publicField(this, \"animatingShapes\", /* @__PURE__ */ new Map());\n    /* --------------------- Content -------------------- */\n    /** @internal */\n    __publicField(this, \"externalAssetContentHandlers\", {\n      file: null,\n      url: null\n    });\n    /** @internal */\n    __publicField(this, \"temporaryAssetPreview\", /* @__PURE__ */ new Map());\n    /** @internal */\n    __publicField(this, \"externalContentHandlers\", {\n      text: null,\n      files: null,\n      embed: null,\n      \"svg-text\": null,\n      url: null\n    });\n    /* --------------------- Events --------------------- */\n    /**\n     * The app's current input state.\n     *\n     * @public\n     */\n    __publicField(this, \"inputs\", {\n      /** The most recent pointer down's position in the current page space. */\n      originPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** The most recent pointer down's position in screen space. */\n      originScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** The previous pointer position in the current page space. */\n      previousPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** The previous pointer position in screen space. */\n      previousScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** The most recent pointer position in the current page space. */\n      currentPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** The most recent pointer position in screen space. */\n      currentScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(),\n      /** A set containing the currently pressed keys. */\n      keys: /* @__PURE__ */ new Set(),\n      /** A set containing the currently pressed buttons. */\n      buttons: /* @__PURE__ */ new Set(),\n      /** Whether the input is from a pe. */\n      isPen: false,\n      /** Whether the shift key is currently pressed. */\n      shiftKey: false,\n      /** Whether the meta key is currently pressed. */\n      metaKey: false,\n      /** Whether the control or command key is currently pressed. */\n      ctrlKey: false,\n      /** Whether the alt or option key is currently pressed. */\n      altKey: false,\n      /** Whether the user is dragging. */\n      isDragging: false,\n      /** Whether the user is pointing. */\n      isPointing: false,\n      /** Whether the user is pinching. */\n      isPinching: false,\n      /** Whether the user is editing. */\n      isEditing: false,\n      /** Whether the user is panning. */\n      isPanning: false,\n      /** Whether the user is spacebar panning. */\n      isSpacebarPanning: false,\n      /** Velocity of mouse pointer, in pixels per millisecond */\n      pointerVelocity: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec()\n    });\n    /**\n     * A manager for recording multiple click events.\n     *\n     * @internal\n     */\n    __publicField(this, \"_clickManager\", new _managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_34__.ClickManager(this));\n    /**\n     * The previous cursor. Used for restoring the cursor after pan events.\n     *\n     * @internal\n     */\n    __publicField(this, \"_prevCursor\", \"default\");\n    /** @internal */\n    __publicField(this, \"_shiftKeyTimeout\", -1);\n    /** @internal */\n    __publicField(this, \"_altKeyTimeout\", -1);\n    /** @internal */\n    __publicField(this, \"_ctrlKeyTimeout\", -1);\n    /** @internal */\n    __publicField(this, \"_metaKeyTimeout\", -1);\n    /** @internal */\n    __publicField(this, \"_restoreToolId\", \"select\");\n    /** @internal */\n    __publicField(this, \"_pinchStart\", 1);\n    /** @internal */\n    __publicField(this, \"_didPinch\", false);\n    /** @internal */\n    __publicField(this, \"_selectedShapeIdsAtPointerDown\", []);\n    /** @internal */\n    __publicField(this, \"_longPressTimeout\", -1);\n    /** @internal */\n    __publicField(this, \"capturedPointerId\", null);\n    /** @internal */\n    __publicField(this, \"performanceTracker\");\n    /** @internal */\n    __publicField(this, \"performanceTrackerTimeout\", -1);\n    __publicField(this, \"_pendingEventsForNextTick\", []);\n    this._isShapeHiddenPredicate = isShapeHidden;\n    this.options = { ..._options_mjs__WEBPACK_IMPORTED_MODULE_14__.defaultTldrawOptions, ...options };\n    this.store = store;\n    this.disposables.add(this.store.dispose.bind(this.store));\n    this.history = new _managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_37__.HistoryManager({\n      store,\n      annotateError: (error) => {\n        this.annotateError(error, { origin: \"history.batch\", willCrashApp: true });\n        this.crash(error);\n      }\n    });\n    this.snaps = new _managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_39__.SnapManager(this);\n    this.disposables.add(this.timers.dispose);\n    this._cameraOptions.set({ ..._constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_CAMERA_OPTIONS, ...cameraOptions });\n    this.user = new _managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_42__.UserPreferencesManager(user ?? (0,_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_6__.createTLUser)(), inferDarkMode ?? false);\n    this.getContainer = getContainer;\n    this.textMeasure = new _managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_40__.TextManager(this);\n    this._tickManager = new _managers_TickManager_mjs__WEBPACK_IMPORTED_MODULE_41__.TickManager(this);\n    class NewRoot extends _tools_RootState_mjs__WEBPACK_IMPORTED_MODULE_43__.RootState {\n      static initial = initialState ?? \"\";\n    }\n    this.root = new NewRoot(this);\n    this.root.children = {};\n    const allShapeUtils = (0,_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_8__.checkShapesAndAddCore)(shapeUtils);\n    const _shapeUtils = {};\n    const _styleProps = {};\n    const allStylesById = /* @__PURE__ */ new Map();\n    for (const Util of allShapeUtils) {\n      const util = new Util(this);\n      _shapeUtils[Util.type] = util;\n      const propKeysByStyle = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.getShapePropKeysByStyle)(Util.props ?? {});\n      _styleProps[Util.type] = propKeysByStyle;\n      for (const style of propKeysByStyle.keys()) {\n        if (!allStylesById.has(style.id)) {\n          allStylesById.set(style.id, style);\n        } else if (allStylesById.get(style.id) !== style) {\n          throw Error(\n            `Multiple style props with id \"${style.id}\" in use. Style prop IDs must be unique.`\n          );\n        }\n      }\n    }\n    this.shapeUtils = _shapeUtils;\n    this.styleProps = _styleProps;\n    const allBindingUtils = (0,_config_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_7__.checkBindings)(bindingUtils);\n    const _bindingUtils = {};\n    for (const Util of allBindingUtils) {\n      const util = new Util(this);\n      _bindingUtils[Util.type] = util;\n    }\n    this.bindingUtils = _bindingUtils;\n    for (const Tool of [...tools]) {\n      if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty)(this.root.children, Tool.id)) {\n        throw Error(`Can't override tool with id \"${Tool.id}\"`);\n      }\n      this.root.children[Tool.id] = new Tool(this, this.root);\n    }\n    this.scribbles = new _managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_38__.ScribbleManager(this);\n    const cleanupInstancePageState = (prevPageState, shapesNoLongerInPage) => {\n      let nextPageState = null;\n      const selectedShapeIds = prevPageState.selectedShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (selectedShapeIds.length !== prevPageState.selectedShapeIds.length) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.selectedShapeIds = selectedShapeIds;\n      }\n      const erasingShapeIds = prevPageState.erasingShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (erasingShapeIds.length !== prevPageState.erasingShapeIds.length) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.erasingShapeIds = erasingShapeIds;\n      }\n      if (prevPageState.hoveredShapeId && shapesNoLongerInPage.has(prevPageState.hoveredShapeId)) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.hoveredShapeId = null;\n      }\n      if (prevPageState.editingShapeId && shapesNoLongerInPage.has(prevPageState.editingShapeId)) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.editingShapeId = null;\n      }\n      const hintingShapeIds = prevPageState.hintingShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (hintingShapeIds.length !== prevPageState.hintingShapeIds.length) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.hintingShapeIds = hintingShapeIds;\n      }\n      if (prevPageState.focusedGroupId && shapesNoLongerInPage.has(prevPageState.focusedGroupId)) {\n        if (!nextPageState) nextPageState = { ...prevPageState };\n        nextPageState.focusedGroupId = null;\n      }\n      return nextPageState;\n    };\n    this.sideEffects = this.store.sideEffects;\n    let deletedBindings = /* @__PURE__ */ new Map();\n    const deletedShapeIds = /* @__PURE__ */ new Set();\n    const invalidParents = /* @__PURE__ */ new Set();\n    let invalidBindingTypes = /* @__PURE__ */ new Set();\n    this.disposables.add(\n      this.sideEffects.registerOperationCompleteHandler(() => {\n        deletedShapeIds.clear();\n        for (const parentId of invalidParents) {\n          invalidParents.delete(parentId);\n          const parent = this.getShape(parentId);\n          if (!parent) continue;\n          const util = this.getShapeUtil(parent);\n          const changes = util.onChildrenChange?.(parent);\n          if (changes?.length) {\n            this.updateShapes(changes);\n          }\n        }\n        if (invalidBindingTypes.size) {\n          const t = invalidBindingTypes;\n          invalidBindingTypes = /* @__PURE__ */ new Set();\n          for (const type of t) {\n            const util = this.getBindingUtil(type);\n            util.onOperationComplete?.();\n          }\n        }\n        if (deletedBindings.size) {\n          const t = deletedBindings;\n          deletedBindings = /* @__PURE__ */ new Map();\n          for (const opts of t.values()) {\n            this.getBindingUtil(opts.binding).onAfterDelete?.(opts);\n          }\n        }\n        this.emit(\"update\");\n      })\n    );\n    this.disposables.add(\n      this.sideEffects.register({\n        shape: {\n          afterChange: (shapeBefore, shapeAfter) => {\n            for (const binding of this.getBindingsInvolvingShape(shapeAfter)) {\n              invalidBindingTypes.add(binding.type);\n              if (binding.fromId === shapeAfter.id) {\n                this.getBindingUtil(binding).onAfterChangeFromShape?.({\n                  binding,\n                  shapeBefore,\n                  shapeAfter\n                });\n              }\n              if (binding.toId === shapeAfter.id) {\n                this.getBindingUtil(binding).onAfterChangeToShape?.({\n                  binding,\n                  shapeBefore,\n                  shapeAfter\n                });\n              }\n            }\n            if (shapeBefore.parentId !== shapeAfter.parentId) {\n              const notifyBindingAncestryChange = (id) => {\n                const descendantShape = this.getShape(id);\n                if (!descendantShape) return;\n                for (const binding of this.getBindingsInvolvingShape(descendantShape)) {\n                  invalidBindingTypes.add(binding.type);\n                  if (binding.fromId === descendantShape.id) {\n                    this.getBindingUtil(binding).onAfterChangeFromShape?.({\n                      binding,\n                      shapeBefore: descendantShape,\n                      shapeAfter: descendantShape\n                    });\n                  }\n                  if (binding.toId === descendantShape.id) {\n                    this.getBindingUtil(binding).onAfterChangeToShape?.({\n                      binding,\n                      shapeBefore: descendantShape,\n                      shapeAfter: descendantShape\n                    });\n                  }\n                }\n              };\n              notifyBindingAncestryChange(shapeAfter.id);\n              this.visitDescendants(shapeAfter.id, notifyBindingAncestryChange);\n            }\n            if (shapeBefore.parentId !== shapeAfter.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shapeAfter.parentId)) {\n              const allMovingIds = /* @__PURE__ */ new Set([shapeBefore.id]);\n              this.visitDescendants(shapeBefore.id, (id) => {\n                allMovingIds.add(id);\n              });\n              for (const instancePageState of this.getPageStates()) {\n                if (instancePageState.pageId === shapeAfter.parentId) continue;\n                const nextPageState = cleanupInstancePageState(instancePageState, allMovingIds);\n                if (nextPageState) {\n                  this.store.put([nextPageState]);\n                }\n              }\n            }\n            if (shapeBefore.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shapeBefore.parentId)) {\n              invalidParents.add(shapeBefore.parentId);\n            }\n            if (shapeAfter.parentId !== shapeBefore.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shapeAfter.parentId)) {\n              invalidParents.add(shapeAfter.parentId);\n            }\n          },\n          beforeDelete: (shape) => {\n            if (deletedShapeIds.has(shape.id)) return;\n            if (shape.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shape.parentId)) {\n              invalidParents.add(shape.parentId);\n            }\n            deletedShapeIds.add(shape.id);\n            const deleteBindingIds = [];\n            for (const binding of this.getBindingsInvolvingShape(shape)) {\n              invalidBindingTypes.add(binding.type);\n              deleteBindingIds.push(binding.id);\n              const util = this.getBindingUtil(binding);\n              if (binding.fromId === shape.id) {\n                util.onBeforeIsolateToShape?.({ binding, removedShape: shape });\n                util.onBeforeDeleteFromShape?.({ binding, shape });\n              } else {\n                util.onBeforeIsolateFromShape?.({ binding, removedShape: shape });\n                util.onBeforeDeleteToShape?.({ binding, shape });\n              }\n            }\n            if (deleteBindingIds.length) {\n              this.deleteBindings(deleteBindingIds);\n            }\n            const deletedIds = /* @__PURE__ */ new Set([shape.id]);\n            const updates = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n              this.getPageStates().map((pageState) => {\n                return cleanupInstancePageState(pageState, deletedIds);\n              })\n            );\n            if (updates.length) {\n              this.store.put(updates);\n            }\n          }\n        },\n        binding: {\n          beforeCreate: (binding) => {\n            const next = this.getBindingUtil(binding).onBeforeCreate?.({ binding });\n            if (next) return next;\n            return binding;\n          },\n          afterCreate: (binding) => {\n            invalidBindingTypes.add(binding.type);\n            this.getBindingUtil(binding).onAfterCreate?.({ binding });\n          },\n          beforeChange: (bindingBefore, bindingAfter) => {\n            const updated = this.getBindingUtil(bindingAfter).onBeforeChange?.({\n              bindingBefore,\n              bindingAfter\n            });\n            if (updated) return updated;\n            return bindingAfter;\n          },\n          afterChange: (bindingBefore, bindingAfter) => {\n            invalidBindingTypes.add(bindingAfter.type);\n            this.getBindingUtil(bindingAfter).onAfterChange?.({ bindingBefore, bindingAfter });\n          },\n          beforeDelete: (binding) => {\n            this.getBindingUtil(binding).onBeforeDelete?.({ binding });\n          },\n          afterDelete: (binding) => {\n            this.getBindingUtil(binding).onAfterDelete?.({ binding });\n            invalidBindingTypes.add(binding.type);\n          }\n        },\n        page: {\n          afterCreate: (record) => {\n            const cameraId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(record.id);\n            const _pageStateId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(record.id);\n            if (!this.store.has(cameraId)) {\n              this.store.put([_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.create({ id: cameraId })]);\n            }\n            if (!this.store.has(_pageStateId)) {\n              this.store.put([\n                _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.create({ id: _pageStateId, pageId: record.id })\n              ]);\n            }\n          },\n          afterDelete: (record, source) => {\n            if (this.getInstanceState()?.currentPageId === record.id) {\n              const backupPageId = this.getPages().find((p) => p.id !== record.id)?.id;\n              if (backupPageId) {\n                this.store.put([{ ...this.getInstanceState(), currentPageId: backupPageId }]);\n              } else if (source === \"user\") {\n                this.store.ensureStoreIsUsable();\n              }\n            }\n            const cameraId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(record.id);\n            const instance_PageStateId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(record.id);\n            this.store.remove([cameraId, instance_PageStateId]);\n          }\n        },\n        instance: {\n          afterChange: (prev, next, source) => {\n            if (!this.store.has(next.currentPageId)) {\n              const backupPageId = this.store.has(prev.currentPageId) ? prev.currentPageId : this.getPages()[0]?.id;\n              if (backupPageId) {\n                this.store.update(next.id, (instance) => ({\n                  ...instance,\n                  currentPageId: backupPageId\n                }));\n              } else if (source === \"user\") {\n                this.store.ensureStoreIsUsable();\n              }\n            }\n          }\n        },\n        instance_page_state: {\n          afterChange: (prev, next) => {\n            if (prev?.selectedShapeIds !== next?.selectedShapeIds) {\n              const filtered = next.selectedShapeIds.filter((id) => {\n                let parentId = this.getShape(id)?.parentId;\n                while ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(parentId)) {\n                  if (next.selectedShapeIds.includes(parentId)) {\n                    return false;\n                  }\n                  parentId = this.getShape(parentId)?.parentId;\n                }\n                return true;\n              });\n              let nextFocusedGroupId = null;\n              if (filtered.length > 0) {\n                const commonGroupAncestor = this.findCommonAncestor(\n                  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(filtered.map((id) => this.getShape(id))),\n                  (shape) => this.isShapeOfType(shape, \"group\")\n                );\n                if (commonGroupAncestor) {\n                  nextFocusedGroupId = commonGroupAncestor;\n                }\n              } else {\n                if (next?.focusedGroupId) {\n                  nextFocusedGroupId = next.focusedGroupId;\n                }\n              }\n              if (filtered.length !== next.selectedShapeIds.length || nextFocusedGroupId !== next.focusedGroupId) {\n                this.store.put([\n                  {\n                    ...next,\n                    selectedShapeIds: filtered,\n                    focusedGroupId: nextFocusedGroupId ?? null\n                  }\n                ]);\n              }\n            }\n          }\n        }\n      })\n    );\n    this._currentPageShapeIds = (0,_derivations_shapeIdsInCurrentPage_mjs__WEBPACK_IMPORTED_MODULE_33__.deriveShapeIdsInCurrentPage)(\n      this.store,\n      () => this.getCurrentPageId()\n    );\n    this._parentIdsToChildIds = (0,_derivations_parentsToChildren_mjs__WEBPACK_IMPORTED_MODULE_32__.parentsToChildren)(this.store);\n    this.disposables.add(\n      this.store.listen((changes) => {\n        this.emit(\"change\", changes);\n      })\n    );\n    this.disposables.add(this.history.dispose);\n    this.run(\n      () => {\n        this.store.ensureStoreIsUsable();\n        this._updateCurrentPageState({\n          editingShapeId: null,\n          hoveredShapeId: null,\n          erasingShapeIds: []\n        });\n      },\n      { history: \"ignore\" }\n    );\n    if (initialState && this.root.children[initialState] === void 0) {\n      throw Error(`No state found for initialState \"${initialState}\".`);\n    }\n    this.root.enter(void 0, \"initial\");\n    this.edgeScrollManager = new _managers_EdgeScrollManager_mjs__WEBPACK_IMPORTED_MODULE_35__.EdgeScrollManager(this);\n    this.focusManager = new _managers_FocusManager_mjs__WEBPACK_IMPORTED_MODULE_36__.FocusManager(this, autoFocus);\n    this.disposables.add(this.focusManager.dispose.bind(this.focusManager));\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    this.on(\"tick\", this._flushEventsForTick);\n    this.timers.requestAnimationFrame(() => {\n      this._tickManager.start();\n    });\n    this.performanceTracker = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.PerformanceTracker();\n    if (this.store.props.collaboration?.mode) {\n      const mode = this.store.props.collaboration.mode;\n      this.disposables.add(\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"update collaboration mode\", () => {\n          this.store.put([{ ...this.getInstanceState(), isReadonly: mode.get() === \"readonly\" }]);\n        })\n      );\n    }\n  }\n  getIsShapeHiddenCache() {\n    if (!this._isShapeHiddenPredicate) return null;\n    return this.store.createComputedCache(\"isShapeHidden\", (shape) => {\n      const hiddenParent = this.findShapeAncestor(shape, (p) => this.isShapeHidden(p));\n      if (hiddenParent) return true;\n      return this._isShapeHiddenPredicate(shape, this) ?? false;\n    });\n  }\n  isShapeHidden(shapeOrId) {\n    if (!this._isShapeHiddenPredicate) return false;\n    return !!this.getIsShapeHiddenCache().get(\n      typeof shapeOrId === \"string\" ? shapeOrId : shapeOrId.id\n    );\n  }\n  /**\n   * Dispose the editor.\n   *\n   * @public\n   */\n  dispose() {\n    this.disposables.forEach((dispose) => dispose());\n    this.disposables.clear();\n    this.isDisposed = true;\n  }\n  getShapeUtil(arg) {\n    const type = typeof arg === \"string\" ? arg : arg.type;\n    const shapeUtil = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.shapeUtils, type);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(shapeUtil, `No shape util found for type \"${type}\"`);\n    return shapeUtil;\n  }\n  getBindingUtil(arg) {\n    const type = typeof arg === \"string\" ? arg : arg.type;\n    const bindingUtil = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.bindingUtils, type);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(bindingUtil, `No binding util found for type \"${type}\"`);\n    return bindingUtil;\n  }\n  /**\n   * Undo to the last mark.\n   *\n   * @example\n   * ```ts\n   * editor.undo()\n   * ```\n   *\n   * @public\n   */\n  undo() {\n    this._flushEventsForTick(0);\n    this.complete();\n    this.history.undo();\n    return this;\n  }\n  getCanUndo() {\n    return this.history.getNumUndos() > 0;\n  }\n  /**\n   * Redo to the next mark.\n   *\n   * @example\n   * ```ts\n   * editor.redo()\n   * ```\n   *\n   * @public\n   */\n  redo() {\n    this._flushEventsForTick(0);\n    this.complete();\n    this.history.redo();\n    return this;\n  }\n  clearHistory() {\n    this.history.clear();\n    return this;\n  }\n  getCanRedo() {\n    return this.history.getNumRedos() > 0;\n  }\n  /**\n   * Create a new \"mark\", or stopping point, in the undo redo history. Creating a mark will clear\n   * any redos.\n   *\n   * @example\n   * ```ts\n   * editor.mark()\n   * editor.mark('flip shapes')\n   * ```\n   *\n   * @param markId - The mark's id, usually the reason for adding the mark.\n   *\n   * @public\n   * @deprecated use {@link Editor.markHistoryStoppingPoint} instead\n   */\n  mark(markId) {\n    if (typeof markId === \"string\") {\n      console.warn(\n        `[tldraw] \\`editor.history.mark(\"${markId}\")\\` is deprecated. Please use \\`const myMarkId = editor.markHistoryStoppingPoint()\\` instead.`\n      );\n    } else {\n      console.warn(\n        \"[tldraw] `editor.mark()` is deprecated. Use `editor.markHistoryStoppingPoint()` instead.\"\n      );\n    }\n    this.history._mark(markId ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.uniqueId)());\n    return this;\n  }\n  /**\n   * Create a new \"mark\", or stopping point, in the undo redo history. Creating a mark will clear\n   * any redos. You typically want to do this just before a user interaction begins or is handled.\n   *\n   * @example\n   * ```ts\n   * editor.markHistoryStoppingPoint()\n   * editor.flipShapes(editor.getSelectedShapes())\n   * ```\n   * @example\n   * ```ts\n   * const beginRotateMark = editor.markHistoryStoppingPoint()\n   * // if the use cancels the rotation, you can bail back to this mark\n   * editor.bailToMark(beginRotateMark)\n   * ```\n   *\n   * @public\n   * @param name - The name of the mark, useful for debugging the undo/redo stacks\n   * @returns a unique id for the mark that can be used with `squashToMark` or `bailToMark`.\n   */\n  markHistoryStoppingPoint(name) {\n    const id = `[${name ?? \"stop\"}]_${(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.uniqueId)()}`;\n    this.history._mark(id);\n    return id;\n  }\n  /**\n   * @internal this is only used to implement some backwards-compatibility logic. Should be fine to delete after 6 months or whatever.\n   */\n  getMarkIdMatching(idSubstring) {\n    return this.history.getMarkIdMatching(idSubstring);\n  }\n  /**\n   * Coalesces all changes since the given mark into a single change, removing any intermediate marks.\n   *\n   * This is useful if you need to 'compress' the recent history to simplify the undo/redo experience of a complex interaction.\n   *\n   * @example\n   * ```ts\n   * const bumpShapesMark = editor.markHistoryStoppingPoint()\n   * // ... some changes\n   * editor.squashToMark(bumpShapesMark)\n   * ```\n   *\n   * @param markId - The mark id to squash to.\n   */\n  squashToMark(markId) {\n    this.history.squashToMark(markId);\n    return this;\n  }\n  /**\n   * Undo to the closest mark, discarding the changes so they cannot be redone.\n   *\n   * @example\n   * ```ts\n   * editor.bail()\n   * ```\n   *\n   * @public\n   */\n  bail() {\n    this.history.bail();\n    return this;\n  }\n  /**\n   * Undo to the given mark, discarding the changes so they cannot be redone.\n   *\n   * @example\n   * ```ts\n   * const beginDrag = editor.markHistoryStoppingPoint()\n   * // ... some changes\n   * editor.bailToMark(beginDrag)\n   * ```\n   *\n   * @public\n   */\n  bailToMark(id) {\n    this.history.bailToMark(id);\n    return this;\n  }\n  /**\n   * Run a function in a transaction with optional options for context.\n   * You can use the options to change the way that history is treated\n   * or allow changes to locked shapes.\n   *\n   * @example\n   * ```ts\n   * // updating with\n   * editor.run(() => {\n   * \teditor.updateShape({ ...myShape, x: 100 })\n   * }, { history: \"ignore\" })\n   *\n   * // forcing changes / deletions for locked shapes\n   * editor.toggleLock([myShape])\n   * editor.run(() => {\n   * \teditor.updateShape({ ...myShape, x: 100 })\n   * \teditor.deleteShape(myShape)\n   * }, { ignoreShapeLock: true }, )\n   * ```\n   *\n   * @param fn - The callback function to run.\n   * @param opts - The options for the batch.\n   *\n   *\n   * @public\n   */\n  run(fn, opts) {\n    const previousIgnoreShapeLock = this._shouldIgnoreShapeLock;\n    this._shouldIgnoreShapeLock = opts?.ignoreShapeLock ?? previousIgnoreShapeLock;\n    try {\n      this.history.batch(fn, opts);\n    } finally {\n      this._shouldIgnoreShapeLock = previousIgnoreShapeLock;\n    }\n    return this;\n  }\n  /**\n   * @deprecated Use `Editor.run` instead.\n   */\n  batch(fn, opts) {\n    return this.run(fn, opts);\n  }\n  /* --------------------- Errors --------------------- */\n  /** @internal */\n  annotateError(error, {\n    origin,\n    willCrashApp,\n    tags,\n    extras\n  }) {\n    const defaultAnnotations = this.createErrorAnnotations(origin, willCrashApp);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.annotateError)(error, {\n      tags: { ...defaultAnnotations.tags, ...tags },\n      extras: { ...defaultAnnotations.extras, ...extras }\n    });\n    if (willCrashApp) {\n      this.store.markAsPossiblyCorrupted();\n    }\n    return this;\n  }\n  /** @internal */\n  createErrorAnnotations(origin, willCrashApp) {\n    try {\n      const editingShapeId = this.getEditingShapeId();\n      return {\n        tags: {\n          origin,\n          willCrashApp\n        },\n        extras: {\n          activeStateNode: this.root.getPath(),\n          selectedShapes: this.getSelectedShapes(),\n          editingShape: editingShapeId ? this.getShape(editingShapeId) : void 0,\n          inputs: this.inputs\n        }\n      };\n    } catch {\n      return {\n        tags: {\n          origin,\n          willCrashApp\n        },\n        extras: {}\n      };\n    }\n  }\n  /**\n   * We can't use an `atom` here because there's a chance that when `crashAndReportError` is called,\n   * we're in a transaction that's about to be rolled back due to the same error we're currently\n   * reporting.\n   *\n   * Instead, to listen to changes to this value, you need to listen to app's `crash` event.\n   *\n   * @internal\n   */\n  getCrashingError() {\n    return this._crashingError;\n  }\n  /** @internal */\n  crash(error) {\n    this._crashingError = error;\n    this.store.markAsPossiblyCorrupted();\n    this.emit(\"crash\", { error });\n    return this;\n  }\n  getPath() {\n    return this.root.getPath().split(\"root.\")[1];\n  }\n  /**\n   * Get whether a certain tool (or other state node) is currently active.\n   *\n   * @example\n   * ```ts\n   * editor.isIn('select')\n   * editor.isIn('select.brushing')\n   * ```\n   *\n   * @param path - The path of active states, separated by periods.\n   *\n   * @public\n   */\n  isIn(path) {\n    const ids = path.split(\".\").reverse();\n    let state = this.root;\n    while (ids.length > 0) {\n      const id = ids.pop();\n      if (!id) return true;\n      const current = state.getCurrent();\n      if (current?.id === id) {\n        if (ids.length === 0) return true;\n        state = current;\n        continue;\n      } else return false;\n    }\n    return false;\n  }\n  /**\n   * Get whether the state node is in any of the given active paths.\n   *\n   * @example\n   * ```ts\n   * state.isInAny('select', 'erase')\n   * state.isInAny('select.brushing', 'erase.idle')\n   * ```\n   *\n   * @public\n   */\n  isInAny(...paths) {\n    return paths.some((path) => this.isIn(path));\n  }\n  /**\n   * Set the selected tool.\n   *\n   * @example\n   * ```ts\n   * editor.setCurrentTool('hand')\n   * editor.setCurrentTool('hand', { date: Date.now() })\n   * ```\n   *\n   * @param id - The id of the tool to select.\n   * @param info - Arbitrary data to pass along into the transition.\n   *\n   * @public\n   */\n  setCurrentTool(id, info = {}) {\n    this.root.transition(id, info);\n    return this;\n  }\n  getCurrentTool() {\n    return this.root.getCurrent();\n  }\n  getCurrentToolId() {\n    const currentTool = this.getCurrentTool();\n    if (!currentTool) return \"\";\n    return currentTool.getCurrentToolIdMask() ?? currentTool.id;\n  }\n  /**\n   * Get a descendant by its path.\n   *\n   * @example\n   * ```ts\n   * state.getStateDescendant('select')\n   * state.getStateDescendant('select.brushing')\n   * ```\n   *\n   * @param path - The descendant's path of state ids, separated by periods.\n   *\n   * @public\n   */\n  getStateDescendant(path) {\n    const ids = path.split(\".\").reverse();\n    let state = this.root;\n    while (ids.length > 0) {\n      const id = ids.pop();\n      if (!id) return state;\n      const childState = state.children?.[id];\n      if (!childState) return void 0;\n      state = childState;\n    }\n    return state;\n  }\n  getDocumentSettings() {\n    return this.store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID);\n  }\n  /**\n   * Update the global document settings that apply to all users.\n   *\n   * @public\n   **/\n  updateDocumentSettings(settings) {\n    this.run(\n      () => {\n        this.store.put([{ ...this.getDocumentSettings(), ...settings }]);\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  getInstanceState() {\n    return this.store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n  }\n  /**\n   * Update the instance's state.\n   *\n   * @param partial - A partial object to update the instance state with.\n   * @param historyOptions - History batch options.\n   *\n   * @public\n   */\n  updateInstanceState(partial, historyOptions) {\n    this._updateInstanceState(partial, { history: \"ignore\", ...historyOptions });\n    if (partial.isChangingStyle !== void 0) {\n      clearTimeout(this._isChangingStyleTimeout);\n      if (partial.isChangingStyle === true) {\n        this._isChangingStyleTimeout = this.timers.setTimeout(() => {\n          this._updateInstanceState({ isChangingStyle: false }, { history: \"ignore\" });\n        }, 2e3);\n      }\n    }\n    return this;\n  }\n  /** @internal */\n  _updateInstanceState(partial, opts) {\n    this.run(() => {\n      this.store.put([\n        {\n          ...this.getInstanceState(),\n          ...partial\n        }\n      ]);\n    }, opts);\n  }\n  getOpenMenus() {\n    return this.menus.getOpenMenus();\n  }\n  /**\n   * @deprecated Use `editor.menus.addOpenMenu` instead.\n   *\n   * @public\n   */\n  addOpenMenu(id) {\n    this.menus.addOpenMenu(id);\n    return this;\n  }\n  /**\n   * @deprecated Use `editor.menus.deleteOpenMenu` instead.\n   *\n   * @public\n   */\n  deleteOpenMenu(id) {\n    this.menus.deleteOpenMenu(id);\n    return this;\n  }\n  /**\n   * @deprecated Use `editor.menus.clearOpenMenus` instead.\n   *\n   * @public\n   */\n  clearOpenMenus() {\n    this.menus.clearOpenMenus();\n    return this;\n  }\n  getIsMenuOpen() {\n    return this.menus.hasAnyOpenMenus();\n  }\n  /* --------------------- Cursor --------------------- */\n  /**\n   * Set the cursor.\n   *\n   * @param cursor - The cursor to set.\n   * @public\n   */\n  setCursor(cursor) {\n    this.updateInstanceState({ cursor: { ...this.getInstanceState().cursor, ...cursor } });\n    return this;\n  }\n  getPageStates() {\n    return this._getPageStatesQuery().get();\n  }\n  _getPageStatesQuery() {\n    return this.store.query.records(\"instance_page_state\");\n  }\n  getCurrentPageState() {\n    return this.store.get(this._getCurrentPageStateId());\n  }\n  _getCurrentPageStateId() {\n    return _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(this.getCurrentPageId());\n  }\n  /**\n   * Update this instance's page state.\n   *\n   * @example\n   * ```ts\n   * editor.updateCurrentPageState({ id: 'page1', editingShapeId: 'shape:123' })\n   * ```\n   *\n   * @param partial - The partial of the page state object containing the changes.\n   *\n   * @public\n   */\n  updateCurrentPageState(partial) {\n    this._updateCurrentPageState(partial);\n    return this;\n  }\n  _updateCurrentPageState(partial) {\n    this.store.update(partial.id ?? this.getCurrentPageState().id, (state) => ({\n      ...state,\n      ...partial\n    }));\n  }\n  getSelectedShapeIds() {\n    return this.getCurrentPageState().selectedShapeIds;\n  }\n  getSelectedShapes() {\n    const { selectedShapeIds } = this.getCurrentPageState();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(selectedShapeIds.map((id) => this.store.get(id)));\n  }\n  /**\n   * Select one or more shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setSelectedShapes(['id1'])\n   * editor.setSelectedShapes(['id1', 'id2'])\n   * ```\n   *\n   * @param shapes - The shape (or shape ids) to select.\n   *\n   * @public\n   */\n  setSelectedShapes(shapes) {\n    return this.run(\n      () => {\n        const ids = shapes.map((shape) => typeof shape === \"string\" ? shape : shape.id);\n        const { selectedShapeIds: prevSelectedShapeIds } = this.getCurrentPageState();\n        const prevSet = new Set(prevSelectedShapeIds);\n        if (ids.length === prevSet.size && ids.every((id) => prevSet.has(id))) return null;\n        this.store.put([{ ...this.getCurrentPageState(), selectedShapeIds: ids }]);\n      },\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Determine whether or not any of a shape's ancestors are selected.\n   *\n   * @param shape - The shape (or shape id) of the shape to check.\n   *\n   * @public\n   */\n  isAncestorSelected(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    const _shape = this.getShape(id);\n    if (!_shape) return false;\n    const selectedShapeIds = this.getSelectedShapeIds();\n    return !!this.findShapeAncestor(_shape, (parent) => selectedShapeIds.includes(parent.id));\n  }\n  /**\n   * Select one or more shapes.\n   *\n   * @example\n   * ```ts\n   * editor.select('id1')\n   * editor.select('id1', 'id2')\n   * ```\n   *\n   * @param shapes - The shape (or the shape ids) to select.\n   *\n   * @public\n   */\n  select(...shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    this.setSelectedShapes(ids);\n    return this;\n  }\n  /**\n   * Remove a shape from the existing set of selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.deselect(shape.id)\n   * ```\n   *\n   * @public\n   */\n  deselect(...shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    const selectedShapeIds = this.getSelectedShapeIds();\n    if (selectedShapeIds.length > 0 && ids.length > 0) {\n      this.setSelectedShapes(selectedShapeIds.filter((id) => !ids.includes(id)));\n    }\n    return this;\n  }\n  /**\n   * Select all direct children of the current page.\n   *\n   * @example\n   * ```ts\n   * editor.selectAll()\n   * ```\n   *\n   * @public\n   */\n  selectAll() {\n    const ids = this.getSortedChildIdsForParent(this.getCurrentPageId());\n    if (ids.length <= 0) return this;\n    this.setSelectedShapes(this._getUnlockedShapeIds(ids));\n    return this;\n  }\n  /**\n   * Clear the selection.\n   *\n   * @example\n   * ```ts\n   * editor.selectNone()\n   * ```\n   *\n   * @public\n   */\n  selectNone() {\n    if (this.getSelectedShapeIds().length > 0) {\n      this.setSelectedShapes([]);\n    }\n    return this;\n  }\n  getOnlySelectedShapeId() {\n    return this.getOnlySelectedShape()?.id ?? null;\n  }\n  getOnlySelectedShape() {\n    const selectedShapes = this.getSelectedShapes();\n    return selectedShapes.length === 1 ? selectedShapes[0] : null;\n  }\n  /**\n   * @internal\n   */\n  getShapesPageBounds(shapeIds) {\n    const bounds = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(shapeIds.map((id) => this.getShapePageBounds(id)));\n    if (bounds.length === 0) return null;\n    return _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(bounds);\n  }\n  getSelectionPageBounds() {\n    return this.getShapesPageBounds(this.getSelectedShapeIds());\n  }\n  /**\n   * @internal\n   */\n  getShapesSharedRotation(shapeIds) {\n    let foundFirst = false;\n    let rotation = 0;\n    for (let i = 0, n = shapeIds.length; i < n; i++) {\n      const pageTransform = this.getShapePageTransform(shapeIds[i]);\n      if (!pageTransform) continue;\n      if (foundFirst) {\n        if (pageTransform.rotation() !== rotation) {\n          return 0;\n        }\n      } else {\n        foundFirst = true;\n        rotation = pageTransform.rotation();\n      }\n    }\n    return rotation;\n  }\n  getSelectionRotation() {\n    return this.getShapesSharedRotation(this.getSelectedShapeIds());\n  }\n  /**\n   * @internal\n   */\n  getShapesRotatedPageBounds(shapeIds) {\n    if (shapeIds.length === 0) {\n      return void 0;\n    }\n    const selectionRotation = this.getShapesSharedRotation(shapeIds);\n    if (selectionRotation === 0) {\n      return this.getShapesPageBounds(shapeIds) ?? void 0;\n    }\n    if (shapeIds.length === 1) {\n      const bounds = this.getShapeGeometry(shapeIds[0]).bounds.clone();\n      const pageTransform = this.getShapePageTransform(shapeIds[0]);\n      bounds.point = pageTransform.applyToPoint(bounds.point);\n      return bounds;\n    }\n    const boxFromRotatedVertices = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.FromPoints(\n      shapeIds.flatMap((id) => {\n        const pageTransform = this.getShapePageTransform(id);\n        if (!pageTransform) return [];\n        return pageTransform.applyToPoints(this.getShapeGeometry(id).bounds.corners);\n      }).map((p) => p.rot(-selectionRotation))\n    );\n    boxFromRotatedVertices.point = boxFromRotatedVertices.point.rot(selectionRotation);\n    return boxFromRotatedVertices;\n  }\n  getSelectionRotatedPageBounds() {\n    return this.getShapesRotatedPageBounds(this.getSelectedShapeIds());\n  }\n  getSelectionRotatedScreenBounds() {\n    const bounds = this.getSelectionRotatedPageBounds();\n    if (!bounds) return void 0;\n    const { x, y } = this.pageToScreen(bounds.point);\n    const zoom = this.getZoomLevel();\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(x, y, bounds.width * zoom, bounds.height * zoom);\n  }\n  getFocusedGroupId() {\n    return this.getCurrentPageState().focusedGroupId ?? this.getCurrentPageId();\n  }\n  getFocusedGroup() {\n    const focusedGroupId = this.getFocusedGroupId();\n    return focusedGroupId ? this.getShape(focusedGroupId) : void 0;\n  }\n  /**\n   * Set the current focused group shape.\n   *\n   * @param shape - The group shape id (or group shape's id) to set as the focused group shape.\n   *\n   * @public\n   */\n  setFocusedGroup(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== null) {\n      const shape2 = this.getShape(id);\n      if (!shape2) {\n        throw Error(`Editor.setFocusedGroup: Shape with id ${id} does not exist`);\n      }\n      if (!this.isShapeOfType(shape2, \"group\")) {\n        throw Error(\n          `Editor.setFocusedGroup: Cannot set focused group to shape of type ${shape2.type}`\n        );\n      }\n    }\n    if (id === this.getFocusedGroupId()) return this;\n    return this.run(\n      () => {\n        this.store.update(this.getCurrentPageState().id, (s) => ({ ...s, focusedGroupId: id }));\n      },\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Exit the current focused group, moving up to the next parent group if there is one.\n   *\n   * @public\n   */\n  popFocusedGroupId() {\n    const focusedGroup = this.getFocusedGroup();\n    if (focusedGroup) {\n      const match = this.findShapeAncestor(\n        focusedGroup,\n        (shape) => this.isShapeOfType(shape, \"group\")\n      );\n      this.setFocusedGroup(match?.id ?? null);\n      this.select(focusedGroup.id);\n    } else {\n      this.setFocusedGroup(null);\n      this.selectNone();\n    }\n    return this;\n  }\n  getEditingShapeId() {\n    return this.getCurrentPageState().editingShapeId;\n  }\n  getEditingShape() {\n    const editingShapeId = this.getEditingShapeId();\n    return editingShapeId ? this.getShape(editingShapeId) : void 0;\n  }\n  /**\n   * Set the current editing shape.\n   *\n   * @example\n   * ```ts\n   * editor.setEditingShape(myShape)\n   * editor.setEditingShape(myShape.id)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to set as editing.\n   *\n   * @public\n   */\n  setEditingShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== this.getEditingShapeId()) {\n      if (id) {\n        const shape2 = this.getShape(id);\n        if (shape2 && this.getShapeUtil(shape2).canEdit(shape2)) {\n          this.run(\n            () => {\n              this._updateCurrentPageState({ editingShapeId: id });\n            },\n            { history: \"ignore\" }\n          );\n          return this;\n        }\n      }\n      this.run(\n        () => {\n          this._updateCurrentPageState({ editingShapeId: null });\n        },\n        { history: \"ignore\" }\n      );\n    }\n    return this;\n  }\n  getHoveredShapeId() {\n    return this.getCurrentPageState().hoveredShapeId;\n  }\n  getHoveredShape() {\n    const hoveredShapeId = this.getHoveredShapeId();\n    return hoveredShapeId ? this.getShape(hoveredShapeId) : void 0;\n  }\n  /**\n   * Set the editor's current hovered shape.\n   *\n   * @example\n   * ```ts\n   * editor.setHoveredShape(myShape)\n   * editor.setHoveredShape(myShape.id)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to set as hovered.\n   *\n   * @public\n   */\n  setHoveredShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id === this.getHoveredShapeId()) return this;\n    this.run(\n      () => {\n        this.updateCurrentPageState({ hoveredShapeId: id });\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  getHintingShapeIds() {\n    return this.getCurrentPageState().hintingShapeIds;\n  }\n  getHintingShape() {\n    const hintingShapeIds = this.getHintingShapeIds();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(hintingShapeIds.map((id) => this.getShape(id)));\n  }\n  /**\n   * Set the editor's current hinting shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setHintingShapes([myShape])\n   * editor.setHintingShapes([myShape.id])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to set as hinting.\n   *\n   * @public\n   */\n  setHintingShapes(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    this.run(\n      () => {\n        this._updateCurrentPageState({ hintingShapeIds: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.dedupe)(ids) });\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  getErasingShapeIds() {\n    return this.getCurrentPageState().erasingShapeIds;\n  }\n  getErasingShapes() {\n    const erasingShapeIds = this.getErasingShapeIds();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(erasingShapeIds.map((id) => this.getShape(id)));\n  }\n  /**\n   * Set the editor's current erasing shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setErasingShapes([myShape])\n   * editor.setErasingShapes([myShape.id])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to set as hinting.\n   *\n   * @public\n   */\n  setErasingShapes(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    ids.sort();\n    const erasingShapeIds = this.getErasingShapeIds();\n    this.run(\n      () => {\n        if (ids.length === erasingShapeIds.length) {\n          for (let i = 0; i < ids.length; i++) {\n            if (ids[i] !== erasingShapeIds[i]) {\n              this._updateCurrentPageState({ erasingShapeIds: ids });\n              break;\n            }\n          }\n        } else {\n          this._updateCurrentPageState({ erasingShapeIds: ids });\n        }\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  // Cropping\n  /**\n   * The current cropping shape's id.\n   *\n   * @public\n   */\n  getCroppingShapeId() {\n    return this.getCurrentPageState().croppingShapeId;\n  }\n  /**\n   * Set the current cropping shape.\n   *\n   * @example\n   * ```ts\n   * editor.setCroppingShape(myShape)\n   * editor.setCroppingShape(myShape.id)\n   * ```\n   *\n   *\n   * @param shape - The shape (or shape id) to set as cropping.\n   *\n   * @public\n   */\n  setCroppingShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== this.getCroppingShapeId()) {\n      this.run(\n        () => {\n          if (!id) {\n            this.updateCurrentPageState({ croppingShapeId: null });\n          } else {\n            const shape2 = this.getShape(id);\n            const util = this.getShapeUtil(shape2);\n            if (shape2 && util.canCrop(shape2)) {\n              this.updateCurrentPageState({ croppingShapeId: id });\n            }\n          }\n        },\n        { history: \"ignore\" }\n      );\n    }\n    return this;\n  }\n  _unsafe_getCameraId() {\n    return _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(this.getCurrentPageId());\n  }\n  getCamera() {\n    const baseCamera = this.store.get(this._unsafe_getCameraId());\n    if (this._isLockedOnFollowingUser.get()) {\n      const followingCamera = this.getCameraForFollowing();\n      if (followingCamera) {\n        return { ...baseCamera, ...followingCamera };\n      }\n    }\n    return baseCamera;\n  }\n  getViewportPageBoundsForFollowing() {\n    const followingUserId = this.getInstanceState().followingUserId;\n    if (!followingUserId) return null;\n    const leaderPresence = this.getCollaborators().find((c) => c.userId === followingUserId);\n    if (!leaderPresence) return null;\n    const { w: lw, h: lh } = leaderPresence.screenBounds;\n    const { x: lx, y: ly, z: lz } = leaderPresence.camera;\n    const theirViewport = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(-lx, -ly, lw / lz, lh / lz);\n    const ourViewport = this.getViewportScreenBounds().clone();\n    const ourAspectRatio = ourViewport.width / ourViewport.height;\n    ourViewport.width = theirViewport.width;\n    ourViewport.height = ourViewport.width / ourAspectRatio;\n    if (ourViewport.height < theirViewport.height) {\n      ourViewport.height = theirViewport.height;\n      ourViewport.width = ourViewport.height * ourAspectRatio;\n    }\n    ourViewport.center = theirViewport.center;\n    return ourViewport;\n  }\n  getCameraForFollowing() {\n    const viewport = this.getViewportPageBoundsForFollowing();\n    if (!viewport) return null;\n    return {\n      x: -viewport.x,\n      y: -viewport.y,\n      z: this.getViewportScreenBounds().w / viewport.width\n    };\n  }\n  getZoomLevel() {\n    return this.getCamera().z;\n  }\n  /**\n   * Get the camera's initial or reset zoom level.\n   *\n   * @example\n   * ```ts\n   * editor.getInitialZoom()\n   * ```\n   *\n   * @public */\n  getInitialZoom() {\n    const cameraOptions = this.getCameraOptions();\n    if (!cameraOptions.constraints) return 1;\n    if (cameraOptions.constraints.initialZoom === \"default\") return 1;\n    const { zx, zy } = getCameraFitXFitY(this, cameraOptions);\n    switch (cameraOptions.constraints.initialZoom) {\n      case \"fit-min\": {\n        return Math.max(zx, zy);\n      }\n      case \"fit-max\": {\n        return Math.min(zx, zy);\n      }\n      case \"fit-x\": {\n        return zx;\n      }\n      case \"fit-y\": {\n        return zy;\n      }\n      case \"fit-min-100\": {\n        return Math.min(1, Math.max(zx, zy));\n      }\n      case \"fit-max-100\": {\n        return Math.min(1, Math.min(zx, zy));\n      }\n      case \"fit-x-100\": {\n        return Math.min(1, zx);\n      }\n      case \"fit-y-100\": {\n        return Math.min(1, zy);\n      }\n      default: {\n        throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(cameraOptions.constraints.initialZoom);\n      }\n    }\n  }\n  /**\n   * Get the camera's base level for calculating actual zoom levels based on the zoom steps.\n   *\n   * @example\n   * ```ts\n   * editor.getBaseZoom()\n   * ```\n   *\n   * @public */\n  getBaseZoom() {\n    const cameraOptions = this.getCameraOptions();\n    if (!cameraOptions.constraints) return 1;\n    if (cameraOptions.constraints.baseZoom === \"default\") return 1;\n    const { zx, zy } = getCameraFitXFitY(this, cameraOptions);\n    switch (cameraOptions.constraints.baseZoom) {\n      case \"fit-min\": {\n        return Math.max(zx, zy);\n      }\n      case \"fit-max\": {\n        return Math.min(zx, zy);\n      }\n      case \"fit-x\": {\n        return zx;\n      }\n      case \"fit-y\": {\n        return zy;\n      }\n      case \"fit-min-100\": {\n        return Math.min(1, Math.max(zx, zy));\n      }\n      case \"fit-max-100\": {\n        return Math.min(1, Math.min(zx, zy));\n      }\n      case \"fit-x-100\": {\n        return Math.min(1, zx);\n      }\n      case \"fit-y-100\": {\n        return Math.min(1, zy);\n      }\n      default: {\n        throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(cameraOptions.constraints.baseZoom);\n      }\n    }\n  }\n  /**\n   * Get the current camera options.\n   *\n   * @example\n   * ```ts\n   * editor.getCameraOptions()\n   * ```\n   *\n   *  @public */\n  getCameraOptions() {\n    return this._cameraOptions.get();\n  }\n  /**\n   * Set the camera options. Changing the options won't immediately change the camera itself, so you may want to call `setCamera` after changing the options.\n   *\n   * @example\n   * ```ts\n   * editor.setCameraOptions(myCameraOptions)\n   * editor.setCamera(editor.getCamera())\n   * ```\n   *\n   * @param opts - The camera options to set.\n   *\n   * @public */\n  setCameraOptions(opts) {\n    const next = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)({\n      ...this._cameraOptions.__unsafe__getWithoutCapture(),\n      ...opts\n    });\n    if (next.zoomSteps?.length < 1) next.zoomSteps = [1];\n    this._cameraOptions.set(next);\n    this.setCamera(this.getCamera());\n    return this;\n  }\n  /** @internal */\n  getConstrainedCamera(point, opts) {\n    const currentCamera = this.getCamera();\n    let { x, y, z = currentCamera.z } = point;\n    if (!opts?.force) {\n      const cameraOptions = this.getCameraOptions();\n      const zoomMin = cameraOptions.zoomSteps[0];\n      const zoomMax = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(cameraOptions.zoomSteps);\n      const vsb = this.getViewportScreenBounds();\n      if (cameraOptions.constraints) {\n        const { constraints } = cameraOptions;\n        const py = Math.min(constraints.padding.y, vsb.w / 2);\n        const px = Math.min(constraints.padding.x, vsb.h / 2);\n        const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.From(cameraOptions.constraints.bounds);\n        const zx = (vsb.w - px * 2) / bounds.w;\n        const zy = (vsb.h - py * 2) / bounds.h;\n        const baseZoom = this.getBaseZoom();\n        const maxZ = zoomMax * baseZoom;\n        const minZ = zoomMin * baseZoom;\n        if (opts?.reset) {\n          z = this.getInitialZoom();\n        }\n        if (z < minZ || z > maxZ) {\n          const { x: cx, y: cy, z: cz } = currentCamera;\n          const cxA = -cx + vsb.w / cz / 2;\n          const cyA = -cy + vsb.h / cz / 2;\n          z = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(z, minZ, maxZ);\n          const cxB = -cx + vsb.w / z / 2;\n          const cyB = -cy + vsb.h / z / 2;\n          x = cx + cxB - cxA;\n          y = cy + cyB - cyA;\n        }\n        const minX = px / z - bounds.x;\n        const minY = py / z - bounds.y;\n        const freeW = (vsb.w - px * 2) / z - bounds.w;\n        const freeH = (vsb.h - py * 2) / z - bounds.h;\n        const originX = minX + freeW * constraints.origin.x;\n        const originY = minY + freeH * constraints.origin.y;\n        const behaviorX = typeof constraints.behavior === \"string\" ? constraints.behavior : constraints.behavior.x;\n        const behaviorY = typeof constraints.behavior === \"string\" ? constraints.behavior : constraints.behavior.y;\n        if (opts?.reset) {\n          x = originX;\n          y = originY;\n        } else {\n          switch (behaviorX) {\n            case \"fixed\": {\n              x = originX;\n              break;\n            }\n            case \"contain\": {\n              if (z < zx) x = originX;\n              else x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(x, minX + freeW, minX);\n              break;\n            }\n            case \"inside\": {\n              if (z < zx) x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(x, minX, (vsb.w - px) / z - bounds.w);\n              else x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(x, minX + freeW, minX);\n              break;\n            }\n            case \"outside\": {\n              x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(x, px / z - bounds.w, (vsb.w - px) / z);\n              break;\n            }\n            case \"free\": {\n              break;\n            }\n            default: {\n              throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(behaviorX);\n            }\n          }\n          switch (behaviorY) {\n            case \"fixed\": {\n              y = originY;\n              break;\n            }\n            case \"contain\": {\n              if (z < zy) y = originY;\n              else y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(y, minY + freeH, minY);\n              break;\n            }\n            case \"inside\": {\n              if (z < zy) y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(y, minY, (vsb.h - py) / z - bounds.h);\n              else y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(y, minY + freeH, minY);\n              break;\n            }\n            case \"outside\": {\n              y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(y, py / z - bounds.h, (vsb.h - py) / z);\n              break;\n            }\n            case \"free\": {\n              break;\n            }\n            default: {\n              throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(behaviorY);\n            }\n          }\n        }\n      } else {\n        if (z > zoomMax || z < zoomMin) {\n          const { x: cx, y: cy, z: cz } = currentCamera;\n          z = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(z, zoomMin, zoomMax);\n          x = cx + (-cx + vsb.w / z / 2) - (-cx + vsb.w / cz / 2);\n          y = cy + (-cy + vsb.h / z / 2) - (-cy + vsb.h / cz / 2);\n        }\n      }\n    }\n    return { x, y, z };\n  }\n  /** @internal */\n  _setCamera(point, opts) {\n    const currentCamera = this.getCamera();\n    const { x, y, z } = this.getConstrainedCamera(point, opts);\n    if (currentCamera.x === x && currentCamera.y === y && currentCamera.z === z) {\n      return this;\n    }\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      const camera = { ...currentCamera, x, y, z };\n      this.run(\n        () => {\n          this.store.put([camera]);\n        },\n        { history: \"ignore\" }\n      );\n      const { currentScreenPoint, currentPagePoint } = this.inputs;\n      const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n      if (currentScreenPoint.x / z - x !== currentPagePoint.x || currentScreenPoint.y / z - y !== currentPagePoint.y) {\n        const event = {\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_move\",\n          // weird but true: we need to put the screen point back into client space\n          point: _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.AddXY(currentScreenPoint, screenBounds.x, screenBounds.y),\n          pointerId: _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.INTERNAL_POINTER_IDS.CAMERA_MOVE,\n          ctrlKey: this.inputs.ctrlKey,\n          altKey: this.inputs.altKey,\n          shiftKey: this.inputs.shiftKey,\n          metaKey: this.inputs.metaKey,\n          accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__.isAccelKey)(this.inputs),\n          button: 0,\n          isPen: this.getInstanceState().isPenMode ?? false\n        };\n        if (opts?.immediate) {\n          this._flushEventForTick(event);\n        } else {\n          this.dispatch(event);\n        }\n      }\n      this._tickCameraState();\n    });\n    return this;\n  }\n  /**\n   * Set the current camera.\n   *\n   * @example\n   * ```ts\n   * editor.setCamera({ x: 0, y: 0})\n   * editor.setCamera({ x: 0, y: 0, z: 1.5})\n   * editor.setCamera({ x: 0, y: 0, z: 1.5}, { animation: { duration: 1000, easing: (t) => t * t } })\n   * ```\n   *\n   * @param point - The new camera position.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  setCamera(point, opts) {\n    const { isLocked } = this._cameraOptions.__unsafe__getWithoutCapture();\n    if (isLocked && !opts?.force) return this;\n    this.stopCameraAnimation();\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    const _point = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Cast(point);\n    if (!Number.isFinite(_point.x)) _point.x = 0;\n    if (!Number.isFinite(_point.y)) _point.y = 0;\n    if (_point.z === void 0 || !Number.isFinite(_point.z)) point.z = this.getZoomLevel();\n    const camera = this.getConstrainedCamera(_point, opts);\n    if (opts?.animation) {\n      const { width, height } = this.getViewportScreenBounds();\n      this._animateToViewport(\n        new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(-camera.x, -camera.y, width / camera.z, height / camera.z),\n        opts\n      );\n    } else {\n      this._setCamera(camera, {\n        ...opts,\n        // we already did the constraining, so we don't need to do it again\n        force: true\n      });\n    }\n    return this;\n  }\n  /**\n   * Center the camera on a point (in the current page space).\n   *\n   * @example\n   * ```ts\n   * editor.centerOnPoint({ x: 100, y: 100 })\n   * editor.centerOnPoint({ x: 100, y: 100 }, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The point in the current page space to center on.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  centerOnPoint(point, opts) {\n    const { isLocked } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const { width: pw, height: ph } = this.getViewportPageBounds();\n    this.setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(-(point.x - pw / 2), -(point.y - ph / 2), this.getCamera().z), opts);\n    return this;\n  }\n  /**\n   * Zoom the camera to fit the current page's content in the viewport.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToFit()\n   * editor.zoomToFit({ animation: { duration: 200 } })\n   * ```\n   *\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomToFit(opts) {\n    const ids = [...this.getCurrentPageShapeIds()];\n    if (ids.length <= 0) return this;\n    const pageBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShapePageBounds(id))));\n    this.zoomToBounds(pageBounds, opts);\n    return this;\n  }\n  /**\n   * Set the zoom back to 100%.\n   *\n   * @example\n   * ```ts\n   * editor.resetZoom()\n   * editor.resetZoom(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * editor.resetZoom(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The screen point to zoom out on. Defaults to the viewport screen center.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  resetZoom(point = this.getViewportScreenCenter(), opts) {\n    const { isLocked, constraints } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const currentCamera = this.getCamera();\n    const { x: cx, y: cy, z: cz } = currentCamera;\n    const { x, y } = point;\n    let z = 1;\n    if (constraints) {\n      const initialZoom = this.getInitialZoom();\n      if (cz !== initialZoom) {\n        z = initialZoom;\n      }\n    }\n    this.setCamera(\n      new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(cx + (x / z - x) - (x / cz - x), cy + (y / z - y) - (y / cz - y), z),\n      opts\n    );\n    return this;\n  }\n  /**\n   * Zoom the camera in.\n   *\n   * @example\n   * ```ts\n   * editor.zoomIn()\n   * editor.zoomIn(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * editor.zoomIn(editor.inputs.currentScreenPoint, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The screen point to zoom in on. Defaults to the screen center\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomIn(point = this.getViewportScreenCenter(), opts) {\n    const { isLocked } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const { x: cx, y: cy, z: cz } = this.getCamera();\n    const { zoomSteps } = this.getCameraOptions();\n    if (zoomSteps !== null && zoomSteps.length > 1) {\n      const baseZoom = this.getBaseZoom();\n      let zoom = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(zoomSteps) * baseZoom;\n      for (let i = 1; i < zoomSteps.length; i++) {\n        const z1 = zoomSteps[i - 1] * baseZoom;\n        const z2 = zoomSteps[i] * baseZoom;\n        if (z2 - cz <= (z2 - z1) / 2) continue;\n        zoom = z2;\n        break;\n      }\n      this.setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n          cx + (point.x / zoom - point.x) - (point.x / cz - point.x),\n          cy + (point.y / zoom - point.y) - (point.y / cz - point.y),\n          zoom\n        ),\n        opts\n      );\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera out.\n   *\n   * @example\n   * ```ts\n   * editor.zoomOut()\n   * editor.zoomOut(editor.getViewportScreenCenter(), { animation: { duration: 120 } })\n   * editor.zoomOut(editor.inputs.currentScreenPoint, { animation: { duration: 120 } })\n   * ```\n   *\n   * @param point - The point to zoom out on. Defaults to the viewport screen center.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomOut(point = this.getViewportScreenCenter(), opts) {\n    const { isLocked } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const { zoomSteps } = this.getCameraOptions();\n    if (zoomSteps !== null && zoomSteps.length > 1) {\n      const baseZoom = this.getBaseZoom();\n      const { x: cx, y: cy, z: cz } = this.getCamera();\n      let zoom = zoomSteps[0] * baseZoom;\n      for (let i = zoomSteps.length - 1; i > 0; i--) {\n        const z1 = zoomSteps[i - 1] * baseZoom;\n        const z2 = zoomSteps[i] * baseZoom;\n        if (z2 - cz >= (z2 - z1) / 2) continue;\n        zoom = z1;\n        break;\n      }\n      this.setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n          cx + (point.x / zoom - point.x) - (point.x / cz - point.x),\n          cy + (point.y / zoom - point.y) - (point.y / cz - point.y),\n          zoom\n        ),\n        opts\n      );\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera to fit the current selection in the viewport.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToSelection()\n   * editor.zoomToSelection({ animation: { duration: 200 } })\n   * ```\n   *\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomToSelection(opts) {\n    const { isLocked } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const selectionPageBounds = this.getSelectionPageBounds();\n    if (selectionPageBounds) {\n      this.zoomToBounds(selectionPageBounds, {\n        targetZoom: Math.max(1, this.getZoomLevel()),\n        ...opts\n      });\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera to fit a bounding box (in the current page space).\n   *\n   * @example\n   * ```ts\n   * editor.zoomToBounds(myBounds)\n   * editor.zoomToBounds(myBounds, { animation: { duration: 200 } })\n   * editor.zoomToBounds(myBounds, { animation: { duration: 200 }, inset: 0, targetZoom: 1 })\n   * ```\n   *\n   * @param bounds - The bounding box.\n   * @param opts - The camera move options, target zoom, or custom inset amount.\n   *\n   * @public\n   */\n  zoomToBounds(bounds, opts) {\n    const cameraOptions = this._cameraOptions.__unsafe__getWithoutCapture();\n    if (cameraOptions.isLocked && !opts?.force) return this;\n    const viewportScreenBounds = this.getViewportScreenBounds();\n    const inset = opts?.inset ?? Math.min(_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.ZOOM_TO_FIT_PADDING, viewportScreenBounds.width * 0.28);\n    const baseZoom = this.getBaseZoom();\n    const zoomMin = cameraOptions.zoomSteps[0];\n    const zoomMax = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(cameraOptions.zoomSteps);\n    let zoom = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(\n      Math.min(\n        (viewportScreenBounds.width - inset) / bounds.w,\n        (viewportScreenBounds.height - inset) / bounds.h\n      ),\n      zoomMin * baseZoom,\n      zoomMax * baseZoom\n    );\n    if (opts?.targetZoom !== void 0) {\n      zoom = Math.min(opts.targetZoom, zoom);\n    }\n    this.setCamera(\n      new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n        -bounds.x + (viewportScreenBounds.width - bounds.w * zoom) / 2 / zoom,\n        -bounds.y + (viewportScreenBounds.height - bounds.h * zoom) / 2 / zoom,\n        zoom\n      ),\n      opts\n    );\n    return this;\n  }\n  /**\n   * Stop the current camera animation, if any.\n   *\n   * @example\n   * ```ts\n   * editor.stopCameraAnimation()\n   * ```\n   *\n   * @public\n   */\n  stopCameraAnimation() {\n    this.emit(\"stop-camera-animation\");\n    return this;\n  }\n  /** @internal */\n  _animateViewport(ms) {\n    if (!this._viewportAnimation) return;\n    this._viewportAnimation.elapsed += ms;\n    const { elapsed, easing, duration, start, end } = this._viewportAnimation;\n    if (elapsed > duration) {\n      this.off(\"tick\", this._animateViewport);\n      this._viewportAnimation = null;\n      this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(-end.x, -end.y, this.getViewportScreenBounds().width / end.width));\n      return;\n    }\n    const remaining = duration - elapsed;\n    const t = easing(1 - remaining / duration);\n    const left = start.minX + (end.minX - start.minX) * t;\n    const top = start.minY + (end.minY - start.minY) * t;\n    const right = start.maxX + (end.maxX - start.maxX) * t;\n    this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(-left, -top, this.getViewportScreenBounds().width / (right - left)), {\n      force: true\n    });\n  }\n  /** @internal */\n  _animateToViewport(targetViewportPage, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_ANIMATION_OPTIONS }) {\n    const { animation, ...rest } = opts;\n    if (!animation) return;\n    const { duration = 0, easing = _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_18__.EASINGS.easeInOutCubic } = animation;\n    const animationSpeed = this.user.getAnimationSpeed();\n    const viewportPageBounds = this.getViewportPageBounds();\n    this.stopCameraAnimation();\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    if (duration === 0 || animationSpeed === 0) {\n      return this._setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n          -targetViewportPage.x,\n          -targetViewportPage.y,\n          this.getViewportScreenBounds().width / targetViewportPage.width\n        ),\n        { ...rest }\n      );\n    }\n    this._viewportAnimation = {\n      elapsed: 0,\n      duration: duration / animationSpeed,\n      easing,\n      start: viewportPageBounds.clone(),\n      end: targetViewportPage.clone()\n    };\n    this.once(\"stop-camera-animation\", () => {\n      this.off(\"tick\", this._animateViewport);\n      this._viewportAnimation = null;\n    });\n    this.on(\"tick\", this._animateViewport);\n    return this;\n  }\n  /**\n   * Slide the camera in a certain direction.\n   *\n   * @example\n   * ```ts\n   * editor.slideCamera({ speed: 1, direction: { x: 1, y: 0 }, friction: 0.1 })\n   * ```\n   *\n   * @param opts - Options for the slide\n   * @public\n   */\n  slideCamera(opts = {}) {\n    const { isLocked } = this.getCameraOptions();\n    if (isLocked && !opts?.force) return this;\n    const animationSpeed = this.user.getAnimationSpeed();\n    if (animationSpeed === 0) return this;\n    this.stopCameraAnimation();\n    const {\n      speed,\n      friction = this.options.cameraSlideFriction,\n      direction,\n      speedThreshold = 0.01\n    } = opts;\n    let currentSpeed = Math.min(speed, 1);\n    const cancel = () => {\n      this.off(\"tick\", moveCamera);\n      this.off(\"stop-camera-animation\", cancel);\n    };\n    this.once(\"stop-camera-animation\", cancel);\n    const moveCamera = (elapsed) => {\n      const { x: cx, y: cy, z: cz } = this.getCamera();\n      const movementVec = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Mul(direction, currentSpeed * elapsed / cz);\n      currentSpeed *= 1 - friction;\n      if (currentSpeed < speedThreshold) {\n        cancel();\n      } else {\n        this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(cx + movementVec.x, cy + movementVec.y, cz));\n      }\n    };\n    this.on(\"tick\", moveCamera);\n    return this;\n  }\n  /**\n   * Animate the camera to a user's cursor position. This also briefly show the user's cursor if it's not currently visible.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToUser(myUserId)\n   * editor.zoomToUser(myUserId, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param userId - The id of the user to animate to.\n   * @param opts - The camera move options.\n   * @public\n   */\n  zoomToUser(userId, opts = { animation: { duration: 500 } }) {\n    const presence = this.getCollaborators().find((c) => c.userId === userId);\n    if (!presence) return this;\n    this.run(() => {\n      if (this.getInstanceState().followingUserId !== null) {\n        this.stopFollowingUser();\n      }\n      const isOnSamePage = presence.currentPageId === this.getCurrentPageId();\n      if (!isOnSamePage) {\n        this.setCurrentPage(presence.currentPageId);\n      }\n      if (opts && opts.animation && !isOnSamePage) {\n        opts.animation = void 0;\n      }\n      this.centerOnPoint(presence.cursor, opts);\n      const { highlightedUserIds } = this.getInstanceState();\n      this.updateInstanceState({ highlightedUserIds: [...highlightedUserIds, userId] });\n      this.timers.setTimeout(() => {\n        const highlightedUserIds2 = [...this.getInstanceState().highlightedUserIds];\n        const index = highlightedUserIds2.indexOf(userId);\n        if (index < 0) return;\n        highlightedUserIds2.splice(index, 1);\n        this.updateInstanceState({ highlightedUserIds: highlightedUserIds2 });\n      }, this.options.collaboratorIdleTimeoutMs);\n    });\n    return this;\n  }\n  /**\n   * Update the viewport. The viewport will measure the size and screen position of its container\n   * element. This should be done whenever the container's position on the screen changes.\n   *\n   * @example\n   * ```ts\n   * editor.updateViewportScreenBounds(new Box(0, 0, 1280, 1024))\n   * editor.updateViewportScreenBounds(new Box(0, 0, 1280, 1024), true)\n   * ```\n   *\n   * @param screenBounds - The new screen bounds of the viewport.\n   * @param center - Whether to preserve the viewport page center as the viewport changes.\n   *\n   * @public\n   */\n  updateViewportScreenBounds(screenBounds, center = false) {\n    if (screenBounds instanceof HTMLElement) {\n      const rect = screenBounds.getBoundingClientRect();\n      screenBounds = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(\n        rect.left || rect.x,\n        rect.top || rect.y,\n        Math.max(rect.width, 1),\n        Math.max(rect.height, 1)\n      );\n    } else {\n      screenBounds.width = Math.max(screenBounds.width, 1);\n      screenBounds.height = Math.max(screenBounds.height, 1);\n    }\n    const insets = [\n      // top\n      screenBounds.minY !== 0,\n      // right\n      !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.approximately)(document.body.scrollWidth, screenBounds.maxX, 1),\n      // bottom\n      !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.approximately)(document.body.scrollHeight, screenBounds.maxY, 1),\n      // left\n      screenBounds.minX !== 0\n    ];\n    const { _willSetInitialBounds } = this;\n    this._willSetInitialBounds = false;\n    const { screenBounds: prevScreenBounds, insets: prevInsets } = this.getInstanceState();\n    if (screenBounds.equals(prevScreenBounds) && insets.every((v, i) => v === prevInsets[i])) {\n      return this;\n    }\n    if (_willSetInitialBounds) {\n      this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n      this.setCamera(this.getCamera());\n    } else {\n      if (center && !this.getInstanceState().followingUserId) {\n        const before = this.getViewportPageBounds().center;\n        this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n        this.centerOnPoint(before);\n      } else {\n        this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n        this._setCamera(_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.From({ ...this.getCamera() }));\n      }\n    }\n    this._tickCameraState();\n    return this;\n  }\n  getViewportScreenBounds() {\n    const { x, y, w, h } = this.getInstanceState().screenBounds;\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(x, y, w, h);\n  }\n  getViewportScreenCenter() {\n    const viewportScreenBounds = this.getViewportScreenBounds();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n      viewportScreenBounds.midX - viewportScreenBounds.minX,\n      viewportScreenBounds.midY - viewportScreenBounds.minY\n    );\n  }\n  getViewportPageBounds() {\n    const { w, h } = this.getViewportScreenBounds();\n    const { x: cx, y: cy, z: cz } = this.getCamera();\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(-cx, -cy, w / cz, h / cz);\n  }\n  /**\n   * Convert a point in screen space to a point in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.screenToPage({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in screen space.\n   *\n   * @public\n   */\n  screenToPage(point) {\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n      (point.x - screenBounds.x) / cz - cx,\n      (point.y - screenBounds.y) / cz - cy,\n      point.z ?? 0.5\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in current screen space.\n   *\n   * @example\n   * ```ts\n   * editor.pageToScreen({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in page space.\n   *\n   * @public\n   */\n  pageToScreen(point) {\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n      (point.x + cx) * cz + screenBounds.x,\n      (point.y + cy) * cz + screenBounds.y,\n      point.z ?? 0.5\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in current viewport space.\n   *\n   * @example\n   * ```ts\n   * editor.pageToViewport({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in page space.\n   *\n   * @public\n   */\n  pageToViewport(point) {\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec((point.x + cx) * cz, (point.y + cy) * cz, point.z ?? 0.5);\n  }\n  _getCollaboratorsQuery() {\n    return this.store.query.records(\"instance_presence\", () => ({\n      userId: { neq: this.user.getId() }\n    }));\n  }\n  getCollaborators() {\n    const allPresenceRecords = this._getCollaboratorsQuery().get();\n    if (!allPresenceRecords.length) return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    const userIds = [...new Set(allPresenceRecords.map((c) => c.userId))].sort();\n    return userIds.map((id) => {\n      const latestPresence = allPresenceRecords.filter((c) => c.userId === id).sort((a, b) => b.lastActivityTimestamp - a.lastActivityTimestamp)[0];\n      return latestPresence;\n    });\n  }\n  getCollaboratorsOnCurrentPage() {\n    const currentPageId = this.getCurrentPageId();\n    return this.getCollaborators().filter((c) => c.currentPageId === currentPageId);\n  }\n  /**\n   * Start viewport-following a user.\n   *\n   * @example\n   * ```ts\n   * editor.startFollowingUser(myUserId)\n   * ```\n   *\n   * @param userId - The id of the user to follow.\n   *\n   * @public\n   */\n  startFollowingUser(userId) {\n    this.stopFollowingUser();\n    const leaderPresences = this._getCollaboratorsQuery().get().filter((p) => p.userId === userId);\n    if (!leaderPresences.length) {\n      console.warn(\"User not found\");\n      return this;\n    }\n    const thisUserId = this.user.getId();\n    if (!thisUserId) {\n      console.warn(\"You should set the userId for the current instance before following a user\");\n    }\n    if (leaderPresences.some((p) => p.followingUserId === thisUserId)) {\n      return this;\n    }\n    const latestLeaderPresence = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"latestLeaderPresence\", () => {\n      return this.getCollaborators().find((p) => p.userId === userId);\n    });\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      this.updateInstanceState({ followingUserId: userId }, { history: \"ignore\" });\n      const dispose = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"update current page\", () => {\n        const leaderPresence = latestLeaderPresence.get();\n        if (!leaderPresence) {\n          this.stopFollowingUser();\n          return;\n        }\n        if (leaderPresence.currentPageId !== this.getCurrentPageId() && this.getPage(leaderPresence.currentPageId)) {\n          this.run(\n            () => {\n              this.store.put([\n                { ...this.getInstanceState(), currentPageId: leaderPresence.currentPageId }\n              ]);\n              this._isLockedOnFollowingUser.set(true);\n            },\n            { history: \"ignore\" }\n          );\n        }\n      });\n      const cancel = () => {\n        dispose();\n        this._isLockedOnFollowingUser.set(false);\n        this.off(\"frame\", moveTowardsUser);\n        this.off(\"stop-following\", cancel);\n      };\n      const moveTowardsUser = () => {\n        const leaderPresence = latestLeaderPresence.get();\n        if (!leaderPresence) {\n          this.stopFollowingUser();\n          return;\n        }\n        if (this._isLockedOnFollowingUser.get()) return;\n        const animationSpeed = this.user.getAnimationSpeed();\n        if (animationSpeed === 0) {\n          this._isLockedOnFollowingUser.set(true);\n          return;\n        }\n        const targetViewport = this.getViewportPageBoundsForFollowing();\n        if (!targetViewport) {\n          this.stopFollowingUser();\n          return;\n        }\n        const currentViewport = this.getViewportPageBounds();\n        const diffX = Math.abs(targetViewport.minX - currentViewport.minX) + Math.abs(targetViewport.maxX - currentViewport.maxX);\n        const diffY = Math.abs(targetViewport.minY - currentViewport.minY) + Math.abs(targetViewport.maxY - currentViewport.maxY);\n        if (diffX < this.options.followChaseViewportSnap && diffY < this.options.followChaseViewportSnap) {\n          this._isLockedOnFollowingUser.set(true);\n          return;\n        }\n        const t = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.clamp)(animationSpeed * 0.5, 0.1, 0.8);\n        const nextViewport = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.minX, targetViewport.minX, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.minY, targetViewport.minY, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.width, targetViewport.width, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.height, targetViewport.height, t)\n        );\n        const nextCamera = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n          -nextViewport.x,\n          -nextViewport.y,\n          this.getViewportScreenBounds().width / nextViewport.width\n        );\n        this.stopCameraAnimation();\n        this._setCamera(nextCamera);\n      };\n      this.once(\"stop-following\", cancel);\n      this.addListener(\"frame\", moveTowardsUser);\n      moveTowardsUser();\n    });\n    return this;\n  }\n  /**\n   * Stop viewport-following a user.\n   *\n   * @example\n   * ```ts\n   * editor.stopFollowingUser()\n   * ```\n   * @public\n   */\n  stopFollowingUser() {\n    this.run(\n      () => {\n        this.store.put([this.getCamera()]);\n        this._isLockedOnFollowingUser.set(false);\n        this.updateInstanceState({ followingUserId: null });\n        this.emit(\"stop-following\");\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  /** @internal */\n  getUnorderedRenderingShapes(useEditorState) {\n    const renderingShapes = [];\n    let nextIndex = this.options.maxShapesPerPage * 2;\n    let nextBackgroundIndex = this.options.maxShapesPerPage;\n    const erasingShapeIds = this.getErasingShapeIds();\n    const addShapeById = (id, opacity, isAncestorErasing) => {\n      const shape = this.getShape(id);\n      if (!shape) return;\n      if (this.isShapeHidden(shape)) return;\n      opacity *= shape.opacity;\n      let isShapeErasing = false;\n      const util = this.getShapeUtil(shape);\n      if (useEditorState) {\n        isShapeErasing = !isAncestorErasing && erasingShapeIds.includes(id);\n        if (isShapeErasing) {\n          opacity *= 0.32;\n        }\n      }\n      renderingShapes.push({\n        id,\n        shape,\n        util,\n        index: nextIndex,\n        backgroundIndex: nextBackgroundIndex,\n        opacity\n      });\n      nextIndex += 1;\n      nextBackgroundIndex += 1;\n      const childIds = this.getSortedChildIdsForParent(id);\n      if (!childIds.length) return;\n      let backgroundIndexToRestore = null;\n      if (util.providesBackgroundForChildren(shape)) {\n        backgroundIndexToRestore = nextBackgroundIndex;\n        nextBackgroundIndex = nextIndex;\n        nextIndex += this.options.maxShapesPerPage;\n      }\n      for (const childId of childIds) {\n        addShapeById(childId, opacity, isAncestorErasing || isShapeErasing);\n      }\n      if (backgroundIndexToRestore !== null) {\n        nextBackgroundIndex = backgroundIndexToRestore;\n      }\n    };\n    const pages = useEditorState ? [this.getCurrentPage()] : this.getPages();\n    for (const page of pages) {\n      for (const childId of this.getSortedChildIdsForParent(page.id)) {\n        addShapeById(childId, 1, false);\n      }\n    }\n    return renderingShapes;\n  }\n  _decayCameraStateTimeout(elapsed) {\n    this._cameraStateTimeoutRemaining -= elapsed;\n    if (this._cameraStateTimeoutRemaining > 0) return;\n    this.off(\"tick\", this._decayCameraStateTimeout);\n    this._cameraState.set(\"idle\");\n  }\n  _tickCameraState() {\n    this._cameraStateTimeoutRemaining = this.options.cameraMovingTimeoutMs;\n    if (this._cameraState.__unsafe__getWithoutCapture() !== \"idle\") return;\n    this._cameraState.set(\"moving\");\n    this.on(\"tick\", this._decayCameraStateTimeout);\n  }\n  /**\n   * Whether the camera is moving or idle.\n   *\n   * @example\n   * ```ts\n   * editor.getCameraState()\n   * ```\n   *\n   * @public\n   */\n  getCameraState() {\n    return this._cameraState.get();\n  }\n  getRenderingShapes() {\n    const renderingShapes = this.getUnorderedRenderingShapes(true);\n    return renderingShapes.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortById);\n  }\n  _getAllPagesQuery() {\n    return this.store.query.records(\"page\");\n  }\n  getPages() {\n    return this._getAllPagesQuery().get().sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex);\n  }\n  /**\n   * The current page.\n   *\n   * @example\n   * ```ts\n   * editor.getCurrentPage()\n   * ```\n   *\n   * @public\n   */\n  getCurrentPage() {\n    return this.getPage(this.getCurrentPageId());\n  }\n  getCurrentPageId() {\n    return this.getInstanceState().currentPageId;\n  }\n  /**\n   * Get a page.\n   *\n   * @example\n   * ```ts\n   * editor.getPage(myPage.id)\n   * editor.getPage(myPage)\n   * ```\n   *\n   * @param page - The page (or the page id) to get.\n   *\n   * @public\n   */\n  getPage(page) {\n    return this.store.get(typeof page === \"string\" ? page : page.id);\n  }\n  /**\n   * An array of all of the shapes on the current page.\n   *\n   * @example\n   * ```ts\n   * editor.getCurrentPageIds()\n   * ```\n   *\n   * @public\n   */\n  getCurrentPageShapeIds() {\n    return this._currentPageShapeIds.get();\n  }\n  getCurrentPageShapeIdsSorted() {\n    return Array.from(this.getCurrentPageShapeIds()).sort();\n  }\n  /**\n   * Get the ids of shapes on a page.\n   *\n   * @example\n   * ```ts\n   * const idsOnPage1 = editor.getPageShapeIds('page1')\n   * const idsOnPage2 = editor.getPageShapeIds(myPage2)\n   * ```\n   *\n   * @param page - The page (or the page id) to get the shape ids for.\n   *\n   * @public\n   **/\n  getPageShapeIds(page) {\n    const pageId = typeof page === \"string\" ? page : page.id;\n    const result = this.store.query.exec(\"shape\", { parentId: { eq: pageId } });\n    return this.getShapeAndDescendantIds(result.map((s) => s.id));\n  }\n  /**\n   * Set the current page.\n   *\n   * @example\n   * ```ts\n   * editor.setCurrentPage('page1')\n   * editor.setCurrentPage(myPage1)\n   * ```\n   *\n   * @param page - The page (or the page id) to set as the current page.\n   *\n   * @public\n   */\n  setCurrentPage(page) {\n    const pageId = typeof page === \"string\" ? page : page.id;\n    if (!this.store.has(pageId)) {\n      console.error(\"Tried to set the current page id to a page that doesn't exist.\");\n      return this;\n    }\n    this.stopFollowingUser();\n    this.complete();\n    return this.run(\n      () => {\n        this.store.put([{ ...this.getInstanceState(), currentPageId: pageId }]);\n        this.setCamera(this.getCamera());\n      },\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Update a page.\n   *\n   * @example\n   * ```ts\n   * editor.updatePage({ id: 'page2', name: 'Page 2' })\n   * ```\n   *\n   * @param partial - The partial of the shape to update.\n   *\n   * @public\n   */\n  updatePage(partial) {\n    if (this.getIsReadonly()) return this;\n    const prev = this.getPage(partial.id);\n    if (!prev) return this;\n    return this.run(() => this.store.update(partial.id, (page) => ({ ...page, ...partial })));\n  }\n  /**\n   * Create a page.\n   *\n   * @example\n   * ```ts\n   * editor.createPage(myPage)\n   * editor.createPage({ name: 'Page 2' })\n   * ```\n   *\n   * @param page - The page (or page partial) to create.\n   *\n   * @public\n   */\n  createPage(page) {\n    this.run(() => {\n      if (this.getIsReadonly()) return;\n      if (this.getPages().length >= this.options.maxPages) return;\n      const pages = this.getPages();\n      const name = (0,_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_26__.getIncrementedName)(\n        page.name ?? \"Page 1\",\n        pages.map((p) => p.name)\n      );\n      let index = page.index;\n      if (!index || pages.some((p) => p.index === index)) {\n        index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(pages[pages.length - 1].index);\n      }\n      const newPage = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.PageRecordType.create({\n        meta: {},\n        ...page,\n        name,\n        index\n      });\n      this.store.put([newPage]);\n    });\n    return this;\n  }\n  /**\n   * Delete a page.\n   *\n   * @example\n   * ```ts\n   * editor.deletePage('page1')\n   * ```\n   *\n   * @param page - The page (or the page id) to delete.\n   *\n   * @public\n   */\n  deletePage(page) {\n    const id = typeof page === \"string\" ? page : page.id;\n    this.run(() => {\n      if (this.getIsReadonly()) return;\n      const pages = this.getPages();\n      if (pages.length === 1) return;\n      const deletedPage = this.getPage(id);\n      if (!deletedPage) return;\n      if (id === this.getCurrentPageId()) {\n        const index = pages.findIndex((page2) => page2.id === id);\n        const next = pages[index - 1] ?? pages[index + 1];\n        this.setCurrentPage(next.id);\n      }\n      this.store.remove([deletedPage.id]);\n    });\n    return this;\n  }\n  /**\n   * Duplicate a page.\n   *\n   * @param page - The page (or the page id) to duplicate. Defaults to the current page.\n   * @param createId - The id of the new page. Defaults to a new id.\n   *\n   * @public\n   */\n  duplicatePage(page, createId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.PageRecordType.createId()) {\n    if (this.getPages().length >= this.options.maxPages) return this;\n    const id = typeof page === \"string\" ? page : page.id;\n    const freshPage = this.getPage(id);\n    if (!freshPage) return this;\n    const prevCamera = { ...this.getCamera() };\n    const content = this.getContentFromCurrentPage(this.getSortedChildIdsForParent(freshPage.id));\n    this.run(() => {\n      const pages = this.getPages();\n      const index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexBetween)(freshPage.index, pages[pages.indexOf(freshPage) + 1]?.index);\n      this.createPage({ name: freshPage.name + \" Copy\", id: createId, index });\n      this.setCurrentPage(createId);\n      this.setCamera(prevCamera);\n      if (content) {\n        return this.putContentOntoCurrentPage(content);\n      }\n    });\n    return this;\n  }\n  /**\n   * Rename a page.\n   *\n   * @example\n   * ```ts\n   * editor.renamePage('page1', 'My Page')\n   * ```\n   *\n   * @param page - The page (or the page id) to rename.\n   * @param name - The new name.\n   *\n   * @public\n   */\n  renamePage(page, name) {\n    const id = typeof page === \"string\" ? page : page.id;\n    if (this.getIsReadonly()) return this;\n    this.updatePage({ id, name });\n    return this;\n  }\n  _getAllAssetsQuery() {\n    return this.store.query.records(\"asset\");\n  }\n  /**\n   * Get all assets in the editor.\n   *\n   * @public\n   */\n  getAssets() {\n    return this._getAllAssetsQuery().get();\n  }\n  /**\n   * Create one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.createAssets([...myAssets])\n   * ```\n   *\n   * @param assets - The assets to create.\n   *\n   * @public\n   */\n  createAssets(assets) {\n    if (this.getIsReadonly()) return this;\n    if (assets.length <= 0) return this;\n    this.run(() => this.store.put(assets), { history: \"ignore\" });\n    return this;\n  }\n  /**\n   * Update one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.updateAssets([{ id: 'asset1', name: 'New name' }])\n   * ```\n   *\n   * @param assets - The assets to update.\n   *\n   * @public\n   */\n  updateAssets(assets) {\n    if (this.getIsReadonly()) return this;\n    if (assets.length <= 0) return this;\n    this.run(\n      () => {\n        this.store.put(\n          assets.map((partial) => ({\n            ...this.store.get(partial.id),\n            ...partial\n          }))\n        );\n      },\n      { history: \"ignore\" }\n    );\n    return this;\n  }\n  /**\n   * Delete one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.deleteAssets(['asset1', 'asset2'])\n   * ```\n   *\n   * @param assets - The assets (or asset ids) to delete.\n   *\n   * @public\n   */\n  deleteAssets(assets) {\n    if (this.getIsReadonly()) return this;\n    const ids = typeof assets[0] === \"string\" ? assets : assets.map((a) => a.id);\n    if (ids.length <= 0) return this;\n    this.run(() => this.store.remove(ids), { history: \"ignore\" });\n    return this;\n  }\n  /**\n   * Get an asset by its id.\n   *\n   * @example\n   * ```ts\n   * editor.getAsset('asset1')\n   * ```\n   *\n   * @param asset - The asset (or asset id) to get.\n   *\n   * @public\n   */\n  getAsset(asset) {\n    return this.store.get(typeof asset === \"string\" ? asset : asset.id);\n  }\n  async resolveAssetUrl(assetId, context) {\n    if (!assetId) return null;\n    const asset = this.getAsset(assetId);\n    if (!asset) return null;\n    const { screenScale = 1, shouldResolveToOriginal = false } = context;\n    const zoomStepFunction = (zoom) => Math.pow(2, Math.ceil(Math.log2(zoom)));\n    const steppedScreenScale = Math.max(0.125, zoomStepFunction(screenScale));\n    const networkEffectiveType = \"connection\" in navigator ? navigator.connection.effectiveType : null;\n    const dpr = this.getInstanceState().devicePixelRatio;\n    return await this.store.props.assets.resolve(asset, {\n      screenScale: screenScale || 1,\n      steppedScreenScale,\n      dpr,\n      networkEffectiveType,\n      shouldResolveToOriginal\n    });\n  }\n  /**\n   * Upload an asset to the store's asset service, returning a URL that can be used to resolve the\n   * asset.\n   */\n  async uploadAsset(asset, file) {\n    return await this.store.props.assets.upload(asset, file);\n  }\n  _getShapeGeometryCache() {\n    return this.store.createComputedCache(\n      \"bounds\",\n      (shape) => this.getShapeUtil(shape).getGeometry(shape),\n      (a, b) => a.props === b.props\n    );\n  }\n  /**\n   * Get the geometry of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeGeometry(myShape)\n   * editor.getShapeGeometry(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the geometry for.\n   *\n   * @public\n   */\n  getShapeGeometry(shape) {\n    return this._getShapeGeometryCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeHandlesCache() {\n    return this.store.createComputedCache(\"handles\", (shape) => {\n      return this.getShapeUtil(shape).getHandles?.(shape);\n    });\n  }\n  /**\n   * Get the handles (if any) for a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeHandles(myShape)\n   * editor.getShapeHandles(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the handles for.\n   * @public\n   */\n  getShapeHandles(shape) {\n    return this._getShapeHandlesCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  /**\n   * Get the local transform for a shape as a matrix model. This transform reflects both its\n   * translation (x, y) from from either its parent's top left corner, if the shape's parent is\n   * another shape, or else from the 0,0 of the page, if the shape's parent is the page; and the\n   * shape's rotation.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeLocalTransform(myShape)\n   * ```\n   *\n   * @param shape - The shape to get the local transform for.\n   *\n   * @public\n   */\n  getShapeLocalTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape) throw Error(\"Editor.getTransform: shape not found\");\n    return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity().translate(freshShape.x, freshShape.y).rotate(freshShape.rotation);\n  }\n  _getShapePageTransformCache() {\n    return this.store.createComputedCache(\"pageTransformCache\", (shape) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId)) {\n        return this.getShapeLocalTransform(shape);\n      }\n      const parentTransform = this._getShapePageTransformCache().get(shape.parentId) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity();\n      return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Compose(parentTransform, this.getShapeLocalTransform(shape));\n    });\n  }\n  /**\n   * Get the local transform of a shape's parent as a matrix model.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeParentTransform(myShape)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the parent transform for.\n   *\n   * @public\n   */\n  getShapeParentTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape || (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(freshShape.parentId)) return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity();\n    return this._getShapePageTransformCache().get(freshShape.parentId) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity();\n  }\n  /**\n   * Get the transform of a shape in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.getShapePageTransform(myShape)\n   * editor.getShapePageTransform(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the page transform for.\n   *\n   * @public\n   */\n  getShapePageTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this._getShapePageTransformCache().get(id) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity();\n  }\n  _getShapePageBoundsCache() {\n    return this.store.createComputedCache(\"pageBoundsCache\", (shape) => {\n      const pageTransform = this._getShapePageTransformCache().get(shape.id);\n      if (!pageTransform) return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box();\n      const result = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.FromPoints(\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoints(pageTransform, this.getShapeGeometry(shape).vertices)\n      );\n      return result;\n    });\n  }\n  /**\n   * Get the bounds of a shape in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.getShapePageBounds(myShape)\n   * editor.getShapePageBounds(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the bounds for.\n   *\n   * @public\n   */\n  getShapePageBounds(shape) {\n    return this._getShapePageBoundsCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeClipPathCache() {\n    return this.store.createComputedCache(\"clipPathCache\", (shape) => {\n      const pageMask = this._getShapeMaskCache().get(shape.id);\n      if (!pageMask) return void 0;\n      if (pageMask.length === 0) {\n        return `polygon(0px 0px, 0px 0px, 0px 0px)`;\n      }\n      const pageTransform = this._getShapePageTransformCache().get(shape.id);\n      if (!pageTransform) return void 0;\n      const localMask = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoints(_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Inverse(pageTransform), pageMask);\n      return `polygon(${localMask.map((p) => `${p.x}px ${p.y}px`).join(\",\")})`;\n    });\n  }\n  /**\n   * Get the clip path for a shape.\n   *\n   * @example\n   * ```ts\n   * const clipPath = editor.getShapeClipPath(shape)\n   * const clipPath = editor.getShapeClipPath(shape.id)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the clip path for.\n   *\n   * @returns The clip path or undefined.\n   *\n   * @public\n   */\n  getShapeClipPath(shape) {\n    return this._getShapeClipPathCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeMaskCache() {\n    return this.store.createComputedCache(\"pageMaskCache\", (shape) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId)) return void 0;\n      const frameAncestors = this.getShapeAncestors(shape.id).filter(\n        (shape2) => this.isShapeOfType(shape2, \"frame\")\n      );\n      if (frameAncestors.length === 0) return void 0;\n      const pageMask = frameAncestors.map(\n        (s) => (\n          // Apply the frame transform to the frame outline to get the frame outline in the current page space\n          (this._getShapePageTransformCache().get(s.id).applyToPoints(this.getShapeGeometry(s).vertices))\n        )\n      ).reduce((acc, b) => {\n        if (!(b && acc)) return void 0;\n        const intersection = (0,_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_20__.intersectPolygonPolygon)(acc, b);\n        if (intersection) {\n          return intersection.map(_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Cast);\n        }\n        return [];\n      });\n      return pageMask;\n    });\n  }\n  /**\n   * Get the mask (in the current page space) for a shape.\n   *\n   * @example\n   * ```ts\n   * const pageMask = editor.getShapeMask(shape.id)\n   * ```\n   *\n   * @param shape - The shape (or the shape id) of the shape to get the mask for.\n   *\n   * @returns The mask for the shape.\n   *\n   * @public\n   */\n  getShapeMask(shape) {\n    return this._getShapeMaskCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  /**\n   * Get the bounds of a shape in the current page space, incorporating any masks. For example, if the\n   * shape were the child of a frame and was half way out of the frame, the bounds would be the half\n   * of the shape that was in the frame.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeMaskedPageBounds(myShape)\n   * editor.getShapeMaskedPageBounds(myShapeId)\n   * ```\n   *\n   * @param shape - The shape to get the masked bounds for.\n   *\n   * @public\n   */\n  getShapeMaskedPageBounds(shape) {\n    if (typeof shape !== \"string\") shape = shape.id;\n    return this._getShapeMaskedPageBoundsCache().get(shape);\n  }\n  _getShapeMaskedPageBoundsCache() {\n    return this.store.createComputedCache(\"shapeMaskedPageBoundsCache\", (shape) => {\n      const pageBounds = this._getShapePageBoundsCache().get(shape.id);\n      if (!pageBounds) return;\n      const pageMask = this._getShapeMaskCache().get(shape.id);\n      if (pageMask) {\n        if (pageMask.length === 0) return void 0;\n        const { corners } = pageBounds;\n        if (corners.every((p, i) => p && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Equals(p, pageMask[i]))) return pageBounds.clone();\n        const intersection = (0,_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_20__.intersectPolygonPolygon)(pageMask, corners);\n        if (!intersection) return;\n        return _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.FromPoints(intersection);\n      }\n      return pageBounds;\n    });\n  }\n  /**\n   * Get the ancestors of a shape.\n   *\n   * @example\n   * ```ts\n   * const ancestors = editor.getShapeAncestors(myShape)\n   * const ancestors = editor.getShapeAncestors(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the ancestors for.\n   * @param acc - The accumulator.\n   *\n   * @public\n   */\n  getShapeAncestors(shape, acc = []) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape) return acc;\n    const parentId = freshShape.parentId;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId)) {\n      acc.reverse();\n      return acc;\n    }\n    const parent = this.store.get(parentId);\n    if (!parent) return acc;\n    acc.push(parent);\n    return this.getShapeAncestors(parent, acc);\n  }\n  /**\n   * Find the first ancestor matching the given predicate\n   *\n   * @example\n   * ```ts\n   * const ancestor = editor.findShapeAncestor(myShape)\n   * const ancestor = editor.findShapeAncestor(myShape.id)\n   * const ancestor = editor.findShapeAncestor(myShape.id, (shape) => shape.type === 'frame')\n   * ```\n   *\n   * @param shape - The shape to check the ancestors for.\n   * @param predicate - The predicate to match.\n   *\n   * @public\n   */\n  findShapeAncestor(shape, predicate) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape) return;\n    const parentId = freshShape.parentId;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId)) return;\n    const parent = this.getShape(parentId);\n    if (!parent) return;\n    return predicate(parent) ? parent : this.findShapeAncestor(parent, predicate);\n  }\n  /**\n   * Returns true if the the given shape has the given ancestor.\n   *\n   * @param shape - The shape.\n   * @param ancestorId - The id of the ancestor.\n   *\n   * @public\n   */\n  hasAncestor(shape, ancestorId) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    const freshShape = id && this.getShape(id);\n    if (!freshShape) return false;\n    if (freshShape.parentId === ancestorId) return true;\n    return this.hasAncestor(this.getShapeParent(freshShape), ancestorId);\n  }\n  /**\n   * Get the common ancestor of two or more shapes that matches a predicate.\n   *\n   * @param shapes - The shapes (or shape ids) to check.\n   * @param predicate - The predicate to match.\n   */\n  findCommonAncestor(shapes, predicate) {\n    if (shapes.length === 0) {\n      return;\n    }\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const freshShapes = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    if (freshShapes.length === 1) {\n      const parentId = freshShapes[0].parentId;\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId)) {\n        return;\n      }\n      return predicate ? this.findShapeAncestor(freshShapes[0], predicate)?.id : parentId;\n    }\n    const [nodeA, ...others] = freshShapes;\n    let ancestor = this.getShapeParent(nodeA);\n    while (ancestor) {\n      if (predicate && !predicate(ancestor)) {\n        ancestor = this.getShapeParent(ancestor);\n        continue;\n      }\n      if (others.every((shape) => this.hasAncestor(shape, ancestor.id))) {\n        return ancestor.id;\n      }\n      ancestor = this.getShapeParent(ancestor);\n    }\n    return void 0;\n  }\n  isShapeOrAncestorLocked(arg) {\n    const shape = typeof arg === \"string\" ? this.getShape(arg) : arg;\n    if (shape === void 0) return false;\n    if (shape.isLocked) return true;\n    return this.isShapeOrAncestorLocked(this.getShapeParent(shape));\n  }\n  _notVisibleShapes() {\n    return (0,_derivations_notVisibleShapes_mjs__WEBPACK_IMPORTED_MODULE_31__.notVisibleShapes)(this);\n  }\n  getCulledShapes() {\n    const notVisibleShapes2 = this._notVisibleShapes().get();\n    const selectedShapeIds = this.getSelectedShapeIds();\n    const editingId = this.getEditingShapeId();\n    const culledShapes = new Set(notVisibleShapes2);\n    if (editingId) {\n      culledShapes.delete(editingId);\n    }\n    selectedShapeIds.forEach((id) => {\n      culledShapes.delete(id);\n    });\n    return culledShapes;\n  }\n  getCurrentPageBounds() {\n    let commonBounds;\n    this.getCurrentPageShapeIdsSorted().forEach((shapeId) => {\n      const bounds = this.getShapeMaskedPageBounds(shapeId);\n      if (!bounds) return;\n      if (!commonBounds) {\n        commonBounds = bounds.clone();\n      } else {\n        commonBounds = commonBounds.expand(bounds);\n      }\n    });\n    return commonBounds;\n  }\n  /**\n   * Get the top-most selected shape at the given point, ignoring groups.\n   *\n   * @param point - The point to check.\n   *\n   * @returns The top-most selected shape at the given point, or undefined if there is no shape at the point.\n   */\n  getSelectedShapeAtPoint(point) {\n    const selectedShapeIds = this.getSelectedShapeIds();\n    return this.getCurrentPageShapesSorted().filter((shape) => shape.type !== \"group\" && selectedShapeIds.includes(shape.id)).reverse().find((shape) => this.isPointInShape(shape, point, { hitInside: true, margin: 0 }));\n  }\n  /**\n   * Get the shape at the current point.\n   *\n   * @param point - The point to check.\n   * @param opts - Options for the check: `hitInside` to check if the point is inside the shape, `margin` to check if the point is within a margin of the shape, `hitFrameInside` to check if the point is inside the frame, and `filter` to filter the shapes to check.\n   *\n   * @returns The shape at the given point, or undefined if there is no shape at the point.\n   */\n  getShapeAtPoint(point, opts = {}) {\n    const zoomLevel = this.getZoomLevel();\n    const viewportPageBounds = this.getViewportPageBounds();\n    const {\n      filter,\n      margin = 0,\n      hitLocked = false,\n      hitLabels = false,\n      hitInside = false,\n      hitFrameInside = false\n    } = opts;\n    let inHollowSmallestArea = Infinity;\n    let inHollowSmallestAreaHit = null;\n    let inMarginClosestToEdgeDistance = Infinity;\n    let inMarginClosestToEdgeHit = null;\n    const shapesToCheck = (opts.renderingOnly ? this.getCurrentPageRenderingShapesSorted() : this.getCurrentPageShapesSorted()).filter((shape) => {\n      if (shape.isLocked && !hitLocked || this.isShapeHidden(shape) || this.isShapeOfType(shape, \"group\"))\n        return false;\n      const pageMask = this.getShapeMask(shape);\n      if (pageMask && !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.pointInPolygon)(point, pageMask)) return false;\n      if (filter) return filter(shape);\n      return true;\n    });\n    for (let i = shapesToCheck.length - 1; i >= 0; i--) {\n      const shape = shapesToCheck[i];\n      const geometry = this.getShapeGeometry(shape);\n      const isGroup = geometry instanceof _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_19__.Group2d;\n      const pointInShapeSpace = this.getPointInShapeSpace(shape, point);\n      if (this.isShapeOfType(shape, \"arrow\") || this.isShapeOfType(shape, \"geo\") && shape.props.fill === \"none\") {\n        if (shape.props.text.trim()) {\n          for (const childGeometry of geometry.children) {\n            if (childGeometry.isLabel && childGeometry.isPointInBounds(pointInShapeSpace)) {\n              return shape;\n            }\n          }\n        }\n      }\n      if (this.isShapeOfType(shape, \"frame\")) {\n        const distance2 = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n        if (Math.abs(distance2) <= margin) {\n          return inMarginClosestToEdgeHit || shape;\n        }\n        if (geometry.hitTestPoint(pointInShapeSpace, 0, true)) {\n          return inMarginClosestToEdgeHit || inHollowSmallestAreaHit || (hitFrameInside ? shape : void 0);\n        }\n        continue;\n      }\n      let distance;\n      if (isGroup) {\n        let minDistance = Infinity;\n        for (const childGeometry of geometry.children) {\n          if (childGeometry.isLabel && !hitLabels) continue;\n          const tDistance = childGeometry.distanceToPoint(pointInShapeSpace, hitInside);\n          if (tDistance < minDistance) {\n            minDistance = tDistance;\n          }\n        }\n        distance = minDistance;\n      } else {\n        if (margin === 0 && (geometry.bounds.w < 1 || geometry.bounds.h < 1)) {\n          distance = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n        } else {\n          if (geometry.bounds.containsPoint(pointInShapeSpace, margin)) {\n            distance = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n          } else {\n            distance = Infinity;\n          }\n        }\n      }\n      if (geometry.isClosed) {\n        if (distance <= margin) {\n          if (geometry.isFilled || isGroup && geometry.children[0].isFilled) {\n            return inMarginClosestToEdgeHit || shape;\n          } else {\n            if (this.getShapePageBounds(shape).contains(viewportPageBounds)) continue;\n            if (Math.abs(distance) < margin) {\n              if (Math.abs(distance) < inMarginClosestToEdgeDistance) {\n                inMarginClosestToEdgeDistance = Math.abs(distance);\n                inMarginClosestToEdgeHit = shape;\n              }\n            } else if (!inMarginClosestToEdgeHit) {\n              const { area } = geometry;\n              if (area < inHollowSmallestArea) {\n                inHollowSmallestArea = area;\n                inHollowSmallestAreaHit = shape;\n              }\n            }\n          }\n        }\n      } else {\n        if (distance < this.options.hitTestMargin / zoomLevel) {\n          return shape;\n        }\n      }\n    }\n    return inMarginClosestToEdgeHit || inHollowSmallestAreaHit || void 0;\n  }\n  /**\n   * Get the shapes, if any, at a given page point.\n   *\n   * @example\n   * ```ts\n   * editor.getShapesAtPoint({ x: 100, y: 100 })\n   * editor.getShapesAtPoint({ x: 100, y: 100 }, { hitInside: true, exact: true })\n   * ```\n   *\n   * @param point - The page point to test.\n   * @param opts - The options for the hit point testing.\n   *\n   * @public\n   */\n  getShapesAtPoint(point, opts = {}) {\n    return this.getCurrentPageShapes().filter(\n      (shape) => !this.isShapeHidden(shape) && this.isPointInShape(shape, point, opts)\n    );\n  }\n  /**\n   * Test whether a point (in the current page space) will will a shape. This method takes into account masks,\n   * such as when a shape is the child of a frame and is partially clipped by the frame.\n   *\n   * @example\n   * ```ts\n   * editor.isPointInShape({ x: 100, y: 100 }, myShape)\n   * ```\n   *\n   * @param shape - The shape to test against.\n   * @param point - The page point to test (in the current page space).\n   * @param opts - The options for the hit point testing.\n   *\n   * @public\n   */\n  isPointInShape(shape, point, opts = {}) {\n    const { hitInside = false, margin = 0 } = opts;\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const pageMask = this.getShapeMask(id);\n    if (pageMask && !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.pointInPolygon)(point, pageMask)) return false;\n    return this.getShapeGeometry(id).hitTestPoint(\n      this.getPointInShapeSpace(shape, point),\n      margin,\n      hitInside\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in the local space of a shape. For example, if a\n   * shape's page point were `{ x: 100, y: 100 }`, a page point at `{ x: 110, y: 110 }` would be at\n   * `{ x: 10, y: 10 }` in the shape's local space.\n   *\n   * @example\n   * ```ts\n   * editor.getPointInShapeSpace(myShape, { x: 100, y: 100 })\n   * ```\n   *\n   * @param shape - The shape to get the point in the local space of.\n   * @param point - The page point to get in the local space of the shape.\n   *\n   * @public\n   */\n  getPointInShapeSpace(shape, point) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this._getShapePageTransformCache().get(id).clone().invert().applyToPoint(point);\n  }\n  /**\n   * Convert a delta in the current page space to a point in the local space of a shape's parent.\n   *\n   * @example\n   * ```ts\n   * editor.getPointInParentSpace(myShape.id, { x: 100, y: 100 })\n   * ```\n   *\n   * @param shape - The shape to get the point in the local space of.\n   * @param point - The page point to get in the local space of the shape.\n   *\n   * @public\n   */\n  getPointInParentSpace(shape, point) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape) return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(0, 0);\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(freshShape.parentId)) return _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.From(point);\n    const parentTransform = this.getShapePageTransform(freshShape.parentId);\n    if (!parentTransform) return _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.From(point);\n    return parentTransform.clone().invert().applyToPoint(point);\n  }\n  getCurrentPageShapes() {\n    return Array.from(this.getCurrentPageShapeIds(), (id) => this.store.get(id));\n  }\n  getCurrentPageShapesSorted() {\n    const result = [];\n    const topLevelShapes = this.getSortedChildIdsForParent(this.getCurrentPageId());\n    for (let i = 0, n = topLevelShapes.length; i < n; i++) {\n      pushShapeWithDescendants(this, topLevelShapes[i], result);\n    }\n    return result;\n  }\n  getCurrentPageRenderingShapesSorted() {\n    const culledShapes = this.getCulledShapes();\n    return this.getCurrentPageShapesSorted().filter(\n      ({ id }) => !culledShapes.has(id) && !this.isShapeHidden(id)\n    );\n  }\n  isShapeOfType(arg, type) {\n    const shape = typeof arg === \"string\" ? this.getShape(arg) : arg;\n    if (!shape) return false;\n    return shape.type === type;\n  }\n  /**\n   * Get a shape by its id.\n   *\n   * @example\n   * ```ts\n   * editor.getShape('box1')\n   * ```\n   *\n   * @param shape - The shape (or the id of the shape) to get.\n   *\n   * @public\n   */\n  getShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(id)) return void 0;\n    return this.store.get(id);\n  }\n  /**\n   * Get the parent shape for a given shape. Returns undefined if the shape is the direct child of\n   * the page.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeParent(myShape)\n   * ```\n   *\n   * @public\n   */\n  getShapeParent(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    if (!id) return void 0;\n    const freshShape = this.getShape(id);\n    if (freshShape === void 0 || !(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(freshShape.parentId)) return void 0;\n    return this.store.get(freshShape.parentId);\n  }\n  /**\n   * If siblingShape and targetShape are siblings, this returns targetShape. If targetShape has an\n   * ancestor who is a sibling of siblingShape, this returns that ancestor. Otherwise, this returns\n   * undefined.\n   *\n   * @internal\n   */\n  getShapeNearestSibling(siblingShape, targetShape) {\n    if (!targetShape) {\n      return void 0;\n    }\n    if (targetShape.parentId === siblingShape.parentId) {\n      return targetShape;\n    }\n    const ancestor = this.findShapeAncestor(\n      targetShape,\n      (ancestor2) => ancestor2.parentId === siblingShape.parentId\n    );\n    return ancestor;\n  }\n  /**\n   * Get whether the given shape is the descendant of the given page.\n   *\n   * @example\n   * ```ts\n   * editor.isShapeInPage(myShape)\n   * editor.isShapeInPage(myShape, 'page1')\n   * ```\n   *\n   * @param shape - The shape to check.\n   * @param pageId - The id of the page to check against. Defaults to the current page.\n   *\n   * @public\n   */\n  isShapeInPage(shape, pageId = this.getCurrentPageId()) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const shapeToCheck = this.getShape(id);\n    if (!shapeToCheck) return false;\n    let shapeIsInPage = false;\n    if (shapeToCheck.parentId === pageId) {\n      shapeIsInPage = true;\n    } else {\n      let parent = this.getShape(shapeToCheck.parentId);\n      isInPageSearch: while (parent) {\n        if (parent.parentId === pageId) {\n          shapeIsInPage = true;\n          break isInPageSearch;\n        }\n        parent = this.getShape(parent.parentId);\n      }\n    }\n    return shapeIsInPage;\n  }\n  /**\n   * Get the id of the containing page for a given shape.\n   *\n   * @param shape - The shape to get the page id for.\n   *\n   * @returns The id of the page that contains the shape, or undefined if the shape is undefined.\n   *\n   * @public\n   */\n  getAncestorPageId(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    const _shape = id && this.getShape(id);\n    if (!_shape) return void 0;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(_shape.parentId)) {\n      return _shape.parentId;\n    } else {\n      return this.getAncestorPageId(this.getShape(_shape.parentId));\n    }\n  }\n  /**\n   * Reparent shapes to a new parent. This operation preserves the shape's current page positions /\n   * rotations.\n   *\n   * @example\n   * ```ts\n   * editor.reparentShapes([box1, box2], 'frame1')\n   * editor.reparentShapes([box1.id, box2.id], 'frame1')\n   * editor.reparentShapes([box1.id, box2.id], 'frame1', 4)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to reparent.\n   * @param parentId - The id of the new parent shape.\n   * @param insertIndex - The index to insert the children.\n   *\n   * @public\n   */\n  reparentShapes(shapes, parentId, insertIndex) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length === 0) return this;\n    const changes = [];\n    const parentTransform = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId) ? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Identity() : this.getShapePageTransform(parentId);\n    const parentPageRotation = parentTransform.rotation();\n    let indices = [];\n    const sibs = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(this.getSortedChildIdsForParent(parentId).map((id) => this.getShape(id)));\n    if (insertIndex) {\n      const sibWithInsertIndex = sibs.find((s) => s.index === insertIndex);\n      if (sibWithInsertIndex) {\n        const sibAbove = sibs[sibs.indexOf(sibWithInsertIndex) + 1];\n        if (sibAbove) {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesBetween)(insertIndex, sibAbove.index, ids.length);\n        } else {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(insertIndex, ids.length);\n        }\n      } else {\n        const sibAbove = sibs.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex).find((s) => s.index > insertIndex);\n        if (sibAbove) {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesBetween)(insertIndex, sibAbove.index, ids.length);\n        } else {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(insertIndex, ids.length);\n        }\n      }\n    } else {\n      const sib = sibs.length && sibs[sibs.length - 1];\n      indices = sib ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(sib.index, ids.length) : (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndices)(ids.length);\n    }\n    const invertedParentTransform = parentTransform.clone().invert();\n    const shapesToReparent = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    this.run(\n      () => {\n        for (let i = 0; i < shapesToReparent.length; i++) {\n          const shape = shapesToReparent[i];\n          const pageTransform = this.getShapePageTransform(shape);\n          if (!pageTransform) continue;\n          const pagePoint = pageTransform.point();\n          if (!pagePoint) continue;\n          const newPoint = invertedParentTransform.applyToPoint(pagePoint);\n          const newRotation = pageTransform.rotation() - parentPageRotation;\n          changes.push({\n            id: shape.id,\n            type: shape.type,\n            parentId,\n            x: newPoint.x,\n            y: newPoint.y,\n            rotation: newRotation,\n            index: indices[i]\n          });\n        }\n        this.updateShapes(changes);\n      },\n      { ignoreShapeLock: true }\n    );\n    return this;\n  }\n  /**\n   * Get the index above the highest child of a given parent.\n   *\n   * @param parent - The parent (or the id) of the parent.\n   *\n   * @returns The index.\n   *\n   * @public\n   */\n  getHighestIndexForParent(parent) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const children = this._parentIdsToChildIds.get()[parentId];\n    if (!children || children.length === 0) {\n      return \"a1\";\n    }\n    const shape = this.getShape(children[children.length - 1]);\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(shape.index);\n  }\n  /**\n   * Get an array of all the children of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getSortedChildIdsForParent('frame1')\n   * ```\n   *\n   * @param parent - The parent (or the id) of the parent shape.\n   *\n   * @public\n   */\n  getSortedChildIdsForParent(parent) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const ids = this._parentIdsToChildIds.get()[parentId];\n    if (!ids) return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    return ids;\n  }\n  /**\n   * Run a visitor function for all descendants of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.visitDescendants('frame1', myCallback)\n   * ```\n   *\n   * @param parent - The parent (or the id) of the parent shape.\n   * @param visitor - The visitor function.\n   *\n   * @public\n   */\n  visitDescendants(parent, visitor) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const children = this.getSortedChildIdsForParent(parentId);\n    for (const id of children) {\n      if (visitor(id) === false) continue;\n      this.visitDescendants(id, visitor);\n    }\n    return this;\n  }\n  /**\n   * Get the shape ids of all descendants of the given shapes (including the shapes themselves). IDs are returned in z-index order.\n   *\n   * @param ids - The ids of the shapes to get descendants of.\n   *\n   * @returns The descendant ids.\n   *\n   * @public\n   */\n  getShapeAndDescendantIds(ids) {\n    const shapeIds = /* @__PURE__ */ new Set();\n    for (const shape of ids.map((id) => this.getShape(id)).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex)) {\n      shapeIds.add(shape.id);\n      this.visitDescendants(shape, (descendantId) => {\n        shapeIds.add(descendantId);\n      });\n    }\n    return shapeIds;\n  }\n  /**\n   * Get the shape that some shapes should be dropped on at a given point.\n   *\n   * @param point - The point to find the parent for.\n   * @param droppingShapes - The shapes that are being dropped.\n   *\n   * @returns The shape to drop on.\n   *\n   * @public\n   */\n  getDroppingOverShape(point, droppingShapes = []) {\n    const currentPageShapesSorted = this.getCurrentPageShapesSorted();\n    for (let i = currentPageShapesSorted.length - 1; i >= 0; i--) {\n      const shape = currentPageShapesSorted[i];\n      if (\n        // ignore hidden shapes\n        this.isShapeHidden(shape) || // don't allow dropping on selected shapes\n        this.getSelectedShapeIds().includes(shape.id) || // only allow shapes that can receive children\n        !this.getShapeUtil(shape).canDropShapes(shape, droppingShapes) || // don't allow dropping a shape on itself or one of it's children\n        droppingShapes.find((s) => s.id === shape.id || this.hasAncestor(shape, s.id))\n      ) {\n        continue;\n      }\n      const maskedPageBounds = this.getShapeMaskedPageBounds(shape.id);\n      if (maskedPageBounds && maskedPageBounds.containsPoint(point) && this.getShapeGeometry(shape).hitTestPoint(this.getPointInShapeSpace(shape, point), 0, true)) {\n        return shape;\n      }\n    }\n  }\n  /**\n   * Get the shape that should be selected when you click on a given shape, assuming there is\n   * nothing already selected. It will not return anything higher than or including the current\n   * focus layer.\n   *\n   * @param shape - The shape to get the outermost selectable shape for.\n   * @param filter - A function to filter the selectable shapes.\n   *\n   * @returns The outermost selectable shape.\n   *\n   * @public\n   */\n  getOutermostSelectableShape(shape, filter) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    let match = freshShape;\n    let node = freshShape;\n    const focusedGroup = this.getFocusedGroup();\n    while (node) {\n      if (this.isShapeOfType(node, \"group\") && focusedGroup?.id !== node.id && !this.hasAncestor(focusedGroup, node.id) && (filter?.(node) ?? true)) {\n        match = node;\n      } else if (focusedGroup?.id === node.id) {\n        break;\n      }\n      node = this.getShapeParent(node);\n    }\n    return match;\n  }\n  _getBindingsIndexCache() {\n    const index = (0,_derivations_bindingsIndex_mjs__WEBPACK_IMPORTED_MODULE_30__.bindingsIndex)(this);\n    return this.store.createComputedCache(\"bindingsIndex\", (shape) => {\n      return index.get().get(shape.id);\n    });\n  }\n  /**\n   * Get a binding from the store by its ID if it exists.\n   */\n  getBinding(id) {\n    return this.store.get(id);\n  }\n  /**\n   * Get all bindings of a certain type _from_ a particular shape. These are the bindings whose\n   * `fromId` matched the shape's ID.\n   */\n  getBindingsFromShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this.getBindingsInvolvingShape(id).filter(\n      (b) => b.fromId === id && b.type === type\n    );\n  }\n  /**\n   * Get all bindings of a certain type _to_ a particular shape. These are the bindings whose\n   * `toId` matches the shape's ID.\n   */\n  getBindingsToShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this.getBindingsInvolvingShape(id).filter(\n      (b) => b.toId === id && b.type === type\n    );\n  }\n  /**\n   * Get all bindings involving a particular shape. This includes bindings where the shape is the\n   * `fromId` or `toId`. If a type is provided, only bindings of that type are returned.\n   */\n  getBindingsInvolvingShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const result = this._getBindingsIndexCache().get(id) ?? _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    if (!type) return result;\n    return result.filter((b) => b.type === type);\n  }\n  /**\n   * Create bindings from a list of partial bindings. You can omit the ID and most props of a\n   * binding, but the `type`, `toId`, and `fromId` must all be provided.\n   */\n  createBindings(partials) {\n    const bindings = [];\n    for (const partial of partials) {\n      const fromShape = this.getShape(partial.fromId);\n      const toShape = this.getShape(partial.toId);\n      if (!fromShape || !toShape) continue;\n      if (!this.canBindShapes({ fromShape, toShape, binding: partial })) continue;\n      const util = this.getBindingUtil(partial.type);\n      const defaultProps = util.getDefaultProps();\n      const binding = this.store.schema.types.binding.create({\n        ...partial,\n        id: partial.id ?? (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)(),\n        props: {\n          ...defaultProps,\n          ...partial.props\n        }\n      });\n      bindings.push(binding);\n    }\n    this.store.put(bindings);\n    return this;\n  }\n  /**\n   * Create a single binding from a partial. You can omit the ID and most props of a binding, but\n   * the `type`, `toId`, and `fromId` must all be provided.\n   */\n  createBinding(partial) {\n    return this.createBindings([partial]);\n  }\n  /**\n   * Update bindings from a list of partial bindings. Each partial must include an ID, which will\n   * be used to match the binding to it's existing record. If there is no existing record, that\n   * binding is skipped. The changes from the partial are merged into the existing record.\n   */\n  updateBindings(partials) {\n    const updated = [];\n    for (const partial of partials) {\n      if (!partial) continue;\n      const current = this.getBinding(partial.id);\n      if (!current) continue;\n      const updatedBinding = applyPartialToRecordWithProps(current, partial);\n      if (updatedBinding === current) continue;\n      const fromShape = this.getShape(updatedBinding.fromId);\n      const toShape = this.getShape(updatedBinding.toId);\n      if (!fromShape || !toShape) continue;\n      if (!this.canBindShapes({ fromShape, toShape, binding: updatedBinding })) continue;\n      updated.push(updatedBinding);\n    }\n    this.store.put(updated);\n    return this;\n  }\n  /**\n   * Update a binding from a partial binding. Each partial must include an ID, which will be used\n   * to match the binding to it's existing record. If there is no existing record, that binding is\n   * skipped. The changes from the partial are merged into the existing record.\n   */\n  updateBinding(partial) {\n    return this.updateBindings([partial]);\n  }\n  /**\n   * Delete several bindings by their IDs. If a binding ID doesn't exist, it's ignored.\n   */\n  deleteBindings(bindings, { isolateShapes = false } = {}) {\n    const ids = bindings.map((binding) => typeof binding === \"string\" ? binding : binding.id);\n    if (isolateShapes) {\n      this.store.atomic(() => {\n        for (const id of ids) {\n          const binding = this.getBinding(id);\n          if (!binding) continue;\n          const util = this.getBindingUtil(binding);\n          util.onBeforeIsolateFromShape?.({ binding, removedShape: this.getShape(binding.toId) });\n          util.onBeforeIsolateToShape?.({ binding, removedShape: this.getShape(binding.fromId) });\n          this.store.remove([id]);\n        }\n      });\n    } else {\n      this.store.remove(ids);\n    }\n    return this;\n  }\n  /**\n   * Delete a binding by its ID. If the binding doesn't exist, it's ignored.\n   */\n  deleteBinding(binding, opts) {\n    return this.deleteBindings([binding], opts);\n  }\n  canBindShapes({\n    fromShape,\n    toShape,\n    binding\n  }) {\n    const fromShapeType = typeof fromShape === \"string\" ? fromShape : fromShape.type;\n    const toShapeType = typeof toShape === \"string\" ? toShape : toShape.type;\n    const bindingType = typeof binding === \"string\" ? binding : binding.type;\n    const canBindOpts = { fromShapeType, toShapeType, bindingType };\n    if (fromShapeType === toShapeType) {\n      return this.getShapeUtil(fromShapeType).canBind(canBindOpts);\n    }\n    return this.getShapeUtil(fromShapeType).canBind(canBindOpts) && this.getShapeUtil(toShapeType).canBind(canBindOpts);\n  }\n  /* -------------------- Commands -------------------- */\n  /**\n   * Rotate shapes by a delta in radians.\n   *\n   * @example\n   * ```ts\n   * editor.rotateShapesBy(editor.getSelectedShapeIds(), Math.PI)\n   * editor.rotateShapesBy(editor.getSelectedShapeIds(), Math.PI / 2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to move.\n   * @param delta - The delta in radians to apply to the selection rotation.\n   * @param opts - The options for the rotation.\n   */\n  rotateShapesBy(shapes, delta, opts) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 0) return this;\n    const snapshot = (0,_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_29__.getRotationSnapshot)({ editor: this, ids });\n    if (!snapshot) return this;\n    (0,_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_29__.applyRotationToSnapshotShapes)({\n      delta,\n      snapshot,\n      editor: this,\n      stage: \"one-off\",\n      centerOverride: opts?.center\n    });\n    return this;\n  }\n  getChangesToTranslateShape(initialShape, newShapeCoords) {\n    let workingShape = initialShape;\n    const util = this.getShapeUtil(initialShape);\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslateStart?.(workingShape) ?? void 0\n    );\n    workingShape = applyPartialToRecordWithProps(workingShape, {\n      id: initialShape.id,\n      type: initialShape.type,\n      x: newShapeCoords.x,\n      y: newShapeCoords.y\n    });\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslate?.(initialShape, workingShape) ?? void 0\n    );\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslateEnd?.(initialShape, workingShape) ?? void 0\n    );\n    return workingShape;\n  }\n  /**\n   * Move shapes by a delta.\n   *\n   * @example\n   * ```ts\n   * editor.nudgeShapes(['box1', 'box2'], { x: 8, y: 8 })\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   * @param offset - The offset to apply to the shapes.\n   */\n  nudgeShapes(shapes, offset) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 0) return this;\n    const changes = [];\n    for (const id of ids) {\n      const shape = this.getShape(id);\n      const localDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.From(offset);\n      const parentTransform = this.getShapeParentTransform(shape);\n      if (parentTransform) localDelta.rot(-parentTransform.rotation());\n      changes.push(this.getChangesToTranslateShape(shape, localDelta.add(shape)));\n    }\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Duplicate shapes.\n   *\n   * @example\n   * ```ts\n   * editor.duplicateShapes(['box1', 'box2'], { x: 8, y: 8 })\n   * editor.duplicateShapes(editor.getSelectedShapes(), { x: 8, y: 8 })\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to duplicate.\n   * @param offset - The offset (in pixels) to apply to the duplicated shapes.\n   *\n   * @public\n   */\n  duplicateShapes(shapes, offset) {\n    this.run(() => {\n      const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n      if (ids.length <= 0) return this;\n      const initialIds = new Set(ids);\n      const shapeIdSet = this.getShapeAndDescendantIds(ids);\n      const orderedShapeIds = [...shapeIdSet].reverse();\n      const shapeIds = /* @__PURE__ */ new Map();\n      for (const shapeId of shapeIdSet) {\n        shapeIds.set(shapeId, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)());\n      }\n      const { shapesToCreateWithOriginals, bindingsToCreate } = withIsolatedShapes(\n        this,\n        shapeIdSet,\n        (bindingIdsToMaintain) => {\n          const bindingsToCreate2 = [];\n          for (const originalId of bindingIdsToMaintain) {\n            const originalBinding = this.getBinding(originalId);\n            if (!originalBinding) continue;\n            const duplicatedId = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)();\n            bindingsToCreate2.push({\n              ...originalBinding,\n              id: duplicatedId,\n              fromId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalBinding.fromId)),\n              toId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalBinding.toId))\n            });\n          }\n          const shapesToCreateWithOriginals2 = [];\n          for (const originalId of orderedShapeIds) {\n            const duplicatedId = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalId));\n            const originalShape = this.getShape(originalId);\n            if (!originalShape) continue;\n            let ox = 0;\n            let oy = 0;\n            if (offset && initialIds.has(originalId)) {\n              const parentTransform = this.getShapeParentTransform(originalShape);\n              const vec = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(offset.x, offset.y).rot(-parentTransform.rotation());\n              ox = vec.x;\n              oy = vec.y;\n            }\n            shapesToCreateWithOriginals2.push({\n              shape: {\n                ...originalShape,\n                id: duplicatedId,\n                x: originalShape.x + ox,\n                y: originalShape.y + oy,\n                // Use a dummy index for now, it will get updated outside of the `withIsolatedShapes`\n                index: \"a1\",\n                parentId: shapeIds.get(originalShape.parentId) ?? originalShape.parentId\n              },\n              originalShape\n            });\n          }\n          return { shapesToCreateWithOriginals: shapesToCreateWithOriginals2, bindingsToCreate: bindingsToCreate2 };\n        }\n      );\n      shapesToCreateWithOriginals.forEach(({ shape, originalShape }) => {\n        const parentId = originalShape.parentId;\n        const siblings = this.getSortedChildIdsForParent(parentId);\n        const currentIndex = siblings.indexOf(originalShape.id);\n        const siblingAboveId = siblings[currentIndex + 1];\n        const siblingAbove = siblingAboveId ? this.getShape(siblingAboveId) : void 0;\n        const index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexBetween)(originalShape.index, siblingAbove?.index);\n        shape.index = index;\n      });\n      const shapesToCreate = shapesToCreateWithOriginals.map(({ shape }) => shape);\n      const maxShapesReached = shapesToCreate.length + this.getCurrentPageShapeIds().size > this.options.maxShapesPerPage;\n      if (maxShapesReached) {\n        alertMaxShapes(this);\n        return;\n      }\n      this.createShapes(shapesToCreate);\n      this.createBindings(bindingsToCreate);\n      this.setSelectedShapes((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => shapeIds.get(id))));\n      if (offset !== void 0) {\n        const selectionPageBounds = this.getSelectionPageBounds();\n        const viewportPageBounds = this.getViewportPageBounds();\n        if (selectionPageBounds && !viewportPageBounds.contains(selectionPageBounds)) {\n          this.centerOnPoint(selectionPageBounds.center, {\n            animation: { duration: this.options.animationMediumMs }\n          });\n        }\n      }\n    });\n    return this;\n  }\n  /**\n   * Move shapes to page.\n   *\n   * @example\n   * ```ts\n   * editor.moveShapesToPage(['box1', 'box2'], 'page1')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to move.\n   * @param pageId - The id of the page where the shapes will be moved.\n   *\n   * @public\n   */\n  moveShapesToPage(shapes, pageId) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length === 0) return this;\n    if (this.getIsReadonly()) return this;\n    const currentPageId = this.getCurrentPageId();\n    if (pageId === currentPageId) return this;\n    if (!this.store.has(pageId)) return this;\n    const content = this.getContentFromCurrentPage(ids);\n    if (!content) return this;\n    if (this.getPageShapeIds(pageId).size + content.shapes.length > this.options.maxShapesPerPage) {\n      alertMaxShapes(this, pageId);\n      return this;\n    }\n    const fromPageZ = this.getCamera().z;\n    this.run(() => {\n      this.deleteShapes(ids);\n      this.setCurrentPage(pageId);\n      this.setFocusedGroup(null);\n      this.selectNone();\n      this.putContentOntoCurrentPage(content, {\n        select: true,\n        preserveIds: true,\n        preservePosition: true\n      });\n      this.setCamera({ ...this.getCamera(), z: fromPageZ });\n      this.centerOnPoint(this.getSelectionRotatedPageBounds().center);\n    });\n    return this;\n  }\n  /**\n   * Toggle the lock state of one or more shapes. If there is a mix of locked and unlocked shapes, all shapes will be locked.\n   *\n   * @param shapes - The shapes (or shape ids) to toggle.\n   *\n   * @public\n   */\n  toggleLock(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly() || ids.length === 0) return this;\n    let allLocked = true, allUnlocked = true;\n    const shapesToToggle = [];\n    for (const id of ids) {\n      const shape = this.getShape(id);\n      if (shape) {\n        shapesToToggle.push(shape);\n        if (shape.isLocked) {\n          allUnlocked = false;\n        } else {\n          allLocked = false;\n        }\n      }\n    }\n    this.run(() => {\n      if (allUnlocked) {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: true }))\n        );\n        this.setSelectedShapes([]);\n      } else if (allLocked) {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: false }))\n        );\n      } else {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: true }))\n        );\n      }\n    });\n    return this;\n  }\n  /**\n   * Send shapes to the back of the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.sendToBack(['id1', 'id2'])\n   * editor.sendToBack(box1, box2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  sendToBack(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_28__.getReorderingShapesChanges)(this, \"toBack\", ids);\n    if (changes) this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Send shapes backward in the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.sendBackward(['id1', 'id2'])\n   * editor.sendBackward([box1, box2])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  sendBackward(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_28__.getReorderingShapesChanges)(this, \"backward\", ids);\n    if (changes) this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Bring shapes forward in the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.bringForward(['id1', 'id2'])\n   * editor.bringForward(box1,  box2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  bringForward(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_28__.getReorderingShapesChanges)(this, \"forward\", ids);\n    if (changes) this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Bring shapes to the front of the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.bringToFront(['id1', 'id2'])\n   * editor.bringToFront([box1, box2])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  bringToFront(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_28__.getReorderingShapesChanges)(this, \"toFront\", ids);\n    if (changes) this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Flip shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.flipShapes([box1, box2], 'horizontal', 32)\n   * editor.flipShapes(editor.getSelectedShapeIds(), 'horizontal', 32)\n   * ```\n   *\n   * @param shapes - The ids of the shapes to flip.\n   * @param operation - Whether to flip horizontally or vertically.\n   *\n   * @public\n   */\n  flipShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    let shapesToFlip = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    if (!shapesToFlip.length) return this;\n    shapesToFlip = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n      shapesToFlip.map((shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          return this.getSortedChildIdsForParent(shape.id).map((id) => this.getShape(id));\n        }\n        return shape;\n      }).flat()\n    );\n    const scaleOriginPage = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(shapesToFlip.map((id) => this.getShapePageBounds(id)))\n    ).center;\n    this.run(() => {\n      for (const shape of shapesToFlip) {\n        const bounds = this.getShapeGeometry(shape).bounds;\n        const initialPageTransform = this.getShapePageTransform(shape.id);\n        if (!initialPageTransform) continue;\n        this.resizeShape(\n          shape.id,\n          { x: operation === \"horizontal\" ? -1 : 1, y: operation === \"vertical\" ? -1 : 1 },\n          {\n            initialBounds: bounds,\n            initialPageTransform,\n            initialShape: shape,\n            mode: \"scale_shape\",\n            isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n            scaleOrigin: scaleOriginPage,\n            scaleAxisRotation: 0\n          }\n        );\n      }\n    });\n    return this;\n  }\n  /**\n   * Stack shape.\n   *\n   * @example\n   * ```ts\n   * editor.stackShapes([box1, box2], 'horizontal', 32)\n   * editor.stackShapes(editor.getSelectedShapeIds(), 'horizontal', 32)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to stack.\n   * @param operation - Whether to stack horizontally or vertically.\n   * @param gap - The gap to leave between shapes.\n   *\n   * @public\n   */\n  stackShapes(shapes, operation, gap) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    const shapesToStack = ids.map((id) => this.getShape(id)).filter((shape) => {\n      if (!shape) return false;\n      return this.getShapeUtil(shape).canBeLaidOut(shape);\n    });\n    const len = shapesToStack.length;\n    if (gap === 0 && len < 3 || len < 2) return this;\n    const pageBounds = Object.fromEntries(\n      shapesToStack.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    let val;\n    let min;\n    let max;\n    let dim;\n    if (operation === \"horizontal\") {\n      val = \"x\";\n      min = \"minX\";\n      max = \"maxX\";\n      dim = \"width\";\n    } else {\n      val = \"y\";\n      min = \"minY\";\n      max = \"maxY\";\n      dim = \"height\";\n    }\n    let shapeGap;\n    if (gap === 0) {\n      const gaps = [];\n      shapesToStack.sort((a, b) => pageBounds[a.id][min] - pageBounds[b.id][min]);\n      for (let i = 0; i < len - 1; i++) {\n        const shape = shapesToStack[i];\n        const nextShape = shapesToStack[i + 1];\n        const bounds = pageBounds[shape.id];\n        const nextBounds = pageBounds[nextShape.id];\n        const gap2 = nextBounds[min] - bounds[max];\n        const current = gaps.find((g) => g.gap === gap2);\n        if (current) {\n          current.count++;\n        } else {\n          gaps.push({ gap: gap2, count: 1 });\n        }\n      }\n      let maxCount = 0;\n      gaps.forEach((g) => {\n        if (g.count > maxCount) {\n          maxCount = g.count;\n          shapeGap = g.gap;\n        }\n      });\n      if (maxCount === 1) {\n        shapeGap = Math.max(0, gaps.reduce((a, c) => a + c.gap * c.count, 0) / (len - 1));\n      }\n    } else {\n      shapeGap = gap;\n    }\n    const changes = [];\n    let v = pageBounds[shapesToStack[0].id][max];\n    shapesToStack.forEach((shape, i) => {\n      if (i === 0) return;\n      const delta = { x: 0, y: 0 };\n      delta[val] = v + shapeGap - pageBounds[shape.id][val];\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Rot(delta, -this.getShapePageTransform(parent).decompose().rotation) : delta;\n      const translateStartChanges = this.getShapeUtil(shape).onTranslateStart?.(shape);\n      changes.push(\n        translateStartChanges ? {\n          ...translateStartChanges,\n          [val]: shape[val] + localDelta[val]\n        } : {\n          id: shape.id,\n          type: shape.type,\n          [val]: shape[val] + localDelta[val]\n        }\n      );\n      v += pageBounds[shape.id][dim] + shapeGap;\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Pack shapes into a grid centered on their current position. Based on potpack (https://github.com/mapbox/potpack).\n   *\n   * @example\n   * ```ts\n   * editor.packShapes([box1, box2], 32)\n   * editor.packShapes(editor.getSelectedShapeIds(), 32)\n   * ```\n   *\n   *\n   * @param shapes - The shapes (or shape ids) to pack.\n   * @param gap - The padding to apply to the packed shapes. Defaults to 16.\n   */\n  packShapes(shapes, gap) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    if (ids.length < 2) return this;\n    const shapesToPack = ids.map((id) => this.getShape(id)).filter((shape2) => {\n      if (!shape2) return false;\n      return this.getShapeUtil(shape2).canBeLaidOut(shape2);\n    });\n    const shapePageBounds = {};\n    const nextShapePageBounds = {};\n    let shape, bounds, area = 0;\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = this.getShapePageBounds(shape);\n      shapePageBounds[shape.id] = bounds;\n      nextShapePageBounds[shape.id] = bounds.clone();\n      area += bounds.width * bounds.height;\n    }\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    const maxWidth = commonBounds.width;\n    shapesToPack.sort((a, b) => shapePageBounds[b.id].height - shapePageBounds[a.id].height);\n    const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n    const spaces = [new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(commonBounds.x, commonBounds.y, startWidth, Infinity)];\n    let width = 0;\n    let height = 0;\n    let space;\n    let last2;\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = nextShapePageBounds[shape.id];\n      for (let i2 = spaces.length - 1; i2 >= 0; i2--) {\n        space = spaces[i2];\n        if (bounds.width > space.width || bounds.height > space.height) continue;\n        bounds.x = space.x;\n        bounds.y = space.y;\n        height = Math.max(height, bounds.maxY);\n        width = Math.max(width, bounds.maxX);\n        if (bounds.width === space.width && bounds.height === space.height) {\n          last2 = spaces.pop();\n          if (i2 < spaces.length) spaces[i2] = last2;\n        } else if (bounds.height === space.height) {\n          space.x += bounds.width + gap;\n          space.width -= bounds.width + gap;\n        } else if (bounds.width === space.width) {\n          space.y += bounds.height + gap;\n          space.height -= bounds.height + gap;\n        } else {\n          spaces.push(\n            new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box(\n              space.x + (bounds.width + gap),\n              space.y,\n              space.width - (bounds.width + gap),\n              bounds.height\n            )\n          );\n          space.y += bounds.height + gap;\n          space.height -= bounds.height + gap;\n        }\n        break;\n      }\n    }\n    const commonAfter = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(Object.values(nextShapePageBounds));\n    const centerDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(commonBounds.center, commonAfter.center);\n    let nextBounds;\n    const changes = [];\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = shapePageBounds[shape.id];\n      nextBounds = nextShapePageBounds[shape.id];\n      const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(nextBounds.point, bounds.point).add(centerDelta);\n      const parentTransform = this.getShapeParentTransform(shape);\n      if (parentTransform) delta.rot(-parentTransform.rotation());\n      const change = {\n        id: shape.id,\n        type: shape.type,\n        x: shape.x + delta.x,\n        y: shape.y + delta.y\n      };\n      const translateStartChange = this.getShapeUtil(shape).onTranslateStart?.({\n        ...shape,\n        ...change\n      });\n      if (translateStartChange) {\n        changes.push({ ...change, ...translateStartChange });\n      } else {\n        changes.push(change);\n      }\n    }\n    if (changes.length) {\n      this.updateShapes(changes);\n    }\n    return this;\n  }\n  /**\n   * Align shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.alignShapes([box1, box2], 'left')\n   * editor.alignShapes(editor.getSelectedShapeIds(), 'left')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to align.\n   * @param operation - The align operation to apply.\n   *\n   * @public\n   */\n  alignShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    if (ids.length < 2) return this;\n    const shapesToAlign = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const shapePageBounds = Object.fromEntries(\n      shapesToAlign.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    const changes = [];\n    shapesToAlign.forEach((shape) => {\n      const pageBounds = shapePageBounds[shape.id];\n      if (!pageBounds) return;\n      const delta = { x: 0, y: 0 };\n      switch (operation) {\n        case \"top\": {\n          delta.y = commonBounds.minY - pageBounds.minY;\n          break;\n        }\n        case \"center-vertical\": {\n          delta.y = commonBounds.midY - pageBounds.minY - pageBounds.height / 2;\n          break;\n        }\n        case \"bottom\": {\n          delta.y = commonBounds.maxY - pageBounds.minY - pageBounds.height;\n          break;\n        }\n        case \"left\": {\n          delta.x = commonBounds.minX - pageBounds.minX;\n          break;\n        }\n        case \"center-horizontal\": {\n          delta.x = commonBounds.midX - pageBounds.minX - pageBounds.width / 2;\n          break;\n        }\n        case \"right\": {\n          delta.x = commonBounds.maxX - pageBounds.minX - pageBounds.width;\n          break;\n        }\n      }\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Rot(delta, -this.getShapePageTransform(parent).decompose().rotation) : delta;\n      changes.push(this.getChangesToTranslateShape(shape, _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(shape, localDelta)));\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Distribute shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.distributeShapes([box1, box2], 'horizontal')\n   * editor.distributeShapes(editor.getSelectedShapeIds(), 'horizontal')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to distribute.\n   * @param operation - Whether to distribute shapes horizontally or vertically.\n   *\n   * @public\n   */\n  distributeShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    if (ids.length < 3) return this;\n    const len = ids.length;\n    const shapesToDistribute = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const pageBounds = Object.fromEntries(\n      shapesToDistribute.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    let val;\n    let min;\n    let max;\n    let mid;\n    let dim;\n    if (operation === \"horizontal\") {\n      val = \"x\";\n      min = \"minX\";\n      max = \"maxX\";\n      mid = \"midX\";\n      dim = \"width\";\n    } else {\n      val = \"y\";\n      min = \"minY\";\n      max = \"maxY\";\n      mid = \"midY\";\n      dim = \"height\";\n    }\n    const changes = [];\n    const first = shapesToDistribute.sort(\n      (a, b) => pageBounds[a.id][min] - pageBounds[b.id][min]\n    )[0];\n    const last2 = shapesToDistribute.sort((a, b) => pageBounds[b.id][max] - pageBounds[a.id][max])[0];\n    const midFirst = pageBounds[first.id][mid];\n    const step = (pageBounds[last2.id][mid] - midFirst) / (len - 1);\n    const v = midFirst + step;\n    shapesToDistribute.filter((shape) => shape !== first && shape !== last2).sort((a, b) => pageBounds[a.id][mid] - pageBounds[b.id][mid]).forEach((shape, i) => {\n      const delta = { x: 0, y: 0 };\n      delta[val] = v + step * i - pageBounds[shape.id][dim] / 2 - pageBounds[shape.id][val];\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Rot(delta, -this.getShapePageTransform(parent).rotation()) : delta;\n      changes.push(this.getChangesToTranslateShape(shape, _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(shape, localDelta)));\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Stretch shape sizes and positions to fill their common bounding box.\n   *\n   * @example\n   * ```ts\n   * editor.stretchShapes([box1, box2], 'horizontal')\n   * editor.stretchShapes(editor.getSelectedShapeIds(), 'horizontal')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to stretch.\n   * @param operation - Whether to stretch shapes horizontally or vertically.\n   *\n   * @public\n   */\n  stretchShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getIsReadonly()) return this;\n    if (ids.length < 2) return this;\n    const shapesToStretch = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const shapeBounds = Object.fromEntries(ids.map((id) => [id, this.getShapeGeometry(id).bounds]));\n    const shapePageBounds = Object.fromEntries(ids.map((id) => [id, this.getShapePageBounds(id)]));\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    switch (operation) {\n      case \"vertical\": {\n        this.run(() => {\n          for (const shape of shapesToStretch) {\n            const pageRotation = this.getShapePageTransform(shape).rotation();\n            if (pageRotation % _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.PI2) continue;\n            const bounds = shapeBounds[shape.id];\n            const pageBounds = shapePageBounds[shape.id];\n            const localOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(0, commonBounds.minY - pageBounds.minY);\n            const parentTransform = this.getShapeParentTransform(shape);\n            if (parentTransform) localOffset.rot(-parentTransform.rotation());\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(localOffset, shape);\n            this.updateShapes([{ id: shape.id, type: shape.type, x, y }]);\n            const scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(1, commonBounds.height / pageBounds.height);\n            this.resizeShape(shape.id, scale, {\n              initialBounds: bounds,\n              scaleOrigin: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(pageBounds.center.x, commonBounds.minY),\n              isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n              scaleAxisRotation: 0\n            });\n          }\n        });\n        break;\n      }\n      case \"horizontal\": {\n        this.run(() => {\n          for (const shape of shapesToStretch) {\n            const bounds = shapeBounds[shape.id];\n            const pageBounds = shapePageBounds[shape.id];\n            const pageRotation = this.getShapePageTransform(shape).rotation();\n            if (pageRotation % _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.PI2) continue;\n            const localOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(commonBounds.minX - pageBounds.minX, 0);\n            const parentTransform = this.getShapeParentTransform(shape);\n            if (parentTransform) localOffset.rot(-parentTransform.rotation());\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(localOffset, shape);\n            this.updateShapes([{ id: shape.id, type: shape.type, x, y }]);\n            const scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(commonBounds.width / pageBounds.width, 1);\n            this.resizeShape(shape.id, scale, {\n              initialBounds: bounds,\n              scaleOrigin: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(commonBounds.minX, pageBounds.center.y),\n              isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n              scaleAxisRotation: 0\n            });\n          }\n        });\n        break;\n      }\n    }\n    return this;\n  }\n  /**\n   * Resize a shape.\n   *\n   * @param shape - The shape (or the shape id of the shape) to resize.\n   * @param scale - The scale factor to apply to the shape.\n   * @param opts - Additional options.\n   *\n   * @public\n   */\n  resizeShape(shape, scale, opts = {}) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    if (this.getIsReadonly()) return this;\n    if (!Number.isFinite(scale.x)) scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(1, scale.y);\n    if (!Number.isFinite(scale.y)) scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(scale.x, 1);\n    const initialShape = opts.initialShape ?? this.getShape(id);\n    if (!initialShape) return this;\n    const scaleOrigin = opts.scaleOrigin ?? this.getShapePageBounds(id)?.center;\n    if (!scaleOrigin) return this;\n    const pageTransform = opts.initialPageTransform ? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Cast(opts.initialPageTransform) : this.getShapePageTransform(id);\n    if (!pageTransform) return this;\n    const pageRotation = pageTransform.rotation();\n    if (pageRotation == null) return this;\n    const scaleAxisRotation = opts.scaleAxisRotation ?? pageRotation;\n    const initialBounds = opts.initialBounds ?? this.getShapeGeometry(id).bounds;\n    if (!initialBounds) return this;\n    const isAspectRatioLocked = opts.isAspectRatioLocked ?? this.getShapeUtil(initialShape).isAspectRatioLocked(initialShape);\n    if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.areAnglesCompatible)(pageRotation, scaleAxisRotation)) {\n      return this._resizeUnalignedShape(id, scale, {\n        ...opts,\n        initialBounds,\n        scaleOrigin,\n        scaleAxisRotation,\n        initialPageTransform: pageTransform,\n        isAspectRatioLocked,\n        initialShape\n      });\n    }\n    const util = this.getShapeUtil(initialShape);\n    if (isAspectRatioLocked) {\n      if (Math.abs(scale.x) > Math.abs(scale.y)) {\n        scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(scale.x, Math.sign(scale.y) * Math.abs(scale.x));\n      } else {\n        scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(Math.sign(scale.x) * Math.abs(scale.y), scale.y);\n      }\n    }\n    if (util.onResize && util.canResize(initialShape)) {\n      const newPagePoint = this._scalePagePoint(\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoint(pageTransform, new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(0, 0)),\n        scaleOrigin,\n        scale,\n        scaleAxisRotation\n      );\n      const newLocalPoint = this.getPointInParentSpace(initialShape.id, newPagePoint);\n      const myScale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(scale.x, scale.y);\n      const areWidthAndHeightAlignedWithCorrectAxis = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_21__.approximately)(\n        (pageRotation - scaleAxisRotation) % Math.PI,\n        0\n      );\n      myScale.x = areWidthAndHeightAlignedWithCorrectAxis ? scale.x : scale.y;\n      myScale.y = areWidthAndHeightAlignedWithCorrectAxis ? scale.y : scale.x;\n      const initialPagePoint = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoint(pageTransform, new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec());\n      const { x, y } = this.getPointInParentSpace(initialShape.id, initialPagePoint);\n      let workingShape = initialShape;\n      if (!opts.skipStartAndEndCallbacks) {\n        workingShape = applyPartialToRecordWithProps(\n          initialShape,\n          util.onResizeStart?.(initialShape) ?? void 0\n        );\n      }\n      workingShape = applyPartialToRecordWithProps(workingShape, {\n        id,\n        type: initialShape.type,\n        x: newLocalPoint.x,\n        y: newLocalPoint.y,\n        ...util.onResize(\n          { ...initialShape, x, y },\n          {\n            newPoint: newLocalPoint,\n            handle: opts.dragHandle ?? \"bottom_right\",\n            // don't set isSingle to true for children\n            mode: opts.mode ?? \"scale_shape\",\n            scaleX: myScale.x,\n            scaleY: myScale.y,\n            initialBounds,\n            initialShape\n          }\n        )\n      });\n      if (!opts.skipStartAndEndCallbacks) {\n        workingShape = applyPartialToRecordWithProps(\n          workingShape,\n          util.onResizeEnd?.(initialShape, workingShape) ?? void 0\n        );\n      }\n      this.updateShapes([workingShape]);\n    } else {\n      const initialPageCenter = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoint(pageTransform, initialBounds.center);\n      const newPageCenter = this._scalePagePoint(\n        initialPageCenter,\n        scaleOrigin,\n        scale,\n        scaleAxisRotation\n      );\n      const initialPageCenterInParentSpace = this.getPointInParentSpace(\n        initialShape.id,\n        initialPageCenter\n      );\n      const newPageCenterInParentSpace = this.getPointInParentSpace(initialShape.id, newPageCenter);\n      const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(newPageCenterInParentSpace, initialPageCenterInParentSpace);\n      this.updateShapes([\n        {\n          id,\n          type: initialShape.type,\n          x: initialShape.x + delta.x,\n          y: initialShape.y + delta.y\n        }\n      ]);\n    }\n    return this;\n  }\n  /** @internal */\n  _scalePagePoint(point, scaleOrigin, scale, scaleAxisRotation) {\n    const relativePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.RotWith(point, scaleOrigin, -scaleAxisRotation).sub(scaleOrigin);\n    const newRelativePagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.MulV(relativePoint, scale);\n    const destination = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(newRelativePagePoint, scaleOrigin).rotWith(\n      scaleOrigin,\n      scaleAxisRotation\n    );\n    return destination;\n  }\n  /** @internal */\n  _resizeUnalignedShape(id, scale, options) {\n    const { type } = options.initialShape;\n    const shapeScale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(scale.x, scale.y);\n    if (Math.abs(scale.x) > Math.abs(scale.y)) {\n      shapeScale.x = Math.sign(scale.x) * Math.abs(scale.y);\n    } else {\n      shapeScale.y = Math.sign(scale.y) * Math.abs(scale.x);\n    }\n    this.resizeShape(id, shapeScale, {\n      initialShape: options.initialShape,\n      initialBounds: options.initialBounds,\n      isAspectRatioLocked: options.isAspectRatioLocked\n    });\n    if (Math.sign(scale.x) * Math.sign(scale.y) < 0) {\n      let { rotation } = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.Decompose(options.initialPageTransform);\n      rotation -= 2 * rotation;\n      this.updateShapes([{ id, type, rotation }]);\n    }\n    const preScaleShapePageCenter = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoint(\n      options.initialPageTransform,\n      options.initialBounds.center\n    );\n    const postScaleShapePageCenter = this._scalePagePoint(\n      preScaleShapePageCenter,\n      options.scaleOrigin,\n      scale,\n      options.scaleAxisRotation\n    );\n    const pageBounds = this.getShapePageBounds(id);\n    const pageTransform = this.getShapePageTransform(id);\n    const currentPageCenter = pageBounds.center;\n    const shapePageTransformOrigin = pageTransform.point();\n    if (!currentPageCenter || !shapePageTransformOrigin) return this;\n    const pageDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(postScaleShapePageCenter, currentPageCenter);\n    const postScaleShapePagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Add(shapePageTransformOrigin, pageDelta);\n    const { x, y } = this.getPointInParentSpace(id, postScaleShapePagePoint);\n    this.updateShapes([{ id, type, x, y }]);\n    return this;\n  }\n  /**\n   * Get the initial meta value for a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getInitialMetaForShape = (shape) => {\n   *   if (shape.type === 'note') {\n   *     return { createdBy: myCurrentUser.id }\n   *   }\n   * }\n   * ```\n   *\n   * @param shape - The shape to get the initial meta for.\n   *\n   * @public\n   */\n  getInitialMetaForShape(_shape) {\n    return {};\n  }\n  /**\n   * Create a single shape.\n   *\n   * @example\n   * ```ts\n   * editor.createShape(myShape)\n   * editor.createShape({ id: 'box1', type: 'text', props: { text: \"ok\" } })\n   * ```\n   *\n   * @param shape - The shape (or shape partial) to create.\n   *\n   * @public\n   */\n  createShape(shape) {\n    this.createShapes([shape]);\n    return this;\n  }\n  /**\n   * Create shapes.\n   *\n   * @example\n   * ```ts\n   * editor.createShapes([myShape])\n   * editor.createShapes([{ id: 'box1', type: 'text', props: { text: \"ok\" } }])\n   * ```\n   *\n   * @param shapes - The shapes (or shape partials) to create.\n   *\n   * @public\n   */\n  createShapes(shapes) {\n    if (!Array.isArray(shapes)) {\n      throw Error(\"Editor.createShapes: must provide an array of shapes or shape partials\");\n    }\n    if (this.getIsReadonly()) return this;\n    if (shapes.length <= 0) return this;\n    const currentPageShapeIds = this.getCurrentPageShapeIds();\n    const maxShapesReached = shapes.length + currentPageShapeIds.size > this.options.maxShapesPerPage;\n    if (maxShapesReached) {\n      alertMaxShapes(this);\n      return this;\n    }\n    const focusedGroupId = this.getFocusedGroupId();\n    this.run(() => {\n      const currentPageShapesSorted = this.getCurrentPageShapesSorted();\n      const partials = shapes.map((partial) => {\n        if (!partial.id) {\n          partial = { id: (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)(), ...partial };\n        }\n        if (!partial.parentId || !(this.store.has(partial.parentId) || shapes.some((p) => p.id === partial.parentId))) {\n          let parentId = this.getFocusedGroupId();\n          for (let i = currentPageShapesSorted.length - 1; i >= 0; i--) {\n            const parent = currentPageShapesSorted[i];\n            if (!this.isShapeHidden(parent) && this.getShapeUtil(parent).canReceiveNewChildrenOfType(parent, partial.type) && this.isPointInShape(\n              parent,\n              // If no parent is provided, then we can treat the\n              // shape's provided x/y as being in the page's space.\n              { x: partial.x ?? 0, y: partial.y ?? 0 },\n              {\n                margin: 0,\n                hitInside: true\n              }\n            )) {\n              parentId = parent.id;\n              break;\n            }\n          }\n          const prevParentId = partial.parentId;\n          if (parentId === partial.id) {\n            parentId = focusedGroupId;\n          }\n          if (parentId !== prevParentId) {\n            partial = { ...partial };\n            partial.parentId = parentId;\n            if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(parentId)) {\n              const point = this.getPointInShapeSpace(this.getShape(parentId), {\n                x: partial.x ?? 0,\n                y: partial.y ?? 0\n              });\n              partial.x = point.x;\n              partial.y = point.y;\n              partial.rotation = -this.getShapePageTransform(parentId).rotation() + (partial.rotation ?? 0);\n            }\n          }\n        }\n        return partial;\n      });\n      const parentIndices = /* @__PURE__ */ new Map();\n      const shapeRecordsToCreate = [];\n      const { opacityForNextShape } = this.getInstanceState();\n      for (const partial of partials) {\n        const util = this.getShapeUtil(partial);\n        let index = partial.index;\n        if (!index) {\n          const parentId = partial.parentId ?? focusedGroupId;\n          if (!parentIndices.has(parentId)) {\n            parentIndices.set(parentId, this.getHighestIndexForParent(parentId));\n          }\n          index = parentIndices.get(parentId);\n          parentIndices.set(parentId, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(index));\n        }\n        const initialProps = util.getDefaultProps();\n        for (const [style, propKey] of this.styleProps[partial.type]) {\n          ;\n          initialProps[propKey] = this.getStyleForNextShape(style);\n        }\n        let shapeRecordToCreate = this.store.schema.types.shape.create({\n          ...partial,\n          index,\n          opacity: partial.opacity ?? opacityForNextShape,\n          parentId: partial.parentId ?? focusedGroupId,\n          props: \"props\" in partial ? { ...initialProps, ...partial.props } : initialProps\n        });\n        if (shapeRecordToCreate.index === void 0) {\n          throw Error(\"no index!\");\n        }\n        const next = this.getShapeUtil(shapeRecordToCreate).onBeforeCreate?.(shapeRecordToCreate);\n        if (next) {\n          shapeRecordToCreate = next;\n        }\n        shapeRecordsToCreate.push(shapeRecordToCreate);\n      }\n      shapeRecordsToCreate.forEach((shape) => {\n        shape.meta = {\n          ...this.getInitialMetaForShape(shape),\n          ...shape.meta\n        };\n      });\n      this.store.put(shapeRecordsToCreate);\n    });\n    return this;\n  }\n  /**\n   * Animate a shape.\n   *\n   * @example\n   * ```ts\n   * editor.animateShape({ id: 'box1', type: 'box', x: 100, y: 100 })\n   * editor.animateShape({ id: 'box1', type: 'box', x: 100, y: 100 }, { animation: { duration: 100, ease: t => t*t } })\n   * ```\n   *\n   * @param partial - The shape partial to update.\n   * @param opts - The animation's options.\n   *\n   * @public\n   */\n  animateShape(partial, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_ANIMATION_OPTIONS }) {\n    return this.animateShapes([partial], opts);\n  }\n  /**\n   * Animate shapes.\n   *\n   * @example\n   * ```ts\n   * editor.animateShapes([{ id: 'box1', type: 'box', x: 100, y: 100 }])\n   * editor.animateShapes([{ id: 'box1', type: 'box', x: 100, y: 100 }], { animation: { duration: 100, ease: t => t*t } })\n   * ```\n   *\n   * @param partials - The shape partials to update.\n   * @param opts - The animation's options.\n   *\n   * @public\n   */\n  animateShapes(partials, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_ANIMATION_OPTIONS }) {\n    if (!opts.animation) return this;\n    const { duration = 500, easing = _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_18__.EASINGS.linear } = opts.animation;\n    const animationId = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.uniqueId)();\n    let remaining = duration;\n    let t;\n    const animations = [];\n    let partial, result;\n    for (let i = 0, n = partials.length; i < n; i++) {\n      partial = partials[i];\n      if (!partial) continue;\n      const shape = this.getShape(partial.id);\n      if (!shape) continue;\n      result = {\n        start: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(shape),\n        end: applyPartialToRecordWithProps((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(shape), partial)\n      };\n      animations.push(result);\n      this.animatingShapes.set(shape.id, animationId);\n    }\n    const handleTick = (elapsed) => {\n      remaining -= elapsed;\n      if (remaining < 0) {\n        const { animatingShapes: animatingShapes2 } = this;\n        const partialsToUpdate = partials.filter(\n          (p) => p && animatingShapes2.get(p.id) === animationId\n        );\n        if (partialsToUpdate.length) {\n          this.updateShapes(partialsToUpdate);\n        }\n        this.off(\"tick\", handleTick);\n        return;\n      }\n      t = easing(1 - remaining / duration);\n      const { animatingShapes } = this;\n      const updates = [];\n      let animationIdForShape;\n      for (let i = 0, n = animations.length; i < n; i++) {\n        const { start, end } = animations[i];\n        animationIdForShape = animatingShapes.get(start.id);\n        if (animationIdForShape !== animationId) continue;\n        updates.push({\n          ...end,\n          x: start.x + (end.x - start.x) * t,\n          y: start.y + (end.y - start.y) * t,\n          opacity: start.opacity + (end.opacity - start.opacity) * t,\n          rotation: start.rotation + (end.rotation - start.rotation) * t,\n          props: this.getShapeUtil(end).getInterpolatedProps?.(start, end, t) ?? end.props\n        });\n      }\n      this._updateShapes(updates);\n    };\n    this.on(\"tick\", handleTick);\n    return this;\n  }\n  groupShapes(shapes, opts = {}) {\n    const { groupId = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)(), select = true } = opts;\n    if (!Array.isArray(shapes)) {\n      throw Error(\"Editor.groupShapes: must provide an array of shapes or shape ids\");\n    }\n    if (this.getIsReadonly()) return this;\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 1) return this;\n    const shapesToGroup = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n      (this._shouldIgnoreShapeLock ? ids : this._getUnlockedShapeIds(ids)).map(\n        (id) => this.getShape(id)\n      )\n    );\n    const sortedShapeIds = shapesToGroup.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex).map((s) => s.id);\n    const pageBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(shapesToGroup.map((id) => this.getShapePageBounds(id))));\n    const { x, y } = pageBounds.point;\n    const parentId = this.findCommonAncestor(shapesToGroup) ?? this.getCurrentPageId();\n    if (this.getCurrentToolId() !== \"select\") return this;\n    if (!this.isIn(\"select.idle\")) {\n      this.cancel();\n    }\n    const shapesWithRootParent = shapesToGroup.filter((shape) => shape.parentId === parentId).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex);\n    const highestIndex = shapesWithRootParent[shapesWithRootParent.length - 1]?.index;\n    this.run(() => {\n      this.createShapes([\n        {\n          id: groupId,\n          type: \"group\",\n          parentId,\n          index: highestIndex,\n          x,\n          y,\n          opacity: 1,\n          props: {}\n        }\n      ]);\n      this.reparentShapes(sortedShapeIds, groupId);\n      if (select) {\n        this.select(groupId);\n      }\n    });\n    return this;\n  }\n  ungroupShapes(shapes, opts = {}) {\n    if (this.getIsReadonly()) return this;\n    const { select = true } = opts;\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const shapesToUngroup = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n      (this._shouldIgnoreShapeLock ? ids : this._getUnlockedShapeIds(ids)).map(\n        (id) => this.getShape(id)\n      )\n    );\n    if (shapesToUngroup.length === 0) return this;\n    if (this.getCurrentToolId() !== \"select\") return this;\n    if (!this.isIn(\"select.idle\")) {\n      this.cancel();\n    }\n    const idsToSelect = /* @__PURE__ */ new Set();\n    const groups = [];\n    shapesToUngroup.forEach((shape) => {\n      if (this.isShapeOfType(shape, \"group\")) {\n        groups.push(shape);\n      } else {\n        idsToSelect.add(shape.id);\n      }\n    });\n    if (groups.length === 0) return this;\n    this.run(() => {\n      let group;\n      for (let i = 0, n = groups.length; i < n; i++) {\n        group = groups[i];\n        const childIds = this.getSortedChildIdsForParent(group.id);\n        for (let j = 0, n2 = childIds.length; j < n2; j++) {\n          idsToSelect.add(childIds[j]);\n        }\n        this.reparentShapes(childIds, group.parentId, group.index);\n      }\n      this.deleteShapes(groups.map((group2) => group2.id));\n      if (select) {\n        this.select(...idsToSelect);\n      }\n    });\n    return this;\n  }\n  /**\n   * Update a shape using a partial of the shape.\n   *\n   * @example\n   * ```ts\n   * editor.updateShape({ id: 'box1', type: 'geo', props: { w: 100, h: 100 } })\n   * ```\n   *\n   * @param partial - The shape partial to update.\n   *\n   * @public\n   */\n  updateShape(partial) {\n    this.updateShapes([partial]);\n    return this;\n  }\n  /**\n   * Update shapes using partials of each shape.\n   *\n   * @example\n   * ```ts\n   * editor.updateShapes([{ id: 'box1', type: 'geo', props: { w: 100, h: 100 } }])\n   * ```\n   *\n   * @param partials - The shape partials to update.\n   *\n   * @public\n   */\n  updateShapes(partials) {\n    const compactedPartials = Array(partials.length);\n    for (let i = 0, n = partials.length; i < n; i++) {\n      const partial = partials[i];\n      if (!partial) continue;\n      const shape = this.getShape(partial.id);\n      if (!shape) continue;\n      if (!this._shouldIgnoreShapeLock) {\n        if (shape.isLocked) {\n          if (!(Object.hasOwn(partial, \"isLocked\") && !partial.isLocked)) {\n            continue;\n          }\n        } else if (this.isShapeOrAncestorLocked(shape)) {\n          continue;\n        }\n      }\n      this.animatingShapes.delete(partial.id);\n      compactedPartials.push(partial);\n    }\n    this._updateShapes(compactedPartials);\n    return this;\n  }\n  /** @internal */\n  _updateShapes(_partials) {\n    if (this.getIsReadonly()) return;\n    this.run(() => {\n      const updates = [];\n      let shape;\n      let updated;\n      for (let i = 0, n = _partials.length; i < n; i++) {\n        const partial = _partials[i];\n        if (!partial) continue;\n        shape = this.getShape(partial.id);\n        if (!shape) continue;\n        updated = applyPartialToRecordWithProps(shape, partial);\n        if (updated === shape) continue;\n        updated = this.getShapeUtil(shape).onBeforeUpdate?.(shape, updated) ?? updated;\n        updates.push(updated);\n      }\n      this.store.put(updates);\n    });\n  }\n  /** @internal */\n  _getUnlockedShapeIds(ids) {\n    return ids.filter((id) => !this.getShape(id)?.isLocked);\n  }\n  deleteShapes(_ids) {\n    if (this.getIsReadonly()) return this;\n    if (!Array.isArray(_ids)) {\n      throw Error(\"Editor.deleteShapes: must provide an array of shapes or shapeIds\");\n    }\n    const shapeIds = typeof _ids[0] === \"string\" ? _ids : _ids.map((s) => s.id);\n    const shapeIdsToDelete = this._shouldIgnoreShapeLock ? shapeIds : this._getUnlockedShapeIds(shapeIds);\n    if (shapeIdsToDelete.length === 0) return this;\n    const allShapeIdsToDelete = new Set(shapeIdsToDelete);\n    for (const id of shapeIdsToDelete) {\n      this.visitDescendants(id, (childId) => {\n        allShapeIdsToDelete.add(childId);\n      });\n    }\n    return this.run(() => this.store.remove([...allShapeIdsToDelete]));\n  }\n  deleteShape(_id) {\n    this.deleteShapes([typeof _id === \"string\" ? _id : _id.id]);\n    return this;\n  }\n  /* --------------------- Styles --------------------- */\n  /**\n   * Get all the current styles among the users selected shapes\n   *\n   * @internal\n   */\n  _extractSharedStyles(shape, sharedStyleMap) {\n    if (this.isShapeOfType(shape, \"group\")) {\n      const childIds = this._parentIdsToChildIds.get()[shape.id];\n      if (!childIds) return;\n      for (let i = 0, n = childIds.length; i < n; i++) {\n        this._extractSharedStyles(this.getShape(childIds[i]), sharedStyleMap);\n      }\n    } else {\n      for (const [style, propKey] of this.styleProps[shape.type]) {\n        sharedStyleMap.applyValue(style, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(shape.props, propKey));\n      }\n    }\n  }\n  _getSelectionSharedStyles() {\n    const selectedShapes = this.getSelectedShapes();\n    const sharedStyles = new _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_22__.SharedStyleMap();\n    for (const selectedShape of selectedShapes) {\n      this._extractSharedStyles(selectedShape, sharedStyles);\n    }\n    return sharedStyles;\n  }\n  /**\n   * Get the style for the next shape.\n   *\n   * @example\n   * ```ts\n   * const color = editor.getStyleForNextShape(DefaultColorStyle)\n   * ```\n   *\n   * @param style - The style to get.\n   *\n   * @public */\n  getStyleForNextShape(style) {\n    const value = this.getInstanceState().stylesForNextShape[style.id];\n    return value === void 0 ? style.defaultValue : value;\n  }\n  getShapeStyleIfExists(shape, style) {\n    const styleKey = this.styleProps[shape.type].get(style);\n    if (styleKey === void 0) return void 0;\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(shape.props, styleKey);\n  }\n  getSharedStyles() {\n    if (this.isIn(\"select\") && this.getSelectedShapeIds().length > 0) {\n      return this._getSelectionSharedStyles();\n    }\n    const currentTool = this.root.getCurrent();\n    const styles = new _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_22__.SharedStyleMap();\n    if (!currentTool) return styles;\n    if (currentTool.shapeType) {\n      for (const style of this.styleProps[currentTool.shapeType].keys()) {\n        styles.applyValue(style, this.getStyleForNextShape(style));\n      }\n    }\n    return styles;\n  }\n  getSharedOpacity() {\n    if (this.isIn(\"select\") && this.getSelectedShapeIds().length > 0) {\n      const shapesToCheck = [];\n      const addShape = (shapeId) => {\n        const shape = this.getShape(shapeId);\n        if (!shape) return;\n        if (this.isShapeOfType(shape, \"group\")) {\n          for (const childId of this.getSortedChildIdsForParent(shape.id)) {\n            addShape(childId);\n          }\n        } else {\n          shapesToCheck.push(shape);\n        }\n      };\n      for (const shapeId of this.getSelectedShapeIds()) {\n        addShape(shapeId);\n      }\n      let opacity = null;\n      for (const shape of shapesToCheck) {\n        if (opacity === null) {\n          opacity = shape.opacity;\n        } else if (opacity !== shape.opacity) {\n          return { type: \"mixed\" };\n        }\n      }\n      if (opacity !== null) return { type: \"shared\", value: opacity };\n    }\n    return { type: \"shared\", value: this.getInstanceState().opacityForNextShape };\n  }\n  /**\n   * Set the opacity for the next shapes. This will effect subsequently created shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setOpacityForNextShapes(0.5)\n   * ```\n   *\n   * @param opacity - The opacity to set. Must be a number between 0 and 1 inclusive.\n   * @param historyOptions - The history options for the change.\n   */\n  setOpacityForNextShapes(opacity, historyOptions) {\n    this.updateInstanceState({ opacityForNextShape: opacity }, historyOptions);\n    return this;\n  }\n  /**\n   * Set the current opacity. This will effect any selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setOpacityForSelectedShapes(0.5)\n   * ```\n   *\n   * @param opacity - The opacity to set. Must be a number between 0 and 1 inclusive.\n   */\n  setOpacityForSelectedShapes(opacity) {\n    const selectedShapes = this.getSelectedShapes();\n    if (selectedShapes.length > 0) {\n      const shapesToUpdate = [];\n      const addShapeById = (shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          const childIds = this.getSortedChildIdsForParent(shape);\n          for (const childId of childIds) {\n            addShapeById(this.getShape(childId));\n          }\n        } else {\n          shapesToUpdate.push(shape);\n        }\n      };\n      for (const id of selectedShapes) {\n        addShapeById(id);\n      }\n      this.updateShapes(\n        shapesToUpdate.map((shape) => {\n          return {\n            id: shape.id,\n            type: shape.type,\n            opacity\n          };\n        })\n      );\n    }\n    return this;\n  }\n  /**\n   * Set the value of a {@link @tldraw/tlschema#StyleProp} for the next shapes. This change will be applied to subsequently created shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setStyleForNextShapes(DefaultColorStyle, 'red')\n   * editor.setStyleForNextShapes(DefaultColorStyle, 'red', { ephemeral: true })\n   * ```\n   *\n   * @param style - The style to set.\n   * @param value - The value to set.\n   * @param historyOptions - The history options for the change.\n   *\n   * @public\n   */\n  setStyleForNextShapes(style, value, historyOptions) {\n    const stylesForNextShape = this.getInstanceState().stylesForNextShape;\n    this.updateInstanceState(\n      { stylesForNextShape: { ...stylesForNextShape, [style.id]: value } },\n      historyOptions\n    );\n    return this;\n  }\n  /**\n   * Set the value of a {@link @tldraw/tlschema#StyleProp}. This change will be applied to the currently selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setStyleForSelectedShapes(DefaultColorStyle, 'red')\n   * ```\n   *\n   * @param style - The style to set.\n   * @param value - The value to set.\n   *\n   * @public\n   */\n  setStyleForSelectedShapes(style, value) {\n    const selectedShapes = this.getSelectedShapes();\n    if (selectedShapes.length > 0) {\n      const updates = [];\n      const addShapeById = (shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          const childIds = this.getSortedChildIdsForParent(shape.id);\n          for (const childId of childIds) {\n            addShapeById(this.getShape(childId));\n          }\n        } else {\n          const util = this.getShapeUtil(shape);\n          const stylePropKey = this.styleProps[shape.type].get(style);\n          if (stylePropKey) {\n            const shapePartial = {\n              id: shape.id,\n              type: shape.type,\n              props: { [stylePropKey]: value }\n            };\n            updates.push({\n              util,\n              originalShape: shape,\n              updatePartial: shapePartial\n            });\n          }\n        }\n      };\n      for (const shape of selectedShapes) {\n        addShapeById(shape);\n      }\n      this.updateShapes(updates.map(({ updatePartial }) => updatePartial));\n    }\n    return this;\n  }\n  /**\n   * Register an external asset handler. This handler will be called when the editor needs to\n   * create an asset for some external content, like an image/video file or a bookmark URL. For\n   * example, the 'file' type handler will be called when a user drops an image onto the canvas.\n   *\n   * The handler should extract any relevant metadata for the asset, upload it to blob storage\n   * using {@link Editor.uploadAsset} if needed, and return the asset with the metadata & uploaded\n   * URL.\n   *\n   * @example\n   * ```ts\n   * editor.registerExternalAssetHandler('file', myHandler)\n   * ```\n   *\n   * @param type - The type of external content.\n   * @param handler - The handler to use for this content type.\n   *\n   * @public\n   */\n  registerExternalAssetHandler(type, handler) {\n    this.externalAssetContentHandlers[type] = handler;\n    return this;\n  }\n  /**\n   * Register a temporary preview of an asset. This is useful for showing a ghost image of\n   * something that is being uploaded. Retrieve the placeholder with\n   * {@link Editor.getTemporaryAssetPreview}. Placeholders last for 3 minutes by default, but this\n   * can be configured using\n   *\n   * @example\n   * ```ts\n   * editor.createTemporaryAssetPreview(assetId, file)\n   * ```\n   *\n   * @param assetId - The asset's id.\n   * @param file - The raw file.\n   *\n   * @public\n   */\n  createTemporaryAssetPreview(assetId, file) {\n    if (this.temporaryAssetPreview.has(assetId)) {\n      return this.temporaryAssetPreview.get(assetId);\n    }\n    const objectUrl = URL.createObjectURL(file);\n    this.temporaryAssetPreview.set(assetId, objectUrl);\n    setTimeout(() => {\n      this.temporaryAssetPreview.delete(assetId);\n      URL.revokeObjectURL(objectUrl);\n    }, this.options.temporaryAssetPreviewLifetimeMs);\n    return objectUrl;\n  }\n  /**\n   * Get temporary preview of an asset. This is useful for showing a ghost\n   * image of something that is being uploaded.\n   *\n   * @example\n   * ```ts\n   * editor.getTemporaryAssetPreview('someId')\n   * ```\n   *\n   * @param assetId - The asset's id.\n   *\n   * @public\n   */\n  getTemporaryAssetPreview(assetId) {\n    return this.temporaryAssetPreview.get(assetId);\n  }\n  /**\n   * Get an asset for an external asset content type.\n   *\n   * @example\n   * ```ts\n   * const asset = await editor.getAssetForExternalContent({ type: 'file', file: myFile })\n   * const asset = await editor.getAssetForExternalContent({ type: 'url', url: myUrl })\n   * ```\n   *\n   * @param info - Info about the external content.\n   * @returns The asset.\n   */\n  async getAssetForExternalContent(info) {\n    return await this.externalAssetContentHandlers[info.type]?.(info);\n  }\n  hasExternalAssetHandler(type) {\n    return !!this.externalAssetContentHandlers[type];\n  }\n  /**\n   * Register an external content handler. This handler will be called when the editor receives\n   * external content of the provided type. For example, the 'image' type handler will be called\n   * when a user drops an image onto the canvas.\n   *\n   * @example\n   * ```ts\n   * editor.registerExternalContentHandler('text', myHandler)\n   * ```\n   * @example\n   * ```ts\n   * editor.registerExternalContentHandler<'embed', MyEmbedType>('embed', myHandler)\n   * ```\n   *\n   * @param type - The type of external content.\n   * @param handler - The handler to use for this content type.\n   *\n   * @public\n   */\n  registerExternalContentHandler(type, handler) {\n    this.externalContentHandlers[type] = handler;\n    return this;\n  }\n  /**\n   * Handle external content, such as files, urls, embeds, or plain text which has been put into the app, for example by pasting external text or dropping external images onto canvas.\n   *\n   * @param info - Info about the external content.\n   */\n  async putExternalContent(info) {\n    return this.externalContentHandlers[info.type]?.(info);\n  }\n  /**\n   * Get content that can be exported for the given shape ids.\n   *\n   * @param shapes - The shapes (or shape ids) to get content for.\n   *\n   * @returns The exported content.\n   *\n   * @public\n   */\n  getContentFromCurrentPage(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (!ids) return;\n    if (ids.length === 0) return;\n    const shapeIds = this.getShapeAndDescendantIds(ids);\n    return withIsolatedShapes(this, shapeIds, (bindingIdsToKeep) => {\n      const bindings = [];\n      for (const id of bindingIdsToKeep) {\n        const binding = this.getBinding(id);\n        if (!binding) continue;\n        bindings.push(binding);\n      }\n      const rootShapeIds = [];\n      const shapes2 = [];\n      for (const shapeId of shapeIds) {\n        const shape = this.getShape(shapeId);\n        if (!shape) continue;\n        const isRootShape = !shapeIds.has(shape.parentId);\n        if (isRootShape) {\n          const pageTransform = this.getShapePageTransform(shape.id);\n          const pagePoint = pageTransform.point();\n          shapes2.push({\n            ...shape,\n            x: pagePoint.x,\n            y: pagePoint.y,\n            rotation: pageTransform.rotation(),\n            parentId: this.getCurrentPageId()\n          });\n          rootShapeIds.push(shape.id);\n        } else {\n          shapes2.push(shape);\n        }\n      }\n      const assets = [];\n      const seenAssetIds = /* @__PURE__ */ new Set();\n      for (const shape of shapes2) {\n        if (!(\"assetId\" in shape.props)) continue;\n        const assetId = shape.props.assetId;\n        if (!assetId || seenAssetIds.has(assetId)) continue;\n        seenAssetIds.add(assetId);\n        const asset = this.getAsset(assetId);\n        if (!asset) continue;\n        assets.push(asset);\n      }\n      return {\n        schema: this.store.schema.serialize(),\n        shapes: shapes2,\n        rootShapeIds,\n        bindings,\n        assets\n      };\n    });\n  }\n  async resolveAssetsInContent(content) {\n    if (!content) return void 0;\n    const assets = [];\n    await Promise.allSettled(\n      content.assets.map(async (asset) => {\n        if ((asset.type === \"image\" || asset.type === \"video\") && !asset.props.src?.startsWith(\"data:image\") && !asset.props.src?.startsWith(\"http\")) {\n          const assetWithDataUrl = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(asset);\n          const objectUrl = await this.store.props.assets.resolve(asset, {\n            screenScale: 1,\n            steppedScreenScale: 1,\n            dpr: 1,\n            networkEffectiveType: null,\n            shouldResolveToOriginal: true\n          });\n          assetWithDataUrl.props.src = await _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.FileHelpers.blobToDataUrl(\n            await (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.fetch)(objectUrl).then((r) => r.blob())\n          );\n          assets.push(assetWithDataUrl);\n        } else {\n          assets.push(asset);\n        }\n      })\n    );\n    content.assets = assets;\n    return content;\n  }\n  /**\n   * Place content into the editor.\n   *\n   * @param content - The content.\n   * @param opts - Options for placing the content.\n   *\n   * @public\n   */\n  putContentOntoCurrentPage(content, opts = {}) {\n    if (this.getIsReadonly()) return this;\n    if (!content.schema) {\n      throw Error(\"Could not put content:\\ncontent is missing a schema.\");\n    }\n    const { select = false, preserveIds = false, preservePosition = false } = opts;\n    let { point = void 0 } = opts;\n    const currentPageId = this.getCurrentPageId();\n    const { rootShapeIds } = content;\n    const assets = [];\n    const shapes = [];\n    const bindings = [];\n    const store = {\n      store: {\n        ...Object.fromEntries(content.assets.map((asset) => [asset.id, asset])),\n        ...Object.fromEntries(content.shapes.map((shape) => [shape.id, shape])),\n        ...Object.fromEntries(\n          content.bindings?.map((bindings2) => [bindings2.id, bindings2]) ?? []\n        )\n      },\n      schema: content.schema\n    };\n    const result = this.store.schema.migrateStoreSnapshot(store);\n    if (result.type === \"error\") {\n      throw Error(\"Could not put content: could not migrate content\");\n    }\n    for (const record of Object.values(result.value)) {\n      switch (record.typeName) {\n        case \"asset\": {\n          assets.push(record);\n          break;\n        }\n        case \"shape\": {\n          shapes.push(record);\n          break;\n        }\n        case \"binding\": {\n          bindings.push(record);\n          break;\n        }\n      }\n    }\n    const shapeIdMap = new Map(\n      preserveIds ? shapes.map((shape) => [shape.id, shape.id]) : shapes.map((shape) => [shape.id, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)()])\n    );\n    const bindingIdMap = new Map(\n      preserveIds ? bindings.map((binding) => [binding.id, binding.id]) : bindings.map((binding) => [binding.id, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)()])\n    );\n    let pasteParentId = this.getCurrentPageId();\n    let lowestDepth = Infinity;\n    let lowestAncestors = [];\n    for (const shape of this.getSelectedShapes()) {\n      if (lowestDepth === 0) break;\n      const isFrame = this.isShapeOfType(shape, \"frame\");\n      const ancestors = this.getShapeAncestors(shape);\n      if (isFrame) ancestors.push(shape);\n      const depth = isFrame ? ancestors.length + 1 : ancestors.length;\n      if (depth < lowestDepth) {\n        lowestDepth = depth;\n        lowestAncestors = ancestors;\n        pasteParentId = isFrame ? shape.id : shape.parentId;\n      } else if (depth === lowestDepth) {\n        if (lowestAncestors.length !== ancestors.length) {\n          throw Error(`Ancestors: ${lowestAncestors.length} !== ${ancestors.length}`);\n        }\n        if (lowestAncestors.length === 0) {\n          pasteParentId = currentPageId;\n          break;\n        } else {\n          pasteParentId = currentPageId;\n          for (let i = 0; i < lowestAncestors.length; i++) {\n            if (ancestors[i] !== lowestAncestors[i]) break;\n            pasteParentId = ancestors[i].id;\n          }\n        }\n      }\n    }\n    let isDuplicating = false;\n    if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(pasteParentId)) {\n      const parent = this.getShape(pasteParentId);\n      if (parent) {\n        if (!this.getViewportPageBounds().includes(this.getShapePageBounds(parent))) {\n          pasteParentId = currentPageId;\n        } else {\n          if (rootShapeIds.length === 1) {\n            const rootShape = shapes.find((s) => s.id === rootShapeIds[0]);\n            if (this.isShapeOfType(parent, \"frame\") && this.isShapeOfType(rootShape, \"frame\") && rootShape.props.w === parent?.props.w && rootShape.props.h === parent?.props.h) {\n              isDuplicating = true;\n            }\n          }\n        }\n      } else {\n        pasteParentId = currentPageId;\n      }\n    }\n    if (!isDuplicating) {\n      isDuplicating = shapeIdMap.has(pasteParentId);\n    }\n    if (isDuplicating) {\n      pasteParentId = this.getShape(pasteParentId).parentId;\n    }\n    let index = this.getHighestIndexForParent(pasteParentId);\n    const rootShapes = [];\n    const newShapes = shapes.map((oldShape) => {\n      const newId = shapeIdMap.get(oldShape.id);\n      const newShape = { ...oldShape, id: newId };\n      if (rootShapeIds.includes(oldShape.id)) {\n        newShape.parentId = currentPageId;\n        rootShapes.push(newShape);\n      }\n      if (shapeIdMap.has(newShape.parentId)) {\n        newShape.parentId = shapeIdMap.get(oldShape.parentId);\n      } else {\n        rootShapeIds.push(newShape.id);\n        newShape.index = index;\n        index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(index);\n      }\n      return newShape;\n    });\n    if (newShapes.length + this.getCurrentPageShapeIds().size > this.options.maxShapesPerPage) {\n      alertMaxShapes(this);\n      return this;\n    }\n    const newBindings = bindings.map(\n      (oldBinding) => ({\n        ...oldBinding,\n        id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(bindingIdMap.get(oldBinding.id)),\n        fromId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIdMap.get(oldBinding.fromId)),\n        toId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIdMap.get(oldBinding.toId))\n      })\n    );\n    const assetsToCreate = [];\n    const assetsToUpdate = [];\n    for (const asset of assets) {\n      if (this.store.has(asset.id)) {\n        continue;\n      }\n      if ((asset.type === \"image\" || asset.type === \"video\") && asset.props.src?.startsWith(\"data:image\")) {\n        assetsToUpdate.push((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(asset));\n        asset.props.src = null;\n      }\n      assetsToCreate.push(asset);\n    }\n    Promise.allSettled(\n      assetsToUpdate.map(async (asset) => {\n        const file = await (0,_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_23__.dataUrlToFile)(\n          asset.props.src,\n          asset.props.name,\n          asset.props.mimeType ?? \"image/png\"\n        );\n        const newAsset = await this.getAssetForExternalContent({\n          type: \"file\",\n          file,\n          assetId: asset.id\n        });\n        if (!newAsset) {\n          this.deleteAssets([asset.id]);\n          return;\n        }\n        this.updateAssets([{ ...newAsset, id: asset.id }]);\n      })\n    );\n    this.run(() => {\n      if (assetsToCreate.length > 0) {\n        this.createAssets(assetsToCreate);\n      }\n      this.createShapes(newShapes);\n      this.createBindings(newBindings);\n      if (select) {\n        this.select(...rootShapes.map((s) => s.id));\n      }\n      if (pasteParentId !== currentPageId) {\n        this.reparentShapes(\n          rootShapes.map((s) => s.id),\n          pasteParentId\n        );\n      }\n      const newCreatedShapes = newShapes.map((s) => this.getShape(s.id));\n      const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(newCreatedShapes.map((s) => this.getShapePageBounds(s)));\n      if (point === void 0) {\n        if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(pasteParentId)) {\n          const shape = this.getShape(pasteParentId);\n          point = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_16__.Mat.applyToPoint(\n            this.getShapePageTransform(shape),\n            this.getShapeGeometry(shape).bounds.center\n          );\n        } else {\n          const viewportPageBounds = this.getViewportPageBounds();\n          if (preservePosition || viewportPageBounds.includes(_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.From(bounds))) {\n            point = bounds.center;\n          } else {\n            point = viewportPageBounds.center;\n          }\n        }\n      }\n      if (rootShapes.length === 1) {\n        const onlyRoot = rootShapes[0];\n        if (this.isShapeOfType(onlyRoot, \"frame\")) {\n          while (this.getShapesAtPoint(point).some(\n            (shape) => this.isShapeOfType(shape, \"frame\") && shape.props.w === onlyRoot.props.w && shape.props.h === onlyRoot.props.h\n          )) {\n            point.x += bounds.w + 16;\n          }\n        }\n      }\n      const pageCenter = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(rootShapes.map(({ id }) => this.getShapePageBounds(id)))\n      ).center;\n      const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(point, pageCenter);\n      this.updateShapes(\n        rootShapes.map(({ id }) => {\n          const s = this.getShape(id);\n          const localRotation = this.getShapeParentTransform(id).decompose().rotation;\n          const localDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Rot(offset, -localRotation);\n          return { id: s.id, type: s.type, x: s.x + localDelta.x, y: s.y + localDelta.y };\n        })\n      );\n    });\n    return this;\n  }\n  /**\n   * Get an exported SVG element of the given shapes.\n   *\n   * @param shapes - The shapes (or shape ids) to export.\n   * @param opts - Options for the export.\n   *\n   * @returns The SVG element.\n   *\n   * @public\n   */\n  async getSvgElement(shapes, opts = {}) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length === 0) return void 0;\n    return (0,_exports_exportToSvg_mjs__WEBPACK_IMPORTED_MODULE_10__.exportToSvg)(this, ids, opts);\n  }\n  /**\n   * Get an exported SVG string of the given shapes.\n   *\n   * @param shapes - The shapes (or shape ids) to export.\n   * @param opts - Options for the export.\n   *\n   * @returns The SVG element.\n   *\n   * @public\n   */\n  async getSvgString(shapes, opts = {}) {\n    const result = await this.getSvgElement(shapes, opts);\n    if (!result) return void 0;\n    const serializer = new XMLSerializer();\n    return {\n      svg: serializer.serializeToString(result.svg),\n      width: result.width,\n      height: result.height\n    };\n  }\n  /** @deprecated Use {@link Editor.getSvgString} or {@link Editor.getSvgElement} instead. */\n  async getSvg(shapes, opts = {}) {\n    const result = await this.getSvgElement(shapes, opts);\n    if (!result) return void 0;\n    return result.svg;\n  }\n  /**\n   * Update the input points from a pointer, pinch, or wheel event.\n   *\n   * @param info - The event info.\n   */\n  _updateInputsFromEvent(info) {\n    const {\n      pointerVelocity,\n      previousScreenPoint,\n      previousPagePoint,\n      currentScreenPoint,\n      currentPagePoint\n    } = this.inputs;\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n    const sx = info.point.x - screenBounds.x;\n    const sy = info.point.y - screenBounds.y;\n    const sz = info.point.z ?? 0.5;\n    previousScreenPoint.setTo(currentScreenPoint);\n    previousPagePoint.setTo(currentPagePoint);\n    currentScreenPoint.set(sx, sy);\n    const nx = sx / cz - cx;\n    const ny = sy / cz - cy;\n    if (isFinite(nx) && isFinite(ny)) {\n      currentPagePoint.set(nx, ny, sz);\n    }\n    this.inputs.isPen = info.type === \"pointer\" && info.isPen;\n    if (info.name === \"pointer_down\" || this.inputs.isPinching) {\n      pointerVelocity.set(0, 0);\n      this.inputs.originScreenPoint.setTo(currentScreenPoint);\n      this.inputs.originPagePoint.setTo(currentPagePoint);\n    }\n    this.run(\n      () => {\n        this.store.put([\n          {\n            id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLPOINTER_ID,\n            typeName: \"pointer\",\n            x: currentPagePoint.x,\n            y: currentPagePoint.y,\n            lastActivityTimestamp: (\n              // If our pointer moved only because we're following some other user, then don't\n              // update our last activity timestamp; otherwise, update it to the current timestamp.\n              (info.type === \"pointer\" && info.pointerId === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.INTERNAL_POINTER_IDS.CAMERA_MOVE ? this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLPOINTER_ID)?.lastActivityTimestamp ?? this._tickManager.now : this._tickManager.now)\n            ),\n            meta: {}\n          }\n        ]);\n      },\n      { history: \"ignore\" }\n    );\n  }\n  /**\n   * Dispatch a cancel event.\n   *\n   * @example\n   * ```ts\n   * editor.cancel()\n   * ```\n   *\n   * @public\n   */\n  cancel() {\n    this.dispatch({ type: \"misc\", name: \"cancel\" });\n    return this;\n  }\n  /**\n   * Dispatch an interrupt event.\n   *\n   * @example\n   * ```ts\n   * editor.interrupt()\n   * ```\n   *\n   * @public\n   */\n  interrupt() {\n    this.dispatch({ type: \"misc\", name: \"interrupt\" });\n    return this;\n  }\n  /**\n   * Dispatch a complete event.\n   *\n   * @example\n   * ```ts\n   * editor.complete()\n   * ```\n   *\n   * @public\n   */\n  complete() {\n    this.dispatch({ type: \"misc\", name: \"complete\" });\n    return this;\n  }\n  /**\n   * Puts the editor into focused mode.\n   *\n   * This makes the editor eligible to receive keyboard events and some pointer events (move, wheel).\n   *\n   * @example\n   * ```ts\n   * editor.focus()\n   * ```\n   *\n   * By default this also dispatches a 'focus' event to the container element. To prevent this, pass `focusContainer: false`.\n   *\n   * @example\n   * ```ts\n   * editor.focus({ focusContainer: false })\n   * ```\n   *\n   * @public\n   */\n  focus({ focusContainer = true } = {}) {\n    if (this.getIsFocused()) return this;\n    if (focusContainer) this.focusManager.focus();\n    this.updateInstanceState({ isFocused: true });\n    return this;\n  }\n  /**\n   * Switches off the editor's focused mode.\n   *\n   * This makes the editor ignore keyboard events and some pointer events (move, wheel).\n   *\n   * @example\n   * ```ts\n   * editor.blur()\n   * ```\n   * By default this also dispatches a 'blur' event to the container element. To prevent this, pass `blurContainer: false`.\n   *\n   * @example\n   * ```ts\n   * editor.blur({ blurContainer: false })\n   * ```\n   *\n   * @public\n   */\n  blur({ blurContainer = true } = {}) {\n    if (!this.getIsFocused()) return this;\n    if (blurContainer) {\n      this.focusManager.blur();\n    } else {\n      this.complete();\n    }\n    this.updateInstanceState({ isFocused: false });\n    return this;\n  }\n  getIsFocused() {\n    return this.getInstanceState().isFocused;\n  }\n  getIsReadonly() {\n    return this.getInstanceState().isReadonly;\n  }\n  /**\n   * @public\n   * @returns a snapshot of the store's UI and document state\n   */\n  getSnapshot() {\n    return (0,_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_5__.getSnapshot)(this.store);\n  }\n  /**\n   * Loads a snapshot into the editor.\n   * @param snapshot - The snapshot to load.\n   * @param opts - The options for loading the snapshot.\n   * @returns\n   */\n  loadSnapshot(snapshot, opts) {\n    (0,_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_5__.loadSnapshot)(this.store, snapshot, opts);\n    return this;\n  }\n  _zoomToFitPageContentAt100Percent() {\n    const bounds = this.getCurrentPageBounds();\n    if (bounds) {\n      this.zoomToBounds(bounds, { immediate: true, targetZoom: this.getBaseZoom() });\n    }\n  }\n  _navigateToDeepLink(deepLink) {\n    this.run(() => {\n      switch (deepLink.type) {\n        case \"page\": {\n          const page = this.getPage(deepLink.pageId);\n          if (page) {\n            this.setCurrentPage(page);\n          }\n          this._zoomToFitPageContentAt100Percent();\n          return;\n        }\n        case \"shapes\": {\n          const allShapes = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(deepLink.shapeIds.map((id) => this.getShape(id)));\n          const byPage = {};\n          for (const shape of allShapes) {\n            const pageId2 = this.getAncestorPageId(shape);\n            if (!pageId2) continue;\n            byPage[pageId2] ??= [];\n            byPage[pageId2].push(shape);\n          }\n          const [pageId, shapes] = Object.entries(byPage).sort(\n            ([_, a], [__, b]) => b.length - a.length\n          )[0] ?? [\"\", []];\n          if (!pageId || !shapes.length) {\n            this._zoomToFitPageContentAt100Percent();\n          } else {\n            this.setCurrentPage(pageId);\n            const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.Common(shapes.map((s) => this.getShapePageBounds(s)));\n            this.zoomToBounds(bounds, { immediate: true, targetZoom: this.getBaseZoom() });\n          }\n          return;\n        }\n        case \"viewport\": {\n          if (deepLink.pageId) {\n            if (!this.getPage(deepLink.pageId)) {\n              this._zoomToFitPageContentAt100Percent();\n              return;\n            }\n            this.setCurrentPage(deepLink.pageId);\n          }\n          this.zoomToBounds(deepLink.bounds, { immediate: true, inset: 0 });\n          return;\n        }\n        default:\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(deepLink);\n      }\n    });\n  }\n  /**\n   * Handles navigating to the content specified by the query param in the given URL.\n   *\n   * Use {@link Editor#createDeepLink} to create a URL with a deep link query param.\n   *\n   * If no URL is provided, it will look for the param in the current `window.location.href`.\n   *\n   * @example\n   * ```ts\n   * editor.navigateToDeepLink()\n   * ```\n   *\n   * The default parameter name is 'd'. You can override this by providing the `param` option.\n   *\n   * @example\n   * ```ts\n   * // disable page parameter and change viewport parameter to 'c'\n   * editor.navigateToDeepLink({\n   *   param: 'x',\n   *   url: 'https://my-app.com/my-document?x=200.12.454.23.xyz123',\n   * })\n   * ```\n   *\n   * @param opts - Options for loading the state from the URL.\n   */\n  navigateToDeepLink(opts) {\n    if (opts && \"type\" in opts) {\n      this._navigateToDeepLink(opts);\n      return this;\n    }\n    const url = new URL(opts?.url ?? window.location.href);\n    const deepLinkString = url.searchParams.get(opts?.param ?? \"d\");\n    if (!deepLinkString) {\n      this._zoomToFitPageContentAt100Percent();\n      return this;\n    }\n    try {\n      this._navigateToDeepLink((0,_utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_25__.parseDeepLinkString)(deepLinkString));\n    } catch (e) {\n      console.warn(e);\n      this._zoomToFitPageContentAt100Percent();\n    }\n    return this;\n  }\n  /**\n   * Turns the given URL into a deep link by adding a query parameter.\n   *\n   * e.g. `https://my-app.com/my-document?d=100.100.200.200.xyz123`\n   *\n   * If no URL is provided, it will use the current `window.location.href`.\n   *\n   * @example\n   * ```ts\n   * // create a deep link to the current page + viewport\n   * navigator.clipboard.writeText(editor.createDeepLink())\n   * ```\n   *\n   * You can link to a particular set of shapes by providing a `to` parameter.\n   *\n   * @example\n   * ```ts\n   * // create a deep link to the set of currently selected shapes\n   * navigator.clipboard.writeText(editor.createDeepLink({\n   *   to: { type: 'selection', shapeIds: editor.getSelectedShapeIds() }\n   * }))\n   * ```\n   *\n   * The default query param is 'd'. You can override this by providing a `param` parameter.\n   *\n   * @example\n   * ```ts\n   * // Use `x` as the param name instead\n   * editor.createDeepLink({ param: 'x' })\n   * ```\n   *\n   * @param opts - Options for adding the state to the URL.\n   * @returns the updated URL\n   */\n  createDeepLink(opts) {\n    const url = new URL(opts?.url ?? window.location.href);\n    url.searchParams.set(\n      opts?.param ?? \"d\",\n      (0,_utils_deepLinks_mjs__WEBPACK_IMPORTED_MODULE_25__.createDeepLinkString)(\n        opts?.to ?? {\n          type: \"viewport\",\n          pageId: this.options.maxPages === 1 ? void 0 : this.getCurrentPageId(),\n          bounds: this.getViewportPageBounds()\n        }\n      )\n    );\n    return url;\n  }\n  /**\n   * Register a listener for changes to a deep link for the current document.\n   *\n   * You'll typically want to use this indirectly via the {@link TldrawEditorBaseProps.deepLinks} prop on the `<Tldraw />` component.\n   *\n   * By default this will update `window.location` in place, but you can provide a custom callback\n   * to handle state changes on your own.\n   *\n   * @example\n   * ```ts\n   * editor.registerDeepLinkListener({\n   *   onChange(url) {\n   *     window.history.replaceState({}, document.title, url.toString())\n   *   }\n   * })\n   * ```\n   *\n   * You can also provide a custom URL to update, in which case you must also provide `onChange`.\n   *\n   * @example\n   * ```ts\n   * editor.registerDeepLinkListener({\n   *   getUrl: () => `https://my-app.com/my-document`,\n   *   onChange(url) {\n   *     setShareUrl(url.toString())\n   *   }\n   * })\n   * ```\n   *\n   * By default this will update with a debounce interval of 500ms, but you can provide a custom interval.\n   *\n   * @example\n   * ```ts\n   * editor.registerDeepLinkListener({ debounceMs: 1000 })\n   * ```\n   * The default parameter name is `d`. You can override this by providing a `param` option.\n   *\n   * @example\n   * ```ts\n   * editor.registerDeepLinkListener({ param: 'x' })\n   * ```\n   * @param opts - Options for setting up the listener.\n   * @returns a function that will stop the listener.\n   */\n  registerDeepLinkListener(opts) {\n    if (opts?.getUrl && !opts?.onChange) {\n      throw Error(\n        \"[tldraw:urlStateSync] If you specify getUrl, you must also specify the onChange callback.\"\n      );\n    }\n    const url$ = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"url with state\", () => {\n      const url = opts?.getUrl?.(this) ?? window.location.href;\n      const urlWithState = this.createDeepLink({\n        param: opts?.param,\n        url,\n        to: opts?.getTarget?.(this)\n      });\n      return urlWithState.toString();\n    });\n    const announceChange = opts?.onChange ?? (() => {\n      const url = this.createDeepLink({\n        param: opts?.param,\n        to: opts?.getTarget?.(this)\n      });\n      window.history.replaceState({}, document.title, url.toString());\n    });\n    const scheduleEffect = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.debounce)((execute) => execute(), opts?.debounceMs ?? 500);\n    const unlisten = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\n      \"update url on state change\",\n      () => announceChange(new URL(url$.get()), this),\n      { scheduleEffect }\n    );\n    return () => {\n      unlisten();\n      scheduleEffect.cancel();\n    };\n  }\n  /**\n   * Prevent a double click event from firing the next time the user clicks\n   *\n   * @public\n   */\n  cancelDoubleClick() {\n    this._clickManager.cancelDoubleClickTimeout();\n  }\n  _setShiftKeyTimeout() {\n    this.inputs.shiftKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Shift\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      metaKey: this.inputs.metaKey,\n      accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__.isAccelKey)(this.inputs),\n      code: \"ShiftLeft\"\n    });\n  }\n  _setAltKeyTimeout() {\n    this.inputs.altKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Alt\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      metaKey: this.inputs.metaKey,\n      accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__.isAccelKey)(this.inputs),\n      code: \"AltLeft\"\n    });\n  }\n  _setCtrlKeyTimeout() {\n    this.inputs.ctrlKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Ctrl\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      metaKey: this.inputs.metaKey,\n      accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__.isAccelKey)(this.inputs),\n      code: \"ControlLeft\"\n    });\n  }\n  _setMetaKeyTimeout() {\n    this.inputs.metaKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Meta\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      metaKey: this.inputs.metaKey,\n      accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_27__.isAccelKey)(this.inputs),\n      code: \"MetaLeft\"\n    });\n  }\n  /**\n   * Dispatch an event to the editor.\n   *\n   * @example\n   * ```ts\n   * editor.dispatch(myPointerEvent)\n   * ```\n   *\n   * @param info - The event info.\n   *\n   * @public\n   */\n  dispatch(info) {\n    this._pendingEventsForNextTick.push(info);\n    if (!(info.type === \"pointer\" && info.name === \"pointer_move\" || info.type === \"wheel\" || info.type === \"pinch\")) {\n      this._flushEventsForTick(0);\n    }\n    return this;\n  }\n  _flushEventsForTick(elapsed) {\n    this.run(() => {\n      if (this._pendingEventsForNextTick.length > 0) {\n        const events = [...this._pendingEventsForNextTick];\n        this._pendingEventsForNextTick.length = 0;\n        for (const info of events) {\n          this._flushEventForTick(info);\n        }\n      }\n      if (elapsed > 0) {\n        this.root.handleEvent({ type: \"misc\", name: \"tick\", elapsed });\n      }\n      this.scribbles.tick(elapsed);\n    });\n  }\n  _flushEventForTick(info) {\n    if (this.getCrashingError()) return this;\n    const { inputs } = this;\n    const { type } = info;\n    if (info.type === \"misc\") {\n      if (info.name === \"cancel\" || info.name === \"complete\") {\n        this.inputs.isDragging = false;\n        if (this.inputs.isPanning) {\n          this.inputs.isPanning = false;\n          this.inputs.isSpacebarPanning = false;\n          this.setCursor({ type: this._prevCursor, rotation: 0 });\n        }\n      }\n      this.root.handleEvent(info);\n      return;\n    }\n    if (info.shiftKey) {\n      clearTimeout(this._shiftKeyTimeout);\n      this._shiftKeyTimeout = -1;\n      inputs.shiftKey = true;\n    } else if (!info.shiftKey && inputs.shiftKey && this._shiftKeyTimeout === -1) {\n      this._shiftKeyTimeout = this.timers.setTimeout(this._setShiftKeyTimeout, 150);\n    }\n    if (info.altKey) {\n      clearTimeout(this._altKeyTimeout);\n      this._altKeyTimeout = -1;\n      inputs.altKey = true;\n    } else if (!info.altKey && inputs.altKey && this._altKeyTimeout === -1) {\n      this._altKeyTimeout = this.timers.setTimeout(this._setAltKeyTimeout, 150);\n    }\n    if (info.ctrlKey) {\n      clearTimeout(this._ctrlKeyTimeout);\n      this._ctrlKeyTimeout = -1;\n      inputs.ctrlKey = true;\n    } else if (!info.ctrlKey && inputs.ctrlKey && this._ctrlKeyTimeout === -1) {\n      this._ctrlKeyTimeout = this.timers.setTimeout(this._setCtrlKeyTimeout, 150);\n    }\n    if (info.metaKey) {\n      clearTimeout(this._metaKeyTimeout);\n      this._metaKeyTimeout = -1;\n      inputs.metaKey = true;\n    } else if (!info.metaKey && inputs.metaKey && this._metaKeyTimeout === -1) {\n      this._metaKeyTimeout = this.timers.setTimeout(this._setMetaKeyTimeout, 150);\n    }\n    const { originPagePoint, currentPagePoint } = inputs;\n    if (!inputs.isPointing) {\n      inputs.isDragging = false;\n    }\n    const instanceState = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const pageState = this.store.get(this._getCurrentPageStateId());\n    const cameraOptions = this._cameraOptions.__unsafe__getWithoutCapture();\n    switch (type) {\n      case \"pinch\": {\n        if (cameraOptions.isLocked) return;\n        clearTimeout(this._longPressTimeout);\n        this._updateInputsFromEvent(info);\n        switch (info.name) {\n          case \"pinch_start\": {\n            if (inputs.isPinching) return;\n            if (!inputs.isEditing) {\n              this._pinchStart = this.getCamera().z;\n              if (!this._selectedShapeIdsAtPointerDown.length) {\n                this._selectedShapeIdsAtPointerDown = [...pageState.selectedShapeIds];\n              }\n              this._didPinch = true;\n              inputs.isPinching = true;\n              this.interrupt();\n            }\n            return;\n          }\n          case \"pinch\": {\n            if (!inputs.isPinching) return;\n            const {\n              point: { z = 1 },\n              delta: { x: dx, y: dy }\n            } = info;\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.SubXY(\n              info.point,\n              instanceState.screenBounds.x,\n              instanceState.screenBounds.y\n            );\n            this.stopCameraAnimation();\n            if (instanceState.followingUserId) {\n              this.stopFollowingUser();\n            }\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            const { panSpeed, zoomSpeed } = cameraOptions;\n            this._setCamera(\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n                cx + dx * panSpeed / cz - x / cz + x / (z * zoomSpeed),\n                cy + dy * panSpeed / cz - y / cz + y / (z * zoomSpeed),\n                z * zoomSpeed\n              ),\n              { immediate: true }\n            );\n            return;\n          }\n          case \"pinch_end\": {\n            if (!inputs.isPinching) return this;\n            inputs.isPinching = false;\n            const { _selectedShapeIdsAtPointerDown: shapesToReselect } = this;\n            this.setSelectedShapes(this._selectedShapeIdsAtPointerDown);\n            this._selectedShapeIdsAtPointerDown = [];\n            if (this._didPinch) {\n              this._didPinch = false;\n              if (shapesToReselect.length > 0) {\n                this.once(\"tick\", () => {\n                  if (!this._didPinch) {\n                    this.setSelectedShapes(shapesToReselect);\n                  }\n                });\n              }\n            }\n            return;\n          }\n        }\n      }\n      case \"wheel\": {\n        if (cameraOptions.isLocked) return;\n        this._updateInputsFromEvent(info);\n        if (this.menus.hasAnyOpenMenus()) {\n        } else {\n          const { panSpeed, zoomSpeed, wheelBehavior } = cameraOptions;\n          if (wheelBehavior !== \"none\") {\n            this.stopCameraAnimation();\n            if (instanceState.followingUserId) {\n              this.stopFollowingUser();\n            }\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            const { x: dx, y: dy, z: dz = 0 } = info.delta;\n            let behavior = wheelBehavior;\n            if (inputs.ctrlKey) behavior = wheelBehavior === \"pan\" ? \"zoom\" : \"pan\";\n            switch (behavior) {\n              case \"zoom\": {\n                const { x, y } = this.inputs.currentScreenPoint;\n                let delta = dz;\n                if (wheelBehavior === \"zoom\") {\n                  if (Math.abs(dy) > 10) {\n                    delta = 10 * Math.sign(dy) / 100;\n                  } else {\n                    delta = dy / 100;\n                  }\n                }\n                const zoom = cz + (delta ?? 0) * zoomSpeed * cz;\n                this._setCamera(\n                  new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(\n                    cx + (x / zoom - x) - (x / cz - x),\n                    cy + (y / zoom - y) - (y / cz - y),\n                    zoom\n                  ),\n                  { immediate: true }\n                );\n                this.maybeTrackPerformance(\"Zooming\");\n                return;\n              }\n              case \"pan\": {\n                this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(cx + dx * panSpeed / cz, cy + dy * panSpeed / cz, cz), {\n                  immediate: true\n                });\n                this.maybeTrackPerformance(\"Panning\");\n                return;\n              }\n            }\n          }\n        }\n        break;\n      }\n      case \"pointer\": {\n        if (inputs.isPinching) return;\n        this._updateInputsFromEvent(info);\n        const { isPen } = info;\n        const { isPenMode } = instanceState;\n        switch (info.name) {\n          case \"pointer_down\": {\n            if (isPenMode && !isPen) return;\n            if (!this.inputs.isPanning) {\n              this._longPressTimeout = this.timers.setTimeout(() => {\n                this.dispatch({\n                  ...info,\n                  point: this.inputs.currentScreenPoint,\n                  name: \"long_press\"\n                });\n              }, this.options.longPressDurationMs);\n            }\n            this._selectedShapeIdsAtPointerDown = this.getSelectedShapeIds();\n            if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.LEFT_MOUSE_BUTTON) this.capturedPointerId = info.pointerId;\n            inputs.buttons.add(info.button);\n            inputs.isPointing = true;\n            inputs.isDragging = false;\n            if (!isPenMode && isPen) this.updateInstanceState({ isPenMode: true });\n            if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.STYLUS_ERASER_BUTTON) {\n              this._restoreToolId = this.getCurrentToolId();\n              this.complete();\n              this.setCurrentTool(\"eraser\");\n            } else if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.MIDDLE_MOUSE_BUTTON) {\n              if (!this.inputs.isPanning) {\n                this._prevCursor = this.getInstanceState().cursor.type;\n              }\n              this.inputs.isPanning = true;\n              clearTimeout(this._longPressTimeout);\n            }\n            if (this.inputs.isPanning) {\n              this.stopCameraAnimation();\n              this.setCursor({ type: \"grabbing\", rotation: 0 });\n              return this;\n            }\n            break;\n          }\n          case \"pointer_move\": {\n            if (!isPen && isPenMode) return;\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            if (this.inputs.isPanning && this.inputs.isPointing) {\n              const { currentScreenPoint, previousScreenPoint } = this.inputs;\n              const { panSpeed } = cameraOptions;\n              const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Sub(currentScreenPoint, previousScreenPoint);\n              this.setCamera(\n                new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(cx + offset.x * panSpeed / cz, cy + offset.y * panSpeed / cz, cz),\n                { immediate: true }\n              );\n              this.maybeTrackPerformance(\"Panning\");\n              return;\n            }\n            if (inputs.isPointing && !inputs.isDragging && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec.Dist2(originPagePoint, currentPagePoint) * this.getZoomLevel() > (instanceState.isCoarsePointer ? this.options.coarseDragDistanceSquared : this.options.dragDistanceSquared) / cz) {\n              inputs.isDragging = true;\n              clearTimeout(this._longPressTimeout);\n            }\n            break;\n          }\n          case \"pointer_up\": {\n            inputs.isDragging = false;\n            inputs.isPointing = false;\n            clearTimeout(this._longPressTimeout);\n            inputs.buttons.delete(info.button);\n            if (this.menus.hasAnyOpenMenus()) return;\n            if (instanceState.isPenMode && !isPen) return;\n            if (this.capturedPointerId === info.pointerId) {\n              this.capturedPointerId = null;\n              info.button = 0;\n            }\n            if (inputs.isPanning) {\n              if (!inputs.keys.has(\"Space\")) {\n                inputs.isPanning = false;\n                inputs.isSpacebarPanning = false;\n              }\n              const slideDirection = this.inputs.pointerVelocity;\n              const slideSpeed = Math.min(2, slideDirection.len());\n              switch (info.button) {\n                case _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.LEFT_MOUSE_BUTTON: {\n                  this.setCursor({ type: \"grab\", rotation: 0 });\n                  break;\n                }\n                case _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.MIDDLE_MOUSE_BUTTON: {\n                  if (this.inputs.keys.has(\" \")) {\n                    this.setCursor({ type: \"grab\", rotation: 0 });\n                  } else {\n                    this.setCursor({ type: this._prevCursor, rotation: 0 });\n                  }\n                }\n              }\n              if (slideSpeed > 0) {\n                this.slideCamera({ speed: slideSpeed, direction: slideDirection });\n              }\n            } else {\n              if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.STYLUS_ERASER_BUTTON) {\n                this.complete();\n                this.setCurrentTool(this._restoreToolId);\n              }\n            }\n            break;\n          }\n        }\n        break;\n      }\n      case \"keyboard\": {\n        if (info.key === \"ShiftRight\") info.key = \"ShiftLeft\";\n        if (info.key === \"AltRight\") info.key = \"AltLeft\";\n        if (info.code === \"ControlRight\") info.code = \"ControlLeft\";\n        if (info.code === \"MetaRight\") info.code = \"MetaLeft\";\n        switch (info.name) {\n          case \"key_down\": {\n            inputs.keys.add(info.code);\n            if (info.code === \"Space\" && !info.ctrlKey) {\n              if (!this.inputs.isPanning) {\n                this._prevCursor = instanceState.cursor.type;\n              }\n              this.inputs.isPanning = true;\n              this.inputs.isSpacebarPanning = true;\n              clearTimeout(this._longPressTimeout);\n              this.setCursor({ type: this.inputs.isPointing ? \"grabbing\" : \"grab\", rotation: 0 });\n            }\n            if (this.inputs.isSpacebarPanning) {\n              let offset;\n              switch (info.code) {\n                case \"ArrowUp\": {\n                  offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(0, -1);\n                  break;\n                }\n                case \"ArrowRight\": {\n                  offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(1, 0);\n                  break;\n                }\n                case \"ArrowDown\": {\n                  offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(0, 1);\n                  break;\n                }\n                case \"ArrowLeft\": {\n                  offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_17__.Vec(-1, 0);\n                  break;\n                }\n              }\n              if (offset) {\n                const bounds = this.getViewportPageBounds();\n                const next = bounds.clone().translate(offset.mulV({ x: bounds.w, y: bounds.h }));\n                this._animateToViewport(next, { animation: { duration: 320 } });\n              }\n            }\n            break;\n          }\n          case \"key_up\": {\n            inputs.keys.delete(info.code);\n            if (info.code === \"Space\") {\n              if (this.inputs.buttons.has(_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.MIDDLE_MOUSE_BUTTON)) {\n              } else {\n                this.inputs.isPanning = false;\n                this.inputs.isSpacebarPanning = false;\n                this.setCursor({ type: this._prevCursor, rotation: 0 });\n              }\n            }\n            break;\n          }\n          case \"key_repeat\": {\n            break;\n          }\n        }\n        break;\n      }\n    }\n    if (info.type === \"pointer\") {\n      if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.MIDDLE_MOUSE_BUTTON) {\n        info.name = \"middle_click\";\n      } else if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_9__.RIGHT_MOUSE_BUTTON) {\n        info.name = \"right_click\";\n      }\n      const { isPenMode } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n      if (info.isPen === isPenMode) {\n        const clickInfo = this._clickManager.handlePointerEvent(info);\n        if (info.name !== clickInfo.name) {\n          this.root.handleEvent(info);\n          this.emit(\"event\", info);\n          this.root.handleEvent(clickInfo);\n          this.emit(\"event\", clickInfo);\n          return;\n        }\n      }\n    }\n    this.root.handleEvent(info);\n    this.emit(\"event\", info);\n    if (info.type === \"pointer\" && info.name === \"pointer_down\") {\n      this.menus.clearOpenMenus();\n    }\n    return this;\n  }\n  /** @internal */\n  maybeTrackPerformance(name) {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_24__.debugFlags.measurePerformance.get()) {\n      if (this.performanceTracker.isStarted()) {\n        clearTimeout(this.performanceTrackerTimeout);\n      } else {\n        this.performanceTracker.start(name);\n      }\n      this.performanceTrackerTimeout = this.timers.setTimeout(() => {\n        this.performanceTracker.stop();\n      }, 50);\n    }\n  }\n}\n_init = __decoratorStart(_a);\n__decorateElement(_init, 1, \"getIsShapeHiddenCache\", _getIsShapeHiddenCache_dec, Editor);\n__decorateElement(_init, 1, \"getCanUndo\", _getCanUndo_dec, Editor);\n__decorateElement(_init, 1, \"getCanRedo\", _getCanRedo_dec, Editor);\n__decorateElement(_init, 1, \"getPath\", _getPath_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentTool\", _getCurrentTool_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentToolId\", _getCurrentToolId_dec, Editor);\n__decorateElement(_init, 1, \"getDocumentSettings\", _getDocumentSettings_dec, Editor);\n__decorateElement(_init, 1, \"getInstanceState\", _getInstanceState_dec, Editor);\n__decorateElement(_init, 1, \"getOpenMenus\", _getOpenMenus_dec, Editor);\n__decorateElement(_init, 1, \"getIsMenuOpen\", _getIsMenuOpen_dec, Editor);\n__decorateElement(_init, 1, \"getPageStates\", _getPageStates_dec, Editor);\n__decorateElement(_init, 1, \"_getPageStatesQuery\", __getPageStatesQuery_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageState\", _getCurrentPageState_dec, Editor);\n__decorateElement(_init, 1, \"_getCurrentPageStateId\", __getCurrentPageStateId_dec, Editor);\n__decorateElement(_init, 1, \"getSelectedShapeIds\", _getSelectedShapeIds_dec, Editor);\n__decorateElement(_init, 1, \"getSelectedShapes\", _getSelectedShapes_dec, Editor);\n__decorateElement(_init, 1, \"getOnlySelectedShapeId\", _getOnlySelectedShapeId_dec, Editor);\n__decorateElement(_init, 1, \"getOnlySelectedShape\", _getOnlySelectedShape_dec, Editor);\n__decorateElement(_init, 1, \"getSelectionPageBounds\", _getSelectionPageBounds_dec, Editor);\n__decorateElement(_init, 1, \"getSelectionRotation\", _getSelectionRotation_dec, Editor);\n__decorateElement(_init, 1, \"getSelectionRotatedPageBounds\", _getSelectionRotatedPageBounds_dec, Editor);\n__decorateElement(_init, 1, \"getSelectionRotatedScreenBounds\", _getSelectionRotatedScreenBounds_dec, Editor);\n__decorateElement(_init, 1, \"getFocusedGroupId\", _getFocusedGroupId_dec, Editor);\n__decorateElement(_init, 1, \"getFocusedGroup\", _getFocusedGroup_dec, Editor);\n__decorateElement(_init, 1, \"getEditingShapeId\", _getEditingShapeId_dec, Editor);\n__decorateElement(_init, 1, \"getEditingShape\", _getEditingShape_dec, Editor);\n__decorateElement(_init, 1, \"getHoveredShapeId\", _getHoveredShapeId_dec, Editor);\n__decorateElement(_init, 1, \"getHoveredShape\", _getHoveredShape_dec, Editor);\n__decorateElement(_init, 1, \"getHintingShapeIds\", _getHintingShapeIds_dec, Editor);\n__decorateElement(_init, 1, \"getHintingShape\", _getHintingShape_dec, Editor);\n__decorateElement(_init, 1, \"getErasingShapeIds\", _getErasingShapeIds_dec, Editor);\n__decorateElement(_init, 1, \"getErasingShapes\", _getErasingShapes_dec, Editor);\n__decorateElement(_init, 1, \"_unsafe_getCameraId\", __unsafe_getCameraId_dec, Editor);\n__decorateElement(_init, 1, \"getCamera\", _getCamera_dec, Editor);\n__decorateElement(_init, 1, \"getViewportPageBoundsForFollowing\", _getViewportPageBoundsForFollowing_dec, Editor);\n__decorateElement(_init, 1, \"getCameraForFollowing\", _getCameraForFollowing_dec, Editor);\n__decorateElement(_init, 1, \"getZoomLevel\", _getZoomLevel_dec, Editor);\n__decorateElement(_init, 1, \"getViewportScreenBounds\", _getViewportScreenBounds_dec, Editor);\n__decorateElement(_init, 1, \"getViewportScreenCenter\", _getViewportScreenCenter_dec, Editor);\n__decorateElement(_init, 1, \"getViewportPageBounds\", _getViewportPageBounds_dec, Editor);\n__decorateElement(_init, 1, \"_getCollaboratorsQuery\", __getCollaboratorsQuery_dec, Editor);\n__decorateElement(_init, 1, \"getCollaborators\", _getCollaborators_dec, Editor);\n__decorateElement(_init, 1, \"getCollaboratorsOnCurrentPage\", _getCollaboratorsOnCurrentPage_dec, Editor);\n__decorateElement(_init, 1, \"getRenderingShapes\", _getRenderingShapes_dec, Editor);\n__decorateElement(_init, 1, \"_getAllPagesQuery\", __getAllPagesQuery_dec, Editor);\n__decorateElement(_init, 1, \"getPages\", _getPages_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageId\", _getCurrentPageId_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageShapeIdsSorted\", _getCurrentPageShapeIdsSorted_dec, Editor);\n__decorateElement(_init, 1, \"_getAllAssetsQuery\", __getAllAssetsQuery_dec, Editor);\n__decorateElement(_init, 1, \"_getShapeGeometryCache\", __getShapeGeometryCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapeHandlesCache\", __getShapeHandlesCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapePageTransformCache\", __getShapePageTransformCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapePageBoundsCache\", __getShapePageBoundsCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapeClipPathCache\", __getShapeClipPathCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapeMaskCache\", __getShapeMaskCache_dec, Editor);\n__decorateElement(_init, 1, \"_getShapeMaskedPageBoundsCache\", __getShapeMaskedPageBoundsCache_dec, Editor);\n__decorateElement(_init, 1, \"_notVisibleShapes\", __notVisibleShapes_dec, Editor);\n__decorateElement(_init, 1, \"getCulledShapes\", _getCulledShapes_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageBounds\", _getCurrentPageBounds_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageShapes\", _getCurrentPageShapes_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageShapesSorted\", _getCurrentPageShapesSorted_dec, Editor);\n__decorateElement(_init, 1, \"getCurrentPageRenderingShapesSorted\", _getCurrentPageRenderingShapesSorted_dec, Editor);\n__decorateElement(_init, 1, \"_getBindingsIndexCache\", __getBindingsIndexCache_dec, Editor);\n__decorateElement(_init, 1, \"_getSelectionSharedStyles\", __getSelectionSharedStyles_dec, Editor);\n__decorateElement(_init, 1, \"getSharedStyles\", _getSharedStyles_dec, Editor);\n__decorateElement(_init, 1, \"getSharedOpacity\", _getSharedOpacity_dec, Editor);\n__decorateElement(_init, 1, \"getIsFocused\", _getIsFocused_dec, Editor);\n__decorateElement(_init, 1, \"getIsReadonly\", _getIsReadonly_dec, Editor);\n__decorateElement(_init, 1, \"_setShiftKeyTimeout\", __setShiftKeyTimeout_dec, Editor);\n__decorateElement(_init, 1, \"_setAltKeyTimeout\", __setAltKeyTimeout_dec, Editor);\n__decorateElement(_init, 1, \"_setCtrlKeyTimeout\", __setCtrlKeyTimeout_dec, Editor);\n__decorateElement(_init, 1, \"_setMetaKeyTimeout\", __setMetaKeyTimeout_dec, Editor);\n__decoratorMetadata(_init, Editor);\nfunction alertMaxShapes(editor, pageId = editor.getCurrentPageId()) {\n  const name = editor.getPage(pageId).name;\n  editor.emit(\"max-shapes\", { name, pageId, count: editor.options.maxShapesPerPage });\n}\nfunction applyPartialToRecordWithProps(prev, partial) {\n  if (!partial) return prev;\n  let next = null;\n  const entries = Object.entries(partial);\n  for (let i = 0, n = entries.length; i < n; i++) {\n    const [k, v] = entries[i];\n    if (v === void 0) continue;\n    if (k === \"id\" || k === \"type\" || k === \"typeName\") continue;\n    if (v === prev[k]) continue;\n    if (!next) next = { ...prev };\n    if (k === \"props\" || k === \"meta\") {\n      next[k] = { ...prev[k] };\n      for (const [nextKey, nextValue] of Object.entries(v)) {\n        if (nextValue !== void 0) {\n          ;\n          next[k][nextKey] = nextValue;\n        }\n      }\n      continue;\n    }\n    ;\n    next[k] = v;\n  }\n  if (!next) return prev;\n  return next;\n}\nfunction pushShapeWithDescendants(editor, id, result) {\n  const shape = editor.getShape(id);\n  if (!shape) return;\n  result.push(shape);\n  const childIds = editor.getSortedChildIdsForParent(id);\n  for (let i = 0, n = childIds.length; i < n; i++) {\n    pushShapeWithDescendants(editor, childIds[i], result);\n  }\n}\nfunction withIsolatedShapes(editor, shapeIds, callback) {\n  let result;\n  editor.run(\n    () => {\n      const changes = editor.store.extractingChanges(() => {\n        const bindingsWithBoth = /* @__PURE__ */ new Set();\n        const bindingsToRemove = /* @__PURE__ */ new Set();\n        for (const shapeId of shapeIds) {\n          const shape = editor.getShape(shapeId);\n          if (!shape) continue;\n          for (const binding of editor.getBindingsInvolvingShape(shapeId)) {\n            const hasFrom = shapeIds.has(binding.fromId);\n            const hasTo = shapeIds.has(binding.toId);\n            if (hasFrom && hasTo) {\n              bindingsWithBoth.add(binding.id);\n              continue;\n            }\n            if (!hasFrom || !hasTo) {\n              bindingsToRemove.add(binding.id);\n            }\n          }\n        }\n        editor.deleteBindings([...bindingsToRemove], { isolateShapes: true });\n        try {\n          result = _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(callback(bindingsWithBoth));\n        } catch (error) {\n          result = _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(error);\n        }\n      });\n      editor.store.applyDiff((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(changes));\n    },\n    { history: \"ignore\" }\n  );\n  if (result.ok) {\n    return result.value;\n  } else {\n    throw result.error;\n  }\n}\nfunction getCameraFitXFitY(editor, cameraOptions) {\n  if (!cameraOptions.constraints) throw Error(\"Should have constraints here\");\n  const {\n    padding: { x: px, y: py }\n  } = cameraOptions.constraints;\n  const vsb = editor.getViewportScreenBounds();\n  const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_15__.Box.From(cameraOptions.constraints.bounds);\n  const zx = (vsb.w - px * 2) / bounds.w;\n  const zy = (vsb.h - py * 2) / bounds.h;\n  return { zx, zy };\n}\n\n//# sourceMappingURL=Editor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9FZGl0b3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx3SkFBd0o7QUFDek47QUFDQTtBQUNBLGtFQUFrRSxPQUFPO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBIQUEwSDtBQUMxSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLCtDQUErQztBQUMvQztBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsK0JBQStCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3FHO0FBRzlFO0FBYUc7QUEyQkg7QUFDa0I7QUFJRDtBQUNrQjtBQUNJO0FBQ007QUFVMUM7QUFDK0I7QUFDTjtBQUNKO0FBQ0Y7QUFDUztBQUNWO0FBQ0E7QUFDQTtBQUNRO0FBQ1M7QUFDUztBQUNtQztBQUMzQztBQUNWO0FBQ0U7QUFJdEI7QUFDcUM7QUFDbEI7QUFDcUI7QUFDbUI7QUFDM0I7QUFDTTtBQUNFO0FBQ2M7QUFDM0I7QUFDVTtBQUNWO0FBQ0k7QUFDRTtBQUNJO0FBQ1o7QUFDQTtBQUNzQjtBQUM3QjtBQUNsRCwyQkFBMkIsMENBQVksZ0NBQWdDLG1EQUFRLHNCQUFzQixtREFBUSxzQkFBc0IsbURBQVEsbUJBQW1CLG1EQUFRLDBCQUEwQixtREFBUSw0QkFBNEIsbURBQVEsK0JBQStCLG1EQUFRLDRCQUE0QixtREFBUSx3QkFBd0IsbURBQVEseUJBQXlCLG1EQUFRLHlCQUF5QixtREFBUSwrQkFBK0IsbURBQVEsK0JBQStCLG1EQUFRLGtDQUFrQyxtREFBUSwrQkFBK0IsbURBQVEsNkJBQTZCLG1EQUFRLGtDQUFrQyxtREFBUSxnQ0FBZ0MsbURBQVEsa0NBQWtDLG1EQUFRLGdDQUFnQyxtREFBUSx5Q0FBeUMsbURBQVEsMkNBQTJDLG1EQUFRLDZCQUE2QixtREFBUSwyQkFBMkIsbURBQVEsNkJBQTZCLG1EQUFRLDJCQUEyQixtREFBUSw2QkFBNkIsbURBQVEsMkJBQTJCLG1EQUFRLDhCQUE4QixtREFBUSwyQkFBMkIsbURBQVEsOEJBQThCLG1EQUFRLDRCQUE0QixtREFBUSwrQkFBK0IsbURBQVEscUJBQXFCLG1EQUFRLDZDQUE2QyxtREFBUSxpQ0FBaUMsbURBQVEsd0JBQXdCLG1EQUFRLG1DQUFtQyxtREFBUSxtQ0FBbUMsbURBQVEsaUNBQWlDLG1EQUFRLGtDQUFrQyxtREFBUSw0QkFBNEIsbURBQVEseUNBQXlDLG1EQUFRLDhCQUE4QixtREFBUSw2QkFBNkIsbURBQVEsb0JBQW9CLG1EQUFRLDRCQUE0QixtREFBUSx3Q0FBd0MsbURBQVEsOEJBQThCLG1EQUFRLGtDQUFrQyxtREFBUSxpQ0FBaUMsbURBQVEsdUNBQXVDLG1EQUFRLG9DQUFvQyxtREFBUSxrQ0FBa0MsbURBQVEsOEJBQThCLG1EQUFRLDBDQUEwQyxtREFBUSw2QkFBNkIsbURBQVEsMkJBQTJCLG1EQUFRLGdDQUFnQyxtREFBUSxnQ0FBZ0MsbURBQVEsc0NBQXNDLG1EQUFRLCtDQUErQyxtREFBUSxrQ0FBa0MsbURBQVEscUNBQXFDLG1EQUFRLDJCQUEyQix1REFBUSxHQUFHLGdDQUFnQyw2QkFBNkIsbURBQVEsd0JBQXdCLG1EQUFRLHlCQUF5QixtREFBUSwrQkFBK0IsK0NBQUksNkJBQTZCLCtDQUFJLDhCQUE4QiwrQ0FBSSw4QkFBOEIsK0NBQUk7QUFDenlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHVEQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0RBQU07QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDREQUFLO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLHNDQUFzQztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3REFBTztBQUN4QywwQ0FBMEMsbURBQUksbUJBQW1CLGtFQUFzQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxtREFBSTtBQUN4RDtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQSx3Q0FBd0MsbURBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscURBQUc7QUFDOUI7QUFDQSw2QkFBNkIscURBQUc7QUFDaEM7QUFDQSw2QkFBNkIscURBQUc7QUFDaEM7QUFDQSwrQkFBK0IscURBQUc7QUFDbEM7QUFDQSw0QkFBNEIscURBQUc7QUFDL0I7QUFDQSw4QkFBOEIscURBQUc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFEQUFHO0FBQzlCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHFFQUFZO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsR0FBRywrREFBb0I7QUFDNUM7QUFDQTtBQUNBLHVCQUF1Qix5RUFBYztBQUNyQztBQUNBO0FBQ0Esb0NBQW9DLDZDQUE2QztBQUNqRjtBQUNBO0FBQ0EsS0FBSztBQUNMLHFCQUFxQiwrRUFBVztBQUNoQztBQUNBLDhCQUE4QixHQUFHLGtFQUFzQixvQkFBb0I7QUFDM0Usb0JBQW9CLHlGQUFzQixTQUFTLHNFQUFZO0FBQy9EO0FBQ0EsMkJBQTJCLG1FQUFXO0FBQ3RDLDRCQUE0QixtRUFBVztBQUN2QywwQkFBMEIsNERBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0ZBQXFCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5RUFBdUIsaUJBQWlCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsNkNBQTZDLFNBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBFQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2REFBYztBQUN4QixvREFBb0QsUUFBUTtBQUM1RDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkVBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsMERBQVE7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMkRBQVM7QUFDakQ7QUFDQTtBQUNBLGdFQUFnRSwyREFBUztBQUN6RTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxrQ0FBa0MsMkRBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhCQUE4QjtBQUM5RSxpREFBaUQsZ0JBQWdCO0FBQ2pFLGdCQUFnQjtBQUNoQixrREFBa0QsOEJBQThCO0FBQ2hGLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFPO0FBQ25DO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUVBQXlFLFNBQVM7QUFDbEY7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsMkRBQTJELFNBQVM7QUFDcEUsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGdFQUFnRSw2QkFBNkI7QUFDN0YsV0FBVztBQUNYO0FBQ0EsNERBQTRELFNBQVM7QUFDckUsV0FBVztBQUNYO0FBQ0EsMkRBQTJELFNBQVM7QUFDcEU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLDhEQUFnQjtBQUM3QyxpQ0FBaUMseUVBQTJCO0FBQzVEO0FBQ0EsOEJBQThCLDhEQUFnQixVQUFVLGNBQWM7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlFQUEyQixVQUFVLHFDQUFxQztBQUMxRjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHlEQUF5RDtBQUMzRixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhEQUFnQjtBQUM3Qyx5Q0FBeUMseUVBQTJCO0FBQ3BFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyREFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxnQ0FBZ0Msb0dBQTJCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzRkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQSxzREFBc0QsYUFBYTtBQUNuRTtBQUNBO0FBQ0EsaUNBQWlDLCtFQUFpQjtBQUNsRCw0QkFBNEIscUVBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsa0NBQWtDLDZEQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9EQUFLO0FBQ2IsNEJBQTRCLG1FQUFtRTtBQUMvRixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFjO0FBQ3BDLElBQUkscURBQU0sNkNBQTZDLEtBQUs7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkRBQWM7QUFDdEMsSUFBSSxxREFBTSxpREFBaUQsS0FBSztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUNBQXVDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdURBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixlQUFlLElBQUksdURBQVEsR0FBRztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DLE1BQU0sSUFBSSxtQkFBbUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DO0FBQ0EsTUFBTSxJQUFJLHVCQUF1QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsSUFBSSw0REFBYTtBQUNqQixjQUFjLHFDQUFxQztBQUNuRCxnQkFBZ0I7QUFDaEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsa0JBQWtCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJEQUFhO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBNEM7QUFDdEUsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzQ0FBc0M7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0JBQXdCLElBQUksbUJBQW1CO0FBQ3JGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsVUFBVSxnREFBZ0Q7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBDQUEwQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQixXQUFXLHNEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5Q0FBeUM7QUFDekQ7QUFDQTtBQUNBLDBCQUEwQixzREFBc0Q7QUFDaEYsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFPO0FBQzFCO0FBQ0EsV0FBVyxxREFBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscURBQUc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQSxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsSUFBSTtBQUNqRTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsWUFBWTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsMEJBQTBCO0FBQzdGLE9BQU87QUFDUCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG9CQUFvQjtBQUNqRSxhQUFhO0FBQ2IsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzQkFBc0I7QUFDL0QsU0FBUztBQUNULFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLG9CQUFvQjtBQUMxRCxPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpQkFBaUIscURBQU0sT0FBTztBQUNyRSxPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnQkFBZ0I7QUFDMUM7QUFDQSw2Q0FBNkMsc0JBQXNCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVix5Q0FBeUMsc0JBQXNCO0FBQy9EO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHVCQUF1QjtBQUNqRSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHFCQUFxQjtBQUNqRTtBQUNBO0FBQ0EsU0FBUztBQUNULFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQixZQUFZLHNCQUFzQjtBQUNsQyw4QkFBOEIscURBQUc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9FQUFxQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvRUFBcUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOERBQWU7QUFDaEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw0QkFBNEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1EQUFJO0FBQzFCO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0EsdUJBQXVCLHFEQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBLGNBQWMsNkRBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZEQUFLO0FBQ25DLHVCQUF1Qiw2REFBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZEQUFLO0FBQ25DLHVCQUF1Qiw2REFBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDLGNBQWMsNkRBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVEQUFRO0FBQ1osdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxVQUFVO0FBQ1Y7QUFDQSxjQUFjLHVDQUF1QztBQUNyRCxjQUFjLGVBQWUscUNBQXFDLDJEQUFhO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxREFBRztBQUNwQixxQkFBcUIsZ0VBQW9CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsV0FBVztBQUNuQyx3QkFBd0IsbUJBQW1CO0FBQzNDLHdCQUF3QixtQkFBbUIsSUFBSSxhQUFhLHdDQUF3QztBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscURBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0EsWUFBWSxxREFBRztBQUNmO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQkFBZ0I7QUFDNUMsNEJBQTRCLGdCQUFnQixJQUFJLGFBQWEsaUJBQWlCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQyx1QkFBdUIscURBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixhQUFhLGlCQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscURBQUcsUUFBUSxzREFBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsYUFBYSxpQkFBaUI7QUFDeEYsMERBQTBELGFBQWEsaUJBQWlCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEMsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFEQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsYUFBYSxpQkFBaUI7QUFDckYsdURBQXVELGFBQWEsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQSxZQUFZLHNCQUFzQjtBQUNsQyxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBLGlCQUFpQixtREFBSTtBQUNyQixzQkFBc0Isc0JBQXNCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxhQUFhLGlCQUFpQjtBQUN0Rix3REFBd0QsYUFBYSxpQkFBaUI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSx5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUc7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsYUFBYSxpQkFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxhQUFhLGlCQUFpQjtBQUNuRSxxQ0FBcUMsYUFBYSxlQUFlLDJCQUEyQjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLCtEQUFtQjtBQUM3RDtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFJO0FBQ3hCLGVBQWUsNkRBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrREFBa0QsV0FBVyxxRUFBeUIsRUFBRTtBQUN4RixZQUFZLHFCQUFxQjtBQUNqQztBQUNBLFlBQVksdUJBQXVCLDZEQUFPLGtCQUFrQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVCQUF1QixZQUFZLGlCQUFpQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQywwQkFBMEIscURBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLDRCQUE0QixxREFBRztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGFBQWEsaUJBQWlCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixhQUFhLGlCQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQkFBcUI7QUFDbkMsaUNBQWlDLHFEQUFxRDtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlDQUF5QztBQUM1RSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscURBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8scUVBQWE7QUFDcEI7QUFDQSxPQUFPLHFFQUFhO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsWUFBWSxxREFBcUQ7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkNBQTZDO0FBQzlFO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxtQ0FBbUMsNkNBQTZDO0FBQ2hGO0FBQ0EsUUFBUTtBQUNSLG1DQUFtQyw2Q0FBNkM7QUFDaEYsd0JBQXdCLHFEQUFHLFFBQVEscUJBQXFCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGVBQWUscURBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQixZQUFZLHNCQUFzQjtBQUNsQyxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnQkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWUscUNBQXFDLDJEQUFhO0FBQzdFLFlBQVksMEJBQTBCO0FBQ3RDLGVBQWUscURBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlLHFDQUFxQywyREFBYTtBQUM3RSxZQUFZLDBCQUEwQjtBQUN0QyxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCO0FBQ3RDLGVBQWUscURBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsc0RBQVc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdURBQVE7QUFDekM7QUFDQSxLQUFLO0FBQ0wsSUFBSSx1REFBUTtBQUNaLGlDQUFpQyx5QkFBeUIsSUFBSSxtQkFBbUI7QUFDakYsc0JBQXNCLG9EQUFLO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLGNBQWM7QUFDZDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBSztBQUN2QixpQ0FBaUMscURBQUc7QUFDcEMsVUFBVSxtREFBSTtBQUNkLFVBQVUsbURBQUk7QUFDZCxVQUFVLG1EQUFJO0FBQ2QsVUFBVSxtREFBSTtBQUNkO0FBQ0EsK0JBQStCLHFEQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHVCQUF1QjtBQUMxRDtBQUNBLE9BQU87QUFDUCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtREFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHNEQUFXO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFlBQVksY0FBYztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtREFBbUQ7QUFDN0U7QUFDQSxPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZCQUE2QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxxQkFBcUI7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0JBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0ZBQWtCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQWE7QUFDN0I7QUFDQSxzQkFBc0IsNERBQWM7QUFDcEMsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0REFBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQWU7QUFDbkMsd0JBQXdCLHFEQUFxRDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixVQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG1CQUFtQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnQ0FBZ0M7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxtQkFBbUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtREFBbUQ7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RkFBeUY7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBRztBQUNkO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMERBQVE7QUFDbEI7QUFDQTtBQUNBLHdGQUF3RixxREFBRztBQUMzRixhQUFhLHFEQUFHO0FBQ2hCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwREFBUSw4QkFBOEIscURBQUc7QUFDaEUsMEVBQTBFLHFEQUFHO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHFEQUFHO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHFEQUFHO0FBQ3hDLHFCQUFxQixxREFBRztBQUN4QixRQUFRLHFEQUFHO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHLGVBQWUscURBQUc7QUFDN0Msd0JBQXdCLHdCQUF3QixJQUFJLEtBQUssSUFBSSxlQUFlO0FBQzVFLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDBEQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUZBQXVCO0FBQ3BEO0FBQ0Esa0NBQWtDLHFEQUFHO0FBQ3JDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixVQUFVO0FBQzFCLHlDQUF5QyxxREFBRztBQUM1Qyw2QkFBNkIsbUZBQXVCO0FBQ3BEO0FBQ0EsZUFBZSxxREFBRztBQUNsQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwREFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQU87QUFDL0I7QUFDQTtBQUNBLFVBQVUsMERBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9GQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0TEFBNEwsNEJBQTRCO0FBQ3hOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzRUFBYztBQUNyQztBQUNBO0FBQ0EsS0FBSztBQUNMLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQSwwQ0FBMEMsc0VBQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnQkFBZ0I7QUFDL0MsK0JBQStCLGdCQUFnQixJQUFJLDhCQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnQkFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxZQUFZLGdDQUFnQztBQUM1QztBQUNBO0FBQ0EscUJBQXFCLHNFQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCLHNCQUFzQixnQkFBZ0I7QUFDdEYsUUFBUSxjQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxnQkFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFEQUFHO0FBQ25DLFFBQVEsMERBQVEsOEJBQThCLHFEQUFHO0FBQ2pEO0FBQ0EsaUNBQWlDLHFEQUFHO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkRBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyREFBUztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFRO0FBQ2hCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwREFBUSxhQUFhLHFEQUFHO0FBQ3BEO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBaUI7QUFDckMsVUFBVTtBQUNWLG9CQUFvQiw4REFBZTtBQUNuQztBQUNBLFFBQVE7QUFDUixtQ0FBbUMsc0RBQVc7QUFDOUM7QUFDQSxvQkFBb0IsZ0VBQWlCO0FBQ3JDLFVBQVU7QUFDVixvQkFBb0IsOERBQWU7QUFDbkM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHNCQUFzQiw4REFBZSwwQkFBMEIseURBQVU7QUFDekU7QUFDQTtBQUNBLDZCQUE2QixzREFBTztBQUNwQztBQUNBO0FBQ0Esd0JBQXdCLDZCQUE2QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDREQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usc0RBQVc7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhFQUFhO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHNEQUFXO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNDQUFzQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2Q0FBNkM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCLElBQUk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsb0RBQW9EO0FBQ2hHLDBDQUEwQyxzREFBc0Q7QUFDaEc7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUVBQW1CLEdBQUcsbUJBQW1CO0FBQzlEO0FBQ0EsSUFBSSxtRkFBNkI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxZQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscURBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFlBQVk7QUFDNUQsMERBQTBELFlBQVk7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQWE7QUFDM0M7QUFDQSxjQUFjLGdEQUFnRDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpRUFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQVk7QUFDbEMsb0JBQW9CLDJEQUFZO0FBQ2hDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkRBQVk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFEQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsNkNBQTZDLHNCQUFzQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFlO0FBQ3JDO0FBQ0EsT0FBTztBQUNQLGdFQUFnRSxPQUFPO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFPO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsV0FBVztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsbUNBQW1DO0FBQzFEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0RBQWdEO0FBQzNGO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSwyQ0FBMkMsaURBQWlEO0FBQzVGO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsMkNBQTJDLGdEQUFnRDtBQUMzRjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUZBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxRkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFGQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUZBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQU87QUFDOUI7QUFDQSxtQkFBbUIsc0RBQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDRCQUE0QixxREFBRztBQUMvQixNQUFNLHNEQUFPO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOEVBQThFO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysc0JBQXNCLHFCQUFxQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGtDQUFrQyxxREFBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFHLFFBQVEsc0RBQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0EsdUNBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGdCQUFnQixxREFBRztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQUc7QUFDM0Isd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBTztBQUNqQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscURBQUcsUUFBUSxzREFBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MscURBQUc7QUFDckMsMERBQTBELHFEQUFHO0FBQzdELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixzREFBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0Esa0NBQWtDLHFEQUFHO0FBQ3JDLDBEQUEwRCxxREFBRztBQUM3RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFPO0FBQ25DO0FBQ0E7QUFDQSx5QkFBeUIscURBQUcsUUFBUSxzREFBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFHO0FBQ2xDO0FBQ0E7QUFDQSxvQ0FBb0MscURBQUc7QUFDdkM7QUFDQTtBQUNBLG9CQUFvQixPQUFPLEVBQUUscURBQUc7QUFDaEMsaUNBQWlDLHNDQUFzQztBQUN2RSw4QkFBOEIscURBQUc7QUFDakM7QUFDQTtBQUNBLCtCQUErQixxREFBRztBQUNsQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQUc7QUFDbEMsb0NBQW9DLHFEQUFHO0FBQ3ZDO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTyxFQUFFLHFEQUFHO0FBQ2hDLGlDQUFpQyxzQ0FBc0M7QUFDdkUsOEJBQThCLHFEQUFHO0FBQ2pDO0FBQ0E7QUFDQSwrQkFBK0IscURBQUc7QUFDbEM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSwrQ0FBK0MscURBQUc7QUFDbEQsK0NBQStDLHFEQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHFEQUFHO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywyRUFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBRztBQUN2QixRQUFRO0FBQ1Isb0JBQW9CLHFEQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBRyxpQ0FBaUMscURBQUc7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBRztBQUM3QixzREFBc0QscUVBQWE7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBRyxpQ0FBaUMscURBQUc7QUFDdEUsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1QkFBdUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixnQ0FBZ0MscURBQUc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBRztBQUM3QixpQ0FBaUMscURBQUc7QUFDcEMsd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLDJCQUEyQixxREFBRztBQUM5QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFlBQVksV0FBVyxFQUFFLHFEQUFHO0FBQzVCO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBLG9DQUFvQyxxREFBRztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHFEQUFHO0FBQ3pCLG9DQUFvQyxxREFBRztBQUN2QyxZQUFZLE9BQU87QUFDbkIseUJBQXlCLGdCQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtQ0FBbUMsY0FBYztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtQ0FBbUMsY0FBYztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLElBQUksK0RBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELFFBQVE7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQ0FBc0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLGdCQUFnQiwyREFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw0REFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG9DQUFvQztBQUM1RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5Q0FBeUM7QUFDcEUsMkJBQTJCLHlDQUF5QyxJQUFJLGFBQWEsaUNBQWlDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFdBQVcscUVBQXlCLEVBQUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUNBQXlDO0FBQ3RFLDZCQUE2Qix5Q0FBeUMsS0FBSyxhQUFhLGlDQUFpQztBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxXQUFXLHFFQUF5QixFQUFFO0FBQ3pFO0FBQ0EsWUFBWSx5QkFBeUIsNkRBQU8sVUFBVTtBQUN0RCx3QkFBd0IsdURBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBZTtBQUM5QiwyQ0FBMkMsOERBQWU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0NBQW9DO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEM7QUFDQTtBQUNBLDZDQUE2QyxPQUFPO0FBQ3BELGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsWUFBWSxVQUFVLCtEQUFhLG9CQUFvQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsc0RBQVc7QUFDekQsdUJBQXVCLHFEQUFHLFFBQVEsc0RBQU87QUFDekMsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsc0RBQVc7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QjtBQUNBLDRCQUE0QixzREFBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0NBQWtDLGtCQUFrQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0NBQWtDLGtCQUFrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLE9BQU87QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHlDQUF5Qyw2REFBYztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVFQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZEQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1RUFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOEJBQThCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0NBQWtDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGlCQUFpQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzQkFBc0IsNENBQTRDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaUNBQWlDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsZUFBZTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBCQUEwQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0NBQXNDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELDRCQUE0QjtBQUN6Riw2REFBNkQseUJBQXlCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsOERBQWU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLDZDQUE2QyxzREFBVztBQUN4RCxrQkFBa0Isb0RBQUs7QUFDdkI7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQWdFO0FBQzVFLFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsK0RBQWE7QUFDaEg7QUFDQTtBQUNBLGlIQUFpSCxpRUFBZTtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esb0NBQW9DLHdCQUF3QixNQUFNLGlCQUFpQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDBCQUEwQiw0QkFBNEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsZ0JBQWdCLDREQUFhO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJEQUFZO0FBQ3hCLGdCQUFnQiwyREFBWTtBQUM1QixjQUFjLDJEQUFZO0FBQzFCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhEQUFlO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpRUFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJCQUEyQjtBQUN4RCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxREFBRztBQUN4QjtBQUNBLGFBQWEsMERBQVE7QUFDckI7QUFDQSxrQkFBa0IscURBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsOERBQThELHFEQUFHO0FBQ2pFO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscURBQUc7QUFDNUIsUUFBUSxzREFBTyxtQkFBbUIsSUFBSTtBQUN0QztBQUNBLHFCQUFxQixxREFBRztBQUN4QjtBQUNBLDBCQUEwQixJQUFJO0FBQzlCO0FBQ0E7QUFDQSw2QkFBNkIscURBQUc7QUFDaEMsbUJBQW1CO0FBQ25CLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBLFdBQVcsc0VBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkJBQTJCLElBQUksNEJBQTRCO0FBQ2xGLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixZQUFZLGVBQWUscUNBQXFDLDJEQUFhO0FBQzdFLFlBQVksc0JBQXNCLEVBQUUscUVBQXNCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwREFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JELDZEQUE2RCxnRUFBb0Isa0RBQWtELDBEQUFZO0FBQy9JO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4QkFBOEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUNBQWlDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdDQUFnQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1QkFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdCQUF3QixJQUFJO0FBQ3RDO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVCQUF1QixJQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUVBQVc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMEVBQVk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpREFBaUQ7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSwyQkFBMkIscURBQUc7QUFDOUIsd0NBQXdDLGlEQUFpRDtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDJCQUEyQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9FQUFxQjtBQUMvQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNkJBQTZCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBFQUFtQjtBQUNsRCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixZQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMkVBQW9CO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCx1Q0FBdUM7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrQkFBa0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxZQUFZO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asb0NBQW9DO0FBQ3BDLEtBQUs7QUFDTCwyQkFBMkIsdURBQVE7QUFDbkMscUJBQXFCLG9EQUFLO0FBQzFCO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFVO0FBQzFCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQVU7QUFDMUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnRUFBVTtBQUMxQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFVO0FBQzFCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxQ0FBcUM7QUFDckU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixxQ0FBcUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxZQUFZLG9DQUFvQztBQUNoRDtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsMkRBQWE7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCO0FBQ3ZCLGNBQWM7QUFDZCxvQkFBb0IsT0FBTyxFQUFFLHFEQUFHO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCLEVBQUUscUVBQXNCO0FBQ2xFLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQSxrQkFBa0IscURBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFtRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysa0JBQWtCLHFDQUFxQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQixFQUFFLHFFQUFzQjtBQUNsRSxvQkFBb0IsMEJBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHFEQUFHO0FBQ3ZDO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZUFBZTtBQUNmO0FBQ0E7QUFDQSxnQ0FBZ0MsNkRBQWlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxpQkFBaUI7QUFDakYsZ0NBQWdDLGdFQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxjQUFjLHlCQUF5QiwrREFBbUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwrQkFBK0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQixFQUFFLHFFQUFzQjtBQUNsRTtBQUNBLHNCQUFzQiwwQ0FBMEM7QUFDaEUsc0JBQXNCLFdBQVc7QUFDakMsNkJBQTZCLHFEQUFHO0FBQ2hDO0FBQ0Esb0JBQW9CLHFEQUFHO0FBQ3ZCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxxREFBRztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQWlCO0FBQ3RDLG1DQUFtQywyQkFBMkI7QUFDOUQ7QUFDQTtBQUNBLHFCQUFxQiwrREFBbUI7QUFDeEM7QUFDQSxxQ0FBcUMsMkJBQTJCO0FBQ2hFLG9CQUFvQjtBQUNwQixxQ0FBcUMscUNBQXFDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDhDQUE4QztBQUNqRjtBQUNBLGNBQWM7QUFDZCxrQ0FBa0MsZ0VBQW9CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpRUFBaUU7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBRztBQUNsQztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscURBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHFEQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBRztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLDBCQUEwQjtBQUM5RixnREFBZ0QsYUFBYSxpQkFBaUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsK0RBQW1CO0FBQzdELGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsaUNBQWlDLHFDQUFxQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsK0RBQW1CO0FBQzdDO0FBQ0EsUUFBUSx5QkFBeUIsOERBQWtCO0FBQ25EO0FBQ0E7QUFDQSxjQUFjLFlBQVkscUNBQXFDLDJEQUFhO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFVO0FBQ2xCO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQXNEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELHFCQUFxQjtBQUM1RTtBQUNBLG1CQUFtQixpREFBTTtBQUN6QixVQUFVO0FBQ1YsbUJBQW1CLGlEQUFNO0FBQ3pCO0FBQ0EsT0FBTztBQUNQLDZCQUE2QixpRUFBa0I7QUFDL0MsS0FBSztBQUNMLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLElBQUk7QUFDSjtBQUNBLGlCQUFpQixxREFBRztBQUNwQjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvRWRpdG9yLm1qcz8zYzVkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fa25vd25TeW1ib2wgPSAobmFtZSwgc3ltYm9sKSA9PiAoc3ltYm9sID0gU3ltYm9sW25hbWVdKSA/IHN5bWJvbCA6IFN5bWJvbC5mb3IoXCJTeW1ib2wuXCIgKyBuYW1lKTtcbnZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHtcbiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG59O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xudmFyIF9fZGVjb3JhdG9yU3RhcnQgPSAoYmFzZSkgPT4gWywgLCAsIF9fY3JlYXRlKGJhc2U/LltfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIildID8/IG51bGwpXTtcbnZhciBfX2RlY29yYXRvclN0cmluZ3MgPSBbXCJjbGFzc1wiLCBcIm1ldGhvZFwiLCBcImdldHRlclwiLCBcInNldHRlclwiLCBcImFjY2Vzc29yXCIsIFwiZmllbGRcIiwgXCJ2YWx1ZVwiLCBcImdldFwiLCBcInNldFwiXTtcbnZhciBfX2V4cGVjdEZuID0gKGZuKSA9PiBmbiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiID8gX190eXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKSA6IGZuO1xudmFyIF9fZGVjb3JhdG9yQ29udGV4dCA9IChraW5kLCBuYW1lLCBkb25lLCBtZXRhZGF0YSwgZm5zKSA9PiAoeyBraW5kOiBfX2RlY29yYXRvclN0cmluZ3Nba2luZF0sIG5hbWUsIG1ldGFkYXRhLCBhZGRJbml0aWFsaXplcjogKGZuKSA9PiBkb25lLl8gPyBfX3R5cGVFcnJvcihcIkFscmVhZHkgaW5pdGlhbGl6ZWRcIikgOiBmbnMucHVzaChfX2V4cGVjdEZuKGZuIHx8IG51bGwpKSB9KTtcbnZhciBfX2RlY29yYXRvck1ldGFkYXRhID0gKGFycmF5LCB0YXJnZXQpID0+IF9fZGVmTm9ybWFsUHJvcCh0YXJnZXQsIF9fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKSwgYXJyYXlbM10pO1xudmFyIF9fcnVuSW5pdGlhbGl6ZXJzID0gKGFycmF5LCBmbGFncywgc2VsZiwgdmFsdWUpID0+IHtcbiAgZm9yICh2YXIgaSA9IDAsIGZucyA9IGFycmF5W2ZsYWdzID4+IDFdLCBuID0gZm5zICYmIGZucy5sZW5ndGg7IGkgPCBuOyBpKyspIGZsYWdzICYgMSA/IGZuc1tpXS5jYWxsKHNlbGYpIDogdmFsdWUgPSBmbnNbaV0uY2FsbChzZWxmLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX19kZWNvcmF0ZUVsZW1lbnQgPSAoYXJyYXksIGZsYWdzLCBuYW1lLCBkZWNvcmF0b3JzLCB0YXJnZXQsIGV4dHJhKSA9PiB7XG4gIHZhciBmbiwgaXQsIGRvbmUsIGN0eCwgYWNjZXNzLCBrID0gZmxhZ3MgJiA3LCBzID0gISEoZmxhZ3MgJiA4KSwgcCA9ICEhKGZsYWdzICYgMTYpO1xuICB2YXIgaiA9IGsgPiAzID8gYXJyYXkubGVuZ3RoICsgMSA6IGsgPyBzID8gMSA6IDIgOiAwLCBrZXkgPSBfX2RlY29yYXRvclN0cmluZ3NbayArIDVdO1xuICB2YXIgaW5pdGlhbGl6ZXJzID0gayA+IDMgJiYgKGFycmF5W2ogLSAxXSA9IFtdKSwgZXh0cmFJbml0aWFsaXplcnMgPSBhcnJheVtqXSB8fCAoYXJyYXlbal0gPSBbXSk7XG4gIHZhciBkZXNjID0gayAmJiAoIXAgJiYgIXMgJiYgKHRhcmdldCA9IHRhcmdldC5wcm90b3R5cGUpLCBrIDwgNSAmJiAoayA+IDMgfHwgIXApICYmIF9fZ2V0T3duUHJvcERlc2MoayA8IDQgPyB0YXJnZXQgOiB7IGdldCBbbmFtZV0oKSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBleHRyYSk7XG4gIH0sIHNldCBbbmFtZV0oeCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVTZXQodGhpcywgZXh0cmEsIHgpO1xuICB9IH0sIG5hbWUpKTtcbiAgayA/IHAgJiYgayA8IDQgJiYgX19uYW1lKGV4dHJhLCAoayA+IDIgPyBcInNldCBcIiA6IGsgPiAxID8gXCJnZXQgXCIgOiBcIlwiKSArIG5hbWUpIDogX19uYW1lKHRhcmdldCwgbmFtZSk7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY3R4ID0gX19kZWNvcmF0b3JDb250ZXh0KGssIG5hbWUsIGRvbmUgPSB7fSwgYXJyYXlbM10sIGV4dHJhSW5pdGlhbGl6ZXJzKTtcbiAgICBpZiAoaykge1xuICAgICAgY3R4LnN0YXRpYyA9IHMsIGN0eC5wcml2YXRlID0gcCwgYWNjZXNzID0gY3R4LmFjY2VzcyA9IHsgaGFzOiBwID8gKHgpID0+IF9fcHJpdmF0ZUluKHRhcmdldCwgeCkgOiAoeCkgPT4gbmFtZSBpbiB4IH07XG4gICAgICBpZiAoayBeIDMpIGFjY2Vzcy5nZXQgPSBwID8gKHgpID0+IChrIF4gMSA/IF9fcHJpdmF0ZUdldCA6IF9fcHJpdmF0ZU1ldGhvZCkoeCwgdGFyZ2V0LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5nZXQpIDogKHgpID0+IHhbbmFtZV07XG4gICAgICBpZiAoayA+IDIpIGFjY2Vzcy5zZXQgPSBwID8gKHgsIHkpID0+IF9fcHJpdmF0ZVNldCh4LCB0YXJnZXQsIHksIGsgXiA0ID8gZXh0cmEgOiBkZXNjLnNldCkgOiAoeCwgeSkgPT4geFtuYW1lXSA9IHk7XG4gICAgfVxuICAgIGl0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGsgPyBrIDwgNCA/IHAgPyBleHRyYSA6IGRlc2Nba2V5XSA6IGsgPiA0ID8gdm9pZCAwIDogeyBnZXQ6IGRlc2MuZ2V0LCBzZXQ6IGRlc2Muc2V0IH0gOiB0YXJnZXQsIGN0eCksIGRvbmUuXyA9IDE7XG4gICAgaWYgKGsgXiA0IHx8IGl0ID09PSB2b2lkIDApIF9fZXhwZWN0Rm4oaXQpICYmIChrID4gNCA/IGluaXRpYWxpemVycy51bnNoaWZ0KGl0KSA6IGsgPyBwID8gZXh0cmEgPSBpdCA6IGRlc2Nba2V5XSA9IGl0IDogdGFyZ2V0ID0gaXQpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBpdCAhPT0gXCJvYmplY3RcIiB8fCBpdCA9PT0gbnVsbCkgX190eXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgZWxzZSBfX2V4cGVjdEZuKGZuID0gaXQuZ2V0KSAmJiAoZGVzYy5nZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5zZXQpICYmIChkZXNjLnNldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LmluaXQpICYmIGluaXRpYWxpemVycy51bnNoaWZ0KGZuKTtcbiAgfVxuICByZXR1cm4gayB8fCBfX2RlY29yYXRvck1ldGFkYXRhKGFycmF5LCB0YXJnZXQpLCBkZXNjICYmIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIGRlc2MpLCBwID8gayBeIDQgPyBleHRyYSA6IGRlc2MgOiB0YXJnZXQ7XG59O1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4gbWVtYmVyLmhhcyhvYmopIHx8IF9fdHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbnZhciBfX3ByaXZhdGVJbiA9IChtZW1iZXIsIG9iaikgPT4gT2JqZWN0KG9iaikgIT09IG9iaiA/IF9fdHlwZUVycm9yKCdDYW5ub3QgdXNlIHRoZSBcImluXCIgb3BlcmF0b3Igb24gdGhpcyB2YWx1ZScpIDogbWVtYmVyLmhhcyhvYmopO1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKSwgZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKSk7XG52YXIgX19wcml2YXRlU2V0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpLCBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSksIHZhbHVlKTtcbnZhciBfX3ByaXZhdGVNZXRob2QgPSAob2JqLCBtZW1iZXIsIG1ldGhvZCkgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwiYWNjZXNzIHByaXZhdGUgbWV0aG9kXCIpLCBtZXRob2QpO1xudmFyIF9fc2V0TWV0YUtleVRpbWVvdXRfZGVjLCBfX3NldEN0cmxLZXlUaW1lb3V0X2RlYywgX19zZXRBbHRLZXlUaW1lb3V0X2RlYywgX19zZXRTaGlmdEtleVRpbWVvdXRfZGVjLCBfZ2V0SXNSZWFkb25seV9kZWMsIF9nZXRJc0ZvY3VzZWRfZGVjLCBfZ2V0U2hhcmVkT3BhY2l0eV9kZWMsIF9nZXRTaGFyZWRTdHlsZXNfZGVjLCBfX2dldFNlbGVjdGlvblNoYXJlZFN0eWxlc19kZWMsIF9fZ2V0QmluZGluZ3NJbmRleENhY2hlX2RlYywgX2dldEN1cnJlbnRQYWdlUmVuZGVyaW5nU2hhcGVzU29ydGVkX2RlYywgX2dldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkX2RlYywgX2dldEN1cnJlbnRQYWdlU2hhcGVzX2RlYywgX2dldEN1cnJlbnRQYWdlQm91bmRzX2RlYywgX2dldEN1bGxlZFNoYXBlc19kZWMsIF9fbm90VmlzaWJsZVNoYXBlc19kZWMsIF9fZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzQ2FjaGVfZGVjLCBfX2dldFNoYXBlTWFza0NhY2hlX2RlYywgX19nZXRTaGFwZUNsaXBQYXRoQ2FjaGVfZGVjLCBfX2dldFNoYXBlUGFnZUJvdW5kc0NhY2hlX2RlYywgX19nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZV9kZWMsIF9fZ2V0U2hhcGVIYW5kbGVzQ2FjaGVfZGVjLCBfX2dldFNoYXBlR2VvbWV0cnlDYWNoZV9kZWMsIF9fZ2V0QWxsQXNzZXRzUXVlcnlfZGVjLCBfZ2V0Q3VycmVudFBhZ2VTaGFwZUlkc1NvcnRlZF9kZWMsIF9nZXRDdXJyZW50UGFnZUlkX2RlYywgX2dldFBhZ2VzX2RlYywgX19nZXRBbGxQYWdlc1F1ZXJ5X2RlYywgX2dldFJlbmRlcmluZ1NoYXBlc19kZWMsIF9nZXRDb2xsYWJvcmF0b3JzT25DdXJyZW50UGFnZV9kZWMsIF9nZXRDb2xsYWJvcmF0b3JzX2RlYywgX19nZXRDb2xsYWJvcmF0b3JzUXVlcnlfZGVjLCBfZ2V0Vmlld3BvcnRQYWdlQm91bmRzX2RlYywgX2dldFZpZXdwb3J0U2NyZWVuQ2VudGVyX2RlYywgX2dldFZpZXdwb3J0U2NyZWVuQm91bmRzX2RlYywgX2dldFpvb21MZXZlbF9kZWMsIF9nZXRDYW1lcmFGb3JGb2xsb3dpbmdfZGVjLCBfZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nX2RlYywgX2dldENhbWVyYV9kZWMsIF9fdW5zYWZlX2dldENhbWVyYUlkX2RlYywgX2dldEVyYXNpbmdTaGFwZXNfZGVjLCBfZ2V0RXJhc2luZ1NoYXBlSWRzX2RlYywgX2dldEhpbnRpbmdTaGFwZV9kZWMsIF9nZXRIaW50aW5nU2hhcGVJZHNfZGVjLCBfZ2V0SG92ZXJlZFNoYXBlX2RlYywgX2dldEhvdmVyZWRTaGFwZUlkX2RlYywgX2dldEVkaXRpbmdTaGFwZV9kZWMsIF9nZXRFZGl0aW5nU2hhcGVJZF9kZWMsIF9nZXRGb2N1c2VkR3JvdXBfZGVjLCBfZ2V0Rm9jdXNlZEdyb3VwSWRfZGVjLCBfZ2V0U2VsZWN0aW9uUm90YXRlZFNjcmVlbkJvdW5kc19kZWMsIF9nZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kc19kZWMsIF9nZXRTZWxlY3Rpb25Sb3RhdGlvbl9kZWMsIF9nZXRTZWxlY3Rpb25QYWdlQm91bmRzX2RlYywgX2dldE9ubHlTZWxlY3RlZFNoYXBlX2RlYywgX2dldE9ubHlTZWxlY3RlZFNoYXBlSWRfZGVjLCBfZ2V0U2VsZWN0ZWRTaGFwZXNfZGVjLCBfZ2V0U2VsZWN0ZWRTaGFwZUlkc19kZWMsIF9fZ2V0Q3VycmVudFBhZ2VTdGF0ZUlkX2RlYywgX2dldEN1cnJlbnRQYWdlU3RhdGVfZGVjLCBfX2dldFBhZ2VTdGF0ZXNRdWVyeV9kZWMsIF9nZXRQYWdlU3RhdGVzX2RlYywgX2dldElzTWVudU9wZW5fZGVjLCBfZ2V0T3Blbk1lbnVzX2RlYywgX2dldEluc3RhbmNlU3RhdGVfZGVjLCBfZ2V0RG9jdW1lbnRTZXR0aW5nc19kZWMsIF9nZXRDdXJyZW50VG9vbElkX2RlYywgX2dldEN1cnJlbnRUb29sX2RlYywgX2dldFBhdGhfZGVjLCBfZ2V0Q2FuUmVkb19kZWMsIF9nZXRDYW5VbmRvX2RlYywgX2dldElzU2hhcGVIaWRkZW5DYWNoZV9kZWMsIF9hLCBfaW5pdDtcbmltcG9ydCB7IEVNUFRZX0FSUkFZLCBhdG9tLCBjb21wdXRlZCwgcmVhY3QsIHRyYW5zYWN0LCB1bnNhZmVfX3dpdGhvdXRDYXB0dXJlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7XG4gIHJldmVyc2VSZWNvcmRzRGlmZlxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHtcbiAgQ2FtZXJhUmVjb3JkVHlwZSxcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLFxuICBQYWdlUmVjb3JkVHlwZSxcbiAgVExET0NVTUVOVF9JRCxcbiAgVExJTlNUQU5DRV9JRCxcbiAgVExQT0lOVEVSX0lELFxuICBjcmVhdGVCaW5kaW5nSWQsXG4gIGNyZWF0ZVNoYXBlSWQsXG4gIGdldFNoYXBlUHJvcEtleXNCeVN0eWxlLFxuICBpc1BhZ2VJZCxcbiAgaXNTaGFwZUlkXG59IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQge1xuICBGaWxlSGVscGVycyxcbiAgUGVyZm9ybWFuY2VUcmFja2VyLFxuICBSZXN1bHQsXG4gIGFubm90YXRlRXJyb3IsXG4gIGFzc2VydCxcbiAgYXNzZXJ0RXhpc3RzLFxuICBiaW5kLFxuICBjb21wYWN0LFxuICBkZWJvdW5jZSxcbiAgZGVkdXBlLFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIGZldGNoLFxuICBnZXRJbmRleEFib3ZlLFxuICBnZXRJbmRleEJldHdlZW4sXG4gIGdldEluZGljZXMsXG4gIGdldEluZGljZXNBYm92ZSxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIGdldE93blByb3BlcnR5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgbGFzdCxcbiAgbGVycCxcbiAgc29ydEJ5SWQsXG4gIHNvcnRCeUluZGV4LFxuICBzdHJ1Y3R1cmVkQ2xvbmUsXG4gIHVuaXF1ZUlkXG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCJldmVudGVtaXR0ZXIzXCI7XG5pbXBvcnQge1xuICBnZXRTbmFwc2hvdCxcbiAgbG9hZFNuYXBzaG90XG59IGZyb20gXCIuLi9jb25maWcvVExFZGl0b3JTbmFwc2hvdC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVRMVXNlciB9IGZyb20gXCIuLi9jb25maWcvY3JlYXRlVExVc2VyLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tCaW5kaW5ncyB9IGZyb20gXCIuLi9jb25maWcvZGVmYXVsdEJpbmRpbmdzLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tTaGFwZXNBbmRBZGRDb3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qc1wiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyxcbiAgREVGQVVMVF9DQU1FUkFfT1BUSU9OUyxcbiAgSU5URVJOQUxfUE9JTlRFUl9JRFMsXG4gIExFRlRfTU9VU0VfQlVUVE9OLFxuICBNSURETEVfTU9VU0VfQlVUVE9OLFxuICBSSUdIVF9NT1VTRV9CVVRUT04sXG4gIFNUWUxVU19FUkFTRVJfQlVUVE9OLFxuICBaT09NX1RPX0ZJVF9QQURESU5HXG59IGZyb20gXCIuLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBleHBvcnRUb1N2ZyB9IGZyb20gXCIuLi9leHBvcnRzL2V4cG9ydFRvU3ZnLm1qc1wiO1xuaW1wb3J0IHsgdGxlbnYgfSBmcm9tIFwiLi4vZ2xvYmFscy9lbnZpcm9ubWVudC5tanNcIjtcbmltcG9ydCB7IHRsbWVudXMgfSBmcm9tIFwiLi4vZ2xvYmFscy9tZW51cy5tanNcIjtcbmltcG9ydCB7IHRsdGltZSB9IGZyb20gXCIuLi9nbG9iYWxzL3RpbWUubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0VGxkcmF3T3B0aW9ucyB9IGZyb20gXCIuLi9vcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvQm94Lm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgRUFTSU5HUyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL2Vhc2luZ3MubWpzXCI7XG5pbXBvcnQgeyBHcm91cDJkIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanNcIjtcbmltcG9ydCB7IGludGVyc2VjdFBvbHlnb25Qb2x5Z29uIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvaW50ZXJzZWN0Lm1qc1wiO1xuaW1wb3J0IHsgUEkyLCBhcHByb3hpbWF0ZWx5LCBhcmVBbmdsZXNDb21wYXRpYmxlLCBjbGFtcCwgcG9pbnRJblBvbHlnb24gfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmltcG9ydCB7IFNoYXJlZFN0eWxlTWFwIH0gZnJvbSBcIi4uL3V0aWxzL1NoYXJlZFN0eWxlc01hcC5tanNcIjtcbmltcG9ydCB7IGRhdGFVcmxUb0ZpbGUgfSBmcm9tIFwiLi4vdXRpbHMvYXNzZXRzLm1qc1wiO1xuaW1wb3J0IHsgZGVidWdGbGFncyB9IGZyb20gXCIuLi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZURlZXBMaW5rU3RyaW5nLFxuICBwYXJzZURlZXBMaW5rU3RyaW5nXG59IGZyb20gXCIuLi91dGlscy9kZWVwTGlua3MubWpzXCI7XG5pbXBvcnQgeyBnZXRJbmNyZW1lbnRlZE5hbWUgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0SW5jcmVtZW50ZWROYW1lLm1qc1wiO1xuaW1wb3J0IHsgaXNBY2NlbEtleSB9IGZyb20gXCIuLi91dGlscy9rZXlib2FyZC5tanNcIjtcbmltcG9ydCB7IGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzIH0gZnJvbSBcIi4uL3V0aWxzL3Jlb3JkZXJTaGFwZXMubWpzXCI7XG5pbXBvcnQgeyBhcHBseVJvdGF0aW9uVG9TbmFwc2hvdFNoYXBlcywgZ2V0Um90YXRpb25TbmFwc2hvdCB9IGZyb20gXCIuLi91dGlscy9yb3RhdGlvbi5tanNcIjtcbmltcG9ydCB7IGJpbmRpbmdzSW5kZXggfSBmcm9tIFwiLi9kZXJpdmF0aW9ucy9iaW5kaW5nc0luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbm90VmlzaWJsZVNoYXBlcyB9IGZyb20gXCIuL2Rlcml2YXRpb25zL25vdFZpc2libGVTaGFwZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJlbnRzVG9DaGlsZHJlbiB9IGZyb20gXCIuL2Rlcml2YXRpb25zL3BhcmVudHNUb0NoaWxkcmVuLm1qc1wiO1xuaW1wb3J0IHsgZGVyaXZlU2hhcGVJZHNJbkN1cnJlbnRQYWdlIH0gZnJvbSBcIi4vZGVyaXZhdGlvbnMvc2hhcGVJZHNJbkN1cnJlbnRQYWdlLm1qc1wiO1xuaW1wb3J0IHsgQ2xpY2tNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvQ2xpY2tNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgRWRnZVNjcm9sbE1hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9FZGdlU2Nyb2xsTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IEZvY3VzTWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJzL0ZvY3VzTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IEhpc3RvcnlNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvSGlzdG9yeU1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBTY3JpYmJsZU1hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9TY3JpYmJsZU1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBTbmFwTWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJzL1NuYXBNYW5hZ2VyL1NuYXBNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVGV4dE1hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9UZXh0TWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFRpY2tNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvVGlja01hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvVXNlclByZWZlcmVuY2VzTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFJvb3RTdGF0ZSB9IGZyb20gXCIuL3Rvb2xzL1Jvb3RTdGF0ZS5tanNcIjtcbmNsYXNzIEVkaXRvciBleHRlbmRzIChfYSA9IEV2ZW50RW1pdHRlciwgX2dldElzU2hhcGVIaWRkZW5DYWNoZV9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q2FuVW5kb19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q2FuUmVkb19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0UGF0aF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFRvb2xfZGVjID0gW2NvbXB1dGVkXSwgX2dldEN1cnJlbnRUb29sSWRfZGVjID0gW2NvbXB1dGVkXSwgX2dldERvY3VtZW50U2V0dGluZ3NfZGVjID0gW2NvbXB1dGVkXSwgX2dldEluc3RhbmNlU3RhdGVfZGVjID0gW2NvbXB1dGVkXSwgX2dldE9wZW5NZW51c19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0SXNNZW51T3Blbl9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0UGFnZVN0YXRlc19kZWMgPSBbY29tcHV0ZWRdLCBfX2dldFBhZ2VTdGF0ZXNRdWVyeV9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFBhZ2VTdGF0ZV9kZWMgPSBbY29tcHV0ZWRdLCBfX2dldEN1cnJlbnRQYWdlU3RhdGVJZF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0U2VsZWN0ZWRTaGFwZUlkc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0U2VsZWN0ZWRTaGFwZXNfZGVjID0gW2NvbXB1dGVkXSwgX2dldE9ubHlTZWxlY3RlZFNoYXBlSWRfZGVjID0gW2NvbXB1dGVkXSwgX2dldE9ubHlTZWxlY3RlZFNoYXBlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRTZWxlY3Rpb25QYWdlQm91bmRzX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRTZWxlY3Rpb25Sb3RhdGlvbl9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0U2VsZWN0aW9uUm90YXRlZFBhZ2VCb3VuZHNfZGVjID0gW2NvbXB1dGVkXSwgX2dldFNlbGVjdGlvblJvdGF0ZWRTY3JlZW5Cb3VuZHNfZGVjID0gW2NvbXB1dGVkXSwgX2dldEZvY3VzZWRHcm91cElkX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRGb2N1c2VkR3JvdXBfZGVjID0gW2NvbXB1dGVkXSwgX2dldEVkaXRpbmdTaGFwZUlkX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRFZGl0aW5nU2hhcGVfZGVjID0gW2NvbXB1dGVkXSwgX2dldEhvdmVyZWRTaGFwZUlkX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRIb3ZlcmVkU2hhcGVfZGVjID0gW2NvbXB1dGVkXSwgX2dldEhpbnRpbmdTaGFwZUlkc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0SGludGluZ1NoYXBlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRFcmFzaW5nU2hhcGVJZHNfZGVjID0gW2NvbXB1dGVkXSwgX2dldEVyYXNpbmdTaGFwZXNfZGVjID0gW2NvbXB1dGVkXSwgX191bnNhZmVfZ2V0Q2FtZXJhSWRfZGVjID0gW2NvbXB1dGVkXSwgX2dldENhbWVyYV9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRDYW1lcmFGb3JGb2xsb3dpbmdfZGVjID0gW2NvbXB1dGVkXSwgX2dldFpvb21MZXZlbF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHNfZGVjID0gW2NvbXB1dGVkXSwgX2dldFZpZXdwb3J0U2NyZWVuQ2VudGVyX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRWaWV3cG9ydFBhZ2VCb3VuZHNfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRDb2xsYWJvcmF0b3JzUXVlcnlfZGVjID0gW2NvbXB1dGVkXSwgX2dldENvbGxhYm9yYXRvcnNfZGVjID0gW2NvbXB1dGVkXSwgX2dldENvbGxhYm9yYXRvcnNPbkN1cnJlbnRQYWdlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRSZW5kZXJpbmdTaGFwZXNfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRBbGxQYWdlc1F1ZXJ5X2RlYyA9IFtjb21wdXRlZF0sIF9nZXRQYWdlc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFBhZ2VJZF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFBhZ2VTaGFwZUlkc1NvcnRlZF9kZWMgPSBbY29tcHV0ZWRdLCBfX2dldEFsbEFzc2V0c1F1ZXJ5X2RlYyA9IFtjb21wdXRlZF0sIF9fZ2V0U2hhcGVHZW9tZXRyeUNhY2hlX2RlYyA9IFtjb21wdXRlZF0sIF9fZ2V0U2hhcGVIYW5kbGVzQ2FjaGVfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZV9kZWMgPSBbY29tcHV0ZWRdLCBfX2dldFNoYXBlUGFnZUJvdW5kc0NhY2hlX2RlYyA9IFtjb21wdXRlZF0sIF9fZ2V0U2hhcGVDbGlwUGF0aENhY2hlX2RlYyA9IFtjb21wdXRlZF0sIF9fZ2V0U2hhcGVNYXNrQ2FjaGVfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHNDYWNoZV9kZWMgPSBbY29tcHV0ZWRdLCBfX25vdFZpc2libGVTaGFwZXNfZGVjID0gW2NvbXB1dGVkXSwgX2dldEN1bGxlZFNoYXBlc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFBhZ2VCb3VuZHNfZGVjID0gW2NvbXB1dGVkXSwgX2dldEN1cnJlbnRQYWdlU2hhcGVzX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudFBhZ2VSZW5kZXJpbmdTaGFwZXNTb3J0ZWRfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRCaW5kaW5nc0luZGV4Q2FjaGVfZGVjID0gW2NvbXB1dGVkXSwgX19nZXRTZWxlY3Rpb25TaGFyZWRTdHlsZXNfZGVjID0gW2NvbXB1dGVkXSwgX2dldFNoYXJlZFN0eWxlc19kZWMgPSBbY29tcHV0ZWQoeyBpc0VxdWFsOiAoYSwgYikgPT4gYS5lcXVhbHMoYikgfSldLCBfZ2V0U2hhcmVkT3BhY2l0eV9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0SXNGb2N1c2VkX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRJc1JlYWRvbmx5X2RlYyA9IFtjb21wdXRlZF0sIF9fc2V0U2hpZnRLZXlUaW1lb3V0X2RlYyA9IFtiaW5kXSwgX19zZXRBbHRLZXlUaW1lb3V0X2RlYyA9IFtiaW5kXSwgX19zZXRDdHJsS2V5VGltZW91dF9kZWMgPSBbYmluZF0sIF9fc2V0TWV0YUtleVRpbWVvdXRfZGVjID0gW2JpbmRdLCBfYSkge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgc3RvcmUsXG4gICAgdXNlcixcbiAgICBzaGFwZVV0aWxzLFxuICAgIGJpbmRpbmdVdGlscyxcbiAgICB0b29scyxcbiAgICBnZXRDb250YWluZXIsXG4gICAgY2FtZXJhT3B0aW9ucyxcbiAgICBpbml0aWFsU3RhdGUsXG4gICAgYXV0b0ZvY3VzLFxuICAgIGluZmVyRGFya01vZGUsXG4gICAgb3B0aW9ucyxcbiAgICBpc1NoYXBlSGlkZGVuXG4gIH0pIHtcbiAgICBzdXBlcigpO1xuICAgIF9fcnVuSW5pdGlhbGl6ZXJzKF9pbml0LCA1LCB0aGlzKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2lzU2hhcGVIaWRkZW5QcmVkaWNhdGVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm9wdGlvbnNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNvbnRleHRJZFwiLCB1bmlxdWVJZCgpKTtcbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yJ3Mgc3RvcmVcbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3RvcmVcIik7XG4gICAgLyoqXG4gICAgICogVGhlIHJvb3Qgc3RhdGUgb2YgdGhlIHN0YXRlY2hhcnQuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJvb3RcIik7XG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgZnVuY3Rpb25zIHRvIGNhbGwgd2hlbiB0aGUgYXBwIGlzIGRpc3Bvc2VkLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJkaXNwb3NhYmxlc1wiLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBlZGl0b3IgaXMgZGlzcG9zZWQuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImlzRGlzcG9zZWRcIiwgZmFsc2UpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3RpY2tNYW5hZ2VyXCIpO1xuICAgIC8qKlxuICAgICAqIEEgbWFuYWdlciBmb3IgdGhlIGFwcCdzIHNuYXBwaW5nIGZlYXR1cmUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNuYXBzXCIpO1xuICAgIC8qKlxuICAgICAqIEEgbWFuYWdlciBmb3IgdGhlIGFueSBhc3luY2hyb25vdXMgZXZlbnRzIGFuZCBtYWtpbmcgc3VyZSB0aGV5J3JlXG4gICAgICogY2xlYW5lZCB1cCB1cG9uIGRpc3Bvc2FsLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ0aW1lcnNcIiwgdGx0aW1lLmZvckNvbnRleHQodGhpcy5jb250ZXh0SWQpKTtcbiAgICAvKipcbiAgICAgKiBBIG1hbmFnZXIgZm9yIHRoZSB1c2VyIGFuZCB0aGVpciBwcmVmZXJlbmNlcy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidXNlclwiKTtcbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmb3IgbWVhc3VyaW5nIHRleHQuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRleHRNZWFzdXJlXCIpO1xuICAgIC8qKlxuICAgICAqIEEgbWFuYWdlciBmb3IgdGhlIGVkaXRvcidzIGVudmlyb25tZW50LlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbi4gVXNlIHRoZSBgdGxlbnZgIGdsb2JhbCBleHBvcnQgaW5zdGVhZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImVudmlyb25tZW50XCIsIHRsZW52KTtcbiAgICAvKipcbiAgICAgKiBBIG1hbmFnZXIgZm9yIHRoZSBlZGl0b3IncyBzY3JpYmJsZXMuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNjcmliYmxlc1wiKTtcbiAgICAvKipcbiAgICAgKiBBIG1hbmFnZXIgZm9yIHNpZGUgZWZmZWN0cyBhbmQgY29ycmVjdCBzdGF0ZSBlbmZvcmNlbWVudC4gU2VlIHtAbGluayBAdGxkcmF3L3N0b3JlI1N0b3JlU2lkZUVmZmVjdHN9IGZvciBkZXRhaWxzLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzaWRlRWZmZWN0c1wiKTtcbiAgICAvKipcbiAgICAgKiBBIG1hbmFnZXIgZm9yIG1vdmluZyB0aGUgY2FtZXJhIHdoZW4gdGhlIG1vdXNlIGlzIGF0IHRoZSBlZGdlIG9mIHRoZSBzY3JlZW4uXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImVkZ2VTY3JvbGxNYW5hZ2VyXCIpO1xuICAgIC8qKlxuICAgICAqIEEgbWFuYWdlciBmb3IgZW5zdXJpbmcgY29ycmVjdCBmb2N1cy4gU2VlIEZvY3VzTWFuYWdlciBmb3IgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJmb2N1c01hbmFnZXJcIik7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgSFRNTCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBjb250YWluZXIgPSBlZGl0b3IuZ2V0Q29udGFpbmVyKClcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZ2V0Q29udGFpbmVyXCIpO1xuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0gU2hhcGUgVXRpbHMgLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gICAgLyoqXG4gICAgICogQSBtYXAgb2Ygc2hhcGUgdXRpbGl0eSBjbGFzc2VzIChUTFNoYXBlVXRpbHMpIGJ5IHNoYXBlIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNoYXBlVXRpbHNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN0eWxlUHJvcHNcIik7XG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLSBCaW5kaW5nIFV0aWxzIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHNoYXBlIHV0aWxpdHkgY2xhc3NlcyAoVExTaGFwZVV0aWxzKSBieSBzaGFwZSB0eXBlLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJiaW5kaW5nVXRpbHNcIik7XG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhpc3RvcnkgLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgICAvKipcbiAgICAgKiBBIG1hbmFnZXIgZm9yIHRoZSBhcHAncyBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImhpc3RvcnlcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9zaG91bGRJZ25vcmVTaGFwZUxvY2tcIiwgZmFsc2UpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2NyYXNoaW5nRXJyb3JcIiwgbnVsbCk7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfaXNDaGFuZ2luZ1N0eWxlVGltZW91dFwiLCAtMSk7XG4gICAgLy8gTWVudXNcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibWVudXNcIiwgdGxtZW51cy5mb3JDb250ZXh0KHRoaXMuY29udGV4dElkKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9jYW1lcmFPcHRpb25zXCIsIGF0b20oXCJjYW1lcmEgb3B0aW9uc1wiLCBERUZBVUxUX0NBTUVSQV9PUFRJT05TKSk7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfdmlld3BvcnRBbmltYXRpb25cIiwgbnVsbCk7XG4gICAgLy8gVmlld3BvcnRcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl93aWxsU2V0SW5pdGlhbEJvdW5kc1wiLCB0cnVlKTtcbiAgICAvLyBGb2xsb3dpbmdcbiAgICAvLyBXaGVuIHdlIGFyZSAnbG9ja2VkIG9uJyB0byBhIHVzZXIsIG91ciBjYW1lcmEgaXMgZGVyaXZlZCBmcm9tIHRoZWlyIGNhbWVyYS5cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyXCIsIGF0b20oXCJpc0xvY2tlZE9uRm9sbG93aW5nVXNlclwiLCBmYWxzZSkpO1xuICAgIC8vIENhbWVyYSBzdGF0ZVxuICAgIC8vIENhbWVyYSBzdGF0ZSBkb2VzIHR3byB0aGluZ3M6IGZpcnN0LCBpdCBhbGxvd3MgdXMgdG8gc3Vic2NyaWJlIHRvIHdoZXRoZXJcbiAgICAvLyB0aGUgY2FtZXJhIGlzIG1vdmluZyBvciBub3Q7IGFuZCBzZWNvbmQsIGl0IGFsbG93cyB1cyB0byB1cGRhdGUgdGhlIHJlbmRlcmluZ1xuICAgIC8vIHNoYXBlcyBvbiB0aGUgY2FudmFzLiBDaGFuZ2luZyB0aGUgcmVuZGVyaW5nIHNoYXBlcyBtYXkgY2F1c2Ugc2hhcGVzIHRvXG4gICAgLy8gdW5tb3VudCAvIHJlbW91bnQgaW4gdGhlIERPTSwgd2hpY2ggaXMgZXhwZW5zaXZlOyBhbmQgY29tcHV0aW5nIHZpc2liaWxpdHkgaXNcbiAgICAvLyBhbHNvIGV4cGVuc2l2ZSBpbiBsYXJnZSBwcm9qZWN0cy4gRm9yIHRoaXMgcmVhc29uLCB3ZSB1c2UgYSBzZWNvbmQgYm91bmRpbmdcbiAgICAvLyBib3gganVzdCBmb3IgcmVuZGVyaW5nLCBhbmQgd2Ugb25seSB1cGRhdGUgYWZ0ZXIgdGhlIGNhbWVyYSBzdG9wcyBtb3ZpbmcuXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9jYW1lcmFTdGF0ZVwiLCBhdG9tKFwiY2FtZXJhIHN0YXRlXCIsIFwiaWRsZVwiKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9jYW1lcmFTdGF0ZVRpbWVvdXRSZW1haW5pbmdcIiwgMCk7XG4gICAgLyogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9jdXJyZW50UGFnZVNoYXBlSWRzXCIpO1xuICAgIC8vIFBhcmVudHMgYW5kIGNoaWxkcmVuXG4gICAgLyoqXG4gICAgICogQSBjYWNoZSBvZiBwYXJlbnRzIHRvIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9wYXJlbnRJZHNUb0NoaWxkSWRzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhbmltYXRpbmdTaGFwZXNcIiwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tIENvbnRlbnQgLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImV4dGVybmFsQXNzZXRDb250ZW50SGFuZGxlcnNcIiwge1xuICAgICAgZmlsZTogbnVsbCxcbiAgICAgIHVybDogbnVsbFxuICAgIH0pO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcG9yYXJ5QXNzZXRQcmV2aWV3XCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZXh0ZXJuYWxDb250ZW50SGFuZGxlcnNcIiwge1xuICAgICAgdGV4dDogbnVsbCxcbiAgICAgIGZpbGVzOiBudWxsLFxuICAgICAgZW1iZWQ6IG51bGwsXG4gICAgICBcInN2Zy10ZXh0XCI6IG51bGwsXG4gICAgICB1cmw6IG51bGxcbiAgICB9KTtcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gRXZlbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAgIC8qKlxuICAgICAqIFRoZSBhcHAncyBjdXJyZW50IGlucHV0IHN0YXRlLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpbnB1dHNcIiwge1xuICAgICAgLyoqIFRoZSBtb3N0IHJlY2VudCBwb2ludGVyIGRvd24ncyBwb3NpdGlvbiBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlLiAqL1xuICAgICAgb3JpZ2luUGFnZVBvaW50OiBuZXcgVmVjKCksXG4gICAgICAvKiogVGhlIG1vc3QgcmVjZW50IHBvaW50ZXIgZG93bidzIHBvc2l0aW9uIGluIHNjcmVlbiBzcGFjZS4gKi9cbiAgICAgIG9yaWdpblNjcmVlblBvaW50OiBuZXcgVmVjKCksXG4gICAgICAvKiogVGhlIHByZXZpb3VzIHBvaW50ZXIgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZS4gKi9cbiAgICAgIHByZXZpb3VzUGFnZVBvaW50OiBuZXcgVmVjKCksXG4gICAgICAvKiogVGhlIHByZXZpb3VzIHBvaW50ZXIgcG9zaXRpb24gaW4gc2NyZWVuIHNwYWNlLiAqL1xuICAgICAgcHJldmlvdXNTY3JlZW5Qb2ludDogbmV3IFZlYygpLFxuICAgICAgLyoqIFRoZSBtb3N0IHJlY2VudCBwb2ludGVyIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UuICovXG4gICAgICBjdXJyZW50UGFnZVBvaW50OiBuZXcgVmVjKCksXG4gICAgICAvKiogVGhlIG1vc3QgcmVjZW50IHBvaW50ZXIgcG9zaXRpb24gaW4gc2NyZWVuIHNwYWNlLiAqL1xuICAgICAgY3VycmVudFNjcmVlblBvaW50OiBuZXcgVmVjKCksXG4gICAgICAvKiogQSBzZXQgY29udGFpbmluZyB0aGUgY3VycmVudGx5IHByZXNzZWQga2V5cy4gKi9cbiAgICAgIGtleXM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgICAvKiogQSBzZXQgY29udGFpbmluZyB0aGUgY3VycmVudGx5IHByZXNzZWQgYnV0dG9ucy4gKi9cbiAgICAgIGJ1dHRvbnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgICAvKiogV2hldGhlciB0aGUgaW5wdXQgaXMgZnJvbSBhIHBlLiAqL1xuICAgICAgaXNQZW46IGZhbHNlLFxuICAgICAgLyoqIFdoZXRoZXIgdGhlIHNoaWZ0IGtleSBpcyBjdXJyZW50bHkgcHJlc3NlZC4gKi9cbiAgICAgIHNoaWZ0S2V5OiBmYWxzZSxcbiAgICAgIC8qKiBXaGV0aGVyIHRoZSBtZXRhIGtleSBpcyBjdXJyZW50bHkgcHJlc3NlZC4gKi9cbiAgICAgIG1ldGFLZXk6IGZhbHNlLFxuICAgICAgLyoqIFdoZXRoZXIgdGhlIGNvbnRyb2wgb3IgY29tbWFuZCBrZXkgaXMgY3VycmVudGx5IHByZXNzZWQuICovXG4gICAgICBjdHJsS2V5OiBmYWxzZSxcbiAgICAgIC8qKiBXaGV0aGVyIHRoZSBhbHQgb3Igb3B0aW9uIGtleSBpcyBjdXJyZW50bHkgcHJlc3NlZC4gKi9cbiAgICAgIGFsdEtleTogZmFsc2UsXG4gICAgICAvKiogV2hldGhlciB0aGUgdXNlciBpcyBkcmFnZ2luZy4gKi9cbiAgICAgIGlzRHJhZ2dpbmc6IGZhbHNlLFxuICAgICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgcG9pbnRpbmcuICovXG4gICAgICBpc1BvaW50aW5nOiBmYWxzZSxcbiAgICAgIC8qKiBXaGV0aGVyIHRoZSB1c2VyIGlzIHBpbmNoaW5nLiAqL1xuICAgICAgaXNQaW5jaGluZzogZmFsc2UsXG4gICAgICAvKiogV2hldGhlciB0aGUgdXNlciBpcyBlZGl0aW5nLiAqL1xuICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcbiAgICAgIC8qKiBXaGV0aGVyIHRoZSB1c2VyIGlzIHBhbm5pbmcuICovXG4gICAgICBpc1Bhbm5pbmc6IGZhbHNlLFxuICAgICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgc3BhY2ViYXIgcGFubmluZy4gKi9cbiAgICAgIGlzU3BhY2ViYXJQYW5uaW5nOiBmYWxzZSxcbiAgICAgIC8qKiBWZWxvY2l0eSBvZiBtb3VzZSBwb2ludGVyLCBpbiBwaXhlbHMgcGVyIG1pbGxpc2Vjb25kICovXG4gICAgICBwb2ludGVyVmVsb2NpdHk6IG5ldyBWZWMoKVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEEgbWFuYWdlciBmb3IgcmVjb3JkaW5nIG11bHRpcGxlIGNsaWNrIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfY2xpY2tNYW5hZ2VyXCIsIG5ldyBDbGlja01hbmFnZXIodGhpcykpO1xuICAgIC8qKlxuICAgICAqIFRoZSBwcmV2aW91cyBjdXJzb3IuIFVzZWQgZm9yIHJlc3RvcmluZyB0aGUgY3Vyc29yIGFmdGVyIHBhbiBldmVudHMuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3ByZXZDdXJzb3JcIiwgXCJkZWZhdWx0XCIpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3NoaWZ0S2V5VGltZW91dFwiLCAtMSk7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfYWx0S2V5VGltZW91dFwiLCAtMSk7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfY3RybEtleVRpbWVvdXRcIiwgLTEpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX21ldGFLZXlUaW1lb3V0XCIsIC0xKTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9yZXN0b3JlVG9vbElkXCIsIFwic2VsZWN0XCIpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3BpbmNoU3RhcnRcIiwgMSk7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfZGlkUGluY2hcIiwgZmFsc2UpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3NlbGVjdGVkU2hhcGVJZHNBdFBvaW50ZXJEb3duXCIsIFtdKTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9sb25nUHJlc3NUaW1lb3V0XCIsIC0xKTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhcHR1cmVkUG9pbnRlcklkXCIsIG51bGwpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGVyZm9ybWFuY2VUcmFja2VyXCIpO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGVyZm9ybWFuY2VUcmFja2VyVGltZW91dFwiLCAtMSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9wZW5kaW5nRXZlbnRzRm9yTmV4dFRpY2tcIiwgW10pO1xuICAgIHRoaXMuX2lzU2hhcGVIaWRkZW5QcmVkaWNhdGUgPSBpc1NoYXBlSGlkZGVuO1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uZGVmYXVsdFRsZHJhd09wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQodGhpcy5zdG9yZS5kaXNwb3NlLmJpbmQodGhpcy5zdG9yZSkpO1xuICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5TWFuYWdlcih7XG4gICAgICBzdG9yZSxcbiAgICAgIGFubm90YXRlRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLmFubm90YXRlRXJyb3IoZXJyb3IsIHsgb3JpZ2luOiBcImhpc3RvcnkuYmF0Y2hcIiwgd2lsbENyYXNoQXBwOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmNyYXNoKGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNuYXBzID0gbmV3IFNuYXBNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKHRoaXMudGltZXJzLmRpc3Bvc2UpO1xuICAgIHRoaXMuX2NhbWVyYU9wdGlvbnMuc2V0KHsgLi4uREVGQVVMVF9DQU1FUkFfT1BUSU9OUywgLi4uY2FtZXJhT3B0aW9ucyB9KTtcbiAgICB0aGlzLnVzZXIgPSBuZXcgVXNlclByZWZlcmVuY2VzTWFuYWdlcih1c2VyID8/IGNyZWF0ZVRMVXNlcigpLCBpbmZlckRhcmtNb2RlID8/IGZhbHNlKTtcbiAgICB0aGlzLmdldENvbnRhaW5lciA9IGdldENvbnRhaW5lcjtcbiAgICB0aGlzLnRleHRNZWFzdXJlID0gbmV3IFRleHRNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuX3RpY2tNYW5hZ2VyID0gbmV3IFRpY2tNYW5hZ2VyKHRoaXMpO1xuICAgIGNsYXNzIE5ld1Jvb3QgZXh0ZW5kcyBSb290U3RhdGUge1xuICAgICAgc3RhdGljIGluaXRpYWwgPSBpbml0aWFsU3RhdGUgPz8gXCJcIjtcbiAgICB9XG4gICAgdGhpcy5yb290ID0gbmV3IE5ld1Jvb3QodGhpcyk7XG4gICAgdGhpcy5yb290LmNoaWxkcmVuID0ge307XG4gICAgY29uc3QgYWxsU2hhcGVVdGlscyA9IGNoZWNrU2hhcGVzQW5kQWRkQ29yZShzaGFwZVV0aWxzKTtcbiAgICBjb25zdCBfc2hhcGVVdGlscyA9IHt9O1xuICAgIGNvbnN0IF9zdHlsZVByb3BzID0ge307XG4gICAgY29uc3QgYWxsU3R5bGVzQnlJZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBVdGlsIG9mIGFsbFNoYXBlVXRpbHMpIHtcbiAgICAgIGNvbnN0IHV0aWwgPSBuZXcgVXRpbCh0aGlzKTtcbiAgICAgIF9zaGFwZVV0aWxzW1V0aWwudHlwZV0gPSB1dGlsO1xuICAgICAgY29uc3QgcHJvcEtleXNCeVN0eWxlID0gZ2V0U2hhcGVQcm9wS2V5c0J5U3R5bGUoVXRpbC5wcm9wcyA/PyB7fSk7XG4gICAgICBfc3R5bGVQcm9wc1tVdGlsLnR5cGVdID0gcHJvcEtleXNCeVN0eWxlO1xuICAgICAgZm9yIChjb25zdCBzdHlsZSBvZiBwcm9wS2V5c0J5U3R5bGUua2V5cygpKSB7XG4gICAgICAgIGlmICghYWxsU3R5bGVzQnlJZC5oYXMoc3R5bGUuaWQpKSB7XG4gICAgICAgICAgYWxsU3R5bGVzQnlJZC5zZXQoc3R5bGUuaWQsIHN0eWxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChhbGxTdHlsZXNCeUlkLmdldChzdHlsZS5pZCkgIT09IHN0eWxlKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICBgTXVsdGlwbGUgc3R5bGUgcHJvcHMgd2l0aCBpZCBcIiR7c3R5bGUuaWR9XCIgaW4gdXNlLiBTdHlsZSBwcm9wIElEcyBtdXN0IGJlIHVuaXF1ZS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNoYXBlVXRpbHMgPSBfc2hhcGVVdGlscztcbiAgICB0aGlzLnN0eWxlUHJvcHMgPSBfc3R5bGVQcm9wcztcbiAgICBjb25zdCBhbGxCaW5kaW5nVXRpbHMgPSBjaGVja0JpbmRpbmdzKGJpbmRpbmdVdGlscyk7XG4gICAgY29uc3QgX2JpbmRpbmdVdGlscyA9IHt9O1xuICAgIGZvciAoY29uc3QgVXRpbCBvZiBhbGxCaW5kaW5nVXRpbHMpIHtcbiAgICAgIGNvbnN0IHV0aWwgPSBuZXcgVXRpbCh0aGlzKTtcbiAgICAgIF9iaW5kaW5nVXRpbHNbVXRpbC50eXBlXSA9IHV0aWw7XG4gICAgfVxuICAgIHRoaXMuYmluZGluZ1V0aWxzID0gX2JpbmRpbmdVdGlscztcbiAgICBmb3IgKGNvbnN0IFRvb2wgb2YgWy4uLnRvb2xzXSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5KHRoaXMucm9vdC5jaGlsZHJlbiwgVG9vbC5pZCkpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYENhbid0IG92ZXJyaWRlIHRvb2wgd2l0aCBpZCBcIiR7VG9vbC5pZH1cImApO1xuICAgICAgfVxuICAgICAgdGhpcy5yb290LmNoaWxkcmVuW1Rvb2wuaWRdID0gbmV3IFRvb2wodGhpcywgdGhpcy5yb290KTtcbiAgICB9XG4gICAgdGhpcy5zY3JpYmJsZXMgPSBuZXcgU2NyaWJibGVNYW5hZ2VyKHRoaXMpO1xuICAgIGNvbnN0IGNsZWFudXBJbnN0YW5jZVBhZ2VTdGF0ZSA9IChwcmV2UGFnZVN0YXRlLCBzaGFwZXNOb0xvbmdlckluUGFnZSkgPT4ge1xuICAgICAgbGV0IG5leHRQYWdlU3RhdGUgPSBudWxsO1xuICAgICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHByZXZQYWdlU3RhdGUuc2VsZWN0ZWRTaGFwZUlkcy5maWx0ZXIoXG4gICAgICAgIChpZCkgPT4gIXNoYXBlc05vTG9uZ2VySW5QYWdlLmhhcyhpZClcbiAgICAgICk7XG4gICAgICBpZiAoc2VsZWN0ZWRTaGFwZUlkcy5sZW5ndGggIT09IHByZXZQYWdlU3RhdGUuc2VsZWN0ZWRTaGFwZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFuZXh0UGFnZVN0YXRlKSBuZXh0UGFnZVN0YXRlID0geyAuLi5wcmV2UGFnZVN0YXRlIH07XG4gICAgICAgIG5leHRQYWdlU3RhdGUuc2VsZWN0ZWRTaGFwZUlkcyA9IHNlbGVjdGVkU2hhcGVJZHM7XG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSBwcmV2UGFnZVN0YXRlLmVyYXNpbmdTaGFwZUlkcy5maWx0ZXIoXG4gICAgICAgIChpZCkgPT4gIXNoYXBlc05vTG9uZ2VySW5QYWdlLmhhcyhpZClcbiAgICAgICk7XG4gICAgICBpZiAoZXJhc2luZ1NoYXBlSWRzLmxlbmd0aCAhPT0gcHJldlBhZ2VTdGF0ZS5lcmFzaW5nU2hhcGVJZHMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbmV4dFBhZ2VTdGF0ZSkgbmV4dFBhZ2VTdGF0ZSA9IHsgLi4ucHJldlBhZ2VTdGF0ZSB9O1xuICAgICAgICBuZXh0UGFnZVN0YXRlLmVyYXNpbmdTaGFwZUlkcyA9IGVyYXNpbmdTaGFwZUlkcztcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2UGFnZVN0YXRlLmhvdmVyZWRTaGFwZUlkICYmIHNoYXBlc05vTG9uZ2VySW5QYWdlLmhhcyhwcmV2UGFnZVN0YXRlLmhvdmVyZWRTaGFwZUlkKSkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpIG5leHRQYWdlU3RhdGUgPSB7IC4uLnByZXZQYWdlU3RhdGUgfTtcbiAgICAgICAgbmV4dFBhZ2VTdGF0ZS5ob3ZlcmVkU2hhcGVJZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAocHJldlBhZ2VTdGF0ZS5lZGl0aW5nU2hhcGVJZCAmJiBzaGFwZXNOb0xvbmdlckluUGFnZS5oYXMocHJldlBhZ2VTdGF0ZS5lZGl0aW5nU2hhcGVJZCkpIHtcbiAgICAgICAgaWYgKCFuZXh0UGFnZVN0YXRlKSBuZXh0UGFnZVN0YXRlID0geyAuLi5wcmV2UGFnZVN0YXRlIH07XG4gICAgICAgIG5leHRQYWdlU3RhdGUuZWRpdGluZ1NoYXBlSWQgPSBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgaGludGluZ1NoYXBlSWRzID0gcHJldlBhZ2VTdGF0ZS5oaW50aW5nU2hhcGVJZHMuZmlsdGVyKFxuICAgICAgICAoaWQpID0+ICFzaGFwZXNOb0xvbmdlckluUGFnZS5oYXMoaWQpXG4gICAgICApO1xuICAgICAgaWYgKGhpbnRpbmdTaGFwZUlkcy5sZW5ndGggIT09IHByZXZQYWdlU3RhdGUuaGludGluZ1NoYXBlSWRzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpIG5leHRQYWdlU3RhdGUgPSB7IC4uLnByZXZQYWdlU3RhdGUgfTtcbiAgICAgICAgbmV4dFBhZ2VTdGF0ZS5oaW50aW5nU2hhcGVJZHMgPSBoaW50aW5nU2hhcGVJZHM7XG4gICAgICB9XG4gICAgICBpZiAocHJldlBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCAmJiBzaGFwZXNOb0xvbmdlckluUGFnZS5oYXMocHJldlBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCkpIHtcbiAgICAgICAgaWYgKCFuZXh0UGFnZVN0YXRlKSBuZXh0UGFnZVN0YXRlID0geyAuLi5wcmV2UGFnZVN0YXRlIH07XG4gICAgICAgIG5leHRQYWdlU3RhdGUuZm9jdXNlZEdyb3VwSWQgPSBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHRQYWdlU3RhdGU7XG4gICAgfTtcbiAgICB0aGlzLnNpZGVFZmZlY3RzID0gdGhpcy5zdG9yZS5zaWRlRWZmZWN0cztcbiAgICBsZXQgZGVsZXRlZEJpbmRpbmdzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWxldGVkU2hhcGVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGNvbnN0IGludmFsaWRQYXJlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBsZXQgaW52YWxpZEJpbmRpbmdUeXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoXG4gICAgICB0aGlzLnNpZGVFZmZlY3RzLnJlZ2lzdGVyT3BlcmF0aW9uQ29tcGxldGVIYW5kbGVyKCgpID0+IHtcbiAgICAgICAgZGVsZXRlZFNoYXBlSWRzLmNsZWFyKCk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyZW50SWQgb2YgaW52YWxpZFBhcmVudHMpIHtcbiAgICAgICAgICBpbnZhbGlkUGFyZW50cy5kZWxldGUocGFyZW50SWQpO1xuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0U2hhcGUocGFyZW50SWQpO1xuICAgICAgICAgIGlmICghcGFyZW50KSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwocGFyZW50KTtcbiAgICAgICAgICBjb25zdCBjaGFuZ2VzID0gdXRpbC5vbkNoaWxkcmVuQ2hhbmdlPy4ocGFyZW50KTtcbiAgICAgICAgICBpZiAoY2hhbmdlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhjaGFuZ2VzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludmFsaWRCaW5kaW5nVHlwZXMuc2l6ZSkge1xuICAgICAgICAgIGNvbnN0IHQgPSBpbnZhbGlkQmluZGluZ1R5cGVzO1xuICAgICAgICAgIGludmFsaWRCaW5kaW5nVHlwZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRCaW5kaW5nVXRpbCh0eXBlKTtcbiAgICAgICAgICAgIHV0aWwub25PcGVyYXRpb25Db21wbGV0ZT8uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWxldGVkQmluZGluZ3Muc2l6ZSkge1xuICAgICAgICAgIGNvbnN0IHQgPSBkZWxldGVkQmluZGluZ3M7XG4gICAgICAgICAgZGVsZXRlZEJpbmRpbmdzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9wdHMgb2YgdC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChvcHRzLmJpbmRpbmcpLm9uQWZ0ZXJEZWxldGU/LihvcHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIpO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgdGhpcy5zaWRlRWZmZWN0cy5yZWdpc3Rlcih7XG4gICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgYWZ0ZXJDaGFuZ2U6IChzaGFwZUJlZm9yZSwgc2hhcGVBZnRlcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBiaW5kaW5nIG9mIHRoaXMuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShzaGFwZUFmdGVyKSkge1xuICAgICAgICAgICAgICBpbnZhbGlkQmluZGluZ1R5cGVzLmFkZChiaW5kaW5nLnR5cGUpO1xuICAgICAgICAgICAgICBpZiAoYmluZGluZy5mcm9tSWQgPT09IHNoYXBlQWZ0ZXIuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmcpLm9uQWZ0ZXJDaGFuZ2VGcm9tU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICBiaW5kaW5nLFxuICAgICAgICAgICAgICAgICAgc2hhcGVCZWZvcmUsXG4gICAgICAgICAgICAgICAgICBzaGFwZUFmdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmcudG9JZCA9PT0gc2hhcGVBZnRlci5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckNoYW5nZVRvU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICBiaW5kaW5nLFxuICAgICAgICAgICAgICAgICAgc2hhcGVCZWZvcmUsXG4gICAgICAgICAgICAgICAgICBzaGFwZUFmdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZUJlZm9yZS5wYXJlbnRJZCAhPT0gc2hhcGVBZnRlci5wYXJlbnRJZCkge1xuICAgICAgICAgICAgICBjb25zdCBub3RpZnlCaW5kaW5nQW5jZXN0cnlDaGFuZ2UgPSAoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjZW5kYW50U2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlc2NlbmRhbnRTaGFwZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiB0aGlzLmdldEJpbmRpbmdzSW52b2x2aW5nU2hhcGUoZGVzY2VuZGFudFNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgaW52YWxpZEJpbmRpbmdUeXBlcy5hZGQoYmluZGluZy50eXBlKTtcbiAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLmZyb21JZCA9PT0gZGVzY2VuZGFudFNoYXBlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckNoYW5nZUZyb21TaGFwZT8uKHtcbiAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nLFxuICAgICAgICAgICAgICAgICAgICAgIHNoYXBlQmVmb3JlOiBkZXNjZW5kYW50U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgICAgc2hhcGVBZnRlcjogZGVzY2VuZGFudFNoYXBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcudG9JZCA9PT0gZGVzY2VuZGFudFNoYXBlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckNoYW5nZVRvU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICAgICAgYmluZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICBzaGFwZUJlZm9yZTogZGVzY2VuZGFudFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgIHNoYXBlQWZ0ZXI6IGRlc2NlbmRhbnRTaGFwZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5vdGlmeUJpbmRpbmdBbmNlc3RyeUNoYW5nZShzaGFwZUFmdGVyLmlkKTtcbiAgICAgICAgICAgICAgdGhpcy52aXNpdERlc2NlbmRhbnRzKHNoYXBlQWZ0ZXIuaWQsIG5vdGlmeUJpbmRpbmdBbmNlc3RyeUNoYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhcGVCZWZvcmUucGFyZW50SWQgIT09IHNoYXBlQWZ0ZXIucGFyZW50SWQgJiYgaXNQYWdlSWQoc2hhcGVBZnRlci5wYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgYWxsTW92aW5nSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW3NoYXBlQmVmb3JlLmlkXSk7XG4gICAgICAgICAgICAgIHRoaXMudmlzaXREZXNjZW5kYW50cyhzaGFwZUJlZm9yZS5pZCwgKGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxsTW92aW5nSWRzLmFkZChpZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGluc3RhbmNlUGFnZVN0YXRlIG9mIHRoaXMuZ2V0UGFnZVN0YXRlcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlUGFnZVN0YXRlLnBhZ2VJZCA9PT0gc2hhcGVBZnRlci5wYXJlbnRJZCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFBhZ2VTdGF0ZSA9IGNsZWFudXBJbnN0YW5jZVBhZ2VTdGF0ZShpbnN0YW5jZVBhZ2VTdGF0ZSwgYWxsTW92aW5nSWRzKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFBhZ2VTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXQoW25leHRQYWdlU3RhdGVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZUJlZm9yZS5wYXJlbnRJZCAmJiBpc1NoYXBlSWQoc2hhcGVCZWZvcmUucGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgIGludmFsaWRQYXJlbnRzLmFkZChzaGFwZUJlZm9yZS5wYXJlbnRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhcGVBZnRlci5wYXJlbnRJZCAhPT0gc2hhcGVCZWZvcmUucGFyZW50SWQgJiYgaXNTaGFwZUlkKHNoYXBlQWZ0ZXIucGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgIGludmFsaWRQYXJlbnRzLmFkZChzaGFwZUFmdGVyLnBhcmVudElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGJlZm9yZURlbGV0ZTogKHNoYXBlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGVsZXRlZFNoYXBlSWRzLmhhcyhzaGFwZS5pZCkpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChzaGFwZS5wYXJlbnRJZCAmJiBpc1NoYXBlSWQoc2hhcGUucGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgIGludmFsaWRQYXJlbnRzLmFkZChzaGFwZS5wYXJlbnRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGVkU2hhcGVJZHMuYWRkKHNoYXBlLmlkKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJpbmRpbmdJZHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiB0aGlzLmdldEJpbmRpbmdzSW52b2x2aW5nU2hhcGUoc2hhcGUpKSB7XG4gICAgICAgICAgICAgIGludmFsaWRCaW5kaW5nVHlwZXMuYWRkKGJpbmRpbmcudHlwZSk7XG4gICAgICAgICAgICAgIGRlbGV0ZUJpbmRpbmdJZHMucHVzaChiaW5kaW5nLmlkKTtcbiAgICAgICAgICAgICAgY29uc3QgdXRpbCA9IHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZyk7XG4gICAgICAgICAgICAgIGlmIChiaW5kaW5nLmZyb21JZCA9PT0gc2hhcGUuaWQpIHtcbiAgICAgICAgICAgICAgICB1dGlsLm9uQmVmb3JlSXNvbGF0ZVRvU2hhcGU/Lih7IGJpbmRpbmcsIHJlbW92ZWRTaGFwZTogc2hhcGUgfSk7XG4gICAgICAgICAgICAgICAgdXRpbC5vbkJlZm9yZURlbGV0ZUZyb21TaGFwZT8uKHsgYmluZGluZywgc2hhcGUgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5vbkJlZm9yZUlzb2xhdGVGcm9tU2hhcGU/Lih7IGJpbmRpbmcsIHJlbW92ZWRTaGFwZTogc2hhcGUgfSk7XG4gICAgICAgICAgICAgICAgdXRpbC5vbkJlZm9yZURlbGV0ZVRvU2hhcGU/Lih7IGJpbmRpbmcsIHNoYXBlIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVsZXRlQmluZGluZ0lkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVCaW5kaW5ncyhkZWxldGVCaW5kaW5nSWRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZWRJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbc2hhcGUuaWRdKTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBjb21wYWN0KFxuICAgICAgICAgICAgICB0aGlzLmdldFBhZ2VTdGF0ZXMoKS5tYXAoKHBhZ2VTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGVhbnVwSW5zdGFuY2VQYWdlU3RhdGUocGFnZVN0YXRlLCBkZWxldGVkSWRzKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAodXBkYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXQodXBkYXRlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBiaW5kaW5nOiB7XG4gICAgICAgICAgYmVmb3JlQ3JlYXRlOiAoYmluZGluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25CZWZvcmVDcmVhdGU/Lih7IGJpbmRpbmcgfSk7XG4gICAgICAgICAgICBpZiAobmV4dCkgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICByZXR1cm4gYmluZGluZztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyQ3JlYXRlOiAoYmluZGluZykgPT4ge1xuICAgICAgICAgICAgaW52YWxpZEJpbmRpbmdUeXBlcy5hZGQoYmluZGluZy50eXBlKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckNyZWF0ZT8uKHsgYmluZGluZyB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJlZm9yZUNoYW5nZTogKGJpbmRpbmdCZWZvcmUsIGJpbmRpbmdBZnRlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZ0FmdGVyKS5vbkJlZm9yZUNoYW5nZT8uKHtcbiAgICAgICAgICAgICAgYmluZGluZ0JlZm9yZSxcbiAgICAgICAgICAgICAgYmluZGluZ0FmdGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkKSByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICAgIHJldHVybiBiaW5kaW5nQWZ0ZXI7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZnRlckNoYW5nZTogKGJpbmRpbmdCZWZvcmUsIGJpbmRpbmdBZnRlcikgPT4ge1xuICAgICAgICAgICAgaW52YWxpZEJpbmRpbmdUeXBlcy5hZGQoYmluZGluZ0FmdGVyLnR5cGUpO1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nQWZ0ZXIpLm9uQWZ0ZXJDaGFuZ2U/Lih7IGJpbmRpbmdCZWZvcmUsIGJpbmRpbmdBZnRlciB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJlZm9yZURlbGV0ZTogKGJpbmRpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25CZWZvcmVEZWxldGU/Lih7IGJpbmRpbmcgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZnRlckRlbGV0ZTogKGJpbmRpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckRlbGV0ZT8uKHsgYmluZGluZyB9KTtcbiAgICAgICAgICAgIGludmFsaWRCaW5kaW5nVHlwZXMuYWRkKGJpbmRpbmcudHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYWdlOiB7XG4gICAgICAgICAgYWZ0ZXJDcmVhdGU6IChyZWNvcmQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYUlkID0gQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZChyZWNvcmQuaWQpO1xuICAgICAgICAgICAgY29uc3QgX3BhZ2VTdGF0ZUlkID0gSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLmNyZWF0ZUlkKHJlY29yZC5pZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmUuaGFzKGNhbWVyYUlkKSkge1xuICAgICAgICAgICAgICB0aGlzLnN0b3JlLnB1dChbQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGUoeyBpZDogY2FtZXJhSWQgfSldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yZS5oYXMoX3BhZ2VTdGF0ZUlkKSkge1xuICAgICAgICAgICAgICB0aGlzLnN0b3JlLnB1dChbXG4gICAgICAgICAgICAgICAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLmNyZWF0ZSh7IGlkOiBfcGFnZVN0YXRlSWQsIHBhZ2VJZDogcmVjb3JkLmlkIH0pXG4gICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWZ0ZXJEZWxldGU6IChyZWNvcmQsIHNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpPy5jdXJyZW50UGFnZUlkID09PSByZWNvcmQuaWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgYmFja3VwUGFnZUlkID0gdGhpcy5nZXRQYWdlcygpLmZpbmQoKHApID0+IHAuaWQgIT09IHJlY29yZC5pZCk/LmlkO1xuICAgICAgICAgICAgICBpZiAoYmFja3VwUGFnZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXQoW3sgLi4udGhpcy5nZXRJbnN0YW5jZVN0YXRlKCksIGN1cnJlbnRQYWdlSWQ6IGJhY2t1cFBhZ2VJZCB9XSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlID09PSBcInVzZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjYW1lcmFJZCA9IENhbWVyYVJlY29yZFR5cGUuY3JlYXRlSWQocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlX1BhZ2VTdGF0ZUlkID0gSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLmNyZWF0ZUlkKHJlY29yZC5pZCk7XG4gICAgICAgICAgICB0aGlzLnN0b3JlLnJlbW92ZShbY2FtZXJhSWQsIGluc3RhbmNlX1BhZ2VTdGF0ZUlkXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnN0YW5jZToge1xuICAgICAgICAgIGFmdGVyQ2hhbmdlOiAocHJldiwgbmV4dCwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmUuaGFzKG5leHQuY3VycmVudFBhZ2VJZCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgYmFja3VwUGFnZUlkID0gdGhpcy5zdG9yZS5oYXMocHJldi5jdXJyZW50UGFnZUlkKSA/IHByZXYuY3VycmVudFBhZ2VJZCA6IHRoaXMuZ2V0UGFnZXMoKVswXT8uaWQ7XG4gICAgICAgICAgICAgIGlmIChiYWNrdXBQYWdlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZShuZXh0LmlkLCAoaW5zdGFuY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgICAuLi5pbnN0YW5jZSxcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlSWQ6IGJhY2t1cFBhZ2VJZFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09IFwidXNlclwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluc3RhbmNlX3BhZ2Vfc3RhdGU6IHtcbiAgICAgICAgICBhZnRlckNoYW5nZTogKHByZXYsIG5leHQpID0+IHtcbiAgICAgICAgICAgIGlmIChwcmV2Py5zZWxlY3RlZFNoYXBlSWRzICE9PSBuZXh0Py5zZWxlY3RlZFNoYXBlSWRzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gbmV4dC5zZWxlY3RlZFNoYXBlSWRzLmZpbHRlcigoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50SWQgPSB0aGlzLmdldFNoYXBlKGlkKT8ucGFyZW50SWQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGlzU2hhcGVJZChwYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnNlbGVjdGVkU2hhcGVJZHMuaW5jbHVkZXMocGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHBhcmVudElkID0gdGhpcy5nZXRTaGFwZShwYXJlbnRJZCk/LnBhcmVudElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGxldCBuZXh0Rm9jdXNlZEdyb3VwSWQgPSBudWxsO1xuICAgICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1vbkdyb3VwQW5jZXN0b3IgPSB0aGlzLmZpbmRDb21tb25BbmNlc3RvcihcbiAgICAgICAgICAgICAgICAgIGNvbXBhY3QoZmlsdGVyZWQubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKSxcbiAgICAgICAgICAgICAgICAgIChzaGFwZSkgPT4gdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImdyb3VwXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tbW9uR3JvdXBBbmNlc3Rvcikge1xuICAgICAgICAgICAgICAgICAgbmV4dEZvY3VzZWRHcm91cElkID0gY29tbW9uR3JvdXBBbmNlc3RvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQ/LmZvY3VzZWRHcm91cElkKSB7XG4gICAgICAgICAgICAgICAgICBuZXh0Rm9jdXNlZEdyb3VwSWQgPSBuZXh0LmZvY3VzZWRHcm91cElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoICE9PSBuZXh0LnNlbGVjdGVkU2hhcGVJZHMubGVuZ3RoIHx8IG5leHRGb2N1c2VkR3JvdXBJZCAhPT0gbmV4dC5mb2N1c2VkR3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUucHV0KFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubmV4dCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTaGFwZUlkczogZmlsdGVyZWQsXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzZWRHcm91cElkOiBuZXh0Rm9jdXNlZEdyb3VwSWQgPz8gbnVsbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5fY3VycmVudFBhZ2VTaGFwZUlkcyA9IGRlcml2ZVNoYXBlSWRzSW5DdXJyZW50UGFnZShcbiAgICAgIHRoaXMuc3RvcmUsXG4gICAgICAoKSA9PiB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKVxuICAgICk7XG4gICAgdGhpcy5fcGFyZW50SWRzVG9DaGlsZElkcyA9IHBhcmVudHNUb0NoaWxkcmVuKHRoaXMuc3RvcmUpO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgdGhpcy5zdG9yZS5saXN0ZW4oKGNoYW5nZXMpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIGNoYW5nZXMpO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKHRoaXMuaGlzdG9yeS5kaXNwb3NlKTtcbiAgICB0aGlzLnJ1bihcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoe1xuICAgICAgICAgIGVkaXRpbmdTaGFwZUlkOiBudWxsLFxuICAgICAgICAgIGhvdmVyZWRTaGFwZUlkOiBudWxsLFxuICAgICAgICAgIGVyYXNpbmdTaGFwZUlkczogW11cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH1cbiAgICApO1xuICAgIGlmIChpbml0aWFsU3RhdGUgJiYgdGhpcy5yb290LmNoaWxkcmVuW2luaXRpYWxTdGF0ZV0gPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgRXJyb3IoYE5vIHN0YXRlIGZvdW5kIGZvciBpbml0aWFsU3RhdGUgXCIke2luaXRpYWxTdGF0ZX1cIi5gKTtcbiAgICB9XG4gICAgdGhpcy5yb290LmVudGVyKHZvaWQgMCwgXCJpbml0aWFsXCIpO1xuICAgIHRoaXMuZWRnZVNjcm9sbE1hbmFnZXIgPSBuZXcgRWRnZVNjcm9sbE1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5mb2N1c01hbmFnZXIgPSBuZXcgRm9jdXNNYW5hZ2VyKHRoaXMsIGF1dG9Gb2N1cyk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQodGhpcy5mb2N1c01hbmFnZXIuZGlzcG9zZS5iaW5kKHRoaXMuZm9jdXNNYW5hZ2VyKSk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZCkge1xuICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgIH1cbiAgICB0aGlzLm9uKFwidGlja1wiLCB0aGlzLl9mbHVzaEV2ZW50c0ZvclRpY2spO1xuICAgIHRoaXMudGltZXJzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB0aGlzLl90aWNrTWFuYWdlci5zdGFydCgpO1xuICAgIH0pO1xuICAgIHRoaXMucGVyZm9ybWFuY2VUcmFja2VyID0gbmV3IFBlcmZvcm1hbmNlVHJhY2tlcigpO1xuICAgIGlmICh0aGlzLnN0b3JlLnByb3BzLmNvbGxhYm9yYXRpb24/Lm1vZGUpIHtcbiAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLnN0b3JlLnByb3BzLmNvbGxhYm9yYXRpb24ubW9kZTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgICByZWFjdChcInVwZGF0ZSBjb2xsYWJvcmF0aW9uIG1vZGVcIiwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RvcmUucHV0KFt7IC4uLnRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLCBpc1JlYWRvbmx5OiBtb2RlLmdldCgpID09PSBcInJlYWRvbmx5XCIgfV0pO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgZ2V0SXNTaGFwZUhpZGRlbkNhY2hlKCkge1xuICAgIGlmICghdGhpcy5faXNTaGFwZUhpZGRlblByZWRpY2F0ZSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcImlzU2hhcGVIaWRkZW5cIiwgKHNoYXBlKSA9PiB7XG4gICAgICBjb25zdCBoaWRkZW5QYXJlbnQgPSB0aGlzLmZpbmRTaGFwZUFuY2VzdG9yKHNoYXBlLCAocCkgPT4gdGhpcy5pc1NoYXBlSGlkZGVuKHApKTtcbiAgICAgIGlmIChoaWRkZW5QYXJlbnQpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMuX2lzU2hhcGVIaWRkZW5QcmVkaWNhdGUoc2hhcGUsIHRoaXMpID8/IGZhbHNlO1xuICAgIH0pO1xuICB9XG4gIGlzU2hhcGVIaWRkZW4oc2hhcGVPcklkKSB7XG4gICAgaWYgKCF0aGlzLl9pc1NoYXBlSGlkZGVuUHJlZGljYXRlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICEhdGhpcy5nZXRJc1NoYXBlSGlkZGVuQ2FjaGUoKS5nZXQoXG4gICAgICB0eXBlb2Ygc2hhcGVPcklkID09PSBcInN0cmluZ1wiID8gc2hhcGVPcklkIDogc2hhcGVPcklkLmlkXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogRGlzcG9zZSB0aGUgZWRpdG9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuZm9yRWFjaCgoZGlzcG9zZSkgPT4gZGlzcG9zZSgpKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmNsZWFyKCk7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxuICBnZXRTaGFwZVV0aWwoYXJnKSB7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgPyBhcmcgOiBhcmcudHlwZTtcbiAgICBjb25zdCBzaGFwZVV0aWwgPSBnZXRPd25Qcm9wZXJ0eSh0aGlzLnNoYXBlVXRpbHMsIHR5cGUpO1xuICAgIGFzc2VydChzaGFwZVV0aWwsIGBObyBzaGFwZSB1dGlsIGZvdW5kIGZvciB0eXBlIFwiJHt0eXBlfVwiYCk7XG4gICAgcmV0dXJuIHNoYXBlVXRpbDtcbiAgfVxuICBnZXRCaW5kaW5nVXRpbChhcmcpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIiA/IGFyZyA6IGFyZy50eXBlO1xuICAgIGNvbnN0IGJpbmRpbmdVdGlsID0gZ2V0T3duUHJvcGVydHkodGhpcy5iaW5kaW5nVXRpbHMsIHR5cGUpO1xuICAgIGFzc2VydChiaW5kaW5nVXRpbCwgYE5vIGJpbmRpbmcgdXRpbCBmb3VuZCBmb3IgdHlwZSBcIiR7dHlwZX1cImApO1xuICAgIHJldHVybiBiaW5kaW5nVXRpbDtcbiAgfVxuICAvKipcbiAgICogVW5kbyB0byB0aGUgbGFzdCBtYXJrLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IudW5kbygpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1bmRvKCkge1xuICAgIHRoaXMuX2ZsdXNoRXZlbnRzRm9yVGljaygwKTtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgdGhpcy5oaXN0b3J5LnVuZG8oKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRDYW5VbmRvKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2V0TnVtVW5kb3MoKSA+IDA7XG4gIH1cbiAgLyoqXG4gICAqIFJlZG8gdG8gdGhlIG5leHQgbWFyay5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlZG8oKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVkbygpIHtcbiAgICB0aGlzLl9mbHVzaEV2ZW50c0ZvclRpY2soMCk7XG4gICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgIHRoaXMuaGlzdG9yeS5yZWRvKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xlYXJIaXN0b3J5KCkge1xuICAgIHRoaXMuaGlzdG9yeS5jbGVhcigpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldENhblJlZG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZXROdW1SZWRvcygpID4gMDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFwibWFya1wiLCBvciBzdG9wcGluZyBwb2ludCwgaW4gdGhlIHVuZG8gcmVkbyBoaXN0b3J5LiBDcmVhdGluZyBhIG1hcmsgd2lsbCBjbGVhclxuICAgKiBhbnkgcmVkb3MuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5tYXJrKClcbiAgICogZWRpdG9yLm1hcmsoJ2ZsaXAgc2hhcGVzJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBtYXJrSWQgLSBUaGUgbWFyaydzIGlkLCB1c3VhbGx5IHRoZSByZWFzb24gZm9yIGFkZGluZyB0aGUgbWFyay5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIEVkaXRvci5tYXJrSGlzdG9yeVN0b3BwaW5nUG9pbnR9IGluc3RlYWRcbiAgICovXG4gIG1hcmsobWFya0lkKSB7XG4gICAgaWYgKHR5cGVvZiBtYXJrSWQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFt0bGRyYXddIFxcYGVkaXRvci5oaXN0b3J5Lm1hcmsoXCIke21hcmtJZH1cIilcXGAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBcXGBjb25zdCBteU1hcmtJZCA9IGVkaXRvci5tYXJrSGlzdG9yeVN0b3BwaW5nUG9pbnQoKVxcYCBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJbdGxkcmF3XSBgZWRpdG9yLm1hcmsoKWAgaXMgZGVwcmVjYXRlZC4gVXNlIGBlZGl0b3IubWFya0hpc3RvcnlTdG9wcGluZ1BvaW50KClgIGluc3RlYWQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuaGlzdG9yeS5fbWFyayhtYXJrSWQgPz8gdW5pcXVlSWQoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBcIm1hcmtcIiwgb3Igc3RvcHBpbmcgcG9pbnQsIGluIHRoZSB1bmRvIHJlZG8gaGlzdG9yeS4gQ3JlYXRpbmcgYSBtYXJrIHdpbGwgY2xlYXJcbiAgICogYW55IHJlZG9zLiBZb3UgdHlwaWNhbGx5IHdhbnQgdG8gZG8gdGhpcyBqdXN0IGJlZm9yZSBhIHVzZXIgaW50ZXJhY3Rpb24gYmVnaW5zIG9yIGlzIGhhbmRsZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5tYXJrSGlzdG9yeVN0b3BwaW5nUG9pbnQoKVxuICAgKiBlZGl0b3IuZmxpcFNoYXBlcyhlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZXMoKSlcbiAgICogYGBgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGJlZ2luUm90YXRlTWFyayA9IGVkaXRvci5tYXJrSGlzdG9yeVN0b3BwaW5nUG9pbnQoKVxuICAgKiAvLyBpZiB0aGUgdXNlIGNhbmNlbHMgdGhlIHJvdGF0aW9uLCB5b3UgY2FuIGJhaWwgYmFjayB0byB0aGlzIG1hcmtcbiAgICogZWRpdG9yLmJhaWxUb01hcmsoYmVnaW5Sb3RhdGVNYXJrKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBtYXJrLCB1c2VmdWwgZm9yIGRlYnVnZ2luZyB0aGUgdW5kby9yZWRvIHN0YWNrc1xuICAgKiBAcmV0dXJucyBhIHVuaXF1ZSBpZCBmb3IgdGhlIG1hcmsgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGBzcXVhc2hUb01hcmtgIG9yIGBiYWlsVG9NYXJrYC5cbiAgICovXG4gIG1hcmtIaXN0b3J5U3RvcHBpbmdQb2ludChuYW1lKSB7XG4gICAgY29uc3QgaWQgPSBgWyR7bmFtZSA/PyBcInN0b3BcIn1dXyR7dW5pcXVlSWQoKX1gO1xuICAgIHRoaXMuaGlzdG9yeS5fbWFyayhpZCk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWwgdGhpcyBpcyBvbmx5IHVzZWQgdG8gaW1wbGVtZW50IHNvbWUgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgbG9naWMuIFNob3VsZCBiZSBmaW5lIHRvIGRlbGV0ZSBhZnRlciA2IG1vbnRocyBvciB3aGF0ZXZlci5cbiAgICovXG4gIGdldE1hcmtJZE1hdGNoaW5nKGlkU3Vic3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZXRNYXJrSWRNYXRjaGluZyhpZFN1YnN0cmluZyk7XG4gIH1cbiAgLyoqXG4gICAqIENvYWxlc2NlcyBhbGwgY2hhbmdlcyBzaW5jZSB0aGUgZ2l2ZW4gbWFyayBpbnRvIGEgc2luZ2xlIGNoYW5nZSwgcmVtb3ZpbmcgYW55IGludGVybWVkaWF0ZSBtYXJrcy5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IG5lZWQgdG8gJ2NvbXByZXNzJyB0aGUgcmVjZW50IGhpc3RvcnkgdG8gc2ltcGxpZnkgdGhlIHVuZG8vcmVkbyBleHBlcmllbmNlIG9mIGEgY29tcGxleCBpbnRlcmFjdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgYnVtcFNoYXBlc01hcmsgPSBlZGl0b3IubWFya0hpc3RvcnlTdG9wcGluZ1BvaW50KClcbiAgICogLy8gLi4uIHNvbWUgY2hhbmdlc1xuICAgKiBlZGl0b3Iuc3F1YXNoVG9NYXJrKGJ1bXBTaGFwZXNNYXJrKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG1hcmtJZCAtIFRoZSBtYXJrIGlkIHRvIHNxdWFzaCB0by5cbiAgICovXG4gIHNxdWFzaFRvTWFyayhtYXJrSWQpIHtcbiAgICB0aGlzLmhpc3Rvcnkuc3F1YXNoVG9NYXJrKG1hcmtJZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVuZG8gdG8gdGhlIGNsb3Nlc3QgbWFyaywgZGlzY2FyZGluZyB0aGUgY2hhbmdlcyBzbyB0aGV5IGNhbm5vdCBiZSByZWRvbmUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5iYWlsKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGJhaWwoKSB7XG4gICAgdGhpcy5oaXN0b3J5LmJhaWwoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVW5kbyB0byB0aGUgZ2l2ZW4gbWFyaywgZGlzY2FyZGluZyB0aGUgY2hhbmdlcyBzbyB0aGV5IGNhbm5vdCBiZSByZWRvbmUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGJlZ2luRHJhZyA9IGVkaXRvci5tYXJrSGlzdG9yeVN0b3BwaW5nUG9pbnQoKVxuICAgKiAvLyAuLi4gc29tZSBjaGFuZ2VzXG4gICAqIGVkaXRvci5iYWlsVG9NYXJrKGJlZ2luRHJhZylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGJhaWxUb01hcmsoaWQpIHtcbiAgICB0aGlzLmhpc3RvcnkuYmFpbFRvTWFyayhpZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBhIGZ1bmN0aW9uIGluIGEgdHJhbnNhY3Rpb24gd2l0aCBvcHRpb25hbCBvcHRpb25zIGZvciBjb250ZXh0LlxuICAgKiBZb3UgY2FuIHVzZSB0aGUgb3B0aW9ucyB0byBjaGFuZ2UgdGhlIHdheSB0aGF0IGhpc3RvcnkgaXMgdHJlYXRlZFxuICAgKiBvciBhbGxvdyBjaGFuZ2VzIHRvIGxvY2tlZCBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIHVwZGF0aW5nIHdpdGhcbiAgICogZWRpdG9yLnJ1bigoKSA9PiB7XG4gICAqIFx0ZWRpdG9yLnVwZGF0ZVNoYXBlKHsgLi4ubXlTaGFwZSwgeDogMTAwIH0pXG4gICAqIH0sIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9KVxuICAgKlxuICAgKiAvLyBmb3JjaW5nIGNoYW5nZXMgLyBkZWxldGlvbnMgZm9yIGxvY2tlZCBzaGFwZXNcbiAgICogZWRpdG9yLnRvZ2dsZUxvY2soW215U2hhcGVdKVxuICAgKiBlZGl0b3IucnVuKCgpID0+IHtcbiAgICogXHRlZGl0b3IudXBkYXRlU2hhcGUoeyAuLi5teVNoYXBlLCB4OiAxMDAgfSlcbiAgICogXHRlZGl0b3IuZGVsZXRlU2hhcGUobXlTaGFwZSlcbiAgICogfSwgeyBpZ25vcmVTaGFwZUxvY2s6IHRydWUgfSwgKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGZuIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGJhdGNoLlxuICAgKlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBydW4oZm4sIG9wdHMpIHtcbiAgICBjb25zdCBwcmV2aW91c0lnbm9yZVNoYXBlTG9jayA9IHRoaXMuX3Nob3VsZElnbm9yZVNoYXBlTG9jaztcbiAgICB0aGlzLl9zaG91bGRJZ25vcmVTaGFwZUxvY2sgPSBvcHRzPy5pZ25vcmVTaGFwZUxvY2sgPz8gcHJldmlvdXNJZ25vcmVTaGFwZUxvY2s7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaGlzdG9yeS5iYXRjaChmbiwgb3B0cyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX3Nob3VsZElnbm9yZVNoYXBlTG9jayA9IHByZXZpb3VzSWdub3JlU2hhcGVMb2NrO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGBFZGl0b3IucnVuYCBpbnN0ZWFkLlxuICAgKi9cbiAgYmF0Y2goZm4sIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5ydW4oZm4sIG9wdHMpO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFcnJvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYW5ub3RhdGVFcnJvcihlcnJvciwge1xuICAgIG9yaWdpbixcbiAgICB3aWxsQ3Jhc2hBcHAsXG4gICAgdGFncyxcbiAgICBleHRyYXNcbiAgfSkge1xuICAgIGNvbnN0IGRlZmF1bHRBbm5vdGF0aW9ucyA9IHRoaXMuY3JlYXRlRXJyb3JBbm5vdGF0aW9ucyhvcmlnaW4sIHdpbGxDcmFzaEFwcCk7XG4gICAgYW5ub3RhdGVFcnJvcihlcnJvciwge1xuICAgICAgdGFnczogeyAuLi5kZWZhdWx0QW5ub3RhdGlvbnMudGFncywgLi4udGFncyB9LFxuICAgICAgZXh0cmFzOiB7IC4uLmRlZmF1bHRBbm5vdGF0aW9ucy5leHRyYXMsIC4uLmV4dHJhcyB9XG4gICAgfSk7XG4gICAgaWYgKHdpbGxDcmFzaEFwcCkge1xuICAgICAgdGhpcy5zdG9yZS5tYXJrQXNQb3NzaWJseUNvcnJ1cHRlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGNyZWF0ZUVycm9yQW5ub3RhdGlvbnMob3JpZ2luLCB3aWxsQ3Jhc2hBcHApIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZWRpdGluZ1NoYXBlSWQgPSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgIHdpbGxDcmFzaEFwcFxuICAgICAgICB9LFxuICAgICAgICBleHRyYXM6IHtcbiAgICAgICAgICBhY3RpdmVTdGF0ZU5vZGU6IHRoaXMucm9vdC5nZXRQYXRoKCksXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZXM6IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKSxcbiAgICAgICAgICBlZGl0aW5nU2hhcGU6IGVkaXRpbmdTaGFwZUlkID8gdGhpcy5nZXRTaGFwZShlZGl0aW5nU2hhcGVJZCkgOiB2b2lkIDAsXG4gICAgICAgICAgaW5wdXRzOiB0aGlzLmlucHV0c1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFnczoge1xuICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICB3aWxsQ3Jhc2hBcHBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFzOiB7fVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFdlIGNhbid0IHVzZSBhbiBgYXRvbWAgaGVyZSBiZWNhdXNlIHRoZXJlJ3MgYSBjaGFuY2UgdGhhdCB3aGVuIGBjcmFzaEFuZFJlcG9ydEVycm9yYCBpcyBjYWxsZWQsXG4gICAqIHdlJ3JlIGluIGEgdHJhbnNhY3Rpb24gdGhhdCdzIGFib3V0IHRvIGJlIHJvbGxlZCBiYWNrIGR1ZSB0byB0aGUgc2FtZSBlcnJvciB3ZSdyZSBjdXJyZW50bHlcbiAgICogcmVwb3J0aW5nLlxuICAgKlxuICAgKiBJbnN0ZWFkLCB0byBsaXN0ZW4gdG8gY2hhbmdlcyB0byB0aGlzIHZhbHVlLCB5b3UgbmVlZCB0byBsaXN0ZW4gdG8gYXBwJ3MgYGNyYXNoYCBldmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRDcmFzaGluZ0Vycm9yKCkge1xuICAgIHJldHVybiB0aGlzLl9jcmFzaGluZ0Vycm9yO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY3Jhc2goZXJyb3IpIHtcbiAgICB0aGlzLl9jcmFzaGluZ0Vycm9yID0gZXJyb3I7XG4gICAgdGhpcy5zdG9yZS5tYXJrQXNQb3NzaWJseUNvcnJ1cHRlZCgpO1xuICAgIHRoaXMuZW1pdChcImNyYXNoXCIsIHsgZXJyb3IgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0UGF0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmdldFBhdGgoKS5zcGxpdChcInJvb3QuXCIpWzFdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciBhIGNlcnRhaW4gdG9vbCAob3Igb3RoZXIgc3RhdGUgbm9kZSkgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmlzSW4oJ3NlbGVjdCcpXG4gICAqIGVkaXRvci5pc0luKCdzZWxlY3QuYnJ1c2hpbmcnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhdGggLSBUaGUgcGF0aCBvZiBhY3RpdmUgc3RhdGVzLCBzZXBhcmF0ZWQgYnkgcGVyaW9kcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNJbihwYXRoKSB7XG4gICAgY29uc3QgaWRzID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgIGxldCBzdGF0ZSA9IHRoaXMucm9vdDtcbiAgICB3aGlsZSAoaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkID0gaWRzLnBvcCgpO1xuICAgICAgaWYgKCFpZCkgcmV0dXJuIHRydWU7XG4gICAgICBjb25zdCBjdXJyZW50ID0gc3RhdGUuZ2V0Q3VycmVudCgpO1xuICAgICAgaWYgKGN1cnJlbnQ/LmlkID09PSBpZCkge1xuICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIHN0YXRlID0gY3VycmVudDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoZSBzdGF0ZSBub2RlIGlzIGluIGFueSBvZiB0aGUgZ2l2ZW4gYWN0aXZlIHBhdGhzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBzdGF0ZS5pc0luQW55KCdzZWxlY3QnLCAnZXJhc2UnKVxuICAgKiBzdGF0ZS5pc0luQW55KCdzZWxlY3QuYnJ1c2hpbmcnLCAnZXJhc2UuaWRsZScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc0luQW55KC4uLnBhdGhzKSB7XG4gICAgcmV0dXJuIHBhdGhzLnNvbWUoKHBhdGgpID0+IHRoaXMuaXNJbihwYXRoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc2VsZWN0ZWQgdG9vbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldEN1cnJlbnRUb29sKCdoYW5kJylcbiAgICogZWRpdG9yLnNldEN1cnJlbnRUb29sKCdoYW5kJywgeyBkYXRlOiBEYXRlLm5vdygpIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHRvb2wgdG8gc2VsZWN0LlxuICAgKiBAcGFyYW0gaW5mbyAtIEFyYml0cmFyeSBkYXRhIHRvIHBhc3MgYWxvbmcgaW50byB0aGUgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0Q3VycmVudFRvb2woaWQsIGluZm8gPSB7fSkge1xuICAgIHRoaXMucm9vdC50cmFuc2l0aW9uKGlkLCBpbmZvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRDdXJyZW50VG9vbCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmdldEN1cnJlbnQoKTtcbiAgfVxuICBnZXRDdXJyZW50VG9vbElkKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUb29sID0gdGhpcy5nZXRDdXJyZW50VG9vbCgpO1xuICAgIGlmICghY3VycmVudFRvb2wpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiBjdXJyZW50VG9vbC5nZXRDdXJyZW50VG9vbElkTWFzaygpID8/IGN1cnJlbnRUb29sLmlkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBkZXNjZW5kYW50IGJ5IGl0cyBwYXRoLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBzdGF0ZS5nZXRTdGF0ZURlc2NlbmRhbnQoJ3NlbGVjdCcpXG4gICAqIHN0YXRlLmdldFN0YXRlRGVzY2VuZGFudCgnc2VsZWN0LmJydXNoaW5nJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXRoIC0gVGhlIGRlc2NlbmRhbnQncyBwYXRoIG9mIHN0YXRlIGlkcywgc2VwYXJhdGVkIGJ5IHBlcmlvZHMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFN0YXRlRGVzY2VuZGFudChwYXRoKSB7XG4gICAgY29uc3QgaWRzID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgIGxldCBzdGF0ZSA9IHRoaXMucm9vdDtcbiAgICB3aGlsZSAoaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGlkID0gaWRzLnBvcCgpO1xuICAgICAgaWYgKCFpZCkgcmV0dXJuIHN0YXRlO1xuICAgICAgY29uc3QgY2hpbGRTdGF0ZSA9IHN0YXRlLmNoaWxkcmVuPy5baWRdO1xuICAgICAgaWYgKCFjaGlsZFN0YXRlKSByZXR1cm4gdm9pZCAwO1xuICAgICAgc3RhdGUgPSBjaGlsZFN0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbiAgZ2V0RG9jdW1lbnRTZXR0aW5ncygpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXQoVExET0NVTUVOVF9JRCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZ2xvYmFsIGRvY3VtZW50IHNldHRpbmdzIHRoYXQgYXBwbHkgdG8gYWxsIHVzZXJzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqKi9cbiAgdXBkYXRlRG9jdW1lbnRTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnB1dChbeyAuLi50aGlzLmdldERvY3VtZW50U2V0dGluZ3MoKSwgLi4uc2V0dGluZ3MgfV0pO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRJbnN0YW5jZVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmdldChUTElOU1RBTkNFX0lEKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBpbnN0YW5jZSdzIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbCAtIEEgcGFydGlhbCBvYmplY3QgdG8gdXBkYXRlIHRoZSBpbnN0YW5jZSBzdGF0ZSB3aXRoLlxuICAgKiBAcGFyYW0gaGlzdG9yeU9wdGlvbnMgLSBIaXN0b3J5IGJhdGNoIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZUluc3RhbmNlU3RhdGUocGFydGlhbCwgaGlzdG9yeU9wdGlvbnMpIHtcbiAgICB0aGlzLl91cGRhdGVJbnN0YW5jZVN0YXRlKHBhcnRpYWwsIHsgaGlzdG9yeTogXCJpZ25vcmVcIiwgLi4uaGlzdG9yeU9wdGlvbnMgfSk7XG4gICAgaWYgKHBhcnRpYWwuaXNDaGFuZ2luZ1N0eWxlICE9PSB2b2lkIDApIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9pc0NoYW5naW5nU3R5bGVUaW1lb3V0KTtcbiAgICAgIGlmIChwYXJ0aWFsLmlzQ2hhbmdpbmdTdHlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9pc0NoYW5naW5nU3R5bGVUaW1lb3V0ID0gdGhpcy50aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGlzQ2hhbmdpbmdTdHlsZTogZmFsc2UgfSwgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH0pO1xuICAgICAgICB9LCAyZTMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF91cGRhdGVJbnN0YW5jZVN0YXRlKHBhcnRpYWwsIG9wdHMpIHtcbiAgICB0aGlzLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnN0b3JlLnB1dChbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKSxcbiAgICAgICAgICAuLi5wYXJ0aWFsXG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgIH0sIG9wdHMpO1xuICB9XG4gIGdldE9wZW5NZW51cygpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51cy5nZXRPcGVuTWVudXMoKTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGBlZGl0b3IubWVudXMuYWRkT3Blbk1lbnVgIGluc3RlYWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZE9wZW5NZW51KGlkKSB7XG4gICAgdGhpcy5tZW51cy5hZGRPcGVuTWVudShpZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBgZWRpdG9yLm1lbnVzLmRlbGV0ZU9wZW5NZW51YCBpbnN0ZWFkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkZWxldGVPcGVuTWVudShpZCkge1xuICAgIHRoaXMubWVudXMuZGVsZXRlT3Blbk1lbnUoaWQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYGVkaXRvci5tZW51cy5jbGVhck9wZW5NZW51c2AgaW5zdGVhZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYXJPcGVuTWVudXMoKSB7XG4gICAgdGhpcy5tZW51cy5jbGVhck9wZW5NZW51cygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldElzTWVudU9wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMubWVudXMuaGFzQW55T3Blbk1lbnVzKCk7XG4gIH1cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEN1cnNvciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqXG4gICAqIFNldCB0aGUgY3Vyc29yLlxuICAgKlxuICAgKiBAcGFyYW0gY3Vyc29yIC0gVGhlIGN1cnNvciB0byBzZXQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBjdXJzb3I6IHsgLi4udGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuY3Vyc29yLCAuLi5jdXJzb3IgfSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRQYWdlU3RhdGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRQYWdlU3RhdGVzUXVlcnkoKS5nZXQoKTtcbiAgfVxuICBfZ2V0UGFnZVN0YXRlc1F1ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnF1ZXJ5LnJlY29yZHMoXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIpO1xuICB9XG4gIGdldEN1cnJlbnRQYWdlU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KHRoaXMuX2dldEN1cnJlbnRQYWdlU3RhdGVJZCgpKTtcbiAgfVxuICBfZ2V0Q3VycmVudFBhZ2VTdGF0ZUlkKCkge1xuICAgIHJldHVybiBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlSWQodGhpcy5nZXRDdXJyZW50UGFnZUlkKCkpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhpcyBpbnN0YW5jZSdzIHBhZ2Ugc3RhdGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgaWQ6ICdwYWdlMScsIGVkaXRpbmdTaGFwZUlkOiAnc2hhcGU6MTIzJyB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcnRpYWwgLSBUaGUgcGFydGlhbCBvZiB0aGUgcGFnZSBzdGF0ZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2hhbmdlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZShwYXJ0aWFsKSB7XG4gICAgdGhpcy5fdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZShwYXJ0aWFsKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZShwYXJ0aWFsKSB7XG4gICAgdGhpcy5zdG9yZS51cGRhdGUocGFydGlhbC5pZCA/PyB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5pZCwgKHN0YXRlKSA9PiAoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICAuLi5wYXJ0aWFsXG4gICAgfSkpO1xuICB9XG4gIGdldFNlbGVjdGVkU2hhcGVJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLnNlbGVjdGVkU2hhcGVJZHM7XG4gIH1cbiAgZ2V0U2VsZWN0ZWRTaGFwZXMoKSB7XG4gICAgY29uc3QgeyBzZWxlY3RlZFNoYXBlSWRzIH0gPSB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKTtcbiAgICByZXR1cm4gY29tcGFjdChzZWxlY3RlZFNoYXBlSWRzLm1hcCgoaWQpID0+IHRoaXMuc3RvcmUuZ2V0KGlkKSkpO1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Qgb25lIG9yIG1vcmUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0U2VsZWN0ZWRTaGFwZXMoWydpZDEnXSlcbiAgICogZWRpdG9yLnNldFNlbGVjdGVkU2hhcGVzKFsnaWQxJywgJ2lkMiddKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWRzKSB0byBzZWxlY3QuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFNlbGVjdGVkU2hhcGVzKHNoYXBlcykge1xuICAgIHJldHVybiB0aGlzLnJ1bihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgaWRzID0gc2hhcGVzLm1hcCgoc2hhcGUpID0+IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQpO1xuICAgICAgICBjb25zdCB7IHNlbGVjdGVkU2hhcGVJZHM6IHByZXZTZWxlY3RlZFNoYXBlSWRzIH0gPSB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKTtcbiAgICAgICAgY29uc3QgcHJldlNldCA9IG5ldyBTZXQocHJldlNlbGVjdGVkU2hhcGVJZHMpO1xuICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PT0gcHJldlNldC5zaXplICYmIGlkcy5ldmVyeSgoaWQpID0+IHByZXZTZXQuaGFzKGlkKSkpIHJldHVybiBudWxsO1xuICAgICAgICB0aGlzLnN0b3JlLnB1dChbeyAuLi50aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKSwgc2VsZWN0ZWRTaGFwZUlkczogaWRzIH1dKTtcbiAgICAgIH0sXG4gICAgICB7IGhpc3Rvcnk6IFwicmVjb3JkLXByZXNlcnZlUmVkb1N0YWNrXCIgfVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGV0aGVyIG9yIG5vdCBhbnkgb2YgYSBzaGFwZSdzIGFuY2VzdG9ycyBhcmUgc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIG9mIHRoZSBzaGFwZSB0byBjaGVjay5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNBbmNlc3RvclNlbGVjdGVkKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZCA/PyBudWxsO1xuICAgIGNvbnN0IF9zaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgIGlmICghX3NoYXBlKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIHJldHVybiAhIXRoaXMuZmluZFNoYXBlQW5jZXN0b3IoX3NoYXBlLCAocGFyZW50KSA9PiBzZWxlY3RlZFNoYXBlSWRzLmluY2x1ZGVzKHBhcmVudC5pZCkpO1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Qgb25lIG9yIG1vcmUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2VsZWN0KCdpZDEnKVxuICAgKiBlZGl0b3Iuc2VsZWN0KCdpZDEnLCAnaWQyJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGUgKG9yIHRoZSBzaGFwZSBpZHMpIHRvIHNlbGVjdC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VsZWN0KC4uLnNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzaGFwZSkgPT4gc2hhcGUuaWQpO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoaWRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgc2hhcGUgZnJvbSB0aGUgZXhpc3Rpbmcgc2V0IG9mIHNlbGVjdGVkIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRlc2VsZWN0KHNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVzZWxlY3QoLi4uc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBzaGFwZS5pZCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIGlmIChzZWxlY3RlZFNoYXBlSWRzLmxlbmd0aCA+IDAgJiYgaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoc2VsZWN0ZWRTaGFwZUlkcy5maWx0ZXIoKGlkKSA9PiAhaWRzLmluY2x1ZGVzKGlkKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2VsZWN0IGFsbCBkaXJlY3QgY2hpbGRyZW4gb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNlbGVjdEFsbCgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZWxlY3RBbGwoKSB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudCh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gICAgaWYgKGlkcy5sZW5ndGggPD0gMCkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5zZXRTZWxlY3RlZFNoYXBlcyh0aGlzLl9nZXRVbmxvY2tlZFNoYXBlSWRzKGlkcykpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhciB0aGUgc2VsZWN0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2VsZWN0Tm9uZSgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZWxlY3ROb25lKCkge1xuICAgIGlmICh0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNldFNlbGVjdGVkU2hhcGVzKFtdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0T25seVNlbGVjdGVkU2hhcGVJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRPbmx5U2VsZWN0ZWRTaGFwZSgpPy5pZCA/PyBudWxsO1xuICB9XG4gIGdldE9ubHlTZWxlY3RlZFNoYXBlKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlcygpO1xuICAgIHJldHVybiBzZWxlY3RlZFNoYXBlcy5sZW5ndGggPT09IDEgPyBzZWxlY3RlZFNoYXBlc1swXSA6IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0U2hhcGVzUGFnZUJvdW5kcyhzaGFwZUlkcykge1xuICAgIGNvbnN0IGJvdW5kcyA9IGNvbXBhY3Qoc2hhcGVJZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpKSk7XG4gICAgaWYgKGJvdW5kcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICAgIHJldHVybiBCb3guQ29tbW9uKGJvdW5kcyk7XG4gIH1cbiAgZ2V0U2VsZWN0aW9uUGFnZUJvdW5kcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTaGFwZXNQYWdlQm91bmRzKHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRTaGFwZXNTaGFyZWRSb3RhdGlvbihzaGFwZUlkcykge1xuICAgIGxldCBmb3VuZEZpcnN0ID0gZmFsc2U7XG4gICAgbGV0IHJvdGF0aW9uID0gMDtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHNoYXBlSWRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWRzW2ldKTtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSkgY29udGludWU7XG4gICAgICBpZiAoZm91bmRGaXJzdCkge1xuICAgICAgICBpZiAocGFnZVRyYW5zZm9ybS5yb3RhdGlvbigpICE9PSByb3RhdGlvbikge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgcm90YXRpb24gPSBwYWdlVHJhbnNmb3JtLnJvdGF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb3RhdGlvbjtcbiAgfVxuICBnZXRTZWxlY3Rpb25Sb3RhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTaGFwZXNTaGFyZWRSb3RhdGlvbih0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKSk7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0U2hhcGVzUm90YXRlZFBhZ2VCb3VuZHMoc2hhcGVJZHMpIHtcbiAgICBpZiAoc2hhcGVJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3Rpb25Sb3RhdGlvbiA9IHRoaXMuZ2V0U2hhcGVzU2hhcmVkUm90YXRpb24oc2hhcGVJZHMpO1xuICAgIGlmIChzZWxlY3Rpb25Sb3RhdGlvbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVzUGFnZUJvdW5kcyhzaGFwZUlkcykgPz8gdm9pZCAwO1xuICAgIH1cbiAgICBpZiAoc2hhcGVJZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFNoYXBlR2VvbWV0cnkoc2hhcGVJZHNbMF0pLmJvdW5kcy5jbG9uZSgpO1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWRzWzBdKTtcbiAgICAgIGJvdW5kcy5wb2ludCA9IHBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50KGJvdW5kcy5wb2ludCk7XG4gICAgICByZXR1cm4gYm91bmRzO1xuICAgIH1cbiAgICBjb25zdCBib3hGcm9tUm90YXRlZFZlcnRpY2VzID0gQm94LkZyb21Qb2ludHMoXG4gICAgICBzaGFwZUlkcy5mbGF0TWFwKChpZCkgPT4ge1xuICAgICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oaWQpO1xuICAgICAgICBpZiAoIXBhZ2VUcmFuc2Zvcm0pIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIHBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50cyh0aGlzLmdldFNoYXBlR2VvbWV0cnkoaWQpLmJvdW5kcy5jb3JuZXJzKTtcbiAgICAgIH0pLm1hcCgocCkgPT4gcC5yb3QoLXNlbGVjdGlvblJvdGF0aW9uKSlcbiAgICApO1xuICAgIGJveEZyb21Sb3RhdGVkVmVydGljZXMucG9pbnQgPSBib3hGcm9tUm90YXRlZFZlcnRpY2VzLnBvaW50LnJvdChzZWxlY3Rpb25Sb3RhdGlvbik7XG4gICAgcmV0dXJuIGJveEZyb21Sb3RhdGVkVmVydGljZXM7XG4gIH1cbiAgZ2V0U2VsZWN0aW9uUm90YXRlZFBhZ2VCb3VuZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVzUm90YXRlZFBhZ2VCb3VuZHModGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCkpO1xuICB9XG4gIGdldFNlbGVjdGlvblJvdGF0ZWRTY3JlZW5Cb3VuZHMoKSB7XG4gICAgY29uc3QgYm91bmRzID0gdGhpcy5nZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kcygpO1xuICAgIGlmICghYm91bmRzKSByZXR1cm4gdm9pZCAwO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5wYWdlVG9TY3JlZW4oYm91bmRzLnBvaW50KTtcbiAgICBjb25zdCB6b29tID0gdGhpcy5nZXRab29tTGV2ZWwoKTtcbiAgICByZXR1cm4gbmV3IEJveCh4LCB5LCBib3VuZHMud2lkdGggKiB6b29tLCBib3VuZHMuaGVpZ2h0ICogem9vbSk7XG4gIH1cbiAgZ2V0Rm9jdXNlZEdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID8/IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICB9XG4gIGdldEZvY3VzZWRHcm91cCgpIHtcbiAgICBjb25zdCBmb2N1c2VkR3JvdXBJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICByZXR1cm4gZm9jdXNlZEdyb3VwSWQgPyB0aGlzLmdldFNoYXBlKGZvY3VzZWRHcm91cElkKSA6IHZvaWQgMDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IGZvY3VzZWQgZ3JvdXAgc2hhcGUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBncm91cCBzaGFwZSBpZCAob3IgZ3JvdXAgc2hhcGUncyBpZCkgdG8gc2V0IGFzIHRoZSBmb2N1c2VkIGdyb3VwIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRGb2N1c2VkR3JvdXAoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBzaGFwZTIgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmICghc2hhcGUyKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBFZGl0b3Iuc2V0Rm9jdXNlZEdyb3VwOiBTaGFwZSB3aXRoIGlkICR7aWR9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZTIsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgYEVkaXRvci5zZXRGb2N1c2VkR3JvdXA6IENhbm5vdCBzZXQgZm9jdXNlZCBncm91cCB0byBzaGFwZSBvZiB0eXBlICR7c2hhcGUyLnR5cGV9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaWQgPT09IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKSkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5pZCwgKHMpID0+ICh7IC4uLnMsIGZvY3VzZWRHcm91cElkOiBpZCB9KSk7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcInJlY29yZC1wcmVzZXJ2ZVJlZG9TdGFja1wiIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBFeGl0IHRoZSBjdXJyZW50IGZvY3VzZWQgZ3JvdXAsIG1vdmluZyB1cCB0byB0aGUgbmV4dCBwYXJlbnQgZ3JvdXAgaWYgdGhlcmUgaXMgb25lLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwb3BGb2N1c2VkR3JvdXBJZCgpIHtcbiAgICBjb25zdCBmb2N1c2VkR3JvdXAgPSB0aGlzLmdldEZvY3VzZWRHcm91cCgpO1xuICAgIGlmIChmb2N1c2VkR3JvdXApIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5maW5kU2hhcGVBbmNlc3RvcihcbiAgICAgICAgZm9jdXNlZEdyb3VwLFxuICAgICAgICAoc2hhcGUpID0+IHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0Rm9jdXNlZEdyb3VwKG1hdGNoPy5pZCA/PyBudWxsKTtcbiAgICAgIHRoaXMuc2VsZWN0KGZvY3VzZWRHcm91cC5pZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNlZEdyb3VwKG51bGwpO1xuICAgICAgdGhpcy5zZWxlY3ROb25lKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldEVkaXRpbmdTaGFwZUlkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5lZGl0aW5nU2hhcGVJZDtcbiAgfVxuICBnZXRFZGl0aW5nU2hhcGUoKSB7XG4gICAgY29uc3QgZWRpdGluZ1NoYXBlSWQgPSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCk7XG4gICAgcmV0dXJuIGVkaXRpbmdTaGFwZUlkID8gdGhpcy5nZXRTaGFwZShlZGl0aW5nU2hhcGVJZCkgOiB2b2lkIDA7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBlZGl0aW5nIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0RWRpdGluZ1NoYXBlKG15U2hhcGUpXG4gICAqIGVkaXRvci5zZXRFZGl0aW5nU2hhcGUobXlTaGFwZS5pZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIHNldCBhcyBlZGl0aW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRFZGl0aW5nU2hhcGUoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgaWYgKGlkICE9PSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCkpIHtcbiAgICAgIGlmIChpZCkge1xuICAgICAgICBjb25zdCBzaGFwZTIgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgICAgaWYgKHNoYXBlMiAmJiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZTIpLmNhbkVkaXQoc2hhcGUyKSkge1xuICAgICAgICAgIHRoaXMucnVuKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgZWRpdGluZ1NoYXBlSWQ6IGlkIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5ydW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgZWRpdGluZ1NoYXBlSWQ6IG51bGwgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRIb3ZlcmVkU2hhcGVJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGFnZVN0YXRlKCkuaG92ZXJlZFNoYXBlSWQ7XG4gIH1cbiAgZ2V0SG92ZXJlZFNoYXBlKCkge1xuICAgIGNvbnN0IGhvdmVyZWRTaGFwZUlkID0gdGhpcy5nZXRIb3ZlcmVkU2hhcGVJZCgpO1xuICAgIHJldHVybiBob3ZlcmVkU2hhcGVJZCA/IHRoaXMuZ2V0U2hhcGUoaG92ZXJlZFNoYXBlSWQpIDogdm9pZCAwO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGVkaXRvcidzIGN1cnJlbnQgaG92ZXJlZCBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldEhvdmVyZWRTaGFwZShteVNoYXBlKVxuICAgKiBlZGl0b3Iuc2V0SG92ZXJlZFNoYXBlKG15U2hhcGUuaWQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHNoYXBlIGlkKSB0byBzZXQgYXMgaG92ZXJlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0SG92ZXJlZFNoYXBlKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZCA/PyBudWxsO1xuICAgIGlmIChpZCA9PT0gdGhpcy5nZXRIb3ZlcmVkU2hhcGVJZCgpKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLnJ1bihcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgaG92ZXJlZFNoYXBlSWQ6IGlkIH0pO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRIaW50aW5nU2hhcGVJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmhpbnRpbmdTaGFwZUlkcztcbiAgfVxuICBnZXRIaW50aW5nU2hhcGUoKSB7XG4gICAgY29uc3QgaGludGluZ1NoYXBlSWRzID0gdGhpcy5nZXRIaW50aW5nU2hhcGVJZHMoKTtcbiAgICByZXR1cm4gY29tcGFjdChoaW50aW5nU2hhcGVJZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBlZGl0b3IncyBjdXJyZW50IGhpbnRpbmcgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0SGludGluZ1NoYXBlcyhbbXlTaGFwZV0pXG4gICAqIGVkaXRvci5zZXRIaW50aW5nU2hhcGVzKFtteVNoYXBlLmlkXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIHNldCBhcyBoaW50aW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRIaW50aW5nU2hhcGVzKHNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzaGFwZSkgPT4gc2hhcGUuaWQpO1xuICAgIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLl91cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgaGludGluZ1NoYXBlSWRzOiBkZWR1cGUoaWRzKSB9KTtcbiAgICAgIH0sXG4gICAgICB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0RXJhc2luZ1NoYXBlSWRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5lcmFzaW5nU2hhcGVJZHM7XG4gIH1cbiAgZ2V0RXJhc2luZ1NoYXBlcygpIHtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIHJldHVybiBjb21wYWN0KGVyYXNpbmdTaGFwZUlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGVkaXRvcidzIGN1cnJlbnQgZXJhc2luZyBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRFcmFzaW5nU2hhcGVzKFtteVNoYXBlXSlcbiAgICogZWRpdG9yLnNldEVyYXNpbmdTaGFwZXMoW215U2hhcGUuaWRdKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc2V0IGFzIGhpbnRpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEVyYXNpbmdTaGFwZXMoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBzaGFwZS5pZCk7XG4gICAgaWRzLnNvcnQoKTtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PT0gZXJhc2luZ1NoYXBlSWRzLmxlbmd0aCkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaWRzW2ldICE9PSBlcmFzaW5nU2hhcGVJZHNbaV0pIHtcbiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSh7IGVyYXNpbmdTaGFwZUlkczogaWRzIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSh7IGVyYXNpbmdTaGFwZUlkczogaWRzIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH1cbiAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8vIENyb3BwaW5nXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBjcm9wcGluZyBzaGFwZSdzIGlkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDcm9wcGluZ1NoYXBlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmNyb3BwaW5nU2hhcGVJZDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IGNyb3BwaW5nIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0Q3JvcHBpbmdTaGFwZShteVNoYXBlKVxuICAgKiBlZGl0b3Iuc2V0Q3JvcHBpbmdTaGFwZShteVNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gc2V0IGFzIGNyb3BwaW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRDcm9wcGluZ1NoYXBlKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZCA/PyBudWxsO1xuICAgIGlmIChpZCAhPT0gdGhpcy5nZXRDcm9wcGluZ1NoYXBlSWQoKSkge1xuICAgICAgdGhpcy5ydW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBjcm9wcGluZ1NoYXBlSWQ6IG51bGwgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlMiA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgICAgICAgICAgY29uc3QgdXRpbCA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlMik7XG4gICAgICAgICAgICBpZiAoc2hhcGUyICYmIHV0aWwuY2FuQ3JvcChzaGFwZTIpKSB7XG4gICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSh7IGNyb3BwaW5nU2hhcGVJZDogaWQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgX3Vuc2FmZV9nZXRDYW1lcmFJZCgpIHtcbiAgICByZXR1cm4gQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZCh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gIH1cbiAgZ2V0Q2FtZXJhKCkge1xuICAgIGNvbnN0IGJhc2VDYW1lcmEgPSB0aGlzLnN0b3JlLmdldCh0aGlzLl91bnNhZmVfZ2V0Q2FtZXJhSWQoKSk7XG4gICAgaWYgKHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLmdldCgpKSB7XG4gICAgICBjb25zdCBmb2xsb3dpbmdDYW1lcmEgPSB0aGlzLmdldENhbWVyYUZvckZvbGxvd2luZygpO1xuICAgICAgaWYgKGZvbGxvd2luZ0NhbWVyYSkge1xuICAgICAgICByZXR1cm4geyAuLi5iYXNlQ2FtZXJhLCAuLi5mb2xsb3dpbmdDYW1lcmEgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2VDYW1lcmE7XG4gIH1cbiAgZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nKCkge1xuICAgIGNvbnN0IGZvbGxvd2luZ1VzZXJJZCA9IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZDtcbiAgICBpZiAoIWZvbGxvd2luZ1VzZXJJZCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbGVhZGVyUHJlc2VuY2UgPSB0aGlzLmdldENvbGxhYm9yYXRvcnMoKS5maW5kKChjKSA9PiBjLnVzZXJJZCA9PT0gZm9sbG93aW5nVXNlcklkKTtcbiAgICBpZiAoIWxlYWRlclByZXNlbmNlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB7IHc6IGx3LCBoOiBsaCB9ID0gbGVhZGVyUHJlc2VuY2Uuc2NyZWVuQm91bmRzO1xuICAgIGNvbnN0IHsgeDogbHgsIHk6IGx5LCB6OiBseiB9ID0gbGVhZGVyUHJlc2VuY2UuY2FtZXJhO1xuICAgIGNvbnN0IHRoZWlyVmlld3BvcnQgPSBuZXcgQm94KC1seCwgLWx5LCBsdyAvIGx6LCBsaCAvIGx6KTtcbiAgICBjb25zdCBvdXJWaWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKS5jbG9uZSgpO1xuICAgIGNvbnN0IG91ckFzcGVjdFJhdGlvID0gb3VyVmlld3BvcnQud2lkdGggLyBvdXJWaWV3cG9ydC5oZWlnaHQ7XG4gICAgb3VyVmlld3BvcnQud2lkdGggPSB0aGVpclZpZXdwb3J0LndpZHRoO1xuICAgIG91clZpZXdwb3J0LmhlaWdodCA9IG91clZpZXdwb3J0LndpZHRoIC8gb3VyQXNwZWN0UmF0aW87XG4gICAgaWYgKG91clZpZXdwb3J0LmhlaWdodCA8IHRoZWlyVmlld3BvcnQuaGVpZ2h0KSB7XG4gICAgICBvdXJWaWV3cG9ydC5oZWlnaHQgPSB0aGVpclZpZXdwb3J0LmhlaWdodDtcbiAgICAgIG91clZpZXdwb3J0LndpZHRoID0gb3VyVmlld3BvcnQuaGVpZ2h0ICogb3VyQXNwZWN0UmF0aW87XG4gICAgfVxuICAgIG91clZpZXdwb3J0LmNlbnRlciA9IHRoZWlyVmlld3BvcnQuY2VudGVyO1xuICAgIHJldHVybiBvdXJWaWV3cG9ydDtcbiAgfVxuICBnZXRDYW1lcmFGb3JGb2xsb3dpbmcoKSB7XG4gICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kc0ZvckZvbGxvd2luZygpO1xuICAgIGlmICghdmlld3BvcnQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICB4OiAtdmlld3BvcnQueCxcbiAgICAgIHk6IC12aWV3cG9ydC55LFxuICAgICAgejogdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLncgLyB2aWV3cG9ydC53aWR0aFxuICAgIH07XG4gIH1cbiAgZ2V0Wm9vbUxldmVsKCkge1xuICAgIHJldHVybiB0aGlzLmdldENhbWVyYSgpLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY2FtZXJhJ3MgaW5pdGlhbCBvciByZXNldCB6b29tIGxldmVsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0SW5pdGlhbFpvb20oKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpYyAqL1xuICBnZXRJbml0aWFsWm9vbSgpIHtcbiAgICBjb25zdCBjYW1lcmFPcHRpb25zID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKCFjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzKSByZXR1cm4gMTtcbiAgICBpZiAoY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5pbml0aWFsWm9vbSA9PT0gXCJkZWZhdWx0XCIpIHJldHVybiAxO1xuICAgIGNvbnN0IHsgengsIHp5IH0gPSBnZXRDYW1lcmFGaXRYRml0WSh0aGlzLCBjYW1lcmFPcHRpb25zKTtcbiAgICBzd2l0Y2ggKGNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMuaW5pdGlhbFpvb20pIHtcbiAgICAgIGNhc2UgXCJmaXQtbWluXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHp4LCB6eSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1heFwiOiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbih6eCwgenkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC14XCI6IHtcbiAgICAgICAgcmV0dXJuIHp4O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC15XCI6IHtcbiAgICAgICAgcmV0dXJuIHp5O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC1taW4tMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIE1hdGgubWF4KHp4LCB6eSkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC1tYXgtMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIE1hdGgubWluKHp4LCB6eSkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC14LTEwMFwiOiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbigxLCB6eCk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXktMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIHp5KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMuaW5pdGlhbFpvb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjYW1lcmEncyBiYXNlIGxldmVsIGZvciBjYWxjdWxhdGluZyBhY3R1YWwgem9vbSBsZXZlbHMgYmFzZWQgb24gdGhlIHpvb20gc3RlcHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRCYXNlWm9vbSgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljICovXG4gIGdldEJhc2Vab29tKCkge1xuICAgIGNvbnN0IGNhbWVyYU9wdGlvbnMgPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICBpZiAoIWNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMpIHJldHVybiAxO1xuICAgIGlmIChjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzLmJhc2Vab29tID09PSBcImRlZmF1bHRcIikgcmV0dXJuIDE7XG4gICAgY29uc3QgeyB6eCwgenkgfSA9IGdldENhbWVyYUZpdFhGaXRZKHRoaXMsIGNhbWVyYU9wdGlvbnMpO1xuICAgIHN3aXRjaCAoY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5iYXNlWm9vbSkge1xuICAgICAgY2FzZSBcImZpdC1taW5cIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoengsIHp5KTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaXQtbWF4XCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHp4LCB6eSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXhcIjoge1xuICAgICAgICByZXR1cm4geng7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXlcIjoge1xuICAgICAgICByZXR1cm4genk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1pbi0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgTWF0aC5tYXgoengsIHp5KSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1heC0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgTWF0aC5taW4oengsIHp5KSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXgtMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIHp4KTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaXQteS0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgenkpO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBleGhhdXN0aXZlU3dpdGNoRXJyb3IoY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5iYXNlWm9vbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgY2FtZXJhIG9wdGlvbnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRDYW1lcmFPcHRpb25zKClcbiAgICogYGBgXG4gICAqXG4gICAqICBAcHVibGljICovXG4gIGdldENhbWVyYU9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbWVyYU9wdGlvbnMuZ2V0KCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY2FtZXJhIG9wdGlvbnMuIENoYW5naW5nIHRoZSBvcHRpb25zIHdvbid0IGltbWVkaWF0ZWx5IGNoYW5nZSB0aGUgY2FtZXJhIGl0c2VsZiwgc28geW91IG1heSB3YW50IHRvIGNhbGwgYHNldENhbWVyYWAgYWZ0ZXIgY2hhbmdpbmcgdGhlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRDYW1lcmFPcHRpb25zKG15Q2FtZXJhT3B0aW9ucylcbiAgICogZWRpdG9yLnNldENhbWVyYShlZGl0b3IuZ2V0Q2FtZXJhKCkpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyAtIFRoZSBjYW1lcmEgb3B0aW9ucyB0byBzZXQuXG4gICAqXG4gICAqIEBwdWJsaWMgKi9cbiAgc2V0Q2FtZXJhT3B0aW9ucyhvcHRzKSB7XG4gICAgY29uc3QgbmV4dCA9IHN0cnVjdHVyZWRDbG9uZSh7XG4gICAgICAuLi50aGlzLl9jYW1lcmFPcHRpb25zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpLFxuICAgICAgLi4ub3B0c1xuICAgIH0pO1xuICAgIGlmIChuZXh0Lnpvb21TdGVwcz8ubGVuZ3RoIDwgMSkgbmV4dC56b29tU3RlcHMgPSBbMV07XG4gICAgdGhpcy5fY2FtZXJhT3B0aW9ucy5zZXQobmV4dCk7XG4gICAgdGhpcy5zZXRDYW1lcmEodGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXRDb25zdHJhaW5lZENhbWVyYShwb2ludCwgb3B0cykge1xuICAgIGNvbnN0IGN1cnJlbnRDYW1lcmEgPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIGxldCB7IHgsIHksIHogPSBjdXJyZW50Q2FtZXJhLnogfSA9IHBvaW50O1xuICAgIGlmICghb3B0cz8uZm9yY2UpIHtcbiAgICAgIGNvbnN0IGNhbWVyYU9wdGlvbnMgPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICAgIGNvbnN0IHpvb21NaW4gPSBjYW1lcmFPcHRpb25zLnpvb21TdGVwc1swXTtcbiAgICAgIGNvbnN0IHpvb21NYXggPSBsYXN0KGNhbWVyYU9wdGlvbnMuem9vbVN0ZXBzKTtcbiAgICAgIGNvbnN0IHZzYiA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICAgIGlmIChjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICAgIGNvbnN0IHsgY29uc3RyYWludHMgfSA9IGNhbWVyYU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHB5ID0gTWF0aC5taW4oY29uc3RyYWludHMucGFkZGluZy55LCB2c2IudyAvIDIpO1xuICAgICAgICBjb25zdCBweCA9IE1hdGgubWluKGNvbnN0cmFpbnRzLnBhZGRpbmcueCwgdnNiLmggLyAyKTtcbiAgICAgICAgY29uc3QgYm91bmRzID0gQm94LkZyb20oY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5ib3VuZHMpO1xuICAgICAgICBjb25zdCB6eCA9ICh2c2IudyAtIHB4ICogMikgLyBib3VuZHMudztcbiAgICAgICAgY29uc3QgenkgPSAodnNiLmggLSBweSAqIDIpIC8gYm91bmRzLmg7XG4gICAgICAgIGNvbnN0IGJhc2Vab29tID0gdGhpcy5nZXRCYXNlWm9vbSgpO1xuICAgICAgICBjb25zdCBtYXhaID0gem9vbU1heCAqIGJhc2Vab29tO1xuICAgICAgICBjb25zdCBtaW5aID0gem9vbU1pbiAqIGJhc2Vab29tO1xuICAgICAgICBpZiAob3B0cz8ucmVzZXQpIHtcbiAgICAgICAgICB6ID0gdGhpcy5nZXRJbml0aWFsWm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh6IDwgbWluWiB8fCB6ID4gbWF4Wikge1xuICAgICAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gY3VycmVudENhbWVyYTtcbiAgICAgICAgICBjb25zdCBjeEEgPSAtY3ggKyB2c2IudyAvIGN6IC8gMjtcbiAgICAgICAgICBjb25zdCBjeUEgPSAtY3kgKyB2c2IuaCAvIGN6IC8gMjtcbiAgICAgICAgICB6ID0gY2xhbXAoeiwgbWluWiwgbWF4Wik7XG4gICAgICAgICAgY29uc3QgY3hCID0gLWN4ICsgdnNiLncgLyB6IC8gMjtcbiAgICAgICAgICBjb25zdCBjeUIgPSAtY3kgKyB2c2IuaCAvIHogLyAyO1xuICAgICAgICAgIHggPSBjeCArIGN4QiAtIGN4QTtcbiAgICAgICAgICB5ID0gY3kgKyBjeUIgLSBjeUE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWluWCA9IHB4IC8geiAtIGJvdW5kcy54O1xuICAgICAgICBjb25zdCBtaW5ZID0gcHkgLyB6IC0gYm91bmRzLnk7XG4gICAgICAgIGNvbnN0IGZyZWVXID0gKHZzYi53IC0gcHggKiAyKSAvIHogLSBib3VuZHMudztcbiAgICAgICAgY29uc3QgZnJlZUggPSAodnNiLmggLSBweSAqIDIpIC8geiAtIGJvdW5kcy5oO1xuICAgICAgICBjb25zdCBvcmlnaW5YID0gbWluWCArIGZyZWVXICogY29uc3RyYWludHMub3JpZ2luLng7XG4gICAgICAgIGNvbnN0IG9yaWdpblkgPSBtaW5ZICsgZnJlZUggKiBjb25zdHJhaW50cy5vcmlnaW4ueTtcbiAgICAgICAgY29uc3QgYmVoYXZpb3JYID0gdHlwZW9mIGNvbnN0cmFpbnRzLmJlaGF2aW9yID09PSBcInN0cmluZ1wiID8gY29uc3RyYWludHMuYmVoYXZpb3IgOiBjb25zdHJhaW50cy5iZWhhdmlvci54O1xuICAgICAgICBjb25zdCBiZWhhdmlvclkgPSB0eXBlb2YgY29uc3RyYWludHMuYmVoYXZpb3IgPT09IFwic3RyaW5nXCIgPyBjb25zdHJhaW50cy5iZWhhdmlvciA6IGNvbnN0cmFpbnRzLmJlaGF2aW9yLnk7XG4gICAgICAgIGlmIChvcHRzPy5yZXNldCkge1xuICAgICAgICAgIHggPSBvcmlnaW5YO1xuICAgICAgICAgIHkgPSBvcmlnaW5ZO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXRjaCAoYmVoYXZpb3JYKSB7XG4gICAgICAgICAgICBjYXNlIFwiZml4ZWRcIjoge1xuICAgICAgICAgICAgICB4ID0gb3JpZ2luWDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY29udGFpblwiOiB7XG4gICAgICAgICAgICAgIGlmICh6IDwgengpIHggPSBvcmlnaW5YO1xuICAgICAgICAgICAgICBlbHNlIHggPSBjbGFtcCh4LCBtaW5YICsgZnJlZVcsIG1pblgpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbnNpZGVcIjoge1xuICAgICAgICAgICAgICBpZiAoeiA8IHp4KSB4ID0gY2xhbXAoeCwgbWluWCwgKHZzYi53IC0gcHgpIC8geiAtIGJvdW5kcy53KTtcbiAgICAgICAgICAgICAgZWxzZSB4ID0gY2xhbXAoeCwgbWluWCArIGZyZWVXLCBtaW5YKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwib3V0c2lkZVwiOiB7XG4gICAgICAgICAgICAgIHggPSBjbGFtcCh4LCBweCAvIHogLSBib3VuZHMudywgKHZzYi53IC0gcHgpIC8geik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImZyZWVcIjoge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgdGhyb3cgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGJlaGF2aW9yWCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXRjaCAoYmVoYXZpb3JZKSB7XG4gICAgICAgICAgICBjYXNlIFwiZml4ZWRcIjoge1xuICAgICAgICAgICAgICB5ID0gb3JpZ2luWTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY29udGFpblwiOiB7XG4gICAgICAgICAgICAgIGlmICh6IDwgenkpIHkgPSBvcmlnaW5ZO1xuICAgICAgICAgICAgICBlbHNlIHkgPSBjbGFtcCh5LCBtaW5ZICsgZnJlZUgsIG1pblkpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbnNpZGVcIjoge1xuICAgICAgICAgICAgICBpZiAoeiA8IHp5KSB5ID0gY2xhbXAoeSwgbWluWSwgKHZzYi5oIC0gcHkpIC8geiAtIGJvdW5kcy5oKTtcbiAgICAgICAgICAgICAgZWxzZSB5ID0gY2xhbXAoeSwgbWluWSArIGZyZWVILCBtaW5ZKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwib3V0c2lkZVwiOiB7XG4gICAgICAgICAgICAgIHkgPSBjbGFtcCh5LCBweSAvIHogLSBib3VuZHMuaCwgKHZzYi5oIC0gcHkpIC8geik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImZyZWVcIjoge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgdGhyb3cgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGJlaGF2aW9yWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoeiA+IHpvb21NYXggfHwgeiA8IHpvb21NaW4pIHtcbiAgICAgICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IGN1cnJlbnRDYW1lcmE7XG4gICAgICAgICAgeiA9IGNsYW1wKHosIHpvb21NaW4sIHpvb21NYXgpO1xuICAgICAgICAgIHggPSBjeCArICgtY3ggKyB2c2IudyAvIHogLyAyKSAtICgtY3ggKyB2c2IudyAvIGN6IC8gMik7XG4gICAgICAgICAgeSA9IGN5ICsgKC1jeSArIHZzYi5oIC8geiAvIDIpIC0gKC1jeSArIHZzYi5oIC8gY3ogLyAyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB4LCB5LCB6IH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc2V0Q2FtZXJhKHBvaW50LCBvcHRzKSB7XG4gICAgY29uc3QgY3VycmVudENhbWVyYSA9IHRoaXMuZ2V0Q2FtZXJhKCk7XG4gICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzLmdldENvbnN0cmFpbmVkQ2FtZXJhKHBvaW50LCBvcHRzKTtcbiAgICBpZiAoY3VycmVudENhbWVyYS54ID09PSB4ICYmIGN1cnJlbnRDYW1lcmEueSA9PT0geSAmJiBjdXJyZW50Q2FtZXJhLnogPT09IHopIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0cmFuc2FjdCgoKSA9PiB7XG4gICAgICBjb25zdCBjYW1lcmEgPSB7IC4uLmN1cnJlbnRDYW1lcmEsIHgsIHksIHogfTtcbiAgICAgIHRoaXMucnVuKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdG9yZS5wdXQoW2NhbWVyYV0pO1xuICAgICAgICB9LFxuICAgICAgICB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgY3VycmVudFNjcmVlblBvaW50LCBjdXJyZW50UGFnZVBvaW50IH0gPSB0aGlzLmlucHV0cztcbiAgICAgIGNvbnN0IHsgc2NyZWVuQm91bmRzIH0gPSB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMSU5TVEFOQ0VfSUQpO1xuICAgICAgaWYgKGN1cnJlbnRTY3JlZW5Qb2ludC54IC8geiAtIHggIT09IGN1cnJlbnRQYWdlUG9pbnQueCB8fCBjdXJyZW50U2NyZWVuUG9pbnQueSAvIHogLSB5ICE9PSBjdXJyZW50UGFnZVBvaW50LnkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcImNhbnZhc1wiLFxuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl9tb3ZlXCIsXG4gICAgICAgICAgLy8gd2VpcmQgYnV0IHRydWU6IHdlIG5lZWQgdG8gcHV0IHRoZSBzY3JlZW4gcG9pbnQgYmFjayBpbnRvIGNsaWVudCBzcGFjZVxuICAgICAgICAgIHBvaW50OiBWZWMuQWRkWFkoY3VycmVudFNjcmVlblBvaW50LCBzY3JlZW5Cb3VuZHMueCwgc2NyZWVuQm91bmRzLnkpLFxuICAgICAgICAgIHBvaW50ZXJJZDogSU5URVJOQUxfUE9JTlRFUl9JRFMuQ0FNRVJBX01PVkUsXG4gICAgICAgICAgY3RybEtleTogdGhpcy5pbnB1dHMuY3RybEtleSxcbiAgICAgICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgICAgICBzaGlmdEtleTogdGhpcy5pbnB1dHMuc2hpZnRLZXksXG4gICAgICAgICAgbWV0YUtleTogdGhpcy5pbnB1dHMubWV0YUtleSxcbiAgICAgICAgICBhY2NlbEtleTogaXNBY2NlbEtleSh0aGlzLmlucHV0cyksXG4gICAgICAgICAgYnV0dG9uOiAwLFxuICAgICAgICAgIGlzUGVuOiB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1Blbk1vZGUgPz8gZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdHM/LmltbWVkaWF0ZSkge1xuICAgICAgICAgIHRoaXMuX2ZsdXNoRXZlbnRGb3JUaWNrKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fdGlja0NhbWVyYVN0YXRlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBjYW1lcmEuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRDYW1lcmEoeyB4OiAwLCB5OiAwfSlcbiAgICogZWRpdG9yLnNldENhbWVyYSh7IHg6IDAsIHk6IDAsIHo6IDEuNX0pXG4gICAqIGVkaXRvci5zZXRDYW1lcmEoeyB4OiAwLCB5OiAwLCB6OiAxLjV9LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTAwMCwgZWFzaW5nOiAodCkgPT4gdCAqIHQgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIG5ldyBjYW1lcmEgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldENhbWVyYShwb2ludCwgb3B0cykge1xuICAgIGNvbnN0IHsgaXNMb2NrZWQgfSA9IHRoaXMuX2NhbWVyYU9wdGlvbnMuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgaWYgKGlzTG9ja2VkICYmICFvcHRzPy5mb3JjZSkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5zdG9wQ2FtZXJhQW5pbWF0aW9uKCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZCkge1xuICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgIH1cbiAgICBjb25zdCBfcG9pbnQgPSBWZWMuQ2FzdChwb2ludCk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoX3BvaW50LngpKSBfcG9pbnQueCA9IDA7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoX3BvaW50LnkpKSBfcG9pbnQueSA9IDA7XG4gICAgaWYgKF9wb2ludC56ID09PSB2b2lkIDAgfHwgIU51bWJlci5pc0Zpbml0ZShfcG9pbnQueikpIHBvaW50LnogPSB0aGlzLmdldFpvb21MZXZlbCgpO1xuICAgIGNvbnN0IGNhbWVyYSA9IHRoaXMuZ2V0Q29uc3RyYWluZWRDYW1lcmEoX3BvaW50LCBvcHRzKTtcbiAgICBpZiAob3B0cz8uYW5pbWF0aW9uKSB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICAgIHRoaXMuX2FuaW1hdGVUb1ZpZXdwb3J0KFxuICAgICAgICBuZXcgQm94KC1jYW1lcmEueCwgLWNhbWVyYS55LCB3aWR0aCAvIGNhbWVyYS56LCBoZWlnaHQgLyBjYW1lcmEueiksXG4gICAgICAgIG9wdHNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldENhbWVyYShjYW1lcmEsIHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgLy8gd2UgYWxyZWFkeSBkaWQgdGhlIGNvbnN0cmFpbmluZywgc28gd2UgZG9uJ3QgbmVlZCB0byBkbyBpdCBhZ2FpblxuICAgICAgICBmb3JjZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDZW50ZXIgdGhlIGNhbWVyYSBvbiBhIHBvaW50IChpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlKS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNlbnRlck9uUG9pbnQoeyB4OiAxMDAsIHk6IDEwMCB9KVxuICAgKiBlZGl0b3IuY2VudGVyT25Qb2ludCh7IHg6IDEwMCwgeTogMTAwIH0sIHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UgdG8gY2VudGVyIG9uLlxuICAgKiBAcGFyYW0gb3B0cyAtIFRoZSBjYW1lcmEgbW92ZSBvcHRpb25zLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjZW50ZXJPblBvaW50KHBvaW50LCBvcHRzKSB7XG4gICAgY29uc3QgeyBpc0xvY2tlZCB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKGlzTG9ja2VkICYmICFvcHRzPy5mb3JjZSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgeyB3aWR0aDogcHcsIGhlaWdodDogcGggfSA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgdGhpcy5zZXRDYW1lcmEobmV3IFZlYygtKHBvaW50LnggLSBwdyAvIDIpLCAtKHBvaW50LnkgLSBwaCAvIDIpLCB0aGlzLmdldENhbWVyYSgpLnopLCBvcHRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogWm9vbSB0aGUgY2FtZXJhIHRvIGZpdCB0aGUgY3VycmVudCBwYWdlJ3MgY29udGVudCBpbiB0aGUgdmlld3BvcnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci56b29tVG9GaXQoKVxuICAgKiBlZGl0b3Iuem9vbVRvRml0KHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbVRvRml0KG9wdHMpIHtcbiAgICBjb25zdCBpZHMgPSBbLi4udGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlSWRzKCldO1xuICAgIGlmIChpZHMubGVuZ3RoIDw9IDApIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBCb3guQ29tbW9uKGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKSkpKTtcbiAgICB0aGlzLnpvb21Ub0JvdW5kcyhwYWdlQm91bmRzLCBvcHRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB6b29tIGJhY2sgdG8gMTAwJS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlc2V0Wm9vbSgpXG4gICAqIGVkaXRvci5yZXNldFpvb20oZWRpdG9yLmdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCksIHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBlZGl0b3IucmVzZXRab29tKGVkaXRvci5nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBzY3JlZW4gcG9pbnQgdG8gem9vbSBvdXQgb24uIERlZmF1bHRzIHRvIHRoZSB2aWV3cG9ydCBzY3JlZW4gY2VudGVyLlxuICAgKiBAcGFyYW0gb3B0cyAtIFRoZSBjYW1lcmEgbW92ZSBvcHRpb25zLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZXNldFpvb20ocG9pbnQgPSB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCksIG9wdHMpIHtcbiAgICBjb25zdCB7IGlzTG9ja2VkLCBjb25zdHJhaW50cyB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKGlzTG9ja2VkICYmICFvcHRzPy5mb3JjZSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgY3VycmVudENhbWVyYSA9IHRoaXMuZ2V0Q2FtZXJhKCk7XG4gICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6IH0gPSBjdXJyZW50Q2FtZXJhO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcG9pbnQ7XG4gICAgbGV0IHogPSAxO1xuICAgIGlmIChjb25zdHJhaW50cykge1xuICAgICAgY29uc3QgaW5pdGlhbFpvb20gPSB0aGlzLmdldEluaXRpYWxab29tKCk7XG4gICAgICBpZiAoY3ogIT09IGluaXRpYWxab29tKSB7XG4gICAgICAgIHogPSBpbml0aWFsWm9vbTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zZXRDYW1lcmEoXG4gICAgICBuZXcgVmVjKGN4ICsgKHggLyB6IC0geCkgLSAoeCAvIGN6IC0geCksIGN5ICsgKHkgLyB6IC0geSkgLSAoeSAvIGN6IC0geSksIHopLFxuICAgICAgb3B0c1xuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFpvb20gdGhlIGNhbWVyYSBpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21JbigpXG4gICAqIGVkaXRvci56b29tSW4oZWRpdG9yLmdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCksIHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBlZGl0b3Iuem9vbUluKGVkaXRvci5pbnB1dHMuY3VycmVudFNjcmVlblBvaW50LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBzY3JlZW4gcG9pbnQgdG8gem9vbSBpbiBvbi4gRGVmYXVsdHMgdG8gdGhlIHNjcmVlbiBjZW50ZXJcbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbUluKHBvaW50ID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpLCBvcHRzKSB7XG4gICAgY29uc3QgeyBpc0xvY2tlZCB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKGlzTG9ja2VkICYmICFvcHRzPy5mb3JjZSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6IH0gPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIGNvbnN0IHsgem9vbVN0ZXBzIH0gPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICBpZiAoem9vbVN0ZXBzICE9PSBudWxsICYmIHpvb21TdGVwcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBiYXNlWm9vbSA9IHRoaXMuZ2V0QmFzZVpvb20oKTtcbiAgICAgIGxldCB6b29tID0gbGFzdCh6b29tU3RlcHMpICogYmFzZVpvb207XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHpvb21TdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB6MSA9IHpvb21TdGVwc1tpIC0gMV0gKiBiYXNlWm9vbTtcbiAgICAgICAgY29uc3QgejIgPSB6b29tU3RlcHNbaV0gKiBiYXNlWm9vbTtcbiAgICAgICAgaWYgKHoyIC0gY3ogPD0gKHoyIC0gejEpIC8gMikgY29udGludWU7XG4gICAgICAgIHpvb20gPSB6MjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLnNldENhbWVyYShcbiAgICAgICAgbmV3IFZlYyhcbiAgICAgICAgICBjeCArIChwb2ludC54IC8gem9vbSAtIHBvaW50LngpIC0gKHBvaW50LnggLyBjeiAtIHBvaW50LngpLFxuICAgICAgICAgIGN5ICsgKHBvaW50LnkgLyB6b29tIC0gcG9pbnQueSkgLSAocG9pbnQueSAvIGN6IC0gcG9pbnQueSksXG4gICAgICAgICAgem9vbVxuICAgICAgICApLFxuICAgICAgICBvcHRzXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogWm9vbSB0aGUgY2FtZXJhIG91dC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21PdXQoKVxuICAgKiBlZGl0b3Iuem9vbU91dChlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5DZW50ZXIoKSwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDEyMCB9IH0pXG4gICAqIGVkaXRvci56b29tT3V0KGVkaXRvci5pbnB1dHMuY3VycmVudFNjcmVlblBvaW50LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTIwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB0byB6b29tIG91dCBvbi4gRGVmYXVsdHMgdG8gdGhlIHZpZXdwb3J0IHNjcmVlbiBjZW50ZXIuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHpvb21PdXQocG9pbnQgPSB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCksIG9wdHMpIHtcbiAgICBjb25zdCB7IGlzTG9ja2VkIH0gPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICBpZiAoaXNMb2NrZWQgJiYgIW9wdHM/LmZvcmNlKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB7IHpvb21TdGVwcyB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKHpvb21TdGVwcyAhPT0gbnVsbCAmJiB6b29tU3RlcHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYmFzZVpvb20gPSB0aGlzLmdldEJhc2Vab29tKCk7XG4gICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHRoaXMuZ2V0Q2FtZXJhKCk7XG4gICAgICBsZXQgem9vbSA9IHpvb21TdGVwc1swXSAqIGJhc2Vab29tO1xuICAgICAgZm9yIChsZXQgaSA9IHpvb21TdGVwcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IHoxID0gem9vbVN0ZXBzW2kgLSAxXSAqIGJhc2Vab29tO1xuICAgICAgICBjb25zdCB6MiA9IHpvb21TdGVwc1tpXSAqIGJhc2Vab29tO1xuICAgICAgICBpZiAoejIgLSBjeiA+PSAoejIgLSB6MSkgLyAyKSBjb250aW51ZTtcbiAgICAgICAgem9vbSA9IHoxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0Q2FtZXJhKFxuICAgICAgICBuZXcgVmVjKFxuICAgICAgICAgIGN4ICsgKHBvaW50LnggLyB6b29tIC0gcG9pbnQueCkgLSAocG9pbnQueCAvIGN6IC0gcG9pbnQueCksXG4gICAgICAgICAgY3kgKyAocG9pbnQueSAvIHpvb20gLSBwb2ludC55KSAtIChwb2ludC55IC8gY3ogLSBwb2ludC55KSxcbiAgICAgICAgICB6b29tXG4gICAgICAgICksXG4gICAgICAgIG9wdHNcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBab29tIHRoZSBjYW1lcmEgdG8gZml0IHRoZSBjdXJyZW50IHNlbGVjdGlvbiBpbiB0aGUgdmlld3BvcnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci56b29tVG9TZWxlY3Rpb24oKVxuICAgKiBlZGl0b3Iuem9vbVRvU2VsZWN0aW9uKHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbVRvU2VsZWN0aW9uKG9wdHMpIHtcbiAgICBjb25zdCB7IGlzTG9ja2VkIH0gPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICBpZiAoaXNMb2NrZWQgJiYgIW9wdHM/LmZvcmNlKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzZWxlY3Rpb25QYWdlQm91bmRzID0gdGhpcy5nZXRTZWxlY3Rpb25QYWdlQm91bmRzKCk7XG4gICAgaWYgKHNlbGVjdGlvblBhZ2VCb3VuZHMpIHtcbiAgICAgIHRoaXMuem9vbVRvQm91bmRzKHNlbGVjdGlvblBhZ2VCb3VuZHMsIHtcbiAgICAgICAgdGFyZ2V0Wm9vbTogTWF0aC5tYXgoMSwgdGhpcy5nZXRab29tTGV2ZWwoKSksXG4gICAgICAgIC4uLm9wdHNcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogWm9vbSB0aGUgY2FtZXJhIHRvIGZpdCBhIGJvdW5kaW5nIGJveCAoaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci56b29tVG9Cb3VuZHMobXlCb3VuZHMpXG4gICAqIGVkaXRvci56b29tVG9Cb3VuZHMobXlCb3VuZHMsIHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBlZGl0b3Iuem9vbVRvQm91bmRzKG15Qm91bmRzLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0sIGluc2V0OiAwLCB0YXJnZXRab29tOiAxIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gYm91bmRzIC0gVGhlIGJvdW5kaW5nIGJveC5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucywgdGFyZ2V0IHpvb20sIG9yIGN1c3RvbSBpbnNldCBhbW91bnQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHpvb21Ub0JvdW5kcyhib3VuZHMsIG9wdHMpIHtcbiAgICBjb25zdCBjYW1lcmFPcHRpb25zID0gdGhpcy5fY2FtZXJhT3B0aW9ucy5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKTtcbiAgICBpZiAoY2FtZXJhT3B0aW9ucy5pc0xvY2tlZCAmJiAhb3B0cz8uZm9yY2UpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHZpZXdwb3J0U2NyZWVuQm91bmRzID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpO1xuICAgIGNvbnN0IGluc2V0ID0gb3B0cz8uaW5zZXQgPz8gTWF0aC5taW4oWk9PTV9UT19GSVRfUEFERElORywgdmlld3BvcnRTY3JlZW5Cb3VuZHMud2lkdGggKiAwLjI4KTtcbiAgICBjb25zdCBiYXNlWm9vbSA9IHRoaXMuZ2V0QmFzZVpvb20oKTtcbiAgICBjb25zdCB6b29tTWluID0gY2FtZXJhT3B0aW9ucy56b29tU3RlcHNbMF07XG4gICAgY29uc3Qgem9vbU1heCA9IGxhc3QoY2FtZXJhT3B0aW9ucy56b29tU3RlcHMpO1xuICAgIGxldCB6b29tID0gY2xhbXAoXG4gICAgICBNYXRoLm1pbihcbiAgICAgICAgKHZpZXdwb3J0U2NyZWVuQm91bmRzLndpZHRoIC0gaW5zZXQpIC8gYm91bmRzLncsXG4gICAgICAgICh2aWV3cG9ydFNjcmVlbkJvdW5kcy5oZWlnaHQgLSBpbnNldCkgLyBib3VuZHMuaFxuICAgICAgKSxcbiAgICAgIHpvb21NaW4gKiBiYXNlWm9vbSxcbiAgICAgIHpvb21NYXggKiBiYXNlWm9vbVxuICAgICk7XG4gICAgaWYgKG9wdHM/LnRhcmdldFpvb20gIT09IHZvaWQgMCkge1xuICAgICAgem9vbSA9IE1hdGgubWluKG9wdHMudGFyZ2V0Wm9vbSwgem9vbSk7XG4gICAgfVxuICAgIHRoaXMuc2V0Q2FtZXJhKFxuICAgICAgbmV3IFZlYyhcbiAgICAgICAgLWJvdW5kcy54ICsgKHZpZXdwb3J0U2NyZWVuQm91bmRzLndpZHRoIC0gYm91bmRzLncgKiB6b29tKSAvIDIgLyB6b29tLFxuICAgICAgICAtYm91bmRzLnkgKyAodmlld3BvcnRTY3JlZW5Cb3VuZHMuaGVpZ2h0IC0gYm91bmRzLmggKiB6b29tKSAvIDIgLyB6b29tLFxuICAgICAgICB6b29tXG4gICAgICApLFxuICAgICAgb3B0c1xuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGN1cnJlbnQgY2FtZXJhIGFuaW1hdGlvbiwgaWYgYW55LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc3RvcENhbWVyYUFuaW1hdGlvbigpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdG9wQ2FtZXJhQW5pbWF0aW9uKCkge1xuICAgIHRoaXMuZW1pdChcInN0b3AtY2FtZXJhLWFuaW1hdGlvblwiKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9hbmltYXRlVmlld3BvcnQobXMpIHtcbiAgICBpZiAoIXRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uKSByZXR1cm47XG4gICAgdGhpcy5fdmlld3BvcnRBbmltYXRpb24uZWxhcHNlZCArPSBtcztcbiAgICBjb25zdCB7IGVsYXBzZWQsIGVhc2luZywgZHVyYXRpb24sIHN0YXJ0LCBlbmQgfSA9IHRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uO1xuICAgIGlmIChlbGFwc2VkID4gZHVyYXRpb24pIHtcbiAgICAgIHRoaXMub2ZmKFwidGlja1wiLCB0aGlzLl9hbmltYXRlVmlld3BvcnQpO1xuICAgICAgdGhpcy5fdmlld3BvcnRBbmltYXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5fc2V0Q2FtZXJhKG5ldyBWZWMoLWVuZC54LCAtZW5kLnksIHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKS53aWR0aCAvIGVuZC53aWR0aCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZW1haW5pbmcgPSBkdXJhdGlvbiAtIGVsYXBzZWQ7XG4gICAgY29uc3QgdCA9IGVhc2luZygxIC0gcmVtYWluaW5nIC8gZHVyYXRpb24pO1xuICAgIGNvbnN0IGxlZnQgPSBzdGFydC5taW5YICsgKGVuZC5taW5YIC0gc3RhcnQubWluWCkgKiB0O1xuICAgIGNvbnN0IHRvcCA9IHN0YXJ0Lm1pblkgKyAoZW5kLm1pblkgLSBzdGFydC5taW5ZKSAqIHQ7XG4gICAgY29uc3QgcmlnaHQgPSBzdGFydC5tYXhYICsgKGVuZC5tYXhYIC0gc3RhcnQubWF4WCkgKiB0O1xuICAgIHRoaXMuX3NldENhbWVyYShuZXcgVmVjKC1sZWZ0LCAtdG9wLCB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkud2lkdGggLyAocmlnaHQgLSBsZWZ0KSksIHtcbiAgICAgIGZvcmNlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfYW5pbWF0ZVRvVmlld3BvcnQodGFyZ2V0Vmlld3BvcnRQYWdlLCBvcHRzID0geyBhbmltYXRpb246IERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMgfSkge1xuICAgIGNvbnN0IHsgYW5pbWF0aW9uLCAuLi5yZXN0IH0gPSBvcHRzO1xuICAgIGlmICghYW5pbWF0aW9uKSByZXR1cm47XG4gICAgY29uc3QgeyBkdXJhdGlvbiA9IDAsIGVhc2luZyA9IEVBU0lOR1MuZWFzZUluT3V0Q3ViaWMgfSA9IGFuaW1hdGlvbjtcbiAgICBjb25zdCBhbmltYXRpb25TcGVlZCA9IHRoaXMudXNlci5nZXRBbmltYXRpb25TcGVlZCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgdGhpcy5zdG9wQ2FtZXJhQW5pbWF0aW9uKCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZCkge1xuICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgIH1cbiAgICBpZiAoZHVyYXRpb24gPT09IDAgfHwgYW5pbWF0aW9uU3BlZWQgPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLl9zZXRDYW1lcmEoXG4gICAgICAgIG5ldyBWZWMoXG4gICAgICAgICAgLXRhcmdldFZpZXdwb3J0UGFnZS54LFxuICAgICAgICAgIC10YXJnZXRWaWV3cG9ydFBhZ2UueSxcbiAgICAgICAgICB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkud2lkdGggLyB0YXJnZXRWaWV3cG9ydFBhZ2Uud2lkdGhcbiAgICAgICAgKSxcbiAgICAgICAgeyAuLi5yZXN0IH1cbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uID0ge1xuICAgICAgZWxhcHNlZDogMCxcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAvIGFuaW1hdGlvblNwZWVkLFxuICAgICAgZWFzaW5nLFxuICAgICAgc3RhcnQ6IHZpZXdwb3J0UGFnZUJvdW5kcy5jbG9uZSgpLFxuICAgICAgZW5kOiB0YXJnZXRWaWV3cG9ydFBhZ2UuY2xvbmUoKVxuICAgIH07XG4gICAgdGhpcy5vbmNlKFwic3RvcC1jYW1lcmEtYW5pbWF0aW9uXCIsICgpID0+IHtcbiAgICAgIHRoaXMub2ZmKFwidGlja1wiLCB0aGlzLl9hbmltYXRlVmlld3BvcnQpO1xuICAgICAgdGhpcy5fdmlld3BvcnRBbmltYXRpb24gPSBudWxsO1xuICAgIH0pO1xuICAgIHRoaXMub24oXCJ0aWNrXCIsIHRoaXMuX2FuaW1hdGVWaWV3cG9ydCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNsaWRlIHRoZSBjYW1lcmEgaW4gYSBjZXJ0YWluIGRpcmVjdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNsaWRlQ2FtZXJhKHsgc3BlZWQ6IDEsIGRpcmVjdGlvbjogeyB4OiAxLCB5OiAwIH0sIGZyaWN0aW9uOiAwLjEgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgdGhlIHNsaWRlXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNsaWRlQ2FtZXJhKG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHsgaXNMb2NrZWQgfSA9IHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpO1xuICAgIGlmIChpc0xvY2tlZCAmJiAhb3B0cz8uZm9yY2UpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkID0gdGhpcy51c2VyLmdldEFuaW1hdGlvblNwZWVkKCk7XG4gICAgaWYgKGFuaW1hdGlvblNwZWVkID09PSAwKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICBjb25zdCB7XG4gICAgICBzcGVlZCxcbiAgICAgIGZyaWN0aW9uID0gdGhpcy5vcHRpb25zLmNhbWVyYVNsaWRlRnJpY3Rpb24sXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzcGVlZFRocmVzaG9sZCA9IDAuMDFcbiAgICB9ID0gb3B0cztcbiAgICBsZXQgY3VycmVudFNwZWVkID0gTWF0aC5taW4oc3BlZWQsIDEpO1xuICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIHRoaXMub2ZmKFwidGlja1wiLCBtb3ZlQ2FtZXJhKTtcbiAgICAgIHRoaXMub2ZmKFwic3RvcC1jYW1lcmEtYW5pbWF0aW9uXCIsIGNhbmNlbCk7XG4gICAgfTtcbiAgICB0aGlzLm9uY2UoXCJzdG9wLWNhbWVyYS1hbmltYXRpb25cIiwgY2FuY2VsKTtcbiAgICBjb25zdCBtb3ZlQ2FtZXJhID0gKGVsYXBzZWQpID0+IHtcbiAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICAgIGNvbnN0IG1vdmVtZW50VmVjID0gVmVjLk11bChkaXJlY3Rpb24sIGN1cnJlbnRTcGVlZCAqIGVsYXBzZWQgLyBjeik7XG4gICAgICBjdXJyZW50U3BlZWQgKj0gMSAtIGZyaWN0aW9uO1xuICAgICAgaWYgKGN1cnJlbnRTcGVlZCA8IHNwZWVkVGhyZXNob2xkKSB7XG4gICAgICAgIGNhbmNlbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0Q2FtZXJhKG5ldyBWZWMoY3ggKyBtb3ZlbWVudFZlYy54LCBjeSArIG1vdmVtZW50VmVjLnksIGN6KSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm9uKFwidGlja1wiLCBtb3ZlQ2FtZXJhKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQW5pbWF0ZSB0aGUgY2FtZXJhIHRvIGEgdXNlcidzIGN1cnNvciBwb3NpdGlvbi4gVGhpcyBhbHNvIGJyaWVmbHkgc2hvdyB0aGUgdXNlcidzIGN1cnNvciBpZiBpdCdzIG5vdCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21Ub1VzZXIobXlVc2VySWQpXG4gICAqIGVkaXRvci56b29tVG9Vc2VyKG15VXNlcklkLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgdG8gYW5pbWF0ZSB0by5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbVRvVXNlcih1c2VySWQsIG9wdHMgPSB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogNTAwIH0gfSkge1xuICAgIGNvbnN0IHByZXNlbmNlID0gdGhpcy5nZXRDb2xsYWJvcmF0b3JzKCkuZmluZCgoYykgPT4gYy51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgaWYgKCFwcmVzZW5jZSkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBpc09uU2FtZVBhZ2UgPSBwcmVzZW5jZS5jdXJyZW50UGFnZUlkID09PSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICAgIGlmICghaXNPblNhbWVQYWdlKSB7XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UocHJlc2VuY2UuY3VycmVudFBhZ2VJZCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0cyAmJiBvcHRzLmFuaW1hdGlvbiAmJiAhaXNPblNhbWVQYWdlKSB7XG4gICAgICAgIG9wdHMuYW5pbWF0aW9uID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgdGhpcy5jZW50ZXJPblBvaW50KHByZXNlbmNlLmN1cnNvciwgb3B0cyk7XG4gICAgICBjb25zdCB7IGhpZ2hsaWdodGVkVXNlcklkcyB9ID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBoaWdobGlnaHRlZFVzZXJJZHM6IFsuLi5oaWdobGlnaHRlZFVzZXJJZHMsIHVzZXJJZF0gfSk7XG4gICAgICB0aGlzLnRpbWVycy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRVc2VySWRzMiA9IFsuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKS5oaWdobGlnaHRlZFVzZXJJZHNdO1xuICAgICAgICBjb25zdCBpbmRleCA9IGhpZ2hsaWdodGVkVXNlcklkczIuaW5kZXhPZih1c2VySWQpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKSByZXR1cm47XG4gICAgICAgIGhpZ2hsaWdodGVkVXNlcklkczIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaGlnaGxpZ2h0ZWRVc2VySWRzOiBoaWdobGlnaHRlZFVzZXJJZHMyIH0pO1xuICAgICAgfSwgdGhpcy5vcHRpb25zLmNvbGxhYm9yYXRvcklkbGVUaW1lb3V0TXMpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHZpZXdwb3J0LiBUaGUgdmlld3BvcnQgd2lsbCBtZWFzdXJlIHRoZSBzaXplIGFuZCBzY3JlZW4gcG9zaXRpb24gb2YgaXRzIGNvbnRhaW5lclxuICAgKiBlbGVtZW50LiBUaGlzIHNob3VsZCBiZSBkb25lIHdoZW5ldmVyIHRoZSBjb250YWluZXIncyBwb3NpdGlvbiBvbiB0aGUgc2NyZWVuIGNoYW5nZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVWaWV3cG9ydFNjcmVlbkJvdW5kcyhuZXcgQm94KDAsIDAsIDEyODAsIDEwMjQpKVxuICAgKiBlZGl0b3IudXBkYXRlVmlld3BvcnRTY3JlZW5Cb3VuZHMobmV3IEJveCgwLCAwLCAxMjgwLCAxMDI0KSwgdHJ1ZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzY3JlZW5Cb3VuZHMgLSBUaGUgbmV3IHNjcmVlbiBib3VuZHMgb2YgdGhlIHZpZXdwb3J0LlxuICAgKiBAcGFyYW0gY2VudGVyIC0gV2hldGhlciB0byBwcmVzZXJ2ZSB0aGUgdmlld3BvcnQgcGFnZSBjZW50ZXIgYXMgdGhlIHZpZXdwb3J0IGNoYW5nZXMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVZpZXdwb3J0U2NyZWVuQm91bmRzKHNjcmVlbkJvdW5kcywgY2VudGVyID0gZmFsc2UpIHtcbiAgICBpZiAoc2NyZWVuQm91bmRzIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSBzY3JlZW5Cb3VuZHMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBzY3JlZW5Cb3VuZHMgPSBuZXcgQm94KFxuICAgICAgICByZWN0LmxlZnQgfHwgcmVjdC54LFxuICAgICAgICByZWN0LnRvcCB8fCByZWN0LnksXG4gICAgICAgIE1hdGgubWF4KHJlY3Qud2lkdGgsIDEpLFxuICAgICAgICBNYXRoLm1heChyZWN0LmhlaWdodCwgMSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcmVlbkJvdW5kcy53aWR0aCA9IE1hdGgubWF4KHNjcmVlbkJvdW5kcy53aWR0aCwgMSk7XG4gICAgICBzY3JlZW5Cb3VuZHMuaGVpZ2h0ID0gTWF0aC5tYXgoc2NyZWVuQm91bmRzLmhlaWdodCwgMSk7XG4gICAgfVxuICAgIGNvbnN0IGluc2V0cyA9IFtcbiAgICAgIC8vIHRvcFxuICAgICAgc2NyZWVuQm91bmRzLm1pblkgIT09IDAsXG4gICAgICAvLyByaWdodFxuICAgICAgIWFwcHJveGltYXRlbHkoZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCwgc2NyZWVuQm91bmRzLm1heFgsIDEpLFxuICAgICAgLy8gYm90dG9tXG4gICAgICAhYXBwcm94aW1hdGVseShkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCwgc2NyZWVuQm91bmRzLm1heFksIDEpLFxuICAgICAgLy8gbGVmdFxuICAgICAgc2NyZWVuQm91bmRzLm1pblggIT09IDBcbiAgICBdO1xuICAgIGNvbnN0IHsgX3dpbGxTZXRJbml0aWFsQm91bmRzIH0gPSB0aGlzO1xuICAgIHRoaXMuX3dpbGxTZXRJbml0aWFsQm91bmRzID0gZmFsc2U7XG4gICAgY29uc3QgeyBzY3JlZW5Cb3VuZHM6IHByZXZTY3JlZW5Cb3VuZHMsIGluc2V0czogcHJldkluc2V0cyB9ID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgaWYgKHNjcmVlbkJvdW5kcy5lcXVhbHMocHJldlNjcmVlbkJvdW5kcykgJiYgaW5zZXRzLmV2ZXJ5KCh2LCBpKSA9PiB2ID09PSBwcmV2SW5zZXRzW2ldKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChfd2lsbFNldEluaXRpYWxCb3VuZHMpIHtcbiAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IHNjcmVlbkJvdW5kczogc2NyZWVuQm91bmRzLnRvSnNvbigpLCBpbnNldHMgfSk7XG4gICAgICB0aGlzLnNldENhbWVyYSh0aGlzLmdldENhbWVyYSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNlbnRlciAmJiAhdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuZm9sbG93aW5nVXNlcklkKSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZSA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCkuY2VudGVyO1xuICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBzY3JlZW5Cb3VuZHM6IHNjcmVlbkJvdW5kcy50b0pzb24oKSwgaW5zZXRzIH0pO1xuICAgICAgICB0aGlzLmNlbnRlck9uUG9pbnQoYmVmb3JlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IHNjcmVlbkJvdW5kczogc2NyZWVuQm91bmRzLnRvSnNvbigpLCBpbnNldHMgfSk7XG4gICAgICAgIHRoaXMuX3NldENhbWVyYShWZWMuRnJvbSh7IC4uLnRoaXMuZ2V0Q2FtZXJhKCkgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl90aWNrQ2FtZXJhU3RhdGUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpIHtcbiAgICBjb25zdCB7IHgsIHksIHcsIGggfSA9IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLnNjcmVlbkJvdW5kcztcbiAgICByZXR1cm4gbmV3IEJveCh4LCB5LCB3LCBoKTtcbiAgfVxuICBnZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpIHtcbiAgICBjb25zdCB2aWV3cG9ydFNjcmVlbkJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIHZpZXdwb3J0U2NyZWVuQm91bmRzLm1pZFggLSB2aWV3cG9ydFNjcmVlbkJvdW5kcy5taW5YLFxuICAgICAgdmlld3BvcnRTY3JlZW5Cb3VuZHMubWlkWSAtIHZpZXdwb3J0U2NyZWVuQm91bmRzLm1pbllcbiAgICApO1xuICB9XG4gIGdldFZpZXdwb3J0UGFnZUJvdW5kcygpIHtcbiAgICBjb25zdCB7IHcsIGggfSA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHRoaXMuZ2V0Q2FtZXJhKCk7XG4gICAgcmV0dXJuIG5ldyBCb3goLWN4LCAtY3ksIHcgLyBjeiwgaCAvIGN6KTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIHBvaW50IGluIHNjcmVlbiBzcGFjZSB0byBhIHBvaW50IGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zY3JlZW5Ub1BhZ2UoeyB4OiAxMDAsIHk6IDEwMCB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IGluIHNjcmVlbiBzcGFjZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2NyZWVuVG9QYWdlKHBvaW50KSB7XG4gICAgY29uc3QgeyBzY3JlZW5Cb3VuZHMgfSA9IHRoaXMuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUoVExJTlNUQU5DRV9JRCk7XG4gICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6ID0gMSB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIChwb2ludC54IC0gc2NyZWVuQm91bmRzLngpIC8gY3ogLSBjeCxcbiAgICAgIChwb2ludC55IC0gc2NyZWVuQm91bmRzLnkpIC8gY3ogLSBjeSxcbiAgICAgIHBvaW50LnogPz8gMC41XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIHBvaW50IGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UgdG8gYSBwb2ludCBpbiBjdXJyZW50IHNjcmVlbiBzcGFjZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnBhZ2VUb1NjcmVlbih7IHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgaW4gcGFnZSBzcGFjZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcGFnZVRvU2NyZWVuKHBvaW50KSB7XG4gICAgY29uc3QgeyBzY3JlZW5Cb3VuZHMgfSA9IHRoaXMuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUoVExJTlNUQU5DRV9JRCk7XG4gICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6ID0gMSB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIChwb2ludC54ICsgY3gpICogY3ogKyBzY3JlZW5Cb3VuZHMueCxcbiAgICAgIChwb2ludC55ICsgY3kpICogY3ogKyBzY3JlZW5Cb3VuZHMueSxcbiAgICAgIHBvaW50LnogPz8gMC41XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIHBvaW50IGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UgdG8gYSBwb2ludCBpbiBjdXJyZW50IHZpZXdwb3J0IHNwYWNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucGFnZVRvVmlld3BvcnQoeyB4OiAxMDAsIHk6IDEwMCB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IGluIHBhZ2Ugc3BhY2UuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHBhZ2VUb1ZpZXdwb3J0KHBvaW50KSB7XG4gICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6ID0gMSB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICByZXR1cm4gbmV3IFZlYygocG9pbnQueCArIGN4KSAqIGN6LCAocG9pbnQueSArIGN5KSAqIGN6LCBwb2ludC56ID8/IDAuNSk7XG4gIH1cbiAgX2dldENvbGxhYm9yYXRvcnNRdWVyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5xdWVyeS5yZWNvcmRzKFwiaW5zdGFuY2VfcHJlc2VuY2VcIiwgKCkgPT4gKHtcbiAgICAgIHVzZXJJZDogeyBuZXE6IHRoaXMudXNlci5nZXRJZCgpIH1cbiAgICB9KSk7XG4gIH1cbiAgZ2V0Q29sbGFib3JhdG9ycygpIHtcbiAgICBjb25zdCBhbGxQcmVzZW5jZVJlY29yZHMgPSB0aGlzLl9nZXRDb2xsYWJvcmF0b3JzUXVlcnkoKS5nZXQoKTtcbiAgICBpZiAoIWFsbFByZXNlbmNlUmVjb3Jkcy5sZW5ndGgpIHJldHVybiBFTVBUWV9BUlJBWTtcbiAgICBjb25zdCB1c2VySWRzID0gWy4uLm5ldyBTZXQoYWxsUHJlc2VuY2VSZWNvcmRzLm1hcCgoYykgPT4gYy51c2VySWQpKV0uc29ydCgpO1xuICAgIHJldHVybiB1c2VySWRzLm1hcCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IGxhdGVzdFByZXNlbmNlID0gYWxsUHJlc2VuY2VSZWNvcmRzLmZpbHRlcigoYykgPT4gYy51c2VySWQgPT09IGlkKS5zb3J0KChhLCBiKSA9PiBiLmxhc3RBY3Rpdml0eVRpbWVzdGFtcCAtIGEubGFzdEFjdGl2aXR5VGltZXN0YW1wKVswXTtcbiAgICAgIHJldHVybiBsYXRlc3RQcmVzZW5jZTtcbiAgICB9KTtcbiAgfVxuICBnZXRDb2xsYWJvcmF0b3JzT25DdXJyZW50UGFnZSgpIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGFib3JhdG9ycygpLmZpbHRlcigoYykgPT4gYy5jdXJyZW50UGFnZUlkID09PSBjdXJyZW50UGFnZUlkKTtcbiAgfVxuICAvKipcbiAgICogU3RhcnQgdmlld3BvcnQtZm9sbG93aW5nIGEgdXNlci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnN0YXJ0Rm9sbG93aW5nVXNlcihteVVzZXJJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgdG8gZm9sbG93LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGFydEZvbGxvd2luZ1VzZXIodXNlcklkKSB7XG4gICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgIGNvbnN0IGxlYWRlclByZXNlbmNlcyA9IHRoaXMuX2dldENvbGxhYm9yYXRvcnNRdWVyeSgpLmdldCgpLmZpbHRlcigocCkgPT4gcC51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgaWYgKCFsZWFkZXJQcmVzZW5jZXMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJVc2VyIG5vdCBmb3VuZFwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCB0aGlzVXNlcklkID0gdGhpcy51c2VyLmdldElkKCk7XG4gICAgaWYgKCF0aGlzVXNlcklkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJZb3Ugc2hvdWxkIHNldCB0aGUgdXNlcklkIGZvciB0aGUgY3VycmVudCBpbnN0YW5jZSBiZWZvcmUgZm9sbG93aW5nIGEgdXNlclwiKTtcbiAgICB9XG4gICAgaWYgKGxlYWRlclByZXNlbmNlcy5zb21lKChwKSA9PiBwLmZvbGxvd2luZ1VzZXJJZCA9PT0gdGhpc1VzZXJJZCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBsYXRlc3RMZWFkZXJQcmVzZW5jZSA9IGNvbXB1dGVkKFwibGF0ZXN0TGVhZGVyUHJlc2VuY2VcIiwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGFib3JhdG9ycygpLmZpbmQoKHApID0+IHAudXNlcklkID09PSB1c2VySWQpO1xuICAgIH0pO1xuICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGZvbGxvd2luZ1VzZXJJZDogdXNlcklkIH0sIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9KTtcbiAgICAgIGNvbnN0IGRpc3Bvc2UgPSByZWFjdChcInVwZGF0ZSBjdXJyZW50IHBhZ2VcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBsZWFkZXJQcmVzZW5jZSA9IGxhdGVzdExlYWRlclByZXNlbmNlLmdldCgpO1xuICAgICAgICBpZiAoIWxlYWRlclByZXNlbmNlKSB7XG4gICAgICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVhZGVyUHJlc2VuY2UuY3VycmVudFBhZ2VJZCAhPT0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCkgJiYgdGhpcy5nZXRQYWdlKGxlYWRlclByZXNlbmNlLmN1cnJlbnRQYWdlSWQpKSB7XG4gICAgICAgICAgdGhpcy5ydW4oXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUucHV0KFtcbiAgICAgICAgICAgICAgICB7IC4uLnRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLCBjdXJyZW50UGFnZUlkOiBsZWFkZXJQcmVzZW5jZS5jdXJyZW50UGFnZUlkIH1cbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLnNldCh0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgY2FuY2VsID0gKCkgPT4ge1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLnNldChmYWxzZSk7XG4gICAgICAgIHRoaXMub2ZmKFwiZnJhbWVcIiwgbW92ZVRvd2FyZHNVc2VyKTtcbiAgICAgICAgdGhpcy5vZmYoXCJzdG9wLWZvbGxvd2luZ1wiLCBjYW5jZWwpO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG1vdmVUb3dhcmRzVXNlciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgbGVhZGVyUHJlc2VuY2UgPSBsYXRlc3RMZWFkZXJQcmVzZW5jZS5nZXQoKTtcbiAgICAgICAgaWYgKCFsZWFkZXJQcmVzZW5jZSkge1xuICAgICAgICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLmdldCgpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkID0gdGhpcy51c2VyLmdldEFuaW1hdGlvblNwZWVkKCk7XG4gICAgICAgIGlmIChhbmltYXRpb25TcGVlZCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLnNldCh0cnVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0Vmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kc0ZvckZvbGxvd2luZygpO1xuICAgICAgICBpZiAoIXRhcmdldFZpZXdwb3J0KSB7XG4gICAgICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50Vmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgICAgICBjb25zdCBkaWZmWCA9IE1hdGguYWJzKHRhcmdldFZpZXdwb3J0Lm1pblggLSBjdXJyZW50Vmlld3BvcnQubWluWCkgKyBNYXRoLmFicyh0YXJnZXRWaWV3cG9ydC5tYXhYIC0gY3VycmVudFZpZXdwb3J0Lm1heFgpO1xuICAgICAgICBjb25zdCBkaWZmWSA9IE1hdGguYWJzKHRhcmdldFZpZXdwb3J0Lm1pblkgLSBjdXJyZW50Vmlld3BvcnQubWluWSkgKyBNYXRoLmFicyh0YXJnZXRWaWV3cG9ydC5tYXhZIC0gY3VycmVudFZpZXdwb3J0Lm1heFkpO1xuICAgICAgICBpZiAoZGlmZlggPCB0aGlzLm9wdGlvbnMuZm9sbG93Q2hhc2VWaWV3cG9ydFNuYXAgJiYgZGlmZlkgPCB0aGlzLm9wdGlvbnMuZm9sbG93Q2hhc2VWaWV3cG9ydFNuYXApIHtcbiAgICAgICAgICB0aGlzLl9pc0xvY2tlZE9uRm9sbG93aW5nVXNlci5zZXQodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSBjbGFtcChhbmltYXRpb25TcGVlZCAqIDAuNSwgMC4xLCAwLjgpO1xuICAgICAgICBjb25zdCBuZXh0Vmlld3BvcnQgPSBuZXcgQm94KFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0Lm1pblgsIHRhcmdldFZpZXdwb3J0Lm1pblgsIHQpLFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0Lm1pblksIHRhcmdldFZpZXdwb3J0Lm1pblksIHQpLFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0LndpZHRoLCB0YXJnZXRWaWV3cG9ydC53aWR0aCwgdCksXG4gICAgICAgICAgbGVycChjdXJyZW50Vmlld3BvcnQuaGVpZ2h0LCB0YXJnZXRWaWV3cG9ydC5oZWlnaHQsIHQpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5leHRDYW1lcmEgPSBuZXcgVmVjKFxuICAgICAgICAgIC1uZXh0Vmlld3BvcnQueCxcbiAgICAgICAgICAtbmV4dFZpZXdwb3J0LnksXG4gICAgICAgICAgdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLndpZHRoIC8gbmV4dFZpZXdwb3J0LndpZHRoXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLl9zZXRDYW1lcmEobmV4dENhbWVyYSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbmNlKFwic3RvcC1mb2xsb3dpbmdcIiwgY2FuY2VsKTtcbiAgICAgIHRoaXMuYWRkTGlzdGVuZXIoXCJmcmFtZVwiLCBtb3ZlVG93YXJkc1VzZXIpO1xuICAgICAgbW92ZVRvd2FyZHNVc2VyKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFN0b3Agdmlld3BvcnQtZm9sbG93aW5nIGEgdXNlci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnN0b3BGb2xsb3dpbmdVc2VyKClcbiAgICogYGBgXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0b3BGb2xsb3dpbmdVc2VyKCkge1xuICAgIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnB1dChbdGhpcy5nZXRDYW1lcmEoKV0pO1xuICAgICAgICB0aGlzLl9pc0xvY2tlZE9uRm9sbG93aW5nVXNlci5zZXQoZmFsc2UpO1xuICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBmb2xsb3dpbmdVc2VySWQ6IG51bGwgfSk7XG4gICAgICAgIHRoaXMuZW1pdChcInN0b3AtZm9sbG93aW5nXCIpO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldFVub3JkZXJlZFJlbmRlcmluZ1NoYXBlcyh1c2VFZGl0b3JTdGF0ZSkge1xuICAgIGNvbnN0IHJlbmRlcmluZ1NoYXBlcyA9IFtdO1xuICAgIGxldCBuZXh0SW5kZXggPSB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZSAqIDI7XG4gICAgbGV0IG5leHRCYWNrZ3JvdW5kSW5kZXggPSB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZTtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIGNvbnN0IGFkZFNoYXBlQnlJZCA9IChpZCwgb3BhY2l0eSwgaXNBbmNlc3RvckVyYXNpbmcpID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgICBpZiAoIXNoYXBlKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5pc1NoYXBlSGlkZGVuKHNoYXBlKSkgcmV0dXJuO1xuICAgICAgb3BhY2l0eSAqPSBzaGFwZS5vcGFjaXR5O1xuICAgICAgbGV0IGlzU2hhcGVFcmFzaW5nID0gZmFsc2U7XG4gICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpO1xuICAgICAgaWYgKHVzZUVkaXRvclN0YXRlKSB7XG4gICAgICAgIGlzU2hhcGVFcmFzaW5nID0gIWlzQW5jZXN0b3JFcmFzaW5nICYmIGVyYXNpbmdTaGFwZUlkcy5pbmNsdWRlcyhpZCk7XG4gICAgICAgIGlmIChpc1NoYXBlRXJhc2luZykge1xuICAgICAgICAgIG9wYWNpdHkgKj0gMC4zMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVuZGVyaW5nU2hhcGVzLnB1c2goe1xuICAgICAgICBpZCxcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHV0aWwsXG4gICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gICAgICAgIGJhY2tncm91bmRJbmRleDogbmV4dEJhY2tncm91bmRJbmRleCxcbiAgICAgICAgb3BhY2l0eVxuICAgICAgfSk7XG4gICAgICBuZXh0SW5kZXggKz0gMTtcbiAgICAgIG5leHRCYWNrZ3JvdW5kSW5kZXggKz0gMTtcbiAgICAgIGNvbnN0IGNoaWxkSWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChpZCk7XG4gICAgICBpZiAoIWNoaWxkSWRzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgbGV0IGJhY2tncm91bmRJbmRleFRvUmVzdG9yZSA9IG51bGw7XG4gICAgICBpZiAodXRpbC5wcm92aWRlc0JhY2tncm91bmRGb3JDaGlsZHJlbihzaGFwZSkpIHtcbiAgICAgICAgYmFja2dyb3VuZEluZGV4VG9SZXN0b3JlID0gbmV4dEJhY2tncm91bmRJbmRleDtcbiAgICAgICAgbmV4dEJhY2tncm91bmRJbmRleCA9IG5leHRJbmRleDtcbiAgICAgICAgbmV4dEluZGV4ICs9IHRoaXMub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIGNoaWxkSWRzKSB7XG4gICAgICAgIGFkZFNoYXBlQnlJZChjaGlsZElkLCBvcGFjaXR5LCBpc0FuY2VzdG9yRXJhc2luZyB8fCBpc1NoYXBlRXJhc2luZyk7XG4gICAgICB9XG4gICAgICBpZiAoYmFja2dyb3VuZEluZGV4VG9SZXN0b3JlICE9PSBudWxsKSB7XG4gICAgICAgIG5leHRCYWNrZ3JvdW5kSW5kZXggPSBiYWNrZ3JvdW5kSW5kZXhUb1Jlc3RvcmU7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwYWdlcyA9IHVzZUVkaXRvclN0YXRlID8gW3RoaXMuZ2V0Q3VycmVudFBhZ2UoKV0gOiB0aGlzLmdldFBhZ2VzKCk7XG4gICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkSWQgb2YgdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChwYWdlLmlkKSkge1xuICAgICAgICBhZGRTaGFwZUJ5SWQoY2hpbGRJZCwgMSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyaW5nU2hhcGVzO1xuICB9XG4gIF9kZWNheUNhbWVyYVN0YXRlVGltZW91dChlbGFwc2VkKSB7XG4gICAgdGhpcy5fY2FtZXJhU3RhdGVUaW1lb3V0UmVtYWluaW5nIC09IGVsYXBzZWQ7XG4gICAgaWYgKHRoaXMuX2NhbWVyYVN0YXRlVGltZW91dFJlbWFpbmluZyA+IDApIHJldHVybjtcbiAgICB0aGlzLm9mZihcInRpY2tcIiwgdGhpcy5fZGVjYXlDYW1lcmFTdGF0ZVRpbWVvdXQpO1xuICAgIHRoaXMuX2NhbWVyYVN0YXRlLnNldChcImlkbGVcIik7XG4gIH1cbiAgX3RpY2tDYW1lcmFTdGF0ZSgpIHtcbiAgICB0aGlzLl9jYW1lcmFTdGF0ZVRpbWVvdXRSZW1haW5pbmcgPSB0aGlzLm9wdGlvbnMuY2FtZXJhTW92aW5nVGltZW91dE1zO1xuICAgIGlmICh0aGlzLl9jYW1lcmFTdGF0ZS5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKSAhPT0gXCJpZGxlXCIpIHJldHVybjtcbiAgICB0aGlzLl9jYW1lcmFTdGF0ZS5zZXQoXCJtb3ZpbmdcIik7XG4gICAgdGhpcy5vbihcInRpY2tcIiwgdGhpcy5fZGVjYXlDYW1lcmFTdGF0ZVRpbWVvdXQpO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBjYW1lcmEgaXMgbW92aW5nIG9yIGlkbGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRDYW1lcmFTdGF0ZSgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDYW1lcmFTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FtZXJhU3RhdGUuZ2V0KCk7XG4gIH1cbiAgZ2V0UmVuZGVyaW5nU2hhcGVzKCkge1xuICAgIGNvbnN0IHJlbmRlcmluZ1NoYXBlcyA9IHRoaXMuZ2V0VW5vcmRlcmVkUmVuZGVyaW5nU2hhcGVzKHRydWUpO1xuICAgIHJldHVybiByZW5kZXJpbmdTaGFwZXMuc29ydChzb3J0QnlJZCk7XG4gIH1cbiAgX2dldEFsbFBhZ2VzUXVlcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUucXVlcnkucmVjb3JkcyhcInBhZ2VcIik7XG4gIH1cbiAgZ2V0UGFnZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEFsbFBhZ2VzUXVlcnkoKS5nZXQoKS5zb3J0KHNvcnRCeUluZGV4KTtcbiAgfVxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldEN1cnJlbnRQYWdlKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEN1cnJlbnRQYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmdldFBhZ2UodGhpcy5nZXRDdXJyZW50UGFnZUlkKCkpO1xuICB9XG4gIGdldEN1cnJlbnRQYWdlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmN1cnJlbnRQYWdlSWQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRQYWdlKG15UGFnZS5pZClcbiAgICogZWRpdG9yLmdldFBhZ2UobXlQYWdlKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhZ2UgLSBUaGUgcGFnZSAob3IgdGhlIHBhZ2UgaWQpIHRvIGdldC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0UGFnZShwYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KHR5cGVvZiBwYWdlID09PSBcInN0cmluZ1wiID8gcGFnZSA6IHBhZ2UuaWQpO1xuICB9XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBhbGwgb2YgdGhlIHNoYXBlcyBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0Q3VycmVudFBhZ2VJZHMoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFBhZ2VTaGFwZUlkcy5nZXQoKTtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVNoYXBlSWRzU29ydGVkKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpKS5zb3J0KCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaWRzIG9mIHNoYXBlcyBvbiBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGlkc09uUGFnZTEgPSBlZGl0b3IuZ2V0UGFnZVNoYXBlSWRzKCdwYWdlMScpXG4gICAqIGNvbnN0IGlkc09uUGFnZTIgPSBlZGl0b3IuZ2V0UGFnZVNoYXBlSWRzKG15UGFnZTIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciB0aGUgcGFnZSBpZCkgdG8gZ2V0IHRoZSBzaGFwZSBpZHMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqKi9cbiAgZ2V0UGFnZVNoYXBlSWRzKHBhZ2UpIHtcbiAgICBjb25zdCBwYWdlSWQgPSB0eXBlb2YgcGFnZSA9PT0gXCJzdHJpbmdcIiA/IHBhZ2UgOiBwYWdlLmlkO1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3RvcmUucXVlcnkuZXhlYyhcInNoYXBlXCIsIHsgcGFyZW50SWQ6IHsgZXE6IHBhZ2VJZCB9IH0pO1xuICAgIHJldHVybiB0aGlzLmdldFNoYXBlQW5kRGVzY2VuZGFudElkcyhyZXN1bHQubWFwKChzKSA9PiBzLmlkKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0Q3VycmVudFBhZ2UoJ3BhZ2UxJylcbiAgICogZWRpdG9yLnNldEN1cnJlbnRQYWdlKG15UGFnZTEpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciB0aGUgcGFnZSBpZCkgdG8gc2V0IGFzIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEN1cnJlbnRQYWdlKHBhZ2UpIHtcbiAgICBjb25zdCBwYWdlSWQgPSB0eXBlb2YgcGFnZSA9PT0gXCJzdHJpbmdcIiA/IHBhZ2UgOiBwYWdlLmlkO1xuICAgIGlmICghdGhpcy5zdG9yZS5oYXMocGFnZUlkKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRyaWVkIHRvIHNldCB0aGUgY3VycmVudCBwYWdlIGlkIHRvIGEgcGFnZSB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgcmV0dXJuIHRoaXMucnVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnB1dChbeyAuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKSwgY3VycmVudFBhZ2VJZDogcGFnZUlkIH1dKTtcbiAgICAgICAgdGhpcy5zZXRDYW1lcmEodGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcInJlY29yZC1wcmVzZXJ2ZVJlZG9TdGFja1wiIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYSBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IudXBkYXRlUGFnZSh7IGlkOiAncGFnZTInLCBuYW1lOiAnUGFnZSAyJyB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcnRpYWwgLSBUaGUgcGFydGlhbCBvZiB0aGUgc2hhcGUgdG8gdXBkYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1cGRhdGVQYWdlKHBhcnRpYWwpIHtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHByZXYgPSB0aGlzLmdldFBhZ2UocGFydGlhbC5pZCk7XG4gICAgaWYgKCFwcmV2KSByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gdGhpcy5ydW4oKCkgPT4gdGhpcy5zdG9yZS51cGRhdGUocGFydGlhbC5pZCwgKHBhZ2UpID0+ICh7IC4uLnBhZ2UsIC4uLnBhcnRpYWwgfSkpKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNyZWF0ZVBhZ2UobXlQYWdlKVxuICAgKiBlZGl0b3IuY3JlYXRlUGFnZSh7IG5hbWU6ICdQYWdlIDInIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciBwYWdlIHBhcnRpYWwpIHRvIGNyZWF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlUGFnZShwYWdlKSB7XG4gICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5nZXRQYWdlcygpLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4UGFnZXMpIHJldHVybjtcbiAgICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5nZXRQYWdlcygpO1xuICAgICAgY29uc3QgbmFtZSA9IGdldEluY3JlbWVudGVkTmFtZShcbiAgICAgICAgcGFnZS5uYW1lID8/IFwiUGFnZSAxXCIsXG4gICAgICAgIHBhZ2VzLm1hcCgocCkgPT4gcC5uYW1lKVxuICAgICAgKTtcbiAgICAgIGxldCBpbmRleCA9IHBhZ2UuaW5kZXg7XG4gICAgICBpZiAoIWluZGV4IHx8IHBhZ2VzLnNvbWUoKHApID0+IHAuaW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICBpbmRleCA9IGdldEluZGV4QWJvdmUocGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0uaW5kZXgpO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3UGFnZSA9IFBhZ2VSZWNvcmRUeXBlLmNyZWF0ZSh7XG4gICAgICAgIG1ldGE6IHt9LFxuICAgICAgICAuLi5wYWdlLFxuICAgICAgICBuYW1lLFxuICAgICAgICBpbmRleFxuICAgICAgfSk7XG4gICAgICB0aGlzLnN0b3JlLnB1dChbbmV3UGFnZV0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZGVsZXRlUGFnZSgncGFnZTEnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhZ2UgLSBUaGUgcGFnZSAob3IgdGhlIHBhZ2UgaWQpIHRvIGRlbGV0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVsZXRlUGFnZShwYWdlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2YgcGFnZSA9PT0gXCJzdHJpbmdcIiA/IHBhZ2UgOiBwYWdlLmlkO1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuO1xuICAgICAgY29uc3QgcGFnZXMgPSB0aGlzLmdldFBhZ2VzKCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoID09PSAxKSByZXR1cm47XG4gICAgICBjb25zdCBkZWxldGVkUGFnZSA9IHRoaXMuZ2V0UGFnZShpZCk7XG4gICAgICBpZiAoIWRlbGV0ZWRQYWdlKSByZXR1cm47XG4gICAgICBpZiAoaWQgPT09IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFnZXMuZmluZEluZGV4KChwYWdlMikgPT4gcGFnZTIuaWQgPT09IGlkKTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHBhZ2VzW2luZGV4IC0gMV0gPz8gcGFnZXNbaW5kZXggKyAxXTtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50UGFnZShuZXh0LmlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RvcmUucmVtb3ZlKFtkZWxldGVkUGFnZS5pZF0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEdXBsaWNhdGUgYSBwYWdlLlxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciB0aGUgcGFnZSBpZCkgdG8gZHVwbGljYXRlLiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0gY3JlYXRlSWQgLSBUaGUgaWQgb2YgdGhlIG5ldyBwYWdlLiBEZWZhdWx0cyB0byBhIG5ldyBpZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZHVwbGljYXRlUGFnZShwYWdlLCBjcmVhdGVJZCA9IFBhZ2VSZWNvcmRUeXBlLmNyZWF0ZUlkKCkpIHtcbiAgICBpZiAodGhpcy5nZXRQYWdlcygpLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4UGFnZXMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHBhZ2UgPT09IFwic3RyaW5nXCIgPyBwYWdlIDogcGFnZS5pZDtcbiAgICBjb25zdCBmcmVzaFBhZ2UgPSB0aGlzLmdldFBhZ2UoaWQpO1xuICAgIGlmICghZnJlc2hQYWdlKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBwcmV2Q2FtZXJhID0geyAuLi50aGlzLmdldENhbWVyYSgpIH07XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudEZyb21DdXJyZW50UGFnZSh0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KGZyZXNoUGFnZS5pZCkpO1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5nZXRQYWdlcygpO1xuICAgICAgY29uc3QgaW5kZXggPSBnZXRJbmRleEJldHdlZW4oZnJlc2hQYWdlLmluZGV4LCBwYWdlc1twYWdlcy5pbmRleE9mKGZyZXNoUGFnZSkgKyAxXT8uaW5kZXgpO1xuICAgICAgdGhpcy5jcmVhdGVQYWdlKHsgbmFtZTogZnJlc2hQYWdlLm5hbWUgKyBcIiBDb3B5XCIsIGlkOiBjcmVhdGVJZCwgaW5kZXggfSk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRQYWdlKGNyZWF0ZUlkKTtcbiAgICAgIHRoaXMuc2V0Q2FtZXJhKHByZXZDYW1lcmEpO1xuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHV0Q29udGVudE9udG9DdXJyZW50UGFnZShjb250ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVuYW1lIGEgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlbmFtZVBhZ2UoJ3BhZ2UxJywgJ015IFBhZ2UnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhZ2UgLSBUaGUgcGFnZSAob3IgdGhlIHBhZ2UgaWQpIHRvIHJlbmFtZS5cbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmV3IG5hbWUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlbmFtZVBhZ2UocGFnZSwgbmFtZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHBhZ2UgPT09IFwic3RyaW5nXCIgPyBwYWdlIDogcGFnZS5pZDtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIHRoaXMudXBkYXRlUGFnZSh7IGlkLCBuYW1lIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIF9nZXRBbGxBc3NldHNRdWVyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5xdWVyeS5yZWNvcmRzKFwiYXNzZXRcIik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgYXNzZXRzIGluIHRoZSBlZGl0b3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEFzc2V0cygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0QWxsQXNzZXRzUXVlcnkoKS5nZXQoKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIG9uZSBvciBtb3JlIGFzc2V0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNyZWF0ZUFzc2V0cyhbLi4ubXlBc3NldHNdKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0cyAtIFRoZSBhc3NldHMgdG8gY3JlYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjcmVhdGVBc3NldHMoYXNzZXRzKSB7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBpZiAoYXNzZXRzLmxlbmd0aCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLnJ1bigoKSA9PiB0aGlzLnN0b3JlLnB1dChhc3NldHMpLCB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBvbmUgb3IgbW9yZSBhc3NldHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVBc3NldHMoW3sgaWQ6ICdhc3NldDEnLCBuYW1lOiAnTmV3IG5hbWUnIH1dKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0cyAtIFRoZSBhc3NldHMgdG8gdXBkYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1cGRhdGVBc3NldHMoYXNzZXRzKSB7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBpZiAoYXNzZXRzLmxlbmd0aCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLnJ1bihcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zdG9yZS5wdXQoXG4gICAgICAgICAgYXNzZXRzLm1hcCgocGFydGlhbCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnRoaXMuc3RvcmUuZ2V0KHBhcnRpYWwuaWQpLFxuICAgICAgICAgICAgLi4ucGFydGlhbFxuICAgICAgICAgIH0pKVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIG9uZSBvciBtb3JlIGFzc2V0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRlbGV0ZUFzc2V0cyhbJ2Fzc2V0MScsICdhc3NldDInXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBhc3NldHMgLSBUaGUgYXNzZXRzIChvciBhc3NldCBpZHMpIHRvIGRlbGV0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVsZXRlQXNzZXRzKGFzc2V0cykge1xuICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIGFzc2V0c1swXSA9PT0gXCJzdHJpbmdcIiA/IGFzc2V0cyA6IGFzc2V0cy5tYXAoKGEpID0+IGEuaWQpO1xuICAgIGlmIChpZHMubGVuZ3RoIDw9IDApIHJldHVybiB0aGlzO1xuICAgIHRoaXMucnVuKCgpID0+IHRoaXMuc3RvcmUucmVtb3ZlKGlkcyksIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGFzc2V0IGJ5IGl0cyBpZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldEFzc2V0KCdhc3NldDEnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0IC0gVGhlIGFzc2V0IChvciBhc3NldCBpZCkgdG8gZ2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRBc3NldChhc3NldCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmdldCh0eXBlb2YgYXNzZXQgPT09IFwic3RyaW5nXCIgPyBhc3NldCA6IGFzc2V0LmlkKTtcbiAgfVxuICBhc3luYyByZXNvbHZlQXNzZXRVcmwoYXNzZXRJZCwgY29udGV4dCkge1xuICAgIGlmICghYXNzZXRJZCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYXNzZXQgPSB0aGlzLmdldEFzc2V0KGFzc2V0SWQpO1xuICAgIGlmICghYXNzZXQpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHsgc2NyZWVuU2NhbGUgPSAxLCBzaG91bGRSZXNvbHZlVG9PcmlnaW5hbCA9IGZhbHNlIH0gPSBjb250ZXh0O1xuICAgIGNvbnN0IHpvb21TdGVwRnVuY3Rpb24gPSAoem9vbSkgPT4gTWF0aC5wb3coMiwgTWF0aC5jZWlsKE1hdGgubG9nMih6b29tKSkpO1xuICAgIGNvbnN0IHN0ZXBwZWRTY3JlZW5TY2FsZSA9IE1hdGgubWF4KDAuMTI1LCB6b29tU3RlcEZ1bmN0aW9uKHNjcmVlblNjYWxlKSk7XG4gICAgY29uc3QgbmV0d29ya0VmZmVjdGl2ZVR5cGUgPSBcImNvbm5lY3Rpb25cIiBpbiBuYXZpZ2F0b3IgPyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlIDogbnVsbDtcbiAgICBjb25zdCBkcHIgPSB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnN0b3JlLnByb3BzLmFzc2V0cy5yZXNvbHZlKGFzc2V0LCB7XG4gICAgICBzY3JlZW5TY2FsZTogc2NyZWVuU2NhbGUgfHwgMSxcbiAgICAgIHN0ZXBwZWRTY3JlZW5TY2FsZSxcbiAgICAgIGRwcixcbiAgICAgIG5ldHdvcmtFZmZlY3RpdmVUeXBlLFxuICAgICAgc2hvdWxkUmVzb2x2ZVRvT3JpZ2luYWxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVXBsb2FkIGFuIGFzc2V0IHRvIHRoZSBzdG9yZSdzIGFzc2V0IHNlcnZpY2UsIHJldHVybmluZyBhIFVSTCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlc29sdmUgdGhlXG4gICAqIGFzc2V0LlxuICAgKi9cbiAgYXN5bmMgdXBsb2FkQXNzZXQoYXNzZXQsIGZpbGUpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdG9yZS5wcm9wcy5hc3NldHMudXBsb2FkKGFzc2V0LCBmaWxlKTtcbiAgfVxuICBfZ2V0U2hhcGVHZW9tZXRyeUNhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUoXG4gICAgICBcImJvdW5kc1wiLFxuICAgICAgKHNoYXBlKSA9PiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuZ2V0R2VvbWV0cnkoc2hhcGUpLFxuICAgICAgKGEsIGIpID0+IGEucHJvcHMgPT09IGIucHJvcHNcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGdlb21ldHJ5IG9mIGEgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KG15U2hhcGUpXG4gICAqIGVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIGdldCB0aGUgZ2VvbWV0cnkgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZUdlb21ldHJ5KHNoYXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNoYXBlR2VvbWV0cnlDYWNoZSgpLmdldCh0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkKTtcbiAgfVxuICBfZ2V0U2hhcGVIYW5kbGVzQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcImhhbmRsZXNcIiwgKHNoYXBlKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLmdldEhhbmRsZXM/LihzaGFwZSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaGFuZGxlcyAoaWYgYW55KSBmb3IgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlSGFuZGxlcyhteVNoYXBlKVxuICAgKiBlZGl0b3IuZ2V0U2hhcGVIYW5kbGVzKG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIGdldCB0aGUgaGFuZGxlcyBmb3IuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlSGFuZGxlcyhzaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9nZXRTaGFwZUhhbmRsZXNDYWNoZSgpLmdldCh0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsb2NhbCB0cmFuc2Zvcm0gZm9yIGEgc2hhcGUgYXMgYSBtYXRyaXggbW9kZWwuIFRoaXMgdHJhbnNmb3JtIHJlZmxlY3RzIGJvdGggaXRzXG4gICAqIHRyYW5zbGF0aW9uICh4LCB5KSBmcm9tIGZyb20gZWl0aGVyIGl0cyBwYXJlbnQncyB0b3AgbGVmdCBjb3JuZXIsIGlmIHRoZSBzaGFwZSdzIHBhcmVudCBpc1xuICAgKiBhbm90aGVyIHNoYXBlLCBvciBlbHNlIGZyb20gdGhlIDAsMCBvZiB0aGUgcGFnZSwgaWYgdGhlIHNoYXBlJ3MgcGFyZW50IGlzIHRoZSBwYWdlOyBhbmQgdGhlXG4gICAqIHNoYXBlJ3Mgcm90YXRpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRTaGFwZUxvY2FsVHJhbnNmb3JtKG15U2hhcGUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gZ2V0IHRoZSBsb2NhbCB0cmFuc2Zvcm0gZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZUxvY2FsVHJhbnNmb3JtKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWZyZXNoU2hhcGUpIHRocm93IEVycm9yKFwiRWRpdG9yLmdldFRyYW5zZm9ybTogc2hhcGUgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBNYXQuSWRlbnRpdHkoKS50cmFuc2xhdGUoZnJlc2hTaGFwZS54LCBmcmVzaFNoYXBlLnkpLnJvdGF0ZShmcmVzaFNoYXBlLnJvdGF0aW9uKTtcbiAgfVxuICBfZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcInBhZ2VUcmFuc2Zvcm1DYWNoZVwiLCAoc2hhcGUpID0+IHtcbiAgICAgIGlmIChpc1BhZ2VJZChzaGFwZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVMb2NhbFRyYW5zZm9ybShzaGFwZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLl9nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZSgpLmdldChzaGFwZS5wYXJlbnRJZCkgPz8gTWF0LklkZW50aXR5KCk7XG4gICAgICByZXR1cm4gTWF0LkNvbXBvc2UocGFyZW50VHJhbnNmb3JtLCB0aGlzLmdldFNoYXBlTG9jYWxUcmFuc2Zvcm0oc2hhcGUpKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsb2NhbCB0cmFuc2Zvcm0gb2YgYSBzaGFwZSdzIHBhcmVudCBhcyBhIG1hdHJpeCBtb2RlbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKG15U2hhcGUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHNoYXBlIGlkKSB0byBnZXQgdGhlIHBhcmVudCB0cmFuc2Zvcm0gZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZVBhcmVudFRyYW5zZm9ybShzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFmcmVzaFNoYXBlIHx8IGlzUGFnZUlkKGZyZXNoU2hhcGUucGFyZW50SWQpKSByZXR1cm4gTWF0LklkZW50aXR5KCk7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNoYXBlUGFnZVRyYW5zZm9ybUNhY2hlKCkuZ2V0KGZyZXNoU2hhcGUucGFyZW50SWQpID8/IE1hdC5JZGVudGl0eSgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRyYW5zZm9ybSBvZiBhIHNoYXBlIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0obXlTaGFwZSlcbiAgICogZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShteVNoYXBlSWQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHNoYXBlIGlkKSB0byBnZXQgdGhlIHBhZ2UgdHJhbnNmb3JtIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIHJldHVybiB0aGlzLl9nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZSgpLmdldChpZCkgPz8gTWF0LklkZW50aXR5KCk7XG4gIH1cbiAgX2dldFNoYXBlUGFnZUJvdW5kc0NhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUoXCJwYWdlQm91bmRzQ2FjaGVcIiwgKHNoYXBlKSA9PiB7XG4gICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQoc2hhcGUuaWQpO1xuICAgICAgaWYgKCFwYWdlVHJhbnNmb3JtKSByZXR1cm4gbmV3IEJveCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gQm94LkZyb21Qb2ludHMoXG4gICAgICAgIE1hdC5hcHBseVRvUG9pbnRzKHBhZ2VUcmFuc2Zvcm0sIHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkudmVydGljZXMpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBib3VuZHMgb2YgYSBzaGFwZSBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKG15U2hhcGUpXG4gICAqIGVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMobXlTaGFwZUlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBib3VuZHMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZVBhZ2VCb3VuZHMoc2hhcGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVQYWdlQm91bmRzQ2FjaGUoKS5nZXQodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZCk7XG4gIH1cbiAgX2dldFNoYXBlQ2xpcFBhdGhDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwiY2xpcFBhdGhDYWNoZVwiLCAoc2hhcGUpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VNYXNrID0gdGhpcy5fZ2V0U2hhcGVNYXNrQ2FjaGUoKS5nZXQoc2hhcGUuaWQpO1xuICAgICAgaWYgKCFwYWdlTWFzaykgcmV0dXJuIHZvaWQgMDtcbiAgICAgIGlmIChwYWdlTWFzay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGBwb2x5Z29uKDBweCAwcHgsIDBweCAwcHgsIDBweCAwcHgpYDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSB0aGlzLl9nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZSgpLmdldChzaGFwZS5pZCk7XG4gICAgICBpZiAoIXBhZ2VUcmFuc2Zvcm0pIHJldHVybiB2b2lkIDA7XG4gICAgICBjb25zdCBsb2NhbE1hc2sgPSBNYXQuYXBwbHlUb1BvaW50cyhNYXQuSW52ZXJzZShwYWdlVHJhbnNmb3JtKSwgcGFnZU1hc2spO1xuICAgICAgcmV0dXJuIGBwb2x5Z29uKCR7bG9jYWxNYXNrLm1hcCgocCkgPT4gYCR7cC54fXB4ICR7cC55fXB4YCkuam9pbihcIixcIil9KWA7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY2xpcCBwYXRoIGZvciBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBjbGlwUGF0aCA9IGVkaXRvci5nZXRTaGFwZUNsaXBQYXRoKHNoYXBlKVxuICAgKiBjb25zdCBjbGlwUGF0aCA9IGVkaXRvci5nZXRTaGFwZUNsaXBQYXRoKHNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBjbGlwIHBhdGggZm9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgY2xpcCBwYXRoIG9yIHVuZGVmaW5lZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVDbGlwUGF0aChzaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9nZXRTaGFwZUNsaXBQYXRoQ2FjaGUoKS5nZXQodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZCk7XG4gIH1cbiAgX2dldFNoYXBlTWFza0NhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUoXCJwYWdlTWFza0NhY2hlXCIsIChzaGFwZSkgPT4ge1xuICAgICAgaWYgKGlzUGFnZUlkKHNoYXBlLnBhcmVudElkKSkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIGNvbnN0IGZyYW1lQW5jZXN0b3JzID0gdGhpcy5nZXRTaGFwZUFuY2VzdG9ycyhzaGFwZS5pZCkuZmlsdGVyKFxuICAgICAgICAoc2hhcGUyKSA9PiB0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUyLCBcImZyYW1lXCIpXG4gICAgICApO1xuICAgICAgaWYgKGZyYW1lQW5jZXN0b3JzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIGNvbnN0IHBhZ2VNYXNrID0gZnJhbWVBbmNlc3RvcnMubWFwKFxuICAgICAgICAocykgPT4gKFxuICAgICAgICAgIC8vIEFwcGx5IHRoZSBmcmFtZSB0cmFuc2Zvcm0gdG8gdGhlIGZyYW1lIG91dGxpbmUgdG8gZ2V0IHRoZSBmcmFtZSBvdXRsaW5lIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2VcbiAgICAgICAgICAodGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQocy5pZCkuYXBwbHlUb1BvaW50cyh0aGlzLmdldFNoYXBlR2VvbWV0cnkocykudmVydGljZXMpKVxuICAgICAgICApXG4gICAgICApLnJlZHVjZSgoYWNjLCBiKSA9PiB7XG4gICAgICAgIGlmICghKGIgJiYgYWNjKSkgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0UG9seWdvblBvbHlnb24oYWNjLCBiKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbikge1xuICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb24ubWFwKFZlYy5DYXN0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwYWdlTWFzaztcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBtYXNrIChpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlKSBmb3IgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgcGFnZU1hc2sgPSBlZGl0b3IuZ2V0U2hhcGVNYXNrKHNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciB0aGUgc2hhcGUgaWQpIG9mIHRoZSBzaGFwZSB0byBnZXQgdGhlIG1hc2sgZm9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbWFzayBmb3IgdGhlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZU1hc2soc2hhcGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVNYXNrQ2FjaGUoKS5nZXQodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgYm91bmRzIG9mIGEgc2hhcGUgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSwgaW5jb3Jwb3JhdGluZyBhbnkgbWFza3MuIEZvciBleGFtcGxlLCBpZiB0aGVcbiAgICogc2hhcGUgd2VyZSB0aGUgY2hpbGQgb2YgYSBmcmFtZSBhbmQgd2FzIGhhbGYgd2F5IG91dCBvZiB0aGUgZnJhbWUsIHRoZSBib3VuZHMgd291bGQgYmUgdGhlIGhhbGZcbiAgICogb2YgdGhlIHNoYXBlIHRoYXQgd2FzIGluIHRoZSBmcmFtZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhteVNoYXBlKVxuICAgKiBlZGl0b3IuZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzKG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIG1hc2tlZCBib3VuZHMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHMoc2hhcGUpIHtcbiAgICBpZiAodHlwZW9mIHNoYXBlICE9PSBcInN0cmluZ1wiKSBzaGFwZSA9IHNoYXBlLmlkO1xuICAgIHJldHVybiB0aGlzLl9nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHNDYWNoZSgpLmdldChzaGFwZSk7XG4gIH1cbiAgX2dldFNoYXBlTWFza2VkUGFnZUJvdW5kc0NhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUoXCJzaGFwZU1hc2tlZFBhZ2VCb3VuZHNDYWNoZVwiLCAoc2hhcGUpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSB0aGlzLl9nZXRTaGFwZVBhZ2VCb3VuZHNDYWNoZSgpLmdldChzaGFwZS5pZCk7XG4gICAgICBpZiAoIXBhZ2VCb3VuZHMpIHJldHVybjtcbiAgICAgIGNvbnN0IHBhZ2VNYXNrID0gdGhpcy5fZ2V0U2hhcGVNYXNrQ2FjaGUoKS5nZXQoc2hhcGUuaWQpO1xuICAgICAgaWYgKHBhZ2VNYXNrKSB7XG4gICAgICAgIGlmIChwYWdlTWFzay5sZW5ndGggPT09IDApIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHsgY29ybmVycyB9ID0gcGFnZUJvdW5kcztcbiAgICAgICAgaWYgKGNvcm5lcnMuZXZlcnkoKHAsIGkpID0+IHAgJiYgVmVjLkVxdWFscyhwLCBwYWdlTWFza1tpXSkpKSByZXR1cm4gcGFnZUJvdW5kcy5jbG9uZSgpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3RQb2x5Z29uUG9seWdvbihwYWdlTWFzaywgY29ybmVycyk7XG4gICAgICAgIGlmICghaW50ZXJzZWN0aW9uKSByZXR1cm47XG4gICAgICAgIHJldHVybiBCb3guRnJvbVBvaW50cyhpbnRlcnNlY3Rpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhZ2VCb3VuZHM7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgYW5jZXN0b3JzIG9mIGEgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGFuY2VzdG9ycyA9IGVkaXRvci5nZXRTaGFwZUFuY2VzdG9ycyhteVNoYXBlKVxuICAgKiBjb25zdCBhbmNlc3RvcnMgPSBlZGl0b3IuZ2V0U2hhcGVBbmNlc3RvcnMobXlTaGFwZUlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBhbmNlc3RvcnMgZm9yLlxuICAgKiBAcGFyYW0gYWNjIC0gVGhlIGFjY3VtdWxhdG9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZUFuY2VzdG9ycyhzaGFwZSwgYWNjID0gW10pIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3QgZnJlc2hTaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgIGlmICghZnJlc2hTaGFwZSkgcmV0dXJuIGFjYztcbiAgICBjb25zdCBwYXJlbnRJZCA9IGZyZXNoU2hhcGUucGFyZW50SWQ7XG4gICAgaWYgKGlzUGFnZUlkKHBhcmVudElkKSkge1xuICAgICAgYWNjLnJldmVyc2UoKTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuc3RvcmUuZ2V0KHBhcmVudElkKTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuIGFjYztcbiAgICBhY2MucHVzaChwYXJlbnQpO1xuICAgIHJldHVybiB0aGlzLmdldFNoYXBlQW5jZXN0b3JzKHBhcmVudCwgYWNjKTtcbiAgfVxuICAvKipcbiAgICogRmluZCB0aGUgZmlyc3QgYW5jZXN0b3IgbWF0Y2hpbmcgdGhlIGdpdmVuIHByZWRpY2F0ZVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlKVxuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlLmlkKVxuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlLmlkLCAoc2hhcGUpID0+IHNoYXBlLnR5cGUgPT09ICdmcmFtZScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gY2hlY2sgdGhlIGFuY2VzdG9ycyBmb3IuXG4gICAqIEBwYXJhbSBwcmVkaWNhdGUgLSBUaGUgcHJlZGljYXRlIHRvIG1hdGNoLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBmaW5kU2hhcGVBbmNlc3RvcihzaGFwZSwgcHJlZGljYXRlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWZyZXNoU2hhcGUpIHJldHVybjtcbiAgICBjb25zdCBwYXJlbnRJZCA9IGZyZXNoU2hhcGUucGFyZW50SWQ7XG4gICAgaWYgKGlzUGFnZUlkKHBhcmVudElkKSkgcmV0dXJuO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0U2hhcGUocGFyZW50SWQpO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG4gICAgcmV0dXJuIHByZWRpY2F0ZShwYXJlbnQpID8gcGFyZW50IDogdGhpcy5maW5kU2hhcGVBbmNlc3RvcihwYXJlbnQsIHByZWRpY2F0ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdGhlIGdpdmVuIHNoYXBlIGhhcyB0aGUgZ2l2ZW4gYW5jZXN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHBhcmFtIGFuY2VzdG9ySWQgLSBUaGUgaWQgb2YgdGhlIGFuY2VzdG9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoYXNBbmNlc3RvcihzaGFwZSwgYW5jZXN0b3JJZCkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZT8uaWQ7XG4gICAgY29uc3QgZnJlc2hTaGFwZSA9IGlkICYmIHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgIGlmICghZnJlc2hTaGFwZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChmcmVzaFNoYXBlLnBhcmVudElkID09PSBhbmNlc3RvcklkKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcy5oYXNBbmNlc3Rvcih0aGlzLmdldFNoYXBlUGFyZW50KGZyZXNoU2hhcGUpLCBhbmNlc3RvcklkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjb21tb24gYW5jZXN0b3Igb2YgdHdvIG9yIG1vcmUgc2hhcGVzIHRoYXQgbWF0Y2hlcyBhIHByZWRpY2F0ZS5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gY2hlY2suXG4gICAqIEBwYXJhbSBwcmVkaWNhdGUgLSBUaGUgcHJlZGljYXRlIHRvIG1hdGNoLlxuICAgKi9cbiAgZmluZENvbW1vbkFuY2VzdG9yKHNoYXBlcywgcHJlZGljYXRlKSB7XG4gICAgaWYgKHNoYXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IGZyZXNoU2hhcGVzID0gY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgICBpZiAoZnJlc2hTaGFwZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBwYXJlbnRJZCA9IGZyZXNoU2hhcGVzWzBdLnBhcmVudElkO1xuICAgICAgaWYgKGlzUGFnZUlkKHBhcmVudElkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJlZGljYXRlID8gdGhpcy5maW5kU2hhcGVBbmNlc3RvcihmcmVzaFNoYXBlc1swXSwgcHJlZGljYXRlKT8uaWQgOiBwYXJlbnRJZDtcbiAgICB9XG4gICAgY29uc3QgW25vZGVBLCAuLi5vdGhlcnNdID0gZnJlc2hTaGFwZXM7XG4gICAgbGV0IGFuY2VzdG9yID0gdGhpcy5nZXRTaGFwZVBhcmVudChub2RlQSk7XG4gICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICBpZiAocHJlZGljYXRlICYmICFwcmVkaWNhdGUoYW5jZXN0b3IpKSB7XG4gICAgICAgIGFuY2VzdG9yID0gdGhpcy5nZXRTaGFwZVBhcmVudChhbmNlc3Rvcik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKG90aGVycy5ldmVyeSgoc2hhcGUpID0+IHRoaXMuaGFzQW5jZXN0b3Ioc2hhcGUsIGFuY2VzdG9yLmlkKSkpIHtcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9yLmlkO1xuICAgICAgfVxuICAgICAgYW5jZXN0b3IgPSB0aGlzLmdldFNoYXBlUGFyZW50KGFuY2VzdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBpc1NoYXBlT3JBbmNlc3RvckxvY2tlZChhcmcpIHtcbiAgICBjb25zdCBzaGFwZSA9IHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgPyB0aGlzLmdldFNoYXBlKGFyZykgOiBhcmc7XG4gICAgaWYgKHNoYXBlID09PSB2b2lkIDApIHJldHVybiBmYWxzZTtcbiAgICBpZiAoc2hhcGUuaXNMb2NrZWQpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiB0aGlzLmlzU2hhcGVPckFuY2VzdG9yTG9ja2VkKHRoaXMuZ2V0U2hhcGVQYXJlbnQoc2hhcGUpKTtcbiAgfVxuICBfbm90VmlzaWJsZVNoYXBlcygpIHtcbiAgICByZXR1cm4gbm90VmlzaWJsZVNoYXBlcyh0aGlzKTtcbiAgfVxuICBnZXRDdWxsZWRTaGFwZXMoKSB7XG4gICAgY29uc3Qgbm90VmlzaWJsZVNoYXBlczIgPSB0aGlzLl9ub3RWaXNpYmxlU2hhcGVzKCkuZ2V0KCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIGNvbnN0IGVkaXRpbmdJZCA9IHRoaXMuZ2V0RWRpdGluZ1NoYXBlSWQoKTtcbiAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSBuZXcgU2V0KG5vdFZpc2libGVTaGFwZXMyKTtcbiAgICBpZiAoZWRpdGluZ0lkKSB7XG4gICAgICBjdWxsZWRTaGFwZXMuZGVsZXRlKGVkaXRpbmdJZCk7XG4gICAgfVxuICAgIHNlbGVjdGVkU2hhcGVJZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGN1bGxlZFNoYXBlcy5kZWxldGUoaWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBjdWxsZWRTaGFwZXM7XG4gIH1cbiAgZ2V0Q3VycmVudFBhZ2VCb3VuZHMoKSB7XG4gICAgbGV0IGNvbW1vbkJvdW5kcztcbiAgICB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHNTb3J0ZWQoKS5mb3JFYWNoKChzaGFwZUlkKSA9PiB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhzaGFwZUlkKTtcbiAgICAgIGlmICghYm91bmRzKSByZXR1cm47XG4gICAgICBpZiAoIWNvbW1vbkJvdW5kcykge1xuICAgICAgICBjb21tb25Cb3VuZHMgPSBib3VuZHMuY2xvbmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbW1vbkJvdW5kcyA9IGNvbW1vbkJvdW5kcy5leHBhbmQoYm91bmRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29tbW9uQm91bmRzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRvcC1tb3N0IHNlbGVjdGVkIHNoYXBlIGF0IHRoZSBnaXZlbiBwb2ludCwgaWdub3JpbmcgZ3JvdXBzLlxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gY2hlY2suXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSB0b3AtbW9zdCBzZWxlY3RlZCBzaGFwZSBhdCB0aGUgZ2l2ZW4gcG9pbnQsIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBubyBzaGFwZSBhdCB0aGUgcG9pbnQuXG4gICAqL1xuICBnZXRTZWxlY3RlZFNoYXBlQXRQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVJZHMgPSB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKTtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZCgpLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnR5cGUgIT09IFwiZ3JvdXBcIiAmJiBzZWxlY3RlZFNoYXBlSWRzLmluY2x1ZGVzKHNoYXBlLmlkKSkucmV2ZXJzZSgpLmZpbmQoKHNoYXBlKSA9PiB0aGlzLmlzUG9pbnRJblNoYXBlKHNoYXBlLCBwb2ludCwgeyBoaXRJbnNpZGU6IHRydWUsIG1hcmdpbjogMCB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hhcGUgYXQgdGhlIGN1cnJlbnQgcG9pbnQuXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB0byBjaGVjay5cbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgY2hlY2s6IGBoaXRJbnNpZGVgIHRvIGNoZWNrIGlmIHRoZSBwb2ludCBpcyBpbnNpZGUgdGhlIHNoYXBlLCBgbWFyZ2luYCB0byBjaGVjayBpZiB0aGUgcG9pbnQgaXMgd2l0aGluIGEgbWFyZ2luIG9mIHRoZSBzaGFwZSwgYGhpdEZyYW1lSW5zaWRlYCB0byBjaGVjayBpZiB0aGUgcG9pbnQgaXMgaW5zaWRlIHRoZSBmcmFtZSwgYW5kIGBmaWx0ZXJgIHRvIGZpbHRlciB0aGUgc2hhcGVzIHRvIGNoZWNrLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc2hhcGUgYXQgdGhlIGdpdmVuIHBvaW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgaXMgbm8gc2hhcGUgYXQgdGhlIHBvaW50LlxuICAgKi9cbiAgZ2V0U2hhcGVBdFBvaW50KHBvaW50LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCB6b29tTGV2ZWwgPSB0aGlzLmdldFpvb21MZXZlbCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgY29uc3Qge1xuICAgICAgZmlsdGVyLFxuICAgICAgbWFyZ2luID0gMCxcbiAgICAgIGhpdExvY2tlZCA9IGZhbHNlLFxuICAgICAgaGl0TGFiZWxzID0gZmFsc2UsXG4gICAgICBoaXRJbnNpZGUgPSBmYWxzZSxcbiAgICAgIGhpdEZyYW1lSW5zaWRlID0gZmFsc2VcbiAgICB9ID0gb3B0cztcbiAgICBsZXQgaW5Ib2xsb3dTbWFsbGVzdEFyZWEgPSBJbmZpbml0eTtcbiAgICBsZXQgaW5Ib2xsb3dTbWFsbGVzdEFyZWFIaXQgPSBudWxsO1xuICAgIGxldCBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VEaXN0YW5jZSA9IEluZmluaXR5O1xuICAgIGxldCBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VIaXQgPSBudWxsO1xuICAgIGNvbnN0IHNoYXBlc1RvQ2hlY2sgPSAob3B0cy5yZW5kZXJpbmdPbmx5ID8gdGhpcy5nZXRDdXJyZW50UGFnZVJlbmRlcmluZ1NoYXBlc1NvcnRlZCgpIDogdGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZCgpKS5maWx0ZXIoKHNoYXBlKSA9PiB7XG4gICAgICBpZiAoc2hhcGUuaXNMb2NrZWQgJiYgIWhpdExvY2tlZCB8fCB0aGlzLmlzU2hhcGVIaWRkZW4oc2hhcGUpIHx8IHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgcGFnZU1hc2sgPSB0aGlzLmdldFNoYXBlTWFzayhzaGFwZSk7XG4gICAgICBpZiAocGFnZU1hc2sgJiYgIXBvaW50SW5Qb2x5Z29uKHBvaW50LCBwYWdlTWFzaykpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChmaWx0ZXIpIHJldHVybiBmaWx0ZXIoc2hhcGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgZm9yIChsZXQgaSA9IHNoYXBlc1RvQ2hlY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzVG9DaGVja1tpXTtcbiAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKTtcbiAgICAgIGNvbnN0IGlzR3JvdXAgPSBnZW9tZXRyeSBpbnN0YW5jZW9mIEdyb3VwMmQ7XG4gICAgICBjb25zdCBwb2ludEluU2hhcGVTcGFjZSA9IHRoaXMuZ2V0UG9pbnRJblNoYXBlU3BhY2Uoc2hhcGUsIHBvaW50KTtcbiAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiYXJyb3dcIikgfHwgdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImdlb1wiKSAmJiBzaGFwZS5wcm9wcy5maWxsID09PSBcIm5vbmVcIikge1xuICAgICAgICBpZiAoc2hhcGUucHJvcHMudGV4dC50cmltKCkpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkR2VvbWV0cnkgb2YgZ2VvbWV0cnkuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaGlsZEdlb21ldHJ5LmlzTGFiZWwgJiYgY2hpbGRHZW9tZXRyeS5pc1BvaW50SW5Cb3VuZHMocG9pbnRJblNoYXBlU3BhY2UpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZnJhbWVcIikpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UyID0gZ2VvbWV0cnkuZGlzdGFuY2VUb1BvaW50KHBvaW50SW5TaGFwZVNwYWNlLCBoaXRJbnNpZGUpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UyKSA8PSBtYXJnaW4pIHtcbiAgICAgICAgICByZXR1cm4gaW5NYXJnaW5DbG9zZXN0VG9FZGdlSGl0IHx8IHNoYXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW9tZXRyeS5oaXRUZXN0UG9pbnQocG9pbnRJblNoYXBlU3BhY2UsIDAsIHRydWUpKSB7XG4gICAgICAgICAgcmV0dXJuIGluTWFyZ2luQ2xvc2VzdFRvRWRnZUhpdCB8fCBpbkhvbGxvd1NtYWxsZXN0QXJlYUhpdCB8fCAoaGl0RnJhbWVJbnNpZGUgPyBzaGFwZSA6IHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsZXQgZGlzdGFuY2U7XG4gICAgICBpZiAoaXNHcm91cCkge1xuICAgICAgICBsZXQgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZEdlb21ldHJ5IG9mIGdlb21ldHJ5LmNoaWxkcmVuKSB7XG4gICAgICAgICAgaWYgKGNoaWxkR2VvbWV0cnkuaXNMYWJlbCAmJiAhaGl0TGFiZWxzKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCB0RGlzdGFuY2UgPSBjaGlsZEdlb21ldHJ5LmRpc3RhbmNlVG9Qb2ludChwb2ludEluU2hhcGVTcGFjZSwgaGl0SW5zaWRlKTtcbiAgICAgICAgICBpZiAodERpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gdERpc3RhbmNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkaXN0YW5jZSA9IG1pbkRpc3RhbmNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG1hcmdpbiA9PT0gMCAmJiAoZ2VvbWV0cnkuYm91bmRzLncgPCAxIHx8IGdlb21ldHJ5LmJvdW5kcy5oIDwgMSkpIHtcbiAgICAgICAgICBkaXN0YW5jZSA9IGdlb21ldHJ5LmRpc3RhbmNlVG9Qb2ludChwb2ludEluU2hhcGVTcGFjZSwgaGl0SW5zaWRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZ2VvbWV0cnkuYm91bmRzLmNvbnRhaW5zUG9pbnQocG9pbnRJblNoYXBlU3BhY2UsIG1hcmdpbikpIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gZ2VvbWV0cnkuZGlzdGFuY2VUb1BvaW50KHBvaW50SW5TaGFwZVNwYWNlLCBoaXRJbnNpZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IEluZmluaXR5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdlb21ldHJ5LmlzQ2xvc2VkKSB7XG4gICAgICAgIGlmIChkaXN0YW5jZSA8PSBtYXJnaW4pIHtcbiAgICAgICAgICBpZiAoZ2VvbWV0cnkuaXNGaWxsZWQgfHwgaXNHcm91cCAmJiBnZW9tZXRyeS5jaGlsZHJlblswXS5pc0ZpbGxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGluTWFyZ2luQ2xvc2VzdFRvRWRnZUhpdCB8fCBzaGFwZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKS5jb250YWlucyh2aWV3cG9ydFBhZ2VCb3VuZHMpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSkgPCBtYXJnaW4pIHtcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8IGluTWFyZ2luQ2xvc2VzdFRvRWRnZURpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5NYXJnaW5DbG9zZXN0VG9FZGdlRGlzdGFuY2UgPSBNYXRoLmFicyhkaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaW5NYXJnaW5DbG9zZXN0VG9FZGdlSGl0ID0gc2hhcGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWluTWFyZ2luQ2xvc2VzdFRvRWRnZUhpdCkge1xuICAgICAgICAgICAgICBjb25zdCB7IGFyZWEgfSA9IGdlb21ldHJ5O1xuICAgICAgICAgICAgICBpZiAoYXJlYSA8IGluSG9sbG93U21hbGxlc3RBcmVhKSB7XG4gICAgICAgICAgICAgICAgaW5Ib2xsb3dTbWFsbGVzdEFyZWEgPSBhcmVhO1xuICAgICAgICAgICAgICAgIGluSG9sbG93U21hbGxlc3RBcmVhSGl0ID0gc2hhcGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHRoaXMub3B0aW9ucy5oaXRUZXN0TWFyZ2luIC8gem9vbUxldmVsKSB7XG4gICAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VIaXQgfHwgaW5Ib2xsb3dTbWFsbGVzdEFyZWFIaXQgfHwgdm9pZCAwO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNoYXBlcywgaWYgYW55LCBhdCBhIGdpdmVuIHBhZ2UgcG9pbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRTaGFwZXNBdFBvaW50KHsgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogZWRpdG9yLmdldFNoYXBlc0F0UG9pbnQoeyB4OiAxMDAsIHk6IDEwMCB9LCB7IGhpdEluc2lkZTogdHJ1ZSwgZXhhY3Q6IHRydWUgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwYWdlIHBvaW50IHRvIHRlc3QuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBoaXQgcG9pbnQgdGVzdGluZy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVzQXRQb2ludChwb2ludCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZXMoKS5maWx0ZXIoXG4gICAgICAoc2hhcGUpID0+ICF0aGlzLmlzU2hhcGVIaWRkZW4oc2hhcGUpICYmIHRoaXMuaXNQb2ludEluU2hhcGUoc2hhcGUsIHBvaW50LCBvcHRzKVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFRlc3Qgd2hldGhlciBhIHBvaW50IChpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlKSB3aWxsIHdpbGwgYSBzaGFwZS4gVGhpcyBtZXRob2QgdGFrZXMgaW50byBhY2NvdW50IG1hc2tzLFxuICAgKiBzdWNoIGFzIHdoZW4gYSBzaGFwZSBpcyB0aGUgY2hpbGQgb2YgYSBmcmFtZSBhbmQgaXMgcGFydGlhbGx5IGNsaXBwZWQgYnkgdGhlIGZyYW1lLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuaXNQb2ludEluU2hhcGUoeyB4OiAxMDAsIHk6IDEwMCB9LCBteVNoYXBlKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHRvIHRlc3QgYWdhaW5zdC5cbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBhZ2UgcG9pbnQgdG8gdGVzdCAoaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSkuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBoaXQgcG9pbnQgdGVzdGluZy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNQb2ludEluU2hhcGUoc2hhcGUsIHBvaW50LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCB7IGhpdEluc2lkZSA9IGZhbHNlLCBtYXJnaW4gPSAwIH0gPSBvcHRzO1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBwYWdlTWFzayA9IHRoaXMuZ2V0U2hhcGVNYXNrKGlkKTtcbiAgICBpZiAocGFnZU1hc2sgJiYgIXBvaW50SW5Qb2x5Z29uKHBvaW50LCBwYWdlTWFzaykpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5nZXRTaGFwZUdlb21ldHJ5KGlkKS5oaXRUZXN0UG9pbnQoXG4gICAgICB0aGlzLmdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBwb2ludCksXG4gICAgICBtYXJnaW4sXG4gICAgICBoaXRJbnNpZGVcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcG9pbnQgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSB0byBhIHBvaW50IGluIHRoZSBsb2NhbCBzcGFjZSBvZiBhIHNoYXBlLiBGb3IgZXhhbXBsZSwgaWYgYVxuICAgKiBzaGFwZSdzIHBhZ2UgcG9pbnQgd2VyZSBgeyB4OiAxMDAsIHk6IDEwMCB9YCwgYSBwYWdlIHBvaW50IGF0IGB7IHg6IDExMCwgeTogMTEwIH1gIHdvdWxkIGJlIGF0XG4gICAqIGB7IHg6IDEwLCB5OiAxMCB9YCBpbiB0aGUgc2hhcGUncyBsb2NhbCBzcGFjZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFBvaW50SW5TaGFwZVNwYWNlKG15U2hhcGUsIHsgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIHBvaW50IGluIHRoZSBsb2NhbCBzcGFjZSBvZi5cbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBhZ2UgcG9pbnQgdG8gZ2V0IGluIHRoZSBsb2NhbCBzcGFjZSBvZiB0aGUgc2hhcGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBwb2ludCkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQoaWQpLmNsb25lKCkuaW52ZXJ0KCkuYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGRlbHRhIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UgdG8gYSBwb2ludCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YgYSBzaGFwZSdzIHBhcmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFBvaW50SW5QYXJlbnRTcGFjZShteVNoYXBlLmlkLCB7IHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gZ2V0IHRoZSBwb2ludCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YuXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwYWdlIHBvaW50IHRvIGdldCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YgdGhlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRQb2ludEluUGFyZW50U3BhY2Uoc2hhcGUsIHBvaW50KSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWZyZXNoU2hhcGUpIHJldHVybiBuZXcgVmVjKDAsIDApO1xuICAgIGlmIChpc1BhZ2VJZChmcmVzaFNoYXBlLnBhcmVudElkKSkgcmV0dXJuIFZlYy5Gcm9tKHBvaW50KTtcbiAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShmcmVzaFNoYXBlLnBhcmVudElkKTtcbiAgICBpZiAoIXBhcmVudFRyYW5zZm9ybSkgcmV0dXJuIFZlYy5Gcm9tKHBvaW50KTtcbiAgICByZXR1cm4gcGFyZW50VHJhbnNmb3JtLmNsb25lKCkuaW52ZXJ0KCkuYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVNoYXBlcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKSwgKGlkKSA9PiB0aGlzLnN0b3JlLmdldChpZCkpO1xuICB9XG4gIGdldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGNvbnN0IHRvcExldmVsU2hhcGVzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudCh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSB0b3BMZXZlbFNoYXBlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHB1c2hTaGFwZVdpdGhEZXNjZW5kYW50cyh0aGlzLCB0b3BMZXZlbFNoYXBlc1tpXSwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVJlbmRlcmluZ1NoYXBlc1NvcnRlZCgpIHtcbiAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSB0aGlzLmdldEN1bGxlZFNoYXBlcygpO1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkKCkuZmlsdGVyKFxuICAgICAgKHsgaWQgfSkgPT4gIWN1bGxlZFNoYXBlcy5oYXMoaWQpICYmICF0aGlzLmlzU2hhcGVIaWRkZW4oaWQpXG4gICAgKTtcbiAgfVxuICBpc1NoYXBlT2ZUeXBlKGFyZywgdHlwZSkge1xuICAgIGNvbnN0IHNoYXBlID0gdHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIiA/IHRoaXMuZ2V0U2hhcGUoYXJnKSA6IGFyZztcbiAgICBpZiAoIXNoYXBlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHNoYXBlLnR5cGUgPT09IHR5cGU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHNoYXBlIGJ5IGl0cyBpZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlKCdib3gxJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3IgdGhlIGlkIG9mIHRoZSBzaGFwZSkgdG8gZ2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZShzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBpZiAoIWlzU2hhcGVJZChpZCkpIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KGlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwYXJlbnQgc2hhcGUgZm9yIGEgZ2l2ZW4gc2hhcGUuIFJldHVybnMgdW5kZWZpbmVkIGlmIHRoZSBzaGFwZSBpcyB0aGUgZGlyZWN0IGNoaWxkIG9mXG4gICAqIHRoZSBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGVQYXJlbnQobXlTaGFwZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlUGFyZW50KHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZDtcbiAgICBpZiAoIWlkKSByZXR1cm4gdm9pZCAwO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoZnJlc2hTaGFwZSA9PT0gdm9pZCAwIHx8ICFpc1NoYXBlSWQoZnJlc2hTaGFwZS5wYXJlbnRJZCkpIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KGZyZXNoU2hhcGUucGFyZW50SWQpO1xuICB9XG4gIC8qKlxuICAgKiBJZiBzaWJsaW5nU2hhcGUgYW5kIHRhcmdldFNoYXBlIGFyZSBzaWJsaW5ncywgdGhpcyByZXR1cm5zIHRhcmdldFNoYXBlLiBJZiB0YXJnZXRTaGFwZSBoYXMgYW5cbiAgICogYW5jZXN0b3Igd2hvIGlzIGEgc2libGluZyBvZiBzaWJsaW5nU2hhcGUsIHRoaXMgcmV0dXJucyB0aGF0IGFuY2VzdG9yLiBPdGhlcndpc2UsIHRoaXMgcmV0dXJuc1xuICAgKiB1bmRlZmluZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0U2hhcGVOZWFyZXN0U2libGluZyhzaWJsaW5nU2hhcGUsIHRhcmdldFNoYXBlKSB7XG4gICAgaWYgKCF0YXJnZXRTaGFwZSkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKHRhcmdldFNoYXBlLnBhcmVudElkID09PSBzaWJsaW5nU2hhcGUucGFyZW50SWQpIHtcbiAgICAgIHJldHVybiB0YXJnZXRTaGFwZTtcbiAgICB9XG4gICAgY29uc3QgYW5jZXN0b3IgPSB0aGlzLmZpbmRTaGFwZUFuY2VzdG9yKFxuICAgICAgdGFyZ2V0U2hhcGUsXG4gICAgICAoYW5jZXN0b3IyKSA9PiBhbmNlc3RvcjIucGFyZW50SWQgPT09IHNpYmxpbmdTaGFwZS5wYXJlbnRJZFxuICAgICk7XG4gICAgcmV0dXJuIGFuY2VzdG9yO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciB0aGUgZ2l2ZW4gc2hhcGUgaXMgdGhlIGRlc2NlbmRhbnQgb2YgdGhlIGdpdmVuIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5pc1NoYXBlSW5QYWdlKG15U2hhcGUpXG4gICAqIGVkaXRvci5pc1NoYXBlSW5QYWdlKG15U2hhcGUsICdwYWdlMScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gY2hlY2suXG4gICAqIEBwYXJhbSBwYWdlSWQgLSBUaGUgaWQgb2YgdGhlIHBhZ2UgdG8gY2hlY2sgYWdhaW5zdC4gRGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNTaGFwZUluUGFnZShzaGFwZSwgcGFnZUlkID0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCkpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3Qgc2hhcGVUb0NoZWNrID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFzaGFwZVRvQ2hlY2spIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2hhcGVJc0luUGFnZSA9IGZhbHNlO1xuICAgIGlmIChzaGFwZVRvQ2hlY2sucGFyZW50SWQgPT09IHBhZ2VJZCkge1xuICAgICAgc2hhcGVJc0luUGFnZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlKHNoYXBlVG9DaGVjay5wYXJlbnRJZCk7XG4gICAgICBpc0luUGFnZVNlYXJjaDogd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBpZiAocGFyZW50LnBhcmVudElkID09PSBwYWdlSWQpIHtcbiAgICAgICAgICBzaGFwZUlzSW5QYWdlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhayBpc0luUGFnZVNlYXJjaDtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQgPSB0aGlzLmdldFNoYXBlKHBhcmVudC5wYXJlbnRJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaGFwZUlzSW5QYWdlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGlkIG9mIHRoZSBjb250YWluaW5nIHBhZ2UgZm9yIGEgZ2l2ZW4gc2hhcGUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIHBhZ2UgaWQgZm9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgaWQgb2YgdGhlIHBhZ2UgdGhhdCBjb250YWlucyB0aGUgc2hhcGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgc2hhcGUgaXMgdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRBbmNlc3RvclBhZ2VJZChzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZT8uaWQ7XG4gICAgY29uc3QgX3NoYXBlID0gaWQgJiYgdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFfc2hhcGUpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKGlzUGFnZUlkKF9zaGFwZS5wYXJlbnRJZCkpIHtcbiAgICAgIHJldHVybiBfc2hhcGUucGFyZW50SWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEFuY2VzdG9yUGFnZUlkKHRoaXMuZ2V0U2hhcGUoX3NoYXBlLnBhcmVudElkKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXBhcmVudCBzaGFwZXMgdG8gYSBuZXcgcGFyZW50LiBUaGlzIG9wZXJhdGlvbiBwcmVzZXJ2ZXMgdGhlIHNoYXBlJ3MgY3VycmVudCBwYWdlIHBvc2l0aW9ucyAvXG4gICAqIHJvdGF0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlcGFyZW50U2hhcGVzKFtib3gxLCBib3gyXSwgJ2ZyYW1lMScpXG4gICAqIGVkaXRvci5yZXBhcmVudFNoYXBlcyhbYm94MS5pZCwgYm94Mi5pZF0sICdmcmFtZTEnKVxuICAgKiBlZGl0b3IucmVwYXJlbnRTaGFwZXMoW2JveDEuaWQsIGJveDIuaWRdLCAnZnJhbWUxJywgNClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIG9mIHRoZSBzaGFwZXMgdG8gcmVwYXJlbnQuXG4gICAqIEBwYXJhbSBwYXJlbnRJZCAtIFRoZSBpZCBvZiB0aGUgbmV3IHBhcmVudCBzaGFwZS5cbiAgICogQHBhcmFtIGluc2VydEluZGV4IC0gVGhlIGluZGV4IHRvIGluc2VydCB0aGUgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlcGFyZW50U2hhcGVzKHNoYXBlcywgcGFyZW50SWQsIGluc2VydEluZGV4KSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmIChpZHMubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBjaGFuZ2VzID0gW107XG4gICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gaXNQYWdlSWQocGFyZW50SWQpID8gTWF0LklkZW50aXR5KCkgOiB0aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShwYXJlbnRJZCk7XG4gICAgY29uc3QgcGFyZW50UGFnZVJvdGF0aW9uID0gcGFyZW50VHJhbnNmb3JtLnJvdGF0aW9uKCk7XG4gICAgbGV0IGluZGljZXMgPSBbXTtcbiAgICBjb25zdCBzaWJzID0gY29tcGFjdCh0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhcmVudElkKS5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICAgIGlmIChpbnNlcnRJbmRleCkge1xuICAgICAgY29uc3Qgc2liV2l0aEluc2VydEluZGV4ID0gc2licy5maW5kKChzKSA9PiBzLmluZGV4ID09PSBpbnNlcnRJbmRleCk7XG4gICAgICBpZiAoc2liV2l0aEluc2VydEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHNpYkFib3ZlID0gc2lic1tzaWJzLmluZGV4T2Yoc2liV2l0aEluc2VydEluZGV4KSArIDFdO1xuICAgICAgICBpZiAoc2liQWJvdmUpIHtcbiAgICAgICAgICBpbmRpY2VzID0gZ2V0SW5kaWNlc0JldHdlZW4oaW5zZXJ0SW5kZXgsIHNpYkFib3ZlLmluZGV4LCBpZHMubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbmRpY2VzID0gZ2V0SW5kaWNlc0Fib3ZlKGluc2VydEluZGV4LCBpZHMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2liQWJvdmUgPSBzaWJzLnNvcnQoc29ydEJ5SW5kZXgpLmZpbmQoKHMpID0+IHMuaW5kZXggPiBpbnNlcnRJbmRleCk7XG4gICAgICAgIGlmIChzaWJBYm92ZSkge1xuICAgICAgICAgIGluZGljZXMgPSBnZXRJbmRpY2VzQmV0d2VlbihpbnNlcnRJbmRleCwgc2liQWJvdmUuaW5kZXgsIGlkcy5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluZGljZXMgPSBnZXRJbmRpY2VzQWJvdmUoaW5zZXJ0SW5kZXgsIGlkcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNpYiA9IHNpYnMubGVuZ3RoICYmIHNpYnNbc2licy5sZW5ndGggLSAxXTtcbiAgICAgIGluZGljZXMgPSBzaWIgPyBnZXRJbmRpY2VzQWJvdmUoc2liLmluZGV4LCBpZHMubGVuZ3RoKSA6IGdldEluZGljZXMoaWRzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGludmVydGVkUGFyZW50VHJhbnNmb3JtID0gcGFyZW50VHJhbnNmb3JtLmNsb25lKCkuaW52ZXJ0KCk7XG4gICAgY29uc3Qgc2hhcGVzVG9SZXBhcmVudCA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgdGhpcy5ydW4oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVzVG9SZXBhcmVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzVG9SZXBhcmVudFtpXTtcbiAgICAgICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpO1xuICAgICAgICAgIGlmICghcGFnZVRyYW5zZm9ybSkgY29udGludWU7XG4gICAgICAgICAgY29uc3QgcGFnZVBvaW50ID0gcGFnZVRyYW5zZm9ybS5wb2ludCgpO1xuICAgICAgICAgIGlmICghcGFnZVBvaW50KSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBuZXdQb2ludCA9IGludmVydGVkUGFyZW50VHJhbnNmb3JtLmFwcGx5VG9Qb2ludChwYWdlUG9pbnQpO1xuICAgICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gcGFnZVRyYW5zZm9ybS5yb3RhdGlvbigpIC0gcGFyZW50UGFnZVJvdGF0aW9uO1xuICAgICAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgICAgICBpZDogc2hhcGUuaWQsXG4gICAgICAgICAgICB0eXBlOiBzaGFwZS50eXBlLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICB4OiBuZXdQb2ludC54LFxuICAgICAgICAgICAgeTogbmV3UG9pbnQueSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgIGluZGV4OiBpbmRpY2VzW2ldXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgICB9LFxuICAgICAgeyBpZ25vcmVTaGFwZUxvY2s6IHRydWUgfVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaW5kZXggYWJvdmUgdGhlIGhpZ2hlc3QgY2hpbGQgb2YgYSBnaXZlbiBwYXJlbnQuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IChvciB0aGUgaWQpIG9mIHRoZSBwYXJlbnQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBpbmRleC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0SGlnaGVzdEluZGV4Rm9yUGFyZW50KHBhcmVudCkge1xuICAgIGNvbnN0IHBhcmVudElkID0gdHlwZW9mIHBhcmVudCA9PT0gXCJzdHJpbmdcIiA/IHBhcmVudCA6IHBhcmVudC5pZDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuX3BhcmVudElkc1RvQ2hpbGRJZHMuZ2V0KClbcGFyZW50SWRdO1xuICAgIGlmICghY2hpbGRyZW4gfHwgY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJhMVwiO1xuICAgIH1cbiAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUoY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0pO1xuICAgIHJldHVybiBnZXRJbmRleEFib3ZlKHNoYXBlLmluZGV4KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGFycmF5IG9mIGFsbCB0aGUgY2hpbGRyZW4gb2YgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KCdmcmFtZTEnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgKG9yIHRoZSBpZCkgb2YgdGhlIHBhcmVudCBzaGFwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50KSB7XG4gICAgY29uc3QgcGFyZW50SWQgPSB0eXBlb2YgcGFyZW50ID09PSBcInN0cmluZ1wiID8gcGFyZW50IDogcGFyZW50LmlkO1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuX3BhcmVudElkc1RvQ2hpbGRJZHMuZ2V0KClbcGFyZW50SWRdO1xuICAgIGlmICghaWRzKSByZXR1cm4gRU1QVFlfQVJSQVk7XG4gICAgcmV0dXJuIGlkcztcbiAgfVxuICAvKipcbiAgICogUnVuIGEgdmlzaXRvciBmdW5jdGlvbiBmb3IgYWxsIGRlc2NlbmRhbnRzIG9mIGEgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci52aXNpdERlc2NlbmRhbnRzKCdmcmFtZTEnLCBteUNhbGxiYWNrKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgKG9yIHRoZSBpZCkgb2YgdGhlIHBhcmVudCBzaGFwZS5cbiAgICogQHBhcmFtIHZpc2l0b3IgLSBUaGUgdmlzaXRvciBmdW5jdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdmlzaXREZXNjZW5kYW50cyhwYXJlbnQsIHZpc2l0b3IpIHtcbiAgICBjb25zdCBwYXJlbnRJZCA9IHR5cGVvZiBwYXJlbnQgPT09IFwic3RyaW5nXCIgPyBwYXJlbnQgOiBwYXJlbnQuaWQ7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhcmVudElkKTtcbiAgICBmb3IgKGNvbnN0IGlkIG9mIGNoaWxkcmVuKSB7XG4gICAgICBpZiAodmlzaXRvcihpZCkgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgIHRoaXMudmlzaXREZXNjZW5kYW50cyhpZCwgdmlzaXRvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNoYXBlIGlkcyBvZiBhbGwgZGVzY2VuZGFudHMgb2YgdGhlIGdpdmVuIHNoYXBlcyAoaW5jbHVkaW5nIHRoZSBzaGFwZXMgdGhlbXNlbHZlcykuIElEcyBhcmUgcmV0dXJuZWQgaW4gei1pbmRleCBvcmRlci5cbiAgICpcbiAgICogQHBhcmFtIGlkcyAtIFRoZSBpZHMgb2YgdGhlIHNoYXBlcyB0byBnZXQgZGVzY2VuZGFudHMgb2YuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBkZXNjZW5kYW50IGlkcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKGlkcykge1xuICAgIGNvbnN0IHNoYXBlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNoYXBlIG9mIGlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkuc29ydChzb3J0QnlJbmRleCkpIHtcbiAgICAgIHNoYXBlSWRzLmFkZChzaGFwZS5pZCk7XG4gICAgICB0aGlzLnZpc2l0RGVzY2VuZGFudHMoc2hhcGUsIChkZXNjZW5kYW50SWQpID0+IHtcbiAgICAgICAgc2hhcGVJZHMuYWRkKGRlc2NlbmRhbnRJZCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYXBlSWRzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNoYXBlIHRoYXQgc29tZSBzaGFwZXMgc2hvdWxkIGJlIGRyb3BwZWQgb24gYXQgYSBnaXZlbiBwb2ludC5cbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IHRvIGZpbmQgdGhlIHBhcmVudCBmb3IuXG4gICAqIEBwYXJhbSBkcm9wcGluZ1NoYXBlcyAtIFRoZSBzaGFwZXMgdGhhdCBhcmUgYmVpbmcgZHJvcHBlZC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHNoYXBlIHRvIGRyb3Agb24uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldERyb3BwaW5nT3ZlclNoYXBlKHBvaW50LCBkcm9wcGluZ1NoYXBlcyA9IFtdKSB7XG4gICAgY29uc3QgY3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQgPSB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkKCk7XG4gICAgZm9yIChsZXQgaSA9IGN1cnJlbnRQYWdlU2hhcGVzU29ydGVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IGN1cnJlbnRQYWdlU2hhcGVzU29ydGVkW2ldO1xuICAgICAgaWYgKFxuICAgICAgICAvLyBpZ25vcmUgaGlkZGVuIHNoYXBlc1xuICAgICAgICB0aGlzLmlzU2hhcGVIaWRkZW4oc2hhcGUpIHx8IC8vIGRvbid0IGFsbG93IGRyb3BwaW5nIG9uIHNlbGVjdGVkIHNoYXBlc1xuICAgICAgICB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5pbmNsdWRlcyhzaGFwZS5pZCkgfHwgLy8gb25seSBhbGxvdyBzaGFwZXMgdGhhdCBjYW4gcmVjZWl2ZSBjaGlsZHJlblxuICAgICAgICAhdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLmNhbkRyb3BTaGFwZXMoc2hhcGUsIGRyb3BwaW5nU2hhcGVzKSB8fCAvLyBkb24ndCBhbGxvdyBkcm9wcGluZyBhIHNoYXBlIG9uIGl0c2VsZiBvciBvbmUgb2YgaXQncyBjaGlsZHJlblxuICAgICAgICBkcm9wcGluZ1NoYXBlcy5maW5kKChzKSA9PiBzLmlkID09PSBzaGFwZS5pZCB8fCB0aGlzLmhhc0FuY2VzdG9yKHNoYXBlLCBzLmlkKSlcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1hc2tlZFBhZ2VCb3VuZHMgPSB0aGlzLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhzaGFwZS5pZCk7XG4gICAgICBpZiAobWFza2VkUGFnZUJvdW5kcyAmJiBtYXNrZWRQYWdlQm91bmRzLmNvbnRhaW5zUG9pbnQocG9pbnQpICYmIHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkuaGl0VGVzdFBvaW50KHRoaXMuZ2V0UG9pbnRJblNoYXBlU3BhY2Uoc2hhcGUsIHBvaW50KSwgMCwgdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBzaGFwZSB0aGF0IHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIHlvdSBjbGljayBvbiBhIGdpdmVuIHNoYXBlLCBhc3N1bWluZyB0aGVyZSBpc1xuICAgKiBub3RoaW5nIGFscmVhZHkgc2VsZWN0ZWQuIEl0IHdpbGwgbm90IHJldHVybiBhbnl0aGluZyBoaWdoZXIgdGhhbiBvciBpbmNsdWRpbmcgdGhlIGN1cnJlbnRcbiAgICogZm9jdXMgbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIG91dGVybW9zdCBzZWxlY3RhYmxlIHNoYXBlIGZvci5cbiAgICogQHBhcmFtIGZpbHRlciAtIEEgZnVuY3Rpb24gdG8gZmlsdGVyIHRoZSBzZWxlY3RhYmxlIHNoYXBlcy5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIG91dGVybW9zdCBzZWxlY3RhYmxlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRPdXRlcm1vc3RTZWxlY3RhYmxlU2hhcGUoc2hhcGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgbGV0IG1hdGNoID0gZnJlc2hTaGFwZTtcbiAgICBsZXQgbm9kZSA9IGZyZXNoU2hhcGU7XG4gICAgY29uc3QgZm9jdXNlZEdyb3VwID0gdGhpcy5nZXRGb2N1c2VkR3JvdXAoKTtcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShub2RlLCBcImdyb3VwXCIpICYmIGZvY3VzZWRHcm91cD8uaWQgIT09IG5vZGUuaWQgJiYgIXRoaXMuaGFzQW5jZXN0b3IoZm9jdXNlZEdyb3VwLCBub2RlLmlkKSAmJiAoZmlsdGVyPy4obm9kZSkgPz8gdHJ1ZSkpIHtcbiAgICAgICAgbWF0Y2ggPSBub2RlO1xuICAgICAgfSBlbHNlIGlmIChmb2N1c2VkR3JvdXA/LmlkID09PSBub2RlLmlkKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbm9kZSA9IHRoaXMuZ2V0U2hhcGVQYXJlbnQobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBfZ2V0QmluZGluZ3NJbmRleENhY2hlKCkge1xuICAgIGNvbnN0IGluZGV4ID0gYmluZGluZ3NJbmRleCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwiYmluZGluZ3NJbmRleFwiLCAoc2hhcGUpID0+IHtcbiAgICAgIHJldHVybiBpbmRleC5nZXQoKS5nZXQoc2hhcGUuaWQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBiaW5kaW5nIGZyb20gdGhlIHN0b3JlIGJ5IGl0cyBJRCBpZiBpdCBleGlzdHMuXG4gICAqL1xuICBnZXRCaW5kaW5nKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KGlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBiaW5kaW5ncyBvZiBhIGNlcnRhaW4gdHlwZSBfZnJvbV8gYSBwYXJ0aWN1bGFyIHNoYXBlLiBUaGVzZSBhcmUgdGhlIGJpbmRpbmdzIHdob3NlXG4gICAqIGBmcm9tSWRgIG1hdGNoZWQgdGhlIHNoYXBlJ3MgSUQuXG4gICAqL1xuICBnZXRCaW5kaW5nc0Zyb21TaGFwZShzaGFwZSwgdHlwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5nZXRCaW5kaW5nc0ludm9sdmluZ1NoYXBlKGlkKS5maWx0ZXIoXG4gICAgICAoYikgPT4gYi5mcm9tSWQgPT09IGlkICYmIGIudHlwZSA9PT0gdHlwZVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgYmluZGluZ3Mgb2YgYSBjZXJ0YWluIHR5cGUgX3RvXyBhIHBhcnRpY3VsYXIgc2hhcGUuIFRoZXNlIGFyZSB0aGUgYmluZGluZ3Mgd2hvc2VcbiAgICogYHRvSWRgIG1hdGNoZXMgdGhlIHNoYXBlJ3MgSUQuXG4gICAqL1xuICBnZXRCaW5kaW5nc1RvU2hhcGUoc2hhcGUsIHR5cGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShpZCkuZmlsdGVyKFxuICAgICAgKGIpID0+IGIudG9JZCA9PT0gaWQgJiYgYi50eXBlID09PSB0eXBlXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBiaW5kaW5ncyBpbnZvbHZpbmcgYSBwYXJ0aWN1bGFyIHNoYXBlLiBUaGlzIGluY2x1ZGVzIGJpbmRpbmdzIHdoZXJlIHRoZSBzaGFwZSBpcyB0aGVcbiAgICogYGZyb21JZGAgb3IgYHRvSWRgLiBJZiBhIHR5cGUgaXMgcHJvdmlkZWQsIG9ubHkgYmluZGluZ3Mgb2YgdGhhdCB0eXBlIGFyZSByZXR1cm5lZC5cbiAgICovXG4gIGdldEJpbmRpbmdzSW52b2x2aW5nU2hhcGUoc2hhcGUsIHR5cGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZ2V0QmluZGluZ3NJbmRleENhY2hlKCkuZ2V0KGlkKSA/PyBFTVBUWV9BUlJBWTtcbiAgICBpZiAoIXR5cGUpIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoKGIpID0+IGIudHlwZSA9PT0gdHlwZSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBiaW5kaW5ncyBmcm9tIGEgbGlzdCBvZiBwYXJ0aWFsIGJpbmRpbmdzLiBZb3UgY2FuIG9taXQgdGhlIElEIGFuZCBtb3N0IHByb3BzIG9mIGFcbiAgICogYmluZGluZywgYnV0IHRoZSBgdHlwZWAsIGB0b0lkYCwgYW5kIGBmcm9tSWRgIG11c3QgYWxsIGJlIHByb3ZpZGVkLlxuICAgKi9cbiAgY3JlYXRlQmluZGluZ3MocGFydGlhbHMpIHtcbiAgICBjb25zdCBiaW5kaW5ncyA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFydGlhbCBvZiBwYXJ0aWFscykge1xuICAgICAgY29uc3QgZnJvbVNoYXBlID0gdGhpcy5nZXRTaGFwZShwYXJ0aWFsLmZyb21JZCk7XG4gICAgICBjb25zdCB0b1NoYXBlID0gdGhpcy5nZXRTaGFwZShwYXJ0aWFsLnRvSWQpO1xuICAgICAgaWYgKCFmcm9tU2hhcGUgfHwgIXRvU2hhcGUpIGNvbnRpbnVlO1xuICAgICAgaWYgKCF0aGlzLmNhbkJpbmRTaGFwZXMoeyBmcm9tU2hhcGUsIHRvU2hhcGUsIGJpbmRpbmc6IHBhcnRpYWwgfSkpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgdXRpbCA9IHRoaXMuZ2V0QmluZGluZ1V0aWwocGFydGlhbC50eXBlKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHV0aWwuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgICBjb25zdCBiaW5kaW5nID0gdGhpcy5zdG9yZS5zY2hlbWEudHlwZXMuYmluZGluZy5jcmVhdGUoe1xuICAgICAgICAuLi5wYXJ0aWFsLFxuICAgICAgICBpZDogcGFydGlhbC5pZCA/PyBjcmVhdGVCaW5kaW5nSWQoKSxcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgICAgLi4ucGFydGlhbC5wcm9wc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJpbmRpbmdzLnB1c2goYmluZGluZyk7XG4gICAgfVxuICAgIHRoaXMuc3RvcmUucHV0KGJpbmRpbmdzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgc2luZ2xlIGJpbmRpbmcgZnJvbSBhIHBhcnRpYWwuIFlvdSBjYW4gb21pdCB0aGUgSUQgYW5kIG1vc3QgcHJvcHMgb2YgYSBiaW5kaW5nLCBidXRcbiAgICogdGhlIGB0eXBlYCwgYHRvSWRgLCBhbmQgYGZyb21JZGAgbXVzdCBhbGwgYmUgcHJvdmlkZWQuXG4gICAqL1xuICBjcmVhdGVCaW5kaW5nKHBhcnRpYWwpIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCaW5kaW5ncyhbcGFydGlhbF0pO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYmluZGluZ3MgZnJvbSBhIGxpc3Qgb2YgcGFydGlhbCBiaW5kaW5ncy4gRWFjaCBwYXJ0aWFsIG11c3QgaW5jbHVkZSBhbiBJRCwgd2hpY2ggd2lsbFxuICAgKiBiZSB1c2VkIHRvIG1hdGNoIHRoZSBiaW5kaW5nIHRvIGl0J3MgZXhpc3RpbmcgcmVjb3JkLiBJZiB0aGVyZSBpcyBubyBleGlzdGluZyByZWNvcmQsIHRoYXRcbiAgICogYmluZGluZyBpcyBza2lwcGVkLiBUaGUgY2hhbmdlcyBmcm9tIHRoZSBwYXJ0aWFsIGFyZSBtZXJnZWQgaW50byB0aGUgZXhpc3RpbmcgcmVjb3JkLlxuICAgKi9cbiAgdXBkYXRlQmluZGluZ3MocGFydGlhbHMpIHtcbiAgICBjb25zdCB1cGRhdGVkID0gW107XG4gICAgZm9yIChjb25zdCBwYXJ0aWFsIG9mIHBhcnRpYWxzKSB7XG4gICAgICBpZiAoIXBhcnRpYWwpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZ2V0QmluZGluZyhwYXJ0aWFsLmlkKTtcbiAgICAgIGlmICghY3VycmVudCkgY29udGludWU7XG4gICAgICBjb25zdCB1cGRhdGVkQmluZGluZyA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKGN1cnJlbnQsIHBhcnRpYWwpO1xuICAgICAgaWYgKHVwZGF0ZWRCaW5kaW5nID09PSBjdXJyZW50KSBjb250aW51ZTtcbiAgICAgIGNvbnN0IGZyb21TaGFwZSA9IHRoaXMuZ2V0U2hhcGUodXBkYXRlZEJpbmRpbmcuZnJvbUlkKTtcbiAgICAgIGNvbnN0IHRvU2hhcGUgPSB0aGlzLmdldFNoYXBlKHVwZGF0ZWRCaW5kaW5nLnRvSWQpO1xuICAgICAgaWYgKCFmcm9tU2hhcGUgfHwgIXRvU2hhcGUpIGNvbnRpbnVlO1xuICAgICAgaWYgKCF0aGlzLmNhbkJpbmRTaGFwZXMoeyBmcm9tU2hhcGUsIHRvU2hhcGUsIGJpbmRpbmc6IHVwZGF0ZWRCaW5kaW5nIH0pKSBjb250aW51ZTtcbiAgICAgIHVwZGF0ZWQucHVzaCh1cGRhdGVkQmluZGluZyk7XG4gICAgfVxuICAgIHRoaXMuc3RvcmUucHV0KHVwZGF0ZWQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYSBiaW5kaW5nIGZyb20gYSBwYXJ0aWFsIGJpbmRpbmcuIEVhY2ggcGFydGlhbCBtdXN0IGluY2x1ZGUgYW4gSUQsIHdoaWNoIHdpbGwgYmUgdXNlZFxuICAgKiB0byBtYXRjaCB0aGUgYmluZGluZyB0byBpdCdzIGV4aXN0aW5nIHJlY29yZC4gSWYgdGhlcmUgaXMgbm8gZXhpc3RpbmcgcmVjb3JkLCB0aGF0IGJpbmRpbmcgaXNcbiAgICogc2tpcHBlZC4gVGhlIGNoYW5nZXMgZnJvbSB0aGUgcGFydGlhbCBhcmUgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIHJlY29yZC5cbiAgICovXG4gIHVwZGF0ZUJpbmRpbmcocGFydGlhbCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZUJpbmRpbmdzKFtwYXJ0aWFsXSk7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBzZXZlcmFsIGJpbmRpbmdzIGJ5IHRoZWlyIElEcy4gSWYgYSBiaW5kaW5nIElEIGRvZXNuJ3QgZXhpc3QsIGl0J3MgaWdub3JlZC5cbiAgICovXG4gIGRlbGV0ZUJpbmRpbmdzKGJpbmRpbmdzLCB7IGlzb2xhdGVTaGFwZXMgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBpZHMgPSBiaW5kaW5ncy5tYXAoKGJpbmRpbmcpID0+IHR5cGVvZiBiaW5kaW5nID09PSBcInN0cmluZ1wiID8gYmluZGluZyA6IGJpbmRpbmcuaWQpO1xuICAgIGlmIChpc29sYXRlU2hhcGVzKSB7XG4gICAgICB0aGlzLnN0b3JlLmF0b21pYygoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuZ2V0QmluZGluZyhpZCk7XG4gICAgICAgICAgaWYgKCFiaW5kaW5nKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKTtcbiAgICAgICAgICB1dGlsLm9uQmVmb3JlSXNvbGF0ZUZyb21TaGFwZT8uKHsgYmluZGluZywgcmVtb3ZlZFNoYXBlOiB0aGlzLmdldFNoYXBlKGJpbmRpbmcudG9JZCkgfSk7XG4gICAgICAgICAgdXRpbC5vbkJlZm9yZUlzb2xhdGVUb1NoYXBlPy4oeyBiaW5kaW5nLCByZW1vdmVkU2hhcGU6IHRoaXMuZ2V0U2hhcGUoYmluZGluZy5mcm9tSWQpIH0pO1xuICAgICAgICAgIHRoaXMuc3RvcmUucmVtb3ZlKFtpZF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdG9yZS5yZW1vdmUoaWRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGJpbmRpbmcgYnkgaXRzIElELiBJZiB0aGUgYmluZGluZyBkb2Vzbid0IGV4aXN0LCBpdCdzIGlnbm9yZWQuXG4gICAqL1xuICBkZWxldGVCaW5kaW5nKGJpbmRpbmcsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGVCaW5kaW5ncyhbYmluZGluZ10sIG9wdHMpO1xuICB9XG4gIGNhbkJpbmRTaGFwZXMoe1xuICAgIGZyb21TaGFwZSxcbiAgICB0b1NoYXBlLFxuICAgIGJpbmRpbmdcbiAgfSkge1xuICAgIGNvbnN0IGZyb21TaGFwZVR5cGUgPSB0eXBlb2YgZnJvbVNoYXBlID09PSBcInN0cmluZ1wiID8gZnJvbVNoYXBlIDogZnJvbVNoYXBlLnR5cGU7XG4gICAgY29uc3QgdG9TaGFwZVR5cGUgPSB0eXBlb2YgdG9TaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHRvU2hhcGUgOiB0b1NoYXBlLnR5cGU7XG4gICAgY29uc3QgYmluZGluZ1R5cGUgPSB0eXBlb2YgYmluZGluZyA9PT0gXCJzdHJpbmdcIiA/IGJpbmRpbmcgOiBiaW5kaW5nLnR5cGU7XG4gICAgY29uc3QgY2FuQmluZE9wdHMgPSB7IGZyb21TaGFwZVR5cGUsIHRvU2hhcGVUeXBlLCBiaW5kaW5nVHlwZSB9O1xuICAgIGlmIChmcm9tU2hhcGVUeXBlID09PSB0b1NoYXBlVHlwZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVVdGlsKGZyb21TaGFwZVR5cGUpLmNhbkJpbmQoY2FuQmluZE9wdHMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRTaGFwZVV0aWwoZnJvbVNoYXBlVHlwZSkuY2FuQmluZChjYW5CaW5kT3B0cykgJiYgdGhpcy5nZXRTaGFwZVV0aWwodG9TaGFwZVR5cGUpLmNhbkJpbmQoY2FuQmluZE9wdHMpO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tIENvbW1hbmRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKlxuICAgKiBSb3RhdGUgc2hhcGVzIGJ5IGEgZGVsdGEgaW4gcmFkaWFucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJvdGF0ZVNoYXBlc0J5KGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksIE1hdGguUEkpXG4gICAqIGVkaXRvci5yb3RhdGVTaGFwZXNCeShlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLCBNYXRoLlBJIC8gMilcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIG9mIHRoZSBzaGFwZXMgdG8gbW92ZS5cbiAgICogQHBhcmFtIGRlbHRhIC0gVGhlIGRlbHRhIGluIHJhZGlhbnMgdG8gYXBwbHkgdG8gdGhlIHNlbGVjdGlvbiByb3RhdGlvbi5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIHJvdGF0aW9uLlxuICAgKi9cbiAgcm90YXRlU2hhcGVzQnkoc2hhcGVzLCBkZWx0YSwgb3B0cykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoaWRzLmxlbmd0aCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzbmFwc2hvdCA9IGdldFJvdGF0aW9uU25hcHNob3QoeyBlZGl0b3I6IHRoaXMsIGlkcyB9KTtcbiAgICBpZiAoIXNuYXBzaG90KSByZXR1cm4gdGhpcztcbiAgICBhcHBseVJvdGF0aW9uVG9TbmFwc2hvdFNoYXBlcyh7XG4gICAgICBkZWx0YSxcbiAgICAgIHNuYXBzaG90LFxuICAgICAgZWRpdG9yOiB0aGlzLFxuICAgICAgc3RhZ2U6IFwib25lLW9mZlwiLFxuICAgICAgY2VudGVyT3ZlcnJpZGU6IG9wdHM/LmNlbnRlclxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldENoYW5nZXNUb1RyYW5zbGF0ZVNoYXBlKGluaXRpYWxTaGFwZSwgbmV3U2hhcGVDb29yZHMpIHtcbiAgICBsZXQgd29ya2luZ1NoYXBlID0gaW5pdGlhbFNoYXBlO1xuICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldFNoYXBlVXRpbChpbml0aWFsU2hhcGUpO1xuICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgd29ya2luZ1NoYXBlLFxuICAgICAgdXRpbC5vblRyYW5zbGF0ZVN0YXJ0Py4od29ya2luZ1NoYXBlKSA/PyB2b2lkIDBcbiAgICApO1xuICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKHdvcmtpbmdTaGFwZSwge1xuICAgICAgaWQ6IGluaXRpYWxTaGFwZS5pZCxcbiAgICAgIHR5cGU6IGluaXRpYWxTaGFwZS50eXBlLFxuICAgICAgeDogbmV3U2hhcGVDb29yZHMueCxcbiAgICAgIHk6IG5ld1NoYXBlQ29vcmRzLnlcbiAgICB9KTtcbiAgICB3b3JraW5nU2hhcGUgPSBhcHBseVBhcnRpYWxUb1JlY29yZFdpdGhQcm9wcyhcbiAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgIHV0aWwub25UcmFuc2xhdGU/Lihpbml0aWFsU2hhcGUsIHdvcmtpbmdTaGFwZSkgPz8gdm9pZCAwXG4gICAgKTtcbiAgICB3b3JraW5nU2hhcGUgPSBhcHBseVBhcnRpYWxUb1JlY29yZFdpdGhQcm9wcyhcbiAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgIHV0aWwub25UcmFuc2xhdGVFbmQ/Lihpbml0aWFsU2hhcGUsIHdvcmtpbmdTaGFwZSkgPz8gdm9pZCAwXG4gICAgKTtcbiAgICByZXR1cm4gd29ya2luZ1NoYXBlO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHNoYXBlcyBieSBhIGRlbHRhLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IubnVkZ2VTaGFwZXMoWydib3gxJywgJ2JveDInXSwgeyB4OiA4LCB5OiA4IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBtb3ZlLlxuICAgKiBAcGFyYW0gb2Zmc2V0IC0gVGhlIG9mZnNldCB0byBhcHBseSB0byB0aGUgc2hhcGVzLlxuICAgKi9cbiAgbnVkZ2VTaGFwZXMoc2hhcGVzLCBvZmZzZXQpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKGlkcy5sZW5ndGggPD0gMCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgICAgY29uc3QgbG9jYWxEZWx0YSA9IFZlYy5Gcm9tKG9mZnNldCk7XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pIGxvY2FsRGVsdGEucm90KC1wYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKSk7XG4gICAgICBjaGFuZ2VzLnB1c2godGhpcy5nZXRDaGFuZ2VzVG9UcmFuc2xhdGVTaGFwZShzaGFwZSwgbG9jYWxEZWx0YS5hZGQoc2hhcGUpKSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEdXBsaWNhdGUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZHVwbGljYXRlU2hhcGVzKFsnYm94MScsICdib3gyJ10sIHsgeDogOCwgeTogOCB9KVxuICAgKiBlZGl0b3IuZHVwbGljYXRlU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlcygpLCB7IHg6IDgsIHk6IDggfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGR1cGxpY2F0ZS5cbiAgICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgKGluIHBpeGVscykgdG8gYXBwbHkgdG8gdGhlIGR1cGxpY2F0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkdXBsaWNhdGVTaGFwZXMoc2hhcGVzLCBvZmZzZXQpIHtcbiAgICB0aGlzLnJ1bigoKSA9PiB7XG4gICAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgICBpZiAoaWRzLmxlbmd0aCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICAgIGNvbnN0IGluaXRpYWxJZHMgPSBuZXcgU2V0KGlkcyk7XG4gICAgICBjb25zdCBzaGFwZUlkU2V0ID0gdGhpcy5nZXRTaGFwZUFuZERlc2NlbmRhbnRJZHMoaWRzKTtcbiAgICAgIGNvbnN0IG9yZGVyZWRTaGFwZUlkcyA9IFsuLi5zaGFwZUlkU2V0XS5yZXZlcnNlKCk7XG4gICAgICBjb25zdCBzaGFwZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGNvbnN0IHNoYXBlSWQgb2Ygc2hhcGVJZFNldCkge1xuICAgICAgICBzaGFwZUlkcy5zZXQoc2hhcGVJZCwgY3JlYXRlU2hhcGVJZCgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgc2hhcGVzVG9DcmVhdGVXaXRoT3JpZ2luYWxzLCBiaW5kaW5nc1RvQ3JlYXRlIH0gPSB3aXRoSXNvbGF0ZWRTaGFwZXMoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHNoYXBlSWRTZXQsXG4gICAgICAgIChiaW5kaW5nSWRzVG9NYWludGFpbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGJpbmRpbmdzVG9DcmVhdGUyID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCBvcmlnaW5hbElkIG9mIGJpbmRpbmdJZHNUb01haW50YWluKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEJpbmRpbmcgPSB0aGlzLmdldEJpbmRpbmcob3JpZ2luYWxJZCk7XG4gICAgICAgICAgICBpZiAoIW9yaWdpbmFsQmluZGluZykgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVkSWQgPSBjcmVhdGVCaW5kaW5nSWQoKTtcbiAgICAgICAgICAgIGJpbmRpbmdzVG9DcmVhdGUyLnB1c2goe1xuICAgICAgICAgICAgICAuLi5vcmlnaW5hbEJpbmRpbmcsXG4gICAgICAgICAgICAgIGlkOiBkdXBsaWNhdGVkSWQsXG4gICAgICAgICAgICAgIGZyb21JZDogYXNzZXJ0RXhpc3RzKHNoYXBlSWRzLmdldChvcmlnaW5hbEJpbmRpbmcuZnJvbUlkKSksXG4gICAgICAgICAgICAgIHRvSWQ6IGFzc2VydEV4aXN0cyhzaGFwZUlkcy5nZXQob3JpZ2luYWxCaW5kaW5nLnRvSWQpKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNoYXBlc1RvQ3JlYXRlV2l0aE9yaWdpbmFsczIgPSBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9yaWdpbmFsSWQgb2Ygb3JkZXJlZFNoYXBlSWRzKSB7XG4gICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVkSWQgPSBhc3NlcnRFeGlzdHMoc2hhcGVJZHMuZ2V0KG9yaWdpbmFsSWQpKTtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU2hhcGUgPSB0aGlzLmdldFNoYXBlKG9yaWdpbmFsSWQpO1xuICAgICAgICAgICAgaWYgKCFvcmlnaW5hbFNoYXBlKSBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCBveCA9IDA7XG4gICAgICAgICAgICBsZXQgb3kgPSAwO1xuICAgICAgICAgICAgaWYgKG9mZnNldCAmJiBpbml0aWFsSWRzLmhhcyhvcmlnaW5hbElkKSkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKG9yaWdpbmFsU2hhcGUpO1xuICAgICAgICAgICAgICBjb25zdCB2ZWMgPSBuZXcgVmVjKG9mZnNldC54LCBvZmZzZXQueSkucm90KC1wYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKSk7XG4gICAgICAgICAgICAgIG94ID0gdmVjLng7XG4gICAgICAgICAgICAgIG95ID0gdmVjLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGFwZXNUb0NyZWF0ZVdpdGhPcmlnaW5hbHMyLnB1c2goe1xuICAgICAgICAgICAgICBzaGFwZToge1xuICAgICAgICAgICAgICAgIC4uLm9yaWdpbmFsU2hhcGUsXG4gICAgICAgICAgICAgICAgaWQ6IGR1cGxpY2F0ZWRJZCxcbiAgICAgICAgICAgICAgICB4OiBvcmlnaW5hbFNoYXBlLnggKyBveCxcbiAgICAgICAgICAgICAgICB5OiBvcmlnaW5hbFNoYXBlLnkgKyBveSxcbiAgICAgICAgICAgICAgICAvLyBVc2UgYSBkdW1teSBpbmRleCBmb3Igbm93LCBpdCB3aWxsIGdldCB1cGRhdGVkIG91dHNpZGUgb2YgdGhlIGB3aXRoSXNvbGF0ZWRTaGFwZXNgXG4gICAgICAgICAgICAgICAgaW5kZXg6IFwiYTFcIixcbiAgICAgICAgICAgICAgICBwYXJlbnRJZDogc2hhcGVJZHMuZ2V0KG9yaWdpbmFsU2hhcGUucGFyZW50SWQpID8/IG9yaWdpbmFsU2hhcGUucGFyZW50SWRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb3JpZ2luYWxTaGFwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHNoYXBlc1RvQ3JlYXRlV2l0aE9yaWdpbmFsczogc2hhcGVzVG9DcmVhdGVXaXRoT3JpZ2luYWxzMiwgYmluZGluZ3NUb0NyZWF0ZTogYmluZGluZ3NUb0NyZWF0ZTIgfTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHNoYXBlc1RvQ3JlYXRlV2l0aE9yaWdpbmFscy5mb3JFYWNoKCh7IHNoYXBlLCBvcmlnaW5hbFNoYXBlIH0pID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50SWQgPSBvcmlnaW5hbFNoYXBlLnBhcmVudElkO1xuICAgICAgICBjb25zdCBzaWJsaW5ncyA9IHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50SWQpO1xuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5ncy5pbmRleE9mKG9yaWdpbmFsU2hhcGUuaWQpO1xuICAgICAgICBjb25zdCBzaWJsaW5nQWJvdmVJZCA9IHNpYmxpbmdzW2N1cnJlbnRJbmRleCArIDFdO1xuICAgICAgICBjb25zdCBzaWJsaW5nQWJvdmUgPSBzaWJsaW5nQWJvdmVJZCA/IHRoaXMuZ2V0U2hhcGUoc2libGluZ0Fib3ZlSWQpIDogdm9pZCAwO1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEluZGV4QmV0d2VlbihvcmlnaW5hbFNoYXBlLmluZGV4LCBzaWJsaW5nQWJvdmU/LmluZGV4KTtcbiAgICAgICAgc2hhcGUuaW5kZXggPSBpbmRleDtcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2hhcGVzVG9DcmVhdGUgPSBzaGFwZXNUb0NyZWF0ZVdpdGhPcmlnaW5hbHMubWFwKCh7IHNoYXBlIH0pID0+IHNoYXBlKTtcbiAgICAgIGNvbnN0IG1heFNoYXBlc1JlYWNoZWQgPSBzaGFwZXNUb0NyZWF0ZS5sZW5ndGggKyB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKS5zaXplID4gdGhpcy5vcHRpb25zLm1heFNoYXBlc1BlclBhZ2U7XG4gICAgICBpZiAobWF4U2hhcGVzUmVhY2hlZCkge1xuICAgICAgICBhbGVydE1heFNoYXBlcyh0aGlzKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5jcmVhdGVTaGFwZXMoc2hhcGVzVG9DcmVhdGUpO1xuICAgICAgdGhpcy5jcmVhdGVCaW5kaW5ncyhiaW5kaW5nc1RvQ3JlYXRlKTtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoY29tcGFjdChpZHMubWFwKChpZCkgPT4gc2hhcGVJZHMuZ2V0KGlkKSkpKTtcbiAgICAgIGlmIChvZmZzZXQgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25QYWdlQm91bmRzID0gdGhpcy5nZXRTZWxlY3Rpb25QYWdlQm91bmRzKCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb25QYWdlQm91bmRzICYmICF2aWV3cG9ydFBhZ2VCb3VuZHMuY29udGFpbnMoc2VsZWN0aW9uUGFnZUJvdW5kcykpIHtcbiAgICAgICAgICB0aGlzLmNlbnRlck9uUG9pbnQoc2VsZWN0aW9uUGFnZUJvdW5kcy5jZW50ZXIsIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogeyBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmFuaW1hdGlvbk1lZGl1bU1zIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHNoYXBlcyB0byBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IubW92ZVNoYXBlc1RvUGFnZShbJ2JveDEnLCAnYm94MiddLCAncGFnZTEnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgb2YgdGhlIHNoYXBlcyB0byBtb3ZlLlxuICAgKiBAcGFyYW0gcGFnZUlkIC0gVGhlIGlkIG9mIHRoZSBwYWdlIHdoZXJlIHRoZSBzaGFwZXMgd2lsbCBiZSBtb3ZlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgbW92ZVNoYXBlc1RvUGFnZShzaGFwZXMsIHBhZ2VJZCkge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgaWYgKHBhZ2VJZCA9PT0gY3VycmVudFBhZ2VJZCkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCF0aGlzLnN0b3JlLmhhcyhwYWdlSWQpKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50RnJvbUN1cnJlbnRQYWdlKGlkcyk7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gdGhpcztcbiAgICBpZiAodGhpcy5nZXRQYWdlU2hhcGVJZHMocGFnZUlkKS5zaXplICsgY29udGVudC5zaGFwZXMubGVuZ3RoID4gdGhpcy5vcHRpb25zLm1heFNoYXBlc1BlclBhZ2UpIHtcbiAgICAgIGFsZXJ0TWF4U2hhcGVzKHRoaXMsIHBhZ2VJZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgZnJvbVBhZ2VaID0gdGhpcy5nZXRDYW1lcmEoKS56O1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuZGVsZXRlU2hhcGVzKGlkcyk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRQYWdlKHBhZ2VJZCk7XG4gICAgICB0aGlzLnNldEZvY3VzZWRHcm91cChudWxsKTtcbiAgICAgIHRoaXMuc2VsZWN0Tm9uZSgpO1xuICAgICAgdGhpcy5wdXRDb250ZW50T250b0N1cnJlbnRQYWdlKGNvbnRlbnQsIHtcbiAgICAgICAgc2VsZWN0OiB0cnVlLFxuICAgICAgICBwcmVzZXJ2ZUlkczogdHJ1ZSxcbiAgICAgICAgcHJlc2VydmVQb3NpdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldENhbWVyYSh7IC4uLnRoaXMuZ2V0Q2FtZXJhKCksIHo6IGZyb21QYWdlWiB9KTtcbiAgICAgIHRoaXMuY2VudGVyT25Qb2ludCh0aGlzLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCkuY2VudGVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBsb2NrIHN0YXRlIG9mIG9uZSBvciBtb3JlIHNoYXBlcy4gSWYgdGhlcmUgaXMgYSBtaXggb2YgbG9ja2VkIGFuZCB1bmxvY2tlZCBzaGFwZXMsIGFsbCBzaGFwZXMgd2lsbCBiZSBsb2NrZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIHRvZ2dsZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdG9nZ2xlTG9jayhzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpIHx8IGlkcy5sZW5ndGggPT09IDApIHJldHVybiB0aGlzO1xuICAgIGxldCBhbGxMb2NrZWQgPSB0cnVlLCBhbGxVbmxvY2tlZCA9IHRydWU7XG4gICAgY29uc3Qgc2hhcGVzVG9Ub2dnbGUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICBzaGFwZXNUb1RvZ2dsZS5wdXNoKHNoYXBlKTtcbiAgICAgICAgaWYgKHNoYXBlLmlzTG9ja2VkKSB7XG4gICAgICAgICAgYWxsVW5sb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGxMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJ1bigoKSA9PiB7XG4gICAgICBpZiAoYWxsVW5sb2NrZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFwZXMoXG4gICAgICAgICAgc2hhcGVzVG9Ub2dnbGUubWFwKChzaGFwZSkgPT4gKHsgaWQ6IHNoYXBlLmlkLCB0eXBlOiBzaGFwZS50eXBlLCBpc0xvY2tlZDogdHJ1ZSB9KSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFNoYXBlcyhbXSk7XG4gICAgICB9IGVsc2UgaWYgKGFsbExvY2tlZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhcbiAgICAgICAgICBzaGFwZXNUb1RvZ2dsZS5tYXAoKHNoYXBlKSA9PiAoeyBpZDogc2hhcGUuaWQsIHR5cGU6IHNoYXBlLnR5cGUsIGlzTG9ja2VkOiBmYWxzZSB9KSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlU2hhcGVzKFxuICAgICAgICAgIHNoYXBlc1RvVG9nZ2xlLm1hcCgoc2hhcGUpID0+ICh7IGlkOiBzaGFwZS5pZCwgdHlwZTogc2hhcGUudHlwZSwgaXNMb2NrZWQ6IHRydWUgfSkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNlbmQgc2hhcGVzIHRvIHRoZSBiYWNrIG9mIHRoZSBwYWdlJ3Mgb2JqZWN0IGxpc3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZW5kVG9CYWNrKFsnaWQxJywgJ2lkMiddKVxuICAgKiBlZGl0b3Iuc2VuZFRvQmFjayhib3gxLCBib3gyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gbW92ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VuZFRvQmFjayhzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgY29uc3QgY2hhbmdlcyA9IGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzKHRoaXMsIFwidG9CYWNrXCIsIGlkcyk7XG4gICAgaWYgKGNoYW5nZXMpIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZW5kIHNoYXBlcyBiYWNrd2FyZCBpbiB0aGUgcGFnZSdzIG9iamVjdCBsaXN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2VuZEJhY2t3YXJkKFsnaWQxJywgJ2lkMiddKVxuICAgKiBlZGl0b3Iuc2VuZEJhY2t3YXJkKFtib3gxLCBib3gyXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIG1vdmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmRCYWNrd2FyZChzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgY29uc3QgY2hhbmdlcyA9IGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzKHRoaXMsIFwiYmFja3dhcmRcIiwgaWRzKTtcbiAgICBpZiAoY2hhbmdlcykgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJyaW5nIHNoYXBlcyBmb3J3YXJkIGluIHRoZSBwYWdlJ3Mgb2JqZWN0IGxpc3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5icmluZ0ZvcndhcmQoWydpZDEnLCAnaWQyJ10pXG4gICAqIGVkaXRvci5icmluZ0ZvcndhcmQoYm94MSwgIGJveDIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBtb3ZlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBicmluZ0ZvcndhcmQoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IGNoYW5nZXMgPSBnZXRSZW9yZGVyaW5nU2hhcGVzQ2hhbmdlcyh0aGlzLCBcImZvcndhcmRcIiwgaWRzKTtcbiAgICBpZiAoY2hhbmdlcykgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJyaW5nIHNoYXBlcyB0byB0aGUgZnJvbnQgb2YgdGhlIHBhZ2UncyBvYmplY3QgbGlzdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmJyaW5nVG9Gcm9udChbJ2lkMScsICdpZDInXSlcbiAgICogZWRpdG9yLmJyaW5nVG9Gcm9udChbYm94MSwgYm94Ml0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBtb3ZlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBicmluZ1RvRnJvbnQoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IGNoYW5nZXMgPSBnZXRSZW9yZGVyaW5nU2hhcGVzQ2hhbmdlcyh0aGlzLCBcInRvRnJvbnRcIiwgaWRzKTtcbiAgICBpZiAoY2hhbmdlcykgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEZsaXAgc2hhcGUgcG9zaXRpb25zLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZmxpcFNoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJywgMzIpXG4gICAqIGVkaXRvci5mbGlwU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksICdob3Jpem9udGFsJywgMzIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIGlkcyBvZiB0aGUgc2hhcGVzIHRvIGZsaXAuXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBXaGV0aGVyIHRvIGZsaXAgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZsaXBTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBsZXQgc2hhcGVzVG9GbGlwID0gY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgICBpZiAoIXNoYXBlc1RvRmxpcC5sZW5ndGgpIHJldHVybiB0aGlzO1xuICAgIHNoYXBlc1RvRmxpcCA9IGNvbXBhY3QoXG4gICAgICBzaGFwZXNUb0ZsaXAubWFwKChzaGFwZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImdyb3VwXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoc2hhcGUuaWQpLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICB9KS5mbGF0KClcbiAgICApO1xuICAgIGNvbnN0IHNjYWxlT3JpZ2luUGFnZSA9IEJveC5Db21tb24oXG4gICAgICBjb21wYWN0KHNoYXBlc1RvRmxpcC5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCkpKVxuICAgICkuY2VudGVyO1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGUgb2Ygc2hhcGVzVG9GbGlwKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkuYm91bmRzO1xuICAgICAgICBjb25zdCBpbml0aWFsUGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlLmlkKTtcbiAgICAgICAgaWYgKCFpbml0aWFsUGFnZVRyYW5zZm9ybSkgY29udGludWU7XG4gICAgICAgIHRoaXMucmVzaXplU2hhcGUoXG4gICAgICAgICAgc2hhcGUuaWQsXG4gICAgICAgICAgeyB4OiBvcGVyYXRpb24gPT09IFwiaG9yaXpvbnRhbFwiID8gLTEgOiAxLCB5OiBvcGVyYXRpb24gPT09IFwidmVydGljYWxcIiA/IC0xIDogMSB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGluaXRpYWxCb3VuZHM6IGJvdW5kcyxcbiAgICAgICAgICAgIGluaXRpYWxQYWdlVHJhbnNmb3JtLFxuICAgICAgICAgICAgaW5pdGlhbFNoYXBlOiBzaGFwZSxcbiAgICAgICAgICAgIG1vZGU6IFwic2NhbGVfc2hhcGVcIixcbiAgICAgICAgICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWQ6IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5pc0FzcGVjdFJhdGlvTG9ja2VkKHNoYXBlKSxcbiAgICAgICAgICAgIHNjYWxlT3JpZ2luOiBzY2FsZU9yaWdpblBhZ2UsXG4gICAgICAgICAgICBzY2FsZUF4aXNSb3RhdGlvbjogMFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU3RhY2sgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zdGFja1NoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJywgMzIpXG4gICAqIGVkaXRvci5zdGFja1NoYXBlcyhlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLCAnaG9yaXpvbnRhbCcsIDMyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc3RhY2suXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBXaGV0aGVyIHRvIHN0YWNrIGhvcml6b250YWxseSBvciB2ZXJ0aWNhbGx5LlxuICAgKiBAcGFyYW0gZ2FwIC0gVGhlIGdhcCB0byBsZWF2ZSBiZXR3ZWVuIHNoYXBlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhY2tTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24sIGdhcCkge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNoYXBlc1RvU3RhY2sgPSBpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpLmZpbHRlcigoc2hhcGUpID0+IHtcbiAgICAgIGlmICghc2hhcGUpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuY2FuQmVMYWlkT3V0KHNoYXBlKTtcbiAgICB9KTtcbiAgICBjb25zdCBsZW4gPSBzaGFwZXNUb1N0YWNrLmxlbmd0aDtcbiAgICBpZiAoZ2FwID09PSAwICYmIGxlbiA8IDMgfHwgbGVuIDwgMikgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcGFnZUJvdW5kcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHNoYXBlc1RvU3RhY2subWFwKChzaGFwZSkgPT4gW3NoYXBlLmlkLCB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhzaGFwZSldKVxuICAgICk7XG4gICAgbGV0IHZhbDtcbiAgICBsZXQgbWluO1xuICAgIGxldCBtYXg7XG4gICAgbGV0IGRpbTtcbiAgICBpZiAob3BlcmF0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgdmFsID0gXCJ4XCI7XG4gICAgICBtaW4gPSBcIm1pblhcIjtcbiAgICAgIG1heCA9IFwibWF4WFwiO1xuICAgICAgZGltID0gXCJ3aWR0aFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWwgPSBcInlcIjtcbiAgICAgIG1pbiA9IFwibWluWVwiO1xuICAgICAgbWF4ID0gXCJtYXhZXCI7XG4gICAgICBkaW0gPSBcImhlaWdodFwiO1xuICAgIH1cbiAgICBsZXQgc2hhcGVHYXA7XG4gICAgaWYgKGdhcCA9PT0gMCkge1xuICAgICAgY29uc3QgZ2FwcyA9IFtdO1xuICAgICAgc2hhcGVzVG9TdGFjay5zb3J0KChhLCBiKSA9PiBwYWdlQm91bmRzW2EuaWRdW21pbl0gLSBwYWdlQm91bmRzW2IuaWRdW21pbl0pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNUb1N0YWNrW2ldO1xuICAgICAgICBjb25zdCBuZXh0U2hhcGUgPSBzaGFwZXNUb1N0YWNrW2kgKyAxXTtcbiAgICAgICAgY29uc3QgYm91bmRzID0gcGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICAgIGNvbnN0IG5leHRCb3VuZHMgPSBwYWdlQm91bmRzW25leHRTaGFwZS5pZF07XG4gICAgICAgIGNvbnN0IGdhcDIgPSBuZXh0Qm91bmRzW21pbl0gLSBib3VuZHNbbWF4XTtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGdhcHMuZmluZCgoZykgPT4gZy5nYXAgPT09IGdhcDIpO1xuICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgIGN1cnJlbnQuY291bnQrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYXBzLnB1c2goeyBnYXA6IGdhcDIsIGNvdW50OiAxIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgbWF4Q291bnQgPSAwO1xuICAgICAgZ2Fwcy5mb3JFYWNoKChnKSA9PiB7XG4gICAgICAgIGlmIChnLmNvdW50ID4gbWF4Q291bnQpIHtcbiAgICAgICAgICBtYXhDb3VudCA9IGcuY291bnQ7XG4gICAgICAgICAgc2hhcGVHYXAgPSBnLmdhcDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAobWF4Q291bnQgPT09IDEpIHtcbiAgICAgICAgc2hhcGVHYXAgPSBNYXRoLm1heCgwLCBnYXBzLnJlZHVjZSgoYSwgYykgPT4gYSArIGMuZ2FwICogYy5jb3VudCwgMCkgLyAobGVuIC0gMSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGFwZUdhcCA9IGdhcDtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGxldCB2ID0gcGFnZUJvdW5kc1tzaGFwZXNUb1N0YWNrWzBdLmlkXVttYXhdO1xuICAgIHNoYXBlc1RvU3RhY2suZm9yRWFjaCgoc2hhcGUsIGkpID0+IHtcbiAgICAgIGlmIChpID09PSAwKSByZXR1cm47XG4gICAgICBjb25zdCBkZWx0YSA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgZGVsdGFbdmFsXSA9IHYgKyBzaGFwZUdhcCAtIHBhZ2VCb3VuZHNbc2hhcGUuaWRdW3ZhbF07XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlUGFyZW50KHNoYXBlKTtcbiAgICAgIGNvbnN0IGxvY2FsRGVsdGEgPSBwYXJlbnQgPyBWZWMuUm90KGRlbHRhLCAtdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0ocGFyZW50KS5kZWNvbXBvc2UoKS5yb3RhdGlvbikgOiBkZWx0YTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZVN0YXJ0Q2hhbmdlcyA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5vblRyYW5zbGF0ZVN0YXJ0Py4oc2hhcGUpO1xuICAgICAgY2hhbmdlcy5wdXNoKFxuICAgICAgICB0cmFuc2xhdGVTdGFydENoYW5nZXMgPyB7XG4gICAgICAgICAgLi4udHJhbnNsYXRlU3RhcnRDaGFuZ2VzLFxuICAgICAgICAgIFt2YWxdOiBzaGFwZVt2YWxdICsgbG9jYWxEZWx0YVt2YWxdXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgICAgW3ZhbF06IHNoYXBlW3ZhbF0gKyBsb2NhbERlbHRhW3ZhbF1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHYgKz0gcGFnZUJvdW5kc1tzaGFwZS5pZF1bZGltXSArIHNoYXBlR2FwO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBQYWNrIHNoYXBlcyBpbnRvIGEgZ3JpZCBjZW50ZXJlZCBvbiB0aGVpciBjdXJyZW50IHBvc2l0aW9uLiBCYXNlZCBvbiBwb3RwYWNrIChodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3BvdHBhY2spLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucGFja1NoYXBlcyhbYm94MSwgYm94Ml0sIDMyKVxuICAgKiBlZGl0b3IucGFja1NoYXBlcyhlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLCAzMilcbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIHBhY2suXG4gICAqIEBwYXJhbSBnYXAgLSBUaGUgcGFkZGluZyB0byBhcHBseSB0byB0aGUgcGFja2VkIHNoYXBlcy4gRGVmYXVsdHMgdG8gMTYuXG4gICAqL1xuICBwYWNrU2hhcGVzKHNoYXBlcywgZ2FwKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGlkcy5sZW5ndGggPCAyKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzaGFwZXNUb1BhY2sgPSBpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpLmZpbHRlcigoc2hhcGUyKSA9PiB7XG4gICAgICBpZiAoIXNoYXBlMikgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlMikuY2FuQmVMYWlkT3V0KHNoYXBlMik7XG4gICAgfSk7XG4gICAgY29uc3Qgc2hhcGVQYWdlQm91bmRzID0ge307XG4gICAgY29uc3QgbmV4dFNoYXBlUGFnZUJvdW5kcyA9IHt9O1xuICAgIGxldCBzaGFwZSwgYm91bmRzLCBhcmVhID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoYXBlc1RvUGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgc2hhcGUgPSBzaGFwZXNUb1BhY2tbaV07XG4gICAgICBib3VuZHMgPSB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhzaGFwZSk7XG4gICAgICBzaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdID0gYm91bmRzO1xuICAgICAgbmV4dFNoYXBlUGFnZUJvdW5kc1tzaGFwZS5pZF0gPSBib3VuZHMuY2xvbmUoKTtcbiAgICAgIGFyZWEgKz0gYm91bmRzLndpZHRoICogYm91bmRzLmhlaWdodDtcbiAgICB9XG4gICAgY29uc3QgY29tbW9uQm91bmRzID0gQm94LkNvbW1vbihjb21wYWN0KE9iamVjdC52YWx1ZXMoc2hhcGVQYWdlQm91bmRzKSkpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gY29tbW9uQm91bmRzLndpZHRoO1xuICAgIHNoYXBlc1RvUGFjay5zb3J0KChhLCBiKSA9PiBzaGFwZVBhZ2VCb3VuZHNbYi5pZF0uaGVpZ2h0IC0gc2hhcGVQYWdlQm91bmRzW2EuaWRdLmhlaWdodCk7XG4gICAgY29uc3Qgc3RhcnRXaWR0aCA9IE1hdGgubWF4KE1hdGguY2VpbChNYXRoLnNxcnQoYXJlYSAvIDAuOTUpKSwgbWF4V2lkdGgpO1xuICAgIGNvbnN0IHNwYWNlcyA9IFtuZXcgQm94KGNvbW1vbkJvdW5kcy54LCBjb21tb25Cb3VuZHMueSwgc3RhcnRXaWR0aCwgSW5maW5pdHkpXTtcbiAgICBsZXQgd2lkdGggPSAwO1xuICAgIGxldCBoZWlnaHQgPSAwO1xuICAgIGxldCBzcGFjZTtcbiAgICBsZXQgbGFzdDI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFwZXNUb1BhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgIHNoYXBlID0gc2hhcGVzVG9QYWNrW2ldO1xuICAgICAgYm91bmRzID0gbmV4dFNoYXBlUGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICBmb3IgKGxldCBpMiA9IHNwYWNlcy5sZW5ndGggLSAxOyBpMiA+PSAwOyBpMi0tKSB7XG4gICAgICAgIHNwYWNlID0gc3BhY2VzW2kyXTtcbiAgICAgICAgaWYgKGJvdW5kcy53aWR0aCA+IHNwYWNlLndpZHRoIHx8IGJvdW5kcy5oZWlnaHQgPiBzcGFjZS5oZWlnaHQpIGNvbnRpbnVlO1xuICAgICAgICBib3VuZHMueCA9IHNwYWNlLng7XG4gICAgICAgIGJvdW5kcy55ID0gc3BhY2UueTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCBib3VuZHMubWF4WSk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGJvdW5kcy5tYXhYKTtcbiAgICAgICAgaWYgKGJvdW5kcy53aWR0aCA9PT0gc3BhY2Uud2lkdGggJiYgYm91bmRzLmhlaWdodCA9PT0gc3BhY2UuaGVpZ2h0KSB7XG4gICAgICAgICAgbGFzdDIgPSBzcGFjZXMucG9wKCk7XG4gICAgICAgICAgaWYgKGkyIDwgc3BhY2VzLmxlbmd0aCkgc3BhY2VzW2kyXSA9IGxhc3QyO1xuICAgICAgICB9IGVsc2UgaWYgKGJvdW5kcy5oZWlnaHQgPT09IHNwYWNlLmhlaWdodCkge1xuICAgICAgICAgIHNwYWNlLnggKz0gYm91bmRzLndpZHRoICsgZ2FwO1xuICAgICAgICAgIHNwYWNlLndpZHRoIC09IGJvdW5kcy53aWR0aCArIGdhcDtcbiAgICAgICAgfSBlbHNlIGlmIChib3VuZHMud2lkdGggPT09IHNwYWNlLndpZHRoKSB7XG4gICAgICAgICAgc3BhY2UueSArPSBib3VuZHMuaGVpZ2h0ICsgZ2FwO1xuICAgICAgICAgIHNwYWNlLmhlaWdodCAtPSBib3VuZHMuaGVpZ2h0ICsgZ2FwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwYWNlcy5wdXNoKFxuICAgICAgICAgICAgbmV3IEJveChcbiAgICAgICAgICAgICAgc3BhY2UueCArIChib3VuZHMud2lkdGggKyBnYXApLFxuICAgICAgICAgICAgICBzcGFjZS55LFxuICAgICAgICAgICAgICBzcGFjZS53aWR0aCAtIChib3VuZHMud2lkdGggKyBnYXApLFxuICAgICAgICAgICAgICBib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzcGFjZS55ICs9IGJvdW5kcy5oZWlnaHQgKyBnYXA7XG4gICAgICAgICAgc3BhY2UuaGVpZ2h0IC09IGJvdW5kcy5oZWlnaHQgKyBnYXA7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNvbW1vbkFmdGVyID0gQm94LkNvbW1vbihPYmplY3QudmFsdWVzKG5leHRTaGFwZVBhZ2VCb3VuZHMpKTtcbiAgICBjb25zdCBjZW50ZXJEZWx0YSA9IFZlYy5TdWIoY29tbW9uQm91bmRzLmNlbnRlciwgY29tbW9uQWZ0ZXIuY2VudGVyKTtcbiAgICBsZXQgbmV4dEJvdW5kcztcbiAgICBjb25zdCBjaGFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFwZXNUb1BhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgIHNoYXBlID0gc2hhcGVzVG9QYWNrW2ldO1xuICAgICAgYm91bmRzID0gc2hhcGVQYWdlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgIG5leHRCb3VuZHMgPSBuZXh0U2hhcGVQYWdlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgIGNvbnN0IGRlbHRhID0gVmVjLlN1YihuZXh0Qm91bmRzLnBvaW50LCBib3VuZHMucG9pbnQpLmFkZChjZW50ZXJEZWx0YSk7XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pIGRlbHRhLnJvdCgtcGFyZW50VHJhbnNmb3JtLnJvdGF0aW9uKCkpO1xuICAgICAgY29uc3QgY2hhbmdlID0ge1xuICAgICAgICBpZDogc2hhcGUuaWQsXG4gICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgIHg6IHNoYXBlLnggKyBkZWx0YS54LFxuICAgICAgICB5OiBzaGFwZS55ICsgZGVsdGEueVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZVN0YXJ0Q2hhbmdlID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLm9uVHJhbnNsYXRlU3RhcnQ/Lih7XG4gICAgICAgIC4uLnNoYXBlLFxuICAgICAgICAuLi5jaGFuZ2VcbiAgICAgIH0pO1xuICAgICAgaWYgKHRyYW5zbGF0ZVN0YXJ0Q2hhbmdlKSB7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7IC4uLmNoYW5nZSwgLi4udHJhbnNsYXRlU3RhcnRDaGFuZ2UgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhjaGFuZ2VzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFsaWduIHNoYXBlIHBvc2l0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmFsaWduU2hhcGVzKFtib3gxLCBib3gyXSwgJ2xlZnQnKVxuICAgKiBlZGl0b3IuYWxpZ25TaGFwZXMoZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVJZHMoKSwgJ2xlZnQnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gYWxpZ24uXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBUaGUgYWxpZ24gb3BlcmF0aW9uIHRvIGFwcGx5LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhbGlnblNoYXBlcyhzaGFwZXMsIG9wZXJhdGlvbikge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGlmIChpZHMubGVuZ3RoIDwgMikgcmV0dXJuIHRoaXM7XG4gICAgY29uc3Qgc2hhcGVzVG9BbGlnbiA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgY29uc3Qgc2hhcGVQYWdlQm91bmRzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgc2hhcGVzVG9BbGlnbi5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKV0pXG4gICAgKTtcbiAgICBjb25zdCBjb21tb25Cb3VuZHMgPSBCb3guQ29tbW9uKGNvbXBhY3QoT2JqZWN0LnZhbHVlcyhzaGFwZVBhZ2VCb3VuZHMpKSk7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIHNoYXBlc1RvQWxpZ24uZm9yRWFjaCgoc2hhcGUpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBzaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdO1xuICAgICAgaWYgKCFwYWdlQm91bmRzKSByZXR1cm47XG4gICAgICBjb25zdCBkZWx0YSA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcbiAgICAgICAgY2FzZSBcInRvcFwiOiB7XG4gICAgICAgICAgZGVsdGEueSA9IGNvbW1vbkJvdW5kcy5taW5ZIC0gcGFnZUJvdW5kcy5taW5ZO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjZW50ZXItdmVydGljYWxcIjoge1xuICAgICAgICAgIGRlbHRhLnkgPSBjb21tb25Cb3VuZHMubWlkWSAtIHBhZ2VCb3VuZHMubWluWSAtIHBhZ2VCb3VuZHMuaGVpZ2h0IC8gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYm90dG9tXCI6IHtcbiAgICAgICAgICBkZWx0YS55ID0gY29tbW9uQm91bmRzLm1heFkgLSBwYWdlQm91bmRzLm1pblkgLSBwYWdlQm91bmRzLmhlaWdodDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibGVmdFwiOiB7XG4gICAgICAgICAgZGVsdGEueCA9IGNvbW1vbkJvdW5kcy5taW5YIC0gcGFnZUJvdW5kcy5taW5YO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjZW50ZXItaG9yaXpvbnRhbFwiOiB7XG4gICAgICAgICAgZGVsdGEueCA9IGNvbW1vbkJvdW5kcy5taWRYIC0gcGFnZUJvdW5kcy5taW5YIC0gcGFnZUJvdW5kcy53aWR0aCAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInJpZ2h0XCI6IHtcbiAgICAgICAgICBkZWx0YS54ID0gY29tbW9uQm91bmRzLm1heFggLSBwYWdlQm91bmRzLm1pblggLSBwYWdlQm91bmRzLndpZHRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlUGFyZW50KHNoYXBlKTtcbiAgICAgIGNvbnN0IGxvY2FsRGVsdGEgPSBwYXJlbnQgPyBWZWMuUm90KGRlbHRhLCAtdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0ocGFyZW50KS5kZWNvbXBvc2UoKS5yb3RhdGlvbikgOiBkZWx0YTtcbiAgICAgIGNoYW5nZXMucHVzaCh0aGlzLmdldENoYW5nZXNUb1RyYW5zbGF0ZVNoYXBlKHNoYXBlLCBWZWMuQWRkKHNoYXBlLCBsb2NhbERlbHRhKSkpO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEaXN0cmlidXRlIHNoYXBlIHBvc2l0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRpc3RyaWJ1dGVTaGFwZXMoW2JveDEsIGJveDJdLCAnaG9yaXpvbnRhbCcpXG4gICAqIGVkaXRvci5kaXN0cmlidXRlU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksICdob3Jpem9udGFsJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGRpc3RyaWJ1dGUuXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBXaGV0aGVyIHRvIGRpc3RyaWJ1dGUgc2hhcGVzIGhvcml6b250YWxseSBvciB2ZXJ0aWNhbGx5LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkaXN0cmlidXRlU2hhcGVzKHNoYXBlcywgb3BlcmF0aW9uKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGlkcy5sZW5ndGggPCAzKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBsZW4gPSBpZHMubGVuZ3RoO1xuICAgIGNvbnN0IHNoYXBlc1RvRGlzdHJpYnV0ZSA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgY29uc3QgcGFnZUJvdW5kcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHNoYXBlc1RvRGlzdHJpYnV0ZS5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKV0pXG4gICAgKTtcbiAgICBsZXQgdmFsO1xuICAgIGxldCBtaW47XG4gICAgbGV0IG1heDtcbiAgICBsZXQgbWlkO1xuICAgIGxldCBkaW07XG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgIHZhbCA9IFwieFwiO1xuICAgICAgbWluID0gXCJtaW5YXCI7XG4gICAgICBtYXggPSBcIm1heFhcIjtcbiAgICAgIG1pZCA9IFwibWlkWFwiO1xuICAgICAgZGltID0gXCJ3aWR0aFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWwgPSBcInlcIjtcbiAgICAgIG1pbiA9IFwibWluWVwiO1xuICAgICAgbWF4ID0gXCJtYXhZXCI7XG4gICAgICBtaWQgPSBcIm1pZFlcIjtcbiAgICAgIGRpbSA9IFwiaGVpZ2h0XCI7XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBbXTtcbiAgICBjb25zdCBmaXJzdCA9IHNoYXBlc1RvRGlzdHJpYnV0ZS5zb3J0KFxuICAgICAgKGEsIGIpID0+IHBhZ2VCb3VuZHNbYS5pZF1bbWluXSAtIHBhZ2VCb3VuZHNbYi5pZF1bbWluXVxuICAgIClbMF07XG4gICAgY29uc3QgbGFzdDIgPSBzaGFwZXNUb0Rpc3RyaWJ1dGUuc29ydCgoYSwgYikgPT4gcGFnZUJvdW5kc1tiLmlkXVttYXhdIC0gcGFnZUJvdW5kc1thLmlkXVttYXhdKVswXTtcbiAgICBjb25zdCBtaWRGaXJzdCA9IHBhZ2VCb3VuZHNbZmlyc3QuaWRdW21pZF07XG4gICAgY29uc3Qgc3RlcCA9IChwYWdlQm91bmRzW2xhc3QyLmlkXVttaWRdIC0gbWlkRmlyc3QpIC8gKGxlbiAtIDEpO1xuICAgIGNvbnN0IHYgPSBtaWRGaXJzdCArIHN0ZXA7XG4gICAgc2hhcGVzVG9EaXN0cmlidXRlLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlICE9PSBmaXJzdCAmJiBzaGFwZSAhPT0gbGFzdDIpLnNvcnQoKGEsIGIpID0+IHBhZ2VCb3VuZHNbYS5pZF1bbWlkXSAtIHBhZ2VCb3VuZHNbYi5pZF1bbWlkXSkuZm9yRWFjaCgoc2hhcGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0geyB4OiAwLCB5OiAwIH07XG4gICAgICBkZWx0YVt2YWxdID0gdiArIHN0ZXAgKiBpIC0gcGFnZUJvdW5kc1tzaGFwZS5pZF1bZGltXSAvIDIgLSBwYWdlQm91bmRzW3NoYXBlLmlkXVt2YWxdO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRTaGFwZVBhcmVudChzaGFwZSk7XG4gICAgICBjb25zdCBsb2NhbERlbHRhID0gcGFyZW50ID8gVmVjLlJvdChkZWx0YSwgLXRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHBhcmVudCkucm90YXRpb24oKSkgOiBkZWx0YTtcbiAgICAgIGNoYW5nZXMucHVzaCh0aGlzLmdldENoYW5nZXNUb1RyYW5zbGF0ZVNoYXBlKHNoYXBlLCBWZWMuQWRkKHNoYXBlLCBsb2NhbERlbHRhKSkpO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTdHJldGNoIHNoYXBlIHNpemVzIGFuZCBwb3NpdGlvbnMgdG8gZmlsbCB0aGVpciBjb21tb24gYm91bmRpbmcgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc3RyZXRjaFNoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJylcbiAgICogZWRpdG9yLnN0cmV0Y2hTaGFwZXMoZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVJZHMoKSwgJ2hvcml6b250YWwnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc3RyZXRjaC5cbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIFdoZXRoZXIgdG8gc3RyZXRjaCBzaGFwZXMgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0cmV0Y2hTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBpZiAoaWRzLmxlbmd0aCA8IDIpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNoYXBlc1RvU3RyZXRjaCA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgY29uc3Qgc2hhcGVCb3VuZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoaWRzLm1hcCgoaWQpID0+IFtpZCwgdGhpcy5nZXRTaGFwZUdlb21ldHJ5KGlkKS5ib3VuZHNdKSk7XG4gICAgY29uc3Qgc2hhcGVQYWdlQm91bmRzID0gT2JqZWN0LmZyb21FbnRyaWVzKGlkcy5tYXAoKGlkKSA9PiBbaWQsIHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKV0pKTtcbiAgICBjb25zdCBjb21tb25Cb3VuZHMgPSBCb3guQ29tbW9uKGNvbXBhY3QoT2JqZWN0LnZhbHVlcyhzaGFwZVBhZ2VCb3VuZHMpKSk7XG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcbiAgICAgIGNhc2UgXCJ2ZXJ0aWNhbFwiOiB7XG4gICAgICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNoYXBlIG9mIHNoYXBlc1RvU3RyZXRjaCkge1xuICAgICAgICAgICAgY29uc3QgcGFnZVJvdGF0aW9uID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLnJvdGF0aW9uKCk7XG4gICAgICAgICAgICBpZiAocGFnZVJvdGF0aW9uICUgUEkyKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHNoYXBlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBzaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxPZmZzZXQgPSBuZXcgVmVjKDAsIGNvbW1vbkJvdW5kcy5taW5ZIC0gcGFnZUJvdW5kcy5taW5ZKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oc2hhcGUpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zZm9ybSkgbG9jYWxPZmZzZXQucm90KC1wYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKSk7XG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IFZlYy5BZGQobG9jYWxPZmZzZXQsIHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2hhcGVzKFt7IGlkOiBzaGFwZS5pZCwgdHlwZTogc2hhcGUudHlwZSwgeCwgeSB9XSk7XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWMoMSwgY29tbW9uQm91bmRzLmhlaWdodCAvIHBhZ2VCb3VuZHMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU2hhcGUoc2hhcGUuaWQsIHNjYWxlLCB7XG4gICAgICAgICAgICAgIGluaXRpYWxCb3VuZHM6IGJvdW5kcyxcbiAgICAgICAgICAgICAgc2NhbGVPcmlnaW46IG5ldyBWZWMocGFnZUJvdW5kcy5jZW50ZXIueCwgY29tbW9uQm91bmRzLm1pblkpLFxuICAgICAgICAgICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuaXNBc3BlY3RSYXRpb0xvY2tlZChzaGFwZSksXG4gICAgICAgICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJob3Jpem9udGFsXCI6IHtcbiAgICAgICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3Qgc2hhcGUgb2Ygc2hhcGVzVG9TdHJldGNoKSB7XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSBzaGFwZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICAgICAgICBjb25zdCBwYWdlQm91bmRzID0gc2hhcGVQYWdlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VSb3RhdGlvbiA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKS5yb3RhdGlvbigpO1xuICAgICAgICAgICAgaWYgKHBhZ2VSb3RhdGlvbiAlIFBJMikgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBsb2NhbE9mZnNldCA9IG5ldyBWZWMoY29tbW9uQm91bmRzLm1pblggLSBwYWdlQm91bmRzLm1pblgsIDApO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhcmVudFRyYW5zZm9ybShzaGFwZSk7XG4gICAgICAgICAgICBpZiAocGFyZW50VHJhbnNmb3JtKSBsb2NhbE9mZnNldC5yb3QoLXBhcmVudFRyYW5zZm9ybS5yb3RhdGlvbigpKTtcbiAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gVmVjLkFkZChsb2NhbE9mZnNldCwgc2hhcGUpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTaGFwZXMoW3sgaWQ6IHNoYXBlLmlkLCB0eXBlOiBzaGFwZS50eXBlLCB4LCB5IH1dKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFZlYyhjb21tb25Cb3VuZHMud2lkdGggLyBwYWdlQm91bmRzLndpZHRoLCAxKTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU2hhcGUoc2hhcGUuaWQsIHNjYWxlLCB7XG4gICAgICAgICAgICAgIGluaXRpYWxCb3VuZHM6IGJvdW5kcyxcbiAgICAgICAgICAgICAgc2NhbGVPcmlnaW46IG5ldyBWZWMoY29tbW9uQm91bmRzLm1pblgsIHBhZ2VCb3VuZHMuY2VudGVyLnkpLFxuICAgICAgICAgICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuaXNBc3BlY3RSYXRpb0xvY2tlZChzaGFwZSksXG4gICAgICAgICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2l6ZSBhIHNoYXBlLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHRoZSBzaGFwZSBpZCBvZiB0aGUgc2hhcGUpIHRvIHJlc2l6ZS5cbiAgICogQHBhcmFtIHNjYWxlIC0gVGhlIHNjYWxlIGZhY3RvciB0byBhcHBseSB0byB0aGUgc2hhcGUuXG4gICAqIEBwYXJhbSBvcHRzIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZXNpemVTaGFwZShzaGFwZSwgc2NhbGUsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHNjYWxlLngpKSBzY2FsZSA9IG5ldyBWZWMoMSwgc2NhbGUueSk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2NhbGUueSkpIHNjYWxlID0gbmV3IFZlYyhzY2FsZS54LCAxKTtcbiAgICBjb25zdCBpbml0aWFsU2hhcGUgPSBvcHRzLmluaXRpYWxTaGFwZSA/PyB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWluaXRpYWxTaGFwZSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3Qgc2NhbGVPcmlnaW4gPSBvcHRzLnNjYWxlT3JpZ2luID8/IHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKT8uY2VudGVyO1xuICAgIGlmICghc2NhbGVPcmlnaW4pIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBvcHRzLmluaXRpYWxQYWdlVHJhbnNmb3JtID8gTWF0LkNhc3Qob3B0cy5pbml0aWFsUGFnZVRyYW5zZm9ybSkgOiB0aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShpZCk7XG4gICAgaWYgKCFwYWdlVHJhbnNmb3JtKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBwYWdlUm90YXRpb24gPSBwYWdlVHJhbnNmb3JtLnJvdGF0aW9uKCk7XG4gICAgaWYgKHBhZ2VSb3RhdGlvbiA9PSBudWxsKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzY2FsZUF4aXNSb3RhdGlvbiA9IG9wdHMuc2NhbGVBeGlzUm90YXRpb24gPz8gcGFnZVJvdGF0aW9uO1xuICAgIGNvbnN0IGluaXRpYWxCb3VuZHMgPSBvcHRzLmluaXRpYWxCb3VuZHMgPz8gdGhpcy5nZXRTaGFwZUdlb21ldHJ5KGlkKS5ib3VuZHM7XG4gICAgaWYgKCFpbml0aWFsQm91bmRzKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpc0FzcGVjdFJhdGlvTG9ja2VkID0gb3B0cy5pc0FzcGVjdFJhdGlvTG9ja2VkID8/IHRoaXMuZ2V0U2hhcGVVdGlsKGluaXRpYWxTaGFwZSkuaXNBc3BlY3RSYXRpb0xvY2tlZChpbml0aWFsU2hhcGUpO1xuICAgIGlmICghYXJlQW5nbGVzQ29tcGF0aWJsZShwYWdlUm90YXRpb24sIHNjYWxlQXhpc1JvdGF0aW9uKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jlc2l6ZVVuYWxpZ25lZFNoYXBlKGlkLCBzY2FsZSwge1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBpbml0aWFsQm91bmRzLFxuICAgICAgICBzY2FsZU9yaWdpbixcbiAgICAgICAgc2NhbGVBeGlzUm90YXRpb24sXG4gICAgICAgIGluaXRpYWxQYWdlVHJhbnNmb3JtOiBwYWdlVHJhbnNmb3JtLFxuICAgICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkLFxuICAgICAgICBpbml0aWFsU2hhcGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwoaW5pdGlhbFNoYXBlKTtcbiAgICBpZiAoaXNBc3BlY3RSYXRpb0xvY2tlZCkge1xuICAgICAgaWYgKE1hdGguYWJzKHNjYWxlLngpID4gTWF0aC5hYnMoc2NhbGUueSkpIHtcbiAgICAgICAgc2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIE1hdGguc2lnbihzY2FsZS55KSAqIE1hdGguYWJzKHNjYWxlLngpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjYWxlID0gbmV3IFZlYyhNYXRoLnNpZ24oc2NhbGUueCkgKiBNYXRoLmFicyhzY2FsZS55KSwgc2NhbGUueSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1dGlsLm9uUmVzaXplICYmIHV0aWwuY2FuUmVzaXplKGluaXRpYWxTaGFwZSkpIHtcbiAgICAgIGNvbnN0IG5ld1BhZ2VQb2ludCA9IHRoaXMuX3NjYWxlUGFnZVBvaW50KFxuICAgICAgICBNYXQuYXBwbHlUb1BvaW50KHBhZ2VUcmFuc2Zvcm0sIG5ldyBWZWMoMCwgMCkpLFxuICAgICAgICBzY2FsZU9yaWdpbixcbiAgICAgICAgc2NhbGUsXG4gICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uXG4gICAgICApO1xuICAgICAgY29uc3QgbmV3TG9jYWxQb2ludCA9IHRoaXMuZ2V0UG9pbnRJblBhcmVudFNwYWNlKGluaXRpYWxTaGFwZS5pZCwgbmV3UGFnZVBvaW50KTtcbiAgICAgIGNvbnN0IG15U2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIHNjYWxlLnkpO1xuICAgICAgY29uc3QgYXJlV2lkdGhBbmRIZWlnaHRBbGlnbmVkV2l0aENvcnJlY3RBeGlzID0gYXBwcm94aW1hdGVseShcbiAgICAgICAgKHBhZ2VSb3RhdGlvbiAtIHNjYWxlQXhpc1JvdGF0aW9uKSAlIE1hdGguUEksXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICBteVNjYWxlLnggPSBhcmVXaWR0aEFuZEhlaWdodEFsaWduZWRXaXRoQ29ycmVjdEF4aXMgPyBzY2FsZS54IDogc2NhbGUueTtcbiAgICAgIG15U2NhbGUueSA9IGFyZVdpZHRoQW5kSGVpZ2h0QWxpZ25lZFdpdGhDb3JyZWN0QXhpcyA/IHNjYWxlLnkgOiBzY2FsZS54O1xuICAgICAgY29uc3QgaW5pdGlhbFBhZ2VQb2ludCA9IE1hdC5hcHBseVRvUG9pbnQocGFnZVRyYW5zZm9ybSwgbmV3IFZlYygpKTtcbiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRQb2ludEluUGFyZW50U3BhY2UoaW5pdGlhbFNoYXBlLmlkLCBpbml0aWFsUGFnZVBvaW50KTtcbiAgICAgIGxldCB3b3JraW5nU2hhcGUgPSBpbml0aWFsU2hhcGU7XG4gICAgICBpZiAoIW9wdHMuc2tpcFN0YXJ0QW5kRW5kQ2FsbGJhY2tzKSB7XG4gICAgICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgICAgIGluaXRpYWxTaGFwZSxcbiAgICAgICAgICB1dGlsLm9uUmVzaXplU3RhcnQ/Lihpbml0aWFsU2hhcGUpID8/IHZvaWQgMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgd29ya2luZ1NoYXBlID0gYXBwbHlQYXJ0aWFsVG9SZWNvcmRXaXRoUHJvcHMod29ya2luZ1NoYXBlLCB7XG4gICAgICAgIGlkLFxuICAgICAgICB0eXBlOiBpbml0aWFsU2hhcGUudHlwZSxcbiAgICAgICAgeDogbmV3TG9jYWxQb2ludC54LFxuICAgICAgICB5OiBuZXdMb2NhbFBvaW50LnksXG4gICAgICAgIC4uLnV0aWwub25SZXNpemUoXG4gICAgICAgICAgeyAuLi5pbml0aWFsU2hhcGUsIHgsIHkgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuZXdQb2ludDogbmV3TG9jYWxQb2ludCxcbiAgICAgICAgICAgIGhhbmRsZTogb3B0cy5kcmFnSGFuZGxlID8/IFwiYm90dG9tX3JpZ2h0XCIsXG4gICAgICAgICAgICAvLyBkb24ndCBzZXQgaXNTaW5nbGUgdG8gdHJ1ZSBmb3IgY2hpbGRyZW5cbiAgICAgICAgICAgIG1vZGU6IG9wdHMubW9kZSA/PyBcInNjYWxlX3NoYXBlXCIsXG4gICAgICAgICAgICBzY2FsZVg6IG15U2NhbGUueCxcbiAgICAgICAgICAgIHNjYWxlWTogbXlTY2FsZS55LFxuICAgICAgICAgICAgaW5pdGlhbEJvdW5kcyxcbiAgICAgICAgICAgIGluaXRpYWxTaGFwZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfSk7XG4gICAgICBpZiAoIW9wdHMuc2tpcFN0YXJ0QW5kRW5kQ2FsbGJhY2tzKSB7XG4gICAgICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgICAgICB1dGlsLm9uUmVzaXplRW5kPy4oaW5pdGlhbFNoYXBlLCB3b3JraW5nU2hhcGUpID8/IHZvaWQgMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoW3dvcmtpbmdTaGFwZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbml0aWFsUGFnZUNlbnRlciA9IE1hdC5hcHBseVRvUG9pbnQocGFnZVRyYW5zZm9ybSwgaW5pdGlhbEJvdW5kcy5jZW50ZXIpO1xuICAgICAgY29uc3QgbmV3UGFnZUNlbnRlciA9IHRoaXMuX3NjYWxlUGFnZVBvaW50KFxuICAgICAgICBpbml0aWFsUGFnZUNlbnRlcixcbiAgICAgICAgc2NhbGVPcmlnaW4sXG4gICAgICAgIHNjYWxlLFxuICAgICAgICBzY2FsZUF4aXNSb3RhdGlvblxuICAgICAgKTtcbiAgICAgIGNvbnN0IGluaXRpYWxQYWdlQ2VudGVySW5QYXJlbnRTcGFjZSA9IHRoaXMuZ2V0UG9pbnRJblBhcmVudFNwYWNlKFxuICAgICAgICBpbml0aWFsU2hhcGUuaWQsXG4gICAgICAgIGluaXRpYWxQYWdlQ2VudGVyXG4gICAgICApO1xuICAgICAgY29uc3QgbmV3UGFnZUNlbnRlckluUGFyZW50U3BhY2UgPSB0aGlzLmdldFBvaW50SW5QYXJlbnRTcGFjZShpbml0aWFsU2hhcGUuaWQsIG5ld1BhZ2VDZW50ZXIpO1xuICAgICAgY29uc3QgZGVsdGEgPSBWZWMuU3ViKG5ld1BhZ2VDZW50ZXJJblBhcmVudFNwYWNlLCBpbml0aWFsUGFnZUNlbnRlckluUGFyZW50U3BhY2UpO1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdHlwZTogaW5pdGlhbFNoYXBlLnR5cGUsXG4gICAgICAgICAgeDogaW5pdGlhbFNoYXBlLnggKyBkZWx0YS54LFxuICAgICAgICAgIHk6IGluaXRpYWxTaGFwZS55ICsgZGVsdGEueVxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc2NhbGVQYWdlUG9pbnQocG9pbnQsIHNjYWxlT3JpZ2luLCBzY2FsZSwgc2NhbGVBeGlzUm90YXRpb24pIHtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50ID0gVmVjLlJvdFdpdGgocG9pbnQsIHNjYWxlT3JpZ2luLCAtc2NhbGVBeGlzUm90YXRpb24pLnN1YihzY2FsZU9yaWdpbik7XG4gICAgY29uc3QgbmV3UmVsYXRpdmVQYWdlUG9pbnQgPSBWZWMuTXVsVihyZWxhdGl2ZVBvaW50LCBzY2FsZSk7XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBWZWMuQWRkKG5ld1JlbGF0aXZlUGFnZVBvaW50LCBzY2FsZU9yaWdpbikucm90V2l0aChcbiAgICAgIHNjYWxlT3JpZ2luLFxuICAgICAgc2NhbGVBeGlzUm90YXRpb25cbiAgICApO1xuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9yZXNpemVVbmFsaWduZWRTaGFwZShpZCwgc2NhbGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHR5cGUgfSA9IG9wdGlvbnMuaW5pdGlhbFNoYXBlO1xuICAgIGNvbnN0IHNoYXBlU2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIHNjYWxlLnkpO1xuICAgIGlmIChNYXRoLmFicyhzY2FsZS54KSA+IE1hdGguYWJzKHNjYWxlLnkpKSB7XG4gICAgICBzaGFwZVNjYWxlLnggPSBNYXRoLnNpZ24oc2NhbGUueCkgKiBNYXRoLmFicyhzY2FsZS55KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hhcGVTY2FsZS55ID0gTWF0aC5zaWduKHNjYWxlLnkpICogTWF0aC5hYnMoc2NhbGUueCk7XG4gICAgfVxuICAgIHRoaXMucmVzaXplU2hhcGUoaWQsIHNoYXBlU2NhbGUsIHtcbiAgICAgIGluaXRpYWxTaGFwZTogb3B0aW9ucy5pbml0aWFsU2hhcGUsXG4gICAgICBpbml0aWFsQm91bmRzOiBvcHRpb25zLmluaXRpYWxCb3VuZHMsXG4gICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiBvcHRpb25zLmlzQXNwZWN0UmF0aW9Mb2NrZWRcbiAgICB9KTtcbiAgICBpZiAoTWF0aC5zaWduKHNjYWxlLngpICogTWF0aC5zaWduKHNjYWxlLnkpIDwgMCkge1xuICAgICAgbGV0IHsgcm90YXRpb24gfSA9IE1hdC5EZWNvbXBvc2Uob3B0aW9ucy5pbml0aWFsUGFnZVRyYW5zZm9ybSk7XG4gICAgICByb3RhdGlvbiAtPSAyICogcm90YXRpb247XG4gICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhbeyBpZCwgdHlwZSwgcm90YXRpb24gfV0pO1xuICAgIH1cbiAgICBjb25zdCBwcmVTY2FsZVNoYXBlUGFnZUNlbnRlciA9IE1hdC5hcHBseVRvUG9pbnQoXG4gICAgICBvcHRpb25zLmluaXRpYWxQYWdlVHJhbnNmb3JtLFxuICAgICAgb3B0aW9ucy5pbml0aWFsQm91bmRzLmNlbnRlclxuICAgICk7XG4gICAgY29uc3QgcG9zdFNjYWxlU2hhcGVQYWdlQ2VudGVyID0gdGhpcy5fc2NhbGVQYWdlUG9pbnQoXG4gICAgICBwcmVTY2FsZVNoYXBlUGFnZUNlbnRlcixcbiAgICAgIG9wdGlvbnMuc2NhbGVPcmlnaW4sXG4gICAgICBzY2FsZSxcbiAgICAgIG9wdGlvbnMuc2NhbGVBeGlzUm90YXRpb25cbiAgICApO1xuICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCk7XG4gICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKGlkKTtcbiAgICBjb25zdCBjdXJyZW50UGFnZUNlbnRlciA9IHBhZ2VCb3VuZHMuY2VudGVyO1xuICAgIGNvbnN0IHNoYXBlUGFnZVRyYW5zZm9ybU9yaWdpbiA9IHBhZ2VUcmFuc2Zvcm0ucG9pbnQoKTtcbiAgICBpZiAoIWN1cnJlbnRQYWdlQ2VudGVyIHx8ICFzaGFwZVBhZ2VUcmFuc2Zvcm1PcmlnaW4pIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHBhZ2VEZWx0YSA9IFZlYy5TdWIocG9zdFNjYWxlU2hhcGVQYWdlQ2VudGVyLCBjdXJyZW50UGFnZUNlbnRlcik7XG4gICAgY29uc3QgcG9zdFNjYWxlU2hhcGVQYWdlUG9pbnQgPSBWZWMuQWRkKHNoYXBlUGFnZVRyYW5zZm9ybU9yaWdpbiwgcGFnZURlbHRhKTtcbiAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuZ2V0UG9pbnRJblBhcmVudFNwYWNlKGlkLCBwb3N0U2NhbGVTaGFwZVBhZ2VQb2ludCk7XG4gICAgdGhpcy51cGRhdGVTaGFwZXMoW3sgaWQsIHR5cGUsIHgsIHkgfV0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGluaXRpYWwgbWV0YSB2YWx1ZSBmb3IgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldEluaXRpYWxNZXRhRm9yU2hhcGUgPSAoc2hhcGUpID0+IHtcbiAgICogICBpZiAoc2hhcGUudHlwZSA9PT0gJ25vdGUnKSB7XG4gICAqICAgICByZXR1cm4geyBjcmVhdGVkQnk6IG15Q3VycmVudFVzZXIuaWQgfVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHRvIGdldCB0aGUgaW5pdGlhbCBtZXRhIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0SW5pdGlhbE1ldGFGb3JTaGFwZShfc2hhcGUpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbmdsZSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNyZWF0ZVNoYXBlKG15U2hhcGUpXG4gICAqIGVkaXRvci5jcmVhdGVTaGFwZSh7IGlkOiAnYm94MScsIHR5cGU6ICd0ZXh0JywgcHJvcHM6IHsgdGV4dDogXCJva1wiIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgcGFydGlhbCkgdG8gY3JlYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjcmVhdGVTaGFwZShzaGFwZSkge1xuICAgIHRoaXMuY3JlYXRlU2hhcGVzKFtzaGFwZV0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuY3JlYXRlU2hhcGVzKFtteVNoYXBlXSlcbiAgICogZWRpdG9yLmNyZWF0ZVNoYXBlcyhbeyBpZDogJ2JveDEnLCB0eXBlOiAndGV4dCcsIHByb3BzOiB7IHRleHQ6IFwib2tcIiB9IH1dKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIHBhcnRpYWxzKSB0byBjcmVhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZVNoYXBlcyhzaGFwZXMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2hhcGVzKSkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJFZGl0b3IuY3JlYXRlU2hhcGVzOiBtdXN0IHByb3ZpZGUgYW4gYXJyYXkgb2Ygc2hhcGVzIG9yIHNoYXBlIHBhcnRpYWxzXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGlmIChzaGFwZXMubGVuZ3RoIDw9IDApIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlU2hhcGVJZHMgPSB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKTtcbiAgICBjb25zdCBtYXhTaGFwZXNSZWFjaGVkID0gc2hhcGVzLmxlbmd0aCArIGN1cnJlbnRQYWdlU2hhcGVJZHMuc2l6ZSA+IHRoaXMub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlO1xuICAgIGlmIChtYXhTaGFwZXNSZWFjaGVkKSB7XG4gICAgICBhbGVydE1heFNoYXBlcyh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBmb2N1c2VkR3JvdXBJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICB0aGlzLnJ1bigoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UGFnZVNoYXBlc1NvcnRlZCA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQoKTtcbiAgICAgIGNvbnN0IHBhcnRpYWxzID0gc2hhcGVzLm1hcCgocGFydGlhbCkgPT4ge1xuICAgICAgICBpZiAoIXBhcnRpYWwuaWQpIHtcbiAgICAgICAgICBwYXJ0aWFsID0geyBpZDogY3JlYXRlU2hhcGVJZCgpLCAuLi5wYXJ0aWFsIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJ0aWFsLnBhcmVudElkIHx8ICEodGhpcy5zdG9yZS5oYXMocGFydGlhbC5wYXJlbnRJZCkgfHwgc2hhcGVzLnNvbWUoKHApID0+IHAuaWQgPT09IHBhcnRpYWwucGFyZW50SWQpKSkge1xuICAgICAgICAgIGxldCBwYXJlbnRJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGN1cnJlbnRQYWdlU2hhcGVzU29ydGVkW2ldO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzU2hhcGVIaWRkZW4ocGFyZW50KSAmJiB0aGlzLmdldFNoYXBlVXRpbChwYXJlbnQpLmNhblJlY2VpdmVOZXdDaGlsZHJlbk9mVHlwZShwYXJlbnQsIHBhcnRpYWwudHlwZSkgJiYgdGhpcy5pc1BvaW50SW5TaGFwZShcbiAgICAgICAgICAgICAgcGFyZW50LFxuICAgICAgICAgICAgICAvLyBJZiBubyBwYXJlbnQgaXMgcHJvdmlkZWQsIHRoZW4gd2UgY2FuIHRyZWF0IHRoZVxuICAgICAgICAgICAgICAvLyBzaGFwZSdzIHByb3ZpZGVkIHgveSBhcyBiZWluZyBpbiB0aGUgcGFnZSdzIHNwYWNlLlxuICAgICAgICAgICAgICB7IHg6IHBhcnRpYWwueCA/PyAwLCB5OiBwYXJ0aWFsLnkgPz8gMCB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgICAgIGhpdEluc2lkZTogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LmlkO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcHJldlBhcmVudElkID0gcGFydGlhbC5wYXJlbnRJZDtcbiAgICAgICAgICBpZiAocGFyZW50SWQgPT09IHBhcnRpYWwuaWQpIHtcbiAgICAgICAgICAgIHBhcmVudElkID0gZm9jdXNlZEdyb3VwSWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwYXJlbnRJZCAhPT0gcHJldlBhcmVudElkKSB7XG4gICAgICAgICAgICBwYXJ0aWFsID0geyAuLi5wYXJ0aWFsIH07XG4gICAgICAgICAgICBwYXJ0aWFsLnBhcmVudElkID0gcGFyZW50SWQ7XG4gICAgICAgICAgICBpZiAoaXNTaGFwZUlkKHBhcmVudElkKSkge1xuICAgICAgICAgICAgICBjb25zdCBwb2ludCA9IHRoaXMuZ2V0UG9pbnRJblNoYXBlU3BhY2UodGhpcy5nZXRTaGFwZShwYXJlbnRJZCksIHtcbiAgICAgICAgICAgICAgICB4OiBwYXJ0aWFsLnggPz8gMCxcbiAgICAgICAgICAgICAgICB5OiBwYXJ0aWFsLnkgPz8gMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcGFydGlhbC54ID0gcG9pbnQueDtcbiAgICAgICAgICAgICAgcGFydGlhbC55ID0gcG9pbnQueTtcbiAgICAgICAgICAgICAgcGFydGlhbC5yb3RhdGlvbiA9IC10aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShwYXJlbnRJZCkucm90YXRpb24oKSArIChwYXJ0aWFsLnJvdGF0aW9uID8/IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydGlhbDtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGFyZW50SW5kaWNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBjb25zdCBzaGFwZVJlY29yZHNUb0NyZWF0ZSA9IFtdO1xuICAgICAgY29uc3QgeyBvcGFjaXR5Rm9yTmV4dFNoYXBlIH0gPSB0aGlzLmdldEluc3RhbmNlU3RhdGUoKTtcbiAgICAgIGZvciAoY29uc3QgcGFydGlhbCBvZiBwYXJ0aWFscykge1xuICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwocGFydGlhbCk7XG4gICAgICAgIGxldCBpbmRleCA9IHBhcnRpYWwuaW5kZXg7XG4gICAgICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHBhcnRpYWwucGFyZW50SWQgPz8gZm9jdXNlZEdyb3VwSWQ7XG4gICAgICAgICAgaWYgKCFwYXJlbnRJbmRpY2VzLmhhcyhwYXJlbnRJZCkpIHtcbiAgICAgICAgICAgIHBhcmVudEluZGljZXMuc2V0KHBhcmVudElkLCB0aGlzLmdldEhpZ2hlc3RJbmRleEZvclBhcmVudChwYXJlbnRJZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbmRleCA9IHBhcmVudEluZGljZXMuZ2V0KHBhcmVudElkKTtcbiAgICAgICAgICBwYXJlbnRJbmRpY2VzLnNldChwYXJlbnRJZCwgZ2V0SW5kZXhBYm92ZShpbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluaXRpYWxQcm9wcyA9IHV0aWwuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgICAgIGZvciAoY29uc3QgW3N0eWxlLCBwcm9wS2V5XSBvZiB0aGlzLnN0eWxlUHJvcHNbcGFydGlhbC50eXBlXSkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBpbml0aWFsUHJvcHNbcHJvcEtleV0gPSB0aGlzLmdldFN0eWxlRm9yTmV4dFNoYXBlKHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hhcGVSZWNvcmRUb0NyZWF0ZSA9IHRoaXMuc3RvcmUuc2NoZW1hLnR5cGVzLnNoYXBlLmNyZWF0ZSh7XG4gICAgICAgICAgLi4ucGFydGlhbCxcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBvcGFjaXR5OiBwYXJ0aWFsLm9wYWNpdHkgPz8gb3BhY2l0eUZvck5leHRTaGFwZSxcbiAgICAgICAgICBwYXJlbnRJZDogcGFydGlhbC5wYXJlbnRJZCA/PyBmb2N1c2VkR3JvdXBJZCxcbiAgICAgICAgICBwcm9wczogXCJwcm9wc1wiIGluIHBhcnRpYWwgPyB7IC4uLmluaXRpYWxQcm9wcywgLi4ucGFydGlhbC5wcm9wcyB9IDogaW5pdGlhbFByb3BzXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2hhcGVSZWNvcmRUb0NyZWF0ZS5pbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXCJubyBpbmRleCFcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlUmVjb3JkVG9DcmVhdGUpLm9uQmVmb3JlQ3JlYXRlPy4oc2hhcGVSZWNvcmRUb0NyZWF0ZSk7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgc2hhcGVSZWNvcmRUb0NyZWF0ZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgc2hhcGVSZWNvcmRzVG9DcmVhdGUucHVzaChzaGFwZVJlY29yZFRvQ3JlYXRlKTtcbiAgICAgIH1cbiAgICAgIHNoYXBlUmVjb3Jkc1RvQ3JlYXRlLmZvckVhY2goKHNoYXBlKSA9PiB7XG4gICAgICAgIHNoYXBlLm1ldGEgPSB7XG4gICAgICAgICAgLi4udGhpcy5nZXRJbml0aWFsTWV0YUZvclNoYXBlKHNoYXBlKSxcbiAgICAgICAgICAuLi5zaGFwZS5tZXRhXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RvcmUucHV0KHNoYXBlUmVjb3Jkc1RvQ3JlYXRlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQW5pbWF0ZSBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuYW5pbWF0ZVNoYXBlKHsgaWQ6ICdib3gxJywgdHlwZTogJ2JveCcsIHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGVkaXRvci5hbmltYXRlU2hhcGUoeyBpZDogJ2JveDEnLCB0eXBlOiAnYm94JywgeDogMTAwLCB5OiAxMDAgfSwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDEwMCwgZWFzZTogdCA9PiB0KnQgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcnRpYWwgLSBUaGUgc2hhcGUgcGFydGlhbCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGFuaW1hdGlvbidzIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFuaW1hdGVTaGFwZShwYXJ0aWFsLCBvcHRzID0geyBhbmltYXRpb246IERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMgfSkge1xuICAgIHJldHVybiB0aGlzLmFuaW1hdGVTaGFwZXMoW3BhcnRpYWxdLCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogQW5pbWF0ZSBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5hbmltYXRlU2hhcGVzKFt7IGlkOiAnYm94MScsIHR5cGU6ICdib3gnLCB4OiAxMDAsIHk6IDEwMCB9XSlcbiAgICogZWRpdG9yLmFuaW1hdGVTaGFwZXMoW3sgaWQ6ICdib3gxJywgdHlwZTogJ2JveCcsIHg6IDEwMCwgeTogMTAwIH1dLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTAwLCBlYXNlOiB0ID0+IHQqdCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbHMgLSBUaGUgc2hhcGUgcGFydGlhbHMgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gb3B0cyAtIFRoZSBhbmltYXRpb24ncyBvcHRpb25zLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhbmltYXRlU2hhcGVzKHBhcnRpYWxzLCBvcHRzID0geyBhbmltYXRpb246IERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMgfSkge1xuICAgIGlmICghb3B0cy5hbmltYXRpb24pIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHsgZHVyYXRpb24gPSA1MDAsIGVhc2luZyA9IEVBU0lOR1MubGluZWFyIH0gPSBvcHRzLmFuaW1hdGlvbjtcbiAgICBjb25zdCBhbmltYXRpb25JZCA9IHVuaXF1ZUlkKCk7XG4gICAgbGV0IHJlbWFpbmluZyA9IGR1cmF0aW9uO1xuICAgIGxldCB0O1xuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSBbXTtcbiAgICBsZXQgcGFydGlhbCwgcmVzdWx0O1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gcGFydGlhbHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBwYXJ0aWFsID0gcGFydGlhbHNbaV07XG4gICAgICBpZiAoIXBhcnRpYWwpIGNvbnRpbnVlO1xuICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKHBhcnRpYWwuaWQpO1xuICAgICAgaWYgKCFzaGFwZSkgY29udGludWU7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHN0YXJ0OiBzdHJ1Y3R1cmVkQ2xvbmUoc2hhcGUpLFxuICAgICAgICBlbmQ6IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKHN0cnVjdHVyZWRDbG9uZShzaGFwZSksIHBhcnRpYWwpXG4gICAgICB9O1xuICAgICAgYW5pbWF0aW9ucy5wdXNoKHJlc3VsdCk7XG4gICAgICB0aGlzLmFuaW1hdGluZ1NoYXBlcy5zZXQoc2hhcGUuaWQsIGFuaW1hdGlvbklkKTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlVGljayA9IChlbGFwc2VkKSA9PiB7XG4gICAgICByZW1haW5pbmcgLT0gZWxhcHNlZDtcbiAgICAgIGlmIChyZW1haW5pbmcgPCAwKSB7XG4gICAgICAgIGNvbnN0IHsgYW5pbWF0aW5nU2hhcGVzOiBhbmltYXRpbmdTaGFwZXMyIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBwYXJ0aWFsc1RvVXBkYXRlID0gcGFydGlhbHMuZmlsdGVyKFxuICAgICAgICAgIChwKSA9PiBwICYmIGFuaW1hdGluZ1NoYXBlczIuZ2V0KHAuaWQpID09PSBhbmltYXRpb25JZFxuICAgICAgICApO1xuICAgICAgICBpZiAocGFydGlhbHNUb1VwZGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhwYXJ0aWFsc1RvVXBkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9mZihcInRpY2tcIiwgaGFuZGxlVGljayk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHQgPSBlYXNpbmcoMSAtIHJlbWFpbmluZyAvIGR1cmF0aW9uKTtcbiAgICAgIGNvbnN0IHsgYW5pbWF0aW5nU2hhcGVzIH0gPSB0aGlzO1xuICAgICAgY29uc3QgdXBkYXRlcyA9IFtdO1xuICAgICAgbGV0IGFuaW1hdGlvbklkRm9yU2hhcGU7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbiA9IGFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gYW5pbWF0aW9uc1tpXTtcbiAgICAgICAgYW5pbWF0aW9uSWRGb3JTaGFwZSA9IGFuaW1hdGluZ1NoYXBlcy5nZXQoc3RhcnQuaWQpO1xuICAgICAgICBpZiAoYW5pbWF0aW9uSWRGb3JTaGFwZSAhPT0gYW5pbWF0aW9uSWQpIGNvbnRpbnVlO1xuICAgICAgICB1cGRhdGVzLnB1c2goe1xuICAgICAgICAgIC4uLmVuZCxcbiAgICAgICAgICB4OiBzdGFydC54ICsgKGVuZC54IC0gc3RhcnQueCkgKiB0LFxuICAgICAgICAgIHk6IHN0YXJ0LnkgKyAoZW5kLnkgLSBzdGFydC55KSAqIHQsXG4gICAgICAgICAgb3BhY2l0eTogc3RhcnQub3BhY2l0eSArIChlbmQub3BhY2l0eSAtIHN0YXJ0Lm9wYWNpdHkpICogdCxcbiAgICAgICAgICByb3RhdGlvbjogc3RhcnQucm90YXRpb24gKyAoZW5kLnJvdGF0aW9uIC0gc3RhcnQucm90YXRpb24pICogdCxcbiAgICAgICAgICBwcm9wczogdGhpcy5nZXRTaGFwZVV0aWwoZW5kKS5nZXRJbnRlcnBvbGF0ZWRQcm9wcz8uKHN0YXJ0LCBlbmQsIHQpID8/IGVuZC5wcm9wc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3VwZGF0ZVNoYXBlcyh1cGRhdGVzKTtcbiAgICB9O1xuICAgIHRoaXMub24oXCJ0aWNrXCIsIGhhbmRsZVRpY2spO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdyb3VwU2hhcGVzKHNoYXBlcywgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgeyBncm91cElkID0gY3JlYXRlU2hhcGVJZCgpLCBzZWxlY3QgPSB0cnVlIH0gPSBvcHRzO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzaGFwZXMpKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkVkaXRvci5ncm91cFNoYXBlczogbXVzdCBwcm92aWRlIGFuIGFycmF5IG9mIHNoYXBlcyBvciBzaGFwZSBpZHNcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmIChpZHMubGVuZ3RoIDw9IDEpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNoYXBlc1RvR3JvdXAgPSBjb21wYWN0KFxuICAgICAgKHRoaXMuX3Nob3VsZElnbm9yZVNoYXBlTG9jayA/IGlkcyA6IHRoaXMuX2dldFVubG9ja2VkU2hhcGVJZHMoaWRzKSkubWFwKFxuICAgICAgICAoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpXG4gICAgICApXG4gICAgKTtcbiAgICBjb25zdCBzb3J0ZWRTaGFwZUlkcyA9IHNoYXBlc1RvR3JvdXAuc29ydChzb3J0QnlJbmRleCkubWFwKChzKSA9PiBzLmlkKTtcbiAgICBjb25zdCBwYWdlQm91bmRzID0gQm94LkNvbW1vbihjb21wYWN0KHNoYXBlc1RvR3JvdXAubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpKSkpO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcGFnZUJvdW5kcy5wb2ludDtcbiAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMuZmluZENvbW1vbkFuY2VzdG9yKHNoYXBlc1RvR3JvdXApID8/IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICAgIGlmICh0aGlzLmdldEN1cnJlbnRUb29sSWQoKSAhPT0gXCJzZWxlY3RcIikgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCF0aGlzLmlzSW4oXCJzZWxlY3QuaWRsZVwiKSkge1xuICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICB9XG4gICAgY29uc3Qgc2hhcGVzV2l0aFJvb3RQYXJlbnQgPSBzaGFwZXNUb0dyb3VwLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnBhcmVudElkID09PSBwYXJlbnRJZCkuc29ydChzb3J0QnlJbmRleCk7XG4gICAgY29uc3QgaGlnaGVzdEluZGV4ID0gc2hhcGVzV2l0aFJvb3RQYXJlbnRbc2hhcGVzV2l0aFJvb3RQYXJlbnQubGVuZ3RoIC0gMV0/LmluZGV4O1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlU2hhcGVzKFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBncm91cElkLFxuICAgICAgICAgIHR5cGU6IFwiZ3JvdXBcIixcbiAgICAgICAgICBwYXJlbnRJZCxcbiAgICAgICAgICBpbmRleDogaGlnaGVzdEluZGV4LFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHByb3BzOiB7fVxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIHRoaXMucmVwYXJlbnRTaGFwZXMoc29ydGVkU2hhcGVJZHMsIGdyb3VwSWQpO1xuICAgICAgaWYgKHNlbGVjdCkge1xuICAgICAgICB0aGlzLnNlbGVjdChncm91cElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB1bmdyb3VwU2hhcGVzKHNoYXBlcywgb3B0cyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuZ2V0SXNSZWFkb25seSgpKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB7IHNlbGVjdCA9IHRydWUgfSA9IG9wdHM7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IHNoYXBlc1RvVW5ncm91cCA9IGNvbXBhY3QoXG4gICAgICAodGhpcy5fc2hvdWxkSWdub3JlU2hhcGVMb2NrID8gaWRzIDogdGhpcy5fZ2V0VW5sb2NrZWRTaGFwZUlkcyhpZHMpKS5tYXAoXG4gICAgICAgIChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZClcbiAgICAgIClcbiAgICApO1xuICAgIGlmIChzaGFwZXNUb1VuZ3JvdXAubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcztcbiAgICBpZiAodGhpcy5nZXRDdXJyZW50VG9vbElkKCkgIT09IFwic2VsZWN0XCIpIHJldHVybiB0aGlzO1xuICAgIGlmICghdGhpcy5pc0luKFwic2VsZWN0LmlkbGVcIikpIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgfVxuICAgIGNvbnN0IGlkc1RvU2VsZWN0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBjb25zdCBncm91cHMgPSBbXTtcbiAgICBzaGFwZXNUb1VuZ3JvdXAuZm9yRWFjaCgoc2hhcGUpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgZ3JvdXBzLnB1c2goc2hhcGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWRzVG9TZWxlY3QuYWRkKHNoYXBlLmlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgbGV0IGdyb3VwO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBncm91cHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2ldO1xuICAgICAgICBjb25zdCBjaGlsZElkcyA9IHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoZ3JvdXAuaWQpO1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgbjIgPSBjaGlsZElkcy5sZW5ndGg7IGogPCBuMjsgaisrKSB7XG4gICAgICAgICAgaWRzVG9TZWxlY3QuYWRkKGNoaWxkSWRzW2pdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFyZW50U2hhcGVzKGNoaWxkSWRzLCBncm91cC5wYXJlbnRJZCwgZ3JvdXAuaW5kZXgpO1xuICAgICAgfVxuICAgICAgdGhpcy5kZWxldGVTaGFwZXMoZ3JvdXBzLm1hcCgoZ3JvdXAyKSA9PiBncm91cDIuaWQpKTtcbiAgICAgIGlmIChzZWxlY3QpIHtcbiAgICAgICAgdGhpcy5zZWxlY3QoLi4uaWRzVG9TZWxlY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYSBzaGFwZSB1c2luZyBhIHBhcnRpYWwgb2YgdGhlIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IudXBkYXRlU2hhcGUoeyBpZDogJ2JveDEnLCB0eXBlOiAnZ2VvJywgcHJvcHM6IHsgdzogMTAwLCBoOiAxMDAgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBhcnRpYWwgLSBUaGUgc2hhcGUgcGFydGlhbCB0byB1cGRhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVNoYXBlKHBhcnRpYWwpIHtcbiAgICB0aGlzLnVwZGF0ZVNoYXBlcyhbcGFydGlhbF0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgc2hhcGVzIHVzaW5nIHBhcnRpYWxzIG9mIGVhY2ggc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVTaGFwZXMoW3sgaWQ6ICdib3gxJywgdHlwZTogJ2dlbycsIHByb3BzOiB7IHc6IDEwMCwgaDogMTAwIH0gfV0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbHMgLSBUaGUgc2hhcGUgcGFydGlhbHMgdG8gdXBkYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1cGRhdGVTaGFwZXMocGFydGlhbHMpIHtcbiAgICBjb25zdCBjb21wYWN0ZWRQYXJ0aWFscyA9IEFycmF5KHBhcnRpYWxzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBwYXJ0aWFscy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcnRpYWwgPSBwYXJ0aWFsc1tpXTtcbiAgICAgIGlmICghcGFydGlhbCkgY29udGludWU7XG4gICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFydGlhbC5pZCk7XG4gICAgICBpZiAoIXNoYXBlKSBjb250aW51ZTtcbiAgICAgIGlmICghdGhpcy5fc2hvdWxkSWdub3JlU2hhcGVMb2NrKSB7XG4gICAgICAgIGlmIChzaGFwZS5pc0xvY2tlZCkge1xuICAgICAgICAgIGlmICghKE9iamVjdC5oYXNPd24ocGFydGlhbCwgXCJpc0xvY2tlZFwiKSAmJiAhcGFydGlhbC5pc0xvY2tlZCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU2hhcGVPckFuY2VzdG9yTG9ja2VkKHNoYXBlKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmFuaW1hdGluZ1NoYXBlcy5kZWxldGUocGFydGlhbC5pZCk7XG4gICAgICBjb21wYWN0ZWRQYXJ0aWFscy5wdXNoKHBhcnRpYWwpO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVTaGFwZXMoY29tcGFjdGVkUGFydGlhbHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3VwZGF0ZVNoYXBlcyhfcGFydGlhbHMpIHtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybjtcbiAgICB0aGlzLnJ1bigoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICBsZXQgc2hhcGU7XG4gICAgICBsZXQgdXBkYXRlZDtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gX3BhcnRpYWxzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0aWFsID0gX3BhcnRpYWxzW2ldO1xuICAgICAgICBpZiAoIXBhcnRpYWwpIGNvbnRpbnVlO1xuICAgICAgICBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFydGlhbC5pZCk7XG4gICAgICAgIGlmICghc2hhcGUpIGNvbnRpbnVlO1xuICAgICAgICB1cGRhdGVkID0gYXBwbHlQYXJ0aWFsVG9SZWNvcmRXaXRoUHJvcHMoc2hhcGUsIHBhcnRpYWwpO1xuICAgICAgICBpZiAodXBkYXRlZCA9PT0gc2hhcGUpIGNvbnRpbnVlO1xuICAgICAgICB1cGRhdGVkID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLm9uQmVmb3JlVXBkYXRlPy4oc2hhcGUsIHVwZGF0ZWQpID8/IHVwZGF0ZWQ7XG4gICAgICAgIHVwZGF0ZXMucHVzaCh1cGRhdGVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RvcmUucHV0KHVwZGF0ZXMpO1xuICAgIH0pO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2dldFVubG9ja2VkU2hhcGVJZHMoaWRzKSB7XG4gICAgcmV0dXJuIGlkcy5maWx0ZXIoKGlkKSA9PiAhdGhpcy5nZXRTaGFwZShpZCk/LmlzTG9ja2VkKTtcbiAgfVxuICBkZWxldGVTaGFwZXMoX2lkcykge1xuICAgIGlmICh0aGlzLmdldElzUmVhZG9ubHkoKSkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KF9pZHMpKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkVkaXRvci5kZWxldGVTaGFwZXM6IG11c3QgcHJvdmlkZSBhbiBhcnJheSBvZiBzaGFwZXMgb3Igc2hhcGVJZHNcIik7XG4gICAgfVxuICAgIGNvbnN0IHNoYXBlSWRzID0gdHlwZW9mIF9pZHNbMF0gPT09IFwic3RyaW5nXCIgPyBfaWRzIDogX2lkcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IHNoYXBlSWRzVG9EZWxldGUgPSB0aGlzLl9zaG91bGRJZ25vcmVTaGFwZUxvY2sgPyBzaGFwZUlkcyA6IHRoaXMuX2dldFVubG9ja2VkU2hhcGVJZHMoc2hhcGVJZHMpO1xuICAgIGlmIChzaGFwZUlkc1RvRGVsZXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgYWxsU2hhcGVJZHNUb0RlbGV0ZSA9IG5ldyBTZXQoc2hhcGVJZHNUb0RlbGV0ZSk7XG4gICAgZm9yIChjb25zdCBpZCBvZiBzaGFwZUlkc1RvRGVsZXRlKSB7XG4gICAgICB0aGlzLnZpc2l0RGVzY2VuZGFudHMoaWQsIChjaGlsZElkKSA9PiB7XG4gICAgICAgIGFsbFNoYXBlSWRzVG9EZWxldGUuYWRkKGNoaWxkSWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJ1bigoKSA9PiB0aGlzLnN0b3JlLnJlbW92ZShbLi4uYWxsU2hhcGVJZHNUb0RlbGV0ZV0pKTtcbiAgfVxuICBkZWxldGVTaGFwZShfaWQpIHtcbiAgICB0aGlzLmRlbGV0ZVNoYXBlcyhbdHlwZW9mIF9pZCA9PT0gXCJzdHJpbmdcIiA/IF9pZCA6IF9pZC5pZF0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTdHlsZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBjdXJyZW50IHN0eWxlcyBhbW9uZyB0aGUgdXNlcnMgc2VsZWN0ZWQgc2hhcGVzXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2V4dHJhY3RTaGFyZWRTdHlsZXMoc2hhcGUsIHNoYXJlZFN0eWxlTWFwKSB7XG4gICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgY29uc3QgY2hpbGRJZHMgPSB0aGlzLl9wYXJlbnRJZHNUb0NoaWxkSWRzLmdldCgpW3NoYXBlLmlkXTtcbiAgICAgIGlmICghY2hpbGRJZHMpIHJldHVybjtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gY2hpbGRJZHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2V4dHJhY3RTaGFyZWRTdHlsZXModGhpcy5nZXRTaGFwZShjaGlsZElkc1tpXSksIHNoYXJlZFN0eWxlTWFwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBbc3R5bGUsIHByb3BLZXldIG9mIHRoaXMuc3R5bGVQcm9wc1tzaGFwZS50eXBlXSkge1xuICAgICAgICBzaGFyZWRTdHlsZU1hcC5hcHBseVZhbHVlKHN0eWxlLCBnZXRPd25Qcm9wZXJ0eShzaGFwZS5wcm9wcywgcHJvcEtleSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfZ2V0U2VsZWN0aW9uU2hhcmVkU3R5bGVzKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlcygpO1xuICAgIGNvbnN0IHNoYXJlZFN0eWxlcyA9IG5ldyBTaGFyZWRTdHlsZU1hcCgpO1xuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRTaGFwZSBvZiBzZWxlY3RlZFNoYXBlcykge1xuICAgICAgdGhpcy5fZXh0cmFjdFNoYXJlZFN0eWxlcyhzZWxlY3RlZFNoYXBlLCBzaGFyZWRTdHlsZXMpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhcmVkU3R5bGVzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0eWxlIGZvciB0aGUgbmV4dCBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgY29sb3IgPSBlZGl0b3IuZ2V0U3R5bGVGb3JOZXh0U2hhcGUoRGVmYXVsdENvbG9yU3R5bGUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc3R5bGUgLSBUaGUgc3R5bGUgdG8gZ2V0LlxuICAgKlxuICAgKiBAcHVibGljICovXG4gIGdldFN0eWxlRm9yTmV4dFNoYXBlKHN0eWxlKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5zdHlsZXNGb3JOZXh0U2hhcGVbc3R5bGUuaWRdO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdm9pZCAwID8gc3R5bGUuZGVmYXVsdFZhbHVlIDogdmFsdWU7XG4gIH1cbiAgZ2V0U2hhcGVTdHlsZUlmRXhpc3RzKHNoYXBlLCBzdHlsZSkge1xuICAgIGNvbnN0IHN0eWxlS2V5ID0gdGhpcy5zdHlsZVByb3BzW3NoYXBlLnR5cGVdLmdldChzdHlsZSk7XG4gICAgaWYgKHN0eWxlS2V5ID09PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIGdldE93blByb3BlcnR5KHNoYXBlLnByb3BzLCBzdHlsZUtleSk7XG4gIH1cbiAgZ2V0U2hhcmVkU3R5bGVzKCkge1xuICAgIGlmICh0aGlzLmlzSW4oXCJzZWxlY3RcIikgJiYgdGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldFNlbGVjdGlvblNoYXJlZFN0eWxlcygpO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50VG9vbCA9IHRoaXMucm9vdC5nZXRDdXJyZW50KCk7XG4gICAgY29uc3Qgc3R5bGVzID0gbmV3IFNoYXJlZFN0eWxlTWFwKCk7XG4gICAgaWYgKCFjdXJyZW50VG9vbCkgcmV0dXJuIHN0eWxlcztcbiAgICBpZiAoY3VycmVudFRvb2wuc2hhcGVUeXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIHRoaXMuc3R5bGVQcm9wc1tjdXJyZW50VG9vbC5zaGFwZVR5cGVdLmtleXMoKSkge1xuICAgICAgICBzdHlsZXMuYXBwbHlWYWx1ZShzdHlsZSwgdGhpcy5nZXRTdHlsZUZvck5leHRTaGFwZShzdHlsZSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVzO1xuICB9XG4gIGdldFNoYXJlZE9wYWNpdHkoKSB7XG4gICAgaWYgKHRoaXMuaXNJbihcInNlbGVjdFwiKSAmJiB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzaGFwZXNUb0NoZWNrID0gW107XG4gICAgICBjb25zdCBhZGRTaGFwZSA9IChzaGFwZUlkKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShzaGFwZUlkKTtcbiAgICAgICAgaWYgKCFzaGFwZSkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImdyb3VwXCIpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoc2hhcGUuaWQpKSB7XG4gICAgICAgICAgICBhZGRTaGFwZShjaGlsZElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hhcGVzVG9DaGVjay5wdXNoKHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGVJZCBvZiB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKSkge1xuICAgICAgICBhZGRTaGFwZShzaGFwZUlkKTtcbiAgICAgIH1cbiAgICAgIGxldCBvcGFjaXR5ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGUgb2Ygc2hhcGVzVG9DaGVjaykge1xuICAgICAgICBpZiAob3BhY2l0eSA9PT0gbnVsbCkge1xuICAgICAgICAgIG9wYWNpdHkgPSBzaGFwZS5vcGFjaXR5O1xuICAgICAgICB9IGVsc2UgaWYgKG9wYWNpdHkgIT09IHNoYXBlLm9wYWNpdHkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiBcIm1peGVkXCIgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wYWNpdHkgIT09IG51bGwpIHJldHVybiB7IHR5cGU6IFwic2hhcmVkXCIsIHZhbHVlOiBvcGFjaXR5IH07XG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6IFwic2hhcmVkXCIsIHZhbHVlOiB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5vcGFjaXR5Rm9yTmV4dFNoYXBlIH07XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgb3BhY2l0eSBmb3IgdGhlIG5leHQgc2hhcGVzLiBUaGlzIHdpbGwgZWZmZWN0IHN1YnNlcXVlbnRseSBjcmVhdGVkIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldE9wYWNpdHlGb3JOZXh0U2hhcGVzKDAuNSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBvcGFjaXR5IC0gVGhlIG9wYWNpdHkgdG8gc2V0LiBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSBpbmNsdXNpdmUuXG4gICAqIEBwYXJhbSBoaXN0b3J5T3B0aW9ucyAtIFRoZSBoaXN0b3J5IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ2UuXG4gICAqL1xuICBzZXRPcGFjaXR5Rm9yTmV4dFNoYXBlcyhvcGFjaXR5LCBoaXN0b3J5T3B0aW9ucykge1xuICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IG9wYWNpdHlGb3JOZXh0U2hhcGU6IG9wYWNpdHkgfSwgaGlzdG9yeU9wdGlvbnMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgb3BhY2l0eS4gVGhpcyB3aWxsIGVmZmVjdCBhbnkgc2VsZWN0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0T3BhY2l0eUZvclNlbGVjdGVkU2hhcGVzKDAuNSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBvcGFjaXR5IC0gVGhlIG9wYWNpdHkgdG8gc2V0LiBNdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSBpbmNsdXNpdmUuXG4gICAqL1xuICBzZXRPcGFjaXR5Rm9yU2VsZWN0ZWRTaGFwZXMob3BhY2l0eSkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlcygpO1xuICAgIGlmIChzZWxlY3RlZFNoYXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzaGFwZXNUb1VwZGF0ZSA9IFtdO1xuICAgICAgY29uc3QgYWRkU2hhcGVCeUlkID0gKHNoYXBlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZElkcyA9IHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoc2hhcGUpO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRJZCBvZiBjaGlsZElkcykge1xuICAgICAgICAgICAgYWRkU2hhcGVCeUlkKHRoaXMuZ2V0U2hhcGUoY2hpbGRJZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGFwZXNUb1VwZGF0ZS5wdXNoKHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3QgaWQgb2Ygc2VsZWN0ZWRTaGFwZXMpIHtcbiAgICAgICAgYWRkU2hhcGVCeUlkKGlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU2hhcGVzKFxuICAgICAgICBzaGFwZXNUb1VwZGF0ZS5tYXAoKHNoYXBlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBzaGFwZS5pZCxcbiAgICAgICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgICAgICBvcGFjaXR5XG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGEge0BsaW5rIEB0bGRyYXcvdGxzY2hlbWEjU3R5bGVQcm9wfSBmb3IgdGhlIG5leHQgc2hhcGVzLiBUaGlzIGNoYW5nZSB3aWxsIGJlIGFwcGxpZWQgdG8gc3Vic2VxdWVudGx5IGNyZWF0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0U3R5bGVGb3JOZXh0U2hhcGVzKERlZmF1bHRDb2xvclN0eWxlLCAncmVkJylcbiAgICogZWRpdG9yLnNldFN0eWxlRm9yTmV4dFNoYXBlcyhEZWZhdWx0Q29sb3JTdHlsZSwgJ3JlZCcsIHsgZXBoZW1lcmFsOiB0cnVlIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc3R5bGUgLSBUaGUgc3R5bGUgdG8gc2V0LlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgKiBAcGFyYW0gaGlzdG9yeU9wdGlvbnMgLSBUaGUgaGlzdG9yeSBvcHRpb25zIGZvciB0aGUgY2hhbmdlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRTdHlsZUZvck5leHRTaGFwZXMoc3R5bGUsIHZhbHVlLCBoaXN0b3J5T3B0aW9ucykge1xuICAgIGNvbnN0IHN0eWxlc0Zvck5leHRTaGFwZSA9IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLnN0eWxlc0Zvck5leHRTaGFwZTtcbiAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoXG4gICAgICB7IHN0eWxlc0Zvck5leHRTaGFwZTogeyAuLi5zdHlsZXNGb3JOZXh0U2hhcGUsIFtzdHlsZS5pZF06IHZhbHVlIH0gfSxcbiAgICAgIGhpc3RvcnlPcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBvZiBhIHtAbGluayBAdGxkcmF3L3Rsc2NoZW1hI1N0eWxlUHJvcH0uIFRoaXMgY2hhbmdlIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldFN0eWxlRm9yU2VsZWN0ZWRTaGFwZXMoRGVmYXVsdENvbG9yU3R5bGUsICdyZWQnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHN0eWxlIC0gVGhlIHN0eWxlIHRvIHNldC5cbiAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0U3R5bGVGb3JTZWxlY3RlZFNoYXBlcyhzdHlsZSwgdmFsdWUpIHtcbiAgICBjb25zdCBzZWxlY3RlZFNoYXBlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKTtcbiAgICBpZiAoc2VsZWN0ZWRTaGFwZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdXBkYXRlcyA9IFtdO1xuICAgICAgY29uc3QgYWRkU2hhcGVCeUlkID0gKHNoYXBlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZElkcyA9IHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoc2hhcGUuaWQpO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRJZCBvZiBjaGlsZElkcykge1xuICAgICAgICAgICAgYWRkU2hhcGVCeUlkKHRoaXMuZ2V0U2hhcGUoY2hpbGRJZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpO1xuICAgICAgICAgIGNvbnN0IHN0eWxlUHJvcEtleSA9IHRoaXMuc3R5bGVQcm9wc1tzaGFwZS50eXBlXS5nZXQoc3R5bGUpO1xuICAgICAgICAgIGlmIChzdHlsZVByb3BLZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlUGFydGlhbCA9IHtcbiAgICAgICAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICAgICAgICB0eXBlOiBzaGFwZS50eXBlLFxuICAgICAgICAgICAgICBwcm9wczogeyBbc3R5bGVQcm9wS2V5XTogdmFsdWUgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHVwZGF0ZXMucHVzaCh7XG4gICAgICAgICAgICAgIHV0aWwsXG4gICAgICAgICAgICAgIG9yaWdpbmFsU2hhcGU6IHNoYXBlLFxuICAgICAgICAgICAgICB1cGRhdGVQYXJ0aWFsOiBzaGFwZVBhcnRpYWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGUgb2Ygc2VsZWN0ZWRTaGFwZXMpIHtcbiAgICAgICAgYWRkU2hhcGVCeUlkKHNoYXBlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU2hhcGVzKHVwZGF0ZXMubWFwKCh7IHVwZGF0ZVBhcnRpYWwgfSkgPT4gdXBkYXRlUGFydGlhbCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXh0ZXJuYWwgYXNzZXQgaGFuZGxlci4gVGhpcyBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGVkaXRvciBuZWVkcyB0b1xuICAgKiBjcmVhdGUgYW4gYXNzZXQgZm9yIHNvbWUgZXh0ZXJuYWwgY29udGVudCwgbGlrZSBhbiBpbWFnZS92aWRlbyBmaWxlIG9yIGEgYm9va21hcmsgVVJMLiBGb3JcbiAgICogZXhhbXBsZSwgdGhlICdmaWxlJyB0eXBlIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgd2hlbiBhIHVzZXIgZHJvcHMgYW4gaW1hZ2Ugb250byB0aGUgY2FudmFzLlxuICAgKlxuICAgKiBUaGUgaGFuZGxlciBzaG91bGQgZXh0cmFjdCBhbnkgcmVsZXZhbnQgbWV0YWRhdGEgZm9yIHRoZSBhc3NldCwgdXBsb2FkIGl0IHRvIGJsb2Igc3RvcmFnZVxuICAgKiB1c2luZyB7QGxpbmsgRWRpdG9yLnVwbG9hZEFzc2V0fSBpZiBuZWVkZWQsIGFuZCByZXR1cm4gdGhlIGFzc2V0IHdpdGggdGhlIG1ldGFkYXRhICYgdXBsb2FkZWRcbiAgICogVVJMLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJFeHRlcm5hbEFzc2V0SGFuZGxlcignZmlsZScsIG15SGFuZGxlcilcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgZXh0ZXJuYWwgY29udGVudC5cbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1c2UgZm9yIHRoaXMgY29udGVudCB0eXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3RlckV4dGVybmFsQXNzZXRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgICB0aGlzLmV4dGVybmFsQXNzZXRDb250ZW50SGFuZGxlcnNbdHlwZV0gPSBoYW5kbGVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIHRlbXBvcmFyeSBwcmV2aWV3IG9mIGFuIGFzc2V0LiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2hvd2luZyBhIGdob3N0IGltYWdlIG9mXG4gICAqIHNvbWV0aGluZyB0aGF0IGlzIGJlaW5nIHVwbG9hZGVkLiBSZXRyaWV2ZSB0aGUgcGxhY2Vob2xkZXIgd2l0aFxuICAgKiB7QGxpbmsgRWRpdG9yLmdldFRlbXBvcmFyeUFzc2V0UHJldmlld30uIFBsYWNlaG9sZGVycyBsYXN0IGZvciAzIG1pbnV0ZXMgYnkgZGVmYXVsdCwgYnV0IHRoaXNcbiAgICogY2FuIGJlIGNvbmZpZ3VyZWQgdXNpbmdcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNyZWF0ZVRlbXBvcmFyeUFzc2V0UHJldmlldyhhc3NldElkLCBmaWxlKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0SWQgLSBUaGUgYXNzZXQncyBpZC5cbiAgICogQHBhcmFtIGZpbGUgLSBUaGUgcmF3IGZpbGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZVRlbXBvcmFyeUFzc2V0UHJldmlldyhhc3NldElkLCBmaWxlKSB7XG4gICAgaWYgKHRoaXMudGVtcG9yYXJ5QXNzZXRQcmV2aWV3Lmhhcyhhc3NldElkKSkge1xuICAgICAgcmV0dXJuIHRoaXMudGVtcG9yYXJ5QXNzZXRQcmV2aWV3LmdldChhc3NldElkKTtcbiAgICB9XG4gICAgY29uc3Qgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICB0aGlzLnRlbXBvcmFyeUFzc2V0UHJldmlldy5zZXQoYXNzZXRJZCwgb2JqZWN0VXJsKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudGVtcG9yYXJ5QXNzZXRQcmV2aWV3LmRlbGV0ZShhc3NldElkKTtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob2JqZWN0VXJsKTtcbiAgICB9LCB0aGlzLm9wdGlvbnMudGVtcG9yYXJ5QXNzZXRQcmV2aWV3TGlmZXRpbWVNcyk7XG4gICAgcmV0dXJuIG9iamVjdFVybDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRlbXBvcmFyeSBwcmV2aWV3IG9mIGFuIGFzc2V0LiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2hvd2luZyBhIGdob3N0XG4gICAqIGltYWdlIG9mIHNvbWV0aGluZyB0aGF0IGlzIGJlaW5nIHVwbG9hZGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0VGVtcG9yYXJ5QXNzZXRQcmV2aWV3KCdzb21lSWQnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0SWQgLSBUaGUgYXNzZXQncyBpZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0VGVtcG9yYXJ5QXNzZXRQcmV2aWV3KGFzc2V0SWQpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wb3JhcnlBc3NldFByZXZpZXcuZ2V0KGFzc2V0SWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gYXNzZXQgZm9yIGFuIGV4dGVybmFsIGFzc2V0IGNvbnRlbnQgdHlwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgYXNzZXQgPSBhd2FpdCBlZGl0b3IuZ2V0QXNzZXRGb3JFeHRlcm5hbENvbnRlbnQoeyB0eXBlOiAnZmlsZScsIGZpbGU6IG15RmlsZSB9KVxuICAgKiBjb25zdCBhc3NldCA9IGF3YWl0IGVkaXRvci5nZXRBc3NldEZvckV4dGVybmFsQ29udGVudCh7IHR5cGU6ICd1cmwnLCB1cmw6IG15VXJsIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaW5mbyAtIEluZm8gYWJvdXQgdGhlIGV4dGVybmFsIGNvbnRlbnQuXG4gICAqIEByZXR1cm5zIFRoZSBhc3NldC5cbiAgICovXG4gIGFzeW5jIGdldEFzc2V0Rm9yRXh0ZXJuYWxDb250ZW50KGluZm8pIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5leHRlcm5hbEFzc2V0Q29udGVudEhhbmRsZXJzW2luZm8udHlwZV0/LihpbmZvKTtcbiAgfVxuICBoYXNFeHRlcm5hbEFzc2V0SGFuZGxlcih0eXBlKSB7XG4gICAgcmV0dXJuICEhdGhpcy5leHRlcm5hbEFzc2V0Q29udGVudEhhbmRsZXJzW3R5cGVdO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBleHRlcm5hbCBjb250ZW50IGhhbmRsZXIuIFRoaXMgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBlZGl0b3IgcmVjZWl2ZXNcbiAgICogZXh0ZXJuYWwgY29udGVudCBvZiB0aGUgcHJvdmlkZWQgdHlwZS4gRm9yIGV4YW1wbGUsIHRoZSAnaW1hZ2UnIHR5cGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZFxuICAgKiB3aGVuIGEgdXNlciBkcm9wcyBhbiBpbWFnZSBvbnRvIHRoZSBjYW52YXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5yZWdpc3RlckV4dGVybmFsQ29udGVudEhhbmRsZXIoJ3RleHQnLCBteUhhbmRsZXIpXG4gICAqIGBgYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJFeHRlcm5hbENvbnRlbnRIYW5kbGVyPCdlbWJlZCcsIE15RW1iZWRUeXBlPignZW1iZWQnLCBteUhhbmRsZXIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIGV4dGVybmFsIGNvbnRlbnQuXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gdXNlIGZvciB0aGlzIGNvbnRlbnQgdHlwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVnaXN0ZXJFeHRlcm5hbENvbnRlbnRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgICB0aGlzLmV4dGVybmFsQ29udGVudEhhbmRsZXJzW3R5cGVdID0gaGFuZGxlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGV4dGVybmFsIGNvbnRlbnQsIHN1Y2ggYXMgZmlsZXMsIHVybHMsIGVtYmVkcywgb3IgcGxhaW4gdGV4dCB3aGljaCBoYXMgYmVlbiBwdXQgaW50byB0aGUgYXBwLCBmb3IgZXhhbXBsZSBieSBwYXN0aW5nIGV4dGVybmFsIHRleHQgb3IgZHJvcHBpbmcgZXh0ZXJuYWwgaW1hZ2VzIG9udG8gY2FudmFzLlxuICAgKlxuICAgKiBAcGFyYW0gaW5mbyAtIEluZm8gYWJvdXQgdGhlIGV4dGVybmFsIGNvbnRlbnQuXG4gICAqL1xuICBhc3luYyBwdXRFeHRlcm5hbENvbnRlbnQoaW5mbykge1xuICAgIHJldHVybiB0aGlzLmV4dGVybmFsQ29udGVudEhhbmRsZXJzW2luZm8udHlwZV0/LihpbmZvKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGNvbnRlbnQgdGhhdCBjYW4gYmUgZXhwb3J0ZWQgZm9yIHRoZSBnaXZlbiBzaGFwZSBpZHMuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGdldCBjb250ZW50IGZvci5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGV4cG9ydGVkIGNvbnRlbnQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldENvbnRlbnRGcm9tQ3VycmVudFBhZ2Uoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICghaWRzKSByZXR1cm47XG4gICAgaWYgKGlkcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBzaGFwZUlkcyA9IHRoaXMuZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKGlkcyk7XG4gICAgcmV0dXJuIHdpdGhJc29sYXRlZFNoYXBlcyh0aGlzLCBzaGFwZUlkcywgKGJpbmRpbmdJZHNUb0tlZXApID0+IHtcbiAgICAgIGNvbnN0IGJpbmRpbmdzID0gW107XG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGJpbmRpbmdJZHNUb0tlZXApIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuZ2V0QmluZGluZyhpZCk7XG4gICAgICAgIGlmICghYmluZGluZykgY29udGludWU7XG4gICAgICAgIGJpbmRpbmdzLnB1c2goYmluZGluZyk7XG4gICAgICB9XG4gICAgICBjb25zdCByb290U2hhcGVJZHMgPSBbXTtcbiAgICAgIGNvbnN0IHNoYXBlczIgPSBbXTtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGVJZCBvZiBzaGFwZUlkcykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUoc2hhcGVJZCk7XG4gICAgICAgIGlmICghc2hhcGUpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBpc1Jvb3RTaGFwZSA9ICFzaGFwZUlkcy5oYXMoc2hhcGUucGFyZW50SWQpO1xuICAgICAgICBpZiAoaXNSb290U2hhcGUpIHtcbiAgICAgICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUuaWQpO1xuICAgICAgICAgIGNvbnN0IHBhZ2VQb2ludCA9IHBhZ2VUcmFuc2Zvcm0ucG9pbnQoKTtcbiAgICAgICAgICBzaGFwZXMyLnB1c2goe1xuICAgICAgICAgICAgLi4uc2hhcGUsXG4gICAgICAgICAgICB4OiBwYWdlUG9pbnQueCxcbiAgICAgICAgICAgIHk6IHBhZ2VQb2ludC55LFxuICAgICAgICAgICAgcm90YXRpb246IHBhZ2VUcmFuc2Zvcm0ucm90YXRpb24oKSxcbiAgICAgICAgICAgIHBhcmVudElkOiB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJvb3RTaGFwZUlkcy5wdXNoKHNoYXBlLmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGFwZXMyLnB1c2goc2hhcGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBhc3NldHMgPSBbXTtcbiAgICAgIGNvbnN0IHNlZW5Bc3NldElkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGNvbnN0IHNoYXBlIG9mIHNoYXBlczIpIHtcbiAgICAgICAgaWYgKCEoXCJhc3NldElkXCIgaW4gc2hhcGUucHJvcHMpKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgYXNzZXRJZCA9IHNoYXBlLnByb3BzLmFzc2V0SWQ7XG4gICAgICAgIGlmICghYXNzZXRJZCB8fCBzZWVuQXNzZXRJZHMuaGFzKGFzc2V0SWQpKSBjb250aW51ZTtcbiAgICAgICAgc2VlbkFzc2V0SWRzLmFkZChhc3NldElkKTtcbiAgICAgICAgY29uc3QgYXNzZXQgPSB0aGlzLmdldEFzc2V0KGFzc2V0SWQpO1xuICAgICAgICBpZiAoIWFzc2V0KSBjb250aW51ZTtcbiAgICAgICAgYXNzZXRzLnB1c2goYXNzZXQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NoZW1hOiB0aGlzLnN0b3JlLnNjaGVtYS5zZXJpYWxpemUoKSxcbiAgICAgICAgc2hhcGVzOiBzaGFwZXMyLFxuICAgICAgICByb290U2hhcGVJZHMsXG4gICAgICAgIGJpbmRpbmdzLFxuICAgICAgICBhc3NldHNcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgcmVzb2x2ZUFzc2V0c0luQ29udGVudChjb250ZW50KSB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gdm9pZCAwO1xuICAgIGNvbnN0IGFzc2V0cyA9IFtdO1xuICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChcbiAgICAgIGNvbnRlbnQuYXNzZXRzLm1hcChhc3luYyAoYXNzZXQpID0+IHtcbiAgICAgICAgaWYgKChhc3NldC50eXBlID09PSBcImltYWdlXCIgfHwgYXNzZXQudHlwZSA9PT0gXCJ2aWRlb1wiKSAmJiAhYXNzZXQucHJvcHMuc3JjPy5zdGFydHNXaXRoKFwiZGF0YTppbWFnZVwiKSAmJiAhYXNzZXQucHJvcHMuc3JjPy5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICAgIGNvbnN0IGFzc2V0V2l0aERhdGFVcmwgPSBzdHJ1Y3R1cmVkQ2xvbmUoYXNzZXQpO1xuICAgICAgICAgIGNvbnN0IG9iamVjdFVybCA9IGF3YWl0IHRoaXMuc3RvcmUucHJvcHMuYXNzZXRzLnJlc29sdmUoYXNzZXQsIHtcbiAgICAgICAgICAgIHNjcmVlblNjYWxlOiAxLFxuICAgICAgICAgICAgc3RlcHBlZFNjcmVlblNjYWxlOiAxLFxuICAgICAgICAgICAgZHByOiAxLFxuICAgICAgICAgICAgbmV0d29ya0VmZmVjdGl2ZVR5cGU6IG51bGwsXG4gICAgICAgICAgICBzaG91bGRSZXNvbHZlVG9PcmlnaW5hbDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFzc2V0V2l0aERhdGFVcmwucHJvcHMuc3JjID0gYXdhaXQgRmlsZUhlbHBlcnMuYmxvYlRvRGF0YVVybChcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKG9iamVjdFVybCkudGhlbigocikgPT4gci5ibG9iKCkpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhc3NldHMucHVzaChhc3NldFdpdGhEYXRhVXJsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc3NldHMucHVzaChhc3NldCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb250ZW50LmFzc2V0cyA9IGFzc2V0cztcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICAvKipcbiAgICogUGxhY2UgY29udGVudCBpbnRvIHRoZSBlZGl0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQuXG4gICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgcGxhY2luZyB0aGUgY29udGVudC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcHV0Q29udGVudE9udG9DdXJyZW50UGFnZShjb250ZW50LCBvcHRzID0ge30pIHtcbiAgICBpZiAodGhpcy5nZXRJc1JlYWRvbmx5KCkpIHJldHVybiB0aGlzO1xuICAgIGlmICghY29udGVudC5zY2hlbWEpIHtcbiAgICAgIHRocm93IEVycm9yKFwiQ291bGQgbm90IHB1dCBjb250ZW50OlxcbmNvbnRlbnQgaXMgbWlzc2luZyBhIHNjaGVtYS5cIik7XG4gICAgfVxuICAgIGNvbnN0IHsgc2VsZWN0ID0gZmFsc2UsIHByZXNlcnZlSWRzID0gZmFsc2UsIHByZXNlcnZlUG9zaXRpb24gPSBmYWxzZSB9ID0gb3B0cztcbiAgICBsZXQgeyBwb2ludCA9IHZvaWQgMCB9ID0gb3B0cztcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgY29uc3QgeyByb290U2hhcGVJZHMgfSA9IGNvbnRlbnQ7XG4gICAgY29uc3QgYXNzZXRzID0gW107XG4gICAgY29uc3Qgc2hhcGVzID0gW107XG4gICAgY29uc3QgYmluZGluZ3MgPSBbXTtcbiAgICBjb25zdCBzdG9yZSA9IHtcbiAgICAgIHN0b3JlOiB7XG4gICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhjb250ZW50LmFzc2V0cy5tYXAoKGFzc2V0KSA9PiBbYXNzZXQuaWQsIGFzc2V0XSkpLFxuICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoY29udGVudC5zaGFwZXMubWFwKChzaGFwZSkgPT4gW3NoYXBlLmlkLCBzaGFwZV0pKSxcbiAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgIGNvbnRlbnQuYmluZGluZ3M/Lm1hcCgoYmluZGluZ3MyKSA9PiBbYmluZGluZ3MyLmlkLCBiaW5kaW5nczJdKSA/PyBbXVxuICAgICAgICApXG4gICAgICB9LFxuICAgICAgc2NoZW1hOiBjb250ZW50LnNjaGVtYVxuICAgIH07XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zdG9yZS5zY2hlbWEubWlncmF0ZVN0b3JlU25hcHNob3Qoc3RvcmUpO1xuICAgIGlmIChyZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBwdXQgY29udGVudDogY291bGQgbm90IG1pZ3JhdGUgY29udGVudFwiKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgT2JqZWN0LnZhbHVlcyhyZXN1bHQudmFsdWUpKSB7XG4gICAgICBzd2l0Y2ggKHJlY29yZC50eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFwiYXNzZXRcIjoge1xuICAgICAgICAgIGFzc2V0cy5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInNoYXBlXCI6IHtcbiAgICAgICAgICBzaGFwZXMucHVzaChyZWNvcmQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJiaW5kaW5nXCI6IHtcbiAgICAgICAgICBiaW5kaW5ncy5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2hhcGVJZE1hcCA9IG5ldyBNYXAoXG4gICAgICBwcmVzZXJ2ZUlkcyA/IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIHNoYXBlLmlkXSkgOiBzaGFwZXMubWFwKChzaGFwZSkgPT4gW3NoYXBlLmlkLCBjcmVhdGVTaGFwZUlkKCldKVxuICAgICk7XG4gICAgY29uc3QgYmluZGluZ0lkTWFwID0gbmV3IE1hcChcbiAgICAgIHByZXNlcnZlSWRzID8gYmluZGluZ3MubWFwKChiaW5kaW5nKSA9PiBbYmluZGluZy5pZCwgYmluZGluZy5pZF0pIDogYmluZGluZ3MubWFwKChiaW5kaW5nKSA9PiBbYmluZGluZy5pZCwgY3JlYXRlQmluZGluZ0lkKCldKVxuICAgICk7XG4gICAgbGV0IHBhc3RlUGFyZW50SWQgPSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICBsZXQgbG93ZXN0RGVwdGggPSBJbmZpbml0eTtcbiAgICBsZXQgbG93ZXN0QW5jZXN0b3JzID0gW107XG4gICAgZm9yIChjb25zdCBzaGFwZSBvZiB0aGlzLmdldFNlbGVjdGVkU2hhcGVzKCkpIHtcbiAgICAgIGlmIChsb3dlc3REZXB0aCA9PT0gMCkgYnJlYWs7XG4gICAgICBjb25zdCBpc0ZyYW1lID0gdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImZyYW1lXCIpO1xuICAgICAgY29uc3QgYW5jZXN0b3JzID0gdGhpcy5nZXRTaGFwZUFuY2VzdG9ycyhzaGFwZSk7XG4gICAgICBpZiAoaXNGcmFtZSkgYW5jZXN0b3JzLnB1c2goc2hhcGUpO1xuICAgICAgY29uc3QgZGVwdGggPSBpc0ZyYW1lID8gYW5jZXN0b3JzLmxlbmd0aCArIDEgOiBhbmNlc3RvcnMubGVuZ3RoO1xuICAgICAgaWYgKGRlcHRoIDwgbG93ZXN0RGVwdGgpIHtcbiAgICAgICAgbG93ZXN0RGVwdGggPSBkZXB0aDtcbiAgICAgICAgbG93ZXN0QW5jZXN0b3JzID0gYW5jZXN0b3JzO1xuICAgICAgICBwYXN0ZVBhcmVudElkID0gaXNGcmFtZSA/IHNoYXBlLmlkIDogc2hhcGUucGFyZW50SWQ7XG4gICAgICB9IGVsc2UgaWYgKGRlcHRoID09PSBsb3dlc3REZXB0aCkge1xuICAgICAgICBpZiAobG93ZXN0QW5jZXN0b3JzLmxlbmd0aCAhPT0gYW5jZXN0b3JzLmxlbmd0aCkge1xuICAgICAgICAgIHRocm93IEVycm9yKGBBbmNlc3RvcnM6ICR7bG93ZXN0QW5jZXN0b3JzLmxlbmd0aH0gIT09ICR7YW5jZXN0b3JzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG93ZXN0QW5jZXN0b3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHBhc3RlUGFyZW50SWQgPSBjdXJyZW50UGFnZUlkO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhc3RlUGFyZW50SWQgPSBjdXJyZW50UGFnZUlkO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG93ZXN0QW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYW5jZXN0b3JzW2ldICE9PSBsb3dlc3RBbmNlc3RvcnNbaV0pIGJyZWFrO1xuICAgICAgICAgICAgcGFzdGVQYXJlbnRJZCA9IGFuY2VzdG9yc1tpXS5pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGlzRHVwbGljYXRpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWlzUGFnZUlkKHBhc3RlUGFyZW50SWQpKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlKHBhc3RlUGFyZW50SWQpO1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCkuaW5jbHVkZXModGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMocGFyZW50KSkpIHtcbiAgICAgICAgICBwYXN0ZVBhcmVudElkID0gY3VycmVudFBhZ2VJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocm9vdFNoYXBlSWRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3Qgcm9vdFNoYXBlID0gc2hhcGVzLmZpbmQoKHMpID0+IHMuaWQgPT09IHJvb3RTaGFwZUlkc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKHBhcmVudCwgXCJmcmFtZVwiKSAmJiB0aGlzLmlzU2hhcGVPZlR5cGUocm9vdFNoYXBlLCBcImZyYW1lXCIpICYmIHJvb3RTaGFwZS5wcm9wcy53ID09PSBwYXJlbnQ/LnByb3BzLncgJiYgcm9vdFNoYXBlLnByb3BzLmggPT09IHBhcmVudD8ucHJvcHMuaCkge1xuICAgICAgICAgICAgICBpc0R1cGxpY2F0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhc3RlUGFyZW50SWQgPSBjdXJyZW50UGFnZUlkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzRHVwbGljYXRpbmcpIHtcbiAgICAgIGlzRHVwbGljYXRpbmcgPSBzaGFwZUlkTWFwLmhhcyhwYXN0ZVBhcmVudElkKTtcbiAgICB9XG4gICAgaWYgKGlzRHVwbGljYXRpbmcpIHtcbiAgICAgIHBhc3RlUGFyZW50SWQgPSB0aGlzLmdldFNoYXBlKHBhc3RlUGFyZW50SWQpLnBhcmVudElkO1xuICAgIH1cbiAgICBsZXQgaW5kZXggPSB0aGlzLmdldEhpZ2hlc3RJbmRleEZvclBhcmVudChwYXN0ZVBhcmVudElkKTtcbiAgICBjb25zdCByb290U2hhcGVzID0gW107XG4gICAgY29uc3QgbmV3U2hhcGVzID0gc2hhcGVzLm1hcCgob2xkU2hhcGUpID0+IHtcbiAgICAgIGNvbnN0IG5ld0lkID0gc2hhcGVJZE1hcC5nZXQob2xkU2hhcGUuaWQpO1xuICAgICAgY29uc3QgbmV3U2hhcGUgPSB7IC4uLm9sZFNoYXBlLCBpZDogbmV3SWQgfTtcbiAgICAgIGlmIChyb290U2hhcGVJZHMuaW5jbHVkZXMob2xkU2hhcGUuaWQpKSB7XG4gICAgICAgIG5ld1NoYXBlLnBhcmVudElkID0gY3VycmVudFBhZ2VJZDtcbiAgICAgICAgcm9vdFNoYXBlcy5wdXNoKG5ld1NoYXBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaGFwZUlkTWFwLmhhcyhuZXdTaGFwZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgbmV3U2hhcGUucGFyZW50SWQgPSBzaGFwZUlkTWFwLmdldChvbGRTaGFwZS5wYXJlbnRJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290U2hhcGVJZHMucHVzaChuZXdTaGFwZS5pZCk7XG4gICAgICAgIG5ld1NoYXBlLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGluZGV4ID0gZ2V0SW5kZXhBYm92ZShpbmRleCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3U2hhcGU7XG4gICAgfSk7XG4gICAgaWYgKG5ld1NoYXBlcy5sZW5ndGggKyB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKS5zaXplID4gdGhpcy5vcHRpb25zLm1heFNoYXBlc1BlclBhZ2UpIHtcbiAgICAgIGFsZXJ0TWF4U2hhcGVzKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IG5ld0JpbmRpbmdzID0gYmluZGluZ3MubWFwKFxuICAgICAgKG9sZEJpbmRpbmcpID0+ICh7XG4gICAgICAgIC4uLm9sZEJpbmRpbmcsXG4gICAgICAgIGlkOiBhc3NlcnRFeGlzdHMoYmluZGluZ0lkTWFwLmdldChvbGRCaW5kaW5nLmlkKSksXG4gICAgICAgIGZyb21JZDogYXNzZXJ0RXhpc3RzKHNoYXBlSWRNYXAuZ2V0KG9sZEJpbmRpbmcuZnJvbUlkKSksXG4gICAgICAgIHRvSWQ6IGFzc2VydEV4aXN0cyhzaGFwZUlkTWFwLmdldChvbGRCaW5kaW5nLnRvSWQpKVxuICAgICAgfSlcbiAgICApO1xuICAgIGNvbnN0IGFzc2V0c1RvQ3JlYXRlID0gW107XG4gICAgY29uc3QgYXNzZXRzVG9VcGRhdGUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIGFzc2V0cykge1xuICAgICAgaWYgKHRoaXMuc3RvcmUuaGFzKGFzc2V0LmlkKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICgoYXNzZXQudHlwZSA9PT0gXCJpbWFnZVwiIHx8IGFzc2V0LnR5cGUgPT09IFwidmlkZW9cIikgJiYgYXNzZXQucHJvcHMuc3JjPy5zdGFydHNXaXRoKFwiZGF0YTppbWFnZVwiKSkge1xuICAgICAgICBhc3NldHNUb1VwZGF0ZS5wdXNoKHN0cnVjdHVyZWRDbG9uZShhc3NldCkpO1xuICAgICAgICBhc3NldC5wcm9wcy5zcmMgPSBudWxsO1xuICAgICAgfVxuICAgICAgYXNzZXRzVG9DcmVhdGUucHVzaChhc3NldCk7XG4gICAgfVxuICAgIFByb21pc2UuYWxsU2V0dGxlZChcbiAgICAgIGFzc2V0c1RvVXBkYXRlLm1hcChhc3luYyAoYXNzZXQpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGRhdGFVcmxUb0ZpbGUoXG4gICAgICAgICAgYXNzZXQucHJvcHMuc3JjLFxuICAgICAgICAgIGFzc2V0LnByb3BzLm5hbWUsXG4gICAgICAgICAgYXNzZXQucHJvcHMubWltZVR5cGUgPz8gXCJpbWFnZS9wbmdcIlxuICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdBc3NldCA9IGF3YWl0IHRoaXMuZ2V0QXNzZXRGb3JFeHRlcm5hbENvbnRlbnQoe1xuICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgYXNzZXRJZDogYXNzZXQuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghbmV3QXNzZXQpIHtcbiAgICAgICAgICB0aGlzLmRlbGV0ZUFzc2V0cyhbYXNzZXQuaWRdKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVBc3NldHMoW3sgLi4ubmV3QXNzZXQsIGlkOiBhc3NldC5pZCB9XSk7XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgaWYgKGFzc2V0c1RvQ3JlYXRlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jcmVhdGVBc3NldHMoYXNzZXRzVG9DcmVhdGUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jcmVhdGVTaGFwZXMobmV3U2hhcGVzKTtcbiAgICAgIHRoaXMuY3JlYXRlQmluZGluZ3MobmV3QmluZGluZ3MpO1xuICAgICAgaWYgKHNlbGVjdCkge1xuICAgICAgICB0aGlzLnNlbGVjdCguLi5yb290U2hhcGVzLm1hcCgocykgPT4gcy5pZCkpO1xuICAgICAgfVxuICAgICAgaWYgKHBhc3RlUGFyZW50SWQgIT09IGN1cnJlbnRQYWdlSWQpIHtcbiAgICAgICAgdGhpcy5yZXBhcmVudFNoYXBlcyhcbiAgICAgICAgICByb290U2hhcGVzLm1hcCgocykgPT4gcy5pZCksXG4gICAgICAgICAgcGFzdGVQYXJlbnRJZFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3Q3JlYXRlZFNoYXBlcyA9IG5ld1NoYXBlcy5tYXAoKHMpID0+IHRoaXMuZ2V0U2hhcGUocy5pZCkpO1xuICAgICAgY29uc3QgYm91bmRzID0gQm94LkNvbW1vbihuZXdDcmVhdGVkU2hhcGVzLm1hcCgocykgPT4gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMocykpKTtcbiAgICAgIGlmIChwb2ludCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlmICghaXNQYWdlSWQocGFzdGVQYXJlbnRJZCkpIHtcbiAgICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFzdGVQYXJlbnRJZCk7XG4gICAgICAgICAgcG9pbnQgPSBNYXQuYXBwbHlUb1BvaW50KFxuICAgICAgICAgICAgdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLFxuICAgICAgICAgICAgdGhpcy5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKS5ib3VuZHMuY2VudGVyXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2aWV3cG9ydFBhZ2VCb3VuZHMgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgICAgICAgIGlmIChwcmVzZXJ2ZVBvc2l0aW9uIHx8IHZpZXdwb3J0UGFnZUJvdW5kcy5pbmNsdWRlcyhCb3guRnJvbShib3VuZHMpKSkge1xuICAgICAgICAgICAgcG9pbnQgPSBib3VuZHMuY2VudGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb2ludCA9IHZpZXdwb3J0UGFnZUJvdW5kcy5jZW50ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocm9vdFNoYXBlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3Qgb25seVJvb3QgPSByb290U2hhcGVzWzBdO1xuICAgICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKG9ubHlSb290LCBcImZyYW1lXCIpKSB7XG4gICAgICAgICAgd2hpbGUgKHRoaXMuZ2V0U2hhcGVzQXRQb2ludChwb2ludCkuc29tZShcbiAgICAgICAgICAgIChzaGFwZSkgPT4gdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImZyYW1lXCIpICYmIHNoYXBlLnByb3BzLncgPT09IG9ubHlSb290LnByb3BzLncgJiYgc2hhcGUucHJvcHMuaCA9PT0gb25seVJvb3QucHJvcHMuaFxuICAgICAgICAgICkpIHtcbiAgICAgICAgICAgIHBvaW50LnggKz0gYm91bmRzLncgKyAxNjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhZ2VDZW50ZXIgPSBCb3guQ29tbW9uKFxuICAgICAgICBjb21wYWN0KHJvb3RTaGFwZXMubWFwKCh7IGlkIH0pID0+IHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKSkpXG4gICAgICApLmNlbnRlcjtcbiAgICAgIGNvbnN0IG9mZnNldCA9IFZlYy5TdWIocG9pbnQsIHBhZ2VDZW50ZXIpO1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoXG4gICAgICAgIHJvb3RTaGFwZXMubWFwKCh7IGlkIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgICAgICAgY29uc3QgbG9jYWxSb3RhdGlvbiA9IHRoaXMuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oaWQpLmRlY29tcG9zZSgpLnJvdGF0aW9uO1xuICAgICAgICAgIGNvbnN0IGxvY2FsRGVsdGEgPSBWZWMuUm90KG9mZnNldCwgLWxvY2FsUm90YXRpb24pO1xuICAgICAgICAgIHJldHVybiB7IGlkOiBzLmlkLCB0eXBlOiBzLnR5cGUsIHg6IHMueCArIGxvY2FsRGVsdGEueCwgeTogcy55ICsgbG9jYWxEZWx0YS55IH07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZXhwb3J0ZWQgU1ZHIGVsZW1lbnQgb2YgdGhlIGdpdmVuIHNoYXBlcy5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gZXhwb3J0LlxuICAgKiBAcGFyYW0gb3B0cyAtIE9wdGlvbnMgZm9yIHRoZSBleHBvcnQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBTVkcgZWxlbWVudC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgZ2V0U3ZnRWxlbWVudChzaGFwZXMsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gZXhwb3J0VG9TdmcodGhpcywgaWRzLCBvcHRzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGV4cG9ydGVkIFNWRyBzdHJpbmcgb2YgdGhlIGdpdmVuIHNoYXBlcy5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gZXhwb3J0LlxuICAgKiBAcGFyYW0gb3B0cyAtIE9wdGlvbnMgZm9yIHRoZSBleHBvcnQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBTVkcgZWxlbWVudC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgZ2V0U3ZnU3RyaW5nKHNoYXBlcywgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRTdmdFbGVtZW50KHNoYXBlcywgb3B0cyk7XG4gICAgaWYgKCFyZXN1bHQpIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN2Zzogc2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhyZXN1bHQuc3ZnKSxcbiAgICAgIHdpZHRoOiByZXN1bHQud2lkdGgsXG4gICAgICBoZWlnaHQ6IHJlc3VsdC5oZWlnaHRcbiAgICB9O1xuICB9XG4gIC8qKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIEVkaXRvci5nZXRTdmdTdHJpbmd9IG9yIHtAbGluayBFZGl0b3IuZ2V0U3ZnRWxlbWVudH0gaW5zdGVhZC4gKi9cbiAgYXN5bmMgZ2V0U3ZnKHNoYXBlcywgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRTdmdFbGVtZW50KHNoYXBlcywgb3B0cyk7XG4gICAgaWYgKCFyZXN1bHQpIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHJlc3VsdC5zdmc7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgaW5wdXQgcG9pbnRzIGZyb20gYSBwb2ludGVyLCBwaW5jaCwgb3Igd2hlZWwgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSBpbmZvIC0gVGhlIGV2ZW50IGluZm8uXG4gICAqL1xuICBfdXBkYXRlSW5wdXRzRnJvbUV2ZW50KGluZm8pIHtcbiAgICBjb25zdCB7XG4gICAgICBwb2ludGVyVmVsb2NpdHksXG4gICAgICBwcmV2aW91c1NjcmVlblBvaW50LFxuICAgICAgcHJldmlvdXNQYWdlUG9pbnQsXG4gICAgICBjdXJyZW50U2NyZWVuUG9pbnQsXG4gICAgICBjdXJyZW50UGFnZVBvaW50XG4gICAgfSA9IHRoaXMuaW5wdXRzO1xuICAgIGNvbnN0IHsgc2NyZWVuQm91bmRzIH0gPSB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMSU5TVEFOQ0VfSUQpO1xuICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdW5zYWZlX193aXRob3V0Q2FwdHVyZSgoKSA9PiB0aGlzLmdldENhbWVyYSgpKTtcbiAgICBjb25zdCBzeCA9IGluZm8ucG9pbnQueCAtIHNjcmVlbkJvdW5kcy54O1xuICAgIGNvbnN0IHN5ID0gaW5mby5wb2ludC55IC0gc2NyZWVuQm91bmRzLnk7XG4gICAgY29uc3Qgc3ogPSBpbmZvLnBvaW50LnogPz8gMC41O1xuICAgIHByZXZpb3VzU2NyZWVuUG9pbnQuc2V0VG8oY3VycmVudFNjcmVlblBvaW50KTtcbiAgICBwcmV2aW91c1BhZ2VQb2ludC5zZXRUbyhjdXJyZW50UGFnZVBvaW50KTtcbiAgICBjdXJyZW50U2NyZWVuUG9pbnQuc2V0KHN4LCBzeSk7XG4gICAgY29uc3QgbnggPSBzeCAvIGN6IC0gY3g7XG4gICAgY29uc3QgbnkgPSBzeSAvIGN6IC0gY3k7XG4gICAgaWYgKGlzRmluaXRlKG54KSAmJiBpc0Zpbml0ZShueSkpIHtcbiAgICAgIGN1cnJlbnRQYWdlUG9pbnQuc2V0KG54LCBueSwgc3opO1xuICAgIH1cbiAgICB0aGlzLmlucHV0cy5pc1BlbiA9IGluZm8udHlwZSA9PT0gXCJwb2ludGVyXCIgJiYgaW5mby5pc1BlbjtcbiAgICBpZiAoaW5mby5uYW1lID09PSBcInBvaW50ZXJfZG93blwiIHx8IHRoaXMuaW5wdXRzLmlzUGluY2hpbmcpIHtcbiAgICAgIHBvaW50ZXJWZWxvY2l0eS5zZXQoMCwgMCk7XG4gICAgICB0aGlzLmlucHV0cy5vcmlnaW5TY3JlZW5Qb2ludC5zZXRUbyhjdXJyZW50U2NyZWVuUG9pbnQpO1xuICAgICAgdGhpcy5pbnB1dHMub3JpZ2luUGFnZVBvaW50LnNldFRvKGN1cnJlbnRQYWdlUG9pbnQpO1xuICAgIH1cbiAgICB0aGlzLnJ1bihcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zdG9yZS5wdXQoW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiBUTFBPSU5URVJfSUQsXG4gICAgICAgICAgICB0eXBlTmFtZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICB4OiBjdXJyZW50UGFnZVBvaW50LngsXG4gICAgICAgICAgICB5OiBjdXJyZW50UGFnZVBvaW50LnksXG4gICAgICAgICAgICBsYXN0QWN0aXZpdHlUaW1lc3RhbXA6IChcbiAgICAgICAgICAgICAgLy8gSWYgb3VyIHBvaW50ZXIgbW92ZWQgb25seSBiZWNhdXNlIHdlJ3JlIGZvbGxvd2luZyBzb21lIG90aGVyIHVzZXIsIHRoZW4gZG9uJ3RcbiAgICAgICAgICAgICAgLy8gdXBkYXRlIG91ciBsYXN0IGFjdGl2aXR5IHRpbWVzdGFtcDsgb3RoZXJ3aXNlLCB1cGRhdGUgaXQgdG8gdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgICAgICAgICAgICAoaW5mby50eXBlID09PSBcInBvaW50ZXJcIiAmJiBpbmZvLnBvaW50ZXJJZCA9PT0gSU5URVJOQUxfUE9JTlRFUl9JRFMuQ0FNRVJBX01PVkUgPyB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMUE9JTlRFUl9JRCk/Lmxhc3RBY3Rpdml0eVRpbWVzdGFtcCA/PyB0aGlzLl90aWNrTWFuYWdlci5ub3cgOiB0aGlzLl90aWNrTWFuYWdlci5ub3cpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbWV0YToge31cbiAgICAgICAgICB9XG4gICAgICAgIF0pO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeTogXCJpZ25vcmVcIiB9XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2ggYSBjYW5jZWwgZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5jYW5jZWwoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBcIm1pc2NcIiwgbmFtZTogXCJjYW5jZWxcIiB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2ggYW4gaW50ZXJydXB0IGV2ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuaW50ZXJydXB0KClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGludGVycnVwdCgpIHtcbiAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJtaXNjXCIsIG5hbWU6IFwiaW50ZXJydXB0XCIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgY29tcGxldGUgZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5jb21wbGV0ZSgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJtaXNjXCIsIG5hbWU6IFwiY29tcGxldGVcIiB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUHV0cyB0aGUgZWRpdG9yIGludG8gZm9jdXNlZCBtb2RlLlxuICAgKlxuICAgKiBUaGlzIG1ha2VzIHRoZSBlZGl0b3IgZWxpZ2libGUgdG8gcmVjZWl2ZSBrZXlib2FyZCBldmVudHMgYW5kIHNvbWUgcG9pbnRlciBldmVudHMgKG1vdmUsIHdoZWVsKS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmZvY3VzKClcbiAgICogYGBgXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhpcyBhbHNvIGRpc3BhdGNoZXMgYSAnZm9jdXMnIGV2ZW50IHRvIHRoZSBjb250YWluZXIgZWxlbWVudC4gVG8gcHJldmVudCB0aGlzLCBwYXNzIGBmb2N1c0NvbnRhaW5lcjogZmFsc2VgLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZm9jdXMoeyBmb2N1c0NvbnRhaW5lcjogZmFsc2UgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZvY3VzKHsgZm9jdXNDb250YWluZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGlmICh0aGlzLmdldElzRm9jdXNlZCgpKSByZXR1cm4gdGhpcztcbiAgICBpZiAoZm9jdXNDb250YWluZXIpIHRoaXMuZm9jdXNNYW5hZ2VyLmZvY3VzKCk7XG4gICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNGb2N1c2VkOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTd2l0Y2hlcyBvZmYgdGhlIGVkaXRvcidzIGZvY3VzZWQgbW9kZS5cbiAgICpcbiAgICogVGhpcyBtYWtlcyB0aGUgZWRpdG9yIGlnbm9yZSBrZXlib2FyZCBldmVudHMgYW5kIHNvbWUgcG9pbnRlciBldmVudHMgKG1vdmUsIHdoZWVsKS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmJsdXIoKVxuICAgKiBgYGBcbiAgICogQnkgZGVmYXVsdCB0aGlzIGFsc28gZGlzcGF0Y2hlcyBhICdibHVyJyBldmVudCB0byB0aGUgY29udGFpbmVyIGVsZW1lbnQuIFRvIHByZXZlbnQgdGhpcywgcGFzcyBgYmx1ckNvbnRhaW5lcjogZmFsc2VgLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuYmx1cih7IGJsdXJDb250YWluZXI6IGZhbHNlIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBibHVyKHsgYmx1ckNvbnRhaW5lciA9IHRydWUgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmdldElzRm9jdXNlZCgpKSByZXR1cm4gdGhpcztcbiAgICBpZiAoYmx1ckNvbnRhaW5lcikge1xuICAgICAgdGhpcy5mb2N1c01hbmFnZXIuYmx1cigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGlzRm9jdXNlZDogZmFsc2UgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0SXNGb2N1c2VkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc0ZvY3VzZWQ7XG4gIH1cbiAgZ2V0SXNSZWFkb25seSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuaXNSZWFkb25seTtcbiAgfVxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyBhIHNuYXBzaG90IG9mIHRoZSBzdG9yZSdzIFVJIGFuZCBkb2N1bWVudCBzdGF0ZVxuICAgKi9cbiAgZ2V0U25hcHNob3QoKSB7XG4gICAgcmV0dXJuIGdldFNuYXBzaG90KHRoaXMuc3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBMb2FkcyBhIHNuYXBzaG90IGludG8gdGhlIGVkaXRvci5cbiAgICogQHBhcmFtIHNuYXBzaG90IC0gVGhlIHNuYXBzaG90IHRvIGxvYWQuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIG9wdGlvbnMgZm9yIGxvYWRpbmcgdGhlIHNuYXBzaG90LlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgbG9hZFNuYXBzaG90KHNuYXBzaG90LCBvcHRzKSB7XG4gICAgbG9hZFNuYXBzaG90KHRoaXMuc3RvcmUsIHNuYXBzaG90LCBvcHRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfem9vbVRvRml0UGFnZUNvbnRlbnRBdDEwMFBlcmNlbnQoKSB7XG4gICAgY29uc3QgYm91bmRzID0gdGhpcy5nZXRDdXJyZW50UGFnZUJvdW5kcygpO1xuICAgIGlmIChib3VuZHMpIHtcbiAgICAgIHRoaXMuem9vbVRvQm91bmRzKGJvdW5kcywgeyBpbW1lZGlhdGU6IHRydWUsIHRhcmdldFpvb206IHRoaXMuZ2V0QmFzZVpvb20oKSB9KTtcbiAgICB9XG4gIH1cbiAgX25hdmlnYXRlVG9EZWVwTGluayhkZWVwTGluaykge1xuICAgIHRoaXMucnVuKCgpID0+IHtcbiAgICAgIHN3aXRjaCAoZGVlcExpbmsudHlwZSkge1xuICAgICAgICBjYXNlIFwicGFnZVwiOiB7XG4gICAgICAgICAgY29uc3QgcGFnZSA9IHRoaXMuZ2V0UGFnZShkZWVwTGluay5wYWdlSWQpO1xuICAgICAgICAgIGlmIChwYWdlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRQYWdlKHBhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl96b29tVG9GaXRQYWdlQ29udGVudEF0MTAwUGVyY2VudCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2hhcGVzXCI6IHtcbiAgICAgICAgICBjb25zdCBhbGxTaGFwZXMgPSBjb21wYWN0KGRlZXBMaW5rLnNoYXBlSWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgICAgICAgY29uc3QgYnlQYWdlID0ge307XG4gICAgICAgICAgZm9yIChjb25zdCBzaGFwZSBvZiBhbGxTaGFwZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VJZDIgPSB0aGlzLmdldEFuY2VzdG9yUGFnZUlkKHNoYXBlKTtcbiAgICAgICAgICAgIGlmICghcGFnZUlkMikgY29udGludWU7XG4gICAgICAgICAgICBieVBhZ2VbcGFnZUlkMl0gPz89IFtdO1xuICAgICAgICAgICAgYnlQYWdlW3BhZ2VJZDJdLnB1c2goc2hhcGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBbcGFnZUlkLCBzaGFwZXNdID0gT2JqZWN0LmVudHJpZXMoYnlQYWdlKS5zb3J0KFxuICAgICAgICAgICAgKFtfLCBhXSwgW19fLCBiXSkgPT4gYi5sZW5ndGggLSBhLmxlbmd0aFxuICAgICAgICAgIClbMF0gPz8gW1wiXCIsIFtdXTtcbiAgICAgICAgICBpZiAoIXBhZ2VJZCB8fCAhc2hhcGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fem9vbVRvRml0UGFnZUNvbnRlbnRBdDEwMFBlcmNlbnQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50UGFnZShwYWdlSWQpO1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gQm94LkNvbW1vbihzaGFwZXMubWFwKChzKSA9PiB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhzKSkpO1xuICAgICAgICAgICAgdGhpcy56b29tVG9Cb3VuZHMoYm91bmRzLCB7IGltbWVkaWF0ZTogdHJ1ZSwgdGFyZ2V0Wm9vbTogdGhpcy5nZXRCYXNlWm9vbSgpIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInZpZXdwb3J0XCI6IHtcbiAgICAgICAgICBpZiAoZGVlcExpbmsucGFnZUlkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0UGFnZShkZWVwTGluay5wYWdlSWQpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3pvb21Ub0ZpdFBhZ2VDb250ZW50QXQxMDBQZXJjZW50KCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UoZGVlcExpbmsucGFnZUlkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy56b29tVG9Cb3VuZHMoZGVlcExpbmsuYm91bmRzLCB7IGltbWVkaWF0ZTogdHJ1ZSwgaW5zZXQ6IDAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGRlZXBMaW5rKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlcyBuYXZpZ2F0aW5nIHRvIHRoZSBjb250ZW50IHNwZWNpZmllZCBieSB0aGUgcXVlcnkgcGFyYW0gaW4gdGhlIGdpdmVuIFVSTC5cbiAgICpcbiAgICogVXNlIHtAbGluayBFZGl0b3IjY3JlYXRlRGVlcExpbmt9IHRvIGNyZWF0ZSBhIFVSTCB3aXRoIGEgZGVlcCBsaW5rIHF1ZXJ5IHBhcmFtLlxuICAgKlxuICAgKiBJZiBubyBVUkwgaXMgcHJvdmlkZWQsIGl0IHdpbGwgbG9vayBmb3IgdGhlIHBhcmFtIGluIHRoZSBjdXJyZW50IGB3aW5kb3cubG9jYXRpb24uaHJlZmAuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5uYXZpZ2F0ZVRvRGVlcExpbmsoKVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlIGRlZmF1bHQgcGFyYW1ldGVyIG5hbWUgaXMgJ2QnLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnkgcHJvdmlkaW5nIHRoZSBgcGFyYW1gIG9wdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogLy8gZGlzYWJsZSBwYWdlIHBhcmFtZXRlciBhbmQgY2hhbmdlIHZpZXdwb3J0IHBhcmFtZXRlciB0byAnYydcbiAgICogZWRpdG9yLm5hdmlnYXRlVG9EZWVwTGluayh7XG4gICAqICAgcGFyYW06ICd4JyxcbiAgICogICB1cmw6ICdodHRwczovL215LWFwcC5jb20vbXktZG9jdW1lbnQ/eD0yMDAuMTIuNDU0LjIzLnh5ejEyMycsXG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyAtIE9wdGlvbnMgZm9yIGxvYWRpbmcgdGhlIHN0YXRlIGZyb20gdGhlIFVSTC5cbiAgICovXG4gIG5hdmlnYXRlVG9EZWVwTGluayhvcHRzKSB7XG4gICAgaWYgKG9wdHMgJiYgXCJ0eXBlXCIgaW4gb3B0cykge1xuICAgICAgdGhpcy5fbmF2aWdhdGVUb0RlZXBMaW5rKG9wdHMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwob3B0cz8udXJsID8/IHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICBjb25zdCBkZWVwTGlua1N0cmluZyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KG9wdHM/LnBhcmFtID8/IFwiZFwiKTtcbiAgICBpZiAoIWRlZXBMaW5rU3RyaW5nKSB7XG4gICAgICB0aGlzLl96b29tVG9GaXRQYWdlQ29udGVudEF0MTAwUGVyY2VudCgpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9uYXZpZ2F0ZVRvRGVlcExpbmsocGFyc2VEZWVwTGlua1N0cmluZyhkZWVwTGlua1N0cmluZykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgIHRoaXMuX3pvb21Ub0ZpdFBhZ2VDb250ZW50QXQxMDBQZXJjZW50KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUdXJucyB0aGUgZ2l2ZW4gVVJMIGludG8gYSBkZWVwIGxpbmsgYnkgYWRkaW5nIGEgcXVlcnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBlLmcuIGBodHRwczovL215LWFwcC5jb20vbXktZG9jdW1lbnQ/ZD0xMDAuMTAwLjIwMC4yMDAueHl6MTIzYFxuICAgKlxuICAgKiBJZiBubyBVUkwgaXMgcHJvdmlkZWQsIGl0IHdpbGwgdXNlIHRoZSBjdXJyZW50IGB3aW5kb3cubG9jYXRpb24uaHJlZmAuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIGNyZWF0ZSBhIGRlZXAgbGluayB0byB0aGUgY3VycmVudCBwYWdlICsgdmlld3BvcnRcbiAgICogbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZWRpdG9yLmNyZWF0ZURlZXBMaW5rKCkpXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgY2FuIGxpbmsgdG8gYSBwYXJ0aWN1bGFyIHNldCBvZiBzaGFwZXMgYnkgcHJvdmlkaW5nIGEgYHRvYCBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIGNyZWF0ZSBhIGRlZXAgbGluayB0byB0aGUgc2V0IG9mIGN1cnJlbnRseSBzZWxlY3RlZCBzaGFwZXNcbiAgICogbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZWRpdG9yLmNyZWF0ZURlZXBMaW5rKHtcbiAgICogICB0bzogeyB0eXBlOiAnc2VsZWN0aW9uJywgc2hhcGVJZHM6IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCkgfVxuICAgKiB9KSlcbiAgICogYGBgXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHF1ZXJ5IHBhcmFtIGlzICdkJy4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwYXJhbWAgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBVc2UgYHhgIGFzIHRoZSBwYXJhbSBuYW1lIGluc3RlYWRcbiAgICogZWRpdG9yLmNyZWF0ZURlZXBMaW5rKHsgcGFyYW06ICd4JyB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciBhZGRpbmcgdGhlIHN0YXRlIHRvIHRoZSBVUkwuXG4gICAqIEByZXR1cm5zIHRoZSB1cGRhdGVkIFVSTFxuICAgKi9cbiAgY3JlYXRlRGVlcExpbmsob3B0cykge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwob3B0cz8udXJsID8/IHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcbiAgICAgIG9wdHM/LnBhcmFtID8/IFwiZFwiLFxuICAgICAgY3JlYXRlRGVlcExpbmtTdHJpbmcoXG4gICAgICAgIG9wdHM/LnRvID8/IHtcbiAgICAgICAgICB0eXBlOiBcInZpZXdwb3J0XCIsXG4gICAgICAgICAgcGFnZUlkOiB0aGlzLm9wdGlvbnMubWF4UGFnZXMgPT09IDEgPyB2b2lkIDAgOiB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSxcbiAgICAgICAgICBib3VuZHM6IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKClcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgY2hhbmdlcyB0byBhIGRlZXAgbGluayBmb3IgdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAqXG4gICAqIFlvdSdsbCB0eXBpY2FsbHkgd2FudCB0byB1c2UgdGhpcyBpbmRpcmVjdGx5IHZpYSB0aGUge0BsaW5rIFRsZHJhd0VkaXRvckJhc2VQcm9wcy5kZWVwTGlua3N9IHByb3Agb24gdGhlIGA8VGxkcmF3IC8+YCBjb21wb25lbnQuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhpcyB3aWxsIHVwZGF0ZSBgd2luZG93LmxvY2F0aW9uYCBpbiBwbGFjZSwgYnV0IHlvdSBjYW4gcHJvdmlkZSBhIGN1c3RvbSBjYWxsYmFja1xuICAgKiB0byBoYW5kbGUgc3RhdGUgY2hhbmdlcyBvbiB5b3VyIG93bi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlZ2lzdGVyRGVlcExpbmtMaXN0ZW5lcih7XG4gICAqICAgb25DaGFuZ2UodXJsKSB7XG4gICAqICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB1cmwudG9TdHJpbmcoKSlcbiAgICogICB9XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhIGN1c3RvbSBVUkwgdG8gdXBkYXRlLCBpbiB3aGljaCBjYXNlIHlvdSBtdXN0IGFsc28gcHJvdmlkZSBgb25DaGFuZ2VgLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJEZWVwTGlua0xpc3RlbmVyKHtcbiAgICogICBnZXRVcmw6ICgpID0+IGBodHRwczovL215LWFwcC5jb20vbXktZG9jdW1lbnRgLFxuICAgKiAgIG9uQ2hhbmdlKHVybCkge1xuICAgKiAgICAgc2V0U2hhcmVVcmwodXJsLnRvU3RyaW5nKCkpXG4gICAqICAgfVxuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQnkgZGVmYXVsdCB0aGlzIHdpbGwgdXBkYXRlIHdpdGggYSBkZWJvdW5jZSBpbnRlcnZhbCBvZiA1MDBtcywgYnV0IHlvdSBjYW4gcHJvdmlkZSBhIGN1c3RvbSBpbnRlcnZhbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJlZ2lzdGVyRGVlcExpbmtMaXN0ZW5lcih7IGRlYm91bmNlTXM6IDEwMDAgfSlcbiAgICogYGBgXG4gICAqIFRoZSBkZWZhdWx0IHBhcmFtZXRlciBuYW1lIGlzIGBkYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwYXJhbWAgb3B0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJEZWVwTGlua0xpc3RlbmVyKHsgcGFyYW06ICd4JyB9KVxuICAgKiBgYGBcbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciBzZXR0aW5nIHVwIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgc3RvcCB0aGUgbGlzdGVuZXIuXG4gICAqL1xuICByZWdpc3RlckRlZXBMaW5rTGlzdGVuZXIob3B0cykge1xuICAgIGlmIChvcHRzPy5nZXRVcmwgJiYgIW9wdHM/Lm9uQ2hhbmdlKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgXCJbdGxkcmF3OnVybFN0YXRlU3luY10gSWYgeW91IHNwZWNpZnkgZ2V0VXJsLCB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgdGhlIG9uQ2hhbmdlIGNhbGxiYWNrLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB1cmwkID0gY29tcHV0ZWQoXCJ1cmwgd2l0aCBzdGF0ZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBvcHRzPy5nZXRVcmw/Lih0aGlzKSA/PyB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgIGNvbnN0IHVybFdpdGhTdGF0ZSA9IHRoaXMuY3JlYXRlRGVlcExpbmsoe1xuICAgICAgICBwYXJhbTogb3B0cz8ucGFyYW0sXG4gICAgICAgIHVybCxcbiAgICAgICAgdG86IG9wdHM/LmdldFRhcmdldD8uKHRoaXMpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1cmxXaXRoU3RhdGUudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgICBjb25zdCBhbm5vdW5jZUNoYW5nZSA9IG9wdHM/Lm9uQ2hhbmdlID8/ICgoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSB0aGlzLmNyZWF0ZURlZXBMaW5rKHtcbiAgICAgICAgcGFyYW06IG9wdHM/LnBhcmFtLFxuICAgICAgICB0bzogb3B0cz8uZ2V0VGFyZ2V0Py4odGhpcylcbiAgICAgIH0pO1xuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVkdWxlRWZmZWN0ID0gZGVib3VuY2UoKGV4ZWN1dGUpID0+IGV4ZWN1dGUoKSwgb3B0cz8uZGVib3VuY2VNcyA/PyA1MDApO1xuICAgIGNvbnN0IHVubGlzdGVuID0gcmVhY3QoXG4gICAgICBcInVwZGF0ZSB1cmwgb24gc3RhdGUgY2hhbmdlXCIsXG4gICAgICAoKSA9PiBhbm5vdW5jZUNoYW5nZShuZXcgVVJMKHVybCQuZ2V0KCkpLCB0aGlzKSxcbiAgICAgIHsgc2NoZWR1bGVFZmZlY3QgfVxuICAgICk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgICBzY2hlZHVsZUVmZmVjdC5jYW5jZWwoKTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBQcmV2ZW50IGEgZG91YmxlIGNsaWNrIGV2ZW50IGZyb20gZmlyaW5nIHRoZSBuZXh0IHRpbWUgdGhlIHVzZXIgY2xpY2tzXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbmNlbERvdWJsZUNsaWNrKCkge1xuICAgIHRoaXMuX2NsaWNrTWFuYWdlci5jYW5jZWxEb3VibGVDbGlja1RpbWVvdXQoKTtcbiAgfVxuICBfc2V0U2hpZnRLZXlUaW1lb3V0KCkge1xuICAgIHRoaXMuaW5wdXRzLnNoaWZ0S2V5ID0gZmFsc2U7XG4gICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcImtleWJvYXJkXCIsXG4gICAgICBuYW1lOiBcImtleV91cFwiLFxuICAgICAga2V5OiBcIlNoaWZ0XCIsXG4gICAgICBzaGlmdEtleTogdGhpcy5pbnB1dHMuc2hpZnRLZXksXG4gICAgICBjdHJsS2V5OiB0aGlzLmlucHV0cy5jdHJsS2V5LFxuICAgICAgYWx0S2V5OiB0aGlzLmlucHV0cy5hbHRLZXksXG4gICAgICBtZXRhS2V5OiB0aGlzLmlucHV0cy5tZXRhS2V5LFxuICAgICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkodGhpcy5pbnB1dHMpLFxuICAgICAgY29kZTogXCJTaGlmdExlZnRcIlxuICAgIH0pO1xuICB9XG4gIF9zZXRBbHRLZXlUaW1lb3V0KCkge1xuICAgIHRoaXMuaW5wdXRzLmFsdEtleSA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJrZXlib2FyZFwiLFxuICAgICAgbmFtZTogXCJrZXlfdXBcIixcbiAgICAgIGtleTogXCJBbHRcIixcbiAgICAgIHNoaWZ0S2V5OiB0aGlzLmlucHV0cy5zaGlmdEtleSxcbiAgICAgIGN0cmxLZXk6IHRoaXMuaW5wdXRzLmN0cmxLZXksXG4gICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgIG1ldGFLZXk6IHRoaXMuaW5wdXRzLm1ldGFLZXksXG4gICAgICBhY2NlbEtleTogaXNBY2NlbEtleSh0aGlzLmlucHV0cyksXG4gICAgICBjb2RlOiBcIkFsdExlZnRcIlxuICAgIH0pO1xuICB9XG4gIF9zZXRDdHJsS2V5VGltZW91dCgpIHtcbiAgICB0aGlzLmlucHV0cy5jdHJsS2V5ID0gZmFsc2U7XG4gICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcImtleWJvYXJkXCIsXG4gICAgICBuYW1lOiBcImtleV91cFwiLFxuICAgICAga2V5OiBcIkN0cmxcIixcbiAgICAgIHNoaWZ0S2V5OiB0aGlzLmlucHV0cy5zaGlmdEtleSxcbiAgICAgIGN0cmxLZXk6IHRoaXMuaW5wdXRzLmN0cmxLZXksXG4gICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgIG1ldGFLZXk6IHRoaXMuaW5wdXRzLm1ldGFLZXksXG4gICAgICBhY2NlbEtleTogaXNBY2NlbEtleSh0aGlzLmlucHV0cyksXG4gICAgICBjb2RlOiBcIkNvbnRyb2xMZWZ0XCJcbiAgICB9KTtcbiAgfVxuICBfc2V0TWV0YUtleVRpbWVvdXQoKSB7XG4gICAgdGhpcy5pbnB1dHMubWV0YUtleSA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJrZXlib2FyZFwiLFxuICAgICAgbmFtZTogXCJrZXlfdXBcIixcbiAgICAgIGtleTogXCJNZXRhXCIsXG4gICAgICBzaGlmdEtleTogdGhpcy5pbnB1dHMuc2hpZnRLZXksXG4gICAgICBjdHJsS2V5OiB0aGlzLmlucHV0cy5jdHJsS2V5LFxuICAgICAgYWx0S2V5OiB0aGlzLmlucHV0cy5hbHRLZXksXG4gICAgICBtZXRhS2V5OiB0aGlzLmlucHV0cy5tZXRhS2V5LFxuICAgICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkodGhpcy5pbnB1dHMpLFxuICAgICAgY29kZTogXCJNZXRhTGVmdFwiXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoIGFuIGV2ZW50IHRvIHRoZSBlZGl0b3IuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5kaXNwYXRjaChteVBvaW50ZXJFdmVudClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpbmZvIC0gVGhlIGV2ZW50IGluZm8uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRpc3BhdGNoKGluZm8pIHtcbiAgICB0aGlzLl9wZW5kaW5nRXZlbnRzRm9yTmV4dFRpY2sucHVzaChpbmZvKTtcbiAgICBpZiAoIShpbmZvLnR5cGUgPT09IFwicG9pbnRlclwiICYmIGluZm8ubmFtZSA9PT0gXCJwb2ludGVyX21vdmVcIiB8fCBpbmZvLnR5cGUgPT09IFwid2hlZWxcIiB8fCBpbmZvLnR5cGUgPT09IFwicGluY2hcIikpIHtcbiAgICAgIHRoaXMuX2ZsdXNoRXZlbnRzRm9yVGljaygwKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgX2ZsdXNoRXZlbnRzRm9yVGljayhlbGFwc2VkKSB7XG4gICAgdGhpcy5ydW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX3BlbmRpbmdFdmVudHNGb3JOZXh0VGljay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IFsuLi50aGlzLl9wZW5kaW5nRXZlbnRzRm9yTmV4dFRpY2tdO1xuICAgICAgICB0aGlzLl9wZW5kaW5nRXZlbnRzRm9yTmV4dFRpY2subGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBpbmZvIG9mIGV2ZW50cykge1xuICAgICAgICAgIHRoaXMuX2ZsdXNoRXZlbnRGb3JUaWNrKGluZm8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZWxhcHNlZCA+IDApIHtcbiAgICAgICAgdGhpcy5yb290LmhhbmRsZUV2ZW50KHsgdHlwZTogXCJtaXNjXCIsIG5hbWU6IFwidGlja1wiLCBlbGFwc2VkIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JpYmJsZXMudGljayhlbGFwc2VkKTtcbiAgICB9KTtcbiAgfVxuICBfZmx1c2hFdmVudEZvclRpY2soaW5mbykge1xuICAgIGlmICh0aGlzLmdldENyYXNoaW5nRXJyb3IoKSkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgeyBpbnB1dHMgfSA9IHRoaXM7XG4gICAgY29uc3QgeyB0eXBlIH0gPSBpbmZvO1xuICAgIGlmIChpbmZvLnR5cGUgPT09IFwibWlzY1wiKSB7XG4gICAgICBpZiAoaW5mby5uYW1lID09PSBcImNhbmNlbFwiIHx8IGluZm8ubmFtZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIHRoaXMuaW5wdXRzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgIHRoaXMuaW5wdXRzLmlzUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuaW5wdXRzLmlzU3BhY2ViYXJQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLl9wcmV2Q3Vyc29yLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5yb290LmhhbmRsZUV2ZW50KGluZm8pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaW5mby5zaGlmdEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3NoaWZ0S2V5VGltZW91dCk7XG4gICAgICB0aGlzLl9zaGlmdEtleVRpbWVvdXQgPSAtMTtcbiAgICAgIGlucHV0cy5zaGlmdEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5zaGlmdEtleSAmJiBpbnB1dHMuc2hpZnRLZXkgJiYgdGhpcy5fc2hpZnRLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fc2hpZnRLZXlUaW1lb3V0ID0gdGhpcy50aW1lcnMuc2V0VGltZW91dCh0aGlzLl9zZXRTaGlmdEtleVRpbWVvdXQsIDE1MCk7XG4gICAgfVxuICAgIGlmIChpbmZvLmFsdEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2FsdEtleVRpbWVvdXQpO1xuICAgICAgdGhpcy5fYWx0S2V5VGltZW91dCA9IC0xO1xuICAgICAgaW5wdXRzLmFsdEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5hbHRLZXkgJiYgaW5wdXRzLmFsdEtleSAmJiB0aGlzLl9hbHRLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fYWx0S2V5VGltZW91dCA9IHRoaXMudGltZXJzLnNldFRpbWVvdXQodGhpcy5fc2V0QWx0S2V5VGltZW91dCwgMTUwKTtcbiAgICB9XG4gICAgaWYgKGluZm8uY3RybEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2N0cmxLZXlUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2N0cmxLZXlUaW1lb3V0ID0gLTE7XG4gICAgICBpbnB1dHMuY3RybEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5jdHJsS2V5ICYmIGlucHV0cy5jdHJsS2V5ICYmIHRoaXMuX2N0cmxLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fY3RybEtleVRpbWVvdXQgPSB0aGlzLnRpbWVycy5zZXRUaW1lb3V0KHRoaXMuX3NldEN0cmxLZXlUaW1lb3V0LCAxNTApO1xuICAgIH1cbiAgICBpZiAoaW5mby5tZXRhS2V5KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fbWV0YUtleVRpbWVvdXQpO1xuICAgICAgdGhpcy5fbWV0YUtleVRpbWVvdXQgPSAtMTtcbiAgICAgIGlucHV0cy5tZXRhS2V5ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCFpbmZvLm1ldGFLZXkgJiYgaW5wdXRzLm1ldGFLZXkgJiYgdGhpcy5fbWV0YUtleVRpbWVvdXQgPT09IC0xKSB7XG4gICAgICB0aGlzLl9tZXRhS2V5VGltZW91dCA9IHRoaXMudGltZXJzLnNldFRpbWVvdXQodGhpcy5fc2V0TWV0YUtleVRpbWVvdXQsIDE1MCk7XG4gICAgfVxuICAgIGNvbnN0IHsgb3JpZ2luUGFnZVBvaW50LCBjdXJyZW50UGFnZVBvaW50IH0gPSBpbnB1dHM7XG4gICAgaWYgKCFpbnB1dHMuaXNQb2ludGluZykge1xuICAgICAgaW5wdXRzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IHRoaXMuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUoVExJTlNUQU5DRV9JRCk7XG4gICAgY29uc3QgcGFnZVN0YXRlID0gdGhpcy5zdG9yZS5nZXQodGhpcy5fZ2V0Q3VycmVudFBhZ2VTdGF0ZUlkKCkpO1xuICAgIGNvbnN0IGNhbWVyYU9wdGlvbnMgPSB0aGlzLl9jYW1lcmFPcHRpb25zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcInBpbmNoXCI6IHtcbiAgICAgICAgaWYgKGNhbWVyYU9wdGlvbnMuaXNMb2NrZWQpIHJldHVybjtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgICB0aGlzLl91cGRhdGVJbnB1dHNGcm9tRXZlbnQoaW5mbyk7XG4gICAgICAgIHN3aXRjaCAoaW5mby5uYW1lKSB7XG4gICAgICAgICAgY2FzZSBcInBpbmNoX3N0YXJ0XCI6IHtcbiAgICAgICAgICAgIGlmIChpbnB1dHMuaXNQaW5jaGluZykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFpbnB1dHMuaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3BpbmNoU3RhcnQgPSB0aGlzLmdldENhbWVyYSgpLno7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24gPSBbLi4ucGFnZVN0YXRlLnNlbGVjdGVkU2hhcGVJZHNdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuX2RpZFBpbmNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaW5wdXRzLmlzUGluY2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicGluY2hcIjoge1xuICAgICAgICAgICAgaWYgKCFpbnB1dHMuaXNQaW5jaGluZykgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICBwb2ludDogeyB6ID0gMSB9LFxuICAgICAgICAgICAgICBkZWx0YTogeyB4OiBkeCwgeTogZHkgfVxuICAgICAgICAgICAgfSA9IGluZm87XG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IFZlYy5TdWJYWShcbiAgICAgICAgICAgICAgaW5mby5wb2ludCxcbiAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZS5zY3JlZW5Cb3VuZHMueCxcbiAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZS5zY3JlZW5Cb3VuZHMueVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlU3RhdGUuZm9sbG93aW5nVXNlcklkKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdW5zYWZlX193aXRob3V0Q2FwdHVyZSgoKSA9PiB0aGlzLmdldENhbWVyYSgpKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcGFuU3BlZWQsIHpvb21TcGVlZCB9ID0gY2FtZXJhT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuX3NldENhbWVyYShcbiAgICAgICAgICAgICAgbmV3IFZlYyhcbiAgICAgICAgICAgICAgICBjeCArIGR4ICogcGFuU3BlZWQgLyBjeiAtIHggLyBjeiArIHggLyAoeiAqIHpvb21TcGVlZCksXG4gICAgICAgICAgICAgICAgY3kgKyBkeSAqIHBhblNwZWVkIC8gY3ogLSB5IC8gY3ogKyB5IC8gKHogKiB6b29tU3BlZWQpLFxuICAgICAgICAgICAgICAgIHogKiB6b29tU3BlZWRcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBpbmNoX2VuZFwiOiB7XG4gICAgICAgICAgICBpZiAoIWlucHV0cy5pc1BpbmNoaW5nKSByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIGlucHV0cy5pc1BpbmNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IF9zZWxlY3RlZFNoYXBlSWRzQXRQb2ludGVyRG93bjogc2hhcGVzVG9SZXNlbGVjdCB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXModGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24pO1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24gPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaWRQaW5jaCkge1xuICAgICAgICAgICAgICB0aGlzLl9kaWRQaW5jaCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoc2hhcGVzVG9SZXNlbGVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmNlKFwidGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RpZFBpbmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoc2hhcGVzVG9SZXNlbGVjdCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ3aGVlbFwiOiB7XG4gICAgICAgIGlmIChjYW1lcmFPcHRpb25zLmlzTG9ja2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlucHV0c0Zyb21FdmVudChpbmZvKTtcbiAgICAgICAgaWYgKHRoaXMubWVudXMuaGFzQW55T3Blbk1lbnVzKCkpIHtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7IHBhblNwZWVkLCB6b29tU3BlZWQsIHdoZWVsQmVoYXZpb3IgfSA9IGNhbWVyYU9wdGlvbnM7XG4gICAgICAgICAgaWYgKHdoZWVsQmVoYXZpb3IgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZVN0YXRlLmZvbGxvd2luZ1VzZXJJZCkge1xuICAgICAgICAgICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHVuc2FmZV9fd2l0aG91dENhcHR1cmUoKCkgPT4gdGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgICAgICAgICBjb25zdCB7IHg6IGR4LCB5OiBkeSwgejogZHogPSAwIH0gPSBpbmZvLmRlbHRhO1xuICAgICAgICAgICAgbGV0IGJlaGF2aW9yID0gd2hlZWxCZWhhdmlvcjtcbiAgICAgICAgICAgIGlmIChpbnB1dHMuY3RybEtleSkgYmVoYXZpb3IgPSB3aGVlbEJlaGF2aW9yID09PSBcInBhblwiID8gXCJ6b29tXCIgOiBcInBhblwiO1xuICAgICAgICAgICAgc3dpdGNoIChiZWhhdmlvcikge1xuICAgICAgICAgICAgICBjYXNlIFwiem9vbVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmlucHV0cy5jdXJyZW50U2NyZWVuUG9pbnQ7XG4gICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gZHo7XG4gICAgICAgICAgICAgICAgaWYgKHdoZWVsQmVoYXZpb3IgPT09IFwiem9vbVwiKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZHkpID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSAxMCAqIE1hdGguc2lnbihkeSkgLyAxMDA7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGR5IC8gMTAwO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB6b29tID0gY3ogKyAoZGVsdGEgPz8gMCkgKiB6b29tU3BlZWQgKiBjejtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDYW1lcmEoXG4gICAgICAgICAgICAgICAgICBuZXcgVmVjKFxuICAgICAgICAgICAgICAgICAgICBjeCArICh4IC8gem9vbSAtIHgpIC0gKHggLyBjeiAtIHgpLFxuICAgICAgICAgICAgICAgICAgICBjeSArICh5IC8gem9vbSAtIHkpIC0gKHkgLyBjeiAtIHkpLFxuICAgICAgICAgICAgICAgICAgICB6b29tXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZVRyYWNrUGVyZm9ybWFuY2UoXCJab29taW5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwicGFuXCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDYW1lcmEobmV3IFZlYyhjeCArIGR4ICogcGFuU3BlZWQgLyBjeiwgY3kgKyBkeSAqIHBhblNwZWVkIC8gY3osIGN6KSwge1xuICAgICAgICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZVRyYWNrUGVyZm9ybWFuY2UoXCJQYW5uaW5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJwb2ludGVyXCI6IHtcbiAgICAgICAgaWYgKGlucHV0cy5pc1BpbmNoaW5nKSByZXR1cm47XG4gICAgICAgIHRoaXMuX3VwZGF0ZUlucHV0c0Zyb21FdmVudChpbmZvKTtcbiAgICAgICAgY29uc3QgeyBpc1BlbiB9ID0gaW5mbztcbiAgICAgICAgY29uc3QgeyBpc1Blbk1vZGUgfSA9IGluc3RhbmNlU3RhdGU7XG4gICAgICAgIHN3aXRjaCAoaW5mby5uYW1lKSB7XG4gICAgICAgICAgY2FzZSBcInBvaW50ZXJfZG93blwiOiB7XG4gICAgICAgICAgICBpZiAoaXNQZW5Nb2RlICYmICFpc1BlbikgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlucHV0cy5pc1Bhbm5pbmcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9uZ1ByZXNzVGltZW91dCA9IHRoaXMudGltZXJzLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgLi4uaW5mbyxcbiAgICAgICAgICAgICAgICAgIHBvaW50OiB0aGlzLmlucHV0cy5jdXJyZW50U2NyZWVuUG9pbnQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBcImxvbmdfcHJlc3NcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMubG9uZ1ByZXNzRHVyYXRpb25Ncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFNoYXBlSWRzQXRQb2ludGVyRG93biA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgICAgICAgICAgaWYgKGluZm8uYnV0dG9uID09PSBMRUZUX01PVVNFX0JVVFRPTikgdGhpcy5jYXB0dXJlZFBvaW50ZXJJZCA9IGluZm8ucG9pbnRlcklkO1xuICAgICAgICAgICAgaW5wdXRzLmJ1dHRvbnMuYWRkKGluZm8uYnV0dG9uKTtcbiAgICAgICAgICAgIGlucHV0cy5pc1BvaW50aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlucHV0cy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWlzUGVuTW9kZSAmJiBpc1BlbikgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNQZW5Nb2RlOiB0cnVlIH0pO1xuICAgICAgICAgICAgaWYgKGluZm8uYnV0dG9uID09PSBTVFlMVVNfRVJBU0VSX0JVVFRPTikge1xuICAgICAgICAgICAgICB0aGlzLl9yZXN0b3JlVG9vbElkID0gdGhpcy5nZXRDdXJyZW50VG9vbElkKCk7XG4gICAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50VG9vbChcImVyYXNlclwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5mby5idXR0b24gPT09IE1JRERMRV9NT1VTRV9CVVRUT04pIHtcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlucHV0cy5pc1Bhbm5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2Q3Vyc29yID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuY3Vyc29yLnR5cGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5pbnB1dHMuaXNQYW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiBcImdyYWJiaW5nXCIsIHJvdGF0aW9uOiAwIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicG9pbnRlcl9tb3ZlXCI6IHtcbiAgICAgICAgICAgIGlmICghaXNQZW4gJiYgaXNQZW5Nb2RlKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHVuc2FmZV9fd2l0aG91dENhcHR1cmUoKCkgPT4gdGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dHMuaXNQYW5uaW5nICYmIHRoaXMuaW5wdXRzLmlzUG9pbnRpbmcpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBjdXJyZW50U2NyZWVuUG9pbnQsIHByZXZpb3VzU2NyZWVuUG9pbnQgfSA9IHRoaXMuaW5wdXRzO1xuICAgICAgICAgICAgICBjb25zdCB7IHBhblNwZWVkIH0gPSBjYW1lcmFPcHRpb25zO1xuICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBWZWMuU3ViKGN1cnJlbnRTY3JlZW5Qb2ludCwgcHJldmlvdXNTY3JlZW5Qb2ludCk7XG4gICAgICAgICAgICAgIHRoaXMuc2V0Q2FtZXJhKFxuICAgICAgICAgICAgICAgIG5ldyBWZWMoY3ggKyBvZmZzZXQueCAqIHBhblNwZWVkIC8gY3osIGN5ICsgb2Zmc2V0LnkgKiBwYW5TcGVlZCAvIGN6LCBjeiksXG4gICAgICAgICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLm1heWJlVHJhY2tQZXJmb3JtYW5jZShcIlBhbm5pbmdcIik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnB1dHMuaXNQb2ludGluZyAmJiAhaW5wdXRzLmlzRHJhZ2dpbmcgJiYgVmVjLkRpc3QyKG9yaWdpblBhZ2VQb2ludCwgY3VycmVudFBhZ2VQb2ludCkgKiB0aGlzLmdldFpvb21MZXZlbCgpID4gKGluc3RhbmNlU3RhdGUuaXNDb2Fyc2VQb2ludGVyID8gdGhpcy5vcHRpb25zLmNvYXJzZURyYWdEaXN0YW5jZVNxdWFyZWQgOiB0aGlzLm9wdGlvbnMuZHJhZ0Rpc3RhbmNlU3F1YXJlZCkgLyBjeikge1xuICAgICAgICAgICAgICBpbnB1dHMuaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9sb25nUHJlc3NUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicG9pbnRlcl91cFwiOiB7XG4gICAgICAgICAgICBpbnB1dHMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgaW5wdXRzLmlzUG9pbnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9sb25nUHJlc3NUaW1lb3V0KTtcbiAgICAgICAgICAgIGlucHV0cy5idXR0b25zLmRlbGV0ZShpbmZvLmJ1dHRvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5tZW51cy5oYXNBbnlPcGVuTWVudXMoKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlU3RhdGUuaXNQZW5Nb2RlICYmICFpc1BlbikgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZWRQb2ludGVySWQgPT09IGluZm8ucG9pbnRlcklkKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2FwdHVyZWRQb2ludGVySWQgPSBudWxsO1xuICAgICAgICAgICAgICBpbmZvLmJ1dHRvbiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICBpZiAoIWlucHV0cy5rZXlzLmhhcyhcIlNwYWNlXCIpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLmlzUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlucHV0cy5pc1NwYWNlYmFyUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHNsaWRlRGlyZWN0aW9uID0gdGhpcy5pbnB1dHMucG9pbnRlclZlbG9jaXR5O1xuICAgICAgICAgICAgICBjb25zdCBzbGlkZVNwZWVkID0gTWF0aC5taW4oMiwgc2xpZGVEaXJlY3Rpb24ubGVuKCkpO1xuICAgICAgICAgICAgICBzd2l0Y2ggKGluZm8uYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBMRUZUX01PVVNFX0JVVFRPTjoge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiBcImdyYWJcIiwgcm90YXRpb246IDAgfSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBNSURETEVfTU9VU0VfQlVUVE9OOiB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dHMua2V5cy5oYXMoXCIgXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKHsgdHlwZTogXCJncmFiXCIsIHJvdGF0aW9uOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLl9wcmV2Q3Vyc29yLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNsaWRlU3BlZWQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZUNhbWVyYSh7IHNwZWVkOiBzbGlkZVNwZWVkLCBkaXJlY3Rpb246IHNsaWRlRGlyZWN0aW9uIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoaW5mby5idXR0b24gPT09IFNUWUxVU19FUkFTRVJfQlVUVE9OKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFRvb2wodGhpcy5fcmVzdG9yZVRvb2xJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJrZXlib2FyZFwiOiB7XG4gICAgICAgIGlmIChpbmZvLmtleSA9PT0gXCJTaGlmdFJpZ2h0XCIpIGluZm8ua2V5ID0gXCJTaGlmdExlZnRcIjtcbiAgICAgICAgaWYgKGluZm8ua2V5ID09PSBcIkFsdFJpZ2h0XCIpIGluZm8ua2V5ID0gXCJBbHRMZWZ0XCI7XG4gICAgICAgIGlmIChpbmZvLmNvZGUgPT09IFwiQ29udHJvbFJpZ2h0XCIpIGluZm8uY29kZSA9IFwiQ29udHJvbExlZnRcIjtcbiAgICAgICAgaWYgKGluZm8uY29kZSA9PT0gXCJNZXRhUmlnaHRcIikgaW5mby5jb2RlID0gXCJNZXRhTGVmdFwiO1xuICAgICAgICBzd2l0Y2ggKGluZm8ubmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJrZXlfZG93blwiOiB7XG4gICAgICAgICAgICBpbnB1dHMua2V5cy5hZGQoaW5mby5jb2RlKTtcbiAgICAgICAgICAgIGlmIChpbmZvLmNvZGUgPT09IFwiU3BhY2VcIiAmJiAhaW5mby5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5pbnB1dHMuaXNQYW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJldkN1cnNvciA9IGluc3RhbmNlU3RhdGUuY3Vyc29yLnR5cGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5pbnB1dHMuaXNQYW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhpcy5pbnB1dHMuaXNTcGFjZWJhclBhbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbG9uZ1ByZXNzVGltZW91dCk7XG4gICAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKHsgdHlwZTogdGhpcy5pbnB1dHMuaXNQb2ludGluZyA/IFwiZ3JhYmJpbmdcIiA6IFwiZ3JhYlwiLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0cy5pc1NwYWNlYmFyUGFubmluZykge1xuICAgICAgICAgICAgICBsZXQgb2Zmc2V0O1xuICAgICAgICAgICAgICBzd2l0Y2ggKGluZm8uY29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6IHtcbiAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG5ldyBWZWMoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6IHtcbiAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG5ldyBWZWMoMSwgMCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOiB7XG4gICAgICAgICAgICAgICAgICBvZmZzZXQgPSBuZXcgVmVjKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjoge1xuICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gbmV3IFZlYygtMSwgMCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGJvdW5kcy5jbG9uZSgpLnRyYW5zbGF0ZShvZmZzZXQubXVsVih7IHg6IGJvdW5kcy53LCB5OiBib3VuZHMuaCB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZVRvVmlld3BvcnQobmV4dCwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDMyMCB9IH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImtleV91cFwiOiB7XG4gICAgICAgICAgICBpbnB1dHMua2V5cy5kZWxldGUoaW5mby5jb2RlKTtcbiAgICAgICAgICAgIGlmIChpbmZvLmNvZGUgPT09IFwiU3BhY2VcIikge1xuICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dHMuYnV0dG9ucy5oYXMoTUlERExFX01PVVNFX0JVVFRPTikpIHtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0cy5pc1Bhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0cy5pc1NwYWNlYmFyUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKHsgdHlwZTogdGhpcy5fcHJldkN1cnNvciwgcm90YXRpb246IDAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwia2V5X3JlcGVhdFwiOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbmZvLnR5cGUgPT09IFwicG9pbnRlclwiKSB7XG4gICAgICBpZiAoaW5mby5idXR0b24gPT09IE1JRERMRV9NT1VTRV9CVVRUT04pIHtcbiAgICAgICAgaW5mby5uYW1lID0gXCJtaWRkbGVfY2xpY2tcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW5mby5idXR0b24gPT09IFJJR0hUX01PVVNFX0JVVFRPTikge1xuICAgICAgICBpbmZvLm5hbWUgPSBcInJpZ2h0X2NsaWNrXCI7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGlzUGVuTW9kZSB9ID0gdGhpcy5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShUTElOU1RBTkNFX0lEKTtcbiAgICAgIGlmIChpbmZvLmlzUGVuID09PSBpc1Blbk1vZGUpIHtcbiAgICAgICAgY29uc3QgY2xpY2tJbmZvID0gdGhpcy5fY2xpY2tNYW5hZ2VyLmhhbmRsZVBvaW50ZXJFdmVudChpbmZvKTtcbiAgICAgICAgaWYgKGluZm8ubmFtZSAhPT0gY2xpY2tJbmZvLm5hbWUpIHtcbiAgICAgICAgICB0aGlzLnJvb3QuaGFuZGxlRXZlbnQoaW5mbyk7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiZXZlbnRcIiwgaW5mbyk7XG4gICAgICAgICAgdGhpcy5yb290LmhhbmRsZUV2ZW50KGNsaWNrSW5mbyk7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiZXZlbnRcIiwgY2xpY2tJbmZvKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yb290LmhhbmRsZUV2ZW50KGluZm8pO1xuICAgIHRoaXMuZW1pdChcImV2ZW50XCIsIGluZm8pO1xuICAgIGlmIChpbmZvLnR5cGUgPT09IFwicG9pbnRlclwiICYmIGluZm8ubmFtZSA9PT0gXCJwb2ludGVyX2Rvd25cIikge1xuICAgICAgdGhpcy5tZW51cy5jbGVhck9wZW5NZW51cygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIG1heWJlVHJhY2tQZXJmb3JtYW5jZShuYW1lKSB7XG4gICAgaWYgKGRlYnVnRmxhZ3MubWVhc3VyZVBlcmZvcm1hbmNlLmdldCgpKSB7XG4gICAgICBpZiAodGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIuaXNTdGFydGVkKCkpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVyZm9ybWFuY2VUcmFja2VyVGltZW91dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5zdGFydChuYW1lKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGVyZm9ybWFuY2VUcmFja2VyVGltZW91dCA9IHRoaXMudGltZXJzLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5zdG9wKCk7XG4gICAgICB9LCA1MCk7XG4gICAgfVxuICB9XG59XG5faW5pdCA9IF9fZGVjb3JhdG9yU3RhcnQoX2EpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0SXNTaGFwZUhpZGRlbkNhY2hlXCIsIF9nZXRJc1NoYXBlSGlkZGVuQ2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q2FuVW5kb1wiLCBfZ2V0Q2FuVW5kb19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRDYW5SZWRvXCIsIF9nZXRDYW5SZWRvX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFBhdGhcIiwgX2dldFBhdGhfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q3VycmVudFRvb2xcIiwgX2dldEN1cnJlbnRUb29sX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEN1cnJlbnRUb29sSWRcIiwgX2dldEN1cnJlbnRUb29sSWRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0RG9jdW1lbnRTZXR0aW5nc1wiLCBfZ2V0RG9jdW1lbnRTZXR0aW5nc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRJbnN0YW5jZVN0YXRlXCIsIF9nZXRJbnN0YW5jZVN0YXRlX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldE9wZW5NZW51c1wiLCBfZ2V0T3Blbk1lbnVzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldElzTWVudU9wZW5cIiwgX2dldElzTWVudU9wZW5fZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0UGFnZVN0YXRlc1wiLCBfZ2V0UGFnZVN0YXRlc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfZ2V0UGFnZVN0YXRlc1F1ZXJ5XCIsIF9fZ2V0UGFnZVN0YXRlc1F1ZXJ5X2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEN1cnJlbnRQYWdlU3RhdGVcIiwgX2dldEN1cnJlbnRQYWdlU3RhdGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldEN1cnJlbnRQYWdlU3RhdGVJZFwiLCBfX2dldEN1cnJlbnRQYWdlU3RhdGVJZF9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTZWxlY3RlZFNoYXBlSWRzXCIsIF9nZXRTZWxlY3RlZFNoYXBlSWRzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFNlbGVjdGVkU2hhcGVzXCIsIF9nZXRTZWxlY3RlZFNoYXBlc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRPbmx5U2VsZWN0ZWRTaGFwZUlkXCIsIF9nZXRPbmx5U2VsZWN0ZWRTaGFwZUlkX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldE9ubHlTZWxlY3RlZFNoYXBlXCIsIF9nZXRPbmx5U2VsZWN0ZWRTaGFwZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTZWxlY3Rpb25QYWdlQm91bmRzXCIsIF9nZXRTZWxlY3Rpb25QYWdlQm91bmRzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFNlbGVjdGlvblJvdGF0aW9uXCIsIF9nZXRTZWxlY3Rpb25Sb3RhdGlvbl9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kc1wiLCBfZ2V0U2VsZWN0aW9uUm90YXRlZFBhZ2VCb3VuZHNfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0U2VsZWN0aW9uUm90YXRlZFNjcmVlbkJvdW5kc1wiLCBfZ2V0U2VsZWN0aW9uUm90YXRlZFNjcmVlbkJvdW5kc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRGb2N1c2VkR3JvdXBJZFwiLCBfZ2V0Rm9jdXNlZEdyb3VwSWRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Rm9jdXNlZEdyb3VwXCIsIF9nZXRGb2N1c2VkR3JvdXBfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0RWRpdGluZ1NoYXBlSWRcIiwgX2dldEVkaXRpbmdTaGFwZUlkX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEVkaXRpbmdTaGFwZVwiLCBfZ2V0RWRpdGluZ1NoYXBlX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEhvdmVyZWRTaGFwZUlkXCIsIF9nZXRIb3ZlcmVkU2hhcGVJZF9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRIb3ZlcmVkU2hhcGVcIiwgX2dldEhvdmVyZWRTaGFwZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRIaW50aW5nU2hhcGVJZHNcIiwgX2dldEhpbnRpbmdTaGFwZUlkc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRIaW50aW5nU2hhcGVcIiwgX2dldEhpbnRpbmdTaGFwZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRFcmFzaW5nU2hhcGVJZHNcIiwgX2dldEVyYXNpbmdTaGFwZUlkc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRFcmFzaW5nU2hhcGVzXCIsIF9nZXRFcmFzaW5nU2hhcGVzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl91bnNhZmVfZ2V0Q2FtZXJhSWRcIiwgX191bnNhZmVfZ2V0Q2FtZXJhSWRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q2FtZXJhXCIsIF9nZXRDYW1lcmFfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nXCIsIF9nZXRWaWV3cG9ydFBhZ2VCb3VuZHNGb3JGb2xsb3dpbmdfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q2FtZXJhRm9yRm9sbG93aW5nXCIsIF9nZXRDYW1lcmFGb3JGb2xsb3dpbmdfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Wm9vbUxldmVsXCIsIF9nZXRab29tTGV2ZWxfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHNcIiwgX2dldFZpZXdwb3J0U2NyZWVuQm91bmRzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFZpZXdwb3J0U2NyZWVuQ2VudGVyXCIsIF9nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcl9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRWaWV3cG9ydFBhZ2VCb3VuZHNcIiwgX2dldFZpZXdwb3J0UGFnZUJvdW5kc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfZ2V0Q29sbGFib3JhdG9yc1F1ZXJ5XCIsIF9fZ2V0Q29sbGFib3JhdG9yc1F1ZXJ5X2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldENvbGxhYm9yYXRvcnNcIiwgX2dldENvbGxhYm9yYXRvcnNfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q29sbGFib3JhdG9yc09uQ3VycmVudFBhZ2VcIiwgX2dldENvbGxhYm9yYXRvcnNPbkN1cnJlbnRQYWdlX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFJlbmRlcmluZ1NoYXBlc1wiLCBfZ2V0UmVuZGVyaW5nU2hhcGVzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl9nZXRBbGxQYWdlc1F1ZXJ5XCIsIF9fZ2V0QWxsUGFnZXNRdWVyeV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRQYWdlc1wiLCBfZ2V0UGFnZXNfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q3VycmVudFBhZ2VJZFwiLCBfZ2V0Q3VycmVudFBhZ2VJZF9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRDdXJyZW50UGFnZVNoYXBlSWRzU29ydGVkXCIsIF9nZXRDdXJyZW50UGFnZVNoYXBlSWRzU29ydGVkX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl9nZXRBbGxBc3NldHNRdWVyeVwiLCBfX2dldEFsbEFzc2V0c1F1ZXJ5X2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl9nZXRTaGFwZUdlb21ldHJ5Q2FjaGVcIiwgX19nZXRTaGFwZUdlb21ldHJ5Q2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldFNoYXBlSGFuZGxlc0NhY2hlXCIsIF9fZ2V0U2hhcGVIYW5kbGVzQ2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldFNoYXBlUGFnZVRyYW5zZm9ybUNhY2hlXCIsIF9fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldFNoYXBlUGFnZUJvdW5kc0NhY2hlXCIsIF9fZ2V0U2hhcGVQYWdlQm91bmRzQ2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldFNoYXBlQ2xpcFBhdGhDYWNoZVwiLCBfX2dldFNoYXBlQ2xpcFBhdGhDYWNoZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfZ2V0U2hhcGVNYXNrQ2FjaGVcIiwgX19nZXRTaGFwZU1hc2tDYWNoZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzQ2FjaGVcIiwgX19nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHNDYWNoZV9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfbm90VmlzaWJsZVNoYXBlc1wiLCBfX25vdFZpc2libGVTaGFwZXNfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q3VsbGVkU2hhcGVzXCIsIF9nZXRDdWxsZWRTaGFwZXNfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q3VycmVudFBhZ2VCb3VuZHNcIiwgX2dldEN1cnJlbnRQYWdlQm91bmRzX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEN1cnJlbnRQYWdlU2hhcGVzXCIsIF9nZXRDdXJyZW50UGFnZVNoYXBlc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZFwiLCBfZ2V0Q3VycmVudFBhZ2VTaGFwZXNTb3J0ZWRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q3VycmVudFBhZ2VSZW5kZXJpbmdTaGFwZXNTb3J0ZWRcIiwgX2dldEN1cnJlbnRQYWdlUmVuZGVyaW5nU2hhcGVzU29ydGVkX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl9nZXRCaW5kaW5nc0luZGV4Q2FjaGVcIiwgX19nZXRCaW5kaW5nc0luZGV4Q2FjaGVfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX2dldFNlbGVjdGlvblNoYXJlZFN0eWxlc1wiLCBfX2dldFNlbGVjdGlvblNoYXJlZFN0eWxlc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTaGFyZWRTdHlsZXNcIiwgX2dldFNoYXJlZFN0eWxlc19kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTaGFyZWRPcGFjaXR5XCIsIF9nZXRTaGFyZWRPcGFjaXR5X2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldElzRm9jdXNlZFwiLCBfZ2V0SXNGb2N1c2VkX2RlYywgRWRpdG9yKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldElzUmVhZG9ubHlcIiwgX2dldElzUmVhZG9ubHlfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX3NldFNoaWZ0S2V5VGltZW91dFwiLCBfX3NldFNoaWZ0S2V5VGltZW91dF9kZWMsIEVkaXRvcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJfc2V0QWx0S2V5VGltZW91dFwiLCBfX3NldEFsdEtleVRpbWVvdXRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX3NldEN0cmxLZXlUaW1lb3V0XCIsIF9fc2V0Q3RybEtleVRpbWVvdXRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiX3NldE1ldGFLZXlUaW1lb3V0XCIsIF9fc2V0TWV0YUtleVRpbWVvdXRfZGVjLCBFZGl0b3IpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgRWRpdG9yKTtcbmZ1bmN0aW9uIGFsZXJ0TWF4U2hhcGVzKGVkaXRvciwgcGFnZUlkID0gZWRpdG9yLmdldEN1cnJlbnRQYWdlSWQoKSkge1xuICBjb25zdCBuYW1lID0gZWRpdG9yLmdldFBhZ2UocGFnZUlkKS5uYW1lO1xuICBlZGl0b3IuZW1pdChcIm1heC1zaGFwZXNcIiwgeyBuYW1lLCBwYWdlSWQsIGNvdW50OiBlZGl0b3Iub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlIH0pO1xufVxuZnVuY3Rpb24gYXBwbHlQYXJ0aWFsVG9SZWNvcmRXaXRoUHJvcHMocHJldiwgcGFydGlhbCkge1xuICBpZiAoIXBhcnRpYWwpIHJldHVybiBwcmV2O1xuICBsZXQgbmV4dCA9IG51bGw7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwYXJ0aWFsKTtcbiAgZm9yIChsZXQgaSA9IDAsIG4gPSBlbnRyaWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGNvbnN0IFtrLCB2XSA9IGVudHJpZXNbaV07XG4gICAgaWYgKHYgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgaWYgKGsgPT09IFwiaWRcIiB8fCBrID09PSBcInR5cGVcIiB8fCBrID09PSBcInR5cGVOYW1lXCIpIGNvbnRpbnVlO1xuICAgIGlmICh2ID09PSBwcmV2W2tdKSBjb250aW51ZTtcbiAgICBpZiAoIW5leHQpIG5leHQgPSB7IC4uLnByZXYgfTtcbiAgICBpZiAoayA9PT0gXCJwcm9wc1wiIHx8IGsgPT09IFwibWV0YVwiKSB7XG4gICAgICBuZXh0W2tdID0geyAuLi5wcmV2W2tdIH07XG4gICAgICBmb3IgKGNvbnN0IFtuZXh0S2V5LCBuZXh0VmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHYpKSB7XG4gICAgICAgIGlmIChuZXh0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBuZXh0W2tdW25leHRLZXldID0gbmV4dFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgO1xuICAgIG5leHRba10gPSB2O1xuICB9XG4gIGlmICghbmV4dCkgcmV0dXJuIHByZXY7XG4gIHJldHVybiBuZXh0O1xufVxuZnVuY3Rpb24gcHVzaFNoYXBlV2l0aERlc2NlbmRhbnRzKGVkaXRvciwgaWQsIHJlc3VsdCkge1xuICBjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShpZCk7XG4gIGlmICghc2hhcGUpIHJldHVybjtcbiAgcmVzdWx0LnB1c2goc2hhcGUpO1xuICBjb25zdCBjaGlsZElkcyA9IGVkaXRvci5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChpZCk7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gY2hpbGRJZHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgcHVzaFNoYXBlV2l0aERlc2NlbmRhbnRzKGVkaXRvciwgY2hpbGRJZHNbaV0sIHJlc3VsdCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGhJc29sYXRlZFNoYXBlcyhlZGl0b3IsIHNoYXBlSWRzLCBjYWxsYmFjaykge1xuICBsZXQgcmVzdWx0O1xuICBlZGl0b3IucnVuKFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBlZGl0b3Iuc3RvcmUuZXh0cmFjdGluZ0NoYW5nZXMoKCkgPT4ge1xuICAgICAgICBjb25zdCBiaW5kaW5nc1dpdGhCb3RoID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgICAgY29uc3QgYmluZGluZ3NUb1JlbW92ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3Qgc2hhcGVJZCBvZiBzaGFwZUlkcykge1xuICAgICAgICAgIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKHNoYXBlSWQpO1xuICAgICAgICAgIGlmICghc2hhcGUpIGNvbnRpbnVlO1xuICAgICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiBlZGl0b3IuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShzaGFwZUlkKSkge1xuICAgICAgICAgICAgY29uc3QgaGFzRnJvbSA9IHNoYXBlSWRzLmhhcyhiaW5kaW5nLmZyb21JZCk7XG4gICAgICAgICAgICBjb25zdCBoYXNUbyA9IHNoYXBlSWRzLmhhcyhiaW5kaW5nLnRvSWQpO1xuICAgICAgICAgICAgaWYgKGhhc0Zyb20gJiYgaGFzVG8pIHtcbiAgICAgICAgICAgICAgYmluZGluZ3NXaXRoQm90aC5hZGQoYmluZGluZy5pZCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXNGcm9tIHx8ICFoYXNUbykge1xuICAgICAgICAgICAgICBiaW5kaW5nc1RvUmVtb3ZlLmFkZChiaW5kaW5nLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWRpdG9yLmRlbGV0ZUJpbmRpbmdzKFsuLi5iaW5kaW5nc1RvUmVtb3ZlXSwgeyBpc29sYXRlU2hhcGVzOiB0cnVlIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IFJlc3VsdC5vayhjYWxsYmFjayhiaW5kaW5nc1dpdGhCb3RoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmVzdWx0ID0gUmVzdWx0LmVycihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWRpdG9yLnN0b3JlLmFwcGx5RGlmZihyZXZlcnNlUmVjb3Jkc0RpZmYoY2hhbmdlcykpO1xuICAgIH0sXG4gICAgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH1cbiAgKTtcbiAgaWYgKHJlc3VsdC5vaykge1xuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICB9XG59XG5mdW5jdGlvbiBnZXRDYW1lcmFGaXRYRml0WShlZGl0b3IsIGNhbWVyYU9wdGlvbnMpIHtcbiAgaWYgKCFjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzKSB0aHJvdyBFcnJvcihcIlNob3VsZCBoYXZlIGNvbnN0cmFpbnRzIGhlcmVcIik7XG4gIGNvbnN0IHtcbiAgICBwYWRkaW5nOiB7IHg6IHB4LCB5OiBweSB9XG4gIH0gPSBjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzO1xuICBjb25zdCB2c2IgPSBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgY29uc3QgYm91bmRzID0gQm94LkZyb20oY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5ib3VuZHMpO1xuICBjb25zdCB6eCA9ICh2c2IudyAtIHB4ICogMikgLyBib3VuZHMudztcbiAgY29uc3QgenkgPSAodnNiLmggLSBweSAqIDIpIC8gYm91bmRzLmg7XG4gIHJldHVybiB7IHp4LCB6eSB9O1xufVxuZXhwb3J0IHtcbiAgRWRpdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRpdG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BindingUtil: () => (/* binding */ BindingUtil)\n/* harmony export */ });\nclass BindingUtil {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  static props;\n  static migrations;\n  /**\n   * The type of the binding util, which should match the binding's type.\n   *\n   * @public\n   */\n  static type;\n}\n\n//# sourceMappingURL=BindingUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9iaW5kaW5ncy9CaW5kaW5nVXRpbC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvYmluZGluZ3MvQmluZGluZ1V0aWwubWpzP2NmNzgiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmluZGluZ1V0aWwge1xuICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgfVxuICBzdGF0aWMgcHJvcHM7XG4gIHN0YXRpYyBtaWdyYXRpb25zO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhlIGJpbmRpbmcgdXRpbCwgd2hpY2ggc2hvdWxkIG1hdGNoIHRoZSBiaW5kaW5nJ3MgdHlwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIHR5cGU7XG59XG5leHBvcnQge1xuICBCaW5kaW5nVXRpbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJpbmRpbmdVdGlsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindingsIndex: () => (/* binding */ bindingsIndex)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst bindingsIndex = (editor) => {\n  const { store } = editor;\n  const bindingsHistory = store.query.filterHistory(\"binding\");\n  const bindingsQuery = store.query.records(\"binding\");\n  function fromScratch() {\n    const allBindings = bindingsQuery.get();\n    const shape2Binding = /* @__PURE__ */ new Map();\n    for (const binding of allBindings) {\n      const { fromId, toId } = binding;\n      const bindingsForFromShape = shape2Binding.get(fromId);\n      if (!bindingsForFromShape) {\n        shape2Binding.set(fromId, [binding]);\n      } else {\n        bindingsForFromShape.push(binding);\n      }\n      const bindingsForToShape = shape2Binding.get(toId);\n      if (!bindingsForToShape) {\n        shape2Binding.set(toId, [binding]);\n      } else {\n        bindingsForToShape.push(binding);\n      }\n    }\n    return shape2Binding;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"arrowBindingsIndex\", (_lastValue, lastComputedEpoch) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(_lastValue)) {\n      return fromScratch();\n    }\n    const lastValue = _lastValue;\n    const diff = bindingsHistory.getDiffSince(lastComputedEpoch);\n    if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      return fromScratch();\n    }\n    let nextValue = void 0;\n    function removingBinding(binding) {\n      nextValue ??= new Map(lastValue);\n      const prevFrom = nextValue.get(binding.fromId);\n      const nextFrom = prevFrom?.filter((b) => b.id !== binding.id);\n      if (!nextFrom?.length) {\n        nextValue.delete(binding.fromId);\n      } else {\n        nextValue.set(binding.fromId, nextFrom);\n      }\n      const prevTo = nextValue.get(binding.toId);\n      const nextTo = prevTo?.filter((b) => b.id !== binding.id);\n      if (!nextTo?.length) {\n        nextValue.delete(binding.toId);\n      } else {\n        nextValue.set(binding.toId, nextTo);\n      }\n    }\n    function ensureNewArray(shapeId) {\n      nextValue ??= new Map(lastValue);\n      let result = nextValue.get(shapeId);\n      if (!result) {\n        result = [];\n        nextValue.set(shapeId, result);\n      } else if (result === lastValue.get(shapeId)) {\n        result = result.slice(0);\n        nextValue.set(shapeId, result);\n      }\n      return result;\n    }\n    function addBinding(binding) {\n      ensureNewArray(binding.fromId).push(binding);\n      ensureNewArray(binding.toId).push(binding);\n    }\n    for (const changes of diff) {\n      for (const newBinding of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n        addBinding(newBinding);\n      }\n      for (const [prev, next] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n        removingBinding(prev);\n        addBinding(next);\n      }\n      for (const prev of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n        removingBinding(prev);\n      }\n    }\n    return nextValue ?? lastValue;\n  });\n};\n\n//# sourceMappingURL=bindingsIndex.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9iaW5kaW5nc0luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUU7QUFDdkI7QUFDaEQ7QUFDQSxVQUFVLFFBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFRO0FBQ2pCLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOERBQWU7QUFDOUM7QUFDQTtBQUNBLGlDQUFpQyw4REFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9iaW5kaW5nc0luZGV4Lm1qcz9hMzkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJFU0VUX1ZBTFVFLCBjb21wdXRlZCwgaXNVbmluaXRpYWxpemVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IG9iamVjdE1hcFZhbHVlcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5jb25zdCBiaW5kaW5nc0luZGV4ID0gKGVkaXRvcikgPT4ge1xuICBjb25zdCB7IHN0b3JlIH0gPSBlZGl0b3I7XG4gIGNvbnN0IGJpbmRpbmdzSGlzdG9yeSA9IHN0b3JlLnF1ZXJ5LmZpbHRlckhpc3RvcnkoXCJiaW5kaW5nXCIpO1xuICBjb25zdCBiaW5kaW5nc1F1ZXJ5ID0gc3RvcmUucXVlcnkucmVjb3JkcyhcImJpbmRpbmdcIik7XG4gIGZ1bmN0aW9uIGZyb21TY3JhdGNoKCkge1xuICAgIGNvbnN0IGFsbEJpbmRpbmdzID0gYmluZGluZ3NRdWVyeS5nZXQoKTtcbiAgICBjb25zdCBzaGFwZTJCaW5kaW5nID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgYWxsQmluZGluZ3MpIHtcbiAgICAgIGNvbnN0IHsgZnJvbUlkLCB0b0lkIH0gPSBiaW5kaW5nO1xuICAgICAgY29uc3QgYmluZGluZ3NGb3JGcm9tU2hhcGUgPSBzaGFwZTJCaW5kaW5nLmdldChmcm9tSWQpO1xuICAgICAgaWYgKCFiaW5kaW5nc0ZvckZyb21TaGFwZSkge1xuICAgICAgICBzaGFwZTJCaW5kaW5nLnNldChmcm9tSWQsIFtiaW5kaW5nXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5kaW5nc0ZvckZyb21TaGFwZS5wdXNoKGJpbmRpbmcpO1xuICAgICAgfVxuICAgICAgY29uc3QgYmluZGluZ3NGb3JUb1NoYXBlID0gc2hhcGUyQmluZGluZy5nZXQodG9JZCk7XG4gICAgICBpZiAoIWJpbmRpbmdzRm9yVG9TaGFwZSkge1xuICAgICAgICBzaGFwZTJCaW5kaW5nLnNldCh0b0lkLCBbYmluZGluZ10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluZGluZ3NGb3JUb1NoYXBlLnB1c2goYmluZGluZyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaGFwZTJCaW5kaW5nO1xuICB9XG4gIHJldHVybiBjb21wdXRlZChcImFycm93QmluZGluZ3NJbmRleFwiLCAoX2xhc3RWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICBpZiAoaXNVbmluaXRpYWxpemVkKF9sYXN0VmFsdWUpKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICB9XG4gICAgY29uc3QgbGFzdFZhbHVlID0gX2xhc3RWYWx1ZTtcbiAgICBjb25zdCBkaWZmID0gYmluZGluZ3NIaXN0b3J5LmdldERpZmZTaW5jZShsYXN0Q29tcHV0ZWRFcG9jaCk7XG4gICAgaWYgKGRpZmYgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICB9XG4gICAgbGV0IG5leHRWYWx1ZSA9IHZvaWQgMDtcbiAgICBmdW5jdGlvbiByZW1vdmluZ0JpbmRpbmcoYmluZGluZykge1xuICAgICAgbmV4dFZhbHVlID8/PSBuZXcgTWFwKGxhc3RWYWx1ZSk7XG4gICAgICBjb25zdCBwcmV2RnJvbSA9IG5leHRWYWx1ZS5nZXQoYmluZGluZy5mcm9tSWQpO1xuICAgICAgY29uc3QgbmV4dEZyb20gPSBwcmV2RnJvbT8uZmlsdGVyKChiKSA9PiBiLmlkICE9PSBiaW5kaW5nLmlkKTtcbiAgICAgIGlmICghbmV4dEZyb20/Lmxlbmd0aCkge1xuICAgICAgICBuZXh0VmFsdWUuZGVsZXRlKGJpbmRpbmcuZnJvbUlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRWYWx1ZS5zZXQoYmluZGluZy5mcm9tSWQsIG5leHRGcm9tKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZXZUbyA9IG5leHRWYWx1ZS5nZXQoYmluZGluZy50b0lkKTtcbiAgICAgIGNvbnN0IG5leHRUbyA9IHByZXZUbz8uZmlsdGVyKChiKSA9PiBiLmlkICE9PSBiaW5kaW5nLmlkKTtcbiAgICAgIGlmICghbmV4dFRvPy5sZW5ndGgpIHtcbiAgICAgICAgbmV4dFZhbHVlLmRlbGV0ZShiaW5kaW5nLnRvSWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFZhbHVlLnNldChiaW5kaW5nLnRvSWQsIG5leHRUbyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVuc3VyZU5ld0FycmF5KHNoYXBlSWQpIHtcbiAgICAgIG5leHRWYWx1ZSA/Pz0gbmV3IE1hcChsYXN0VmFsdWUpO1xuICAgICAgbGV0IHJlc3VsdCA9IG5leHRWYWx1ZS5nZXQoc2hhcGVJZCk7XG4gICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgICAgbmV4dFZhbHVlLnNldChzaGFwZUlkLCByZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IGxhc3RWYWx1ZS5nZXQoc2hhcGVJZCkpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDApO1xuICAgICAgICBuZXh0VmFsdWUuc2V0KHNoYXBlSWQsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICAgIGVuc3VyZU5ld0FycmF5KGJpbmRpbmcuZnJvbUlkKS5wdXNoKGJpbmRpbmcpO1xuICAgICAgZW5zdXJlTmV3QXJyYXkoYmluZGluZy50b0lkKS5wdXNoKGJpbmRpbmcpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgZGlmZikge1xuICAgICAgZm9yIChjb25zdCBuZXdCaW5kaW5nIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLmFkZGVkKSkge1xuICAgICAgICBhZGRCaW5kaW5nKG5ld0JpbmRpbmcpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBbcHJldiwgbmV4dF0gb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMudXBkYXRlZCkpIHtcbiAgICAgICAgcmVtb3ZpbmdCaW5kaW5nKHByZXYpO1xuICAgICAgICBhZGRCaW5kaW5nKG5leHQpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBwcmV2IG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnJlbW92ZWQpKSB7XG4gICAgICAgIHJlbW92aW5nQmluZGluZyhwcmV2KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5leHRWYWx1ZSA/PyBsYXN0VmFsdWU7XG4gIH0pO1xufTtcbmV4cG9ydCB7XG4gIGJpbmRpbmdzSW5kZXhcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nc0luZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs":
/*!******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notVisibleShapes: () => (/* binding */ notVisibleShapes)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n\nfunction isShapeNotVisible(editor, id, viewportPageBounds) {\n  const maskedPageBounds = editor.getShapeMaskedPageBounds(id);\n  if (maskedPageBounds === void 0) return true;\n  return !viewportPageBounds.includes(maskedPageBounds);\n}\nconst notVisibleShapes = (editor) => {\n  function fromScratch(editor2) {\n    const shapes = editor2.getCurrentPageShapeIds();\n    const viewportPageBounds = editor2.getViewportPageBounds();\n    const notVisibleShapes2 = /* @__PURE__ */ new Set();\n    shapes.forEach((id) => {\n      if (isShapeNotVisible(editor2, id, viewportPageBounds)) {\n        notVisibleShapes2.add(id);\n      }\n    });\n    return notVisibleShapes2;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"getCulledShapes\", (prevValue) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n      return fromScratch(editor);\n    }\n    const nextValue = fromScratch(editor);\n    if (prevValue.size !== nextValue.size) return nextValue;\n    for (const prev of prevValue) {\n      if (!nextValue.has(prev)) {\n        return nextValue;\n      }\n    }\n    return prevValue;\n  });\n};\n\n//# sourceMappingURL=notVisibleShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9ub3RWaXNpYmxlU2hhcGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxTQUFTLHVEQUFRO0FBQ2pCLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9ub3RWaXNpYmxlU2hhcGVzLm1qcz9mOTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXB1dGVkLCBpc1VuaW5pdGlhbGl6ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuZnVuY3Rpb24gaXNTaGFwZU5vdFZpc2libGUoZWRpdG9yLCBpZCwgdmlld3BvcnRQYWdlQm91bmRzKSB7XG4gIGNvbnN0IG1hc2tlZFBhZ2VCb3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzKGlkKTtcbiAgaWYgKG1hc2tlZFBhZ2VCb3VuZHMgPT09IHZvaWQgMCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiAhdmlld3BvcnRQYWdlQm91bmRzLmluY2x1ZGVzKG1hc2tlZFBhZ2VCb3VuZHMpO1xufVxuY29uc3Qgbm90VmlzaWJsZVNoYXBlcyA9IChlZGl0b3IpID0+IHtcbiAgZnVuY3Rpb24gZnJvbVNjcmF0Y2goZWRpdG9yMikge1xuICAgIGNvbnN0IHNoYXBlcyA9IGVkaXRvcjIuZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpO1xuICAgIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IGVkaXRvcjIuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgY29uc3Qgbm90VmlzaWJsZVNoYXBlczIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHNoYXBlcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgaWYgKGlzU2hhcGVOb3RWaXNpYmxlKGVkaXRvcjIsIGlkLCB2aWV3cG9ydFBhZ2VCb3VuZHMpKSB7XG4gICAgICAgIG5vdFZpc2libGVTaGFwZXMyLmFkZChpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5vdFZpc2libGVTaGFwZXMyO1xuICB9XG4gIHJldHVybiBjb21wdXRlZChcImdldEN1bGxlZFNoYXBlc1wiLCAocHJldlZhbHVlKSA9PiB7XG4gICAgaWYgKGlzVW5pbml0aWFsaXplZChwcmV2VmFsdWUpKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goZWRpdG9yKTtcbiAgICB9XG4gICAgY29uc3QgbmV4dFZhbHVlID0gZnJvbVNjcmF0Y2goZWRpdG9yKTtcbiAgICBpZiAocHJldlZhbHVlLnNpemUgIT09IG5leHRWYWx1ZS5zaXplKSByZXR1cm4gbmV4dFZhbHVlO1xuICAgIGZvciAoY29uc3QgcHJldiBvZiBwcmV2VmFsdWUpIHtcbiAgICAgIGlmICghbmV4dFZhbHVlLmhhcyhwcmV2KSkge1xuICAgICAgICByZXR1cm4gbmV4dFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJldlZhbHVlO1xuICB9KTtcbn07XG5leHBvcnQge1xuICBub3RWaXNpYmxlU2hhcGVzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm90VmlzaWJsZVNoYXBlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parentsToChildren: () => (/* binding */ parentsToChildren)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\n\nconst parentsToChildren = (store) => {\n  const shapeIdsQuery = store.query.ids(\"shape\");\n  const shapeHistory = store.query.filterHistory(\"shape\");\n  function fromScratch() {\n    const result = {};\n    const shapeIds = shapeIdsQuery.get();\n    const shapes = Array(shapeIds.size);\n    shapeIds.forEach((id) => shapes.push(store.get(id)));\n    shapes.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.sortByIndex);\n    shapes.forEach((shape) => {\n      if (!result[shape.parentId]) {\n        result[shape.parentId] = [];\n      }\n      result[shape.parentId].push(shape.id);\n    });\n    return result;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n    \"parentsToChildrenWithIndexes\",\n    (lastValue, lastComputedEpoch) => {\n      if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(lastValue)) {\n        return fromScratch();\n      }\n      const diff = shapeHistory.getDiffSince(lastComputedEpoch);\n      if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n        return fromScratch();\n      }\n      if (diff.length === 0) return lastValue;\n      let newValue = null;\n      const ensureNewArray = (parentId) => {\n        if (!newValue) {\n          newValue = { ...lastValue };\n        }\n        if (!newValue[parentId]) {\n          newValue[parentId] = [];\n        } else if (newValue[parentId] === lastValue[parentId]) {\n          newValue[parentId] = [...newValue[parentId]];\n        }\n      };\n      const toSort = /* @__PURE__ */ new Set();\n      let changes;\n      for (let i = 0, n = diff.length; i < n; i++) {\n        changes = diff[i];\n        for (const record of Object.values(changes.added)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(record)) continue;\n          ensureNewArray(record.parentId);\n          newValue[record.parentId].push(record.id);\n          toSort.add(newValue[record.parentId]);\n        }\n        for (const [from, to] of Object.values(changes.updated)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(to)) continue;\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(from)) continue;\n          if (from.parentId !== to.parentId) {\n            ensureNewArray(from.parentId);\n            ensureNewArray(to.parentId);\n            newValue[from.parentId].splice(newValue[from.parentId].indexOf(to.id), 1);\n            newValue[to.parentId].push(to.id);\n            toSort.add(newValue[to.parentId]);\n          } else if (from.index !== to.index) {\n            ensureNewArray(to.parentId);\n            const idx = newValue[to.parentId].indexOf(to.id);\n            newValue[to.parentId][idx] = to.id;\n            toSort.add(newValue[to.parentId]);\n          }\n        }\n        for (const record of Object.values(changes.removed)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(record)) continue;\n          ensureNewArray(record.parentId);\n          newValue[record.parentId].splice(newValue[record.parentId].indexOf(record.id), 1);\n        }\n      }\n      for (const arr of toSort) {\n        const shapesInArr = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.compact)(arr.map((id) => store.get(id)));\n        shapesInArr.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.sortByIndex);\n        arr.splice(0, arr.length, ...shapesInArr.map((shape) => shape.id));\n      }\n      return newValue ?? lastValue;\n    }\n  );\n};\n\n//# sourceMappingURL=parentsToChildren.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9wYXJlbnRzVG9DaGlsZHJlbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RTtBQUM1QjtBQUNVO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQjtBQUNBO0FBQ0EsVUFBVSw4REFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE9BQU87QUFDOUM7QUFDQTtBQUNBLGVBQWUseURBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQU87QUFDdEIsZUFBZSx5REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlEQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQU87QUFDbkMseUJBQXlCLHNEQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL2Rlcml2YXRpb25zL3BhcmVudHNUb0NoaWxkcmVuLm1qcz8yYmIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXB1dGVkLCBpc1VuaW5pdGlhbGl6ZWQsIFJFU0VUX1ZBTFVFIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGlzU2hhcGUgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHsgY29tcGFjdCwgc29ydEJ5SW5kZXggfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuY29uc3QgcGFyZW50c1RvQ2hpbGRyZW4gPSAoc3RvcmUpID0+IHtcbiAgY29uc3Qgc2hhcGVJZHNRdWVyeSA9IHN0b3JlLnF1ZXJ5LmlkcyhcInNoYXBlXCIpO1xuICBjb25zdCBzaGFwZUhpc3RvcnkgPSBzdG9yZS5xdWVyeS5maWx0ZXJIaXN0b3J5KFwic2hhcGVcIik7XG4gIGZ1bmN0aW9uIGZyb21TY3JhdGNoKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IHNoYXBlSWRzID0gc2hhcGVJZHNRdWVyeS5nZXQoKTtcbiAgICBjb25zdCBzaGFwZXMgPSBBcnJheShzaGFwZUlkcy5zaXplKTtcbiAgICBzaGFwZUlkcy5mb3JFYWNoKChpZCkgPT4gc2hhcGVzLnB1c2goc3RvcmUuZ2V0KGlkKSkpO1xuICAgIHNoYXBlcy5zb3J0KHNvcnRCeUluZGV4KTtcbiAgICBzaGFwZXMuZm9yRWFjaCgoc2hhcGUpID0+IHtcbiAgICAgIGlmICghcmVzdWx0W3NoYXBlLnBhcmVudElkXSkge1xuICAgICAgICByZXN1bHRbc2hhcGUucGFyZW50SWRdID0gW107XG4gICAgICB9XG4gICAgICByZXN1bHRbc2hhcGUucGFyZW50SWRdLnB1c2goc2hhcGUuaWQpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGNvbXB1dGVkKFxuICAgIFwicGFyZW50c1RvQ2hpbGRyZW5XaXRoSW5kZXhlc1wiLFxuICAgIChsYXN0VmFsdWUsIGxhc3RDb21wdXRlZEVwb2NoKSA9PiB7XG4gICAgICBpZiAoaXNVbmluaXRpYWxpemVkKGxhc3RWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmID0gc2hhcGVIaXN0b3J5LmdldERpZmZTaW5jZShsYXN0Q29tcHV0ZWRFcG9jaCk7XG4gICAgICBpZiAoZGlmZiA9PT0gUkVTRVRfVkFMVUUpIHtcbiAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgICB9XG4gICAgICBpZiAoZGlmZi5sZW5ndGggPT09IDApIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICBsZXQgbmV3VmFsdWUgPSBudWxsO1xuICAgICAgY29uc3QgZW5zdXJlTmV3QXJyYXkgPSAocGFyZW50SWQpID0+IHtcbiAgICAgICAgaWYgKCFuZXdWYWx1ZSkge1xuICAgICAgICAgIG5ld1ZhbHVlID0geyAuLi5sYXN0VmFsdWUgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ld1ZhbHVlW3BhcmVudElkXSkge1xuICAgICAgICAgIG5ld1ZhbHVlW3BhcmVudElkXSA9IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlW3BhcmVudElkXSA9PT0gbGFzdFZhbHVlW3BhcmVudElkXSkge1xuICAgICAgICAgIG5ld1ZhbHVlW3BhcmVudElkXSA9IFsuLi5uZXdWYWx1ZVtwYXJlbnRJZF1dO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgdG9Tb3J0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGxldCBjaGFuZ2VzO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBkaWZmLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBjaGFuZ2VzID0gZGlmZltpXTtcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgT2JqZWN0LnZhbHVlcyhjaGFuZ2VzLmFkZGVkKSkge1xuICAgICAgICAgIGlmICghaXNTaGFwZShyZWNvcmQpKSBjb250aW51ZTtcbiAgICAgICAgICBlbnN1cmVOZXdBcnJheShyZWNvcmQucGFyZW50SWQpO1xuICAgICAgICAgIG5ld1ZhbHVlW3JlY29yZC5wYXJlbnRJZF0ucHVzaChyZWNvcmQuaWQpO1xuICAgICAgICAgIHRvU29ydC5hZGQobmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbZnJvbSwgdG9dIG9mIE9iamVjdC52YWx1ZXMoY2hhbmdlcy51cGRhdGVkKSkge1xuICAgICAgICAgIGlmICghaXNTaGFwZSh0bykpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghaXNTaGFwZShmcm9tKSkgY29udGludWU7XG4gICAgICAgICAgaWYgKGZyb20ucGFyZW50SWQgIT09IHRvLnBhcmVudElkKSB7XG4gICAgICAgICAgICBlbnN1cmVOZXdBcnJheShmcm9tLnBhcmVudElkKTtcbiAgICAgICAgICAgIGVuc3VyZU5ld0FycmF5KHRvLnBhcmVudElkKTtcbiAgICAgICAgICAgIG5ld1ZhbHVlW2Zyb20ucGFyZW50SWRdLnNwbGljZShuZXdWYWx1ZVtmcm9tLnBhcmVudElkXS5pbmRleE9mKHRvLmlkKSwgMSk7XG4gICAgICAgICAgICBuZXdWYWx1ZVt0by5wYXJlbnRJZF0ucHVzaCh0by5pZCk7XG4gICAgICAgICAgICB0b1NvcnQuYWRkKG5ld1ZhbHVlW3RvLnBhcmVudElkXSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChmcm9tLmluZGV4ICE9PSB0by5pbmRleCkge1xuICAgICAgICAgICAgZW5zdXJlTmV3QXJyYXkodG8ucGFyZW50SWQpO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gbmV3VmFsdWVbdG8ucGFyZW50SWRdLmluZGV4T2YodG8uaWQpO1xuICAgICAgICAgICAgbmV3VmFsdWVbdG8ucGFyZW50SWRdW2lkeF0gPSB0by5pZDtcbiAgICAgICAgICAgIHRvU29ydC5hZGQobmV3VmFsdWVbdG8ucGFyZW50SWRdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgT2JqZWN0LnZhbHVlcyhjaGFuZ2VzLnJlbW92ZWQpKSB7XG4gICAgICAgICAgaWYgKCFpc1NoYXBlKHJlY29yZCkpIGNvbnRpbnVlO1xuICAgICAgICAgIGVuc3VyZU5ld0FycmF5KHJlY29yZC5wYXJlbnRJZCk7XG4gICAgICAgICAgbmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXS5zcGxpY2UobmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXS5pbmRleE9mKHJlY29yZC5pZCksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGFyciBvZiB0b1NvcnQpIHtcbiAgICAgICAgY29uc3Qgc2hhcGVzSW5BcnIgPSBjb21wYWN0KGFyci5tYXAoKGlkKSA9PiBzdG9yZS5nZXQoaWQpKSk7XG4gICAgICAgIHNoYXBlc0luQXJyLnNvcnQoc29ydEJ5SW5kZXgpO1xuICAgICAgICBhcnIuc3BsaWNlKDAsIGFyci5sZW5ndGgsIC4uLnNoYXBlc0luQXJyLm1hcCgoc2hhcGUpID0+IHNoYXBlLmlkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3VmFsdWUgPz8gbGFzdFZhbHVlO1xuICAgIH1cbiAgKTtcbn07XG5leHBvcnQge1xuICBwYXJlbnRzVG9DaGlsZHJlblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmVudHNUb0NoaWxkcmVuLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveShapeIdsInCurrentPage: () => (/* binding */ deriveShapeIdsInCurrentPage)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n\n\n\nconst isShapeInPage = (store, pageId, shape) => {\n  while (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId)) {\n    const parent = store.get(shape.parentId);\n    if (!parent) return false;\n    shape = parent;\n  }\n  return shape.parentId === pageId;\n};\nconst deriveShapeIdsInCurrentPage = (store, getCurrentPageId) => {\n  const shapesIndex = store.query.ids(\"shape\");\n  let lastPageId = null;\n  function fromScratch() {\n    const currentPageId = getCurrentPageId();\n    lastPageId = currentPageId;\n    return new Set(\n      [...shapesIndex.get()].filter((id) => isShapeInPage(store, currentPageId, store.get(id)))\n    );\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"_shapeIdsInCurrentPage\", (prevValue, lastComputedEpoch) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n      return fromScratch();\n    }\n    const currentPageId = getCurrentPageId();\n    if (currentPageId !== lastPageId) {\n      return fromScratch();\n    }\n    const diff = store.history.getDiffSince(lastComputedEpoch);\n    if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      return fromScratch();\n    }\n    const builder = new _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.IncrementalSetConstructor(\n      prevValue\n    );\n    for (const changes of diff) {\n      for (const record of Object.values(changes.added)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShape)(record) && isShapeInPage(store, currentPageId, record)) {\n          builder.add(record.id);\n        }\n      }\n      for (const [_from, to] of Object.values(changes.updated)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShape)(to)) {\n          if (isShapeInPage(store, currentPageId, to)) {\n            builder.add(to.id);\n          } else {\n            builder.remove(to.id);\n          }\n        }\n      }\n      for (const id of Object.keys(changes.removed)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(id)) {\n          builder.remove(id);\n        }\n      }\n    }\n    const result = builder.get();\n    if (!result) {\n      return prevValue;\n    }\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(result.value, result.diff);\n  });\n};\n\n//# sourceMappingURL=shapeIdsInCurrentPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9zaGFwZUlkc0luQ3VycmVudFBhZ2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUY7QUFDdkI7QUFLaEM7QUFDMUI7QUFDQSxVQUFVLDBEQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQixRQUFRLDhEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFXO0FBQzVCO0FBQ0E7QUFDQSx3QkFBd0Isb0VBQXlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQU87QUFDbkI7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyREFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1REFBUTtBQUNuQixHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9zaGFwZUlkc0luQ3VycmVudFBhZ2UubWpzPzViNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIGlzVW5pbml0aWFsaXplZCwgUkVTRVRfVkFMVUUsIHdpdGhEaWZmIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHtcbiAgaXNQYWdlSWQsXG4gIGlzU2hhcGUsXG4gIGlzU2hhcGVJZFxufSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuY29uc3QgaXNTaGFwZUluUGFnZSA9IChzdG9yZSwgcGFnZUlkLCBzaGFwZSkgPT4ge1xuICB3aGlsZSAoIWlzUGFnZUlkKHNoYXBlLnBhcmVudElkKSkge1xuICAgIGNvbnN0IHBhcmVudCA9IHN0b3JlLmdldChzaGFwZS5wYXJlbnRJZCk7XG4gICAgaWYgKCFwYXJlbnQpIHJldHVybiBmYWxzZTtcbiAgICBzaGFwZSA9IHBhcmVudDtcbiAgfVxuICByZXR1cm4gc2hhcGUucGFyZW50SWQgPT09IHBhZ2VJZDtcbn07XG5jb25zdCBkZXJpdmVTaGFwZUlkc0luQ3VycmVudFBhZ2UgPSAoc3RvcmUsIGdldEN1cnJlbnRQYWdlSWQpID0+IHtcbiAgY29uc3Qgc2hhcGVzSW5kZXggPSBzdG9yZS5xdWVyeS5pZHMoXCJzaGFwZVwiKTtcbiAgbGV0IGxhc3RQYWdlSWQgPSBudWxsO1xuICBmdW5jdGlvbiBmcm9tU2NyYXRjaCgpIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICAgIGxhc3RQYWdlSWQgPSBjdXJyZW50UGFnZUlkO1xuICAgIHJldHVybiBuZXcgU2V0KFxuICAgICAgWy4uLnNoYXBlc0luZGV4LmdldCgpXS5maWx0ZXIoKGlkKSA9PiBpc1NoYXBlSW5QYWdlKHN0b3JlLCBjdXJyZW50UGFnZUlkLCBzdG9yZS5nZXQoaWQpKSlcbiAgICApO1xuICB9XG4gIHJldHVybiBjb21wdXRlZChcIl9zaGFwZUlkc0luQ3VycmVudFBhZ2VcIiwgKHByZXZWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICBpZiAoaXNVbmluaXRpYWxpemVkKHByZXZWYWx1ZSkpIHtcbiAgICAgIHJldHVybiBmcm9tU2NyYXRjaCgpO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICAgIGlmIChjdXJyZW50UGFnZUlkICE9PSBsYXN0UGFnZUlkKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICB9XG4gICAgY29uc3QgZGlmZiA9IHN0b3JlLmhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICBpZiAoZGlmZiA9PT0gUkVTRVRfVkFMVUUpIHtcbiAgICAgIHJldHVybiBmcm9tU2NyYXRjaCgpO1xuICAgIH1cbiAgICBjb25zdCBidWlsZGVyID0gbmV3IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IoXG4gICAgICBwcmV2VmFsdWVcbiAgICApO1xuICAgIGZvciAoY29uc3QgY2hhbmdlcyBvZiBkaWZmKSB7XG4gICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgIGlmIChpc1NoYXBlKHJlY29yZCkgJiYgaXNTaGFwZUluUGFnZShzdG9yZSwgY3VycmVudFBhZ2VJZCwgcmVjb3JkKSkge1xuICAgICAgICAgIGJ1aWxkZXIuYWRkKHJlY29yZC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW19mcm9tLCB0b10gb2YgT2JqZWN0LnZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgIGlmIChpc1NoYXBlKHRvKSkge1xuICAgICAgICAgIGlmIChpc1NoYXBlSW5QYWdlKHN0b3JlLCBjdXJyZW50UGFnZUlkLCB0bykpIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkKHRvLmlkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnVpbGRlci5yZW1vdmUodG8uaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhjaGFuZ2VzLnJlbW92ZWQpKSB7XG4gICAgICAgIGlmIChpc1NoYXBlSWQoaWQpKSB7XG4gICAgICAgICAgYnVpbGRlci5yZW1vdmUoaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGJ1aWxkZXIuZ2V0KCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHJldHVybiBwcmV2VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGlmZihyZXN1bHQudmFsdWUsIHJlc3VsdC5kaWZmKTtcbiAgfSk7XG59O1xuZXhwb3J0IHtcbiAgZGVyaXZlU2hhcGVJZHNJbkN1cnJlbnRQYWdlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcGVJZHNJbkN1cnJlbnRQYWdlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClickManager: () => (/* binding */ ClickManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _cancelDoubleClickTimeout_dec, __getClickTimeout_dec, _init;\n\n\nconst MAX_CLICK_DISTANCE = 40;\n__getClickTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind], _cancelDoubleClickTimeout_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind];\nclass ClickManager {\n  constructor(editor) {\n    this.editor = editor;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"_clickId\", \"\");\n    __publicField(this, \"_clickTimeout\");\n    __publicField(this, \"_clickScreenPoint\");\n    __publicField(this, \"_previousScreenPoint\");\n    /**\n     * The current click state.\n     *\n     * @internal\n     */\n    __publicField(this, \"_clickState\", \"idle\");\n    __publicField(this, \"lastPointerInfo\", {});\n  }\n  _getClickTimeout(state, id = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniqueId)()) {\n    this._clickId = id;\n    clearTimeout(this._clickTimeout);\n    this._clickTimeout = this.editor.timers.setTimeout(\n      () => {\n        if (this._clickState === state && this._clickId === id) {\n          switch (this._clickState) {\n            case \"pendingTriple\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"double_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            case \"pendingQuadruple\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"triple_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            case \"pendingOverflow\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"quadruple_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            default: {\n            }\n          }\n          this._clickState = \"idle\";\n        }\n      },\n      state === \"idle\" || state === \"pendingDouble\" ? this.editor.options.doubleClickDurationMs : this.editor.options.multiClickDurationMs\n    );\n  }\n  /**\n   * The current click state.\n   *\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get clickState() {\n    return this._clickState;\n  }\n  handlePointerEvent(info) {\n    switch (info.name) {\n      case \"pointer_down\": {\n        if (!this._clickState) return info;\n        this._clickScreenPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.From(info.point);\n        if (this._previousScreenPoint && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(this._previousScreenPoint, this._clickScreenPoint) > MAX_CLICK_DISTANCE ** 2) {\n          this._clickState = \"idle\";\n        }\n        this._previousScreenPoint = this._clickScreenPoint;\n        this.lastPointerInfo = info;\n        switch (this._clickState) {\n          case \"pendingDouble\": {\n            this._clickState = \"pendingTriple\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"double_click\",\n              phase: \"down\"\n            };\n          }\n          case \"pendingTriple\": {\n            this._clickState = \"pendingQuadruple\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"triple_click\",\n              phase: \"down\"\n            };\n          }\n          case \"pendingQuadruple\": {\n            this._clickState = \"pendingOverflow\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"quadruple_click\",\n              phase: \"down\"\n            };\n          }\n          case \"idle\": {\n            this._clickState = \"pendingDouble\";\n            break;\n          }\n          case \"pendingOverflow\": {\n            this._clickState = \"overflow\";\n            break;\n          }\n          default: {\n          }\n        }\n        this._clickTimeout = this._getClickTimeout(this._clickState);\n        return info;\n      }\n      case \"pointer_up\": {\n        if (!this._clickState) return info;\n        this._clickScreenPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.From(info.point);\n        switch (this._clickState) {\n          case \"pendingTriple\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"double_click\",\n              phase: \"up\"\n            };\n          }\n          case \"pendingQuadruple\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"triple_click\",\n              phase: \"up\"\n            };\n          }\n          case \"pendingOverflow\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"quadruple_click\",\n              phase: \"up\"\n            };\n          }\n          default: {\n          }\n        }\n        return info;\n      }\n      case \"pointer_move\": {\n        if (this._clickState !== \"idle\" && this._clickScreenPoint && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(this._clickScreenPoint, this.editor.inputs.currentScreenPoint) > (this.editor.getInstanceState().isCoarsePointer ? this.editor.options.coarseDragDistanceSquared : this.editor.options.dragDistanceSquared)) {\n          this.cancelDoubleClickTimeout();\n        }\n        return info;\n      }\n    }\n    return info;\n  }\n  cancelDoubleClickTimeout() {\n    this._clickTimeout = clearTimeout(this._clickTimeout);\n    this._clickState = \"idle\";\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"_getClickTimeout\", __getClickTimeout_dec, ClickManager);\n__decorateElement(_init, 1, \"cancelDoubleClickTimeout\", _cancelDoubleClickTimeout_dec, ClickManager);\n__decoratorMetadata(_init, ClickManager);\n\n//# sourceMappingURL=ClickManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9DbGlja01hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx3SkFBd0o7QUFDek47QUFDQTtBQUNBLGtFQUFrRSxPQUFPO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBIQUEwSDtBQUMxSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLCtDQUErQztBQUMvQztBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsK0JBQStCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytDO0FBQ0E7QUFDL0M7QUFDQSx5QkFBeUIsK0NBQUksb0NBQW9DLCtDQUFJO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSwrQkFBK0IsdURBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvREFBRztBQUNwQyx5Q0FBeUMsb0RBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9EQUFHO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLG9EQUFHO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvQ2xpY2tNYW5hZ2VyLm1qcz81ZTkzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fa25vd25TeW1ib2wgPSAobmFtZSwgc3ltYm9sKSA9PiAoc3ltYm9sID0gU3ltYm9sW25hbWVdKSA/IHN5bWJvbCA6IFN5bWJvbC5mb3IoXCJTeW1ib2wuXCIgKyBuYW1lKTtcbnZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHtcbiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG59O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xudmFyIF9fZGVjb3JhdG9yU3RhcnQgPSAoYmFzZSkgPT4gWywgLCAsIF9fY3JlYXRlKGJhc2U/LltfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIildID8/IG51bGwpXTtcbnZhciBfX2RlY29yYXRvclN0cmluZ3MgPSBbXCJjbGFzc1wiLCBcIm1ldGhvZFwiLCBcImdldHRlclwiLCBcInNldHRlclwiLCBcImFjY2Vzc29yXCIsIFwiZmllbGRcIiwgXCJ2YWx1ZVwiLCBcImdldFwiLCBcInNldFwiXTtcbnZhciBfX2V4cGVjdEZuID0gKGZuKSA9PiBmbiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiID8gX190eXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKSA6IGZuO1xudmFyIF9fZGVjb3JhdG9yQ29udGV4dCA9IChraW5kLCBuYW1lLCBkb25lLCBtZXRhZGF0YSwgZm5zKSA9PiAoeyBraW5kOiBfX2RlY29yYXRvclN0cmluZ3Nba2luZF0sIG5hbWUsIG1ldGFkYXRhLCBhZGRJbml0aWFsaXplcjogKGZuKSA9PiBkb25lLl8gPyBfX3R5cGVFcnJvcihcIkFscmVhZHkgaW5pdGlhbGl6ZWRcIikgOiBmbnMucHVzaChfX2V4cGVjdEZuKGZuIHx8IG51bGwpKSB9KTtcbnZhciBfX2RlY29yYXRvck1ldGFkYXRhID0gKGFycmF5LCB0YXJnZXQpID0+IF9fZGVmTm9ybWFsUHJvcCh0YXJnZXQsIF9fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKSwgYXJyYXlbM10pO1xudmFyIF9fcnVuSW5pdGlhbGl6ZXJzID0gKGFycmF5LCBmbGFncywgc2VsZiwgdmFsdWUpID0+IHtcbiAgZm9yICh2YXIgaSA9IDAsIGZucyA9IGFycmF5W2ZsYWdzID4+IDFdLCBuID0gZm5zICYmIGZucy5sZW5ndGg7IGkgPCBuOyBpKyspIGZsYWdzICYgMSA/IGZuc1tpXS5jYWxsKHNlbGYpIDogdmFsdWUgPSBmbnNbaV0uY2FsbChzZWxmLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX19kZWNvcmF0ZUVsZW1lbnQgPSAoYXJyYXksIGZsYWdzLCBuYW1lLCBkZWNvcmF0b3JzLCB0YXJnZXQsIGV4dHJhKSA9PiB7XG4gIHZhciBmbiwgaXQsIGRvbmUsIGN0eCwgYWNjZXNzLCBrID0gZmxhZ3MgJiA3LCBzID0gISEoZmxhZ3MgJiA4KSwgcCA9ICEhKGZsYWdzICYgMTYpO1xuICB2YXIgaiA9IGsgPiAzID8gYXJyYXkubGVuZ3RoICsgMSA6IGsgPyBzID8gMSA6IDIgOiAwLCBrZXkgPSBfX2RlY29yYXRvclN0cmluZ3NbayArIDVdO1xuICB2YXIgaW5pdGlhbGl6ZXJzID0gayA+IDMgJiYgKGFycmF5W2ogLSAxXSA9IFtdKSwgZXh0cmFJbml0aWFsaXplcnMgPSBhcnJheVtqXSB8fCAoYXJyYXlbal0gPSBbXSk7XG4gIHZhciBkZXNjID0gayAmJiAoIXAgJiYgIXMgJiYgKHRhcmdldCA9IHRhcmdldC5wcm90b3R5cGUpLCBrIDwgNSAmJiAoayA+IDMgfHwgIXApICYmIF9fZ2V0T3duUHJvcERlc2MoayA8IDQgPyB0YXJnZXQgOiB7IGdldCBbbmFtZV0oKSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBleHRyYSk7XG4gIH0sIHNldCBbbmFtZV0oeCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVTZXQodGhpcywgZXh0cmEsIHgpO1xuICB9IH0sIG5hbWUpKTtcbiAgayA/IHAgJiYgayA8IDQgJiYgX19uYW1lKGV4dHJhLCAoayA+IDIgPyBcInNldCBcIiA6IGsgPiAxID8gXCJnZXQgXCIgOiBcIlwiKSArIG5hbWUpIDogX19uYW1lKHRhcmdldCwgbmFtZSk7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY3R4ID0gX19kZWNvcmF0b3JDb250ZXh0KGssIG5hbWUsIGRvbmUgPSB7fSwgYXJyYXlbM10sIGV4dHJhSW5pdGlhbGl6ZXJzKTtcbiAgICBpZiAoaykge1xuICAgICAgY3R4LnN0YXRpYyA9IHMsIGN0eC5wcml2YXRlID0gcCwgYWNjZXNzID0gY3R4LmFjY2VzcyA9IHsgaGFzOiBwID8gKHgpID0+IF9fcHJpdmF0ZUluKHRhcmdldCwgeCkgOiAoeCkgPT4gbmFtZSBpbiB4IH07XG4gICAgICBpZiAoayBeIDMpIGFjY2Vzcy5nZXQgPSBwID8gKHgpID0+IChrIF4gMSA/IF9fcHJpdmF0ZUdldCA6IF9fcHJpdmF0ZU1ldGhvZCkoeCwgdGFyZ2V0LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5nZXQpIDogKHgpID0+IHhbbmFtZV07XG4gICAgICBpZiAoayA+IDIpIGFjY2Vzcy5zZXQgPSBwID8gKHgsIHkpID0+IF9fcHJpdmF0ZVNldCh4LCB0YXJnZXQsIHksIGsgXiA0ID8gZXh0cmEgOiBkZXNjLnNldCkgOiAoeCwgeSkgPT4geFtuYW1lXSA9IHk7XG4gICAgfVxuICAgIGl0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGsgPyBrIDwgNCA/IHAgPyBleHRyYSA6IGRlc2Nba2V5XSA6IGsgPiA0ID8gdm9pZCAwIDogeyBnZXQ6IGRlc2MuZ2V0LCBzZXQ6IGRlc2Muc2V0IH0gOiB0YXJnZXQsIGN0eCksIGRvbmUuXyA9IDE7XG4gICAgaWYgKGsgXiA0IHx8IGl0ID09PSB2b2lkIDApIF9fZXhwZWN0Rm4oaXQpICYmIChrID4gNCA/IGluaXRpYWxpemVycy51bnNoaWZ0KGl0KSA6IGsgPyBwID8gZXh0cmEgPSBpdCA6IGRlc2Nba2V5XSA9IGl0IDogdGFyZ2V0ID0gaXQpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBpdCAhPT0gXCJvYmplY3RcIiB8fCBpdCA9PT0gbnVsbCkgX190eXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgZWxzZSBfX2V4cGVjdEZuKGZuID0gaXQuZ2V0KSAmJiAoZGVzYy5nZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5zZXQpICYmIChkZXNjLnNldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LmluaXQpICYmIGluaXRpYWxpemVycy51bnNoaWZ0KGZuKTtcbiAgfVxuICByZXR1cm4gayB8fCBfX2RlY29yYXRvck1ldGFkYXRhKGFycmF5LCB0YXJnZXQpLCBkZXNjICYmIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIGRlc2MpLCBwID8gayBeIDQgPyBleHRyYSA6IGRlc2MgOiB0YXJnZXQ7XG59O1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4gbWVtYmVyLmhhcyhvYmopIHx8IF9fdHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbnZhciBfX3ByaXZhdGVJbiA9IChtZW1iZXIsIG9iaikgPT4gT2JqZWN0KG9iaikgIT09IG9iaiA/IF9fdHlwZUVycm9yKCdDYW5ub3QgdXNlIHRoZSBcImluXCIgb3BlcmF0b3Igb24gdGhpcyB2YWx1ZScpIDogbWVtYmVyLmhhcyhvYmopO1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKSwgZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKSk7XG52YXIgX19wcml2YXRlU2V0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpLCBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSksIHZhbHVlKTtcbnZhciBfX3ByaXZhdGVNZXRob2QgPSAob2JqLCBtZW1iZXIsIG1ldGhvZCkgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwiYWNjZXNzIHByaXZhdGUgbWV0aG9kXCIpLCBtZXRob2QpO1xudmFyIF9jYW5jZWxEb3VibGVDbGlja1RpbWVvdXRfZGVjLCBfX2dldENsaWNrVGltZW91dF9kZWMsIF9pbml0O1xuaW1wb3J0IHsgYmluZCwgdW5pcXVlSWQgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuY29uc3QgTUFYX0NMSUNLX0RJU1RBTkNFID0gNDA7XG5fX2dldENsaWNrVGltZW91dF9kZWMgPSBbYmluZF0sIF9jYW5jZWxEb3VibGVDbGlja1RpbWVvdXRfZGVjID0gW2JpbmRdO1xuY2xhc3MgQ2xpY2tNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgX19ydW5Jbml0aWFsaXplcnMoX2luaXQsIDUsIHRoaXMpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfY2xpY2tJZFwiLCBcIlwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2NsaWNrVGltZW91dFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2NsaWNrU2NyZWVuUG9pbnRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9wcmV2aW91c1NjcmVlblBvaW50XCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNsaWNrIHN0YXRlLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9jbGlja1N0YXRlXCIsIFwiaWRsZVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibGFzdFBvaW50ZXJJbmZvXCIsIHt9KTtcbiAgfVxuICBfZ2V0Q2xpY2tUaW1lb3V0KHN0YXRlLCBpZCA9IHVuaXF1ZUlkKCkpIHtcbiAgICB0aGlzLl9jbGlja0lkID0gaWQ7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2NsaWNrVGltZW91dCk7XG4gICAgdGhpcy5fY2xpY2tUaW1lb3V0ID0gdGhpcy5lZGl0b3IudGltZXJzLnNldFRpbWVvdXQoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9jbGlja1N0YXRlID09PSBzdGF0ZSAmJiB0aGlzLl9jbGlja0lkID09PSBpZCkge1xuICAgICAgICAgIHN3aXRjaCAodGhpcy5fY2xpY2tTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdUcmlwbGVcIjoge1xuICAgICAgICAgICAgICB0aGlzLmVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZG91YmxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgICAgcGhhc2U6IFwic2V0dGxlXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdRdWFkcnVwbGVcIjoge1xuICAgICAgICAgICAgICB0aGlzLmVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgICAgcGhhc2U6IFwic2V0dGxlXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdPdmVyZmxvd1wiOiB7XG4gICAgICAgICAgICAgIHRoaXMuZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmxhc3RQb2ludGVySW5mbyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJxdWFkcnVwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgICBwaGFzZTogXCJzZXR0bGVcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2NsaWNrU3RhdGUgPSBcImlkbGVcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHN0YXRlID09PSBcImlkbGVcIiB8fCBzdGF0ZSA9PT0gXCJwZW5kaW5nRG91YmxlXCIgPyB0aGlzLmVkaXRvci5vcHRpb25zLmRvdWJsZUNsaWNrRHVyYXRpb25NcyA6IHRoaXMuZWRpdG9yLm9wdGlvbnMubXVsdGlDbGlja0R1cmF0aW9uTXNcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBjbGljayBzdGF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjbGlja1N0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9jbGlja1N0YXRlO1xuICB9XG4gIGhhbmRsZVBvaW50ZXJFdmVudChpbmZvKSB7XG4gICAgc3dpdGNoIChpbmZvLm5hbWUpIHtcbiAgICAgIGNhc2UgXCJwb2ludGVyX2Rvd25cIjoge1xuICAgICAgICBpZiAoIXRoaXMuX2NsaWNrU3RhdGUpIHJldHVybiBpbmZvO1xuICAgICAgICB0aGlzLl9jbGlja1NjcmVlblBvaW50ID0gVmVjLkZyb20oaW5mby5wb2ludCk7XG4gICAgICAgIGlmICh0aGlzLl9wcmV2aW91c1NjcmVlblBvaW50ICYmIFZlYy5EaXN0Mih0aGlzLl9wcmV2aW91c1NjcmVlblBvaW50LCB0aGlzLl9jbGlja1NjcmVlblBvaW50KSA+IE1BWF9DTElDS19ESVNUQU5DRSAqKiAyKSB7XG4gICAgICAgICAgdGhpcy5fY2xpY2tTdGF0ZSA9IFwiaWRsZVwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzU2NyZWVuUG9pbnQgPSB0aGlzLl9jbGlja1NjcmVlblBvaW50O1xuICAgICAgICB0aGlzLmxhc3RQb2ludGVySW5mbyA9IGluZm87XG4gICAgICAgIHN3aXRjaCAodGhpcy5fY2xpY2tTdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nRG91YmxlXCI6IHtcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3RhdGUgPSBcInBlbmRpbmdUcmlwbGVcIjtcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrVGltZW91dCA9IHRoaXMuX2dldENsaWNrVGltZW91dCh0aGlzLl9jbGlja1N0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJkb3VibGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwiZG93blwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicGVuZGluZ1RyaXBsZVwiOiB7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJwZW5kaW5nUXVhZHJ1cGxlXCI7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1RpbWVvdXQgPSB0aGlzLl9nZXRDbGlja1RpbWVvdXQodGhpcy5fY2xpY2tTdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgIHBoYXNlOiBcImRvd25cIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdRdWFkcnVwbGVcIjoge1xuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdGF0ZSA9IFwicGVuZGluZ092ZXJmbG93XCI7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1RpbWVvdXQgPSB0aGlzLl9nZXRDbGlja1RpbWVvdXQodGhpcy5fY2xpY2tTdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwicXVhZHJ1cGxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgIHBoYXNlOiBcImRvd25cIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImlkbGVcIjoge1xuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdGF0ZSA9IFwicGVuZGluZ0RvdWJsZVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nT3ZlcmZsb3dcIjoge1xuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdGF0ZSA9IFwib3ZlcmZsb3dcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NsaWNrVGltZW91dCA9IHRoaXMuX2dldENsaWNrVGltZW91dCh0aGlzLl9jbGlja1N0YXRlKTtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICB9XG4gICAgICBjYXNlIFwicG9pbnRlcl91cFwiOiB7XG4gICAgICAgIGlmICghdGhpcy5fY2xpY2tTdGF0ZSkgcmV0dXJuIGluZm87XG4gICAgICAgIHRoaXMuX2NsaWNrU2NyZWVuUG9pbnQgPSBWZWMuRnJvbShpbmZvLnBvaW50KTtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9jbGlja1N0YXRlKSB7XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdUcmlwbGVcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJkb3VibGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwidXBcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdRdWFkcnVwbGVcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJ0cmlwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwidXBcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdPdmVyZmxvd1wiOiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi50aGlzLmxhc3RQb2ludGVySW5mbyxcbiAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICBuYW1lOiBcInF1YWRydXBsZV9jbGlja1wiLFxuICAgICAgICAgICAgICBwaGFzZTogXCJ1cFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgfVxuICAgICAgY2FzZSBcInBvaW50ZXJfbW92ZVwiOiB7XG4gICAgICAgIGlmICh0aGlzLl9jbGlja1N0YXRlICE9PSBcImlkbGVcIiAmJiB0aGlzLl9jbGlja1NjcmVlblBvaW50ICYmIFZlYy5EaXN0Mih0aGlzLl9jbGlja1NjcmVlblBvaW50LCB0aGlzLmVkaXRvci5pbnB1dHMuY3VycmVudFNjcmVlblBvaW50KSA+ICh0aGlzLmVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNDb2Fyc2VQb2ludGVyID8gdGhpcy5lZGl0b3Iub3B0aW9ucy5jb2Fyc2VEcmFnRGlzdGFuY2VTcXVhcmVkIDogdGhpcy5lZGl0b3Iub3B0aW9ucy5kcmFnRGlzdGFuY2VTcXVhcmVkKSkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsRG91YmxlQ2xpY2tUaW1lb3V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xuICB9XG4gIGNhbmNlbERvdWJsZUNsaWNrVGltZW91dCgpIHtcbiAgICB0aGlzLl9jbGlja1RpbWVvdXQgPSBjbGVhclRpbWVvdXQodGhpcy5fY2xpY2tUaW1lb3V0KTtcbiAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJpZGxlXCI7XG4gIH1cbn1cbl9pbml0ID0gX19kZWNvcmF0b3JTdGFydChudWxsKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcIl9nZXRDbGlja1RpbWVvdXRcIiwgX19nZXRDbGlja1RpbWVvdXRfZGVjLCBDbGlja01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiY2FuY2VsRG91YmxlQ2xpY2tUaW1lb3V0XCIsIF9jYW5jZWxEb3VibGVDbGlja1RpbWVvdXRfZGVjLCBDbGlja01hbmFnZXIpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgQ2xpY2tNYW5hZ2VyKTtcbmV4cG9ydCB7XG4gIENsaWNrTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsaWNrTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EdgeScrollManager.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EdgeScrollManager.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EdgeScrollManager: () => (/* binding */ EdgeScrollManager)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n\n\nclass EdgeScrollManager {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  _isEdgeScrolling = false;\n  _edgeScrollDuration = -1;\n  /**\n   * Update the camera position when the mouse is close to the edge of the screen.\n   * Run this on every tick when in a state where edge scrolling is enabled.\n   *\n   * @public\n   */\n  updateEdgeScrolling(elapsed) {\n    const { editor } = this;\n    const edgeScrollProximityFactor = this.getEdgeScroll();\n    if (edgeScrollProximityFactor.x === 0 && edgeScrollProximityFactor.y === 0) {\n      if (this._isEdgeScrolling) {\n        this._isEdgeScrolling = false;\n        this._edgeScrollDuration = 0;\n      }\n    } else {\n      if (!this._isEdgeScrolling) {\n        this._isEdgeScrolling = true;\n        this._edgeScrollDuration = 0;\n      }\n      this._edgeScrollDuration += elapsed;\n      if (this._edgeScrollDuration > editor.options.edgeScrollDelay) {\n        const eased = editor.options.edgeScrollEaseDuration > 0 ? _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_1__.EASINGS.easeInCubic(\n          Math.min(\n            1,\n            this._edgeScrollDuration / (editor.options.edgeScrollDelay + editor.options.edgeScrollEaseDuration)\n          )\n        ) : 1;\n        this.moveCameraWhenCloseToEdge({\n          x: edgeScrollProximityFactor.x * eased,\n          y: edgeScrollProximityFactor.y * eased\n        });\n      }\n    }\n  }\n  /**\n   * Helper function to get the scroll proximity factor for a given position.\n   * @param position - The mouse position on the axis.\n   * @param dimension - The component dimension on the axis.\n   * @param isCoarse - Whether the pointer is coarse.\n   * @param insetStart - Whether the pointer is inset at the start of the axis.\n   * @param insetEnd - Whether the pointer is inset at the end of the axis.\n   * @internal\n   */\n  getEdgeProximityFactors(position, dimension, isCoarse, insetStart, insetEnd) {\n    const { editor } = this;\n    const dist = editor.options.edgeScrollDistance;\n    const pw = isCoarse ? editor.options.coarsePointerWidth : 0;\n    const pMin = position - pw;\n    const pMax = position + pw;\n    const min = insetStart ? 0 : dist;\n    const max = insetEnd ? dimension : dimension - dist;\n    if (pMin < min) {\n      return Math.min(1, (min - pMin) / dist);\n    } else if (pMax > max) {\n      return -Math.min(1, (pMax - max) / dist);\n    }\n    return 0;\n  }\n  getEdgeScroll() {\n    const { editor } = this;\n    const {\n      inputs: {\n        currentScreenPoint: { x, y }\n      }\n    } = editor;\n    const screenBounds = editor.getViewportScreenBounds();\n    const {\n      isCoarsePointer,\n      insets: [t, r, b, l]\n    } = editor.getInstanceState();\n    const proximityFactorX = this.getEdgeProximityFactors(x, screenBounds.w, isCoarsePointer, l, r);\n    const proximityFactorY = this.getEdgeProximityFactors(y, screenBounds.h, isCoarsePointer, t, b);\n    return {\n      x: proximityFactorX,\n      y: proximityFactorY\n    };\n  }\n  /**\n   * Moves the camera when the mouse is close to the edge of the screen.\n   * @public\n   */\n  moveCameraWhenCloseToEdge(proximityFactor) {\n    const { editor } = this;\n    if (!editor.inputs.isDragging || editor.inputs.isPanning || editor.getCameraOptions().isLocked)\n      return;\n    if (proximityFactor.x === 0 && proximityFactor.y === 0) return;\n    const screenBounds = editor.getViewportScreenBounds();\n    const screenSizeFactorX = screenBounds.w < 1e3 ? 0.612 : 1;\n    const screenSizeFactorY = screenBounds.h < 1e3 ? 0.612 : 1;\n    const zoomLevel = editor.getZoomLevel();\n    const pxSpeed = editor.user.getEdgeScrollSpeed() * editor.options.edgeScrollSpeed;\n    const scrollDeltaX = pxSpeed * proximityFactor.x * screenSizeFactorX / zoomLevel;\n    const scrollDeltaY = pxSpeed * proximityFactor.y * screenSizeFactorY / zoomLevel;\n    const { x, y, z } = editor.getCamera();\n    editor.setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(x + scrollDeltaX, y + scrollDeltaY, z));\n  }\n}\n\n//# sourceMappingURL=EdgeScrollManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9FZGdlU2Nyb2xsTWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ1E7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSw0REFBTztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0Qix5QkFBeUIsb0RBQUc7QUFDNUI7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL21hbmFnZXJzL0VkZ2VTY3JvbGxNYW5hZ2VyLm1qcz80NGM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IEVBU0lOR1MgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9lYXNpbmdzLm1qc1wiO1xuY2xhc3MgRWRnZVNjcm9sbE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgfVxuICBfaXNFZGdlU2Nyb2xsaW5nID0gZmFsc2U7XG4gIF9lZGdlU2Nyb2xsRHVyYXRpb24gPSAtMTtcbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY2FtZXJhIHBvc2l0aW9uIHdoZW4gdGhlIG1vdXNlIGlzIGNsb3NlIHRvIHRoZSBlZGdlIG9mIHRoZSBzY3JlZW4uXG4gICAqIFJ1biB0aGlzIG9uIGV2ZXJ5IHRpY2sgd2hlbiBpbiBhIHN0YXRlIHdoZXJlIGVkZ2Ugc2Nyb2xsaW5nIGlzIGVuYWJsZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZUVkZ2VTY3JvbGxpbmcoZWxhcHNlZCkge1xuICAgIGNvbnN0IHsgZWRpdG9yIH0gPSB0aGlzO1xuICAgIGNvbnN0IGVkZ2VTY3JvbGxQcm94aW1pdHlGYWN0b3IgPSB0aGlzLmdldEVkZ2VTY3JvbGwoKTtcbiAgICBpZiAoZWRnZVNjcm9sbFByb3hpbWl0eUZhY3Rvci54ID09PSAwICYmIGVkZ2VTY3JvbGxQcm94aW1pdHlGYWN0b3IueSA9PT0gMCkge1xuICAgICAgaWYgKHRoaXMuX2lzRWRnZVNjcm9sbGluZykge1xuICAgICAgICB0aGlzLl9pc0VkZ2VTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZWRnZVNjcm9sbER1cmF0aW9uID0gMDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF0aGlzLl9pc0VkZ2VTY3JvbGxpbmcpIHtcbiAgICAgICAgdGhpcy5faXNFZGdlU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZWRnZVNjcm9sbER1cmF0aW9uID0gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2VkZ2VTY3JvbGxEdXJhdGlvbiArPSBlbGFwc2VkO1xuICAgICAgaWYgKHRoaXMuX2VkZ2VTY3JvbGxEdXJhdGlvbiA+IGVkaXRvci5vcHRpb25zLmVkZ2VTY3JvbGxEZWxheSkge1xuICAgICAgICBjb25zdCBlYXNlZCA9IGVkaXRvci5vcHRpb25zLmVkZ2VTY3JvbGxFYXNlRHVyYXRpb24gPiAwID8gRUFTSU5HUy5lYXNlSW5DdWJpYyhcbiAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICB0aGlzLl9lZGdlU2Nyb2xsRHVyYXRpb24gLyAoZWRpdG9yLm9wdGlvbnMuZWRnZVNjcm9sbERlbGF5ICsgZWRpdG9yLm9wdGlvbnMuZWRnZVNjcm9sbEVhc2VEdXJhdGlvbilcbiAgICAgICAgICApXG4gICAgICAgICkgOiAxO1xuICAgICAgICB0aGlzLm1vdmVDYW1lcmFXaGVuQ2xvc2VUb0VkZ2Uoe1xuICAgICAgICAgIHg6IGVkZ2VTY3JvbGxQcm94aW1pdHlGYWN0b3IueCAqIGVhc2VkLFxuICAgICAgICAgIHk6IGVkZ2VTY3JvbGxQcm94aW1pdHlGYWN0b3IueSAqIGVhc2VkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgc2Nyb2xsIHByb3hpbWl0eSBmYWN0b3IgZm9yIGEgZ2l2ZW4gcG9zaXRpb24uXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFRoZSBtb3VzZSBwb3NpdGlvbiBvbiB0aGUgYXhpcy5cbiAgICogQHBhcmFtIGRpbWVuc2lvbiAtIFRoZSBjb21wb25lbnQgZGltZW5zaW9uIG9uIHRoZSBheGlzLlxuICAgKiBAcGFyYW0gaXNDb2Fyc2UgLSBXaGV0aGVyIHRoZSBwb2ludGVyIGlzIGNvYXJzZS5cbiAgICogQHBhcmFtIGluc2V0U3RhcnQgLSBXaGV0aGVyIHRoZSBwb2ludGVyIGlzIGluc2V0IGF0IHRoZSBzdGFydCBvZiB0aGUgYXhpcy5cbiAgICogQHBhcmFtIGluc2V0RW5kIC0gV2hldGhlciB0aGUgcG9pbnRlciBpcyBpbnNldCBhdCB0aGUgZW5kIG9mIHRoZSBheGlzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldEVkZ2VQcm94aW1pdHlGYWN0b3JzKHBvc2l0aW9uLCBkaW1lbnNpb24sIGlzQ29hcnNlLCBpbnNldFN0YXJ0LCBpbnNldEVuZCkge1xuICAgIGNvbnN0IHsgZWRpdG9yIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRpc3QgPSBlZGl0b3Iub3B0aW9ucy5lZGdlU2Nyb2xsRGlzdGFuY2U7XG4gICAgY29uc3QgcHcgPSBpc0NvYXJzZSA/IGVkaXRvci5vcHRpb25zLmNvYXJzZVBvaW50ZXJXaWR0aCA6IDA7XG4gICAgY29uc3QgcE1pbiA9IHBvc2l0aW9uIC0gcHc7XG4gICAgY29uc3QgcE1heCA9IHBvc2l0aW9uICsgcHc7XG4gICAgY29uc3QgbWluID0gaW5zZXRTdGFydCA/IDAgOiBkaXN0O1xuICAgIGNvbnN0IG1heCA9IGluc2V0RW5kID8gZGltZW5zaW9uIDogZGltZW5zaW9uIC0gZGlzdDtcbiAgICBpZiAocE1pbiA8IG1pbikge1xuICAgICAgcmV0dXJuIE1hdGgubWluKDEsIChtaW4gLSBwTWluKSAvIGRpc3QpO1xuICAgIH0gZWxzZSBpZiAocE1heCA+IG1heCkge1xuICAgICAgcmV0dXJuIC1NYXRoLm1pbigxLCAocE1heCAtIG1heCkgLyBkaXN0KTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgZ2V0RWRnZVNjcm9sbCgpIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBpbnB1dHM6IHtcbiAgICAgICAgY3VycmVudFNjcmVlblBvaW50OiB7IHgsIHkgfVxuICAgICAgfVxuICAgIH0gPSBlZGl0b3I7XG4gICAgY29uc3Qgc2NyZWVuQm91bmRzID0gZWRpdG9yLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCk7XG4gICAgY29uc3Qge1xuICAgICAgaXNDb2Fyc2VQb2ludGVyLFxuICAgICAgaW5zZXRzOiBbdCwgciwgYiwgbF1cbiAgICB9ID0gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKTtcbiAgICBjb25zdCBwcm94aW1pdHlGYWN0b3JYID0gdGhpcy5nZXRFZGdlUHJveGltaXR5RmFjdG9ycyh4LCBzY3JlZW5Cb3VuZHMudywgaXNDb2Fyc2VQb2ludGVyLCBsLCByKTtcbiAgICBjb25zdCBwcm94aW1pdHlGYWN0b3JZID0gdGhpcy5nZXRFZGdlUHJveGltaXR5RmFjdG9ycyh5LCBzY3JlZW5Cb3VuZHMuaCwgaXNDb2Fyc2VQb2ludGVyLCB0LCBiKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogcHJveGltaXR5RmFjdG9yWCxcbiAgICAgIHk6IHByb3hpbWl0eUZhY3RvcllcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlcyB0aGUgY2FtZXJhIHdoZW4gdGhlIG1vdXNlIGlzIGNsb3NlIHRvIHRoZSBlZGdlIG9mIHRoZSBzY3JlZW4uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG1vdmVDYW1lcmFXaGVuQ2xvc2VUb0VkZ2UocHJveGltaXR5RmFjdG9yKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXM7XG4gICAgaWYgKCFlZGl0b3IuaW5wdXRzLmlzRHJhZ2dpbmcgfHwgZWRpdG9yLmlucHV0cy5pc1Bhbm5pbmcgfHwgZWRpdG9yLmdldENhbWVyYU9wdGlvbnMoKS5pc0xvY2tlZClcbiAgICAgIHJldHVybjtcbiAgICBpZiAocHJveGltaXR5RmFjdG9yLnggPT09IDAgJiYgcHJveGltaXR5RmFjdG9yLnkgPT09IDApIHJldHVybjtcbiAgICBjb25zdCBzY3JlZW5Cb3VuZHMgPSBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICBjb25zdCBzY3JlZW5TaXplRmFjdG9yWCA9IHNjcmVlbkJvdW5kcy53IDwgMWUzID8gMC42MTIgOiAxO1xuICAgIGNvbnN0IHNjcmVlblNpemVGYWN0b3JZID0gc2NyZWVuQm91bmRzLmggPCAxZTMgPyAwLjYxMiA6IDE7XG4gICAgY29uc3Qgem9vbUxldmVsID0gZWRpdG9yLmdldFpvb21MZXZlbCgpO1xuICAgIGNvbnN0IHB4U3BlZWQgPSBlZGl0b3IudXNlci5nZXRFZGdlU2Nyb2xsU3BlZWQoKSAqIGVkaXRvci5vcHRpb25zLmVkZ2VTY3JvbGxTcGVlZDtcbiAgICBjb25zdCBzY3JvbGxEZWx0YVggPSBweFNwZWVkICogcHJveGltaXR5RmFjdG9yLnggKiBzY3JlZW5TaXplRmFjdG9yWCAvIHpvb21MZXZlbDtcbiAgICBjb25zdCBzY3JvbGxEZWx0YVkgPSBweFNwZWVkICogcHJveGltaXR5RmFjdG9yLnkgKiBzY3JlZW5TaXplRmFjdG9yWSAvIHpvb21MZXZlbDtcbiAgICBjb25zdCB7IHgsIHksIHogfSA9IGVkaXRvci5nZXRDYW1lcmEoKTtcbiAgICBlZGl0b3Iuc2V0Q2FtZXJhKG5ldyBWZWMoeCArIHNjcm9sbERlbHRhWCwgeSArIHNjcm9sbERlbHRhWSwgeikpO1xuICB9XG59XG5leHBvcnQge1xuICBFZGdlU2Nyb2xsTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVkZ2VTY3JvbGxNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EdgeScrollManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FocusManager: () => (/* binding */ FocusManager)\n/* harmony export */ });\nclass FocusManager {\n  constructor(editor, autoFocus) {\n    this.editor = editor;\n    this.disposeSideEffectListener = editor.sideEffects.registerAfterChangeHandler(\n      \"instance\",\n      (prev, next) => {\n        if (prev.isFocused !== next.isFocused) {\n          this.updateContainerClass();\n        }\n      }\n    );\n    const currentFocusState = editor.getInstanceState().isFocused;\n    if (autoFocus !== currentFocusState) {\n      editor.updateInstanceState({ isFocused: !!autoFocus });\n    }\n    this.updateContainerClass();\n  }\n  disposeSideEffectListener;\n  /**\n   * The editor's focus state and the container's focus state\n   * are not necessarily always in sync. For that reason we\n   * can't rely on the css `:focus` or `:focus-within` selectors to style the\n   * editor when it is in focus.\n   *\n   * For that reason we synchronize the editor's focus state with a\n   * special class on the container: tl-container__focused\n   */\n  updateContainerClass() {\n    const container = this.editor.getContainer();\n    const instanceState = this.editor.getInstanceState();\n    if (instanceState.isFocused) {\n      container.classList.add(\"tl-container__focused\");\n    } else {\n      container.classList.remove(\"tl-container__focused\");\n    }\n  }\n  focus() {\n    this.editor.getContainer().focus();\n  }\n  blur() {\n    this.editor.complete();\n    this.editor.getContainer().blur();\n  }\n  dispose() {\n    this.disposeSideEffectListener?.();\n  }\n}\n\n//# sourceMappingURL=FocusManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Gb2N1c01hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx3QkFBd0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Gb2N1c01hbmFnZXIubWpzP2VmYWQiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9jdXNNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yLCBhdXRvRm9jdXMpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICB0aGlzLmRpc3Bvc2VTaWRlRWZmZWN0TGlzdGVuZXIgPSBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJBZnRlckNoYW5nZUhhbmRsZXIoXG4gICAgICBcImluc3RhbmNlXCIsXG4gICAgICAocHJldiwgbmV4dCkgPT4ge1xuICAgICAgICBpZiAocHJldi5pc0ZvY3VzZWQgIT09IG5leHQuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXJDbGFzcygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBjdXJyZW50Rm9jdXNTdGF0ZSA9IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNGb2N1c2VkO1xuICAgIGlmIChhdXRvRm9jdXMgIT09IGN1cnJlbnRGb2N1c1N0YXRlKSB7XG4gICAgICBlZGl0b3IudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGlzRm9jdXNlZDogISFhdXRvRm9jdXMgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ29udGFpbmVyQ2xhc3MoKTtcbiAgfVxuICBkaXNwb3NlU2lkZUVmZmVjdExpc3RlbmVyO1xuICAvKipcbiAgICogVGhlIGVkaXRvcidzIGZvY3VzIHN0YXRlIGFuZCB0aGUgY29udGFpbmVyJ3MgZm9jdXMgc3RhdGVcbiAgICogYXJlIG5vdCBuZWNlc3NhcmlseSBhbHdheXMgaW4gc3luYy4gRm9yIHRoYXQgcmVhc29uIHdlXG4gICAqIGNhbid0IHJlbHkgb24gdGhlIGNzcyBgOmZvY3VzYCBvciBgOmZvY3VzLXdpdGhpbmAgc2VsZWN0b3JzIHRvIHN0eWxlIHRoZVxuICAgKiBlZGl0b3Igd2hlbiBpdCBpcyBpbiBmb2N1cy5cbiAgICpcbiAgICogRm9yIHRoYXQgcmVhc29uIHdlIHN5bmNocm9uaXplIHRoZSBlZGl0b3IncyBmb2N1cyBzdGF0ZSB3aXRoIGFcbiAgICogc3BlY2lhbCBjbGFzcyBvbiB0aGUgY29udGFpbmVyOiB0bC1jb250YWluZXJfX2ZvY3VzZWRcbiAgICovXG4gIHVwZGF0ZUNvbnRhaW5lckNsYXNzKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZWRpdG9yLmdldENvbnRhaW5lcigpO1xuICAgIGNvbnN0IGluc3RhbmNlU3RhdGUgPSB0aGlzLmVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgaWYgKGluc3RhbmNlU3RhdGUuaXNGb2N1c2VkKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRsLWNvbnRhaW5lcl9fZm9jdXNlZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jb250YWluZXJfX2ZvY3VzZWRcIik7XG4gICAgfVxuICB9XG4gIGZvY3VzKCkge1xuICAgIHRoaXMuZWRpdG9yLmdldENvbnRhaW5lcigpLmZvY3VzKCk7XG4gIH1cbiAgYmx1cigpIHtcbiAgICB0aGlzLmVkaXRvci5jb21wbGV0ZSgpO1xuICAgIHRoaXMuZWRpdG9yLmdldENvbnRhaW5lcigpLmJsdXIoKTtcbiAgfVxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuZGlzcG9zZVNpZGVFZmZlY3RMaXN0ZW5lcj8uKCk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEZvY3VzTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZvY3VzTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HistoryManager: () => (/* binding */ HistoryManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _Stack_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Stack.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs\");\n\n\n\n\nvar HistoryRecorderState = /* @__PURE__ */ ((HistoryRecorderState2) => {\n  HistoryRecorderState2[\"Recording\"] = \"recording\";\n  HistoryRecorderState2[\"RecordingPreserveRedoStack\"] = \"recordingPreserveRedoStack\";\n  HistoryRecorderState2[\"Paused\"] = \"paused\";\n  return HistoryRecorderState2;\n})(HistoryRecorderState || {});\nclass HistoryManager {\n  store;\n  dispose;\n  state = \"recording\" /* Recording */;\n  pendingDiff = new PendingDiff();\n  stacks = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    \"HistoryManager.stacks\",\n    {\n      undos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_3__.stack)(),\n      redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_3__.stack)()\n    },\n    {\n      isEqual: (a, b) => a.undos === b.undos && a.redos === b.redos\n    }\n  );\n  annotateError;\n  constructor(opts) {\n    this.store = opts.store;\n    this.annotateError = opts.annotateError ?? _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.noop;\n    this.dispose = this.store.addHistoryInterceptor((entry, source) => {\n      if (source !== \"user\") return;\n      switch (this.state) {\n        case \"recording\" /* Recording */:\n          this.pendingDiff.apply(entry.changes);\n          this.stacks.update(({ undos }) => ({ undos, redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_3__.stack)() }));\n          break;\n        case \"recordingPreserveRedoStack\" /* RecordingPreserveRedoStack */:\n          this.pendingDiff.apply(entry.changes);\n          break;\n        case \"paused\" /* Paused */:\n          break;\n        default:\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.exhaustiveSwitchError)(this.state);\n      }\n    });\n  }\n  flushPendingDiff() {\n    if (this.pendingDiff.isEmpty()) return;\n    const diff = this.pendingDiff.clear();\n    this.stacks.update(({ undos, redos }) => ({\n      undos: undos.push({ type: \"diff\", diff }),\n      redos\n    }));\n  }\n  getNumUndos() {\n    return this.stacks.get().undos.length + (this.pendingDiff.isEmpty() ? 0 : 1);\n  }\n  getNumRedos() {\n    return this.stacks.get().redos.length;\n  }\n  /** @internal */\n  _isInBatch = false;\n  batch(fn, opts) {\n    const previousState = this.state;\n    if (previousState !== \"paused\" /* Paused */ && opts?.history) {\n      this.state = modeToState[opts.history];\n    }\n    try {\n      if (this._isInBatch) {\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n        return this;\n      }\n      this._isInBatch = true;\n      try {\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n      } catch (error) {\n        this.annotateError(error);\n        throw error;\n      } finally {\n        this._isInBatch = false;\n      }\n      return this;\n    } finally {\n      this.state = previousState;\n    }\n  }\n  // History\n  _undo({ pushToRedoStack, toMark = void 0 }) {\n    const previousState = this.state;\n    this.state = \"paused\" /* Paused */;\n    try {\n      let { undos, redos } = this.stacks.get();\n      const pendingDiff = this.pendingDiff.clear();\n      const isPendingDiffEmpty = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.isRecordsDiffEmpty)(pendingDiff);\n      const diffToUndo = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(pendingDiff);\n      if (pushToRedoStack && !isPendingDiffEmpty) {\n        redos = redos.push({ type: \"diff\", diff: pendingDiff });\n      }\n      let didFindMark = false;\n      if (isPendingDiffEmpty) {\n        while (undos.head?.type === \"stop\") {\n          const mark = undos.head;\n          undos = undos.tail;\n          if (pushToRedoStack) {\n            redos = redos.push(mark);\n          }\n          if (mark.id === toMark) {\n            didFindMark = true;\n            break;\n          }\n        }\n      }\n      if (!didFindMark) {\n        loop: while (undos.head) {\n          const undo = undos.head;\n          undos = undos.tail;\n          if (pushToRedoStack) {\n            redos = redos.push(undo);\n          }\n          switch (undo.type) {\n            case \"diff\":\n              (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diffToUndo, [(0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(undo.diff)]);\n              break;\n            case \"stop\":\n              if (!toMark) break loop;\n              if (undo.id === toMark) {\n                didFindMark = true;\n                break loop;\n              }\n              break;\n            default:\n              (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.exhaustiveSwitchError)(undo);\n          }\n        }\n      }\n      if (!didFindMark && toMark) {\n        return this;\n      }\n      this.store.applyDiff(diffToUndo, { ignoreEphemeralKeys: true });\n      this.store.ensureStoreIsUsable();\n      this.stacks.set({ undos, redos });\n    } finally {\n      this.state = previousState;\n    }\n    return this;\n  }\n  undo() {\n    this._undo({ pushToRedoStack: true });\n    return this;\n  }\n  redo() {\n    const previousState = this.state;\n    this.state = \"paused\" /* Paused */;\n    try {\n      this.flushPendingDiff();\n      let { undos, redos } = this.stacks.get();\n      if (redos.length === 0) {\n        return this;\n      }\n      while (redos.head?.type === \"stop\") {\n        undos = undos.push(redos.head);\n        redos = redos.tail;\n      }\n      const diffToRedo = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n      while (redos.head) {\n        const redo = redos.head;\n        undos = undos.push(redo);\n        redos = redos.tail;\n        if (redo.type === \"diff\") {\n          (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diffToRedo, [redo.diff]);\n        } else {\n          break;\n        }\n      }\n      this.store.applyDiff(diffToRedo, { ignoreEphemeralKeys: true });\n      this.store.ensureStoreIsUsable();\n      this.stacks.set({ undos, redos });\n    } finally {\n      this.state = previousState;\n    }\n    return this;\n  }\n  bail() {\n    this._undo({ pushToRedoStack: false });\n    return this;\n  }\n  bailToMark(id) {\n    this._undo({ pushToRedoStack: false, toMark: id });\n    return this;\n  }\n  squashToMark(id) {\n    let top = this.stacks.get().undos;\n    const popped = [];\n    while (top.head && !(top.head.type === \"stop\" && top.head.id === id)) {\n      if (top.head.type === \"diff\") {\n        popped.push(top.head.diff);\n      }\n      top = top.tail;\n    }\n    if (!top.head || top.head?.id !== id) {\n      console.error(\"Could not find mark to squash to: \", id);\n      return this;\n    }\n    if (popped.length === 0) {\n      return this;\n    }\n    const diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n    (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diff, popped.reverse());\n    this.stacks.update(({ redos }) => ({\n      undos: top.push({\n        type: \"diff\",\n        diff\n      }),\n      redos\n    }));\n    return this;\n  }\n  /** @internal */\n  _mark(id) {\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      this.flushPendingDiff();\n      this.stacks.update(({ undos, redos }) => ({ undos: undos.push({ type: \"stop\", id }), redos }));\n    });\n  }\n  clear() {\n    this.stacks.set({ undos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_3__.stack)(), redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_3__.stack)() });\n    this.pendingDiff.clear();\n  }\n  /** @internal */\n  getMarkIdMatching(idSubstring) {\n    let top = this.stacks.get().undos;\n    while (top.head) {\n      if (top.head.type === \"stop\" && top.head.id.includes(idSubstring)) {\n        return top.head.id;\n      }\n      top = top.tail;\n    }\n    return null;\n  }\n  /** @internal */\n  debug() {\n    const { undos, redos } = this.stacks.get();\n    return {\n      undos: undos.toArray(),\n      redos: redos.toArray(),\n      pendingDiff: this.pendingDiff.debug(),\n      state: this.state\n    };\n  }\n}\nconst modeToState = {\n  record: \"recording\" /* Recording */,\n  \"record-preserveRedoStack\": \"recordingPreserveRedoStack\" /* RecordingPreserveRedoStack */,\n  ignore: \"paused\" /* Paused */\n};\nclass PendingDiff {\n  diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n  isEmptyAtom = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"PendingDiff.isEmpty\", true);\n  clear() {\n    const diff = this.diff;\n    this.diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n    this.isEmptyAtom.set(true);\n    return diff;\n  }\n  isEmpty() {\n    return this.isEmptyAtom.get();\n  }\n  apply(diff) {\n    (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(this.diff, [diff]);\n    this.isEmptyAtom.set((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.isRecordsDiffEmpty)(this.diff));\n  }\n  debug() {\n    return { diff: this.diff, isEmpty: this.isEmpty() };\n  }\n}\n\n//# sourceMappingURL=HistoryManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFNeEI7QUFDcUM7QUFDeEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFJO0FBQ2Y7QUFDQTtBQUNBLGFBQWEsaURBQUs7QUFDbEIsYUFBYSxpREFBSztBQUNsQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0NBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPLFFBQVEsY0FBYyxpREFBSyxJQUFJO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvRUFBcUI7QUFDL0I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsY0FBYztBQUN4QywwQkFBMEIsb0JBQW9CO0FBQzlDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdURBQVE7QUFDaEIsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrQ0FBa0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0EsaUNBQWlDLGlFQUFrQjtBQUNuRCx5QkFBeUIsaUVBQWtCO0FBQzNDO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVFQUF3QixjQUFjLGlFQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9FQUFxQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkJBQTJCO0FBQ3BFO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFFQUFzQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1RUFBd0I7QUFDbEMsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywyQkFBMkI7QUFDcEU7QUFDQSx3QkFBd0IsY0FBYztBQUN0QyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3QkFBd0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9DQUFvQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscUVBQXNCO0FBQ3ZDLElBQUksdUVBQXdCO0FBQzVCLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksdURBQVE7QUFDWjtBQUNBLDRCQUE0QixjQUFjLFFBQVEsb0JBQW9CLGtCQUFrQixVQUFVO0FBQ2xHLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0JBQXNCLE9BQU8saURBQUssV0FBVyxpREFBSyxJQUFJO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRUFBc0I7QUFDL0IsZ0JBQWdCLG1EQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IscUVBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1RUFBd0I7QUFDNUIseUJBQXlCLGlFQUFrQjtBQUMzQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanM/NzU3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tLCB0cmFuc2FjdCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQge1xuICBjcmVhdGVFbXB0eVJlY29yZHNEaWZmLFxuICBpc1JlY29yZHNEaWZmRW1wdHksXG4gIHJldmVyc2VSZWNvcmRzRGlmZixcbiAgc3F1YXNoUmVjb3JkRGlmZnNNdXRhYmxlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBleGhhdXN0aXZlU3dpdGNoRXJyb3IsIG5vb3AgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgc3RhY2sgfSBmcm9tIFwiLi9TdGFjay5tanNcIjtcbnZhciBIaXN0b3J5UmVjb3JkZXJTdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEhpc3RvcnlSZWNvcmRlclN0YXRlMikgPT4ge1xuICBIaXN0b3J5UmVjb3JkZXJTdGF0ZTJbXCJSZWNvcmRpbmdcIl0gPSBcInJlY29yZGluZ1wiO1xuICBIaXN0b3J5UmVjb3JkZXJTdGF0ZTJbXCJSZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFja1wiXSA9IFwicmVjb3JkaW5nUHJlc2VydmVSZWRvU3RhY2tcIjtcbiAgSGlzdG9yeVJlY29yZGVyU3RhdGUyW1wiUGF1c2VkXCJdID0gXCJwYXVzZWRcIjtcbiAgcmV0dXJuIEhpc3RvcnlSZWNvcmRlclN0YXRlMjtcbn0pKEhpc3RvcnlSZWNvcmRlclN0YXRlIHx8IHt9KTtcbmNsYXNzIEhpc3RvcnlNYW5hZ2VyIHtcbiAgc3RvcmU7XG4gIGRpc3Bvc2U7XG4gIHN0YXRlID0gXCJyZWNvcmRpbmdcIiAvKiBSZWNvcmRpbmcgKi87XG4gIHBlbmRpbmdEaWZmID0gbmV3IFBlbmRpbmdEaWZmKCk7XG4gIHN0YWNrcyA9IGF0b20oXG4gICAgXCJIaXN0b3J5TWFuYWdlci5zdGFja3NcIixcbiAgICB7XG4gICAgICB1bmRvczogc3RhY2soKSxcbiAgICAgIHJlZG9zOiBzdGFjaygpXG4gICAgfSxcbiAgICB7XG4gICAgICBpc0VxdWFsOiAoYSwgYikgPT4gYS51bmRvcyA9PT0gYi51bmRvcyAmJiBhLnJlZG9zID09PSBiLnJlZG9zXG4gICAgfVxuICApO1xuICBhbm5vdGF0ZUVycm9yO1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgdGhpcy5zdG9yZSA9IG9wdHMuc3RvcmU7XG4gICAgdGhpcy5hbm5vdGF0ZUVycm9yID0gb3B0cy5hbm5vdGF0ZUVycm9yID8/IG5vb3A7XG4gICAgdGhpcy5kaXNwb3NlID0gdGhpcy5zdG9yZS5hZGRIaXN0b3J5SW50ZXJjZXB0b3IoKGVudHJ5LCBzb3VyY2UpID0+IHtcbiAgICAgIGlmIChzb3VyY2UgIT09IFwidXNlclwiKSByZXR1cm47XG4gICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgY2FzZSBcInJlY29yZGluZ1wiIC8qIFJlY29yZGluZyAqLzpcbiAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmLmFwcGx5KGVudHJ5LmNoYW5nZXMpO1xuICAgICAgICAgIHRoaXMuc3RhY2tzLnVwZGF0ZSgoeyB1bmRvcyB9KSA9PiAoeyB1bmRvcywgcmVkb3M6IHN0YWNrKCkgfSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVjb3JkaW5nUHJlc2VydmVSZWRvU3RhY2tcIiAvKiBSZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFjayAqLzpcbiAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmLmFwcGx5KGVudHJ5LmNoYW5nZXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicGF1c2VkXCIgLyogUGF1c2VkICovOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcih0aGlzLnN0YXRlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmbHVzaFBlbmRpbmdEaWZmKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdEaWZmLmlzRW1wdHkoKSkgcmV0dXJuO1xuICAgIGNvbnN0IGRpZmYgPSB0aGlzLnBlbmRpbmdEaWZmLmNsZWFyKCk7XG4gICAgdGhpcy5zdGFja3MudXBkYXRlKCh7IHVuZG9zLCByZWRvcyB9KSA9PiAoe1xuICAgICAgdW5kb3M6IHVuZG9zLnB1c2goeyB0eXBlOiBcImRpZmZcIiwgZGlmZiB9KSxcbiAgICAgIHJlZG9zXG4gICAgfSkpO1xuICB9XG4gIGdldE51bVVuZG9zKCkge1xuICAgIHJldHVybiB0aGlzLnN0YWNrcy5nZXQoKS51bmRvcy5sZW5ndGggKyAodGhpcy5wZW5kaW5nRGlmZi5pc0VtcHR5KCkgPyAwIDogMSk7XG4gIH1cbiAgZ2V0TnVtUmVkb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhY2tzLmdldCgpLnJlZG9zLmxlbmd0aDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9pc0luQmF0Y2ggPSBmYWxzZTtcbiAgYmF0Y2goZm4sIG9wdHMpIHtcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAocHJldmlvdXNTdGF0ZSAhPT0gXCJwYXVzZWRcIiAvKiBQYXVzZWQgKi8gJiYgb3B0cz8uaGlzdG9yeSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IG1vZGVUb1N0YXRlW29wdHMuaGlzdG9yeV07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5faXNJbkJhdGNoKSB7XG4gICAgICAgIHRyYW5zYWN0KGZuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB0aGlzLl9pc0luQmF0Y2ggPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHJhbnNhY3QoZm4pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5hbm5vdGF0ZUVycm9yKGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLl9pc0luQmF0Y2ggPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnN0YXRlID0gcHJldmlvdXNTdGF0ZTtcbiAgICB9XG4gIH1cbiAgLy8gSGlzdG9yeVxuICBfdW5kbyh7IHB1c2hUb1JlZG9TdGFjaywgdG9NYXJrID0gdm9pZCAwIH0pIHtcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnN0YXRlID0gXCJwYXVzZWRcIiAvKiBQYXVzZWQgKi87XG4gICAgdHJ5IHtcbiAgICAgIGxldCB7IHVuZG9zLCByZWRvcyB9ID0gdGhpcy5zdGFja3MuZ2V0KCk7XG4gICAgICBjb25zdCBwZW5kaW5nRGlmZiA9IHRoaXMucGVuZGluZ0RpZmYuY2xlYXIoKTtcbiAgICAgIGNvbnN0IGlzUGVuZGluZ0RpZmZFbXB0eSA9IGlzUmVjb3Jkc0RpZmZFbXB0eShwZW5kaW5nRGlmZik7XG4gICAgICBjb25zdCBkaWZmVG9VbmRvID0gcmV2ZXJzZVJlY29yZHNEaWZmKHBlbmRpbmdEaWZmKTtcbiAgICAgIGlmIChwdXNoVG9SZWRvU3RhY2sgJiYgIWlzUGVuZGluZ0RpZmZFbXB0eSkge1xuICAgICAgICByZWRvcyA9IHJlZG9zLnB1c2goeyB0eXBlOiBcImRpZmZcIiwgZGlmZjogcGVuZGluZ0RpZmYgfSk7XG4gICAgICB9XG4gICAgICBsZXQgZGlkRmluZE1hcmsgPSBmYWxzZTtcbiAgICAgIGlmIChpc1BlbmRpbmdEaWZmRW1wdHkpIHtcbiAgICAgICAgd2hpbGUgKHVuZG9zLmhlYWQ/LnR5cGUgPT09IFwic3RvcFwiKSB7XG4gICAgICAgICAgY29uc3QgbWFyayA9IHVuZG9zLmhlYWQ7XG4gICAgICAgICAgdW5kb3MgPSB1bmRvcy50YWlsO1xuICAgICAgICAgIGlmIChwdXNoVG9SZWRvU3RhY2spIHtcbiAgICAgICAgICAgIHJlZG9zID0gcmVkb3MucHVzaChtYXJrKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hcmsuaWQgPT09IHRvTWFyaykge1xuICAgICAgICAgICAgZGlkRmluZE1hcmsgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWRpZEZpbmRNYXJrKSB7XG4gICAgICAgIGxvb3A6IHdoaWxlICh1bmRvcy5oZWFkKSB7XG4gICAgICAgICAgY29uc3QgdW5kbyA9IHVuZG9zLmhlYWQ7XG4gICAgICAgICAgdW5kb3MgPSB1bmRvcy50YWlsO1xuICAgICAgICAgIGlmIChwdXNoVG9SZWRvU3RhY2spIHtcbiAgICAgICAgICAgIHJlZG9zID0gcmVkb3MucHVzaCh1bmRvKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoICh1bmRvLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJkaWZmXCI6XG4gICAgICAgICAgICAgIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZShkaWZmVG9VbmRvLCBbcmV2ZXJzZVJlY29yZHNEaWZmKHVuZG8uZGlmZildKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RvcFwiOlxuICAgICAgICAgICAgICBpZiAoIXRvTWFyaykgYnJlYWsgbG9vcDtcbiAgICAgICAgICAgICAgaWYgKHVuZG8uaWQgPT09IHRvTWFyaykge1xuICAgICAgICAgICAgICAgIGRpZEZpbmRNYXJrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhayBsb29wO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKHVuZG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFkaWRGaW5kTWFyayAmJiB0b01hcmspIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB0aGlzLnN0b3JlLmFwcGx5RGlmZihkaWZmVG9VbmRvLCB7IGlnbm9yZUVwaGVtZXJhbEtleXM6IHRydWUgfSk7XG4gICAgICB0aGlzLnN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgIHRoaXMuc3RhY2tzLnNldCh7IHVuZG9zLCByZWRvcyB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHVuZG8oKSB7XG4gICAgdGhpcy5fdW5kbyh7IHB1c2hUb1JlZG9TdGFjazogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZWRvKCkge1xuICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHRoaXMuc3RhdGUgPSBcInBhdXNlZFwiIC8qIFBhdXNlZCAqLztcbiAgICB0cnkge1xuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdEaWZmKCk7XG4gICAgICBsZXQgeyB1bmRvcywgcmVkb3MgfSA9IHRoaXMuc3RhY2tzLmdldCgpO1xuICAgICAgaWYgKHJlZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHdoaWxlIChyZWRvcy5oZWFkPy50eXBlID09PSBcInN0b3BcIikge1xuICAgICAgICB1bmRvcyA9IHVuZG9zLnB1c2gocmVkb3MuaGVhZCk7XG4gICAgICAgIHJlZG9zID0gcmVkb3MudGFpbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmZUb1JlZG8gPSBjcmVhdGVFbXB0eVJlY29yZHNEaWZmKCk7XG4gICAgICB3aGlsZSAocmVkb3MuaGVhZCkge1xuICAgICAgICBjb25zdCByZWRvID0gcmVkb3MuaGVhZDtcbiAgICAgICAgdW5kb3MgPSB1bmRvcy5wdXNoKHJlZG8pO1xuICAgICAgICByZWRvcyA9IHJlZG9zLnRhaWw7XG4gICAgICAgIGlmIChyZWRvLnR5cGUgPT09IFwiZGlmZlwiKSB7XG4gICAgICAgICAgc3F1YXNoUmVjb3JkRGlmZnNNdXRhYmxlKGRpZmZUb1JlZG8sIFtyZWRvLmRpZmZdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zdG9yZS5hcHBseURpZmYoZGlmZlRvUmVkbywgeyBpZ25vcmVFcGhlbWVyYWxLZXlzOiB0cnVlIH0pO1xuICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICB0aGlzLnN0YWNrcy5zZXQoeyB1bmRvcywgcmVkb3MgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBiYWlsKCkge1xuICAgIHRoaXMuX3VuZG8oeyBwdXNoVG9SZWRvU3RhY2s6IGZhbHNlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGJhaWxUb01hcmsoaWQpIHtcbiAgICB0aGlzLl91bmRvKHsgcHVzaFRvUmVkb1N0YWNrOiBmYWxzZSwgdG9NYXJrOiBpZCB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzcXVhc2hUb01hcmsoaWQpIHtcbiAgICBsZXQgdG9wID0gdGhpcy5zdGFja3MuZ2V0KCkudW5kb3M7XG4gICAgY29uc3QgcG9wcGVkID0gW107XG4gICAgd2hpbGUgKHRvcC5oZWFkICYmICEodG9wLmhlYWQudHlwZSA9PT0gXCJzdG9wXCIgJiYgdG9wLmhlYWQuaWQgPT09IGlkKSkge1xuICAgICAgaWYgKHRvcC5oZWFkLnR5cGUgPT09IFwiZGlmZlwiKSB7XG4gICAgICAgIHBvcHBlZC5wdXNoKHRvcC5oZWFkLmRpZmYpO1xuICAgICAgfVxuICAgICAgdG9wID0gdG9wLnRhaWw7XG4gICAgfVxuICAgIGlmICghdG9wLmhlYWQgfHwgdG9wLmhlYWQ/LmlkICE9PSBpZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIG1hcmsgdG8gc3F1YXNoIHRvOiBcIiwgaWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmIChwb3BwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgZGlmZiA9IGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYoKTtcbiAgICBzcXVhc2hSZWNvcmREaWZmc011dGFibGUoZGlmZiwgcG9wcGVkLnJldmVyc2UoKSk7XG4gICAgdGhpcy5zdGFja3MudXBkYXRlKCh7IHJlZG9zIH0pID0+ICh7XG4gICAgICB1bmRvczogdG9wLnB1c2goe1xuICAgICAgICB0eXBlOiBcImRpZmZcIixcbiAgICAgICAgZGlmZlxuICAgICAgfSksXG4gICAgICByZWRvc1xuICAgIH0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9tYXJrKGlkKSB7XG4gICAgdHJhbnNhY3QoKCkgPT4ge1xuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdEaWZmKCk7XG4gICAgICB0aGlzLnN0YWNrcy51cGRhdGUoKHsgdW5kb3MsIHJlZG9zIH0pID0+ICh7IHVuZG9zOiB1bmRvcy5wdXNoKHsgdHlwZTogXCJzdG9wXCIsIGlkIH0pLCByZWRvcyB9KSk7XG4gICAgfSk7XG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5zdGFja3Muc2V0KHsgdW5kb3M6IHN0YWNrKCksIHJlZG9zOiBzdGFjaygpIH0pO1xuICAgIHRoaXMucGVuZGluZ0RpZmYuY2xlYXIoKTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldE1hcmtJZE1hdGNoaW5nKGlkU3Vic3RyaW5nKSB7XG4gICAgbGV0IHRvcCA9IHRoaXMuc3RhY2tzLmdldCgpLnVuZG9zO1xuICAgIHdoaWxlICh0b3AuaGVhZCkge1xuICAgICAgaWYgKHRvcC5oZWFkLnR5cGUgPT09IFwic3RvcFwiICYmIHRvcC5oZWFkLmlkLmluY2x1ZGVzKGlkU3Vic3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gdG9wLmhlYWQuaWQ7XG4gICAgICB9XG4gICAgICB0b3AgPSB0b3AudGFpbDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBkZWJ1ZygpIHtcbiAgICBjb25zdCB7IHVuZG9zLCByZWRvcyB9ID0gdGhpcy5zdGFja3MuZ2V0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVuZG9zOiB1bmRvcy50b0FycmF5KCksXG4gICAgICByZWRvczogcmVkb3MudG9BcnJheSgpLFxuICAgICAgcGVuZGluZ0RpZmY6IHRoaXMucGVuZGluZ0RpZmYuZGVidWcoKSxcbiAgICAgIHN0YXRlOiB0aGlzLnN0YXRlXG4gICAgfTtcbiAgfVxufVxuY29uc3QgbW9kZVRvU3RhdGUgPSB7XG4gIHJlY29yZDogXCJyZWNvcmRpbmdcIiAvKiBSZWNvcmRpbmcgKi8sXG4gIFwicmVjb3JkLXByZXNlcnZlUmVkb1N0YWNrXCI6IFwicmVjb3JkaW5nUHJlc2VydmVSZWRvU3RhY2tcIiAvKiBSZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFjayAqLyxcbiAgaWdub3JlOiBcInBhdXNlZFwiIC8qIFBhdXNlZCAqL1xufTtcbmNsYXNzIFBlbmRpbmdEaWZmIHtcbiAgZGlmZiA9IGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYoKTtcbiAgaXNFbXB0eUF0b20gPSBhdG9tKFwiUGVuZGluZ0RpZmYuaXNFbXB0eVwiLCB0cnVlKTtcbiAgY2xlYXIoKSB7XG4gICAgY29uc3QgZGlmZiA9IHRoaXMuZGlmZjtcbiAgICB0aGlzLmRpZmYgPSBjcmVhdGVFbXB0eVJlY29yZHNEaWZmKCk7XG4gICAgdGhpcy5pc0VtcHR5QXRvbS5zZXQodHJ1ZSk7XG4gICAgcmV0dXJuIGRpZmY7XG4gIH1cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0VtcHR5QXRvbS5nZXQoKTtcbiAgfVxuICBhcHBseShkaWZmKSB7XG4gICAgc3F1YXNoUmVjb3JkRGlmZnNNdXRhYmxlKHRoaXMuZGlmZiwgW2RpZmZdKTtcbiAgICB0aGlzLmlzRW1wdHlBdG9tLnNldChpc1JlY29yZHNEaWZmRW1wdHkodGhpcy5kaWZmKSk7XG4gIH1cbiAgZGVidWcoKSB7XG4gICAgcmV0dXJuIHsgZGlmZjogdGhpcy5kaWZmLCBpc0VtcHR5OiB0aGlzLmlzRW1wdHkoKSB9O1xuICB9XG59XG5leHBvcnQge1xuICBIaXN0b3J5TWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhpc3RvcnlNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScribbleManager: () => (/* binding */ ScribbleManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\nclass ScribbleManager {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  scribbleItems = /* @__PURE__ */ new Map();\n  state = \"paused\";\n  addScribble(scribble, id = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniqueId)()) {\n    const item = {\n      id,\n      scribble: {\n        id,\n        size: 20,\n        color: \"accent\",\n        opacity: 0.8,\n        delay: 0,\n        points: [],\n        shrink: 0.1,\n        taper: true,\n        ...scribble,\n        state: \"starting\"\n      },\n      timeoutMs: 0,\n      delayRemaining: scribble.delay ?? 0,\n      prev: null,\n      next: null\n    };\n    this.scribbleItems.set(id, item);\n    return item;\n  }\n  reset() {\n    this.editor.updateInstanceState({ scribbles: [] });\n    this.scribbleItems.clear();\n  }\n  /**\n   * Start stopping the scribble. The scribble won't be removed until its last point is cleared.\n   *\n   * @public\n   */\n  stop(id) {\n    const item = this.scribbleItems.get(id);\n    if (!item) throw Error(`Scribble with id ${id} not found`);\n    item.delayRemaining = Math.min(item.delayRemaining, 200);\n    item.scribble.state = \"stopping\";\n    return item;\n  }\n  /**\n   * Set the scribble's next point.\n   *\n   * @param id - The id of the scribble to add a point to.\n   * @param x - The x coordinate of the point.\n   * @param y - The y coordinate of the point.\n   * @param z - The z coordinate of the point.\n   * @public\n   */\n  addPoint(id, x, y, z = 0.5) {\n    const item = this.scribbleItems.get(id);\n    if (!item) throw Error(`Scribble with id ${id} not found`);\n    const { prev } = item;\n    const point = { x, y, z };\n    if (!prev || _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist(prev, point) >= 1) {\n      item.next = point;\n    }\n    return item;\n  }\n  /**\n   * Update on each animation frame.\n   *\n   * @param elapsed - The number of milliseconds since the last tick.\n   * @public\n   */\n  tick(elapsed) {\n    if (this.scribbleItems.size === 0) return;\n    this.editor.run(() => {\n      this.scribbleItems.forEach((item) => {\n        if (item.scribble.state === \"starting\") {\n          const { next: next2, prev: prev2 } = item;\n          if (next2 && next2 !== prev2) {\n            item.prev = next2;\n            item.scribble.points.push(next2);\n          }\n          if (item.scribble.points.length > 8) {\n            item.scribble.state = \"active\";\n          }\n          return;\n        }\n        if (item.delayRemaining > 0) {\n          item.delayRemaining = Math.max(0, item.delayRemaining - elapsed);\n        }\n        item.timeoutMs += elapsed;\n        if (item.timeoutMs >= 16) {\n          item.timeoutMs = 0;\n        }\n        const { delayRemaining, timeoutMs, prev, next, scribble } = item;\n        switch (scribble.state) {\n          case \"active\": {\n            if (next && next !== prev) {\n              item.prev = next;\n              scribble.points.push(next);\n              if (delayRemaining === 0) {\n                if (scribble.points.length > 8) {\n                  scribble.points.shift();\n                }\n              }\n            } else {\n              if (timeoutMs === 0) {\n                if (scribble.points.length > 1) {\n                  scribble.points.shift();\n                } else {\n                  item.delayRemaining = scribble.delay;\n                }\n              }\n            }\n            break;\n          }\n          case \"stopping\": {\n            if (item.delayRemaining === 0) {\n              if (timeoutMs === 0) {\n                if (scribble.points.length === 1) {\n                  this.scribbleItems.delete(item.id);\n                  return;\n                }\n                if (scribble.shrink) {\n                  scribble.size = Math.max(1, scribble.size * (1 - scribble.shrink));\n                }\n                scribble.points.shift();\n              }\n            }\n            break;\n          }\n          case \"paused\": {\n            break;\n          }\n        }\n      });\n      this.editor.updateInstanceState({\n        scribbles: Array.from(this.scribbleItems.values()).map(({ scribble }) => ({\n          ...scribble,\n          points: [...scribble.points]\n        })).slice(-5)\n        // limit to three as a minor sanity check\n      });\n    });\n  }\n}\n\n//# sourceMappingURL=ScribbleManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TY3JpYmJsZU1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUNNO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1REFBUTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsSUFBSTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsSUFBSTtBQUNuRCxZQUFZLE9BQU87QUFDbkIsb0JBQW9CO0FBQ3BCLGlCQUFpQixvREFBRztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFrRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxrRUFBa0UsVUFBVTtBQUM1RTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvU2NyaWJibGVNYW5hZ2VyLm1qcz9kM2RjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmNsYXNzIFNjcmliYmxlTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICB9XG4gIHNjcmliYmxlSXRlbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBzdGF0ZSA9IFwicGF1c2VkXCI7XG4gIGFkZFNjcmliYmxlKHNjcmliYmxlLCBpZCA9IHVuaXF1ZUlkKCkpIHtcbiAgICBjb25zdCBpdGVtID0ge1xuICAgICAgaWQsXG4gICAgICBzY3JpYmJsZToge1xuICAgICAgICBpZCxcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGNvbG9yOiBcImFjY2VudFwiLFxuICAgICAgICBvcGFjaXR5OiAwLjgsXG4gICAgICAgIGRlbGF5OiAwLFxuICAgICAgICBwb2ludHM6IFtdLFxuICAgICAgICBzaHJpbms6IDAuMSxcbiAgICAgICAgdGFwZXI6IHRydWUsXG4gICAgICAgIC4uLnNjcmliYmxlLFxuICAgICAgICBzdGF0ZTogXCJzdGFydGluZ1wiXG4gICAgICB9LFxuICAgICAgdGltZW91dE1zOiAwLFxuICAgICAgZGVsYXlSZW1haW5pbmc6IHNjcmliYmxlLmRlbGF5ID8/IDAsXG4gICAgICBwcmV2OiBudWxsLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07XG4gICAgdGhpcy5zY3JpYmJsZUl0ZW1zLnNldChpZCwgaXRlbSk7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5lZGl0b3IudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IHNjcmliYmxlczogW10gfSk7XG4gICAgdGhpcy5zY3JpYmJsZUl0ZW1zLmNsZWFyKCk7XG4gIH1cbiAgLyoqXG4gICAqIFN0YXJ0IHN0b3BwaW5nIHRoZSBzY3JpYmJsZS4gVGhlIHNjcmliYmxlIHdvbid0IGJlIHJlbW92ZWQgdW50aWwgaXRzIGxhc3QgcG9pbnQgaXMgY2xlYXJlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RvcChpZCkge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNjcmliYmxlSXRlbXMuZ2V0KGlkKTtcbiAgICBpZiAoIWl0ZW0pIHRocm93IEVycm9yKGBTY3JpYmJsZSB3aXRoIGlkICR7aWR9IG5vdCBmb3VuZGApO1xuICAgIGl0ZW0uZGVsYXlSZW1haW5pbmcgPSBNYXRoLm1pbihpdGVtLmRlbGF5UmVtYWluaW5nLCAyMDApO1xuICAgIGl0ZW0uc2NyaWJibGUuc3RhdGUgPSBcInN0b3BwaW5nXCI7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc2NyaWJibGUncyBuZXh0IHBvaW50LlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHNjcmliYmxlIHRvIGFkZCBhIHBvaW50IHRvLlxuICAgKiBAcGFyYW0geCAtIFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgKiBAcGFyYW0geSAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgKiBAcGFyYW0geiAtIFRoZSB6IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRQb2ludChpZCwgeCwgeSwgeiA9IDAuNSkge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNjcmliYmxlSXRlbXMuZ2V0KGlkKTtcbiAgICBpZiAoIWl0ZW0pIHRocm93IEVycm9yKGBTY3JpYmJsZSB3aXRoIGlkICR7aWR9IG5vdCBmb3VuZGApO1xuICAgIGNvbnN0IHsgcHJldiB9ID0gaXRlbTtcbiAgICBjb25zdCBwb2ludCA9IHsgeCwgeSwgeiB9O1xuICAgIGlmICghcHJldiB8fCBWZWMuRGlzdChwcmV2LCBwb2ludCkgPj0gMSkge1xuICAgICAgaXRlbS5uZXh0ID0gcG9pbnQ7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgb24gZWFjaCBhbmltYXRpb24gZnJhbWUuXG4gICAqXG4gICAqIEBwYXJhbSBlbGFwc2VkIC0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgdGhlIGxhc3QgdGljay5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdGljayhlbGFwc2VkKSB7XG4gICAgaWYgKHRoaXMuc2NyaWJibGVJdGVtcy5zaXplID09PSAwKSByZXR1cm47XG4gICAgdGhpcy5lZGl0b3IucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2NyaWJibGVJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtLnNjcmliYmxlLnN0YXRlID09PSBcInN0YXJ0aW5nXCIpIHtcbiAgICAgICAgICBjb25zdCB7IG5leHQ6IG5leHQyLCBwcmV2OiBwcmV2MiB9ID0gaXRlbTtcbiAgICAgICAgICBpZiAobmV4dDIgJiYgbmV4dDIgIT09IHByZXYyKSB7XG4gICAgICAgICAgICBpdGVtLnByZXYgPSBuZXh0MjtcbiAgICAgICAgICAgIGl0ZW0uc2NyaWJibGUucG9pbnRzLnB1c2gobmV4dDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS5zY3JpYmJsZS5wb2ludHMubGVuZ3RoID4gOCkge1xuICAgICAgICAgICAgaXRlbS5zY3JpYmJsZS5zdGF0ZSA9IFwiYWN0aXZlXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS5kZWxheVJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICBpdGVtLmRlbGF5UmVtYWluaW5nID0gTWF0aC5tYXgoMCwgaXRlbS5kZWxheVJlbWFpbmluZyAtIGVsYXBzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0udGltZW91dE1zICs9IGVsYXBzZWQ7XG4gICAgICAgIGlmIChpdGVtLnRpbWVvdXRNcyA+PSAxNikge1xuICAgICAgICAgIGl0ZW0udGltZW91dE1zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGRlbGF5UmVtYWluaW5nLCB0aW1lb3V0TXMsIHByZXYsIG5leHQsIHNjcmliYmxlIH0gPSBpdGVtO1xuICAgICAgICBzd2l0Y2ggKHNjcmliYmxlLnN0YXRlKSB7XG4gICAgICAgICAgY2FzZSBcImFjdGl2ZVwiOiB7XG4gICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBwcmV2KSB7XG4gICAgICAgICAgICAgIGl0ZW0ucHJldiA9IG5leHQ7XG4gICAgICAgICAgICAgIHNjcmliYmxlLnBvaW50cy5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICBpZiAoZGVsYXlSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NyaWJibGUucG9pbnRzLmxlbmd0aCA+IDgpIHtcbiAgICAgICAgICAgICAgICAgIHNjcmliYmxlLnBvaW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHRpbWVvdXRNcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChzY3JpYmJsZS5wb2ludHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgc2NyaWJibGUucG9pbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZGVsYXlSZW1haW5pbmcgPSBzY3JpYmJsZS5kZWxheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwic3RvcHBpbmdcIjoge1xuICAgICAgICAgICAgaWYgKGl0ZW0uZGVsYXlSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgaWYgKHRpbWVvdXRNcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChzY3JpYmJsZS5wb2ludHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnNjcmliYmxlSXRlbXMuZGVsZXRlKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyaWJibGUuc2hyaW5rKSB7XG4gICAgICAgICAgICAgICAgICBzY3JpYmJsZS5zaXplID0gTWF0aC5tYXgoMSwgc2NyaWJibGUuc2l6ZSAqICgxIC0gc2NyaWJibGUuc2hyaW5rKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNjcmliYmxlLnBvaW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBhdXNlZFwiOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5lZGl0b3IudXBkYXRlSW5zdGFuY2VTdGF0ZSh7XG4gICAgICAgIHNjcmliYmxlczogQXJyYXkuZnJvbSh0aGlzLnNjcmliYmxlSXRlbXMudmFsdWVzKCkpLm1hcCgoeyBzY3JpYmJsZSB9KSA9PiAoe1xuICAgICAgICAgIC4uLnNjcmliYmxlLFxuICAgICAgICAgIHBvaW50czogWy4uLnNjcmliYmxlLnBvaW50c11cbiAgICAgICAgfSkpLnNsaWNlKC01KVxuICAgICAgICAvLyBsaW1pdCB0byB0aHJlZSBhcyBhIG1pbm9yIHNhbml0eSBjaGVja1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFNjcmliYmxlTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjcmliYmxlTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoundsSnaps: () => (/* binding */ BoundsSnaps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _getVisibleGaps_dec, _getSnappableGapNodes_dec, _getSnappablePoints_dec, _getSnapPointsCache_dec, _init;\n\n\n\n\n\n\nconst round = (x) => {\n  const decimalPlacesTolerance = 8;\n  return Math.round(x * 10 ** decimalPlacesTolerance) / 10 ** decimalPlacesTolerance;\n};\nfunction findAdjacentGaps(gaps, shapeId, gapLength, direction, intersection) {\n  const matches = gaps.filter(\n    (gap) => (direction === \"forward\" ? gap.startNode.id === shapeId : gap.endNode.id === shapeId) && round(gap.length) === round(gapLength) && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n      gap.breadthIntersection[0],\n      gap.breadthIntersection[1],\n      intersection[0],\n      intersection[1]\n    )\n  );\n  if (matches.length === 0) return [];\n  const nextNodes = /* @__PURE__ */ new Set();\n  matches.forEach((match) => {\n    const node = direction === \"forward\" ? match.endNode.id : match.startNode.id;\n    if (!nextNodes.has(node)) {\n      nextNodes.add(node);\n      const foundGaps = findAdjacentGaps(\n        gaps,\n        node,\n        gapLength,\n        direction,\n        (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n          match.breadthIntersection[0],\n          match.breadthIntersection[1],\n          intersection[0],\n          intersection[1]\n        )\n      );\n      matches.push(...foundGaps);\n    }\n  });\n  return matches;\n}\nfunction dedupeGapSnaps(snaps) {\n  snaps.sort((a, b) => b.gaps.length - a.gaps.length);\n  for (let i = snaps.length - 1; i > 0; i--) {\n    const snap = snaps[i];\n    for (let j = i - 1; j >= 0; j--) {\n      const otherSnap = snaps[j];\n      if (otherSnap.direction === snap.direction && snap.gaps.every(\n        (gap) => otherSnap.gaps.some(\n          (otherGap) => round(gap.startEdge[0].x) === round(otherGap.startEdge[0].x) && round(gap.startEdge[0].y) === round(otherGap.startEdge[0].y) && round(gap.startEdge[1].x) === round(otherGap.startEdge[1].x) && round(gap.startEdge[1].y) === round(otherGap.startEdge[1].y)\n        ) && otherSnap.gaps.some(\n          (otherGap) => round(gap.endEdge[0].x) === round(otherGap.endEdge[0].x) && round(gap.endEdge[0].y) === round(otherGap.endEdge[0].y) && round(gap.endEdge[1].x) === round(otherGap.endEdge[1].x) && round(gap.endEdge[1].y) === round(otherGap.endEdge[1].y)\n        )\n      )) {\n        snaps.splice(i, 1);\n        break;\n      }\n    }\n  }\n}\n_getSnapPointsCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSnappablePoints_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSnappableGapNodes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getVisibleGaps_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed];\nclass BoundsSnaps {\n  constructor(manager) {\n    this.manager = manager;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"editor\");\n    this.editor = manager.editor;\n  }\n  getSnapPointsCache() {\n    const { editor } = this;\n    return editor.store.createComputedCache(\"snapPoints\", (shape) => {\n      const pageTransform = editor.getShapePageTransform(shape.id);\n      if (!pageTransform) return void 0;\n      const boundsSnapGeometry = editor.getShapeUtil(shape).getBoundsSnapGeometry(shape);\n      const snapPoints = boundsSnapGeometry.points ?? editor.getShapeGeometry(shape).bounds.cornersAndCenter;\n      if (!pageTransform || !snapPoints) return void 0;\n      return snapPoints.map((point, i) => {\n        const { x, y } = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_3__.Mat.applyToPoint(pageTransform, point);\n        return { x, y, id: `${shape.id}:${i}` };\n      });\n    });\n  }\n  getSnapPoints(shapeId) {\n    return this.getSnapPointsCache().get(shapeId) ?? [];\n  }\n  getSnappablePoints() {\n    const snapPointsCache = this.getSnapPointsCache();\n    const snappableShapes = this.manager.getSnappableShapes();\n    const result = [];\n    for (const shapeId of snappableShapes) {\n      const snapPoints = snapPointsCache.get(shapeId);\n      if (snapPoints) {\n        result.push(...snapPoints);\n      }\n    }\n    return result;\n  }\n  getSnappableGapNodes() {\n    return Array.from(this.manager.getSnappableShapes(), (shapeId) => ({\n      id: shapeId,\n      pageBounds: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageBounds(shapeId))\n    }));\n  }\n  getVisibleGaps() {\n    const horizontal = [];\n    const vertical = [];\n    let startNode, endNode;\n    const sortedShapesOnCurrentPageHorizontal = this.getSnappableGapNodes().sort((a, b) => {\n      return a.pageBounds.minX - b.pageBounds.minX;\n    });\n    for (let i = 0; i < sortedShapesOnCurrentPageHorizontal.length; i++) {\n      startNode = sortedShapesOnCurrentPageHorizontal[i];\n      for (let j = i + 1; j < sortedShapesOnCurrentPageHorizontal.length; j++) {\n        endNode = sortedShapesOnCurrentPageHorizontal[j];\n        if (\n          // is there space between the boxes\n          startNode.pageBounds.maxX < endNode.pageBounds.minX && // and they overlap in the y axis\n          (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n            startNode.pageBounds.minY,\n            startNode.pageBounds.maxY,\n            endNode.pageBounds.minY,\n            endNode.pageBounds.maxY\n          )\n        ) {\n          horizontal.push({\n            startNode,\n            endNode,\n            startEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.maxY)\n            ],\n            endEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.maxY)\n            ],\n            length: endNode.pageBounds.minX - startNode.pageBounds.maxX,\n            breadthIntersection: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              startNode.pageBounds.minY,\n              startNode.pageBounds.maxY,\n              endNode.pageBounds.minY,\n              endNode.pageBounds.maxY\n            )\n          });\n        }\n      }\n    }\n    const sortedShapesOnCurrentPageVertical = sortedShapesOnCurrentPageHorizontal.sort((a, b) => {\n      return a.pageBounds.minY - b.pageBounds.minY;\n    });\n    for (let i = 0; i < sortedShapesOnCurrentPageVertical.length; i++) {\n      startNode = sortedShapesOnCurrentPageVertical[i];\n      for (let j = i + 1; j < sortedShapesOnCurrentPageVertical.length; j++) {\n        endNode = sortedShapesOnCurrentPageVertical[j];\n        if (\n          // is there space between the boxes\n          startNode.pageBounds.maxY < endNode.pageBounds.minY && // do they overlap in the x axis\n          (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n            startNode.pageBounds.minX,\n            startNode.pageBounds.maxX,\n            endNode.pageBounds.minX,\n            endNode.pageBounds.maxX\n          )\n        ) {\n          vertical.push({\n            startNode,\n            endNode,\n            startEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.minX, startNode.pageBounds.maxY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.maxY)\n            ],\n            endEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.maxX, endNode.pageBounds.minY)\n            ],\n            length: endNode.pageBounds.minY - startNode.pageBounds.maxY,\n            breadthIntersection: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              startNode.pageBounds.minX,\n              startNode.pageBounds.maxX,\n              endNode.pageBounds.minX,\n              endNode.pageBounds.maxX\n            )\n          });\n        }\n      }\n    }\n    return { horizontal, vertical };\n  }\n  snapTranslateShapes({\n    lockedAxis,\n    initialSelectionPageBounds,\n    initialSelectionSnapPoints,\n    dragDelta\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    const visibleSnapPointsNotInSelection = this.getSnappablePoints();\n    const selectionPageBounds = initialSelectionPageBounds.clone().translate(dragDelta);\n    const selectionSnapPoints = initialSelectionSnapPoints.map(\n      ({ x, y }, i) => ({\n        id: \"selection:\" + i,\n        x: x + dragDelta.x,\n        y: y + dragDelta.y\n      })\n    );\n    const otherNodeSnapPoints = visibleSnapPointsNotInSelection;\n    const nearestSnapsX = [];\n    const nearestSnapsY = [];\n    const minOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(snapThreshold, snapThreshold);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    this.collectGapSnaps({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY,\n      minOffset\n    });\n    const nudge = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(\n      lockedAxis === \"x\" ? 0 : nearestSnapsX[0]?.nudge ?? 0,\n      lockedAxis === \"y\" ? 0 : nearestSnapsY[0]?.nudge ?? 0\n    );\n    minOffset.x = 0;\n    minOffset.y = 0;\n    nearestSnapsX.length = 0;\n    nearestSnapsY.length = 0;\n    selectionSnapPoints.forEach((s) => {\n      s.x += nudge.x;\n      s.y += nudge.y;\n    });\n    selectionPageBounds.translate(nudge);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    this.collectGapSnaps({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY,\n      minOffset\n    });\n    const pointSnapsLines = this.getPointSnapLines({\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    const gapSnapLines = this.getGapSnapLines({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    this.manager.setIndicators([...gapSnapLines, ...pointSnapsLines]);\n    return { nudge };\n  }\n  snapResizeShapes({\n    initialSelectionPageBounds,\n    dragDelta,\n    handle: originalHandle,\n    isAspectRatioLocked,\n    isResizingFromCenter\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    const {\n      box: unsnappedResizedPageBounds,\n      scaleX,\n      scaleY\n    } = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box.Resize(\n      initialSelectionPageBounds,\n      originalHandle,\n      isResizingFromCenter ? dragDelta.x * 2 : dragDelta.x,\n      isResizingFromCenter ? dragDelta.y * 2 : dragDelta.y,\n      isAspectRatioLocked\n    );\n    let handle = originalHandle;\n    if (scaleX < 0) {\n      handle = (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.flipSelectionHandleX)(handle);\n    }\n    if (scaleY < 0) {\n      handle = (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.flipSelectionHandleY)(handle);\n    }\n    if (isResizingFromCenter) {\n      unsnappedResizedPageBounds.center = initialSelectionPageBounds.center;\n    }\n    const isXLocked = handle === \"top\" || handle === \"bottom\";\n    const isYLocked = handle === \"left\" || handle === \"right\";\n    const selectionSnapPoints = getResizeSnapPointsForHandle(handle, unsnappedResizedPageBounds);\n    const otherNodeSnapPoints = this.getSnappablePoints();\n    const nearestSnapsX = [];\n    const nearestSnapsY = [];\n    const minOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(snapThreshold, snapThreshold);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    const nudge = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(\n      isXLocked ? 0 : nearestSnapsX[0]?.nudge ?? 0,\n      isYLocked ? 0 : nearestSnapsY[0]?.nudge ?? 0\n    );\n    if (isAspectRatioLocked && (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.isSelectionCorner)(handle) && nudge.len() !== 0) {\n      const primaryNudgeAxis = nearestSnapsX.length && nearestSnapsY.length ? Math.abs(nudge.x) < Math.abs(nudge.y) ? \"x\" : \"y\" : nearestSnapsX.length ? \"x\" : \"y\";\n      const ratio = initialSelectionPageBounds.aspectRatio;\n      if (primaryNudgeAxis === \"x\") {\n        nearestSnapsY.length = 0;\n        nudge.y = nudge.x / ratio;\n        if (handle === \"bottom_left\" || handle === \"top_right\") {\n          nudge.y = -nudge.y;\n        }\n      } else {\n        nearestSnapsX.length = 0;\n        nudge.x = nudge.y * ratio;\n        if (handle === \"bottom_left\" || handle === \"top_right\") {\n          nudge.x = -nudge.x;\n        }\n      }\n    }\n    const snappedDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Add(dragDelta, nudge);\n    const { box: snappedResizedPageBounds } = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box.Resize(\n      initialSelectionPageBounds,\n      originalHandle,\n      isResizingFromCenter ? snappedDelta.x * 2 : snappedDelta.x,\n      isResizingFromCenter ? snappedDelta.y * 2 : snappedDelta.y,\n      isAspectRatioLocked\n    );\n    if (isResizingFromCenter) {\n      snappedResizedPageBounds.center = initialSelectionPageBounds.center;\n    }\n    const snappedSelectionPoints = getResizeSnapPointsForHandle(\"any\", snappedResizedPageBounds);\n    nearestSnapsX.length = 0;\n    nearestSnapsY.length = 0;\n    minOffset.x = 0;\n    minOffset.y = 0;\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints: snappedSelectionPoints\n    });\n    const pointSnaps = this.getPointSnapLines({\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    this.manager.setIndicators([...pointSnaps]);\n    return { nudge };\n  }\n  collectPointSnaps({\n    selectionSnapPoints,\n    otherNodeSnapPoints,\n    minOffset,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    for (const thisSnapPoint of selectionSnapPoints) {\n      for (const otherSnapPoint of otherNodeSnapPoints) {\n        const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Sub(thisSnapPoint, otherSnapPoint);\n        const offsetX = Math.abs(offset.x);\n        const offsetY = Math.abs(offset.y);\n        if (round(offsetX) <= round(minOffset.x)) {\n          if (round(offsetX) < round(minOffset.x)) {\n            nearestSnapsX.length = 0;\n          }\n          nearestSnapsX.push({\n            type: \"points\",\n            points: { thisPoint: thisSnapPoint, otherPoint: otherSnapPoint },\n            nudge: otherSnapPoint.x - thisSnapPoint.x\n          });\n          minOffset.x = offsetX;\n        }\n        if (round(offsetY) <= round(minOffset.y)) {\n          if (round(offsetY) < round(minOffset.y)) {\n            nearestSnapsY.length = 0;\n          }\n          nearestSnapsY.push({\n            type: \"points\",\n            points: { thisPoint: thisSnapPoint, otherPoint: otherSnapPoint },\n            nudge: otherSnapPoint.y - thisSnapPoint.y\n          });\n          minOffset.y = offsetY;\n        }\n      }\n    }\n  }\n  collectGapSnaps({\n    selectionPageBounds,\n    minOffset,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const { horizontal, vertical } = this.getVisibleGaps();\n    for (const gap of horizontal) {\n      if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n        gap.breadthIntersection[0],\n        gap.breadthIntersection[1],\n        selectionPageBounds.minY,\n        selectionPageBounds.maxY\n      )) {\n        continue;\n      }\n      const gapMidX = gap.startEdge[0].x + gap.length / 2;\n      const centerNudge = gapMidX - selectionPageBounds.center.x;\n      const gapIsLargerThanSelection = gap.length > selectionPageBounds.width;\n      if (gapIsLargerThanSelection && round(Math.abs(centerNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(centerNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(centerNudge);\n        const snap = {\n          type: \"gap_center\",\n          gap,\n          nudge: centerNudge\n        };\n        const otherCenterSnap = nearestSnapsX.find(({ type }) => type === \"gap_center\");\n        const gapBreadthsOverlap = otherCenterSnap && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n          gap.breadthIntersection[0],\n          gap.breadthIntersection[1],\n          otherCenterSnap.gap.breadthIntersection[0],\n          otherCenterSnap.gap.breadthIntersection[1]\n        );\n        if (otherCenterSnap && otherCenterSnap.gap.length > gap.length && gapBreadthsOverlap) {\n          nearestSnapsX[nearestSnapsX.indexOf(otherCenterSnap)] = snap;\n        } else if (!otherCenterSnap || !gapBreadthsOverlap) {\n          nearestSnapsX.push(snap);\n        }\n      }\n      const duplicationLeftX = gap.startNode.pageBounds.minX - gap.length;\n      const selectionRightX = selectionPageBounds.maxX;\n      const duplicationLeftNudge = duplicationLeftX - selectionRightX;\n      if (round(Math.abs(duplicationLeftNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(duplicationLeftNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(duplicationLeftNudge);\n        nearestSnapsX.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"left\",\n          nudge: duplicationLeftNudge\n        });\n      }\n      const duplicationRightX = gap.endNode.pageBounds.maxX + gap.length;\n      const selectionLeftX = selectionPageBounds.minX;\n      const duplicationRightNudge = duplicationRightX - selectionLeftX;\n      if (round(Math.abs(duplicationRightNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(duplicationRightNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(duplicationRightNudge);\n        nearestSnapsX.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"right\",\n          nudge: duplicationRightNudge\n        });\n      }\n    }\n    for (const gap of vertical) {\n      if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n        gap.breadthIntersection[0],\n        gap.breadthIntersection[1],\n        selectionPageBounds.minX,\n        selectionPageBounds.maxX\n      )) {\n        continue;\n      }\n      const gapMidY = gap.startEdge[0].y + gap.length / 2;\n      const centerNudge = gapMidY - selectionPageBounds.center.y;\n      const gapIsLargerThanSelection = gap.length > selectionPageBounds.height;\n      if (gapIsLargerThanSelection && round(Math.abs(centerNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(centerNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(centerNudge);\n        const snap = {\n          type: \"gap_center\",\n          gap,\n          nudge: centerNudge\n        };\n        const otherCenterSnap = nearestSnapsY.find(({ type }) => type === \"gap_center\");\n        const gapBreadthsOverlap = otherCenterSnap && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n          otherCenterSnap.gap.breadthIntersection[0],\n          otherCenterSnap.gap.breadthIntersection[1],\n          gap.breadthIntersection[0],\n          gap.breadthIntersection[1]\n        );\n        if (otherCenterSnap && otherCenterSnap.gap.length > gap.length && gapBreadthsOverlap) {\n          nearestSnapsY[nearestSnapsY.indexOf(otherCenterSnap)] = snap;\n        } else if (!otherCenterSnap || !gapBreadthsOverlap) {\n          nearestSnapsY.push(snap);\n        }\n        continue;\n      }\n      const duplicationTopY = gap.startNode.pageBounds.minY - gap.length;\n      const selectionBottomY = selectionPageBounds.maxY;\n      const duplicationTopNudge = duplicationTopY - selectionBottomY;\n      if (round(Math.abs(duplicationTopNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(duplicationTopNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(duplicationTopNudge);\n        nearestSnapsY.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"top\",\n          nudge: duplicationTopNudge\n        });\n      }\n      const duplicationBottomY = gap.endNode.pageBounds.maxY + gap.length;\n      const selectionTopY = selectionPageBounds.minY;\n      const duplicationBottomNudge = duplicationBottomY - selectionTopY;\n      if (round(Math.abs(duplicationBottomNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(duplicationBottomNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(duplicationBottomNudge);\n        nearestSnapsY.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"bottom\",\n          nudge: duplicationBottomNudge\n        });\n      }\n    }\n  }\n  getPointSnapLines({\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const snapGroupsX = {};\n    const snapGroupsY = {};\n    if (nearestSnapsX.length > 0) {\n      for (const snap of nearestSnapsX) {\n        if (snap.type === \"points\") {\n          const key = round(snap.points.otherPoint.x);\n          if (!snapGroupsX[key]) {\n            snapGroupsX[key] = [];\n          }\n          snapGroupsX[key].push(snap.points);\n        }\n      }\n    }\n    if (nearestSnapsY.length > 0) {\n      for (const snap of nearestSnapsY) {\n        if (snap.type === \"points\") {\n          const key = round(snap.points.otherPoint.y);\n          if (!snapGroupsY[key]) {\n            snapGroupsY[key] = [];\n          }\n          snapGroupsY[key].push(snap.points);\n        }\n      }\n    }\n    return Object.values(snapGroupsX).concat(Object.values(snapGroupsY)).map((snapGroup) => ({\n      id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n      type: \"points\",\n      points: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.dedupe)(\n        snapGroup.map((snap) => _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.From(snap.otherPoint)).concat(snapGroup.map((snap) => _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.From(snap.thisPoint))),\n        (a, b) => a.equals(b)\n      )\n    }));\n  }\n  getGapSnapLines({\n    selectionPageBounds,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const { vertical, horizontal } = this.getVisibleGaps();\n    const selectionSides = {\n      top: selectionPageBounds.sides[0],\n      right: selectionPageBounds.sides[1],\n      // need bottom and left to be sorted asc, which .sides is not.\n      bottom: [selectionPageBounds.corners[3], selectionPageBounds.corners[2]],\n      left: [selectionPageBounds.corners[0], selectionPageBounds.corners[3]]\n    };\n    const result = [];\n    if (nearestSnapsX.length > 0) {\n      for (const snap of nearestSnapsX) {\n        if (snap.type === \"points\") continue;\n        const {\n          gap: { breadthIntersection, startEdge, startNode, endNode, length, endEdge }\n        } = snap;\n        switch (snap.type) {\n          case \"gap_center\": {\n            const newGapsLength = (length - selectionPageBounds.width) / 2;\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minY,\n              selectionPageBounds.maxY\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"horizontal\",\n              id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n              gaps: [\n                ...findAdjacentGaps(\n                  horizontal,\n                  startNode.id,\n                  newGapsLength,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                {\n                  startEdge,\n                  endEdge: selectionSides.left\n                },\n                {\n                  startEdge: selectionSides.right,\n                  endEdge\n                },\n                ...findAdjacentGaps(\n                  horizontal,\n                  endNode.id,\n                  newGapsLength,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ]\n            });\n            break;\n          }\n          case \"gap_duplicate\": {\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minY,\n              selectionPageBounds.maxY\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"horizontal\",\n              id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n              gaps: snap.protrusionDirection === \"left\" ? [\n                {\n                  startEdge: selectionSides.right,\n                  endEdge: startEdge.map(\n                    (v) => v.clone().addXY(-startNode.pageBounds.width, 0)\n                  )\n                },\n                { startEdge, endEdge },\n                ...findAdjacentGaps(\n                  horizontal,\n                  endNode.id,\n                  length,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ] : [\n                ...findAdjacentGaps(\n                  horizontal,\n                  startNode.id,\n                  length,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                { startEdge, endEdge },\n                {\n                  startEdge: endEdge.map(\n                    (v) => v.clone().addXY(snap.gap.endNode.pageBounds.width, 0)\n                  ),\n                  endEdge: selectionSides.left\n                }\n              ]\n            });\n            break;\n          }\n        }\n      }\n    }\n    if (nearestSnapsY.length > 0) {\n      for (const snap of nearestSnapsY) {\n        if (snap.type === \"points\") continue;\n        const {\n          gap: { breadthIntersection, startEdge, startNode, endNode, length, endEdge }\n        } = snap;\n        switch (snap.type) {\n          case \"gap_center\": {\n            const newGapsLength = (length - selectionPageBounds.height) / 2;\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minX,\n              selectionPageBounds.maxX\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"vertical\",\n              id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n              gaps: [\n                ...findAdjacentGaps(\n                  vertical,\n                  startNode.id,\n                  newGapsLength,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                {\n                  startEdge,\n                  endEdge: selectionSides.top\n                },\n                {\n                  startEdge: selectionSides.bottom,\n                  endEdge\n                },\n                ...findAdjacentGaps(\n                  vertical,\n                  snap.gap.endNode.id,\n                  newGapsLength,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ]\n            });\n            break;\n          }\n          case \"gap_duplicate\":\n            {\n              const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n                breadthIntersection[0],\n                breadthIntersection[1],\n                selectionPageBounds.minX,\n                selectionPageBounds.maxX\n              );\n              result.push({\n                type: \"gaps\",\n                direction: \"vertical\",\n                id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n                gaps: snap.protrusionDirection === \"top\" ? [\n                  {\n                    startEdge: selectionSides.bottom,\n                    endEdge: startEdge.map(\n                      (v) => v.clone().addXY(0, -startNode.pageBounds.height)\n                    )\n                  },\n                  { startEdge, endEdge },\n                  ...findAdjacentGaps(\n                    vertical,\n                    endNode.id,\n                    length,\n                    \"forward\",\n                    gapBreadthIntersection\n                  )\n                ] : [\n                  ...findAdjacentGaps(\n                    vertical,\n                    startNode.id,\n                    length,\n                    \"backward\",\n                    gapBreadthIntersection\n                  ),\n                  { startEdge, endEdge },\n                  {\n                    startEdge: endEdge.map(\n                      (v) => v.clone().addXY(0, endNode.pageBounds.height)\n                    ),\n                    endEdge: selectionSides.top\n                  }\n                ]\n              });\n            }\n            break;\n        }\n      }\n    }\n    dedupeGapSnaps(result);\n    return result;\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"getSnapPointsCache\", _getSnapPointsCache_dec, BoundsSnaps);\n__decorateElement(_init, 1, \"getSnappablePoints\", _getSnappablePoints_dec, BoundsSnaps);\n__decorateElement(_init, 1, \"getSnappableGapNodes\", _getSnappableGapNodes_dec, BoundsSnaps);\n__decorateElement(_init, 1, \"getVisibleGaps\", _getVisibleGaps_dec, BoundsSnaps);\n__decoratorMetadata(_init, BoundsSnaps);\nfunction getResizeSnapPointsForHandle(handle, selectionPageBounds) {\n  const { minX, maxX, minY, maxY } = selectionPageBounds;\n  const result = [];\n  switch (handle) {\n    case \"top\":\n    case \"left\":\n    case \"top_left\":\n    case \"any\":\n      result.push({\n        id: \"top_left\",\n        handle: \"top_left\",\n        x: minX,\n        y: minY\n      });\n  }\n  switch (handle) {\n    case \"top\":\n    case \"right\":\n    case \"top_right\":\n    case \"any\":\n      result.push({\n        id: \"top_right\",\n        handle: \"top_right\",\n        x: maxX,\n        y: minY\n      });\n  }\n  switch (handle) {\n    case \"bottom\":\n    case \"right\":\n    case \"bottom_right\":\n    case \"any\":\n      result.push({\n        id: \"bottom_right\",\n        handle: \"bottom_right\",\n        x: maxX,\n        y: maxY\n      });\n  }\n  switch (handle) {\n    case \"bottom\":\n    case \"left\":\n    case \"bottom_left\":\n    case \"any\":\n      result.push({\n        id: \"bottom_left\",\n        handle: \"bottom_left\",\n        x: minX,\n        y: maxY\n      });\n  }\n  return result;\n}\n\n//# sourceMappingURL=BoundsSnaps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9Cb3VuZHNTbmFwcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx3SkFBd0o7QUFDek47QUFDQTtBQUNBLGtFQUFrRSxPQUFPO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBIQUEwSDtBQUMxSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLCtDQUErQztBQUMvQztBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsK0JBQStCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lDO0FBQ3NCO0FBTTFCO0FBQ2E7QUFDQTtBQUMrQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSkFBZ0osd0VBQWlCO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdFQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE9BQU87QUFDeEM7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1EQUFRLDhCQUE4QixtREFBUSxnQ0FBZ0MsbURBQVEsMEJBQTBCLG1EQUFRO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxFQUFFLG9EQUFHO0FBQzVCLGlCQUFpQixhQUFhLFNBQVMsR0FBRyxFQUFFO0FBQzVDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQVk7QUFDOUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQixnREFBZ0Q7QUFDcEU7QUFDQSwwQkFBMEIsZ0RBQWdEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGlDQUFpQyx3RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQiw4Q0FBOEM7QUFDbEU7QUFDQSwwQkFBMEIsOENBQThDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGlDQUFpQyx3RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixvREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxFQUFFLG9EQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUVBQW9CO0FBQ25DO0FBQ0E7QUFDQSxlQUFlLHlFQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsc0JBQXNCLG9EQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixzRUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvREFBRztBQUM1QixZQUFZLGdDQUFnQyxFQUFFLG9EQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBc0Q7QUFDNUU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBc0Q7QUFDNUU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSx1QkFBdUI7QUFDbkM7QUFDQSxXQUFXLG9FQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsTUFBTTtBQUM1RCxzREFBc0Qsd0VBQWlCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvRUFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELE1BQU07QUFDNUQsc0RBQXNELG9FQUFhO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVEQUFRO0FBQ2xCO0FBQ0EsY0FBYyxxREFBTTtBQUNwQixnQ0FBZ0Msb0RBQUcsdURBQXVELG9EQUFHO0FBQzdGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3RUFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3RUFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsa0JBQWtCLG9CQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdFQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsd0VBQWlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdURBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUJBQXlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvU25hcE1hbmFnZXIvQm91bmRzU25hcHMubWpzPzRhMjUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19rbm93blN5bWJvbCA9IChuYW1lLCBzeW1ib2wpID0+IChzeW1ib2wgPSBTeW1ib2xbbmFtZV0pID8gc3ltYm9sIDogU3ltYm9sLmZvcihcIlN5bWJvbC5cIiArIG5hbWUpO1xudmFyIF9fdHlwZUVycm9yID0gKG1zZykgPT4ge1xuICB0aHJvdyBUeXBlRXJyb3IobXNnKTtcbn07XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG52YXIgX19kZWNvcmF0b3JTdGFydCA9IChiYXNlKSA9PiBbLCAsICwgX19jcmVhdGUoYmFzZT8uW19fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKV0gPz8gbnVsbCldO1xudmFyIF9fZGVjb3JhdG9yU3RyaW5ncyA9IFtcImNsYXNzXCIsIFwibWV0aG9kXCIsIFwiZ2V0dGVyXCIsIFwic2V0dGVyXCIsIFwiYWNjZXNzb3JcIiwgXCJmaWVsZFwiLCBcInZhbHVlXCIsIFwiZ2V0XCIsIFwic2V0XCJdO1xudmFyIF9fZXhwZWN0Rm4gPSAoZm4pID0+IGZuICE9PSB2b2lkIDAgJiYgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIgPyBfX3R5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpIDogZm47XG52YXIgX19kZWNvcmF0b3JDb250ZXh0ID0gKGtpbmQsIG5hbWUsIGRvbmUsIG1ldGFkYXRhLCBmbnMpID0+ICh7IGtpbmQ6IF9fZGVjb3JhdG9yU3RyaW5nc1traW5kXSwgbmFtZSwgbWV0YWRhdGEsIGFkZEluaXRpYWxpemVyOiAoZm4pID0+IGRvbmUuXyA/IF9fdHlwZUVycm9yKFwiQWxyZWFkeSBpbml0aWFsaXplZFwiKSA6IGZucy5wdXNoKF9fZXhwZWN0Rm4oZm4gfHwgbnVsbCkpIH0pO1xudmFyIF9fZGVjb3JhdG9yTWV0YWRhdGEgPSAoYXJyYXksIHRhcmdldCkgPT4gX19kZWZOb3JtYWxQcm9wKHRhcmdldCwgX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpLCBhcnJheVszXSk7XG52YXIgX19ydW5Jbml0aWFsaXplcnMgPSAoYXJyYXksIGZsYWdzLCBzZWxmLCB2YWx1ZSkgPT4ge1xuICBmb3IgKHZhciBpID0gMCwgZm5zID0gYXJyYXlbZmxhZ3MgPj4gMV0sIG4gPSBmbnMgJiYgZm5zLmxlbmd0aDsgaSA8IG47IGkrKykgZmxhZ3MgJiAxID8gZm5zW2ldLmNhbGwoc2VsZikgOiB2YWx1ZSA9IGZuc1tpXS5jYWxsKHNlbGYsIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfX2RlY29yYXRlRWxlbWVudCA9IChhcnJheSwgZmxhZ3MsIG5hbWUsIGRlY29yYXRvcnMsIHRhcmdldCwgZXh0cmEpID0+IHtcbiAgdmFyIGZuLCBpdCwgZG9uZSwgY3R4LCBhY2Nlc3MsIGsgPSBmbGFncyAmIDcsIHMgPSAhIShmbGFncyAmIDgpLCBwID0gISEoZmxhZ3MgJiAxNik7XG4gIHZhciBqID0gayA+IDMgPyBhcnJheS5sZW5ndGggKyAxIDogayA/IHMgPyAxIDogMiA6IDAsIGtleSA9IF9fZGVjb3JhdG9yU3RyaW5nc1trICsgNV07XG4gIHZhciBpbml0aWFsaXplcnMgPSBrID4gMyAmJiAoYXJyYXlbaiAtIDFdID0gW10pLCBleHRyYUluaXRpYWxpemVycyA9IGFycmF5W2pdIHx8IChhcnJheVtqXSA9IFtdKTtcbiAgdmFyIGRlc2MgPSBrICYmICghcCAmJiAhcyAmJiAodGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZSksIGsgPCA1ICYmIChrID4gMyB8fCAhcCkgJiYgX19nZXRPd25Qcm9wRGVzYyhrIDwgNCA/IHRhcmdldCA6IHsgZ2V0IFtuYW1lXSgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIGV4dHJhKTtcbiAgfSwgc2V0IFtuYW1lXSh4KSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZVNldCh0aGlzLCBleHRyYSwgeCk7XG4gIH0gfSwgbmFtZSkpO1xuICBrID8gcCAmJiBrIDwgNCAmJiBfX25hbWUoZXh0cmEsIChrID4gMiA/IFwic2V0IFwiIDogayA+IDEgPyBcImdldCBcIiA6IFwiXCIpICsgbmFtZSkgOiBfX25hbWUodGFyZ2V0LCBuYW1lKTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjdHggPSBfX2RlY29yYXRvckNvbnRleHQoaywgbmFtZSwgZG9uZSA9IHt9LCBhcnJheVszXSwgZXh0cmFJbml0aWFsaXplcnMpO1xuICAgIGlmIChrKSB7XG4gICAgICBjdHguc3RhdGljID0gcywgY3R4LnByaXZhdGUgPSBwLCBhY2Nlc3MgPSBjdHguYWNjZXNzID0geyBoYXM6IHAgPyAoeCkgPT4gX19wcml2YXRlSW4odGFyZ2V0LCB4KSA6ICh4KSA9PiBuYW1lIGluIHggfTtcbiAgICAgIGlmIChrIF4gMykgYWNjZXNzLmdldCA9IHAgPyAoeCkgPT4gKGsgXiAxID8gX19wcml2YXRlR2V0IDogX19wcml2YXRlTWV0aG9kKSh4LCB0YXJnZXQsIGsgXiA0ID8gZXh0cmEgOiBkZXNjLmdldCkgOiAoeCkgPT4geFtuYW1lXTtcbiAgICAgIGlmIChrID4gMikgYWNjZXNzLnNldCA9IHAgPyAoeCwgeSkgPT4gX19wcml2YXRlU2V0KHgsIHRhcmdldCwgeSwgayBeIDQgPyBleHRyYSA6IGRlc2Muc2V0KSA6ICh4LCB5KSA9PiB4W25hbWVdID0geTtcbiAgICB9XG4gICAgaXQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoayA/IGsgPCA0ID8gcCA/IGV4dHJhIDogZGVzY1trZXldIDogayA+IDQgPyB2b2lkIDAgOiB7IGdldDogZGVzYy5nZXQsIHNldDogZGVzYy5zZXQgfSA6IHRhcmdldCwgY3R4KSwgZG9uZS5fID0gMTtcbiAgICBpZiAoayBeIDQgfHwgaXQgPT09IHZvaWQgMCkgX19leHBlY3RGbihpdCkgJiYgKGsgPiA0ID8gaW5pdGlhbGl6ZXJzLnVuc2hpZnQoaXQpIDogayA/IHAgPyBleHRyYSA9IGl0IDogZGVzY1trZXldID0gaXQgOiB0YXJnZXQgPSBpdCk7XG4gICAgZWxzZSBpZiAodHlwZW9mIGl0ICE9PSBcIm9iamVjdFwiIHx8IGl0ID09PSBudWxsKSBfX3R5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcbiAgICBlbHNlIF9fZXhwZWN0Rm4oZm4gPSBpdC5nZXQpICYmIChkZXNjLmdldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LnNldCkgJiYgKGRlc2Muc2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuaW5pdCkgJiYgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoZm4pO1xuICB9XG4gIHJldHVybiBrIHx8IF9fZGVjb3JhdG9yTWV0YWRhdGEoYXJyYXksIHRhcmdldCksIGRlc2MgJiYgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgZGVzYyksIHAgPyBrIF4gNCA/IGV4dHJhIDogZGVzYyA6IHRhcmdldDtcbn07XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiBtZW1iZXIuaGFzKG9iaikgfHwgX190eXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xudmFyIF9fcHJpdmF0ZUluID0gKG1lbWJlciwgb2JqKSA9PiBPYmplY3Qob2JqKSAhPT0gb2JqID8gX190eXBlRXJyb3IoJ0Nhbm5vdCB1c2UgdGhlIFwiaW5cIiBvcGVyYXRvciBvbiB0aGlzIHZhbHVlJykgOiBtZW1iZXIuaGFzKG9iaik7XG52YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpLCBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopKTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIiksIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKSwgdmFsdWUpO1xudmFyIF9fcHJpdmF0ZU1ldGhvZCA9IChvYmosIG1lbWJlciwgbWV0aG9kKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJhY2Nlc3MgcHJpdmF0ZSBtZXRob2RcIiksIG1ldGhvZCk7XG52YXIgX2dldFZpc2libGVHYXBzX2RlYywgX2dldFNuYXBwYWJsZUdhcE5vZGVzX2RlYywgX2dldFNuYXBwYWJsZVBvaW50c19kZWMsIF9nZXRTbmFwUG9pbnRzQ2FjaGVfZGVjLCBfaW5pdDtcbmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGFzc2VydEV4aXN0cywgZGVkdXBlLCB1bmlxdWVJZCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQge1xuICBCb3gsXG4gIGZsaXBTZWxlY3Rpb25IYW5kbGVYLFxuICBmbGlwU2VsZWN0aW9uSGFuZGxlWSxcbiAgaXNTZWxlY3Rpb25Db3JuZXJcbn0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvQm94Lm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgcmFuZ2VJbnRlcnNlY3Rpb24sIHJhbmdlc092ZXJsYXAgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmNvbnN0IHJvdW5kID0gKHgpID0+IHtcbiAgY29uc3QgZGVjaW1hbFBsYWNlc1RvbGVyYW5jZSA9IDg7XG4gIHJldHVybiBNYXRoLnJvdW5kKHggKiAxMCAqKiBkZWNpbWFsUGxhY2VzVG9sZXJhbmNlKSAvIDEwICoqIGRlY2ltYWxQbGFjZXNUb2xlcmFuY2U7XG59O1xuZnVuY3Rpb24gZmluZEFkamFjZW50R2FwcyhnYXBzLCBzaGFwZUlkLCBnYXBMZW5ndGgsIGRpcmVjdGlvbiwgaW50ZXJzZWN0aW9uKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBnYXBzLmZpbHRlcihcbiAgICAoZ2FwKSA9PiAoZGlyZWN0aW9uID09PSBcImZvcndhcmRcIiA/IGdhcC5zdGFydE5vZGUuaWQgPT09IHNoYXBlSWQgOiBnYXAuZW5kTm9kZS5pZCA9PT0gc2hhcGVJZCkgJiYgcm91bmQoZ2FwLmxlbmd0aCkgPT09IHJvdW5kKGdhcExlbmd0aCkgJiYgcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgaW50ZXJzZWN0aW9uWzBdLFxuICAgICAgaW50ZXJzZWN0aW9uWzFdXG4gICAgKVxuICApO1xuICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3QgbmV4dE5vZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgbWF0Y2hlcy5mb3JFYWNoKChtYXRjaCkgPT4ge1xuICAgIGNvbnN0IG5vZGUgPSBkaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiID8gbWF0Y2guZW5kTm9kZS5pZCA6IG1hdGNoLnN0YXJ0Tm9kZS5pZDtcbiAgICBpZiAoIW5leHROb2Rlcy5oYXMobm9kZSkpIHtcbiAgICAgIG5leHROb2Rlcy5hZGQobm9kZSk7XG4gICAgICBjb25zdCBmb3VuZEdhcHMgPSBmaW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICBnYXBzLFxuICAgICAgICBub2RlLFxuICAgICAgICBnYXBMZW5ndGgsXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgbWF0Y2guYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgICBtYXRjaC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICAgIGludGVyc2VjdGlvblswXSxcbiAgICAgICAgICBpbnRlcnNlY3Rpb25bMV1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIG1hdGNoZXMucHVzaCguLi5mb3VuZEdhcHMpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBtYXRjaGVzO1xufVxuZnVuY3Rpb24gZGVkdXBlR2FwU25hcHMoc25hcHMpIHtcbiAgc25hcHMuc29ydCgoYSwgYikgPT4gYi5nYXBzLmxlbmd0aCAtIGEuZ2Fwcy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gc25hcHMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgIGNvbnN0IHNuYXAgPSBzbmFwc1tpXTtcbiAgICBmb3IgKGxldCBqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICBjb25zdCBvdGhlclNuYXAgPSBzbmFwc1tqXTtcbiAgICAgIGlmIChvdGhlclNuYXAuZGlyZWN0aW9uID09PSBzbmFwLmRpcmVjdGlvbiAmJiBzbmFwLmdhcHMuZXZlcnkoXG4gICAgICAgIChnYXApID0+IG90aGVyU25hcC5nYXBzLnNvbWUoXG4gICAgICAgICAgKG90aGVyR2FwKSA9PiByb3VuZChnYXAuc3RhcnRFZGdlWzBdLngpID09PSByb3VuZChvdGhlckdhcC5zdGFydEVkZ2VbMF0ueCkgJiYgcm91bmQoZ2FwLnN0YXJ0RWRnZVswXS55KSA9PT0gcm91bmQob3RoZXJHYXAuc3RhcnRFZGdlWzBdLnkpICYmIHJvdW5kKGdhcC5zdGFydEVkZ2VbMV0ueCkgPT09IHJvdW5kKG90aGVyR2FwLnN0YXJ0RWRnZVsxXS54KSAmJiByb3VuZChnYXAuc3RhcnRFZGdlWzFdLnkpID09PSByb3VuZChvdGhlckdhcC5zdGFydEVkZ2VbMV0ueSlcbiAgICAgICAgKSAmJiBvdGhlclNuYXAuZ2Fwcy5zb21lKFxuICAgICAgICAgIChvdGhlckdhcCkgPT4gcm91bmQoZ2FwLmVuZEVkZ2VbMF0ueCkgPT09IHJvdW5kKG90aGVyR2FwLmVuZEVkZ2VbMF0ueCkgJiYgcm91bmQoZ2FwLmVuZEVkZ2VbMF0ueSkgPT09IHJvdW5kKG90aGVyR2FwLmVuZEVkZ2VbMF0ueSkgJiYgcm91bmQoZ2FwLmVuZEVkZ2VbMV0ueCkgPT09IHJvdW5kKG90aGVyR2FwLmVuZEVkZ2VbMV0ueCkgJiYgcm91bmQoZ2FwLmVuZEVkZ2VbMV0ueSkgPT09IHJvdW5kKG90aGVyR2FwLmVuZEVkZ2VbMV0ueSlcbiAgICAgICAgKVxuICAgICAgKSkge1xuICAgICAgICBzbmFwcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuX2dldFNuYXBQb2ludHNDYWNoZV9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0U25hcHBhYmxlUG9pbnRzX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRTbmFwcGFibGVHYXBOb2Rlc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0VmlzaWJsZUdhcHNfZGVjID0gW2NvbXB1dGVkXTtcbmNsYXNzIEJvdW5kc1NuYXBzIHtcbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgX19ydW5Jbml0aWFsaXplcnMoX2luaXQsIDUsIHRoaXMpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJlZGl0b3JcIik7XG4gICAgdGhpcy5lZGl0b3IgPSBtYW5hZ2VyLmVkaXRvcjtcbiAgfVxuICBnZXRTbmFwUG9pbnRzQ2FjaGUoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGVkaXRvci5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwic25hcFBvaW50c1wiLCAoc2hhcGUpID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlLmlkKTtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIGNvbnN0IGJvdW5kc1NuYXBHZW9tZXRyeSA9IGVkaXRvci5nZXRTaGFwZVV0aWwoc2hhcGUpLmdldEJvdW5kc1NuYXBHZW9tZXRyeShzaGFwZSk7XG4gICAgICBjb25zdCBzbmFwUG9pbnRzID0gYm91bmRzU25hcEdlb21ldHJ5LnBvaW50cyA/PyBlZGl0b3IuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkuYm91bmRzLmNvcm5lcnNBbmRDZW50ZXI7XG4gICAgICBpZiAoIXBhZ2VUcmFuc2Zvcm0gfHwgIXNuYXBQb2ludHMpIHJldHVybiB2b2lkIDA7XG4gICAgICByZXR1cm4gc25hcFBvaW50cy5tYXAoKHBvaW50LCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gTWF0LmFwcGx5VG9Qb2ludChwYWdlVHJhbnNmb3JtLCBwb2ludCk7XG4gICAgICAgIHJldHVybiB7IHgsIHksIGlkOiBgJHtzaGFwZS5pZH06JHtpfWAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGdldFNuYXBQb2ludHMoc2hhcGVJZCkge1xuICAgIHJldHVybiB0aGlzLmdldFNuYXBQb2ludHNDYWNoZSgpLmdldChzaGFwZUlkKSA/PyBbXTtcbiAgfVxuICBnZXRTbmFwcGFibGVQb2ludHMoKSB7XG4gICAgY29uc3Qgc25hcFBvaW50c0NhY2hlID0gdGhpcy5nZXRTbmFwUG9pbnRzQ2FjaGUoKTtcbiAgICBjb25zdCBzbmFwcGFibGVTaGFwZXMgPSB0aGlzLm1hbmFnZXIuZ2V0U25hcHBhYmxlU2hhcGVzKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChjb25zdCBzaGFwZUlkIG9mIHNuYXBwYWJsZVNoYXBlcykge1xuICAgICAgY29uc3Qgc25hcFBvaW50cyA9IHNuYXBQb2ludHNDYWNoZS5nZXQoc2hhcGVJZCk7XG4gICAgICBpZiAoc25hcFBvaW50cykge1xuICAgICAgICByZXN1bHQucHVzaCguLi5zbmFwUG9pbnRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBnZXRTbmFwcGFibGVHYXBOb2RlcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1hbmFnZXIuZ2V0U25hcHBhYmxlU2hhcGVzKCksIChzaGFwZUlkKSA9PiAoe1xuICAgICAgaWQ6IHNoYXBlSWQsXG4gICAgICBwYWdlQm91bmRzOiBhc3NlcnRFeGlzdHModGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlSWQpKVxuICAgIH0pKTtcbiAgfVxuICBnZXRWaXNpYmxlR2FwcygpIHtcbiAgICBjb25zdCBob3Jpem9udGFsID0gW107XG4gICAgY29uc3QgdmVydGljYWwgPSBbXTtcbiAgICBsZXQgc3RhcnROb2RlLCBlbmROb2RlO1xuICAgIGNvbnN0IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VIb3Jpem9udGFsID0gdGhpcy5nZXRTbmFwcGFibGVHYXBOb2RlcygpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLnBhZ2VCb3VuZHMubWluWCAtIGIucGFnZUJvdW5kcy5taW5YO1xuICAgIH0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZUhvcml6b250YWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0YXJ0Tm9kZSA9IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VIb3Jpem9udGFsW2ldO1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZUhvcml6b250YWwubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZW5kTm9kZSA9IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VIb3Jpem9udGFsW2pdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgLy8gaXMgdGhlcmUgc3BhY2UgYmV0d2VlbiB0aGUgYm94ZXNcbiAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhYIDwgZW5kTm9kZS5wYWdlQm91bmRzLm1pblggJiYgLy8gYW5kIHRoZXkgb3ZlcmxhcCBpbiB0aGUgeSBheGlzXG4gICAgICAgICAgcmFuZ2VzT3ZlcmxhcChcbiAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblksXG4gICAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhZLFxuICAgICAgICAgICAgZW5kTm9kZS5wYWdlQm91bmRzLm1pblksXG4gICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWF4WVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaG9yaXpvbnRhbC5wdXNoKHtcbiAgICAgICAgICAgIHN0YXJ0Tm9kZSxcbiAgICAgICAgICAgIGVuZE5vZGUsXG4gICAgICAgICAgICBzdGFydEVkZ2U6IFtcbiAgICAgICAgICAgICAgbmV3IFZlYyhzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhYLCBzdGFydE5vZGUucGFnZUJvdW5kcy5taW5ZKSxcbiAgICAgICAgICAgICAgbmV3IFZlYyhzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhYLCBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhZKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGVuZEVkZ2U6IFtcbiAgICAgICAgICAgICAgbmV3IFZlYyhlbmROb2RlLnBhZ2VCb3VuZHMubWluWCwgZW5kTm9kZS5wYWdlQm91bmRzLm1pblkpLFxuICAgICAgICAgICAgICBuZXcgVmVjKGVuZE5vZGUucGFnZUJvdW5kcy5taW5YLCBlbmROb2RlLnBhZ2VCb3VuZHMubWF4WSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBsZW5ndGg6IGVuZE5vZGUucGFnZUJvdW5kcy5taW5YIC0gc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WCxcbiAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb246IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5taW5ZLFxuICAgICAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhZLFxuICAgICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgICAgICAgZW5kTm9kZS5wYWdlQm91bmRzLm1heFlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlVmVydGljYWwgPSBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlSG9yaXpvbnRhbC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5wYWdlQm91bmRzLm1pblkgLSBiLnBhZ2VCb3VuZHMubWluWTtcbiAgICB9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VWZXJ0aWNhbC5sZW5ndGg7IGkrKykge1xuICAgICAgc3RhcnROb2RlID0gc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZVZlcnRpY2FsW2ldO1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZVZlcnRpY2FsLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGVuZE5vZGUgPSBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlVmVydGljYWxbal07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAvLyBpcyB0aGVyZSBzcGFjZSBiZXR3ZWVuIHRoZSBib3hlc1xuICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFkgPCBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSAmJiAvLyBkbyB0aGV5IG92ZXJsYXAgaW4gdGhlIHggYXhpc1xuICAgICAgICAgIHJhbmdlc092ZXJsYXAoXG4gICAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5taW5YLFxuICAgICAgICAgICAgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WCxcbiAgICAgICAgICAgIGVuZE5vZGUucGFnZUJvdW5kcy5taW5YLFxuICAgICAgICAgICAgZW5kTm9kZS5wYWdlQm91bmRzLm1heFhcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHZlcnRpY2FsLnB1c2goe1xuICAgICAgICAgICAgc3RhcnROb2RlLFxuICAgICAgICAgICAgZW5kTm9kZSxcbiAgICAgICAgICAgIHN0YXJ0RWRnZTogW1xuICAgICAgICAgICAgICBuZXcgVmVjKHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblgsIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFkpLFxuICAgICAgICAgICAgICBuZXcgVmVjKHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFgsIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFkpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZW5kRWRnZTogW1xuICAgICAgICAgICAgICBuZXcgVmVjKGVuZE5vZGUucGFnZUJvdW5kcy5taW5YLCBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSksXG4gICAgICAgICAgICAgIG5ldyBWZWMoZW5kTm9kZS5wYWdlQm91bmRzLm1heFgsIGVuZE5vZGUucGFnZUJvdW5kcy5taW5ZKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGxlbmd0aDogZW5kTm9kZS5wYWdlQm91bmRzLm1pblkgLSBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhZLFxuICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvbjogcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFgsXG4gICAgICAgICAgICAgIGVuZE5vZGUucGFnZUJvdW5kcy5taW5YLFxuICAgICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWF4WFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGhvcml6b250YWwsIHZlcnRpY2FsIH07XG4gIH1cbiAgc25hcFRyYW5zbGF0ZVNoYXBlcyh7XG4gICAgbG9ja2VkQXhpcyxcbiAgICBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICBpbml0aWFsU2VsZWN0aW9uU25hcFBvaW50cyxcbiAgICBkcmFnRGVsdGFcbiAgfSkge1xuICAgIGNvbnN0IHNuYXBUaHJlc2hvbGQgPSB0aGlzLm1hbmFnZXIuZ2V0U25hcFRocmVzaG9sZCgpO1xuICAgIGNvbnN0IHZpc2libGVTbmFwUG9pbnRzTm90SW5TZWxlY3Rpb24gPSB0aGlzLmdldFNuYXBwYWJsZVBvaW50cygpO1xuICAgIGNvbnN0IHNlbGVjdGlvblBhZ2VCb3VuZHMgPSBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcy5jbG9uZSgpLnRyYW5zbGF0ZShkcmFnRGVsdGEpO1xuICAgIGNvbnN0IHNlbGVjdGlvblNuYXBQb2ludHMgPSBpbml0aWFsU2VsZWN0aW9uU25hcFBvaW50cy5tYXAoXG4gICAgICAoeyB4LCB5IH0sIGkpID0+ICh7XG4gICAgICAgIGlkOiBcInNlbGVjdGlvbjpcIiArIGksXG4gICAgICAgIHg6IHggKyBkcmFnRGVsdGEueCxcbiAgICAgICAgeTogeSArIGRyYWdEZWx0YS55XG4gICAgICB9KVxuICAgICk7XG4gICAgY29uc3Qgb3RoZXJOb2RlU25hcFBvaW50cyA9IHZpc2libGVTbmFwUG9pbnRzTm90SW5TZWxlY3Rpb247XG4gICAgY29uc3QgbmVhcmVzdFNuYXBzWCA9IFtdO1xuICAgIGNvbnN0IG5lYXJlc3RTbmFwc1kgPSBbXTtcbiAgICBjb25zdCBtaW5PZmZzZXQgPSBuZXcgVmVjKHNuYXBUaHJlc2hvbGQsIHNuYXBUaHJlc2hvbGQpO1xuICAgIHRoaXMuY29sbGVjdFBvaW50U25hcHMoe1xuICAgICAgbWluT2Zmc2V0LFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1ksXG4gICAgICBvdGhlck5vZGVTbmFwUG9pbnRzLFxuICAgICAgc2VsZWN0aW9uU25hcFBvaW50c1xuICAgIH0pO1xuICAgIHRoaXMuY29sbGVjdEdhcFNuYXBzKHtcbiAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMsXG4gICAgICBuZWFyZXN0U25hcHNYLFxuICAgICAgbmVhcmVzdFNuYXBzWSxcbiAgICAgIG1pbk9mZnNldFxuICAgIH0pO1xuICAgIGNvbnN0IG51ZGdlID0gbmV3IFZlYyhcbiAgICAgIGxvY2tlZEF4aXMgPT09IFwieFwiID8gMCA6IG5lYXJlc3RTbmFwc1hbMF0/Lm51ZGdlID8/IDAsXG4gICAgICBsb2NrZWRBeGlzID09PSBcInlcIiA/IDAgOiBuZWFyZXN0U25hcHNZWzBdPy5udWRnZSA/PyAwXG4gICAgKTtcbiAgICBtaW5PZmZzZXQueCA9IDA7XG4gICAgbWluT2Zmc2V0LnkgPSAwO1xuICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICBuZWFyZXN0U25hcHNZLmxlbmd0aCA9IDA7XG4gICAgc2VsZWN0aW9uU25hcFBvaW50cy5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBzLnggKz0gbnVkZ2UueDtcbiAgICAgIHMueSArPSBudWRnZS55O1xuICAgIH0pO1xuICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMudHJhbnNsYXRlKG51ZGdlKTtcbiAgICB0aGlzLmNvbGxlY3RQb2ludFNuYXBzKHtcbiAgICAgIG1pbk9mZnNldCxcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZLFxuICAgICAgb3RoZXJOb2RlU25hcFBvaW50cyxcbiAgICAgIHNlbGVjdGlvblNuYXBQb2ludHNcbiAgICB9KTtcbiAgICB0aGlzLmNvbGxlY3RHYXBTbmFwcyh7XG4gICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1ksXG4gICAgICBtaW5PZmZzZXRcbiAgICB9KTtcbiAgICBjb25zdCBwb2ludFNuYXBzTGluZXMgPSB0aGlzLmdldFBvaW50U25hcExpbmVzKHtcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZXG4gICAgfSk7XG4gICAgY29uc3QgZ2FwU25hcExpbmVzID0gdGhpcy5nZXRHYXBTbmFwTGluZXMoe1xuICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZXG4gICAgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLnNldEluZGljYXRvcnMoWy4uLmdhcFNuYXBMaW5lcywgLi4ucG9pbnRTbmFwc0xpbmVzXSk7XG4gICAgcmV0dXJuIHsgbnVkZ2UgfTtcbiAgfVxuICBzbmFwUmVzaXplU2hhcGVzKHtcbiAgICBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICBkcmFnRGVsdGEsXG4gICAgaGFuZGxlOiBvcmlnaW5hbEhhbmRsZSxcbiAgICBpc0FzcGVjdFJhdGlvTG9ja2VkLFxuICAgIGlzUmVzaXppbmdGcm9tQ2VudGVyXG4gIH0pIHtcbiAgICBjb25zdCBzbmFwVGhyZXNob2xkID0gdGhpcy5tYW5hZ2VyLmdldFNuYXBUaHJlc2hvbGQoKTtcbiAgICBjb25zdCB7XG4gICAgICBib3g6IHVuc25hcHBlZFJlc2l6ZWRQYWdlQm91bmRzLFxuICAgICAgc2NhbGVYLFxuICAgICAgc2NhbGVZXG4gICAgfSA9IEJveC5SZXNpemUoXG4gICAgICBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICAgIG9yaWdpbmFsSGFuZGxlLFxuICAgICAgaXNSZXNpemluZ0Zyb21DZW50ZXIgPyBkcmFnRGVsdGEueCAqIDIgOiBkcmFnRGVsdGEueCxcbiAgICAgIGlzUmVzaXppbmdGcm9tQ2VudGVyID8gZHJhZ0RlbHRhLnkgKiAyIDogZHJhZ0RlbHRhLnksXG4gICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkXG4gICAgKTtcbiAgICBsZXQgaGFuZGxlID0gb3JpZ2luYWxIYW5kbGU7XG4gICAgaWYgKHNjYWxlWCA8IDApIHtcbiAgICAgIGhhbmRsZSA9IGZsaXBTZWxlY3Rpb25IYW5kbGVYKGhhbmRsZSk7XG4gICAgfVxuICAgIGlmIChzY2FsZVkgPCAwKSB7XG4gICAgICBoYW5kbGUgPSBmbGlwU2VsZWN0aW9uSGFuZGxlWShoYW5kbGUpO1xuICAgIH1cbiAgICBpZiAoaXNSZXNpemluZ0Zyb21DZW50ZXIpIHtcbiAgICAgIHVuc25hcHBlZFJlc2l6ZWRQYWdlQm91bmRzLmNlbnRlciA9IGluaXRpYWxTZWxlY3Rpb25QYWdlQm91bmRzLmNlbnRlcjtcbiAgICB9XG4gICAgY29uc3QgaXNYTG9ja2VkID0gaGFuZGxlID09PSBcInRvcFwiIHx8IGhhbmRsZSA9PT0gXCJib3R0b21cIjtcbiAgICBjb25zdCBpc1lMb2NrZWQgPSBoYW5kbGUgPT09IFwibGVmdFwiIHx8IGhhbmRsZSA9PT0gXCJyaWdodFwiO1xuICAgIGNvbnN0IHNlbGVjdGlvblNuYXBQb2ludHMgPSBnZXRSZXNpemVTbmFwUG9pbnRzRm9ySGFuZGxlKGhhbmRsZSwgdW5zbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMpO1xuICAgIGNvbnN0IG90aGVyTm9kZVNuYXBQb2ludHMgPSB0aGlzLmdldFNuYXBwYWJsZVBvaW50cygpO1xuICAgIGNvbnN0IG5lYXJlc3RTbmFwc1ggPSBbXTtcbiAgICBjb25zdCBuZWFyZXN0U25hcHNZID0gW107XG4gICAgY29uc3QgbWluT2Zmc2V0ID0gbmV3IFZlYyhzbmFwVGhyZXNob2xkLCBzbmFwVGhyZXNob2xkKTtcbiAgICB0aGlzLmNvbGxlY3RQb2ludFNuYXBzKHtcbiAgICAgIG1pbk9mZnNldCxcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZLFxuICAgICAgb3RoZXJOb2RlU25hcFBvaW50cyxcbiAgICAgIHNlbGVjdGlvblNuYXBQb2ludHNcbiAgICB9KTtcbiAgICBjb25zdCBudWRnZSA9IG5ldyBWZWMoXG4gICAgICBpc1hMb2NrZWQgPyAwIDogbmVhcmVzdFNuYXBzWFswXT8ubnVkZ2UgPz8gMCxcbiAgICAgIGlzWUxvY2tlZCA/IDAgOiBuZWFyZXN0U25hcHNZWzBdPy5udWRnZSA/PyAwXG4gICAgKTtcbiAgICBpZiAoaXNBc3BlY3RSYXRpb0xvY2tlZCAmJiBpc1NlbGVjdGlvbkNvcm5lcihoYW5kbGUpICYmIG51ZGdlLmxlbigpICE9PSAwKSB7XG4gICAgICBjb25zdCBwcmltYXJ5TnVkZ2VBeGlzID0gbmVhcmVzdFNuYXBzWC5sZW5ndGggJiYgbmVhcmVzdFNuYXBzWS5sZW5ndGggPyBNYXRoLmFicyhudWRnZS54KSA8IE1hdGguYWJzKG51ZGdlLnkpID8gXCJ4XCIgOiBcInlcIiA6IG5lYXJlc3RTbmFwc1gubGVuZ3RoID8gXCJ4XCIgOiBcInlcIjtcbiAgICAgIGNvbnN0IHJhdGlvID0gaW5pdGlhbFNlbGVjdGlvblBhZ2VCb3VuZHMuYXNwZWN0UmF0aW87XG4gICAgICBpZiAocHJpbWFyeU51ZGdlQXhpcyA9PT0gXCJ4XCIpIHtcbiAgICAgICAgbmVhcmVzdFNuYXBzWS5sZW5ndGggPSAwO1xuICAgICAgICBudWRnZS55ID0gbnVkZ2UueCAvIHJhdGlvO1xuICAgICAgICBpZiAoaGFuZGxlID09PSBcImJvdHRvbV9sZWZ0XCIgfHwgaGFuZGxlID09PSBcInRvcF9yaWdodFwiKSB7XG4gICAgICAgICAgbnVkZ2UueSA9IC1udWRnZS55O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZWFyZXN0U25hcHNYLmxlbmd0aCA9IDA7XG4gICAgICAgIG51ZGdlLnggPSBudWRnZS55ICogcmF0aW87XG4gICAgICAgIGlmIChoYW5kbGUgPT09IFwiYm90dG9tX2xlZnRcIiB8fCBoYW5kbGUgPT09IFwidG9wX3JpZ2h0XCIpIHtcbiAgICAgICAgICBudWRnZS54ID0gLW51ZGdlLng7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc25hcHBlZERlbHRhID0gVmVjLkFkZChkcmFnRGVsdGEsIG51ZGdlKTtcbiAgICBjb25zdCB7IGJveDogc25hcHBlZFJlc2l6ZWRQYWdlQm91bmRzIH0gPSBCb3guUmVzaXplKFxuICAgICAgaW5pdGlhbFNlbGVjdGlvblBhZ2VCb3VuZHMsXG4gICAgICBvcmlnaW5hbEhhbmRsZSxcbiAgICAgIGlzUmVzaXppbmdGcm9tQ2VudGVyID8gc25hcHBlZERlbHRhLnggKiAyIDogc25hcHBlZERlbHRhLngsXG4gICAgICBpc1Jlc2l6aW5nRnJvbUNlbnRlciA/IHNuYXBwZWREZWx0YS55ICogMiA6IHNuYXBwZWREZWx0YS55LFxuICAgICAgaXNBc3BlY3RSYXRpb0xvY2tlZFxuICAgICk7XG4gICAgaWYgKGlzUmVzaXppbmdGcm9tQ2VudGVyKSB7XG4gICAgICBzbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMuY2VudGVyID0gaW5pdGlhbFNlbGVjdGlvblBhZ2VCb3VuZHMuY2VudGVyO1xuICAgIH1cbiAgICBjb25zdCBzbmFwcGVkU2VsZWN0aW9uUG9pbnRzID0gZ2V0UmVzaXplU25hcFBvaW50c0ZvckhhbmRsZShcImFueVwiLCBzbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMpO1xuICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICBuZWFyZXN0U25hcHNZLmxlbmd0aCA9IDA7XG4gICAgbWluT2Zmc2V0LnggPSAwO1xuICAgIG1pbk9mZnNldC55ID0gMDtcbiAgICB0aGlzLmNvbGxlY3RQb2ludFNuYXBzKHtcbiAgICAgIG1pbk9mZnNldCxcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZLFxuICAgICAgb3RoZXJOb2RlU25hcFBvaW50cyxcbiAgICAgIHNlbGVjdGlvblNuYXBQb2ludHM6IHNuYXBwZWRTZWxlY3Rpb25Qb2ludHNcbiAgICB9KTtcbiAgICBjb25zdCBwb2ludFNuYXBzID0gdGhpcy5nZXRQb2ludFNuYXBMaW5lcyh7XG4gICAgICBuZWFyZXN0U25hcHNYLFxuICAgICAgbmVhcmVzdFNuYXBzWVxuICAgIH0pO1xuICAgIHRoaXMubWFuYWdlci5zZXRJbmRpY2F0b3JzKFsuLi5wb2ludFNuYXBzXSk7XG4gICAgcmV0dXJuIHsgbnVkZ2UgfTtcbiAgfVxuICBjb2xsZWN0UG9pbnRTbmFwcyh7XG4gICAgc2VsZWN0aW9uU25hcFBvaW50cyxcbiAgICBvdGhlck5vZGVTbmFwUG9pbnRzLFxuICAgIG1pbk9mZnNldCxcbiAgICBuZWFyZXN0U25hcHNYLFxuICAgIG5lYXJlc3RTbmFwc1lcbiAgfSkge1xuICAgIGZvciAoY29uc3QgdGhpc1NuYXBQb2ludCBvZiBzZWxlY3Rpb25TbmFwUG9pbnRzKSB7XG4gICAgICBmb3IgKGNvbnN0IG90aGVyU25hcFBvaW50IG9mIG90aGVyTm9kZVNuYXBQb2ludHMpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gVmVjLlN1Yih0aGlzU25hcFBvaW50LCBvdGhlclNuYXBQb2ludCk7XG4gICAgICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLmFicyhvZmZzZXQueCk7XG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLmFicyhvZmZzZXQueSk7XG4gICAgICAgIGlmIChyb3VuZChvZmZzZXRYKSA8PSByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgICBpZiAocm91bmQob2Zmc2V0WCkgPCByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwicG9pbnRzXCIsXG4gICAgICAgICAgICBwb2ludHM6IHsgdGhpc1BvaW50OiB0aGlzU25hcFBvaW50LCBvdGhlclBvaW50OiBvdGhlclNuYXBQb2ludCB9LFxuICAgICAgICAgICAgbnVkZ2U6IG90aGVyU25hcFBvaW50LnggLSB0aGlzU25hcFBvaW50LnhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtaW5PZmZzZXQueCA9IG9mZnNldFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdW5kKG9mZnNldFkpIDw9IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICAgIGlmIChyb3VuZChvZmZzZXRZKSA8IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICAgICAgbmVhcmVzdFNuYXBzWS5sZW5ndGggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZWFyZXN0U25hcHNZLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJwb2ludHNcIixcbiAgICAgICAgICAgIHBvaW50czogeyB0aGlzUG9pbnQ6IHRoaXNTbmFwUG9pbnQsIG90aGVyUG9pbnQ6IG90aGVyU25hcFBvaW50IH0sXG4gICAgICAgICAgICBudWRnZTogb3RoZXJTbmFwUG9pbnQueSAtIHRoaXNTbmFwUG9pbnQueVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG1pbk9mZnNldC55ID0gb2Zmc2V0WTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb2xsZWN0R2FwU25hcHMoe1xuICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMsXG4gICAgbWluT2Zmc2V0LFxuICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgbmVhcmVzdFNuYXBzWVxuICB9KSB7XG4gICAgY29uc3QgeyBob3Jpem9udGFsLCB2ZXJ0aWNhbCB9ID0gdGhpcy5nZXRWaXNpYmxlR2FwcygpO1xuICAgIGZvciAoY29uc3QgZ2FwIG9mIGhvcml6b250YWwpIHtcbiAgICAgIGlmICghcmFuZ2VzT3ZlcmxhcChcbiAgICAgICAgZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblksXG4gICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWF4WVxuICAgICAgKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdhcE1pZFggPSBnYXAuc3RhcnRFZGdlWzBdLnggKyBnYXAubGVuZ3RoIC8gMjtcbiAgICAgIGNvbnN0IGNlbnRlck51ZGdlID0gZ2FwTWlkWCAtIHNlbGVjdGlvblBhZ2VCb3VuZHMuY2VudGVyLng7XG4gICAgICBjb25zdCBnYXBJc0xhcmdlclRoYW5TZWxlY3Rpb24gPSBnYXAubGVuZ3RoID4gc2VsZWN0aW9uUGFnZUJvdW5kcy53aWR0aDtcbiAgICAgIGlmIChnYXBJc0xhcmdlclRoYW5TZWxlY3Rpb24gJiYgcm91bmQoTWF0aC5hYnMoY2VudGVyTnVkZ2UpKSA8PSByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGNlbnRlck51ZGdlKSkgPCByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNYLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbWluT2Zmc2V0LnggPSBNYXRoLmFicyhjZW50ZXJOdWRnZSk7XG4gICAgICAgIGNvbnN0IHNuYXAgPSB7XG4gICAgICAgICAgdHlwZTogXCJnYXBfY2VudGVyXCIsXG4gICAgICAgICAgZ2FwLFxuICAgICAgICAgIG51ZGdlOiBjZW50ZXJOdWRnZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvdGhlckNlbnRlclNuYXAgPSBuZWFyZXN0U25hcHNYLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcImdhcF9jZW50ZXJcIik7XG4gICAgICAgIGNvbnN0IGdhcEJyZWFkdGhzT3ZlcmxhcCA9IG90aGVyQ2VudGVyU25hcCAmJiByYW5nZUludGVyc2VjdGlvbihcbiAgICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICBvdGhlckNlbnRlclNuYXAuZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgb3RoZXJDZW50ZXJTbmFwLmdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdXG4gICAgICAgICk7XG4gICAgICAgIGlmIChvdGhlckNlbnRlclNuYXAgJiYgb3RoZXJDZW50ZXJTbmFwLmdhcC5sZW5ndGggPiBnYXAubGVuZ3RoICYmIGdhcEJyZWFkdGhzT3ZlcmxhcCkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1hbbmVhcmVzdFNuYXBzWC5pbmRleE9mKG90aGVyQ2VudGVyU25hcCldID0gc25hcDtcbiAgICAgICAgfSBlbHNlIGlmICghb3RoZXJDZW50ZXJTbmFwIHx8ICFnYXBCcmVhZHRoc092ZXJsYXApIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNYLnB1c2goc25hcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGR1cGxpY2F0aW9uTGVmdFggPSBnYXAuc3RhcnROb2RlLnBhZ2VCb3VuZHMubWluWCAtIGdhcC5sZW5ndGg7XG4gICAgICBjb25zdCBzZWxlY3Rpb25SaWdodFggPSBzZWxlY3Rpb25QYWdlQm91bmRzLm1heFg7XG4gICAgICBjb25zdCBkdXBsaWNhdGlvbkxlZnROdWRnZSA9IGR1cGxpY2F0aW9uTGVmdFggLSBzZWxlY3Rpb25SaWdodFg7XG4gICAgICBpZiAocm91bmQoTWF0aC5hYnMoZHVwbGljYXRpb25MZWZ0TnVkZ2UpKSA8PSByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uTGVmdE51ZGdlKSkgPCByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNYLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbWluT2Zmc2V0LnggPSBNYXRoLmFicyhkdXBsaWNhdGlvbkxlZnROdWRnZSk7XG4gICAgICAgIG5lYXJlc3RTbmFwc1gucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJnYXBfZHVwbGljYXRlXCIsXG4gICAgICAgICAgZ2FwLFxuICAgICAgICAgIHByb3RydXNpb25EaXJlY3Rpb246IFwibGVmdFwiLFxuICAgICAgICAgIG51ZGdlOiBkdXBsaWNhdGlvbkxlZnROdWRnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGR1cGxpY2F0aW9uUmlnaHRYID0gZ2FwLmVuZE5vZGUucGFnZUJvdW5kcy5tYXhYICsgZ2FwLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbkxlZnRYID0gc2VsZWN0aW9uUGFnZUJvdW5kcy5taW5YO1xuICAgICAgY29uc3QgZHVwbGljYXRpb25SaWdodE51ZGdlID0gZHVwbGljYXRpb25SaWdodFggLSBzZWxlY3Rpb25MZWZ0WDtcbiAgICAgIGlmIChyb3VuZChNYXRoLmFicyhkdXBsaWNhdGlvblJpZ2h0TnVkZ2UpKSA8PSByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uUmlnaHROdWRnZSkpIDwgcm91bmQobWluT2Zmc2V0LngpKSB7XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWC5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIG1pbk9mZnNldC54ID0gTWF0aC5hYnMoZHVwbGljYXRpb25SaWdodE51ZGdlKTtcbiAgICAgICAgbmVhcmVzdFNuYXBzWC5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImdhcF9kdXBsaWNhdGVcIixcbiAgICAgICAgICBnYXAsXG4gICAgICAgICAgcHJvdHJ1c2lvbkRpcmVjdGlvbjogXCJyaWdodFwiLFxuICAgICAgICAgIG51ZGdlOiBkdXBsaWNhdGlvblJpZ2h0TnVkZ2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgZ2FwIG9mIHZlcnRpY2FsKSB7XG4gICAgICBpZiAoIXJhbmdlc092ZXJsYXAoXG4gICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5taW5YLFxuICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1heFhcbiAgICAgICkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBnYXBNaWRZID0gZ2FwLnN0YXJ0RWRnZVswXS55ICsgZ2FwLmxlbmd0aCAvIDI7XG4gICAgICBjb25zdCBjZW50ZXJOdWRnZSA9IGdhcE1pZFkgLSBzZWxlY3Rpb25QYWdlQm91bmRzLmNlbnRlci55O1xuICAgICAgY29uc3QgZ2FwSXNMYXJnZXJUaGFuU2VsZWN0aW9uID0gZ2FwLmxlbmd0aCA+IHNlbGVjdGlvblBhZ2VCb3VuZHMuaGVpZ2h0O1xuICAgICAgaWYgKGdhcElzTGFyZ2VyVGhhblNlbGVjdGlvbiAmJiByb3VuZChNYXRoLmFicyhjZW50ZXJOdWRnZSkpIDw9IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICBpZiAocm91bmQoTWF0aC5hYnMoY2VudGVyTnVkZ2UpKSA8IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1kubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtaW5PZmZzZXQueSA9IE1hdGguYWJzKGNlbnRlck51ZGdlKTtcbiAgICAgICAgY29uc3Qgc25hcCA9IHtcbiAgICAgICAgICB0eXBlOiBcImdhcF9jZW50ZXJcIixcbiAgICAgICAgICBnYXAsXG4gICAgICAgICAgbnVkZ2U6IGNlbnRlck51ZGdlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG90aGVyQ2VudGVyU25hcCA9IG5lYXJlc3RTbmFwc1kuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwiZ2FwX2NlbnRlclwiKTtcbiAgICAgICAgY29uc3QgZ2FwQnJlYWR0aHNPdmVybGFwID0gb3RoZXJDZW50ZXJTbmFwICYmIHJhbmdlc092ZXJsYXAoXG4gICAgICAgICAgb3RoZXJDZW50ZXJTbmFwLmdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgICAgIG90aGVyQ2VudGVyU25hcC5nYXAuYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblsxXVxuICAgICAgICApO1xuICAgICAgICBpZiAob3RoZXJDZW50ZXJTbmFwICYmIG90aGVyQ2VudGVyU25hcC5nYXAubGVuZ3RoID4gZ2FwLmxlbmd0aCAmJiBnYXBCcmVhZHRoc092ZXJsYXApIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNZW25lYXJlc3RTbmFwc1kuaW5kZXhPZihvdGhlckNlbnRlclNuYXApXSA9IHNuYXA7XG4gICAgICAgIH0gZWxzZSBpZiAoIW90aGVyQ2VudGVyU25hcCB8fCAhZ2FwQnJlYWR0aHNPdmVybGFwKSB7XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWS5wdXNoKHNuYXApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZHVwbGljYXRpb25Ub3BZID0gZ2FwLnN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblkgLSBnYXAubGVuZ3RoO1xuICAgICAgY29uc3Qgc2VsZWN0aW9uQm90dG9tWSA9IHNlbGVjdGlvblBhZ2VCb3VuZHMubWF4WTtcbiAgICAgIGNvbnN0IGR1cGxpY2F0aW9uVG9wTnVkZ2UgPSBkdXBsaWNhdGlvblRvcFkgLSBzZWxlY3Rpb25Cb3R0b21ZO1xuICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uVG9wTnVkZ2UpKSA8PSByb3VuZChtaW5PZmZzZXQueSkpIHtcbiAgICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uVG9wTnVkZ2UpKSA8IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1kubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtaW5PZmZzZXQueSA9IE1hdGguYWJzKGR1cGxpY2F0aW9uVG9wTnVkZ2UpO1xuICAgICAgICBuZWFyZXN0U25hcHNZLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZ2FwX2R1cGxpY2F0ZVwiLFxuICAgICAgICAgIGdhcCxcbiAgICAgICAgICBwcm90cnVzaW9uRGlyZWN0aW9uOiBcInRvcFwiLFxuICAgICAgICAgIG51ZGdlOiBkdXBsaWNhdGlvblRvcE51ZGdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZHVwbGljYXRpb25Cb3R0b21ZID0gZ2FwLmVuZE5vZGUucGFnZUJvdW5kcy5tYXhZICsgZ2FwLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlbGVjdGlvblRvcFkgPSBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblk7XG4gICAgICBjb25zdCBkdXBsaWNhdGlvbkJvdHRvbU51ZGdlID0gZHVwbGljYXRpb25Cb3R0b21ZIC0gc2VsZWN0aW9uVG9wWTtcbiAgICAgIGlmIChyb3VuZChNYXRoLmFicyhkdXBsaWNhdGlvbkJvdHRvbU51ZGdlKSkgPD0gcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgIGlmIChyb3VuZChNYXRoLmFicyhkdXBsaWNhdGlvbkJvdHRvbU51ZGdlKSkgPCByb3VuZChtaW5PZmZzZXQueSkpIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNZLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbWluT2Zmc2V0LnkgPSBNYXRoLmFicyhkdXBsaWNhdGlvbkJvdHRvbU51ZGdlKTtcbiAgICAgICAgbmVhcmVzdFNuYXBzWS5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImdhcF9kdXBsaWNhdGVcIixcbiAgICAgICAgICBnYXAsXG4gICAgICAgICAgcHJvdHJ1c2lvbkRpcmVjdGlvbjogXCJib3R0b21cIixcbiAgICAgICAgICBudWRnZTogZHVwbGljYXRpb25Cb3R0b21OdWRnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0UG9pbnRTbmFwTGluZXMoe1xuICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgbmVhcmVzdFNuYXBzWVxuICB9KSB7XG4gICAgY29uc3Qgc25hcEdyb3Vwc1ggPSB7fTtcbiAgICBjb25zdCBzbmFwR3JvdXBzWSA9IHt9O1xuICAgIGlmIChuZWFyZXN0U25hcHNYLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3Qgc25hcCBvZiBuZWFyZXN0U25hcHNYKSB7XG4gICAgICAgIGlmIChzbmFwLnR5cGUgPT09IFwicG9pbnRzXCIpIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSByb3VuZChzbmFwLnBvaW50cy5vdGhlclBvaW50LngpO1xuICAgICAgICAgIGlmICghc25hcEdyb3Vwc1hba2V5XSkge1xuICAgICAgICAgICAgc25hcEdyb3Vwc1hba2V5XSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzbmFwR3JvdXBzWFtrZXldLnB1c2goc25hcC5wb2ludHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZWFyZXN0U25hcHNZLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3Qgc25hcCBvZiBuZWFyZXN0U25hcHNZKSB7XG4gICAgICAgIGlmIChzbmFwLnR5cGUgPT09IFwicG9pbnRzXCIpIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSByb3VuZChzbmFwLnBvaW50cy5vdGhlclBvaW50LnkpO1xuICAgICAgICAgIGlmICghc25hcEdyb3Vwc1lba2V5XSkge1xuICAgICAgICAgICAgc25hcEdyb3Vwc1lba2V5XSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzbmFwR3JvdXBzWVtrZXldLnB1c2goc25hcC5wb2ludHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHNuYXBHcm91cHNYKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhzbmFwR3JvdXBzWSkpLm1hcCgoc25hcEdyb3VwKSA9PiAoe1xuICAgICAgaWQ6IHVuaXF1ZUlkKCksXG4gICAgICB0eXBlOiBcInBvaW50c1wiLFxuICAgICAgcG9pbnRzOiBkZWR1cGUoXG4gICAgICAgIHNuYXBHcm91cC5tYXAoKHNuYXApID0+IFZlYy5Gcm9tKHNuYXAub3RoZXJQb2ludCkpLmNvbmNhdChzbmFwR3JvdXAubWFwKChzbmFwKSA9PiBWZWMuRnJvbShzbmFwLnRoaXNQb2ludCkpKSxcbiAgICAgICAgKGEsIGIpID0+IGEuZXF1YWxzKGIpXG4gICAgICApXG4gICAgfSkpO1xuICB9XG4gIGdldEdhcFNuYXBMaW5lcyh7XG4gICAgc2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICBuZWFyZXN0U25hcHNYLFxuICAgIG5lYXJlc3RTbmFwc1lcbiAgfSkge1xuICAgIGNvbnN0IHsgdmVydGljYWwsIGhvcml6b250YWwgfSA9IHRoaXMuZ2V0VmlzaWJsZUdhcHMoKTtcbiAgICBjb25zdCBzZWxlY3Rpb25TaWRlcyA9IHtcbiAgICAgIHRvcDogc2VsZWN0aW9uUGFnZUJvdW5kcy5zaWRlc1swXSxcbiAgICAgIHJpZ2h0OiBzZWxlY3Rpb25QYWdlQm91bmRzLnNpZGVzWzFdLFxuICAgICAgLy8gbmVlZCBib3R0b20gYW5kIGxlZnQgdG8gYmUgc29ydGVkIGFzYywgd2hpY2ggLnNpZGVzIGlzIG5vdC5cbiAgICAgIGJvdHRvbTogW3NlbGVjdGlvblBhZ2VCb3VuZHMuY29ybmVyc1szXSwgc2VsZWN0aW9uUGFnZUJvdW5kcy5jb3JuZXJzWzJdXSxcbiAgICAgIGxlZnQ6IFtzZWxlY3Rpb25QYWdlQm91bmRzLmNvcm5lcnNbMF0sIHNlbGVjdGlvblBhZ2VCb3VuZHMuY29ybmVyc1szXV1cbiAgICB9O1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGlmIChuZWFyZXN0U25hcHNYLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3Qgc25hcCBvZiBuZWFyZXN0U25hcHNYKSB7XG4gICAgICAgIGlmIChzbmFwLnR5cGUgPT09IFwicG9pbnRzXCIpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZ2FwOiB7IGJyZWFkdGhJbnRlcnNlY3Rpb24sIHN0YXJ0RWRnZSwgc3RhcnROb2RlLCBlbmROb2RlLCBsZW5ndGgsIGVuZEVkZ2UgfVxuICAgICAgICB9ID0gc25hcDtcbiAgICAgICAgc3dpdGNoIChzbmFwLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiZ2FwX2NlbnRlclwiOiB7XG4gICAgICAgICAgICBjb25zdCBuZXdHYXBzTGVuZ3RoID0gKGxlbmd0aCAtIHNlbGVjdGlvblBhZ2VCb3VuZHMud2lkdGgpIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IGdhcEJyZWFkdGhJbnRlcnNlY3Rpb24gPSByYW5nZUludGVyc2VjdGlvbihcbiAgICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5taW5ZLFxuICAgICAgICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1heFlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZ2Fwc1wiLFxuICAgICAgICAgICAgICBkaXJlY3Rpb246IFwiaG9yaXpvbnRhbFwiLFxuICAgICAgICAgICAgICBpZDogdW5pcXVlSWQoKSxcbiAgICAgICAgICAgICAgZ2FwczogW1xuICAgICAgICAgICAgICAgIC4uLmZpbmRBZGphY2VudEdhcHMoXG4gICAgICAgICAgICAgICAgICBob3Jpem9udGFsLFxuICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiYmFja3dhcmRcIixcbiAgICAgICAgICAgICAgICAgIGdhcEJyZWFkdGhJbnRlcnNlY3Rpb25cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZSxcbiAgICAgICAgICAgICAgICAgIGVuZEVkZ2U6IHNlbGVjdGlvblNpZGVzLmxlZnRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogc2VsZWN0aW9uU2lkZXMucmlnaHQsXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICAgIGVuZE5vZGUuaWQsXG4gICAgICAgICAgICAgICAgICBuZXdHYXBzTGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgXCJmb3J3YXJkXCIsXG4gICAgICAgICAgICAgICAgICBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZ2FwX2R1cGxpY2F0ZVwiOiB7XG4gICAgICAgICAgICBjb25zdCBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICAgICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhZXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICAgICAgICAgICAgaWQ6IHVuaXF1ZUlkKCksXG4gICAgICAgICAgICAgIGdhcHM6IHNuYXAucHJvdHJ1c2lvbkRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgc3RhcnRFZGdlOiBzZWxlY3Rpb25TaWRlcy5yaWdodCxcbiAgICAgICAgICAgICAgICAgIGVuZEVkZ2U6IHN0YXJ0RWRnZS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmNsb25lKCkuYWRkWFkoLXN0YXJ0Tm9kZS5wYWdlQm91bmRzLndpZHRoLCAwKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBzdGFydEVkZ2UsIGVuZEVkZ2UgfSxcbiAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICAgIGVuZE5vZGUuaWQsXG4gICAgICAgICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICAgICAgICBcImZvcndhcmRcIixcbiAgICAgICAgICAgICAgICAgIGdhcEJyZWFkdGhJbnRlcnNlY3Rpb25cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIF0gOiBbXG4gICAgICAgICAgICAgICAgLi4uZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgICAgICAgICAgIGhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgICBzdGFydE5vZGUuaWQsXG4gICAgICAgICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICAgICAgICBcImJhY2t3YXJkXCIsXG4gICAgICAgICAgICAgICAgICBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB7IHN0YXJ0RWRnZSwgZW5kRWRnZSB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogZW5kRWRnZS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmNsb25lKCkuYWRkWFkoc25hcC5nYXAuZW5kTm9kZS5wYWdlQm91bmRzLndpZHRoLCAwKVxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIGVuZEVkZ2U6IHNlbGVjdGlvblNpZGVzLmxlZnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZWFyZXN0U25hcHNZLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3Qgc25hcCBvZiBuZWFyZXN0U25hcHNZKSB7XG4gICAgICAgIGlmIChzbmFwLnR5cGUgPT09IFwicG9pbnRzXCIpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZ2FwOiB7IGJyZWFkdGhJbnRlcnNlY3Rpb24sIHN0YXJ0RWRnZSwgc3RhcnROb2RlLCBlbmROb2RlLCBsZW5ndGgsIGVuZEVkZ2UgfVxuICAgICAgICB9ID0gc25hcDtcbiAgICAgICAgc3dpdGNoIChzbmFwLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiZ2FwX2NlbnRlclwiOiB7XG4gICAgICAgICAgICBjb25zdCBuZXdHYXBzTGVuZ3RoID0gKGxlbmd0aCAtIHNlbGVjdGlvblBhZ2VCb3VuZHMuaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICBjb25zdCBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICAgICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWCxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhYXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXG4gICAgICAgICAgICAgIGlkOiB1bmlxdWVJZCgpLFxuICAgICAgICAgICAgICBnYXBzOiBbXG4gICAgICAgICAgICAgICAgLi4uZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLFxuICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiYmFja3dhcmRcIixcbiAgICAgICAgICAgICAgICAgIGdhcEJyZWFkdGhJbnRlcnNlY3Rpb25cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZSxcbiAgICAgICAgICAgICAgICAgIGVuZEVkZ2U6IHNlbGVjdGlvblNpZGVzLnRvcFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgc3RhcnRFZGdlOiBzZWxlY3Rpb25TaWRlcy5ib3R0b20sXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgdmVydGljYWwsXG4gICAgICAgICAgICAgICAgICBzbmFwLmdhcC5lbmROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiZm9yd2FyZFwiLFxuICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImdhcF9kdXBsaWNhdGVcIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29uc3QgZ2FwQnJlYWR0aEludGVyc2VjdGlvbiA9IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhYXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcbiAgICAgICAgICAgICAgICBpZDogdW5pcXVlSWQoKSxcbiAgICAgICAgICAgICAgICBnYXBzOiBzbmFwLnByb3RydXNpb25EaXJlY3Rpb24gPT09IFwidG9wXCIgPyBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogc2VsZWN0aW9uU2lkZXMuYm90dG9tLFxuICAgICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzdGFydEVkZ2UubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmNsb25lKCkuYWRkWFkoMCwgLXN0YXJ0Tm9kZS5wYWdlQm91bmRzLmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHsgc3RhcnRFZGdlLCBlbmRFZGdlIH0sXG4gICAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICAgICAgZW5kTm9kZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBcImZvcndhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIF0gOiBbXG4gICAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja3dhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIHsgc3RhcnRFZGdlLCBlbmRFZGdlIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogZW5kRWRnZS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYuY2xvbmUoKS5hZGRYWSgwLCBlbmROb2RlLnBhZ2VCb3VuZHMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzZWxlY3Rpb25TaWRlcy50b3BcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZGVkdXBlR2FwU25hcHMocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5faW5pdCA9IF9fZGVjb3JhdG9yU3RhcnQobnVsbCk7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTbmFwUG9pbnRzQ2FjaGVcIiwgX2dldFNuYXBQb2ludHNDYWNoZV9kZWMsIEJvdW5kc1NuYXBzKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFNuYXBwYWJsZVBvaW50c1wiLCBfZ2V0U25hcHBhYmxlUG9pbnRzX2RlYywgQm91bmRzU25hcHMpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0U25hcHBhYmxlR2FwTm9kZXNcIiwgX2dldFNuYXBwYWJsZUdhcE5vZGVzX2RlYywgQm91bmRzU25hcHMpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0VmlzaWJsZUdhcHNcIiwgX2dldFZpc2libGVHYXBzX2RlYywgQm91bmRzU25hcHMpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgQm91bmRzU25hcHMpO1xuZnVuY3Rpb24gZ2V0UmVzaXplU25hcFBvaW50c0ZvckhhbmRsZShoYW5kbGUsIHNlbGVjdGlvblBhZ2VCb3VuZHMpIHtcbiAgY29uc3QgeyBtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZIH0gPSBzZWxlY3Rpb25QYWdlQm91bmRzO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICBjYXNlIFwidG9wXCI6XG4gICAgY2FzZSBcImxlZnRcIjpcbiAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICBjYXNlIFwiYW55XCI6XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGlkOiBcInRvcF9sZWZ0XCIsXG4gICAgICAgIGhhbmRsZTogXCJ0b3BfbGVmdFwiLFxuICAgICAgICB4OiBtaW5YLFxuICAgICAgICB5OiBtaW5ZXG4gICAgICB9KTtcbiAgfVxuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICBjYXNlIFwicmlnaHRcIjpcbiAgICBjYXNlIFwidG9wX3JpZ2h0XCI6XG4gICAgY2FzZSBcImFueVwiOlxuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICBpZDogXCJ0b3BfcmlnaHRcIixcbiAgICAgICAgaGFuZGxlOiBcInRvcF9yaWdodFwiLFxuICAgICAgICB4OiBtYXhYLFxuICAgICAgICB5OiBtaW5ZXG4gICAgICB9KTtcbiAgfVxuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICBjYXNlIFwicmlnaHRcIjpcbiAgICBjYXNlIFwiYm90dG9tX3JpZ2h0XCI6XG4gICAgY2FzZSBcImFueVwiOlxuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICBpZDogXCJib3R0b21fcmlnaHRcIixcbiAgICAgICAgaGFuZGxlOiBcImJvdHRvbV9yaWdodFwiLFxuICAgICAgICB4OiBtYXhYLFxuICAgICAgICB5OiBtYXhZXG4gICAgICB9KTtcbiAgfVxuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICBjYXNlIFwibGVmdFwiOlxuICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOlxuICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgaWQ6IFwiYm90dG9tX2xlZnRcIixcbiAgICAgICAgaGFuZGxlOiBcImJvdHRvbV9sZWZ0XCIsXG4gICAgICAgIHg6IG1pblgsXG4gICAgICAgIHk6IG1heFlcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQge1xuICBCb3VuZHNTbmFwc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJvdW5kc1NuYXBzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HandleSnaps: () => (/* binding */ HandleSnaps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _getSnapGeometryCache_dec, _init;\n\n\n\nconst defaultGetSelfSnapOutline = () => null;\nconst defaultGetSelfSnapPoints = () => [];\n_getSnapGeometryCache_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed];\nclass HandleSnaps {\n  constructor(manager) {\n    this.manager = manager;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"editor\");\n    this.editor = manager.editor;\n  }\n  getSnapGeometryCache() {\n    const { editor } = this;\n    return editor.store.createComputedCache(\"handle snap geometry\", (shape) => {\n      const snapGeometry = editor.getShapeUtil(shape).getHandleSnapGeometry(shape);\n      const getSelfSnapOutline = snapGeometry.getSelfSnapOutline ? snapGeometry.getSelfSnapOutline.bind(snapGeometry) : defaultGetSelfSnapOutline;\n      const getSelfSnapPoints = snapGeometry.getSelfSnapPoints ? snapGeometry.getSelfSnapPoints.bind(snapGeometry) : defaultGetSelfSnapPoints;\n      return {\n        outline: snapGeometry.outline === void 0 ? editor.getShapeGeometry(shape) : snapGeometry.outline,\n        points: snapGeometry.points ?? [],\n        getSelfSnapOutline,\n        getSelfSnapPoints\n      };\n    });\n  }\n  *iterateSnapPointsInPageSpace(currentShapeId, currentHandle) {\n    const selfSnapPoints = this.getSnapGeometryCache().get(currentShapeId)?.getSelfSnapPoints(currentHandle);\n    if (selfSnapPoints && selfSnapPoints.length) {\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(currentShapeId));\n      for (const point of selfSnapPoints) {\n        yield shapePageTransform.applyToPoint(point);\n      }\n    }\n    for (const shapeId of this.manager.getSnappableShapes()) {\n      if (shapeId === currentShapeId) continue;\n      const snapPoints = this.getSnapGeometryCache().get(shapeId)?.points;\n      if (!snapPoints || !snapPoints.length) continue;\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(shapeId));\n      for (const point of snapPoints) {\n        yield shapePageTransform.applyToPoint(point);\n      }\n    }\n  }\n  *iterateSnapOutlines(currentShapeId, currentHandle) {\n    const selfSnapOutline = this.getSnapGeometryCache().get(currentShapeId)?.getSelfSnapOutline(currentHandle);\n    if (selfSnapOutline) {\n      yield { shapeId: currentShapeId, outline: selfSnapOutline };\n    }\n    for (const shapeId of this.manager.getSnappableShapes()) {\n      if (shapeId === currentShapeId) continue;\n      const snapOutline = this.getSnapGeometryCache().get(shapeId)?.outline;\n      if (!snapOutline) continue;\n      yield { shapeId, outline: snapOutline };\n    }\n  }\n  getHandleSnapPosition({\n    currentShapeId,\n    handle,\n    handleInPageSpace\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    let minDistanceForSnapPoint = snapThreshold;\n    let nearestSnapPoint = null;\n    for (const snapPoint of this.iterateSnapPointsInPageSpace(currentShapeId, handle)) {\n      if (_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.DistMin(handleInPageSpace, snapPoint, minDistanceForSnapPoint)) {\n        minDistanceForSnapPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Dist(handleInPageSpace, snapPoint);\n        nearestSnapPoint = snapPoint;\n      }\n    }\n    if (nearestSnapPoint) return nearestSnapPoint;\n    let minDistanceForOutline = snapThreshold;\n    let nearestPointOnOutline = null;\n    for (const { shapeId, outline } of this.iterateSnapOutlines(currentShapeId, handle)) {\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(shapeId));\n      const pointInShapeSpace = this.editor.getPointInShapeSpace(shapeId, handleInPageSpace);\n      const nearestShapePointInShapeSpace = outline.nearestPoint(pointInShapeSpace);\n      const nearestInPageSpace = shapePageTransform.applyToPoint(nearestShapePointInShapeSpace);\n      if (_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.DistMin(handleInPageSpace, nearestInPageSpace, minDistanceForOutline)) {\n        minDistanceForOutline = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Dist(handleInPageSpace, nearestInPageSpace);\n        nearestPointOnOutline = nearestInPageSpace;\n      }\n    }\n    if (nearestPointOnOutline) return nearestPointOnOutline;\n    return null;\n  }\n  snapHandle({\n    currentShapeId,\n    handle\n  }) {\n    const currentShapeTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(currentShapeId));\n    const handleInPageSpace = currentShapeTransform.applyToPoint(handle);\n    const snapPosition = this.getHandleSnapPosition({ currentShapeId, handle, handleInPageSpace });\n    if (snapPosition) {\n      this.manager.setIndicators([\n        {\n          id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)(),\n          type: \"points\",\n          points: [snapPosition]\n        }\n      ]);\n      return { nudge: _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Sub(snapPosition, handleInPageSpace) };\n    }\n    return null;\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"getSnapGeometryCache\", _getSnapGeometryCache_dec, HandleSnaps);\n__decoratorMetadata(_init, HandleSnaps);\n\n//# sourceMappingURL=HandleSnaps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9IYW5kbGVTbmFwcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx3SkFBd0o7QUFDek47QUFDQTtBQUNBLGtFQUFrRSxPQUFPO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBIQUEwSDtBQUMxSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLCtDQUErQztBQUMvQztBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsK0JBQStCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lDO0FBQ2M7QUFDTDtBQUNsRDtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkRBQVk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvREFBRztBQUNiLGtDQUFrQyxvREFBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxVQUFVLG9EQUFHO0FBQ2IsZ0NBQWdDLG9EQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxrQ0FBa0MsMkRBQVk7QUFDOUM7QUFDQSxzREFBc0QsMkNBQTJDO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdURBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU8sb0RBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9IYW5kbGVTbmFwcy5tanM/NmJmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2tub3duU3ltYm9sID0gKG5hbWUsIHN5bWJvbCkgPT4gKHN5bWJvbCA9IFN5bWJvbFtuYW1lXSkgPyBzeW1ib2wgOiBTeW1ib2wuZm9yKFwiU3ltYm9sLlwiICsgbmFtZSk7XG52YXIgX190eXBlRXJyb3IgPSAobXNnKSA9PiB7XG4gIHRocm93IFR5cGVFcnJvcihtc2cpO1xufTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbnZhciBfX2RlY29yYXRvclN0YXJ0ID0gKGJhc2UpID0+IFssICwgLCBfX2NyZWF0ZShiYXNlPy5bX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpXSA/PyBudWxsKV07XG52YXIgX19kZWNvcmF0b3JTdHJpbmdzID0gW1wiY2xhc3NcIiwgXCJtZXRob2RcIiwgXCJnZXR0ZXJcIiwgXCJzZXR0ZXJcIiwgXCJhY2Nlc3NvclwiLCBcImZpZWxkXCIsIFwidmFsdWVcIiwgXCJnZXRcIiwgXCJzZXRcIl07XG52YXIgX19leHBlY3RGbiA9IChmbikgPT4gZm4gIT09IHZvaWQgMCAmJiB0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIiA/IF9fdHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIikgOiBmbjtcbnZhciBfX2RlY29yYXRvckNvbnRleHQgPSAoa2luZCwgbmFtZSwgZG9uZSwgbWV0YWRhdGEsIGZucykgPT4gKHsga2luZDogX19kZWNvcmF0b3JTdHJpbmdzW2tpbmRdLCBuYW1lLCBtZXRhZGF0YSwgYWRkSW5pdGlhbGl6ZXI6IChmbikgPT4gZG9uZS5fID8gX190eXBlRXJyb3IoXCJBbHJlYWR5IGluaXRpYWxpemVkXCIpIDogZm5zLnB1c2goX19leHBlY3RGbihmbiB8fCBudWxsKSkgfSk7XG52YXIgX19kZWNvcmF0b3JNZXRhZGF0YSA9IChhcnJheSwgdGFyZ2V0KSA9PiBfX2RlZk5vcm1hbFByb3AodGFyZ2V0LCBfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIiksIGFycmF5WzNdKTtcbnZhciBfX3J1bkluaXRpYWxpemVycyA9IChhcnJheSwgZmxhZ3MsIHNlbGYsIHZhbHVlKSA9PiB7XG4gIGZvciAodmFyIGkgPSAwLCBmbnMgPSBhcnJheVtmbGFncyA+PiAxXSwgbiA9IGZucyAmJiBmbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSBmbGFncyAmIDEgPyBmbnNbaV0uY2FsbChzZWxmKSA6IHZhbHVlID0gZm5zW2ldLmNhbGwoc2VsZiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9fZGVjb3JhdGVFbGVtZW50ID0gKGFycmF5LCBmbGFncywgbmFtZSwgZGVjb3JhdG9ycywgdGFyZ2V0LCBleHRyYSkgPT4ge1xuICB2YXIgZm4sIGl0LCBkb25lLCBjdHgsIGFjY2VzcywgayA9IGZsYWdzICYgNywgcyA9ICEhKGZsYWdzICYgOCksIHAgPSAhIShmbGFncyAmIDE2KTtcbiAgdmFyIGogPSBrID4gMyA/IGFycmF5Lmxlbmd0aCArIDEgOiBrID8gcyA/IDEgOiAyIDogMCwga2V5ID0gX19kZWNvcmF0b3JTdHJpbmdzW2sgKyA1XTtcbiAgdmFyIGluaXRpYWxpemVycyA9IGsgPiAzICYmIChhcnJheVtqIC0gMV0gPSBbXSksIGV4dHJhSW5pdGlhbGl6ZXJzID0gYXJyYXlbal0gfHwgKGFycmF5W2pdID0gW10pO1xuICB2YXIgZGVzYyA9IGsgJiYgKCFwICYmICFzICYmICh0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlKSwgayA8IDUgJiYgKGsgPiAzIHx8ICFwKSAmJiBfX2dldE93blByb3BEZXNjKGsgPCA0ID8gdGFyZ2V0IDogeyBnZXQgW25hbWVdKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgZXh0cmEpO1xuICB9LCBzZXQgW25hbWVdKHgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlU2V0KHRoaXMsIGV4dHJhLCB4KTtcbiAgfSB9LCBuYW1lKSk7XG4gIGsgPyBwICYmIGsgPCA0ICYmIF9fbmFtZShleHRyYSwgKGsgPiAyID8gXCJzZXQgXCIgOiBrID4gMSA/IFwiZ2V0IFwiIDogXCJcIikgKyBuYW1lKSA6IF9fbmFtZSh0YXJnZXQsIG5hbWUpO1xuICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGN0eCA9IF9fZGVjb3JhdG9yQ29udGV4dChrLCBuYW1lLCBkb25lID0ge30sIGFycmF5WzNdLCBleHRyYUluaXRpYWxpemVycyk7XG4gICAgaWYgKGspIHtcbiAgICAgIGN0eC5zdGF0aWMgPSBzLCBjdHgucHJpdmF0ZSA9IHAsIGFjY2VzcyA9IGN0eC5hY2Nlc3MgPSB7IGhhczogcCA/ICh4KSA9PiBfX3ByaXZhdGVJbih0YXJnZXQsIHgpIDogKHgpID0+IG5hbWUgaW4geCB9O1xuICAgICAgaWYgKGsgXiAzKSBhY2Nlc3MuZ2V0ID0gcCA/ICh4KSA9PiAoayBeIDEgPyBfX3ByaXZhdGVHZXQgOiBfX3ByaXZhdGVNZXRob2QpKHgsIHRhcmdldCwgayBeIDQgPyBleHRyYSA6IGRlc2MuZ2V0KSA6ICh4KSA9PiB4W25hbWVdO1xuICAgICAgaWYgKGsgPiAyKSBhY2Nlc3Muc2V0ID0gcCA/ICh4LCB5KSA9PiBfX3ByaXZhdGVTZXQoeCwgdGFyZ2V0LCB5LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5zZXQpIDogKHgsIHkpID0+IHhbbmFtZV0gPSB5O1xuICAgIH1cbiAgICBpdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShrID8gayA8IDQgPyBwID8gZXh0cmEgOiBkZXNjW2tleV0gOiBrID4gNCA/IHZvaWQgMCA6IHsgZ2V0OiBkZXNjLmdldCwgc2V0OiBkZXNjLnNldCB9IDogdGFyZ2V0LCBjdHgpLCBkb25lLl8gPSAxO1xuICAgIGlmIChrIF4gNCB8fCBpdCA9PT0gdm9pZCAwKSBfX2V4cGVjdEZuKGl0KSAmJiAoayA+IDQgPyBpbml0aWFsaXplcnMudW5zaGlmdChpdCkgOiBrID8gcCA/IGV4dHJhID0gaXQgOiBkZXNjW2tleV0gPSBpdCA6IHRhcmdldCA9IGl0KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgaXQgIT09IFwib2JqZWN0XCIgfHwgaXQgPT09IG51bGwpIF9fdHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgIGVsc2UgX19leHBlY3RGbihmbiA9IGl0LmdldCkgJiYgKGRlc2MuZ2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuc2V0KSAmJiAoZGVzYy5zZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5pbml0KSAmJiBpbml0aWFsaXplcnMudW5zaGlmdChmbik7XG4gIH1cbiAgcmV0dXJuIGsgfHwgX19kZWNvcmF0b3JNZXRhZGF0YShhcnJheSwgdGFyZ2V0KSwgZGVzYyAmJiBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCBkZXNjKSwgcCA/IGsgXiA0ID8gZXh0cmEgOiBkZXNjIDogdGFyZ2V0O1xufTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG52YXIgX19wcml2YXRlSW4gPSAobWVtYmVyLCBvYmopID0+IE9iamVjdChvYmopICE9PSBvYmogPyBfX3R5cGVFcnJvcignQ2Fubm90IHVzZSB0aGUgXCJpblwiIG9wZXJhdG9yIG9uIHRoaXMgdmFsdWUnKSA6IG1lbWJlci5oYXMob2JqKTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIiksIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaikpO1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKSwgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpLCB2YWx1ZSk7XG52YXIgX19wcml2YXRlTWV0aG9kID0gKG9iaiwgbWVtYmVyLCBtZXRob2QpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcImFjY2VzcyBwcml2YXRlIG1ldGhvZFwiKSwgbWV0aG9kKTtcbnZhciBfZ2V0U25hcEdlb21ldHJ5Q2FjaGVfZGVjLCBfaW5pdDtcbmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGFzc2VydEV4aXN0cywgdW5pcXVlSWQgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuY29uc3QgZGVmYXVsdEdldFNlbGZTbmFwT3V0bGluZSA9ICgpID0+IG51bGw7XG5jb25zdCBkZWZhdWx0R2V0U2VsZlNuYXBQb2ludHMgPSAoKSA9PiBbXTtcbl9nZXRTbmFwR2VvbWV0cnlDYWNoZV9kZWMgPSBbY29tcHV0ZWRdO1xuY2xhc3MgSGFuZGxlU25hcHMge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICBfX3J1bkluaXRpYWxpemVycyhfaW5pdCwgNSwgdGhpcyk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImVkaXRvclwiKTtcbiAgICB0aGlzLmVkaXRvciA9IG1hbmFnZXIuZWRpdG9yO1xuICB9XG4gIGdldFNuYXBHZW9tZXRyeUNhY2hlKCkge1xuICAgIGNvbnN0IHsgZWRpdG9yIH0gPSB0aGlzO1xuICAgIHJldHVybiBlZGl0b3Iuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcImhhbmRsZSBzbmFwIGdlb21ldHJ5XCIsIChzaGFwZSkgPT4ge1xuICAgICAgY29uc3Qgc25hcEdlb21ldHJ5ID0gZWRpdG9yLmdldFNoYXBlVXRpbChzaGFwZSkuZ2V0SGFuZGxlU25hcEdlb21ldHJ5KHNoYXBlKTtcbiAgICAgIGNvbnN0IGdldFNlbGZTbmFwT3V0bGluZSA9IHNuYXBHZW9tZXRyeS5nZXRTZWxmU25hcE91dGxpbmUgPyBzbmFwR2VvbWV0cnkuZ2V0U2VsZlNuYXBPdXRsaW5lLmJpbmQoc25hcEdlb21ldHJ5KSA6IGRlZmF1bHRHZXRTZWxmU25hcE91dGxpbmU7XG4gICAgICBjb25zdCBnZXRTZWxmU25hcFBvaW50cyA9IHNuYXBHZW9tZXRyeS5nZXRTZWxmU25hcFBvaW50cyA/IHNuYXBHZW9tZXRyeS5nZXRTZWxmU25hcFBvaW50cy5iaW5kKHNuYXBHZW9tZXRyeSkgOiBkZWZhdWx0R2V0U2VsZlNuYXBQb2ludHM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdXRsaW5lOiBzbmFwR2VvbWV0cnkub3V0bGluZSA9PT0gdm9pZCAwID8gZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUpIDogc25hcEdlb21ldHJ5Lm91dGxpbmUsXG4gICAgICAgIHBvaW50czogc25hcEdlb21ldHJ5LnBvaW50cyA/PyBbXSxcbiAgICAgICAgZ2V0U2VsZlNuYXBPdXRsaW5lLFxuICAgICAgICBnZXRTZWxmU25hcFBvaW50c1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICAqaXRlcmF0ZVNuYXBQb2ludHNJblBhZ2VTcGFjZShjdXJyZW50U2hhcGVJZCwgY3VycmVudEhhbmRsZSkge1xuICAgIGNvbnN0IHNlbGZTbmFwUG9pbnRzID0gdGhpcy5nZXRTbmFwR2VvbWV0cnlDYWNoZSgpLmdldChjdXJyZW50U2hhcGVJZCk/LmdldFNlbGZTbmFwUG9pbnRzKGN1cnJlbnRIYW5kbGUpO1xuICAgIGlmIChzZWxmU25hcFBvaW50cyAmJiBzZWxmU25hcFBvaW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNoYXBlUGFnZVRyYW5zZm9ybSA9IGFzc2VydEV4aXN0cyh0aGlzLmVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oY3VycmVudFNoYXBlSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2Ygc2VsZlNuYXBQb2ludHMpIHtcbiAgICAgICAgeWllbGQgc2hhcGVQYWdlVHJhbnNmb3JtLmFwcGx5VG9Qb2ludChwb2ludCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2hhcGVJZCBvZiB0aGlzLm1hbmFnZXIuZ2V0U25hcHBhYmxlU2hhcGVzKCkpIHtcbiAgICAgIGlmIChzaGFwZUlkID09PSBjdXJyZW50U2hhcGVJZCkgY29udGludWU7XG4gICAgICBjb25zdCBzbmFwUG9pbnRzID0gdGhpcy5nZXRTbmFwR2VvbWV0cnlDYWNoZSgpLmdldChzaGFwZUlkKT8ucG9pbnRzO1xuICAgICAgaWYgKCFzbmFwUG9pbnRzIHx8ICFzbmFwUG9pbnRzLmxlbmd0aCkgY29udGludWU7XG4gICAgICBjb25zdCBzaGFwZVBhZ2VUcmFuc2Zvcm0gPSBhc3NlcnRFeGlzdHModGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2Ygc25hcFBvaW50cykge1xuICAgICAgICB5aWVsZCBzaGFwZVBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgKml0ZXJhdGVTbmFwT3V0bGluZXMoY3VycmVudFNoYXBlSWQsIGN1cnJlbnRIYW5kbGUpIHtcbiAgICBjb25zdCBzZWxmU25hcE91dGxpbmUgPSB0aGlzLmdldFNuYXBHZW9tZXRyeUNhY2hlKCkuZ2V0KGN1cnJlbnRTaGFwZUlkKT8uZ2V0U2VsZlNuYXBPdXRsaW5lKGN1cnJlbnRIYW5kbGUpO1xuICAgIGlmIChzZWxmU25hcE91dGxpbmUpIHtcbiAgICAgIHlpZWxkIHsgc2hhcGVJZDogY3VycmVudFNoYXBlSWQsIG91dGxpbmU6IHNlbGZTbmFwT3V0bGluZSB9O1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNoYXBlSWQgb2YgdGhpcy5tYW5hZ2VyLmdldFNuYXBwYWJsZVNoYXBlcygpKSB7XG4gICAgICBpZiAoc2hhcGVJZCA9PT0gY3VycmVudFNoYXBlSWQpIGNvbnRpbnVlO1xuICAgICAgY29uc3Qgc25hcE91dGxpbmUgPSB0aGlzLmdldFNuYXBHZW9tZXRyeUNhY2hlKCkuZ2V0KHNoYXBlSWQpPy5vdXRsaW5lO1xuICAgICAgaWYgKCFzbmFwT3V0bGluZSkgY29udGludWU7XG4gICAgICB5aWVsZCB7IHNoYXBlSWQsIG91dGxpbmU6IHNuYXBPdXRsaW5lIH07XG4gICAgfVxuICB9XG4gIGdldEhhbmRsZVNuYXBQb3NpdGlvbih7XG4gICAgY3VycmVudFNoYXBlSWQsXG4gICAgaGFuZGxlLFxuICAgIGhhbmRsZUluUGFnZVNwYWNlXG4gIH0pIHtcbiAgICBjb25zdCBzbmFwVGhyZXNob2xkID0gdGhpcy5tYW5hZ2VyLmdldFNuYXBUaHJlc2hvbGQoKTtcbiAgICBsZXQgbWluRGlzdGFuY2VGb3JTbmFwUG9pbnQgPSBzbmFwVGhyZXNob2xkO1xuICAgIGxldCBuZWFyZXN0U25hcFBvaW50ID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHNuYXBQb2ludCBvZiB0aGlzLml0ZXJhdGVTbmFwUG9pbnRzSW5QYWdlU3BhY2UoY3VycmVudFNoYXBlSWQsIGhhbmRsZSkpIHtcbiAgICAgIGlmIChWZWMuRGlzdE1pbihoYW5kbGVJblBhZ2VTcGFjZSwgc25hcFBvaW50LCBtaW5EaXN0YW5jZUZvclNuYXBQb2ludCkpIHtcbiAgICAgICAgbWluRGlzdGFuY2VGb3JTbmFwUG9pbnQgPSBWZWMuRGlzdChoYW5kbGVJblBhZ2VTcGFjZSwgc25hcFBvaW50KTtcbiAgICAgICAgbmVhcmVzdFNuYXBQb2ludCA9IHNuYXBQb2ludDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5lYXJlc3RTbmFwUG9pbnQpIHJldHVybiBuZWFyZXN0U25hcFBvaW50O1xuICAgIGxldCBtaW5EaXN0YW5jZUZvck91dGxpbmUgPSBzbmFwVGhyZXNob2xkO1xuICAgIGxldCBuZWFyZXN0UG9pbnRPbk91dGxpbmUgPSBudWxsO1xuICAgIGZvciAoY29uc3QgeyBzaGFwZUlkLCBvdXRsaW5lIH0gb2YgdGhpcy5pdGVyYXRlU25hcE91dGxpbmVzKGN1cnJlbnRTaGFwZUlkLCBoYW5kbGUpKSB7XG4gICAgICBjb25zdCBzaGFwZVBhZ2VUcmFuc2Zvcm0gPSBhc3NlcnRFeGlzdHModGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWQpKTtcbiAgICAgIGNvbnN0IHBvaW50SW5TaGFwZVNwYWNlID0gdGhpcy5lZGl0b3IuZ2V0UG9pbnRJblNoYXBlU3BhY2Uoc2hhcGVJZCwgaGFuZGxlSW5QYWdlU3BhY2UpO1xuICAgICAgY29uc3QgbmVhcmVzdFNoYXBlUG9pbnRJblNoYXBlU3BhY2UgPSBvdXRsaW5lLm5lYXJlc3RQb2ludChwb2ludEluU2hhcGVTcGFjZSk7XG4gICAgICBjb25zdCBuZWFyZXN0SW5QYWdlU3BhY2UgPSBzaGFwZVBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50KG5lYXJlc3RTaGFwZVBvaW50SW5TaGFwZVNwYWNlKTtcbiAgICAgIGlmIChWZWMuRGlzdE1pbihoYW5kbGVJblBhZ2VTcGFjZSwgbmVhcmVzdEluUGFnZVNwYWNlLCBtaW5EaXN0YW5jZUZvck91dGxpbmUpKSB7XG4gICAgICAgIG1pbkRpc3RhbmNlRm9yT3V0bGluZSA9IFZlYy5EaXN0KGhhbmRsZUluUGFnZVNwYWNlLCBuZWFyZXN0SW5QYWdlU3BhY2UpO1xuICAgICAgICBuZWFyZXN0UG9pbnRPbk91dGxpbmUgPSBuZWFyZXN0SW5QYWdlU3BhY2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuZWFyZXN0UG9pbnRPbk91dGxpbmUpIHJldHVybiBuZWFyZXN0UG9pbnRPbk91dGxpbmU7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc25hcEhhbmRsZSh7XG4gICAgY3VycmVudFNoYXBlSWQsXG4gICAgaGFuZGxlXG4gIH0pIHtcbiAgICBjb25zdCBjdXJyZW50U2hhcGVUcmFuc2Zvcm0gPSBhc3NlcnRFeGlzdHModGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKGN1cnJlbnRTaGFwZUlkKSk7XG4gICAgY29uc3QgaGFuZGxlSW5QYWdlU3BhY2UgPSBjdXJyZW50U2hhcGVUcmFuc2Zvcm0uYXBwbHlUb1BvaW50KGhhbmRsZSk7XG4gICAgY29uc3Qgc25hcFBvc2l0aW9uID0gdGhpcy5nZXRIYW5kbGVTbmFwUG9zaXRpb24oeyBjdXJyZW50U2hhcGVJZCwgaGFuZGxlLCBoYW5kbGVJblBhZ2VTcGFjZSB9KTtcbiAgICBpZiAoc25hcFBvc2l0aW9uKSB7XG4gICAgICB0aGlzLm1hbmFnZXIuc2V0SW5kaWNhdG9ycyhbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogdW5pcXVlSWQoKSxcbiAgICAgICAgICB0eXBlOiBcInBvaW50c1wiLFxuICAgICAgICAgIHBvaW50czogW3NuYXBQb3NpdGlvbl1cbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgICByZXR1cm4geyBudWRnZTogVmVjLlN1YihzbmFwUG9zaXRpb24sIGhhbmRsZUluUGFnZVNwYWNlKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuX2luaXQgPSBfX2RlY29yYXRvclN0YXJ0KG51bGwpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0U25hcEdlb21ldHJ5Q2FjaGVcIiwgX2dldFNuYXBHZW9tZXRyeUNhY2hlX2RlYywgSGFuZGxlU25hcHMpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgSGFuZGxlU25hcHMpO1xuZXhwb3J0IHtcbiAgSGFuZGxlU25hcHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IYW5kbGVTbmFwcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapManager: () => (/* binding */ SnapManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BoundsSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\");\n/* harmony import */ var _HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./HandleSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _getCurrentCommonAncestor_dec, _getSnappableShapes_dec, _getSnapThreshold_dec, _init;\n\n\n\n\n_getSnapThreshold_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getSnappableShapes_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getCurrentCommonAncestor_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed];\nclass SnapManager {\n  constructor(editor) {\n    this.editor = editor;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"shapeBounds\");\n    __publicField(this, \"handles\");\n    __publicField(this, \"_snapIndicators\", (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"snapLines\", void 0));\n    this.shapeBounds = new _BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_2__.BoundsSnaps(this);\n    this.handles = new _HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_3__.HandleSnaps(this);\n  }\n  getIndicators() {\n    return this._snapIndicators.get() ?? _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n  }\n  clearIndicators() {\n    if (this.getIndicators().length) {\n      this._snapIndicators.set(void 0);\n    }\n  }\n  setIndicators(indicators) {\n    this._snapIndicators.set(indicators);\n  }\n  getSnapThreshold() {\n    return 8 / this.editor.getZoomLevel();\n  }\n  getSnappableShapes() {\n    const { editor } = this;\n    const renderingBounds = editor.getViewportPageBounds();\n    const selectedShapeIds = editor.getSelectedShapeIds();\n    const snappableShapes = /* @__PURE__ */ new Set();\n    const collectSnappableShapesFromParent = (parentId) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShapeId)(parentId)) {\n        const parent = editor.getShape(parentId);\n        if (parent && editor.isShapeOfType(parent, \"frame\")) {\n          snappableShapes.add(parentId);\n        }\n      }\n      const sortedChildIds = editor.getSortedChildIdsForParent(parentId);\n      for (const childId of sortedChildIds) {\n        if (selectedShapeIds.includes(childId)) continue;\n        const childShape = editor.getShape(childId);\n        if (!childShape) continue;\n        const util = editor.getShapeUtil(childShape);\n        if (!util.canSnap(childShape)) continue;\n        const pageBounds = editor.getShapePageBounds(childId);\n        if (!(pageBounds && renderingBounds.includes(pageBounds))) continue;\n        if (editor.isShapeOfType(childShape, \"group\")) {\n          collectSnappableShapesFromParent(childId);\n          continue;\n        }\n        snappableShapes.add(childId);\n      }\n    };\n    collectSnappableShapesFromParent(this.getCurrentCommonAncestor() ?? editor.getCurrentPageId());\n    return snappableShapes;\n  }\n  getCurrentCommonAncestor() {\n    return this.editor.findCommonAncestor(this.editor.getSelectedShapes());\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"getSnapThreshold\", _getSnapThreshold_dec, SnapManager);\n__decorateElement(_init, 1, \"getSnappableShapes\", _getSnappableShapes_dec, SnapManager);\n__decorateElement(_init, 1, \"getCurrentCommonAncestor\", _getCurrentCommonAncestor_dec, SnapManager);\n__decoratorMetadata(_init, SnapManager);\n\n//# sourceMappingURL=SnapManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9TbmFwTWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0ksNERBQTRELDJCQUEyQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsd0pBQXdKO0FBQ3pOO0FBQ0E7QUFDQSxrRUFBa0UsT0FBTztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwSEFBMEg7QUFDMUg7QUFDQSxHQUFHO0FBQ0g7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QywrQ0FBK0M7QUFDL0M7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLCtCQUErQjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0RDtBQUNmO0FBQ0c7QUFDQTtBQUNoRCx5QkFBeUIsbURBQVEsOEJBQThCLG1EQUFRLG9DQUFvQyxtREFBUTtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbURBQUk7QUFDL0MsMkJBQTJCLHlEQUFXO0FBQ3RDLHVCQUF1Qix5REFBVztBQUNsQztBQUNBO0FBQ0EseUNBQXlDLHNEQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwyREFBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9TbmFwTWFuYWdlci5tanM/ZmE4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2tub3duU3ltYm9sID0gKG5hbWUsIHN5bWJvbCkgPT4gKHN5bWJvbCA9IFN5bWJvbFtuYW1lXSkgPyBzeW1ib2wgOiBTeW1ib2wuZm9yKFwiU3ltYm9sLlwiICsgbmFtZSk7XG52YXIgX190eXBlRXJyb3IgPSAobXNnKSA9PiB7XG4gIHRocm93IFR5cGVFcnJvcihtc2cpO1xufTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbnZhciBfX2RlY29yYXRvclN0YXJ0ID0gKGJhc2UpID0+IFssICwgLCBfX2NyZWF0ZShiYXNlPy5bX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpXSA/PyBudWxsKV07XG52YXIgX19kZWNvcmF0b3JTdHJpbmdzID0gW1wiY2xhc3NcIiwgXCJtZXRob2RcIiwgXCJnZXR0ZXJcIiwgXCJzZXR0ZXJcIiwgXCJhY2Nlc3NvclwiLCBcImZpZWxkXCIsIFwidmFsdWVcIiwgXCJnZXRcIiwgXCJzZXRcIl07XG52YXIgX19leHBlY3RGbiA9IChmbikgPT4gZm4gIT09IHZvaWQgMCAmJiB0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIiA/IF9fdHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIikgOiBmbjtcbnZhciBfX2RlY29yYXRvckNvbnRleHQgPSAoa2luZCwgbmFtZSwgZG9uZSwgbWV0YWRhdGEsIGZucykgPT4gKHsga2luZDogX19kZWNvcmF0b3JTdHJpbmdzW2tpbmRdLCBuYW1lLCBtZXRhZGF0YSwgYWRkSW5pdGlhbGl6ZXI6IChmbikgPT4gZG9uZS5fID8gX190eXBlRXJyb3IoXCJBbHJlYWR5IGluaXRpYWxpemVkXCIpIDogZm5zLnB1c2goX19leHBlY3RGbihmbiB8fCBudWxsKSkgfSk7XG52YXIgX19kZWNvcmF0b3JNZXRhZGF0YSA9IChhcnJheSwgdGFyZ2V0KSA9PiBfX2RlZk5vcm1hbFByb3AodGFyZ2V0LCBfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIiksIGFycmF5WzNdKTtcbnZhciBfX3J1bkluaXRpYWxpemVycyA9IChhcnJheSwgZmxhZ3MsIHNlbGYsIHZhbHVlKSA9PiB7XG4gIGZvciAodmFyIGkgPSAwLCBmbnMgPSBhcnJheVtmbGFncyA+PiAxXSwgbiA9IGZucyAmJiBmbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSBmbGFncyAmIDEgPyBmbnNbaV0uY2FsbChzZWxmKSA6IHZhbHVlID0gZm5zW2ldLmNhbGwoc2VsZiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9fZGVjb3JhdGVFbGVtZW50ID0gKGFycmF5LCBmbGFncywgbmFtZSwgZGVjb3JhdG9ycywgdGFyZ2V0LCBleHRyYSkgPT4ge1xuICB2YXIgZm4sIGl0LCBkb25lLCBjdHgsIGFjY2VzcywgayA9IGZsYWdzICYgNywgcyA9ICEhKGZsYWdzICYgOCksIHAgPSAhIShmbGFncyAmIDE2KTtcbiAgdmFyIGogPSBrID4gMyA/IGFycmF5Lmxlbmd0aCArIDEgOiBrID8gcyA/IDEgOiAyIDogMCwga2V5ID0gX19kZWNvcmF0b3JTdHJpbmdzW2sgKyA1XTtcbiAgdmFyIGluaXRpYWxpemVycyA9IGsgPiAzICYmIChhcnJheVtqIC0gMV0gPSBbXSksIGV4dHJhSW5pdGlhbGl6ZXJzID0gYXJyYXlbal0gfHwgKGFycmF5W2pdID0gW10pO1xuICB2YXIgZGVzYyA9IGsgJiYgKCFwICYmICFzICYmICh0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlKSwgayA8IDUgJiYgKGsgPiAzIHx8ICFwKSAmJiBfX2dldE93blByb3BEZXNjKGsgPCA0ID8gdGFyZ2V0IDogeyBnZXQgW25hbWVdKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgZXh0cmEpO1xuICB9LCBzZXQgW25hbWVdKHgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlU2V0KHRoaXMsIGV4dHJhLCB4KTtcbiAgfSB9LCBuYW1lKSk7XG4gIGsgPyBwICYmIGsgPCA0ICYmIF9fbmFtZShleHRyYSwgKGsgPiAyID8gXCJzZXQgXCIgOiBrID4gMSA/IFwiZ2V0IFwiIDogXCJcIikgKyBuYW1lKSA6IF9fbmFtZSh0YXJnZXQsIG5hbWUpO1xuICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGN0eCA9IF9fZGVjb3JhdG9yQ29udGV4dChrLCBuYW1lLCBkb25lID0ge30sIGFycmF5WzNdLCBleHRyYUluaXRpYWxpemVycyk7XG4gICAgaWYgKGspIHtcbiAgICAgIGN0eC5zdGF0aWMgPSBzLCBjdHgucHJpdmF0ZSA9IHAsIGFjY2VzcyA9IGN0eC5hY2Nlc3MgPSB7IGhhczogcCA/ICh4KSA9PiBfX3ByaXZhdGVJbih0YXJnZXQsIHgpIDogKHgpID0+IG5hbWUgaW4geCB9O1xuICAgICAgaWYgKGsgXiAzKSBhY2Nlc3MuZ2V0ID0gcCA/ICh4KSA9PiAoayBeIDEgPyBfX3ByaXZhdGVHZXQgOiBfX3ByaXZhdGVNZXRob2QpKHgsIHRhcmdldCwgayBeIDQgPyBleHRyYSA6IGRlc2MuZ2V0KSA6ICh4KSA9PiB4W25hbWVdO1xuICAgICAgaWYgKGsgPiAyKSBhY2Nlc3Muc2V0ID0gcCA/ICh4LCB5KSA9PiBfX3ByaXZhdGVTZXQoeCwgdGFyZ2V0LCB5LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5zZXQpIDogKHgsIHkpID0+IHhbbmFtZV0gPSB5O1xuICAgIH1cbiAgICBpdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShrID8gayA8IDQgPyBwID8gZXh0cmEgOiBkZXNjW2tleV0gOiBrID4gNCA/IHZvaWQgMCA6IHsgZ2V0OiBkZXNjLmdldCwgc2V0OiBkZXNjLnNldCB9IDogdGFyZ2V0LCBjdHgpLCBkb25lLl8gPSAxO1xuICAgIGlmIChrIF4gNCB8fCBpdCA9PT0gdm9pZCAwKSBfX2V4cGVjdEZuKGl0KSAmJiAoayA+IDQgPyBpbml0aWFsaXplcnMudW5zaGlmdChpdCkgOiBrID8gcCA/IGV4dHJhID0gaXQgOiBkZXNjW2tleV0gPSBpdCA6IHRhcmdldCA9IGl0KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgaXQgIT09IFwib2JqZWN0XCIgfHwgaXQgPT09IG51bGwpIF9fdHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgIGVsc2UgX19leHBlY3RGbihmbiA9IGl0LmdldCkgJiYgKGRlc2MuZ2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuc2V0KSAmJiAoZGVzYy5zZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5pbml0KSAmJiBpbml0aWFsaXplcnMudW5zaGlmdChmbik7XG4gIH1cbiAgcmV0dXJuIGsgfHwgX19kZWNvcmF0b3JNZXRhZGF0YShhcnJheSwgdGFyZ2V0KSwgZGVzYyAmJiBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCBkZXNjKSwgcCA/IGsgXiA0ID8gZXh0cmEgOiBkZXNjIDogdGFyZ2V0O1xufTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG52YXIgX19wcml2YXRlSW4gPSAobWVtYmVyLCBvYmopID0+IE9iamVjdChvYmopICE9PSBvYmogPyBfX3R5cGVFcnJvcignQ2Fubm90IHVzZSB0aGUgXCJpblwiIG9wZXJhdG9yIG9uIHRoaXMgdmFsdWUnKSA6IG1lbWJlci5oYXMob2JqKTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIiksIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaikpO1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKSwgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpLCB2YWx1ZSk7XG52YXIgX19wcml2YXRlTWV0aG9kID0gKG9iaiwgbWVtYmVyLCBtZXRob2QpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcImFjY2VzcyBwcml2YXRlIG1ldGhvZFwiKSwgbWV0aG9kKTtcbnZhciBfZ2V0Q3VycmVudENvbW1vbkFuY2VzdG9yX2RlYywgX2dldFNuYXBwYWJsZVNoYXBlc19kZWMsIF9nZXRTbmFwVGhyZXNob2xkX2RlYywgX2luaXQ7XG5pbXBvcnQgeyBFTVBUWV9BUlJBWSwgYXRvbSwgY29tcHV0ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgaXNTaGFwZUlkIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IEJvdW5kc1NuYXBzIH0gZnJvbSBcIi4vQm91bmRzU25hcHMubWpzXCI7XG5pbXBvcnQgeyBIYW5kbGVTbmFwcyB9IGZyb20gXCIuL0hhbmRsZVNuYXBzLm1qc1wiO1xuX2dldFNuYXBUaHJlc2hvbGRfZGVjID0gW2NvbXB1dGVkXSwgX2dldFNuYXBwYWJsZVNoYXBlc19kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0Q3VycmVudENvbW1vbkFuY2VzdG9yX2RlYyA9IFtjb21wdXRlZF07XG5jbGFzcyBTbmFwTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgIF9fcnVuSW5pdGlhbGl6ZXJzKF9pbml0LCA1LCB0aGlzKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2hhcGVCb3VuZHNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImhhbmRsZXNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9zbmFwSW5kaWNhdG9yc1wiLCBhdG9tKFwic25hcExpbmVzXCIsIHZvaWQgMCkpO1xuICAgIHRoaXMuc2hhcGVCb3VuZHMgPSBuZXcgQm91bmRzU25hcHModGhpcyk7XG4gICAgdGhpcy5oYW5kbGVzID0gbmV3IEhhbmRsZVNuYXBzKHRoaXMpO1xuICB9XG4gIGdldEluZGljYXRvcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NuYXBJbmRpY2F0b3JzLmdldCgpID8/IEVNUFRZX0FSUkFZO1xuICB9XG4gIGNsZWFySW5kaWNhdG9ycygpIHtcbiAgICBpZiAodGhpcy5nZXRJbmRpY2F0b3JzKCkubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9zbmFwSW5kaWNhdG9ycy5zZXQodm9pZCAwKTtcbiAgICB9XG4gIH1cbiAgc2V0SW5kaWNhdG9ycyhpbmRpY2F0b3JzKSB7XG4gICAgdGhpcy5fc25hcEluZGljYXRvcnMuc2V0KGluZGljYXRvcnMpO1xuICB9XG4gIGdldFNuYXBUaHJlc2hvbGQoKSB7XG4gICAgcmV0dXJuIDggLyB0aGlzLmVkaXRvci5nZXRab29tTGV2ZWwoKTtcbiAgfVxuICBnZXRTbmFwcGFibGVTaGFwZXMoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXM7XG4gICAgY29uc3QgcmVuZGVyaW5nQm91bmRzID0gZWRpdG9yLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVJZHMgPSBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIGNvbnN0IHNuYXBwYWJsZVNoYXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgY29sbGVjdFNuYXBwYWJsZVNoYXBlc0Zyb21QYXJlbnQgPSAocGFyZW50SWQpID0+IHtcbiAgICAgIGlmIChpc1NoYXBlSWQocGFyZW50SWQpKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGVkaXRvci5nZXRTaGFwZShwYXJlbnRJZCk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgZWRpdG9yLmlzU2hhcGVPZlR5cGUocGFyZW50LCBcImZyYW1lXCIpKSB7XG4gICAgICAgICAgc25hcHBhYmxlU2hhcGVzLmFkZChwYXJlbnRJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNvcnRlZENoaWxkSWRzID0gZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhcmVudElkKTtcbiAgICAgIGZvciAoY29uc3QgY2hpbGRJZCBvZiBzb3J0ZWRDaGlsZElkcykge1xuICAgICAgICBpZiAoc2VsZWN0ZWRTaGFwZUlkcy5pbmNsdWRlcyhjaGlsZElkKSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNoaWxkU2hhcGUgPSBlZGl0b3IuZ2V0U2hhcGUoY2hpbGRJZCk7XG4gICAgICAgIGlmICghY2hpbGRTaGFwZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IHV0aWwgPSBlZGl0b3IuZ2V0U2hhcGVVdGlsKGNoaWxkU2hhcGUpO1xuICAgICAgICBpZiAoIXV0aWwuY2FuU25hcChjaGlsZFNoYXBlKSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKGNoaWxkSWQpO1xuICAgICAgICBpZiAoIShwYWdlQm91bmRzICYmIHJlbmRlcmluZ0JvdW5kcy5pbmNsdWRlcyhwYWdlQm91bmRzKSkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoZWRpdG9yLmlzU2hhcGVPZlR5cGUoY2hpbGRTaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgICAgIGNvbGxlY3RTbmFwcGFibGVTaGFwZXNGcm9tUGFyZW50KGNoaWxkSWQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHNuYXBwYWJsZVNoYXBlcy5hZGQoY2hpbGRJZCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb2xsZWN0U25hcHBhYmxlU2hhcGVzRnJvbVBhcmVudCh0aGlzLmdldEN1cnJlbnRDb21tb25BbmNlc3RvcigpID8/IGVkaXRvci5nZXRDdXJyZW50UGFnZUlkKCkpO1xuICAgIHJldHVybiBzbmFwcGFibGVTaGFwZXM7XG4gIH1cbiAgZ2V0Q3VycmVudENvbW1vbkFuY2VzdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmVkaXRvci5maW5kQ29tbW9uQW5jZXN0b3IodGhpcy5lZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZXMoKSk7XG4gIH1cbn1cbl9pbml0ID0gX19kZWNvcmF0b3JTdGFydChudWxsKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldFNuYXBUaHJlc2hvbGRcIiwgX2dldFNuYXBUaHJlc2hvbGRfZGVjLCBTbmFwTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRTbmFwcGFibGVTaGFwZXNcIiwgX2dldFNuYXBwYWJsZVNoYXBlc19kZWMsIFNuYXBNYW5hZ2VyKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEN1cnJlbnRDb21tb25BbmNlc3RvclwiLCBfZ2V0Q3VycmVudENvbW1vbkFuY2VzdG9yX2RlYywgU25hcE1hbmFnZXIpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgU25hcE1hbmFnZXIpO1xuZXhwb3J0IHtcbiAgU25hcE1hbmFnZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TbmFwTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stack: () => (/* binding */ stack)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n\nfunction stack(items) {\n  if (items) {\n    let result = EMPTY_STACK_ITEM;\n    while (items.length) {\n      result = result.push(items.pop());\n    }\n    return result;\n  }\n  return EMPTY_STACK_ITEM;\n}\nclass EmptyStackItem {\n  length = 0;\n  head = null;\n  tail = this;\n  push(head) {\n    return new StackItem(head, this);\n  }\n  toArray() {\n    return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n  }\n  [Symbol.iterator]() {\n    return {\n      next() {\n        return { value: void 0, done: true };\n      }\n    };\n  }\n}\nconst EMPTY_STACK_ITEM = new EmptyStackItem();\nclass StackItem {\n  constructor(head, tail) {\n    this.head = head;\n    this.tail = tail;\n    this.length = tail.length + 1;\n  }\n  length;\n  push(head) {\n    return new StackItem(head, this);\n  }\n  toArray() {\n    return Array.from(this);\n  }\n  [Symbol.iterator]() {\n    let stack2 = this;\n    return {\n      next() {\n        if (stack2.length) {\n          const value = stack2.head;\n          stack2 = stack2.tail;\n          return { value, done: false };\n        } else {\n          return { value: void 0, done: true };\n        }\n      }\n    };\n  }\n}\n\n//# sourceMappingURL=Stack.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TdGFjay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixVQUFVO0FBQ1YsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TdGFjay5tanM/YjY4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFTVBUWV9BUlJBWSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5mdW5jdGlvbiBzdGFjayhpdGVtcykge1xuICBpZiAoaXRlbXMpIHtcbiAgICBsZXQgcmVzdWx0ID0gRU1QVFlfU1RBQ0tfSVRFTTtcbiAgICB3aGlsZSAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICByZXN1bHQgPSByZXN1bHQucHVzaChpdGVtcy5wb3AoKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIEVNUFRZX1NUQUNLX0lURU07XG59XG5jbGFzcyBFbXB0eVN0YWNrSXRlbSB7XG4gIGxlbmd0aCA9IDA7XG4gIGhlYWQgPSBudWxsO1xuICB0YWlsID0gdGhpcztcbiAgcHVzaChoZWFkKSB7XG4gICAgcmV0dXJuIG5ldyBTdGFja0l0ZW0oaGVhZCwgdGhpcyk7XG4gIH1cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gRU1QVFlfQVJSQVk7XG4gIH1cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5jb25zdCBFTVBUWV9TVEFDS19JVEVNID0gbmV3IEVtcHR5U3RhY2tJdGVtKCk7XG5jbGFzcyBTdGFja0l0ZW0ge1xuICBjb25zdHJ1Y3RvcihoZWFkLCB0YWlsKSB7XG4gICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICB0aGlzLnRhaWwgPSB0YWlsO1xuICAgIHRoaXMubGVuZ3RoID0gdGFpbC5sZW5ndGggKyAxO1xuICB9XG4gIGxlbmd0aDtcbiAgcHVzaChoZWFkKSB7XG4gICAgcmV0dXJuIG5ldyBTdGFja0l0ZW0oaGVhZCwgdGhpcyk7XG4gIH1cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzKTtcbiAgfVxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICBsZXQgc3RhY2syID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKHN0YWNrMi5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0YWNrMi5oZWFkO1xuICAgICAgICAgIHN0YWNrMiA9IHN0YWNrMi50YWlsO1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbmV4cG9ydCB7XG4gIHN0YWNrXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhY2subWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextManager: () => (/* binding */ TextManager)\n/* harmony export */ });\nconst fixNewLines = /\\r?\\n|\\r/g;\nfunction normalizeTextForDom(text) {\n  return text.replace(fixNewLines, \"\\n\").split(\"\\n\").map((x) => x || \" \").join(\"\\n\");\n}\nconst textAlignmentsForLtr = {\n  start: \"left\",\n  \"start-legacy\": \"left\",\n  middle: \"center\",\n  \"middle-legacy\": \"center\",\n  end: \"right\",\n  \"end-legacy\": \"right\"\n};\nconst spaceCharacterRegex = /\\s/;\nclass TextManager {\n  constructor(editor) {\n    this.editor = editor;\n    const container = this.editor.getContainer();\n    const elm = document.createElement(\"div\");\n    elm.classList.add(\"tl-text\");\n    elm.classList.add(\"tl-text-measure\");\n    elm.tabIndex = -1;\n    container.appendChild(elm);\n    this.baseElm = elm;\n    editor.disposables.add(() => {\n      elm.remove();\n    });\n  }\n  baseElm;\n  measureText(textToMeasure, opts) {\n    const elm = this.baseElm?.cloneNode();\n    this.baseElm.insertAdjacentElement(\"afterend\", elm);\n    elm.setAttribute(\"dir\", \"auto\");\n    elm.style.setProperty(\"unicode-bidi\", \"plaintext\");\n    elm.style.setProperty(\"font-family\", opts.fontFamily);\n    elm.style.setProperty(\"font-style\", opts.fontStyle);\n    elm.style.setProperty(\"font-weight\", opts.fontWeight);\n    elm.style.setProperty(\"font-size\", opts.fontSize + \"px\");\n    elm.style.setProperty(\"line-height\", opts.lineHeight * opts.fontSize + \"px\");\n    elm.style.setProperty(\"max-width\", opts.maxWidth === null ? null : opts.maxWidth + \"px\");\n    elm.style.setProperty(\"min-width\", opts.minWidth === null ? null : opts.minWidth + \"px\");\n    elm.style.setProperty(\"padding\", opts.padding);\n    elm.style.setProperty(\n      \"overflow-wrap\",\n      opts.disableOverflowWrapBreaking ? \"normal\" : \"break-word\"\n    );\n    elm.textContent = normalizeTextForDom(textToMeasure);\n    const scrollWidth = elm.scrollWidth;\n    const rect = elm.getBoundingClientRect();\n    elm.remove();\n    return {\n      x: 0,\n      y: 0,\n      w: rect.width,\n      h: rect.height,\n      scrollWidth\n    };\n  }\n  /**\n   * Given an html element, measure the position of each span of unbroken\n   * word/white-space characters within any text nodes it contains.\n   */\n  measureElementTextNodeSpans(element, { shouldTruncateToFirstLine = false } = {}) {\n    const spans = [];\n    const elmBounds = element.getBoundingClientRect();\n    const offsetX = -elmBounds.left;\n    const offsetY = -elmBounds.top;\n    const range = new Range();\n    const textNode = element.childNodes[0];\n    let idx = 0;\n    let currentSpan = null;\n    let prevCharWasSpaceCharacter = null;\n    let prevCharTop = 0;\n    let prevCharLeftForRTLTest = 0;\n    let didTruncate = false;\n    for (const childNode of element.childNodes) {\n      if (childNode.nodeType !== Node.TEXT_NODE) continue;\n      for (const char of childNode.textContent ?? \"\") {\n        range.setStart(textNode, idx);\n        range.setEnd(textNode, idx + char.length);\n        const rects = range.getClientRects();\n        const rect = rects[rects.length - 1];\n        const top = rect.top + offsetY;\n        const left = rect.left + offsetX;\n        const right = rect.right + offsetX;\n        const isRTL = left < prevCharLeftForRTLTest;\n        const isSpaceCharacter = spaceCharacterRegex.test(char);\n        if (\n          // If we're at a word boundary...\n          isSpaceCharacter !== prevCharWasSpaceCharacter || // ...or we're on a different line...\n          top !== prevCharTop || // ...or we're at the start of the text and haven't created a span yet...\n          !currentSpan\n        ) {\n          if (currentSpan) {\n            if (shouldTruncateToFirstLine && top !== prevCharTop) {\n              didTruncate = true;\n              break;\n            }\n            spans.push(currentSpan);\n          }\n          currentSpan = {\n            box: { x: left, y: top, w: rect.width, h: rect.height },\n            text: char\n          };\n          prevCharLeftForRTLTest = left;\n        } else {\n          if (isRTL) {\n            currentSpan.box.x = left;\n          }\n          currentSpan.box.w = isRTL ? currentSpan.box.w + rect.width : right - currentSpan.box.x;\n          currentSpan.text += char;\n        }\n        if (char === \"\\n\") {\n          prevCharLeftForRTLTest = 0;\n        }\n        prevCharWasSpaceCharacter = isSpaceCharacter;\n        prevCharTop = top;\n        idx += char.length;\n      }\n    }\n    if (currentSpan) {\n      spans.push(currentSpan);\n    }\n    return { spans, didTruncate };\n  }\n  /**\n   * Measure text into individual spans. Spans are created by rendering the\n   * text, then dividing it up according to line breaks and word boundaries.\n   *\n   * It works by having the browser render the text, then measuring the\n   * position of each character. You can use this to replicate the text-layout\n   * algorithm of the current browser in e.g. an SVG export.\n   */\n  measureTextSpans(textToMeasure, opts) {\n    if (textToMeasure === \"\") return [];\n    const elm = this.baseElm?.cloneNode();\n    this.baseElm.insertAdjacentElement(\"afterend\", elm);\n    const elementWidth = Math.ceil(opts.width - opts.padding * 2);\n    elm.setAttribute(\"dir\", \"auto\");\n    elm.style.setProperty(\"unicode-bidi\", \"plaintext\");\n    elm.style.setProperty(\"width\", `${elementWidth}px`);\n    elm.style.setProperty(\"height\", \"min-content\");\n    elm.style.setProperty(\"font-size\", `${opts.fontSize}px`);\n    elm.style.setProperty(\"font-family\", opts.fontFamily);\n    elm.style.setProperty(\"font-weight\", opts.fontWeight);\n    elm.style.setProperty(\"line-height\", `${opts.lineHeight * opts.fontSize}px`);\n    elm.style.setProperty(\"text-align\", textAlignmentsForLtr[opts.textAlign]);\n    const shouldTruncateToFirstLine = opts.overflow === \"truncate-ellipsis\" || opts.overflow === \"truncate-clip\";\n    if (shouldTruncateToFirstLine) {\n      elm.style.setProperty(\"overflow-wrap\", \"anywhere\");\n      elm.style.setProperty(\"word-break\", \"break-all\");\n    }\n    const normalizedText = normalizeTextForDom(textToMeasure);\n    elm.textContent = normalizedText;\n    const { spans, didTruncate } = this.measureElementTextNodeSpans(elm, {\n      shouldTruncateToFirstLine\n    });\n    if (opts.overflow === \"truncate-ellipsis\" && didTruncate) {\n      elm.textContent = \"\\u2026\";\n      const ellipsisWidth = Math.ceil(this.measureElementTextNodeSpans(elm).spans[0].box.w);\n      elm.style.setProperty(\"width\", `${elementWidth - ellipsisWidth}px`);\n      elm.textContent = normalizedText;\n      const truncatedSpans = this.measureElementTextNodeSpans(elm, {\n        shouldTruncateToFirstLine: true\n      }).spans;\n      const lastSpan = truncatedSpans[truncatedSpans.length - 1];\n      truncatedSpans.push({\n        text: \"\\u2026\",\n        box: {\n          x: Math.min(lastSpan.box.x + lastSpan.box.w, opts.width - opts.padding - ellipsisWidth),\n          y: lastSpan.box.y,\n          w: ellipsisWidth,\n          h: lastSpan.box.h\n        }\n      });\n      return truncatedSpans;\n    }\n    elm.remove();\n    return spans;\n  }\n}\n\n//# sourceMappingURL=TextManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9UZXh0TWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsb0NBQW9DLElBQUk7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnREFBZ0Q7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsYUFBYTtBQUNuRDtBQUNBLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQSw0Q0FBNEMsZ0NBQWdDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsNkJBQTZCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvVGV4dE1hbmFnZXIubWpzP2RlYjkiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZml4TmV3TGluZXMgPSAvXFxyP1xcbnxcXHIvZztcbmZ1bmN0aW9uIG5vcm1hbGl6ZVRleHRGb3JEb20odGV4dCkge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKGZpeE5ld0xpbmVzLCBcIlxcblwiKS5zcGxpdChcIlxcblwiKS5tYXAoKHgpID0+IHggfHwgXCIgXCIpLmpvaW4oXCJcXG5cIik7XG59XG5jb25zdCB0ZXh0QWxpZ25tZW50c0Zvckx0ciA9IHtcbiAgc3RhcnQ6IFwibGVmdFwiLFxuICBcInN0YXJ0LWxlZ2FjeVwiOiBcImxlZnRcIixcbiAgbWlkZGxlOiBcImNlbnRlclwiLFxuICBcIm1pZGRsZS1sZWdhY3lcIjogXCJjZW50ZXJcIixcbiAgZW5kOiBcInJpZ2h0XCIsXG4gIFwiZW5kLWxlZ2FjeVwiOiBcInJpZ2h0XCJcbn07XG5jb25zdCBzcGFjZUNoYXJhY3RlclJlZ2V4ID0gL1xccy87XG5jbGFzcyBUZXh0TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZWRpdG9yLmdldENvbnRhaW5lcigpO1xuICAgIGNvbnN0IGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZWxtLmNsYXNzTGlzdC5hZGQoXCJ0bC10ZXh0XCIpO1xuICAgIGVsbS5jbGFzc0xpc3QuYWRkKFwidGwtdGV4dC1tZWFzdXJlXCIpO1xuICAgIGVsbS50YWJJbmRleCA9IC0xO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbG0pO1xuICAgIHRoaXMuYmFzZUVsbSA9IGVsbTtcbiAgICBlZGl0b3IuZGlzcG9zYWJsZXMuYWRkKCgpID0+IHtcbiAgICAgIGVsbS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuICBiYXNlRWxtO1xuICBtZWFzdXJlVGV4dCh0ZXh0VG9NZWFzdXJlLCBvcHRzKSB7XG4gICAgY29uc3QgZWxtID0gdGhpcy5iYXNlRWxtPy5jbG9uZU5vZGUoKTtcbiAgICB0aGlzLmJhc2VFbG0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxtKTtcbiAgICBlbG0uc2V0QXR0cmlidXRlKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJ1bmljb2RlLWJpZGlcIiwgXCJwbGFpbnRleHRcIik7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZm9udC1mYW1pbHlcIiwgb3B0cy5mb250RmFtaWx5KTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJmb250LXN0eWxlXCIsIG9wdHMuZm9udFN0eWxlKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJmb250LXdlaWdodFwiLCBvcHRzLmZvbnRXZWlnaHQpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImZvbnQtc2l6ZVwiLCBvcHRzLmZvbnRTaXplICsgXCJweFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJsaW5lLWhlaWdodFwiLCBvcHRzLmxpbmVIZWlnaHQgKiBvcHRzLmZvbnRTaXplICsgXCJweFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJtYXgtd2lkdGhcIiwgb3B0cy5tYXhXaWR0aCA9PT0gbnVsbCA/IG51bGwgOiBvcHRzLm1heFdpZHRoICsgXCJweFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJtaW4td2lkdGhcIiwgb3B0cy5taW5XaWR0aCA9PT0gbnVsbCA/IG51bGwgOiBvcHRzLm1pbldpZHRoICsgXCJweFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJwYWRkaW5nXCIsIG9wdHMucGFkZGluZyk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgXCJvdmVyZmxvdy13cmFwXCIsXG4gICAgICBvcHRzLmRpc2FibGVPdmVyZmxvd1dyYXBCcmVha2luZyA/IFwibm9ybWFsXCIgOiBcImJyZWFrLXdvcmRcIlxuICAgICk7XG4gICAgZWxtLnRleHRDb250ZW50ID0gbm9ybWFsaXplVGV4dEZvckRvbSh0ZXh0VG9NZWFzdXJlKTtcbiAgICBjb25zdCBzY3JvbGxXaWR0aCA9IGVsbS5zY3JvbGxXaWR0aDtcbiAgICBjb25zdCByZWN0ID0gZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGVsbS5yZW1vdmUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3OiByZWN0LndpZHRoLFxuICAgICAgaDogcmVjdC5oZWlnaHQsXG4gICAgICBzY3JvbGxXaWR0aFxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGh0bWwgZWxlbWVudCwgbWVhc3VyZSB0aGUgcG9zaXRpb24gb2YgZWFjaCBzcGFuIG9mIHVuYnJva2VuXG4gICAqIHdvcmQvd2hpdGUtc3BhY2UgY2hhcmFjdGVycyB3aXRoaW4gYW55IHRleHQgbm9kZXMgaXQgY29udGFpbnMuXG4gICAqL1xuICBtZWFzdXJlRWxlbWVudFRleHROb2RlU3BhbnMoZWxlbWVudCwgeyBzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3Qgc3BhbnMgPSBbXTtcbiAgICBjb25zdCBlbG1Cb3VuZHMgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IG9mZnNldFggPSAtZWxtQm91bmRzLmxlZnQ7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IC1lbG1Cb3VuZHMudG9wO1xuICAgIGNvbnN0IHJhbmdlID0gbmV3IFJhbmdlKCk7XG4gICAgY29uc3QgdGV4dE5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbMF07XG4gICAgbGV0IGlkeCA9IDA7XG4gICAgbGV0IGN1cnJlbnRTcGFuID0gbnVsbDtcbiAgICBsZXQgcHJldkNoYXJXYXNTcGFjZUNoYXJhY3RlciA9IG51bGw7XG4gICAgbGV0IHByZXZDaGFyVG9wID0gMDtcbiAgICBsZXQgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdCA9IDA7XG4gICAgbGV0IGRpZFRydW5jYXRlID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2YgZWxlbWVudC5jaGlsZE5vZGVzKSB7XG4gICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkgY29udGludWU7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgY2hpbGROb2RlLnRleHRDb250ZW50ID8/IFwiXCIpIHtcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGUsIGlkeCk7XG4gICAgICAgIHJhbmdlLnNldEVuZCh0ZXh0Tm9kZSwgaWR4ICsgY2hhci5sZW5ndGgpO1xuICAgICAgICBjb25zdCByZWN0cyA9IHJhbmdlLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGNvbnN0IHJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdG9wID0gcmVjdC50b3AgKyBvZmZzZXRZO1xuICAgICAgICBjb25zdCBsZWZ0ID0gcmVjdC5sZWZ0ICsgb2Zmc2V0WDtcbiAgICAgICAgY29uc3QgcmlnaHQgPSByZWN0LnJpZ2h0ICsgb2Zmc2V0WDtcbiAgICAgICAgY29uc3QgaXNSVEwgPSBsZWZ0IDwgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdDtcbiAgICAgICAgY29uc3QgaXNTcGFjZUNoYXJhY3RlciA9IHNwYWNlQ2hhcmFjdGVyUmVnZXgudGVzdChjaGFyKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIElmIHdlJ3JlIGF0IGEgd29yZCBib3VuZGFyeS4uLlxuICAgICAgICAgIGlzU3BhY2VDaGFyYWN0ZXIgIT09IHByZXZDaGFyV2FzU3BhY2VDaGFyYWN0ZXIgfHwgLy8gLi4ub3Igd2UncmUgb24gYSBkaWZmZXJlbnQgbGluZS4uLlxuICAgICAgICAgIHRvcCAhPT0gcHJldkNoYXJUb3AgfHwgLy8gLi4ub3Igd2UncmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0ZXh0IGFuZCBoYXZlbid0IGNyZWF0ZWQgYSBzcGFuIHlldC4uLlxuICAgICAgICAgICFjdXJyZW50U3BhblxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lICYmIHRvcCAhPT0gcHJldkNoYXJUb3ApIHtcbiAgICAgICAgICAgICAgZGlkVHJ1bmNhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwYW5zLnB1c2goY3VycmVudFNwYW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50U3BhbiA9IHtcbiAgICAgICAgICAgIGJveDogeyB4OiBsZWZ0LCB5OiB0b3AsIHc6IHJlY3Qud2lkdGgsIGg6IHJlY3QuaGVpZ2h0IH0sXG4gICAgICAgICAgICB0ZXh0OiBjaGFyXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwcmV2Q2hhckxlZnRGb3JSVExUZXN0ID0gbGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNSVEwpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLmJveC54ID0gbGVmdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFNwYW4uYm94LncgPSBpc1JUTCA/IGN1cnJlbnRTcGFuLmJveC53ICsgcmVjdC53aWR0aCA6IHJpZ2h0IC0gY3VycmVudFNwYW4uYm94Lng7XG4gICAgICAgICAgY3VycmVudFNwYW4udGV4dCArPSBjaGFyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcHJldkNoYXJXYXNTcGFjZUNoYXJhY3RlciA9IGlzU3BhY2VDaGFyYWN0ZXI7XG4gICAgICAgIHByZXZDaGFyVG9wID0gdG9wO1xuICAgICAgICBpZHggKz0gY2hhci5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgc3BhbnMucHVzaChjdXJyZW50U3Bhbik7XG4gICAgfVxuICAgIHJldHVybiB7IHNwYW5zLCBkaWRUcnVuY2F0ZSB9O1xuICB9XG4gIC8qKlxuICAgKiBNZWFzdXJlIHRleHQgaW50byBpbmRpdmlkdWFsIHNwYW5zLiBTcGFucyBhcmUgY3JlYXRlZCBieSByZW5kZXJpbmcgdGhlXG4gICAqIHRleHQsIHRoZW4gZGl2aWRpbmcgaXQgdXAgYWNjb3JkaW5nIHRvIGxpbmUgYnJlYWtzIGFuZCB3b3JkIGJvdW5kYXJpZXMuXG4gICAqXG4gICAqIEl0IHdvcmtzIGJ5IGhhdmluZyB0aGUgYnJvd3NlciByZW5kZXIgdGhlIHRleHQsIHRoZW4gbWVhc3VyaW5nIHRoZVxuICAgKiBwb3NpdGlvbiBvZiBlYWNoIGNoYXJhY3Rlci4gWW91IGNhbiB1c2UgdGhpcyB0byByZXBsaWNhdGUgdGhlIHRleHQtbGF5b3V0XG4gICAqIGFsZ29yaXRobSBvZiB0aGUgY3VycmVudCBicm93c2VyIGluIGUuZy4gYW4gU1ZHIGV4cG9ydC5cbiAgICovXG4gIG1lYXN1cmVUZXh0U3BhbnModGV4dFRvTWVhc3VyZSwgb3B0cykge1xuICAgIGlmICh0ZXh0VG9NZWFzdXJlID09PSBcIlwiKSByZXR1cm4gW107XG4gICAgY29uc3QgZWxtID0gdGhpcy5iYXNlRWxtPy5jbG9uZU5vZGUoKTtcbiAgICB0aGlzLmJhc2VFbG0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxtKTtcbiAgICBjb25zdCBlbGVtZW50V2lkdGggPSBNYXRoLmNlaWwob3B0cy53aWR0aCAtIG9wdHMucGFkZGluZyAqIDIpO1xuICAgIGVsbS5zZXRBdHRyaWJ1dGUoXCJkaXJcIiwgXCJhdXRvXCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcInVuaWNvZGUtYmlkaVwiLCBcInBsYWludGV4dFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJ3aWR0aFwiLCBgJHtlbGVtZW50V2lkdGh9cHhgKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIiwgXCJtaW4tY29udGVudFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJmb250LXNpemVcIiwgYCR7b3B0cy5mb250U2l6ZX1weGApO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImZvbnQtZmFtaWx5XCIsIG9wdHMuZm9udEZhbWlseSk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZm9udC13ZWlnaHRcIiwgb3B0cy5mb250V2VpZ2h0KTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJsaW5lLWhlaWdodFwiLCBgJHtvcHRzLmxpbmVIZWlnaHQgKiBvcHRzLmZvbnRTaXplfXB4YCk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwidGV4dC1hbGlnblwiLCB0ZXh0QWxpZ25tZW50c0Zvckx0cltvcHRzLnRleHRBbGlnbl0pO1xuICAgIGNvbnN0IHNob3VsZFRydW5jYXRlVG9GaXJzdExpbmUgPSBvcHRzLm92ZXJmbG93ID09PSBcInRydW5jYXRlLWVsbGlwc2lzXCIgfHwgb3B0cy5vdmVyZmxvdyA9PT0gXCJ0cnVuY2F0ZS1jbGlwXCI7XG4gICAgaWYgKHNob3VsZFRydW5jYXRlVG9GaXJzdExpbmUpIHtcbiAgICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcIm92ZXJmbG93LXdyYXBcIiwgXCJhbnl3aGVyZVwiKTtcbiAgICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcIndvcmQtYnJlYWtcIiwgXCJicmVhay1hbGxcIik7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRUZXh0ID0gbm9ybWFsaXplVGV4dEZvckRvbSh0ZXh0VG9NZWFzdXJlKTtcbiAgICBlbG0udGV4dENvbnRlbnQgPSBub3JtYWxpemVkVGV4dDtcbiAgICBjb25zdCB7IHNwYW5zLCBkaWRUcnVuY2F0ZSB9ID0gdGhpcy5tZWFzdXJlRWxlbWVudFRleHROb2RlU3BhbnMoZWxtLCB7XG4gICAgICBzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lXG4gICAgfSk7XG4gICAgaWYgKG9wdHMub3ZlcmZsb3cgPT09IFwidHJ1bmNhdGUtZWxsaXBzaXNcIiAmJiBkaWRUcnVuY2F0ZSkge1xuICAgICAgZWxtLnRleHRDb250ZW50ID0gXCJcXHUyMDI2XCI7XG4gICAgICBjb25zdCBlbGxpcHNpc1dpZHRoID0gTWF0aC5jZWlsKHRoaXMubWVhc3VyZUVsZW1lbnRUZXh0Tm9kZVNwYW5zKGVsbSkuc3BhbnNbMF0uYm94LncpO1xuICAgICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgYCR7ZWxlbWVudFdpZHRoIC0gZWxsaXBzaXNXaWR0aH1weGApO1xuICAgICAgZWxtLnRleHRDb250ZW50ID0gbm9ybWFsaXplZFRleHQ7XG4gICAgICBjb25zdCB0cnVuY2F0ZWRTcGFucyA9IHRoaXMubWVhc3VyZUVsZW1lbnRUZXh0Tm9kZVNwYW5zKGVsbSwge1xuICAgICAgICBzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lOiB0cnVlXG4gICAgICB9KS5zcGFucztcbiAgICAgIGNvbnN0IGxhc3RTcGFuID0gdHJ1bmNhdGVkU3BhbnNbdHJ1bmNhdGVkU3BhbnMubGVuZ3RoIC0gMV07XG4gICAgICB0cnVuY2F0ZWRTcGFucy5wdXNoKHtcbiAgICAgICAgdGV4dDogXCJcXHUyMDI2XCIsXG4gICAgICAgIGJveDoge1xuICAgICAgICAgIHg6IE1hdGgubWluKGxhc3RTcGFuLmJveC54ICsgbGFzdFNwYW4uYm94LncsIG9wdHMud2lkdGggLSBvcHRzLnBhZGRpbmcgLSBlbGxpcHNpc1dpZHRoKSxcbiAgICAgICAgICB5OiBsYXN0U3Bhbi5ib3gueSxcbiAgICAgICAgICB3OiBlbGxpcHNpc1dpZHRoLFxuICAgICAgICAgIGg6IGxhc3RTcGFuLmJveC5oXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydW5jYXRlZFNwYW5zO1xuICAgIH1cbiAgICBlbG0ucmVtb3ZlKCk7XG4gICAgcmV0dXJuIHNwYW5zO1xuICB9XG59XG5leHBvcnQge1xuICBUZXh0TWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRleHRNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TickManager: () => (/* binding */ TickManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _dispose_dec, _tick_dec, _init;\n\n\nconst throttleToNextFrame = typeof process !== \"undefined\" && \"development\" === \"test\" ? (\n  // At test time we should use actual raf and not throttle, because throttle was set up to evaluate immediately during tests, which causes stack overflow\n  // for the tick manager since it sets up a raf loop.\n  (0)\n) : _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.throttleToNextFrame;\n_tick_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind], _dispose_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind];\nclass TickManager {\n  constructor(editor) {\n    this.editor = editor;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"cancelRaf\");\n    __publicField(this, \"isPaused\", true);\n    __publicField(this, \"now\", 0);\n    __publicField(this, \"prevPoint\", new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec());\n    this.editor.disposables.add(this.dispose);\n    this.start();\n  }\n  start() {\n    this.isPaused = false;\n    this.cancelRaf?.();\n    this.cancelRaf = throttleToNextFrame(this.tick);\n    this.now = Date.now();\n  }\n  tick() {\n    if (this.isPaused) {\n      return;\n    }\n    const now = Date.now();\n    const elapsed = now - this.now;\n    this.now = now;\n    this.updatePointerVelocity(elapsed);\n    this.editor.emit(\"frame\", elapsed);\n    this.editor.emit(\"tick\", elapsed);\n    this.cancelRaf = throttleToNextFrame(this.tick);\n  }\n  dispose() {\n    this.isPaused = true;\n    this.cancelRaf?.();\n  }\n  updatePointerVelocity(elapsed) {\n    const {\n      prevPoint,\n      editor: {\n        inputs: { currentScreenPoint, pointerVelocity }\n      }\n    } = this;\n    if (elapsed === 0) return;\n    const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Sub(currentScreenPoint, prevPoint);\n    this.prevPoint = currentScreenPoint.clone();\n    const length = delta.len();\n    const direction = length ? delta.div(length) : new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, 0);\n    const next = pointerVelocity.clone().lrp(direction.mul(length / elapsed), 0.5);\n    if (Math.abs(next.x) < 0.01) next.x = 0;\n    if (Math.abs(next.y) < 0.01) next.y = 0;\n    if (!pointerVelocity.equals(next)) {\n      this.editor.inputs.pointerVelocity = next;\n    }\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"tick\", _tick_dec, TickManager);\n__decorateElement(_init, 1, \"dispose\", _dispose_dec, TickManager);\n__decoratorMetadata(_init, TickManager);\n\n//# sourceMappingURL=TickManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9UaWNrTWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLHdKQUF3SjtBQUN6TjtBQUNBO0FBQ0Esa0VBQWtFLE9BQU87QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEhBQTBIO0FBQzFIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0NBQXNDLFFBQVE7QUFDOUMsK0NBQStDO0FBQy9DO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRiwrQkFBK0I7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDa0Y7QUFDbkM7QUFDL0MsOERBQThELGFBQW9CO0FBQ2xGO0FBQ0E7QUFDQSxHQUFHLENBR0E7QUFDSCxJQUFJLDhEQUFvQjtBQUN4QixhQUFhLCtDQUFJLG1CQUFtQiwrQ0FBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxvREFBRztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esa0JBQWtCLG9EQUFHO0FBQ3JCO0FBQ0E7QUFDQSx1REFBdUQsb0RBQUc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvVGlja01hbmFnZXIubWpzP2NlNjMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19rbm93blN5bWJvbCA9IChuYW1lLCBzeW1ib2wpID0+IChzeW1ib2wgPSBTeW1ib2xbbmFtZV0pID8gc3ltYm9sIDogU3ltYm9sLmZvcihcIlN5bWJvbC5cIiArIG5hbWUpO1xudmFyIF9fdHlwZUVycm9yID0gKG1zZykgPT4ge1xuICB0aHJvdyBUeXBlRXJyb3IobXNnKTtcbn07XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG52YXIgX19kZWNvcmF0b3JTdGFydCA9IChiYXNlKSA9PiBbLCAsICwgX19jcmVhdGUoYmFzZT8uW19fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKV0gPz8gbnVsbCldO1xudmFyIF9fZGVjb3JhdG9yU3RyaW5ncyA9IFtcImNsYXNzXCIsIFwibWV0aG9kXCIsIFwiZ2V0dGVyXCIsIFwic2V0dGVyXCIsIFwiYWNjZXNzb3JcIiwgXCJmaWVsZFwiLCBcInZhbHVlXCIsIFwiZ2V0XCIsIFwic2V0XCJdO1xudmFyIF9fZXhwZWN0Rm4gPSAoZm4pID0+IGZuICE9PSB2b2lkIDAgJiYgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIgPyBfX3R5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpIDogZm47XG52YXIgX19kZWNvcmF0b3JDb250ZXh0ID0gKGtpbmQsIG5hbWUsIGRvbmUsIG1ldGFkYXRhLCBmbnMpID0+ICh7IGtpbmQ6IF9fZGVjb3JhdG9yU3RyaW5nc1traW5kXSwgbmFtZSwgbWV0YWRhdGEsIGFkZEluaXRpYWxpemVyOiAoZm4pID0+IGRvbmUuXyA/IF9fdHlwZUVycm9yKFwiQWxyZWFkeSBpbml0aWFsaXplZFwiKSA6IGZucy5wdXNoKF9fZXhwZWN0Rm4oZm4gfHwgbnVsbCkpIH0pO1xudmFyIF9fZGVjb3JhdG9yTWV0YWRhdGEgPSAoYXJyYXksIHRhcmdldCkgPT4gX19kZWZOb3JtYWxQcm9wKHRhcmdldCwgX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpLCBhcnJheVszXSk7XG52YXIgX19ydW5Jbml0aWFsaXplcnMgPSAoYXJyYXksIGZsYWdzLCBzZWxmLCB2YWx1ZSkgPT4ge1xuICBmb3IgKHZhciBpID0gMCwgZm5zID0gYXJyYXlbZmxhZ3MgPj4gMV0sIG4gPSBmbnMgJiYgZm5zLmxlbmd0aDsgaSA8IG47IGkrKykgZmxhZ3MgJiAxID8gZm5zW2ldLmNhbGwoc2VsZikgOiB2YWx1ZSA9IGZuc1tpXS5jYWxsKHNlbGYsIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfX2RlY29yYXRlRWxlbWVudCA9IChhcnJheSwgZmxhZ3MsIG5hbWUsIGRlY29yYXRvcnMsIHRhcmdldCwgZXh0cmEpID0+IHtcbiAgdmFyIGZuLCBpdCwgZG9uZSwgY3R4LCBhY2Nlc3MsIGsgPSBmbGFncyAmIDcsIHMgPSAhIShmbGFncyAmIDgpLCBwID0gISEoZmxhZ3MgJiAxNik7XG4gIHZhciBqID0gayA+IDMgPyBhcnJheS5sZW5ndGggKyAxIDogayA/IHMgPyAxIDogMiA6IDAsIGtleSA9IF9fZGVjb3JhdG9yU3RyaW5nc1trICsgNV07XG4gIHZhciBpbml0aWFsaXplcnMgPSBrID4gMyAmJiAoYXJyYXlbaiAtIDFdID0gW10pLCBleHRyYUluaXRpYWxpemVycyA9IGFycmF5W2pdIHx8IChhcnJheVtqXSA9IFtdKTtcbiAgdmFyIGRlc2MgPSBrICYmICghcCAmJiAhcyAmJiAodGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZSksIGsgPCA1ICYmIChrID4gMyB8fCAhcCkgJiYgX19nZXRPd25Qcm9wRGVzYyhrIDwgNCA/IHRhcmdldCA6IHsgZ2V0IFtuYW1lXSgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIGV4dHJhKTtcbiAgfSwgc2V0IFtuYW1lXSh4KSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZVNldCh0aGlzLCBleHRyYSwgeCk7XG4gIH0gfSwgbmFtZSkpO1xuICBrID8gcCAmJiBrIDwgNCAmJiBfX25hbWUoZXh0cmEsIChrID4gMiA/IFwic2V0IFwiIDogayA+IDEgPyBcImdldCBcIiA6IFwiXCIpICsgbmFtZSkgOiBfX25hbWUodGFyZ2V0LCBuYW1lKTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjdHggPSBfX2RlY29yYXRvckNvbnRleHQoaywgbmFtZSwgZG9uZSA9IHt9LCBhcnJheVszXSwgZXh0cmFJbml0aWFsaXplcnMpO1xuICAgIGlmIChrKSB7XG4gICAgICBjdHguc3RhdGljID0gcywgY3R4LnByaXZhdGUgPSBwLCBhY2Nlc3MgPSBjdHguYWNjZXNzID0geyBoYXM6IHAgPyAoeCkgPT4gX19wcml2YXRlSW4odGFyZ2V0LCB4KSA6ICh4KSA9PiBuYW1lIGluIHggfTtcbiAgICAgIGlmIChrIF4gMykgYWNjZXNzLmdldCA9IHAgPyAoeCkgPT4gKGsgXiAxID8gX19wcml2YXRlR2V0IDogX19wcml2YXRlTWV0aG9kKSh4LCB0YXJnZXQsIGsgXiA0ID8gZXh0cmEgOiBkZXNjLmdldCkgOiAoeCkgPT4geFtuYW1lXTtcbiAgICAgIGlmIChrID4gMikgYWNjZXNzLnNldCA9IHAgPyAoeCwgeSkgPT4gX19wcml2YXRlU2V0KHgsIHRhcmdldCwgeSwgayBeIDQgPyBleHRyYSA6IGRlc2Muc2V0KSA6ICh4LCB5KSA9PiB4W25hbWVdID0geTtcbiAgICB9XG4gICAgaXQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoayA/IGsgPCA0ID8gcCA/IGV4dHJhIDogZGVzY1trZXldIDogayA+IDQgPyB2b2lkIDAgOiB7IGdldDogZGVzYy5nZXQsIHNldDogZGVzYy5zZXQgfSA6IHRhcmdldCwgY3R4KSwgZG9uZS5fID0gMTtcbiAgICBpZiAoayBeIDQgfHwgaXQgPT09IHZvaWQgMCkgX19leHBlY3RGbihpdCkgJiYgKGsgPiA0ID8gaW5pdGlhbGl6ZXJzLnVuc2hpZnQoaXQpIDogayA/IHAgPyBleHRyYSA9IGl0IDogZGVzY1trZXldID0gaXQgOiB0YXJnZXQgPSBpdCk7XG4gICAgZWxzZSBpZiAodHlwZW9mIGl0ICE9PSBcIm9iamVjdFwiIHx8IGl0ID09PSBudWxsKSBfX3R5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcbiAgICBlbHNlIF9fZXhwZWN0Rm4oZm4gPSBpdC5nZXQpICYmIChkZXNjLmdldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LnNldCkgJiYgKGRlc2Muc2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuaW5pdCkgJiYgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoZm4pO1xuICB9XG4gIHJldHVybiBrIHx8IF9fZGVjb3JhdG9yTWV0YWRhdGEoYXJyYXksIHRhcmdldCksIGRlc2MgJiYgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgZGVzYyksIHAgPyBrIF4gNCA/IGV4dHJhIDogZGVzYyA6IHRhcmdldDtcbn07XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiBtZW1iZXIuaGFzKG9iaikgfHwgX190eXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xudmFyIF9fcHJpdmF0ZUluID0gKG1lbWJlciwgb2JqKSA9PiBPYmplY3Qob2JqKSAhPT0gb2JqID8gX190eXBlRXJyb3IoJ0Nhbm5vdCB1c2UgdGhlIFwiaW5cIiBvcGVyYXRvciBvbiB0aGlzIHZhbHVlJykgOiBtZW1iZXIuaGFzKG9iaik7XG52YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpLCBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopKTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIiksIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKSwgdmFsdWUpO1xudmFyIF9fcHJpdmF0ZU1ldGhvZCA9IChvYmosIG1lbWJlciwgbWV0aG9kKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJhY2Nlc3MgcHJpdmF0ZSBtZXRob2RcIiksIG1ldGhvZCk7XG52YXIgX2Rpc3Bvc2VfZGVjLCBfdGlja19kZWMsIF9pbml0O1xuaW1wb3J0IHsgdGhyb3R0bGVUb05leHRGcmFtZSBhcyBfdGhyb3R0bGVUb05leHRGcmFtZSwgYmluZCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5jb25zdCB0aHJvdHRsZVRvTmV4dEZyYW1lID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiID8gKFxuICAvLyBBdCB0ZXN0IHRpbWUgd2Ugc2hvdWxkIHVzZSBhY3R1YWwgcmFmIGFuZCBub3QgdGhyb3R0bGUsIGJlY2F1c2UgdGhyb3R0bGUgd2FzIHNldCB1cCB0byBldmFsdWF0ZSBpbW1lZGlhdGVseSBkdXJpbmcgdGVzdHMsIHdoaWNoIGNhdXNlcyBzdGFjayBvdmVyZmxvd1xuICAvLyBmb3IgdGhlIHRpY2sgbWFuYWdlciBzaW5jZSBpdCBzZXRzIHVwIGEgcmFmIGxvb3AuXG4gIChmdW5jdGlvbiBtb2NrVGhyb3R0bGUoY2IpIHtcbiAgICBjb25zdCBmcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgcmV0dXJuICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcbiAgfSlcbikgOiBfdGhyb3R0bGVUb05leHRGcmFtZTtcbl90aWNrX2RlYyA9IFtiaW5kXSwgX2Rpc3Bvc2VfZGVjID0gW2JpbmRdO1xuY2xhc3MgVGlja01hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICBfX3J1bkluaXRpYWxpemVycyhfaW5pdCwgNSwgdGhpcyk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhbmNlbFJhZlwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaXNQYXVzZWRcIiwgdHJ1ZSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm5vd1wiLCAwKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicHJldlBvaW50XCIsIG5ldyBWZWMoKSk7XG4gICAgdGhpcy5lZGl0b3IuZGlzcG9zYWJsZXMuYWRkKHRoaXMuZGlzcG9zZSk7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFJhZj8uKCk7XG4gICAgdGhpcy5jYW5jZWxSYWYgPSB0aHJvdHRsZVRvTmV4dEZyYW1lKHRoaXMudGljayk7XG4gICAgdGhpcy5ub3cgPSBEYXRlLm5vdygpO1xuICB9XG4gIHRpY2soKSB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbGFwc2VkID0gbm93IC0gdGhpcy5ub3c7XG4gICAgdGhpcy5ub3cgPSBub3c7XG4gICAgdGhpcy51cGRhdGVQb2ludGVyVmVsb2NpdHkoZWxhcHNlZCk7XG4gICAgdGhpcy5lZGl0b3IuZW1pdChcImZyYW1lXCIsIGVsYXBzZWQpO1xuICAgIHRoaXMuZWRpdG9yLmVtaXQoXCJ0aWNrXCIsIGVsYXBzZWQpO1xuICAgIHRoaXMuY2FuY2VsUmFmID0gdGhyb3R0bGVUb05leHRGcmFtZSh0aGlzLnRpY2spO1xuICB9XG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5jYW5jZWxSYWY/LigpO1xuICB9XG4gIHVwZGF0ZVBvaW50ZXJWZWxvY2l0eShlbGFwc2VkKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHJldlBvaW50LFxuICAgICAgZWRpdG9yOiB7XG4gICAgICAgIGlucHV0czogeyBjdXJyZW50U2NyZWVuUG9pbnQsIHBvaW50ZXJWZWxvY2l0eSB9XG4gICAgICB9XG4gICAgfSA9IHRoaXM7XG4gICAgaWYgKGVsYXBzZWQgPT09IDApIHJldHVybjtcbiAgICBjb25zdCBkZWx0YSA9IFZlYy5TdWIoY3VycmVudFNjcmVlblBvaW50LCBwcmV2UG9pbnQpO1xuICAgIHRoaXMucHJldlBvaW50ID0gY3VycmVudFNjcmVlblBvaW50LmNsb25lKCk7XG4gICAgY29uc3QgbGVuZ3RoID0gZGVsdGEubGVuKCk7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gbGVuZ3RoID8gZGVsdGEuZGl2KGxlbmd0aCkgOiBuZXcgVmVjKDAsIDApO1xuICAgIGNvbnN0IG5leHQgPSBwb2ludGVyVmVsb2NpdHkuY2xvbmUoKS5scnAoZGlyZWN0aW9uLm11bChsZW5ndGggLyBlbGFwc2VkKSwgMC41KTtcbiAgICBpZiAoTWF0aC5hYnMobmV4dC54KSA8IDAuMDEpIG5leHQueCA9IDA7XG4gICAgaWYgKE1hdGguYWJzKG5leHQueSkgPCAwLjAxKSBuZXh0LnkgPSAwO1xuICAgIGlmICghcG9pbnRlclZlbG9jaXR5LmVxdWFscyhuZXh0KSkge1xuICAgICAgdGhpcy5lZGl0b3IuaW5wdXRzLnBvaW50ZXJWZWxvY2l0eSA9IG5leHQ7XG4gICAgfVxuICB9XG59XG5faW5pdCA9IF9fZGVjb3JhdG9yU3RhcnQobnVsbCk7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJ0aWNrXCIsIF90aWNrX2RlYywgVGlja01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZGlzcG9zZVwiLCBfZGlzcG9zZV9kZWMsIFRpY2tNYW5hZ2VyKTtcbl9fZGVjb3JhdG9yTWV0YWRhdGEoX2luaXQsIFRpY2tNYW5hZ2VyKTtcbmV4cG9ydCB7XG4gIFRpY2tNYW5hZ2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlja01hbmFnZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserPreferencesManager: () => (/* binding */ UserPreferencesManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _getIsPasteAtCursorMode_dec, _getIsDynamicResizeMode_dec, _getIsWrapMode_dec, _getIsSnapMode_dec, _getColor_dec, _getLocale_dec, _getName_dec, _getId_dec, _getAnimationSpeed_dec, _getEdgeScrollSpeed_dec, _getIsDarkMode_dec, _getUserPreferences_dec, _init;\n\n\n_getUserPreferences_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsDarkMode_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getEdgeScrollSpeed_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getAnimationSpeed_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getId_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getName_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getLocale_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getColor_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsSnapMode_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsWrapMode_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsDynamicResizeMode_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed], _getIsPasteAtCursorMode_dec = [_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed];\nclass UserPreferencesManager {\n  constructor(user, inferDarkMode) {\n    this.user = user;\n    this.inferDarkMode = inferDarkMode;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"systemColorScheme\", (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"systemColorScheme\", \"light\"));\n    if (typeof window === \"undefined\" || !(\"matchMedia\" in window)) return;\n    const darkModeMediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    if (darkModeMediaQuery?.matches) {\n      this.systemColorScheme.set(\"dark\");\n    }\n    darkModeMediaQuery?.addEventListener(\"change\", (e) => {\n      if (e.matches) {\n        this.systemColorScheme.set(\"dark\");\n      } else {\n        this.systemColorScheme.set(\"light\");\n      }\n    });\n  }\n  updateUserPreferences(userPreferences) {\n    this.user.setUserPreferences({\n      ...this.user.userPreferences.get(),\n      ...userPreferences\n    });\n  }\n  getUserPreferences() {\n    return {\n      id: this.getId(),\n      name: this.getName(),\n      locale: this.getLocale(),\n      color: this.getColor(),\n      animationSpeed: this.getAnimationSpeed(),\n      isSnapMode: this.getIsSnapMode(),\n      colorScheme: this.user.userPreferences.get().colorScheme,\n      isDarkMode: this.getIsDarkMode(),\n      isWrapMode: this.getIsWrapMode(),\n      isDynamicResizeMode: this.getIsDynamicResizeMode()\n    };\n  }\n  getIsDarkMode() {\n    switch (this.user.userPreferences.get().colorScheme) {\n      case \"dark\":\n        return true;\n      case \"light\":\n        return false;\n      case \"system\":\n        return this.systemColorScheme.get() === \"dark\";\n      default:\n        return this.inferDarkMode ? this.systemColorScheme.get() === \"dark\" : false;\n    }\n  }\n  getEdgeScrollSpeed() {\n    return this.user.userPreferences.get().edgeScrollSpeed ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.edgeScrollSpeed;\n  }\n  getAnimationSpeed() {\n    return this.user.userPreferences.get().animationSpeed ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.animationSpeed;\n  }\n  getId() {\n    return this.user.userPreferences.get().id;\n  }\n  getName() {\n    return this.user.userPreferences.get().name ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.name;\n  }\n  getLocale() {\n    return this.user.userPreferences.get().locale ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.locale;\n  }\n  getColor() {\n    return this.user.userPreferences.get().color ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.color;\n  }\n  getIsSnapMode() {\n    return this.user.userPreferences.get().isSnapMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isSnapMode;\n  }\n  getIsWrapMode() {\n    return this.user.userPreferences.get().isWrapMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isWrapMode;\n  }\n  getIsDynamicResizeMode() {\n    return this.user.userPreferences.get().isDynamicSizeMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isDynamicSizeMode;\n  }\n  getIsPasteAtCursorMode() {\n    return this.user.userPreferences.get().isPasteAtCursorMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isPasteAtCursorMode;\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"getUserPreferences\", _getUserPreferences_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getIsDarkMode\", _getIsDarkMode_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getEdgeScrollSpeed\", _getEdgeScrollSpeed_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getAnimationSpeed\", _getAnimationSpeed_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getId\", _getId_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getName\", _getName_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getLocale\", _getLocale_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getColor\", _getColor_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getIsSnapMode\", _getIsSnapMode_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getIsWrapMode\", _getIsWrapMode_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getIsDynamicResizeMode\", _getIsDynamicResizeMode_dec, UserPreferencesManager);\n__decorateElement(_init, 1, \"getIsPasteAtCursorMode\", _getIsPasteAtCursorMode_dec, UserPreferencesManager);\n__decoratorMetadata(_init, UserPreferencesManager);\n\n//# sourceMappingURL=UserPreferencesManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0ksNERBQTRELDJCQUEyQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsd0pBQXdKO0FBQ3pOO0FBQ0E7QUFDQSxrRUFBa0UsT0FBTztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwSEFBMEg7QUFDMUg7QUFDQSxHQUFHO0FBQ0g7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QywrQ0FBK0M7QUFDL0M7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLCtCQUErQjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMrQztBQUM2QjtBQUM1RSwyQkFBMkIsbURBQVEseUJBQXlCLG1EQUFRLDhCQUE4QixtREFBUSw2QkFBNkIsbURBQVEsaUJBQWlCLG1EQUFRLG1CQUFtQixtREFBUSxxQkFBcUIsbURBQVEsb0JBQW9CLG1EQUFRLHlCQUF5QixtREFBUSx5QkFBeUIsbURBQVEsa0NBQWtDLG1EQUFRLGtDQUFrQyxtREFBUTtBQUNsWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLG1EQUFJO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGlGQUFzQjtBQUNwRjtBQUNBO0FBQ0EsNkRBQTZELGlGQUFzQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGlGQUFzQjtBQUN6RTtBQUNBO0FBQ0EscURBQXFELGlGQUFzQjtBQUMzRTtBQUNBO0FBQ0Esb0RBQW9ELGlGQUFzQjtBQUMxRTtBQUNBO0FBQ0EseURBQXlELGlGQUFzQjtBQUMvRTtBQUNBO0FBQ0EseURBQXlELGlGQUFzQjtBQUMvRTtBQUNBO0FBQ0EsZ0VBQWdFLGlGQUFzQjtBQUN0RjtBQUNBO0FBQ0Esa0VBQWtFLGlGQUFzQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL21hbmFnZXJzL1VzZXJQcmVmZXJlbmNlc01hbmFnZXIubWpzPzkyYjgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19rbm93blN5bWJvbCA9IChuYW1lLCBzeW1ib2wpID0+IChzeW1ib2wgPSBTeW1ib2xbbmFtZV0pID8gc3ltYm9sIDogU3ltYm9sLmZvcihcIlN5bWJvbC5cIiArIG5hbWUpO1xudmFyIF9fdHlwZUVycm9yID0gKG1zZykgPT4ge1xuICB0aHJvdyBUeXBlRXJyb3IobXNnKTtcbn07XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG52YXIgX19kZWNvcmF0b3JTdGFydCA9IChiYXNlKSA9PiBbLCAsICwgX19jcmVhdGUoYmFzZT8uW19fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKV0gPz8gbnVsbCldO1xudmFyIF9fZGVjb3JhdG9yU3RyaW5ncyA9IFtcImNsYXNzXCIsIFwibWV0aG9kXCIsIFwiZ2V0dGVyXCIsIFwic2V0dGVyXCIsIFwiYWNjZXNzb3JcIiwgXCJmaWVsZFwiLCBcInZhbHVlXCIsIFwiZ2V0XCIsIFwic2V0XCJdO1xudmFyIF9fZXhwZWN0Rm4gPSAoZm4pID0+IGZuICE9PSB2b2lkIDAgJiYgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIgPyBfX3R5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpIDogZm47XG52YXIgX19kZWNvcmF0b3JDb250ZXh0ID0gKGtpbmQsIG5hbWUsIGRvbmUsIG1ldGFkYXRhLCBmbnMpID0+ICh7IGtpbmQ6IF9fZGVjb3JhdG9yU3RyaW5nc1traW5kXSwgbmFtZSwgbWV0YWRhdGEsIGFkZEluaXRpYWxpemVyOiAoZm4pID0+IGRvbmUuXyA/IF9fdHlwZUVycm9yKFwiQWxyZWFkeSBpbml0aWFsaXplZFwiKSA6IGZucy5wdXNoKF9fZXhwZWN0Rm4oZm4gfHwgbnVsbCkpIH0pO1xudmFyIF9fZGVjb3JhdG9yTWV0YWRhdGEgPSAoYXJyYXksIHRhcmdldCkgPT4gX19kZWZOb3JtYWxQcm9wKHRhcmdldCwgX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpLCBhcnJheVszXSk7XG52YXIgX19ydW5Jbml0aWFsaXplcnMgPSAoYXJyYXksIGZsYWdzLCBzZWxmLCB2YWx1ZSkgPT4ge1xuICBmb3IgKHZhciBpID0gMCwgZm5zID0gYXJyYXlbZmxhZ3MgPj4gMV0sIG4gPSBmbnMgJiYgZm5zLmxlbmd0aDsgaSA8IG47IGkrKykgZmxhZ3MgJiAxID8gZm5zW2ldLmNhbGwoc2VsZikgOiB2YWx1ZSA9IGZuc1tpXS5jYWxsKHNlbGYsIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBfX2RlY29yYXRlRWxlbWVudCA9IChhcnJheSwgZmxhZ3MsIG5hbWUsIGRlY29yYXRvcnMsIHRhcmdldCwgZXh0cmEpID0+IHtcbiAgdmFyIGZuLCBpdCwgZG9uZSwgY3R4LCBhY2Nlc3MsIGsgPSBmbGFncyAmIDcsIHMgPSAhIShmbGFncyAmIDgpLCBwID0gISEoZmxhZ3MgJiAxNik7XG4gIHZhciBqID0gayA+IDMgPyBhcnJheS5sZW5ndGggKyAxIDogayA/IHMgPyAxIDogMiA6IDAsIGtleSA9IF9fZGVjb3JhdG9yU3RyaW5nc1trICsgNV07XG4gIHZhciBpbml0aWFsaXplcnMgPSBrID4gMyAmJiAoYXJyYXlbaiAtIDFdID0gW10pLCBleHRyYUluaXRpYWxpemVycyA9IGFycmF5W2pdIHx8IChhcnJheVtqXSA9IFtdKTtcbiAgdmFyIGRlc2MgPSBrICYmICghcCAmJiAhcyAmJiAodGFyZ2V0ID0gdGFyZ2V0LnByb3RvdHlwZSksIGsgPCA1ICYmIChrID4gMyB8fCAhcCkgJiYgX19nZXRPd25Qcm9wRGVzYyhrIDwgNCA/IHRhcmdldCA6IHsgZ2V0IFtuYW1lXSgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIGV4dHJhKTtcbiAgfSwgc2V0IFtuYW1lXSh4KSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZVNldCh0aGlzLCBleHRyYSwgeCk7XG4gIH0gfSwgbmFtZSkpO1xuICBrID8gcCAmJiBrIDwgNCAmJiBfX25hbWUoZXh0cmEsIChrID4gMiA/IFwic2V0IFwiIDogayA+IDEgPyBcImdldCBcIiA6IFwiXCIpICsgbmFtZSkgOiBfX25hbWUodGFyZ2V0LCBuYW1lKTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjdHggPSBfX2RlY29yYXRvckNvbnRleHQoaywgbmFtZSwgZG9uZSA9IHt9LCBhcnJheVszXSwgZXh0cmFJbml0aWFsaXplcnMpO1xuICAgIGlmIChrKSB7XG4gICAgICBjdHguc3RhdGljID0gcywgY3R4LnByaXZhdGUgPSBwLCBhY2Nlc3MgPSBjdHguYWNjZXNzID0geyBoYXM6IHAgPyAoeCkgPT4gX19wcml2YXRlSW4odGFyZ2V0LCB4KSA6ICh4KSA9PiBuYW1lIGluIHggfTtcbiAgICAgIGlmIChrIF4gMykgYWNjZXNzLmdldCA9IHAgPyAoeCkgPT4gKGsgXiAxID8gX19wcml2YXRlR2V0IDogX19wcml2YXRlTWV0aG9kKSh4LCB0YXJnZXQsIGsgXiA0ID8gZXh0cmEgOiBkZXNjLmdldCkgOiAoeCkgPT4geFtuYW1lXTtcbiAgICAgIGlmIChrID4gMikgYWNjZXNzLnNldCA9IHAgPyAoeCwgeSkgPT4gX19wcml2YXRlU2V0KHgsIHRhcmdldCwgeSwgayBeIDQgPyBleHRyYSA6IGRlc2Muc2V0KSA6ICh4LCB5KSA9PiB4W25hbWVdID0geTtcbiAgICB9XG4gICAgaXQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoayA/IGsgPCA0ID8gcCA/IGV4dHJhIDogZGVzY1trZXldIDogayA+IDQgPyB2b2lkIDAgOiB7IGdldDogZGVzYy5nZXQsIHNldDogZGVzYy5zZXQgfSA6IHRhcmdldCwgY3R4KSwgZG9uZS5fID0gMTtcbiAgICBpZiAoayBeIDQgfHwgaXQgPT09IHZvaWQgMCkgX19leHBlY3RGbihpdCkgJiYgKGsgPiA0ID8gaW5pdGlhbGl6ZXJzLnVuc2hpZnQoaXQpIDogayA/IHAgPyBleHRyYSA9IGl0IDogZGVzY1trZXldID0gaXQgOiB0YXJnZXQgPSBpdCk7XG4gICAgZWxzZSBpZiAodHlwZW9mIGl0ICE9PSBcIm9iamVjdFwiIHx8IGl0ID09PSBudWxsKSBfX3R5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcbiAgICBlbHNlIF9fZXhwZWN0Rm4oZm4gPSBpdC5nZXQpICYmIChkZXNjLmdldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LnNldCkgJiYgKGRlc2Muc2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuaW5pdCkgJiYgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoZm4pO1xuICB9XG4gIHJldHVybiBrIHx8IF9fZGVjb3JhdG9yTWV0YWRhdGEoYXJyYXksIHRhcmdldCksIGRlc2MgJiYgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgZGVzYyksIHAgPyBrIF4gNCA/IGV4dHJhIDogZGVzYyA6IHRhcmdldDtcbn07XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG52YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiBtZW1iZXIuaGFzKG9iaikgfHwgX190eXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xudmFyIF9fcHJpdmF0ZUluID0gKG1lbWJlciwgb2JqKSA9PiBPYmplY3Qob2JqKSAhPT0gb2JqID8gX190eXBlRXJyb3IoJ0Nhbm5vdCB1c2UgdGhlIFwiaW5cIiBvcGVyYXRvciBvbiB0aGlzIHZhbHVlJykgOiBtZW1iZXIuaGFzKG9iaik7XG52YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpLCBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopKTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIiksIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKSwgdmFsdWUpO1xudmFyIF9fcHJpdmF0ZU1ldGhvZCA9IChvYmosIG1lbWJlciwgbWV0aG9kKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJhY2Nlc3MgcHJpdmF0ZSBtZXRob2RcIiksIG1ldGhvZCk7XG52YXIgX2dldElzUGFzdGVBdEN1cnNvck1vZGVfZGVjLCBfZ2V0SXNEeW5hbWljUmVzaXplTW9kZV9kZWMsIF9nZXRJc1dyYXBNb2RlX2RlYywgX2dldElzU25hcE1vZGVfZGVjLCBfZ2V0Q29sb3JfZGVjLCBfZ2V0TG9jYWxlX2RlYywgX2dldE5hbWVfZGVjLCBfZ2V0SWRfZGVjLCBfZ2V0QW5pbWF0aW9uU3BlZWRfZGVjLCBfZ2V0RWRnZVNjcm9sbFNwZWVkX2RlYywgX2dldElzRGFya01vZGVfZGVjLCBfZ2V0VXNlclByZWZlcmVuY2VzX2RlYywgX2luaXQ7XG5pbXBvcnQgeyBhdG9tLCBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBkZWZhdWx0VXNlclByZWZlcmVuY2VzIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanNcIjtcbl9nZXRVc2VyUHJlZmVyZW5jZXNfZGVjID0gW2NvbXB1dGVkXSwgX2dldElzRGFya01vZGVfZGVjID0gW2NvbXB1dGVkXSwgX2dldEVkZ2VTY3JvbGxTcGVlZF9kZWMgPSBbY29tcHV0ZWRdLCBfZ2V0QW5pbWF0aW9uU3BlZWRfZGVjID0gW2NvbXB1dGVkXSwgX2dldElkX2RlYyA9IFtjb21wdXRlZF0sIF9nZXROYW1lX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRMb2NhbGVfZGVjID0gW2NvbXB1dGVkXSwgX2dldENvbG9yX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRJc1NuYXBNb2RlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRJc1dyYXBNb2RlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRJc0R5bmFtaWNSZXNpemVNb2RlX2RlYyA9IFtjb21wdXRlZF0sIF9nZXRJc1Bhc3RlQXRDdXJzb3JNb2RlX2RlYyA9IFtjb21wdXRlZF07XG5jbGFzcyBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IodXNlciwgaW5mZXJEYXJrTW9kZSkge1xuICAgIHRoaXMudXNlciA9IHVzZXI7XG4gICAgdGhpcy5pbmZlckRhcmtNb2RlID0gaW5mZXJEYXJrTW9kZTtcbiAgICBfX3J1bkluaXRpYWxpemVycyhfaW5pdCwgNSwgdGhpcyk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN5c3RlbUNvbG9yU2NoZW1lXCIsIGF0b20oXCJzeXN0ZW1Db2xvclNjaGVtZVwiLCBcImxpZ2h0XCIpKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFwibWF0Y2hNZWRpYVwiIGluIHdpbmRvdykpIHJldHVybjtcbiAgICBjb25zdCBkYXJrTW9kZU1lZGlhUXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIik7XG4gICAgaWYgKGRhcmtNb2RlTWVkaWFRdWVyeT8ubWF0Y2hlcykge1xuICAgICAgdGhpcy5zeXN0ZW1Db2xvclNjaGVtZS5zZXQoXCJkYXJrXCIpO1xuICAgIH1cbiAgICBkYXJrTW9kZU1lZGlhUXVlcnk/LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLm1hdGNoZXMpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Db2xvclNjaGVtZS5zZXQoXCJkYXJrXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Db2xvclNjaGVtZS5zZXQoXCJsaWdodFwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICB1cGRhdGVVc2VyUHJlZmVyZW5jZXModXNlclByZWZlcmVuY2VzKSB7XG4gICAgdGhpcy51c2VyLnNldFVzZXJQcmVmZXJlbmNlcyh7XG4gICAgICAuLi50aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLFxuICAgICAgLi4udXNlclByZWZlcmVuY2VzXG4gICAgfSk7XG4gIH1cbiAgZ2V0VXNlclByZWZlcmVuY2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZXRJZCgpLFxuICAgICAgbmFtZTogdGhpcy5nZXROYW1lKCksXG4gICAgICBsb2NhbGU6IHRoaXMuZ2V0TG9jYWxlKCksXG4gICAgICBjb2xvcjogdGhpcy5nZXRDb2xvcigpLFxuICAgICAgYW5pbWF0aW9uU3BlZWQ6IHRoaXMuZ2V0QW5pbWF0aW9uU3BlZWQoKSxcbiAgICAgIGlzU25hcE1vZGU6IHRoaXMuZ2V0SXNTbmFwTW9kZSgpLFxuICAgICAgY29sb3JTY2hlbWU6IHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuY29sb3JTY2hlbWUsXG4gICAgICBpc0RhcmtNb2RlOiB0aGlzLmdldElzRGFya01vZGUoKSxcbiAgICAgIGlzV3JhcE1vZGU6IHRoaXMuZ2V0SXNXcmFwTW9kZSgpLFxuICAgICAgaXNEeW5hbWljUmVzaXplTW9kZTogdGhpcy5nZXRJc0R5bmFtaWNSZXNpemVNb2RlKClcbiAgICB9O1xuICB9XG4gIGdldElzRGFya01vZGUoKSB7XG4gICAgc3dpdGNoICh0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmNvbG9yU2NoZW1lKSB7XG4gICAgICBjYXNlIFwiZGFya1wiOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgXCJsaWdodFwiOlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6XG4gICAgICAgIHJldHVybiB0aGlzLnN5c3RlbUNvbG9yU2NoZW1lLmdldCgpID09PSBcImRhcmtcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmluZmVyRGFya01vZGUgPyB0aGlzLnN5c3RlbUNvbG9yU2NoZW1lLmdldCgpID09PSBcImRhcmtcIiA6IGZhbHNlO1xuICAgIH1cbiAgfVxuICBnZXRFZGdlU2Nyb2xsU3BlZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuZWRnZVNjcm9sbFNwZWVkID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMuZWRnZVNjcm9sbFNwZWVkO1xuICB9XG4gIGdldEFuaW1hdGlvblNwZWVkKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmFuaW1hdGlvblNwZWVkID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMuYW5pbWF0aW9uU3BlZWQ7XG4gIH1cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuaWQ7XG4gIH1cbiAgZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5uYW1lID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMubmFtZTtcbiAgfVxuICBnZXRMb2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkubG9jYWxlID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMubG9jYWxlO1xuICB9XG4gIGdldENvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmNvbG9yID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMuY29sb3I7XG4gIH1cbiAgZ2V0SXNTbmFwTW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5pc1NuYXBNb2RlID8/IGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMuaXNTbmFwTW9kZTtcbiAgfVxuICBnZXRJc1dyYXBNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmlzV3JhcE1vZGUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5pc1dyYXBNb2RlO1xuICB9XG4gIGdldElzRHluYW1pY1Jlc2l6ZU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuaXNEeW5hbWljU2l6ZU1vZGUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5pc0R5bmFtaWNTaXplTW9kZTtcbiAgfVxuICBnZXRJc1Bhc3RlQXRDdXJzb3JNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmlzUGFzdGVBdEN1cnNvck1vZGUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5pc1Bhc3RlQXRDdXJzb3JNb2RlO1xuICB9XG59XG5faW5pdCA9IF9fZGVjb3JhdG9yU3RhcnQobnVsbCk7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRVc2VyUHJlZmVyZW5jZXNcIiwgX2dldFVzZXJQcmVmZXJlbmNlc19kZWMsIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0SXNEYXJrTW9kZVwiLCBfZ2V0SXNEYXJrTW9kZV9kZWMsIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0RWRnZVNjcm9sbFNwZWVkXCIsIF9nZXRFZGdlU2Nyb2xsU3BlZWRfZGVjLCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyKTtcbl9fZGVjb3JhdGVFbGVtZW50KF9pbml0LCAxLCBcImdldEFuaW1hdGlvblNwZWVkXCIsIF9nZXRBbmltYXRpb25TcGVlZF9kZWMsIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0SWRcIiwgX2dldElkX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXROYW1lXCIsIF9nZXROYW1lX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRMb2NhbGVcIiwgX2dldExvY2FsZV9kZWMsIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwiZ2V0Q29sb3JcIiwgX2dldENvbG9yX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRJc1NuYXBNb2RlXCIsIF9nZXRJc1NuYXBNb2RlX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRJc1dyYXBNb2RlXCIsIF9nZXRJc1dyYXBNb2RlX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRJc0R5bmFtaWNSZXNpemVNb2RlXCIsIF9nZXRJc0R5bmFtaWNSZXNpemVNb2RlX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJnZXRJc1Bhc3RlQXRDdXJzb3JNb2RlXCIsIF9nZXRJc1Bhc3RlQXRDdXJzb3JNb2RlX2RlYywgVXNlclByZWZlcmVuY2VzTWFuYWdlcik7XG5fX2RlY29yYXRvck1ldGFkYXRhKF9pbml0LCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyKTtcbmV4cG9ydCB7XG4gIFVzZXJQcmVmZXJlbmNlc01hbmFnZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseBoxShapeUtil: () => (/* binding */ BaseBoxShapeUtil)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/resizeBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\");\n\n\n\n\nclass BaseBoxShapeUtil extends _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_2__.ShapeUtil {\n  getGeometry(shape) {\n    return new _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Rectangle2d({\n      width: shape.props.w,\n      height: shape.props.h,\n      isFilled: true\n    });\n  }\n  onResize(shape, info) {\n    return (0,_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_3__.resizeBox)(shape, info);\n  }\n  getHandleSnapGeometry(shape) {\n    return {\n      points: this.getGeometry(shape).bounds.cornersAndCenter\n    };\n  }\n  getInterpolatedProps(startShape, endShape, t) {\n    return {\n      ...endShape.props,\n      w: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.lerp)(startShape.props.w, endShape.props.w, t),\n      h: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.lerp)(startShape.props.h, endShape.props.h, t)\n    };\n  }\n}\n\n//# sourceMappingURL=BaseBoxShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvQmFzZUJveFNoYXBlVXRpbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUM7QUFDbUM7QUFDNUI7QUFDTztBQUNuRCwrQkFBK0IscURBQVM7QUFDeEM7QUFDQSxlQUFlLDZFQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsV0FBVyxnRUFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1EQUFJO0FBQ2IsU0FBUyxtREFBSTtBQUNiO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3NoYXBlcy9CYXNlQm94U2hhcGVVdGlsLm1qcz80ODRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxlcnAgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgUmVjdGFuZ2xlMmQgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9nZW9tZXRyeS9SZWN0YW5nbGUyZC5tanNcIjtcbmltcG9ydCB7IFNoYXBlVXRpbCB9IGZyb20gXCIuL1NoYXBlVXRpbC5tanNcIjtcbmltcG9ydCB7IHJlc2l6ZUJveCB9IGZyb20gXCIuL3NoYXJlZC9yZXNpemVCb3gubWpzXCI7XG5jbGFzcyBCYXNlQm94U2hhcGVVdGlsIGV4dGVuZHMgU2hhcGVVdGlsIHtcbiAgZ2V0R2VvbWV0cnkoc2hhcGUpIHtcbiAgICByZXR1cm4gbmV3IFJlY3RhbmdsZTJkKHtcbiAgICAgIHdpZHRoOiBzaGFwZS5wcm9wcy53LFxuICAgICAgaGVpZ2h0OiBzaGFwZS5wcm9wcy5oLFxuICAgICAgaXNGaWxsZWQ6IHRydWVcbiAgICB9KTtcbiAgfVxuICBvblJlc2l6ZShzaGFwZSwgaW5mbykge1xuICAgIHJldHVybiByZXNpemVCb3goc2hhcGUsIGluZm8pO1xuICB9XG4gIGdldEhhbmRsZVNuYXBHZW9tZXRyeShzaGFwZSkge1xuICAgIHJldHVybiB7XG4gICAgICBwb2ludHM6IHRoaXMuZ2V0R2VvbWV0cnkoc2hhcGUpLmJvdW5kcy5jb3JuZXJzQW5kQ2VudGVyXG4gICAgfTtcbiAgfVxuICBnZXRJbnRlcnBvbGF0ZWRQcm9wcyhzdGFydFNoYXBlLCBlbmRTaGFwZSwgdCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5lbmRTaGFwZS5wcm9wcyxcbiAgICAgIHc6IGxlcnAoc3RhcnRTaGFwZS5wcm9wcy53LCBlbmRTaGFwZS5wcm9wcy53LCB0KSxcbiAgICAgIGg6IGxlcnAoc3RhcnRTaGFwZS5wcm9wcy5oLCBlbmRTaGFwZS5wcm9wcy5oLCB0KVxuICAgIH07XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEJhc2VCb3hTaGFwZVV0aWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlQm94U2hhcGVVdGlsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShapeUtil: () => (/* binding */ ShapeUtil)\n/* harmony export */ });\nclass ShapeUtil {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  /**\n   * Props allow you to define the shape's properties in a way that the editor can understand.\n   * This has two main uses:\n   *\n   * 1. Validation. Shapes will be validated using these props to stop bad data from being saved.\n   * 2. Styles. Each {@link @tldraw/tlschema#StyleProp} in the props can be set on many shapes at\n   *    once, and will be remembered from one shape to the next.\n   *\n   * @example\n   * ```tsx\n   * import {T, TLBaseShape, TLDefaultColorStyle, DefaultColorStyle, ShapeUtil} from 'tldraw'\n   *\n   * type MyShape = TLBaseShape<'mine', {\n   *      color: TLDefaultColorStyle,\n   *      text: string,\n   * }>\n   *\n   * class MyShapeUtil extends ShapeUtil<MyShape> {\n   *     static props = {\n   *         // we use tldraw's built-in color style:\n   *         color: DefaultColorStyle,\n   *         // validate that the text prop is a string:\n   *         text: T.string,\n   *     }\n   * }\n   * ```\n   */\n  static props;\n  /**\n   * Migrations allow you to make changes to a shape's props over time. Read the\n   * {@link https://www.tldraw.dev/docs/persistence#Shape-props-migrations | shape prop migrations}\n   * guide for more information.\n   */\n  static migrations;\n  /**\n   * The type of the shape util, which should match the shape's type.\n   *\n   * @public\n   */\n  static type;\n  /**\n   * Whether the shape can be snapped to by another shape.\n   *\n   * @public\n   */\n  canSnap(_shape) {\n    return true;\n  }\n  /**\n   * Whether the shape can be scrolled while editing.\n   *\n   * @public\n   */\n  canScroll(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape can be bound to. See {@link TLShapeUtilCanBindOpts} for details.\n   *\n   * @public\n   */\n  canBind(_opts) {\n    return true;\n  }\n  /**\n   * Whether the shape can be double clicked to edit.\n   *\n   * @public\n   */\n  canEdit(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape can be resized.\n   *\n   * @public\n   */\n  canResize(_shape) {\n    return true;\n  }\n  /**\n   * Whether the shape can be edited in read-only mode.\n   *\n   * @public\n   */\n  canEditInReadOnly(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape can be cropped.\n   *\n   * @public\n   */\n  canCrop(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape participates in stacking, aligning, and distributing.\n   *\n   * @public\n   */\n  canBeLaidOut(_shape) {\n    return true;\n  }\n  /**\n   * Does this shape provide a background for its children? If this is true,\n   * then any children with a `renderBackground` method will have their\n   * backgrounds rendered _above_ this shape. Otherwise, the children's\n   * backgrounds will be rendered above either the next ancestor that provides\n   * a background, or the canvas background.\n   *\n   * @internal\n   */\n  providesBackgroundForChildren(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape should hide its resize handles when selected.\n   *\n   * @public\n   */\n  hideResizeHandles(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape should hide its rotation handles when selected.\n   *\n   * @public\n   */\n  hideRotateHandle(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape should hide its selection bounds background when selected.\n   *\n   * @public\n   */\n  hideSelectionBoundsBg(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape should hide its selection bounds foreground when selected.\n   *\n   * @public\n   */\n  hideSelectionBoundsFg(_shape) {\n    return false;\n  }\n  /**\n   * Whether the shape's aspect ratio is locked.\n   *\n   * @public\n   */\n  isAspectRatioLocked(_shape) {\n    return false;\n  }\n  /**\n   * Get whether the shape can receive children of a given type.\n   *\n   * @param shape - The shape.\n   * @param type - The shape type.\n   * @public\n   */\n  canReceiveNewChildrenOfType(_shape, _type) {\n    return false;\n  }\n  /**\n   * Get whether the shape can receive children of a given type.\n   *\n   * @param shape - The shape type.\n   * @param shapes - The shapes that are being dropped.\n   * @public\n   */\n  canDropShapes(_shape, _shapes) {\n    return false;\n  }\n  /** @internal */\n  expandSelectionOutlinePx(shape) {\n    return 0;\n  }\n  /**\n   * Return elements to be added to the \\<defs\\> section of the canvases SVG context. This can be\n   * used to define SVG content (e.g. patterns & masks) that can be referred to by ID from svg\n   * elements returned by `component`.\n   *\n   * Each def should have a unique `key`. If multiple defs from different shapes all have the same\n   * key, only one will be used.\n   */\n  getCanvasSvgDefs() {\n    return [];\n  }\n  /**\n   * Get the geometry to use when snapping to this this shape in translate/resize operations. See\n   * {@link BoundsSnapGeometry} for details.\n   */\n  getBoundsSnapGeometry(_shape) {\n    return {};\n  }\n  /**\n   * Get the geometry to use when snapping handles to this shape. See {@link HandleSnapGeometry}\n   * for details.\n   */\n  getHandleSnapGeometry(_shape) {\n    return {};\n  }\n  getText(_shape) {\n    return void 0;\n  }\n}\n\n//# sourceMappingURL=ShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvU2hhcGVVdGlsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtDQUFrQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUVBQW1FO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw4QkFBOEI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwwQkFBMEI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvU2hhcGVVdGlsLm1qcz9hYjMyIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFNoYXBlVXRpbCB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICB9XG4gIC8qKlxuICAgKiBQcm9wcyBhbGxvdyB5b3UgdG8gZGVmaW5lIHRoZSBzaGFwZSdzIHByb3BlcnRpZXMgaW4gYSB3YXkgdGhhdCB0aGUgZWRpdG9yIGNhbiB1bmRlcnN0YW5kLlxuICAgKiBUaGlzIGhhcyB0d28gbWFpbiB1c2VzOlxuICAgKlxuICAgKiAxLiBWYWxpZGF0aW9uLiBTaGFwZXMgd2lsbCBiZSB2YWxpZGF0ZWQgdXNpbmcgdGhlc2UgcHJvcHMgdG8gc3RvcCBiYWQgZGF0YSBmcm9tIGJlaW5nIHNhdmVkLlxuICAgKiAyLiBTdHlsZXMuIEVhY2gge0BsaW5rIEB0bGRyYXcvdGxzY2hlbWEjU3R5bGVQcm9wfSBpbiB0aGUgcHJvcHMgY2FuIGJlIHNldCBvbiBtYW55IHNoYXBlcyBhdFxuICAgKiAgICBvbmNlLCBhbmQgd2lsbCBiZSByZW1lbWJlcmVkIGZyb20gb25lIHNoYXBlIHRvIHRoZSBuZXh0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c3hcbiAgICogaW1wb3J0IHtULCBUTEJhc2VTaGFwZSwgVExEZWZhdWx0Q29sb3JTdHlsZSwgRGVmYXVsdENvbG9yU3R5bGUsIFNoYXBlVXRpbH0gZnJvbSAndGxkcmF3J1xuICAgKlxuICAgKiB0eXBlIE15U2hhcGUgPSBUTEJhc2VTaGFwZTwnbWluZScsIHtcbiAgICogICAgICBjb2xvcjogVExEZWZhdWx0Q29sb3JTdHlsZSxcbiAgICogICAgICB0ZXh0OiBzdHJpbmcsXG4gICAqIH0+XG4gICAqXG4gICAqIGNsYXNzIE15U2hhcGVVdGlsIGV4dGVuZHMgU2hhcGVVdGlsPE15U2hhcGU+IHtcbiAgICogICAgIHN0YXRpYyBwcm9wcyA9IHtcbiAgICogICAgICAgICAvLyB3ZSB1c2UgdGxkcmF3J3MgYnVpbHQtaW4gY29sb3Igc3R5bGU6XG4gICAqICAgICAgICAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICAgKiAgICAgICAgIC8vIHZhbGlkYXRlIHRoYXQgdGhlIHRleHQgcHJvcCBpcyBhIHN0cmluZzpcbiAgICogICAgICAgICB0ZXh0OiBULnN0cmluZyxcbiAgICogICAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBwcm9wcztcbiAgLyoqXG4gICAqIE1pZ3JhdGlvbnMgYWxsb3cgeW91IHRvIG1ha2UgY2hhbmdlcyB0byBhIHNoYXBlJ3MgcHJvcHMgb3ZlciB0aW1lLiBSZWFkIHRoZVxuICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cudGxkcmF3LmRldi9kb2NzL3BlcnNpc3RlbmNlI1NoYXBlLXByb3BzLW1pZ3JhdGlvbnMgfCBzaGFwZSBwcm9wIG1pZ3JhdGlvbnN9XG4gICAqIGd1aWRlIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgc3RhdGljIG1pZ3JhdGlvbnM7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB0aGUgc2hhcGUgdXRpbCwgd2hpY2ggc2hvdWxkIG1hdGNoIHRoZSBzaGFwZSdzIHR5cGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyB0eXBlO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgY2FuIGJlIHNuYXBwZWQgdG8gYnkgYW5vdGhlciBzaGFwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuU25hcChfc2hhcGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgY2FuIGJlIHNjcm9sbGVkIHdoaWxlIGVkaXRpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhblNjcm9sbChfc2hhcGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBib3VuZCB0by4gU2VlIHtAbGluayBUTFNoYXBlVXRpbENhbkJpbmRPcHRzfSBmb3IgZGV0YWlscy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuQmluZChfb3B0cykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBjYW4gYmUgZG91YmxlIGNsaWNrZWQgdG8gZWRpdC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuRWRpdChfc2hhcGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSByZXNpemVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5SZXNpemUoX3NoYXBlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBlZGl0ZWQgaW4gcmVhZC1vbmx5IG1vZGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbkVkaXRJblJlYWRPbmx5KF9zaGFwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgY2FuIGJlIGNyb3BwZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbkNyb3AoX3NoYXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBwYXJ0aWNpcGF0ZXMgaW4gc3RhY2tpbmcsIGFsaWduaW5nLCBhbmQgZGlzdHJpYnV0aW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5CZUxhaWRPdXQoX3NoYXBlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIERvZXMgdGhpcyBzaGFwZSBwcm92aWRlIGEgYmFja2dyb3VuZCBmb3IgaXRzIGNoaWxkcmVuPyBJZiB0aGlzIGlzIHRydWUsXG4gICAqIHRoZW4gYW55IGNoaWxkcmVuIHdpdGggYSBgcmVuZGVyQmFja2dyb3VuZGAgbWV0aG9kIHdpbGwgaGF2ZSB0aGVpclxuICAgKiBiYWNrZ3JvdW5kcyByZW5kZXJlZCBfYWJvdmVfIHRoaXMgc2hhcGUuIE90aGVyd2lzZSwgdGhlIGNoaWxkcmVuJ3NcbiAgICogYmFja2dyb3VuZHMgd2lsbCBiZSByZW5kZXJlZCBhYm92ZSBlaXRoZXIgdGhlIG5leHQgYW5jZXN0b3IgdGhhdCBwcm92aWRlc1xuICAgKiBhIGJhY2tncm91bmQsIG9yIHRoZSBjYW52YXMgYmFja2dyb3VuZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm92aWRlc0JhY2tncm91bmRGb3JDaGlsZHJlbihfc2hhcGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIHNob3VsZCBoaWRlIGl0cyByZXNpemUgaGFuZGxlcyB3aGVuIHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoaWRlUmVzaXplSGFuZGxlcyhfc2hhcGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIHNob3VsZCBoaWRlIGl0cyByb3RhdGlvbiBoYW5kbGVzIHdoZW4gc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhpZGVSb3RhdGVIYW5kbGUoX3NoYXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBzaG91bGQgaGlkZSBpdHMgc2VsZWN0aW9uIGJvdW5kcyBiYWNrZ3JvdW5kIHdoZW4gc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhpZGVTZWxlY3Rpb25Cb3VuZHNCZyhfc2hhcGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIHNob3VsZCBoaWRlIGl0cyBzZWxlY3Rpb24gYm91bmRzIGZvcmVncm91bmQgd2hlbiBzZWxlY3RlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGlkZVNlbGVjdGlvbkJvdW5kc0ZnKF9zaGFwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUncyBhc3BlY3QgcmF0aW8gaXMgbG9ja2VkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc0FzcGVjdFJhdGlvTG9ja2VkKF9zaGFwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIHNoYXBlIGNhbiByZWNlaXZlIGNoaWxkcmVuIG9mIGEgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlLlxuICAgKiBAcGFyYW0gdHlwZSAtIFRoZSBzaGFwZSB0eXBlLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5SZWNlaXZlTmV3Q2hpbGRyZW5PZlR5cGUoX3NoYXBlLCBfdHlwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIHNoYXBlIGNhbiByZWNlaXZlIGNoaWxkcmVuIG9mIGEgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIHR5cGUuXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIHRoYXQgYXJlIGJlaW5nIGRyb3BwZWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbkRyb3BTaGFwZXMoX3NoYXBlLCBfc2hhcGVzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZXhwYW5kU2VsZWN0aW9uT3V0bGluZVB4KHNoYXBlKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBlbGVtZW50cyB0byBiZSBhZGRlZCB0byB0aGUgXFw8ZGVmc1xcPiBzZWN0aW9uIG9mIHRoZSBjYW52YXNlcyBTVkcgY29udGV4dC4gVGhpcyBjYW4gYmVcbiAgICogdXNlZCB0byBkZWZpbmUgU1ZHIGNvbnRlbnQgKGUuZy4gcGF0dGVybnMgJiBtYXNrcykgdGhhdCBjYW4gYmUgcmVmZXJyZWQgdG8gYnkgSUQgZnJvbSBzdmdcbiAgICogZWxlbWVudHMgcmV0dXJuZWQgYnkgYGNvbXBvbmVudGAuXG4gICAqXG4gICAqIEVhY2ggZGVmIHNob3VsZCBoYXZlIGEgdW5pcXVlIGBrZXlgLiBJZiBtdWx0aXBsZSBkZWZzIGZyb20gZGlmZmVyZW50IHNoYXBlcyBhbGwgaGF2ZSB0aGUgc2FtZVxuICAgKiBrZXksIG9ubHkgb25lIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGdldENhbnZhc1N2Z0RlZnMoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGdlb21ldHJ5IHRvIHVzZSB3aGVuIHNuYXBwaW5nIHRvIHRoaXMgdGhpcyBzaGFwZSBpbiB0cmFuc2xhdGUvcmVzaXplIG9wZXJhdGlvbnMuIFNlZVxuICAgKiB7QGxpbmsgQm91bmRzU25hcEdlb21ldHJ5fSBmb3IgZGV0YWlscy5cbiAgICovXG4gIGdldEJvdW5kc1NuYXBHZW9tZXRyeShfc2hhcGUpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgZ2VvbWV0cnkgdG8gdXNlIHdoZW4gc25hcHBpbmcgaGFuZGxlcyB0byB0aGlzIHNoYXBlLiBTZWUge0BsaW5rIEhhbmRsZVNuYXBHZW9tZXRyeX1cbiAgICogZm9yIGRldGFpbHMuXG4gICAqL1xuICBnZXRIYW5kbGVTbmFwR2VvbWV0cnkoX3NoYXBlKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGdldFRleHQoX3NoYXBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU2hhcGVVdGlsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2hhcGVVdGlsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashedOutlineBox: () => (/* binding */ DashedOutlineBox)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/getPerfectDashProps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs\");\n\n\n\n\nfunction DashedOutlineBox({ bounds, className }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const zoomLevel = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoom level\", () => editor.getZoomLevel(), [editor]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className, pointerEvents: \"none\", strokeLinecap: \"round\", strokeLinejoin: \"round\", children: bounds.sides.map((side, i) => {\n    const { strokeDasharray, strokeDashoffset } = (0,_shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_3__.getPerfectDashProps)(\n      side[0].dist(side[1]),\n      1 / zoomLevel,\n      {\n        style: \"dashed\",\n        lengthRatio: 4\n      }\n    );\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"line\",\n      {\n        x1: side[0].x,\n        y1: side[0].y,\n        x2: side[1].x,\n        y2: side[1].y,\n        strokeDasharray,\n        strokeDashoffset\n      },\n      i\n    );\n  }) });\n}\n\n//# sourceMappingURL=DashedOutlineBox.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvZ3JvdXAvRGFzaGVkT3V0bGluZUJveC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDTztBQUNVO0FBQ2U7QUFDeEUsNEJBQTRCLG1CQUFtQjtBQUMvQyxpQkFBaUIsK0RBQVM7QUFDMUIsb0JBQW9CLDZEQUFRO0FBQzVCLHlCQUF5QixzREFBRyxRQUFRO0FBQ3BDLFlBQVksb0NBQW9DLEVBQUUsb0ZBQW1CO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFHO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUcsR0FBRztBQUNOO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3Ivc2hhcGVzL2dyb3VwL0Rhc2hlZE91dGxpbmVCb3gubWpzPzBhYWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VWYWx1ZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UGVyZmVjdERhc2hQcm9wcyB9IGZyb20gXCIuLi9zaGFyZWQvZ2V0UGVyZmVjdERhc2hQcm9wcy5tanNcIjtcbmZ1bmN0aW9uIERhc2hlZE91dGxpbmVCb3goeyBib3VuZHMsIGNsYXNzTmFtZSB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB6b29tTGV2ZWwgPSB1c2VWYWx1ZShcInpvb20gbGV2ZWxcIiwgKCkgPT4gZWRpdG9yLmdldFpvb21MZXZlbCgpLCBbZWRpdG9yXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IGNsYXNzTmFtZSwgcG9pbnRlckV2ZW50czogXCJub25lXCIsIHN0cm9rZUxpbmVjYXA6IFwicm91bmRcIiwgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIiwgY2hpbGRyZW46IGJvdW5kcy5zaWRlcy5tYXAoKHNpZGUsIGkpID0+IHtcbiAgICBjb25zdCB7IHN0cm9rZURhc2hhcnJheSwgc3Ryb2tlRGFzaG9mZnNldCB9ID0gZ2V0UGVyZmVjdERhc2hQcm9wcyhcbiAgICAgIHNpZGVbMF0uZGlzdChzaWRlWzFdKSxcbiAgICAgIDEgLyB6b29tTGV2ZWwsXG4gICAgICB7XG4gICAgICAgIHN0eWxlOiBcImRhc2hlZFwiLFxuICAgICAgICBsZW5ndGhSYXRpbzogNFxuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICBcImxpbmVcIixcbiAgICAgIHtcbiAgICAgICAgeDE6IHNpZGVbMF0ueCxcbiAgICAgICAgeTE6IHNpZGVbMF0ueSxcbiAgICAgICAgeDI6IHNpZGVbMV0ueCxcbiAgICAgICAgeTI6IHNpZGVbMV0ueSxcbiAgICAgICAgc3Ryb2tlRGFzaGFycmF5LFxuICAgICAgICBzdHJva2VEYXNob2Zmc2V0XG4gICAgICB9LFxuICAgICAgaVxuICAgICk7XG4gIH0pIH0pO1xufVxuZXhwb3J0IHtcbiAgRGFzaGVkT3V0bGluZUJveFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURhc2hlZE91dGxpbmVCb3gubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupShapeUtil: () => (/* binding */ GroupShapeUtil)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/SVGContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../primitives/geometry/Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n/* harmony import */ var _primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../primitives/geometry/Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n/* harmony import */ var _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DashedOutlineBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs\");\n\n\n\n\n\n\n\n\n\nclass GroupShapeUtil extends _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_7__.ShapeUtil {\n  static type = \"group\";\n  static props = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.groupShapeProps;\n  static migrations = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.groupShapeMigrations;\n  hideSelectionBoundsFg() {\n    return true;\n  }\n  canBind() {\n    return false;\n  }\n  getDefaultProps() {\n    return {};\n  }\n  getGeometry(shape) {\n    const children = this.editor.getSortedChildIdsForParent(shape.id);\n    if (children.length === 0) {\n      return new _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_6__.Rectangle2d({ width: 1, height: 1, isFilled: false });\n    }\n    return new _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Group2d({\n      children: children.map((childId) => {\n        const shape2 = this.editor.getShape(childId);\n        const geometry = this.editor.getShapeGeometry(childId);\n        const points = this.editor.getShapeLocalTransform(shape2).applyToPoints(geometry.vertices);\n        if (geometry.isClosed) {\n          return new _primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Polygon2d({\n            points,\n            isFilled: true\n          });\n        }\n        return new _primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Polyline2d({\n          points\n        });\n      })\n    });\n  }\n  component(shape) {\n    const isErasing = this.editor.getErasingShapeIds().includes(shape.id);\n    const { hintingShapeIds } = this.editor.getCurrentPageState();\n    const isHintingOtherGroup = hintingShapeIds.length > 0 && hintingShapeIds.some(\n      (id) => id !== shape.id && this.editor.isShapeOfType(this.editor.getShape(id), \"group\")\n    );\n    const isFocused = this.editor.getCurrentPageState().focusedGroupId !== shape.id;\n    if (!isErasing && // always show the outline while we're erasing the group\n    // show the outline while the group is focused unless something outside of the group is being hinted\n    // this happens dropping shapes from a group onto some outside group\n    (isFocused || isHintingOtherGroup)) {\n      return null;\n    }\n    const bounds = this.editor.getShapeGeometry(shape).bounds;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_2__.SVGContainer, { id: shape.id, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__.DashedOutlineBox, { className: \"tl-group\", bounds }) });\n  }\n  indicator(shape) {\n    const bounds = this.editor.getShapeGeometry(shape).bounds;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__.DashedOutlineBox, { className: \"\", bounds });\n  }\n  onChildrenChange(group) {\n    const children = this.editor.getSortedChildIdsForParent(group.id);\n    if (children.length === 0) {\n      if (this.editor.getCurrentPageState().focusedGroupId === group.id) {\n        this.editor.popFocusedGroupId();\n      }\n      this.editor.deleteShapes([group.id]);\n      return;\n    } else if (children.length === 1) {\n      if (this.editor.getCurrentPageState().focusedGroupId === group.id) {\n        this.editor.popFocusedGroupId();\n      }\n      this.editor.reparentShapes(children, group.parentId);\n      this.editor.deleteShapes([group.id]);\n      return;\n    }\n  }\n}\n\n//# sourceMappingURL=GroupShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvZ3JvdXAvR3JvdXBTaGFwZVV0aWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDaUM7QUFDTDtBQUNEO0FBQ0k7QUFDRTtBQUNFO0FBQzlCO0FBQ2E7QUFDMUQsNkJBQTZCLHFEQUFTO0FBQ3RDO0FBQ0EsaUJBQWlCLDZEQUFlO0FBQ2hDLHNCQUFzQixrRUFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZFQUFXLEdBQUcsc0NBQXNDO0FBQ3JFO0FBQ0EsZUFBZSxxRUFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlFQUFTO0FBQzlCO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxtQkFBbUIsMkVBQVU7QUFDN0I7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFHLENBQUMsc0VBQVksSUFBSSx3Q0FBd0Msc0RBQUcsQ0FBQyxtRUFBZ0IsSUFBSSwrQkFBK0IsR0FBRztBQUNqSjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQUcsQ0FBQyxtRUFBZ0IsSUFBSSx1QkFBdUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3NoYXBlcy9ncm91cC9Hcm91cFNoYXBlVXRpbC5tanM/MWVhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGdyb3VwU2hhcGVNaWdyYXRpb25zLCBncm91cFNoYXBlUHJvcHMgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHsgU1ZHQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvU1ZHQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgR3JvdXAyZCB9IGZyb20gXCIuLi8uLi8uLi9wcmltaXRpdmVzL2dlb21ldHJ5L0dyb3VwMmQubWpzXCI7XG5pbXBvcnQgeyBQb2x5Z29uMmQgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2x5Z29uMmQubWpzXCI7XG5pbXBvcnQgeyBQb2x5bGluZTJkIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWxpbmUyZC5tanNcIjtcbmltcG9ydCB7IFJlY3RhbmdsZTJkIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUmVjdGFuZ2xlMmQubWpzXCI7XG5pbXBvcnQgeyBTaGFwZVV0aWwgfSBmcm9tIFwiLi4vU2hhcGVVdGlsLm1qc1wiO1xuaW1wb3J0IHsgRGFzaGVkT3V0bGluZUJveCB9IGZyb20gXCIuL0Rhc2hlZE91dGxpbmVCb3gubWpzXCI7XG5jbGFzcyBHcm91cFNoYXBlVXRpbCBleHRlbmRzIFNoYXBlVXRpbCB7XG4gIHN0YXRpYyB0eXBlID0gXCJncm91cFwiO1xuICBzdGF0aWMgcHJvcHMgPSBncm91cFNoYXBlUHJvcHM7XG4gIHN0YXRpYyBtaWdyYXRpb25zID0gZ3JvdXBTaGFwZU1pZ3JhdGlvbnM7XG4gIGhpZGVTZWxlY3Rpb25Cb3VuZHNGZygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjYW5CaW5kKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGdldEdlb21ldHJ5KHNoYXBlKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmVkaXRvci5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChzaGFwZS5pZCk7XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUyZCh7IHdpZHRoOiAxLCBoZWlnaHQ6IDEsIGlzRmlsbGVkOiBmYWxzZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBHcm91cDJkKHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbi5tYXAoKGNoaWxkSWQpID0+IHtcbiAgICAgICAgY29uc3Qgc2hhcGUyID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGUoY2hpbGRJZCk7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVHZW9tZXRyeShjaGlsZElkKTtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVMb2NhbFRyYW5zZm9ybShzaGFwZTIpLmFwcGx5VG9Qb2ludHMoZ2VvbWV0cnkudmVydGljZXMpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkuaXNDbG9zZWQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFBvbHlnb24yZCh7XG4gICAgICAgICAgICBwb2ludHMsXG4gICAgICAgICAgICBpc0ZpbGxlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUG9seWxpbmUyZCh7XG4gICAgICAgICAgcG9pbnRzXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBjb21wb25lbnQoc2hhcGUpIHtcbiAgICBjb25zdCBpc0VyYXNpbmcgPSB0aGlzLmVkaXRvci5nZXRFcmFzaW5nU2hhcGVJZHMoKS5pbmNsdWRlcyhzaGFwZS5pZCk7XG4gICAgY29uc3QgeyBoaW50aW5nU2hhcGVJZHMgfSA9IHRoaXMuZWRpdG9yLmdldEN1cnJlbnRQYWdlU3RhdGUoKTtcbiAgICBjb25zdCBpc0hpbnRpbmdPdGhlckdyb3VwID0gaGludGluZ1NoYXBlSWRzLmxlbmd0aCA+IDAgJiYgaGludGluZ1NoYXBlSWRzLnNvbWUoXG4gICAgICAoaWQpID0+IGlkICE9PSBzaGFwZS5pZCAmJiB0aGlzLmVkaXRvci5pc1NoYXBlT2ZUeXBlKHRoaXMuZWRpdG9yLmdldFNoYXBlKGlkKSwgXCJncm91cFwiKVxuICAgICk7XG4gICAgY29uc3QgaXNGb2N1c2VkID0gdGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkICE9PSBzaGFwZS5pZDtcbiAgICBpZiAoIWlzRXJhc2luZyAmJiAvLyBhbHdheXMgc2hvdyB0aGUgb3V0bGluZSB3aGlsZSB3ZSdyZSBlcmFzaW5nIHRoZSBncm91cFxuICAgIC8vIHNob3cgdGhlIG91dGxpbmUgd2hpbGUgdGhlIGdyb3VwIGlzIGZvY3VzZWQgdW5sZXNzIHNvbWV0aGluZyBvdXRzaWRlIG9mIHRoZSBncm91cCBpcyBiZWluZyBoaW50ZWRcbiAgICAvLyB0aGlzIGhhcHBlbnMgZHJvcHBpbmcgc2hhcGVzIGZyb20gYSBncm91cCBvbnRvIHNvbWUgb3V0c2lkZSBncm91cFxuICAgIChpc0ZvY3VzZWQgfHwgaXNIaW50aW5nT3RoZXJHcm91cCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBib3VuZHMgPSB0aGlzLmVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKS5ib3VuZHM7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goU1ZHQ29udGFpbmVyLCB7IGlkOiBzaGFwZS5pZCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRGFzaGVkT3V0bGluZUJveCwgeyBjbGFzc05hbWU6IFwidGwtZ3JvdXBcIiwgYm91bmRzIH0pIH0pO1xuICB9XG4gIGluZGljYXRvcihzaGFwZSkge1xuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUpLmJvdW5kcztcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChEYXNoZWRPdXRsaW5lQm94LCB7IGNsYXNzTmFtZTogXCJcIiwgYm91bmRzIH0pO1xuICB9XG4gIG9uQ2hpbGRyZW5DaGFuZ2UoZ3JvdXApIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KGdyb3VwLmlkKTtcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAodGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID09PSBncm91cC5pZCkge1xuICAgICAgICB0aGlzLmVkaXRvci5wb3BGb2N1c2VkR3JvdXBJZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0b3IuZGVsZXRlU2hhcGVzKFtncm91cC5pZF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID09PSBncm91cC5pZCkge1xuICAgICAgICB0aGlzLmVkaXRvci5wb3BGb2N1c2VkR3JvdXBJZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0b3IucmVwYXJlbnRTaGFwZXMoY2hpbGRyZW4sIGdyb3VwLnBhcmVudElkKTtcbiAgICAgIHRoaXMuZWRpdG9yLmRlbGV0ZVNoYXBlcyhbZ3JvdXAuaWRdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEdyb3VwU2hhcGVVdGlsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JvdXBTaGFwZVV0aWwubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPerfectDashProps: () => (/* binding */ getPerfectDashProps)\n/* harmony export */ });\nfunction getPerfectDashProps(totalLength, strokeWidth, opts = {}) {\n  const {\n    closed = false,\n    snap = 1,\n    start = \"outset\",\n    end = \"outset\",\n    lengthRatio = 2,\n    style = \"dashed\",\n    forceSolid = false\n  } = opts;\n  let dashLength = 0;\n  let dashCount = 0;\n  let ratio = 1;\n  let gapLength = 0;\n  let strokeDashoffset = 0;\n  if (forceSolid) {\n    return {\n      strokeDasharray: \"none\",\n      strokeDashoffset: \"none\"\n    };\n  }\n  switch (style) {\n    case \"dashed\": {\n      ratio = 1;\n      dashLength = Math.min(strokeWidth * lengthRatio, totalLength / 4);\n      break;\n    }\n    case \"dotted\": {\n      ratio = 100;\n      dashLength = strokeWidth / ratio;\n      break;\n    }\n    default: {\n      return {\n        strokeDasharray: \"none\",\n        strokeDashoffset: \"none\"\n      };\n    }\n  }\n  if (!closed) {\n    if (start === \"outset\") {\n      totalLength += dashLength / 2;\n      strokeDashoffset += dashLength / 2;\n    } else if (start === \"skip\") {\n      totalLength -= dashLength;\n      strokeDashoffset -= dashLength;\n    }\n    if (end === \"outset\") {\n      totalLength += dashLength / 2;\n    } else if (end === \"skip\") {\n      totalLength -= dashLength;\n    }\n  }\n  dashCount = Math.floor(totalLength / dashLength / (2 * ratio));\n  dashCount -= dashCount % snap;\n  if (dashCount < 3 && style === \"dashed\") {\n    if (totalLength / strokeWidth < 4) {\n      dashLength = totalLength;\n      dashCount = 1;\n      gapLength = 0;\n    } else {\n      dashLength = totalLength * (1 / 3);\n      gapLength = totalLength * (1 / 3);\n    }\n  } else {\n    dashLength = totalLength / dashCount / (2 * ratio);\n    if (closed) {\n      strokeDashoffset = dashLength / 2;\n      gapLength = (totalLength - dashCount * dashLength) / dashCount;\n    } else {\n      gapLength = (totalLength - dashCount * dashLength) / Math.max(1, dashCount - 1);\n    }\n  }\n  return {\n    strokeDasharray: [dashLength, gapLength].join(\" \"),\n    strokeDashoffset: strokeDashoffset.toString()\n  };\n}\n\n//# sourceMappingURL=getPerfectDashProps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL2dldFBlcmZlY3REYXNoUHJvcHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3NoYXBlcy9zaGFyZWQvZ2V0UGVyZmVjdERhc2hQcm9wcy5tanM/YzZhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRQZXJmZWN0RGFzaFByb3BzKHRvdGFsTGVuZ3RoLCBzdHJva2VXaWR0aCwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBjbG9zZWQgPSBmYWxzZSxcbiAgICBzbmFwID0gMSxcbiAgICBzdGFydCA9IFwib3V0c2V0XCIsXG4gICAgZW5kID0gXCJvdXRzZXRcIixcbiAgICBsZW5ndGhSYXRpbyA9IDIsXG4gICAgc3R5bGUgPSBcImRhc2hlZFwiLFxuICAgIGZvcmNlU29saWQgPSBmYWxzZVxuICB9ID0gb3B0cztcbiAgbGV0IGRhc2hMZW5ndGggPSAwO1xuICBsZXQgZGFzaENvdW50ID0gMDtcbiAgbGV0IHJhdGlvID0gMTtcbiAgbGV0IGdhcExlbmd0aCA9IDA7XG4gIGxldCBzdHJva2VEYXNob2Zmc2V0ID0gMDtcbiAgaWYgKGZvcmNlU29saWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3Ryb2tlRGFzaGFycmF5OiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZURhc2hvZmZzZXQ6IFwibm9uZVwiXG4gICAgfTtcbiAgfVxuICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgY2FzZSBcImRhc2hlZFwiOiB7XG4gICAgICByYXRpbyA9IDE7XG4gICAgICBkYXNoTGVuZ3RoID0gTWF0aC5taW4oc3Ryb2tlV2lkdGggKiBsZW5ndGhSYXRpbywgdG90YWxMZW5ndGggLyA0KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiZG90dGVkXCI6IHtcbiAgICAgIHJhdGlvID0gMTAwO1xuICAgICAgZGFzaExlbmd0aCA9IHN0cm9rZVdpZHRoIC8gcmF0aW87XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3Ryb2tlRGFzaGFycmF5OiBcIm5vbmVcIixcbiAgICAgICAgc3Ryb2tlRGFzaG9mZnNldDogXCJub25lXCJcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGlmICghY2xvc2VkKSB7XG4gICAgaWYgKHN0YXJ0ID09PSBcIm91dHNldFwiKSB7XG4gICAgICB0b3RhbExlbmd0aCArPSBkYXNoTGVuZ3RoIC8gMjtcbiAgICAgIHN0cm9rZURhc2hvZmZzZXQgKz0gZGFzaExlbmd0aCAvIDI7XG4gICAgfSBlbHNlIGlmIChzdGFydCA9PT0gXCJza2lwXCIpIHtcbiAgICAgIHRvdGFsTGVuZ3RoIC09IGRhc2hMZW5ndGg7XG4gICAgICBzdHJva2VEYXNob2Zmc2V0IC09IGRhc2hMZW5ndGg7XG4gICAgfVxuICAgIGlmIChlbmQgPT09IFwib3V0c2V0XCIpIHtcbiAgICAgIHRvdGFsTGVuZ3RoICs9IGRhc2hMZW5ndGggLyAyO1xuICAgIH0gZWxzZSBpZiAoZW5kID09PSBcInNraXBcIikge1xuICAgICAgdG90YWxMZW5ndGggLT0gZGFzaExlbmd0aDtcbiAgICB9XG4gIH1cbiAgZGFzaENvdW50ID0gTWF0aC5mbG9vcih0b3RhbExlbmd0aCAvIGRhc2hMZW5ndGggLyAoMiAqIHJhdGlvKSk7XG4gIGRhc2hDb3VudCAtPSBkYXNoQ291bnQgJSBzbmFwO1xuICBpZiAoZGFzaENvdW50IDwgMyAmJiBzdHlsZSA9PT0gXCJkYXNoZWRcIikge1xuICAgIGlmICh0b3RhbExlbmd0aCAvIHN0cm9rZVdpZHRoIDwgNCkge1xuICAgICAgZGFzaExlbmd0aCA9IHRvdGFsTGVuZ3RoO1xuICAgICAgZGFzaENvdW50ID0gMTtcbiAgICAgIGdhcExlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhc2hMZW5ndGggPSB0b3RhbExlbmd0aCAqICgxIC8gMyk7XG4gICAgICBnYXBMZW5ndGggPSB0b3RhbExlbmd0aCAqICgxIC8gMyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRhc2hMZW5ndGggPSB0b3RhbExlbmd0aCAvIGRhc2hDb3VudCAvICgyICogcmF0aW8pO1xuICAgIGlmIChjbG9zZWQpIHtcbiAgICAgIHN0cm9rZURhc2hvZmZzZXQgPSBkYXNoTGVuZ3RoIC8gMjtcbiAgICAgIGdhcExlbmd0aCA9ICh0b3RhbExlbmd0aCAtIGRhc2hDb3VudCAqIGRhc2hMZW5ndGgpIC8gZGFzaENvdW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBnYXBMZW5ndGggPSAodG90YWxMZW5ndGggLSBkYXNoQ291bnQgKiBkYXNoTGVuZ3RoKSAvIE1hdGgubWF4KDEsIGRhc2hDb3VudCAtIDEpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHN0cm9rZURhc2hhcnJheTogW2Rhc2hMZW5ndGgsIGdhcExlbmd0aF0uam9pbihcIiBcIiksXG4gICAgc3Ryb2tlRGFzaG9mZnNldDogc3Ryb2tlRGFzaG9mZnNldC50b1N0cmluZygpXG4gIH07XG59XG5leHBvcnQge1xuICBnZXRQZXJmZWN0RGFzaFByb3BzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0UGVyZmVjdERhc2hQcm9wcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resizeBox: () => (/* binding */ resizeBox)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\nfunction resizeBox(shape, info, opts = {}) {\n  const { newPoint, handle, scaleX, scaleY } = info;\n  const { minWidth = 1, maxWidth = Infinity, minHeight = 1, maxHeight = Infinity } = opts;\n  let w = shape.props.w * scaleX;\n  let h = shape.props.h * scaleY;\n  const offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(0, 0);\n  if (w > 0) {\n    if (w < minWidth) {\n      switch (handle) {\n        case \"top_left\":\n        case \"left\":\n        case \"bottom_left\": {\n          offset.x = w - minWidth;\n          break;\n        }\n        case \"top\":\n        case \"bottom\": {\n          offset.x = (w - minWidth) / 2;\n          break;\n        }\n        default: {\n          offset.x = 0;\n        }\n      }\n      w = minWidth;\n    }\n  } else {\n    offset.x = w;\n    w = -w;\n    if (w < minWidth) {\n      switch (handle) {\n        case \"top_left\":\n        case \"left\":\n        case \"bottom_left\": {\n          offset.x = -w;\n          break;\n        }\n        default: {\n          offset.x = -minWidth;\n        }\n      }\n      w = minWidth;\n    }\n  }\n  if (h > 0) {\n    if (h < minHeight) {\n      switch (handle) {\n        case \"top_left\":\n        case \"top\":\n        case \"top_right\": {\n          offset.y = h - minHeight;\n          break;\n        }\n        case \"right\":\n        case \"left\": {\n          offset.y = (h - minHeight) / 2;\n          break;\n        }\n        default: {\n          offset.y = 0;\n        }\n      }\n      h = minHeight;\n    }\n  } else {\n    offset.y = h;\n    h = -h;\n    if (h < minHeight) {\n      switch (handle) {\n        case \"top_left\":\n        case \"top\":\n        case \"top_right\": {\n          offset.y = -h;\n          break;\n        }\n        default: {\n          offset.y = -minHeight;\n        }\n      }\n      h = minHeight;\n    }\n  }\n  const { x, y } = offset.rot(shape.rotation).add(newPoint);\n  return {\n    ...shape,\n    x,\n    y,\n    props: {\n      w: Math.min(maxWidth, w),\n      h: Math.min(maxHeight, h)\n    }\n  };\n}\n\n//# sourceMappingURL=resizeBox.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL3Jlc2l6ZUJveC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7QUFDbEQseUNBQXlDO0FBQ3pDLFVBQVUsbUNBQW1DO0FBQzdDLFVBQVUseUVBQXlFO0FBQ25GO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3Ivc2hhcGVzL3NoYXJlZC9yZXNpemVCb3gubWpzPzMxMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuZnVuY3Rpb24gcmVzaXplQm94KHNoYXBlLCBpbmZvLCBvcHRzID0ge30pIHtcbiAgY29uc3QgeyBuZXdQb2ludCwgaGFuZGxlLCBzY2FsZVgsIHNjYWxlWSB9ID0gaW5mbztcbiAgY29uc3QgeyBtaW5XaWR0aCA9IDEsIG1heFdpZHRoID0gSW5maW5pdHksIG1pbkhlaWdodCA9IDEsIG1heEhlaWdodCA9IEluZmluaXR5IH0gPSBvcHRzO1xuICBsZXQgdyA9IHNoYXBlLnByb3BzLncgKiBzY2FsZVg7XG4gIGxldCBoID0gc2hhcGUucHJvcHMuaCAqIHNjYWxlWTtcbiAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYygwLCAwKTtcbiAgaWYgKHcgPiAwKSB7XG4gICAgaWYgKHcgPCBtaW5XaWR0aCkge1xuICAgICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOiB7XG4gICAgICAgICAgb2Zmc2V0LnggPSB3IC0gbWluV2lkdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRvcFwiOlxuICAgICAgICBjYXNlIFwiYm90dG9tXCI6IHtcbiAgICAgICAgICBvZmZzZXQueCA9ICh3IC0gbWluV2lkdGgpIC8gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgb2Zmc2V0LnggPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3ID0gbWluV2lkdGg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG9mZnNldC54ID0gdztcbiAgICB3ID0gLXc7XG4gICAgaWYgKHcgPCBtaW5XaWR0aCkge1xuICAgICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOiB7XG4gICAgICAgICAgb2Zmc2V0LnggPSAtdztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgb2Zmc2V0LnggPSAtbWluV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHcgPSBtaW5XaWR0aDtcbiAgICB9XG4gIH1cbiAgaWYgKGggPiAwKSB7XG4gICAgaWYgKGggPCBtaW5IZWlnaHQpIHtcbiAgICAgIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjoge1xuICAgICAgICAgIG9mZnNldC55ID0gaCAtIG1pbkhlaWdodDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgY2FzZSBcImxlZnRcIjoge1xuICAgICAgICAgIG9mZnNldC55ID0gKGggLSBtaW5IZWlnaHQpIC8gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgb2Zmc2V0LnkgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBoID0gbWluSGVpZ2h0O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBvZmZzZXQueSA9IGg7XG4gICAgaCA9IC1oO1xuICAgIGlmIChoIDwgbWluSGVpZ2h0KSB7XG4gICAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgICAgY2FzZSBcInRvcFwiOlxuICAgICAgICBjYXNlIFwidG9wX3JpZ2h0XCI6IHtcbiAgICAgICAgICBvZmZzZXQueSA9IC1oO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBvZmZzZXQueSA9IC1taW5IZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGggPSBtaW5IZWlnaHQ7XG4gICAgfVxuICB9XG4gIGNvbnN0IHsgeCwgeSB9ID0gb2Zmc2V0LnJvdChzaGFwZS5yb3RhdGlvbikuYWRkKG5ld1BvaW50KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5zaGFwZSxcbiAgICB4LFxuICAgIHksXG4gICAgcHJvcHM6IHtcbiAgICAgIHc6IE1hdGgubWluKG1heFdpZHRoLCB3KSxcbiAgICAgIGg6IE1hdGgubWluKG1heEhlaWdodCwgaClcbiAgICB9XG4gIH07XG59XG5leHBvcnQge1xuICByZXNpemVCb3hcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNpemVCb3gubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseBoxShapeTool: () => (/* binding */ BaseBoxShapeTool)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n/* harmony import */ var _children_Idle_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./children/Idle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs\");\n/* harmony import */ var _children_Pointing_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./children/Pointing.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs\");\n\n\n\nclass BaseBoxShapeTool extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"box\";\n  static initial = \"idle\";\n  static children() {\n    return [_children_Idle_mjs__WEBPACK_IMPORTED_MODULE_1__.Idle, _children_Pointing_mjs__WEBPACK_IMPORTED_MODULE_2__.Pointing];\n  }\n}\n\n//# sourceMappingURL=BaseBoxShapeTool.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL0Jhc2VCb3hTaGFwZVRvb2wubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkM7QUFDRjtBQUNRO0FBQ25ELCtCQUErQixxREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQSxZQUFZLG9EQUFJLEVBQUUsNERBQVE7QUFDMUI7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3Rvb2xzL0Jhc2VCb3hTaGFwZVRvb2wvQmFzZUJveFNoYXBlVG9vbC5tanM/OTRiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi4vU3RhdGVOb2RlLm1qc1wiO1xuaW1wb3J0IHsgSWRsZSB9IGZyb20gXCIuL2NoaWxkcmVuL0lkbGUubWpzXCI7XG5pbXBvcnQgeyBQb2ludGluZyB9IGZyb20gXCIuL2NoaWxkcmVuL1BvaW50aW5nLm1qc1wiO1xuY2xhc3MgQmFzZUJveFNoYXBlVG9vbCBleHRlbmRzIFN0YXRlTm9kZSB7XG4gIHN0YXRpYyBpZCA9IFwiYm94XCI7XG4gIHN0YXRpYyBpbml0aWFsID0gXCJpZGxlXCI7XG4gIHN0YXRpYyBjaGlsZHJlbigpIHtcbiAgICByZXR1cm4gW0lkbGUsIFBvaW50aW5nXTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgQmFzZUJveFNoYXBlVG9vbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VCb3hTaGFwZVRvb2wubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Idle: () => (/* binding */ Idle)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\nclass Idle extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"idle\";\n  onPointerDown(info) {\n    this.parent.transition(\"pointing\", info);\n  }\n  onEnter() {\n    this.editor.setCursor({ type: \"cross\", rotation: 0 });\n  }\n  onCancel() {\n    this.editor.setCurrentTool(\"select\");\n  }\n}\n\n//# sourceMappingURL=Idle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL2NoaWxkcmVuL0lkbGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdEO0FBQ2hELG1CQUFtQixxREFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvdG9vbHMvQmFzZUJveFNoYXBlVG9vbC9jaGlsZHJlbi9JZGxlLm1qcz83Yzg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlTm9kZSB9IGZyb20gXCIuLi8uLi9TdGF0ZU5vZGUubWpzXCI7XG5jbGFzcyBJZGxlIGV4dGVuZHMgU3RhdGVOb2RlIHtcbiAgc3RhdGljIGlkID0gXCJpZGxlXCI7XG4gIG9uUG9pbnRlckRvd24oaW5mbykge1xuICAgIHRoaXMucGFyZW50LnRyYW5zaXRpb24oXCJwb2ludGluZ1wiLCBpbmZvKTtcbiAgfVxuICBvbkVudGVyKCkge1xuICAgIHRoaXMuZWRpdG9yLnNldEN1cnNvcih7IHR5cGU6IFwiY3Jvc3NcIiwgcm90YXRpb246IDAgfSk7XG4gIH1cbiAgb25DYW5jZWwoKSB7XG4gICAgdGhpcy5lZGl0b3Iuc2V0Q3VycmVudFRvb2woXCJzZWxlY3RcIik7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIElkbGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JZGxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pointing: () => (/* binding */ Pointing)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\n\n\n\nclass Pointing extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_3__.StateNode {\n  static id = \"pointing\";\n  wasFocusedOnEnter = false;\n  onEnter() {\n    this.wasFocusedOnEnter = !this.editor.menus.hasAnyOpenMenus();\n  }\n  onPointerMove(info) {\n    if (this.editor.inputs.isDragging) {\n      const { originPagePoint } = this.editor.inputs;\n      const shapeType = this.parent.shapeType;\n      const id = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n      const creatingMarkId = this.editor.markHistoryStoppingPoint(`creating_box:${id}`);\n      this.editor.createShapes([\n        {\n          id,\n          type: shapeType,\n          x: originPagePoint.x,\n          y: originPagePoint.y,\n          props: {\n            w: 1,\n            h: 1\n          }\n        }\n      ]).select(id);\n      const parent = this.parent;\n      this.editor.setCurrentTool(\n        \"select.resizing\",\n        {\n          ...info,\n          target: \"selection\",\n          handle: \"bottom_right\",\n          isCreating: true,\n          creatingMarkId,\n          creationCursorOffset: { x: 1, y: 1 },\n          onInteractionEnd: this.parent.id,\n          onCreate: parent.onCreate ? (shape) => parent.onCreate?.(shape) : void 0\n        }\n        /** satisfies ResizingInfo, defined in main tldraw package  */\n      );\n    }\n  }\n  onPointerUp() {\n    this.complete();\n  }\n  onCancel() {\n    this.cancel();\n  }\n  onComplete() {\n    this.complete();\n  }\n  onInterrupt() {\n    this.cancel();\n  }\n  complete() {\n    const { originPagePoint } = this.editor.inputs;\n    if (!this.wasFocusedOnEnter) {\n      return;\n    }\n    const shapeType = this.parent.shapeType;\n    const id = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n    this.editor.markHistoryStoppingPoint(`creating_box:${id}`);\n    this.editor.createShapes([\n      {\n        id,\n        type: shapeType,\n        x: originPagePoint.x,\n        y: originPagePoint.y\n      }\n    ]);\n    const shape = this.editor.getShape(id);\n    if (!shape) {\n      this.cancel();\n      return;\n    }\n    let { w, h } = shape.props;\n    const delta = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(w / 2, h / 2);\n    const parentTransform = this.editor.getShapeParentTransform(shape);\n    if (parentTransform) delta.rot(-parentTransform.rotation());\n    let scale = 1;\n    if (this.editor.user.getIsDynamicResizeMode()) {\n      scale = 1 / this.editor.getZoomLevel();\n      w *= scale;\n      h *= scale;\n      delta.mul(scale);\n    }\n    const next = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.structuredClone)(shape);\n    next.x = shape.x - delta.x;\n    next.y = shape.y - delta.y;\n    next.props.w = w;\n    next.props.h = h;\n    if (\"scale\" in shape.props) {\n      ;\n      next.props.scale = scale;\n    }\n    this.editor.updateShape(next);\n    this.editor.setSelectedShapes([id]);\n    if (this.editor.getInstanceState().isToolLocked) {\n      this.parent.transition(\"idle\");\n    } else {\n      this.editor.setCurrentTool(\"select.idle\");\n    }\n  }\n  cancel() {\n    this.parent.transition(\"idle\");\n  }\n}\n\n//# sourceMappingURL=Pointing.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL2NoaWxkcmVuL1BvaW50aW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNEO0FBQ0s7QUFDTDtBQUNoRCx1QkFBdUIscURBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBLGlCQUFpQiwrREFBYTtBQUM5QixrRkFBa0YsR0FBRztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsWUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLCtEQUFhO0FBQzVCLHlEQUF5RCxHQUFHO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCLHNCQUFzQixvREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOERBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvdG9vbHMvQmFzZUJveFNoYXBlVG9vbC9jaGlsZHJlbi9Qb2ludGluZy5tanM/NTYyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTaGFwZUlkIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IHN0cnVjdHVyZWRDbG9uZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5pbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi4vLi4vU3RhdGVOb2RlLm1qc1wiO1xuY2xhc3MgUG9pbnRpbmcgZXh0ZW5kcyBTdGF0ZU5vZGUge1xuICBzdGF0aWMgaWQgPSBcInBvaW50aW5nXCI7XG4gIHdhc0ZvY3VzZWRPbkVudGVyID0gZmFsc2U7XG4gIG9uRW50ZXIoKSB7XG4gICAgdGhpcy53YXNGb2N1c2VkT25FbnRlciA9ICF0aGlzLmVkaXRvci5tZW51cy5oYXNBbnlPcGVuTWVudXMoKTtcbiAgfVxuICBvblBvaW50ZXJNb3ZlKGluZm8pIHtcbiAgICBpZiAodGhpcy5lZGl0b3IuaW5wdXRzLmlzRHJhZ2dpbmcpIHtcbiAgICAgIGNvbnN0IHsgb3JpZ2luUGFnZVBvaW50IH0gPSB0aGlzLmVkaXRvci5pbnB1dHM7XG4gICAgICBjb25zdCBzaGFwZVR5cGUgPSB0aGlzLnBhcmVudC5zaGFwZVR5cGU7XG4gICAgICBjb25zdCBpZCA9IGNyZWF0ZVNoYXBlSWQoKTtcbiAgICAgIGNvbnN0IGNyZWF0aW5nTWFya0lkID0gdGhpcy5lZGl0b3IubWFya0hpc3RvcnlTdG9wcGluZ1BvaW50KGBjcmVhdGluZ19ib3g6JHtpZH1gKTtcbiAgICAgIHRoaXMuZWRpdG9yLmNyZWF0ZVNoYXBlcyhbXG4gICAgICAgIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0eXBlOiBzaGFwZVR5cGUsXG4gICAgICAgICAgeDogb3JpZ2luUGFnZVBvaW50LngsXG4gICAgICAgICAgeTogb3JpZ2luUGFnZVBvaW50LnksXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIHc6IDEsXG4gICAgICAgICAgICBoOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKS5zZWxlY3QoaWQpO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICB0aGlzLmVkaXRvci5zZXRDdXJyZW50VG9vbChcbiAgICAgICAgXCJzZWxlY3QucmVzaXppbmdcIixcbiAgICAgICAge1xuICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgICAgdGFyZ2V0OiBcInNlbGVjdGlvblwiLFxuICAgICAgICAgIGhhbmRsZTogXCJib3R0b21fcmlnaHRcIixcbiAgICAgICAgICBpc0NyZWF0aW5nOiB0cnVlLFxuICAgICAgICAgIGNyZWF0aW5nTWFya0lkLFxuICAgICAgICAgIGNyZWF0aW9uQ3Vyc29yT2Zmc2V0OiB7IHg6IDEsIHk6IDEgfSxcbiAgICAgICAgICBvbkludGVyYWN0aW9uRW5kOiB0aGlzLnBhcmVudC5pZCxcbiAgICAgICAgICBvbkNyZWF0ZTogcGFyZW50Lm9uQ3JlYXRlID8gKHNoYXBlKSA9PiBwYXJlbnQub25DcmVhdGU/LihzaGFwZSkgOiB2b2lkIDBcbiAgICAgICAgfVxuICAgICAgICAvKiogc2F0aXNmaWVzIFJlc2l6aW5nSW5mbywgZGVmaW5lZCBpbiBtYWluIHRsZHJhdyBwYWNrYWdlIPCfmKcgKi9cbiAgICAgICk7XG4gICAgfVxuICB9XG4gIG9uUG9pbnRlclVwKCkge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgfVxuICBvbkNhbmNlbCgpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xuICB9XG4gIG9uQ29tcGxldGUoKSB7XG4gICAgdGhpcy5jb21wbGV0ZSgpO1xuICB9XG4gIG9uSW50ZXJydXB0KCkge1xuICAgIHRoaXMuY2FuY2VsKCk7XG4gIH1cbiAgY29tcGxldGUoKSB7XG4gICAgY29uc3QgeyBvcmlnaW5QYWdlUG9pbnQgfSA9IHRoaXMuZWRpdG9yLmlucHV0cztcbiAgICBpZiAoIXRoaXMud2FzRm9jdXNlZE9uRW50ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hhcGVUeXBlID0gdGhpcy5wYXJlbnQuc2hhcGVUeXBlO1xuICAgIGNvbnN0IGlkID0gY3JlYXRlU2hhcGVJZCgpO1xuICAgIHRoaXMuZWRpdG9yLm1hcmtIaXN0b3J5U3RvcHBpbmdQb2ludChgY3JlYXRpbmdfYm94OiR7aWR9YCk7XG4gICAgdGhpcy5lZGl0b3IuY3JlYXRlU2hhcGVzKFtcbiAgICAgIHtcbiAgICAgICAgaWQsXG4gICAgICAgIHR5cGU6IHNoYXBlVHlwZSxcbiAgICAgICAgeDogb3JpZ2luUGFnZVBvaW50LngsXG4gICAgICAgIHk6IG9yaWdpblBhZ2VQb2ludC55XG4gICAgICB9XG4gICAgXSk7XG4gICAgY29uc3Qgc2hhcGUgPSB0aGlzLmVkaXRvci5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFzaGFwZSkge1xuICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHsgdywgaCB9ID0gc2hhcGUucHJvcHM7XG4gICAgY29uc3QgZGVsdGEgPSBuZXcgVmVjKHcgLyAyLCBoIC8gMik7XG4gICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oc2hhcGUpO1xuICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pIGRlbHRhLnJvdCgtcGFyZW50VHJhbnNmb3JtLnJvdGF0aW9uKCkpO1xuICAgIGxldCBzY2FsZSA9IDE7XG4gICAgaWYgKHRoaXMuZWRpdG9yLnVzZXIuZ2V0SXNEeW5hbWljUmVzaXplTW9kZSgpKSB7XG4gICAgICBzY2FsZSA9IDEgLyB0aGlzLmVkaXRvci5nZXRab29tTGV2ZWwoKTtcbiAgICAgIHcgKj0gc2NhbGU7XG4gICAgICBoICo9IHNjYWxlO1xuICAgICAgZGVsdGEubXVsKHNjYWxlKTtcbiAgICB9XG4gICAgY29uc3QgbmV4dCA9IHN0cnVjdHVyZWRDbG9uZShzaGFwZSk7XG4gICAgbmV4dC54ID0gc2hhcGUueCAtIGRlbHRhLng7XG4gICAgbmV4dC55ID0gc2hhcGUueSAtIGRlbHRhLnk7XG4gICAgbmV4dC5wcm9wcy53ID0gdztcbiAgICBuZXh0LnByb3BzLmggPSBoO1xuICAgIGlmIChcInNjYWxlXCIgaW4gc2hhcGUucHJvcHMpIHtcbiAgICAgIDtcbiAgICAgIG5leHQucHJvcHMuc2NhbGUgPSBzY2FsZTtcbiAgICB9XG4gICAgdGhpcy5lZGl0b3IudXBkYXRlU2hhcGUobmV4dCk7XG4gICAgdGhpcy5lZGl0b3Iuc2V0U2VsZWN0ZWRTaGFwZXMoW2lkXSk7XG4gICAgaWYgKHRoaXMuZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc1Rvb2xMb2NrZWQpIHtcbiAgICAgIHRoaXMucGFyZW50LnRyYW5zaXRpb24oXCJpZGxlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVkaXRvci5zZXRDdXJyZW50VG9vbChcInNlbGVjdC5pZGxlXCIpO1xuICAgIH1cbiAgfVxuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5wYXJlbnQudHJhbnNpdGlvbihcImlkbGVcIik7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFBvaW50aW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootState: () => (/* binding */ RootState)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\nclass RootState extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"root\";\n  static initial = \"\";\n  static children() {\n    return [];\n  }\n  onKeyDown(info) {\n    switch (info.code) {\n      case \"KeyZ\": {\n        if (!(info.shiftKey || info.ctrlKey)) {\n          const currentTool = this.getCurrent();\n          if (currentTool && currentTool.getCurrent()?.id === \"idle\" && this.children[\"zoom\"]) {\n            this.editor.setCurrentTool(\"zoom\", { ...info, onInteractionEnd: currentTool.id });\n          }\n        }\n        break;\n      }\n    }\n  }\n}\n\n//# sourceMappingURL=RootState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9Sb290U3RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHdCQUF3QixxREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDJDQUEyQztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3Rvb2xzL1Jvb3RTdGF0ZS5tanM/YWZkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi9TdGF0ZU5vZGUubWpzXCI7XG5jbGFzcyBSb290U3RhdGUgZXh0ZW5kcyBTdGF0ZU5vZGUge1xuICBzdGF0aWMgaWQgPSBcInJvb3RcIjtcbiAgc3RhdGljIGluaXRpYWwgPSBcIlwiO1xuICBzdGF0aWMgY2hpbGRyZW4oKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIG9uS2V5RG93bihpbmZvKSB7XG4gICAgc3dpdGNoIChpbmZvLmNvZGUpIHtcbiAgICAgIGNhc2UgXCJLZXlaXCI6IHtcbiAgICAgICAgaWYgKCEoaW5mby5zaGlmdEtleSB8fCBpbmZvLmN0cmxLZXkpKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudFRvb2wgPSB0aGlzLmdldEN1cnJlbnQoKTtcbiAgICAgICAgICBpZiAoY3VycmVudFRvb2wgJiYgY3VycmVudFRvb2wuZ2V0Q3VycmVudCgpPy5pZCA9PT0gXCJpZGxlXCIgJiYgdGhpcy5jaGlsZHJlbltcInpvb21cIl0pIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldEN1cnJlbnRUb29sKFwiem9vbVwiLCB7IC4uLmluZm8sIG9uSW50ZXJhY3Rpb25FbmQ6IGN1cnJlbnRUb29sLmlkIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFJvb3RTdGF0ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvb3RTdGF0ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateNode: () => (/* binding */ StateNode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _types_event_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/event-types.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\");\n\n\n\n\nconst STATE_NODES_TO_MEASURE = [\n  \"brushing\",\n  \"cropping\",\n  \"dragging\",\n  \"dragging_handle\",\n  \"drawing\",\n  \"erasing\",\n  \"lasering\",\n  \"resizing\",\n  \"rotating\",\n  \"scribble_brushing\",\n  \"translating\"\n];\nclass StateNode {\n  constructor(editor, parent) {\n    this.editor = editor;\n    const { id, children, initial, isLockable } = this.constructor;\n    this.id = id;\n    this._isActive = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"toolIsActive\" + this.id, false);\n    this._current = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"toolState\" + this.id, void 0);\n    this._path = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"toolPath\" + this.id, () => {\n      const current = this.getCurrent();\n      return this.id + (current ? `.${current.getPath()}` : \"\");\n    });\n    this.parent = parent ?? {};\n    if (this.parent) {\n      if (children && initial) {\n        this.type = \"branch\";\n        this.initial = initial;\n        this.children = Object.fromEntries(\n          children().map((Ctor) => [Ctor.id, new Ctor(this.editor, this)])\n        );\n        this._current.set(this.children[this.initial]);\n      } else {\n        this.type = \"leaf\";\n      }\n    } else {\n      this.type = \"root\";\n      if (children && initial) {\n        this.initial = initial;\n        this.children = Object.fromEntries(\n          children().map((Ctor) => [Ctor.id, new Ctor(this.editor, this)])\n        );\n        this._current.set(this.children[this.initial]);\n      }\n    }\n    this.isLockable = isLockable;\n    this.performanceTracker = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.PerformanceTracker();\n  }\n  performanceTracker;\n  static id;\n  static initial;\n  static children;\n  static isLockable = true;\n  id;\n  type;\n  shapeType;\n  initial;\n  children;\n  isLockable;\n  parent;\n  /**\n   * This node's path of active state nodes\n   *\n   * @public\n   */\n  getPath() {\n    return this._path.get();\n  }\n  _path;\n  /**\n   * This node's current active child node, if any.\n   *\n   * @public\n   */\n  getCurrent() {\n    return this._current.get();\n  }\n  _current;\n  /**\n   * Whether this node is active.\n   *\n   * @public\n   */\n  getIsActive() {\n    return this._isActive.get();\n  }\n  _isActive;\n  /**\n   * Transition to a new active child state node.\n   *\n   * @example\n   * ```ts\n   * parentState.transition('childStateA')\n   * parentState.transition('childStateB', { myData: 4 })\n   *```\n   *\n   * @param id - The id of the child state node to transition to.\n   * @param info - Any data to pass to the `onEnter` and `onExit` handlers.\n   *\n   * @public\n   */\n  transition(id, info = {}) {\n    const path = id.split(\".\");\n    let currState = this;\n    for (let i = 0; i < path.length; i++) {\n      const id2 = path[i];\n      const prevChildState = currState.getCurrent();\n      const nextChildState = currState.children?.[id2];\n      if (!nextChildState) {\n        throw Error(`${currState.id} - no child state exists with the id ${id2}.`);\n      }\n      if (prevChildState?.id !== nextChildState.id) {\n        prevChildState?.exit(info, id2);\n        currState._current.set(nextChildState);\n        nextChildState.enter(info, prevChildState?.id || \"initial\");\n        if (!nextChildState.getIsActive()) break;\n      }\n      currState = nextChildState;\n    }\n    return this;\n  }\n  handleEvent(info) {\n    const cbName = _types_event_types_mjs__WEBPACK_IMPORTED_MODULE_3__.EVENT_NAME_MAP[info.name];\n    const currentActiveChild = this._current.__unsafe__getWithoutCapture();\n    this[cbName]?.(info);\n    if (this._isActive.__unsafe__getWithoutCapture() && currentActiveChild && currentActiveChild === this._current.__unsafe__getWithoutCapture()) {\n      currentActiveChild.handleEvent(info);\n    }\n  }\n  // todo: move this logic into transition\n  enter(info, from) {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.measurePerformance.get() && STATE_NODES_TO_MEASURE.includes(this.id)) {\n      this.performanceTracker.start(this.id);\n    }\n    this._isActive.set(true);\n    this.onEnter?.(info, from);\n    if (this.children && this.initial && this.getIsActive()) {\n      const initial = this.children[this.initial];\n      this._current.set(initial);\n      initial.enter(info, from);\n    }\n  }\n  // todo: move this logic into transition\n  exit(info, from) {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.measurePerformance.get() && this.performanceTracker.isStarted()) {\n      this.performanceTracker.stop();\n    }\n    this._isActive.set(false);\n    this.onExit?.(info, from);\n    if (!this.getIsActive()) {\n      this.getCurrent()?.exit(info, from);\n    }\n  }\n  /**\n   * This is a hack / escape hatch that will tell the editor to\n   * report a different state as active (in `getCurrentToolId()`) when\n   * this state is active. This is usually used when a tool transitions\n   * to a child of a different state for a certain interaction and then\n   * returns to the original tool when that interaction completes; and\n   * where we would want to show the original tool as active in the UI.\n   *\n   * @public\n   */\n  _currentToolIdMask = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"curent tool id mask\", void 0);\n  getCurrentToolIdMask() {\n    return this._currentToolIdMask.get();\n  }\n  setCurrentToolIdMask(id) {\n    this._currentToolIdMask.set(id);\n  }\n}\n\n//# sourceMappingURL=StateNode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9TdGF0ZU5vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQStDO0FBQ0k7QUFDTTtBQUd2QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0NBQW9DO0FBQ2hEO0FBQ0EscUJBQXFCLG1EQUFJO0FBQ3pCLG9CQUFvQixtREFBSTtBQUN4QixpQkFBaUIsdURBQVE7QUFDekI7QUFDQSxzQ0FBc0Msa0JBQWtCO0FBQ3hELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2REFBa0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjLHNDQUFzQyxJQUFJO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrRUFBYztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1EQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvdG9vbHMvU3RhdGVOb2RlLm1qcz83OGU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIGNvbXB1dGVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IFBlcmZvcm1hbmNlVHJhY2tlciB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBkZWJ1Z0ZsYWdzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RlYnVnLWZsYWdzLm1qc1wiO1xuaW1wb3J0IHtcbiAgRVZFTlRfTkFNRV9NQVBcbn0gZnJvbSBcIi4uL3R5cGVzL2V2ZW50LXR5cGVzLm1qc1wiO1xuY29uc3QgU1RBVEVfTk9ERVNfVE9fTUVBU1VSRSA9IFtcbiAgXCJicnVzaGluZ1wiLFxuICBcImNyb3BwaW5nXCIsXG4gIFwiZHJhZ2dpbmdcIixcbiAgXCJkcmFnZ2luZ19oYW5kbGVcIixcbiAgXCJkcmF3aW5nXCIsXG4gIFwiZXJhc2luZ1wiLFxuICBcImxhc2VyaW5nXCIsXG4gIFwicmVzaXppbmdcIixcbiAgXCJyb3RhdGluZ1wiLFxuICBcInNjcmliYmxlX2JydXNoaW5nXCIsXG4gIFwidHJhbnNsYXRpbmdcIlxuXTtcbmNsYXNzIFN0YXRlTm9kZSB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvciwgcGFyZW50KSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgY29uc3QgeyBpZCwgY2hpbGRyZW4sIGluaXRpYWwsIGlzTG9ja2FibGUgfSA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuX2lzQWN0aXZlID0gYXRvbShcInRvb2xJc0FjdGl2ZVwiICsgdGhpcy5pZCwgZmFsc2UpO1xuICAgIHRoaXMuX2N1cnJlbnQgPSBhdG9tKFwidG9vbFN0YXRlXCIgKyB0aGlzLmlkLCB2b2lkIDApO1xuICAgIHRoaXMuX3BhdGggPSBjb21wdXRlZChcInRvb2xQYXRoXCIgKyB0aGlzLmlkLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXRDdXJyZW50KCk7XG4gICAgICByZXR1cm4gdGhpcy5pZCArIChjdXJyZW50ID8gYC4ke2N1cnJlbnQuZ2V0UGF0aCgpfWAgOiBcIlwiKTtcbiAgICB9KTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudCA/PyB7fTtcbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIGlmIChjaGlsZHJlbiAmJiBpbml0aWFsKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiYnJhbmNoXCI7XG4gICAgICAgIHRoaXMuaW5pdGlhbCA9IGluaXRpYWw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgY2hpbGRyZW4oKS5tYXAoKEN0b3IpID0+IFtDdG9yLmlkLCBuZXcgQ3Rvcih0aGlzLmVkaXRvciwgdGhpcyldKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9jdXJyZW50LnNldCh0aGlzLmNoaWxkcmVuW3RoaXMuaW5pdGlhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50eXBlID0gXCJsZWFmXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudHlwZSA9IFwicm9vdFwiO1xuICAgICAgaWYgKGNoaWxkcmVuICYmIGluaXRpYWwpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsID0gaW5pdGlhbDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICBjaGlsZHJlbigpLm1hcCgoQ3RvcikgPT4gW0N0b3IuaWQsIG5ldyBDdG9yKHRoaXMuZWRpdG9yLCB0aGlzKV0pXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX2N1cnJlbnQuc2V0KHRoaXMuY2hpbGRyZW5bdGhpcy5pbml0aWFsXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaXNMb2NrYWJsZSA9IGlzTG9ja2FibGU7XG4gICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIgPSBuZXcgUGVyZm9ybWFuY2VUcmFja2VyKCk7XG4gIH1cbiAgcGVyZm9ybWFuY2VUcmFja2VyO1xuICBzdGF0aWMgaWQ7XG4gIHN0YXRpYyBpbml0aWFsO1xuICBzdGF0aWMgY2hpbGRyZW47XG4gIHN0YXRpYyBpc0xvY2thYmxlID0gdHJ1ZTtcbiAgaWQ7XG4gIHR5cGU7XG4gIHNoYXBlVHlwZTtcbiAgaW5pdGlhbDtcbiAgY2hpbGRyZW47XG4gIGlzTG9ja2FibGU7XG4gIHBhcmVudDtcbiAgLyoqXG4gICAqIFRoaXMgbm9kZSdzIHBhdGggb2YgYWN0aXZlIHN0YXRlIG5vZGVzXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFBhdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdGguZ2V0KCk7XG4gIH1cbiAgX3BhdGg7XG4gIC8qKlxuICAgKiBUaGlzIG5vZGUncyBjdXJyZW50IGFjdGl2ZSBjaGlsZCBub2RlLCBpZiBhbnkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQuZ2V0KCk7XG4gIH1cbiAgX2N1cnJlbnQ7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyBhY3RpdmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldElzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0FjdGl2ZS5nZXQoKTtcbiAgfVxuICBfaXNBY3RpdmU7XG4gIC8qKlxuICAgKiBUcmFuc2l0aW9uIHRvIGEgbmV3IGFjdGl2ZSBjaGlsZCBzdGF0ZSBub2RlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBwYXJlbnRTdGF0ZS50cmFuc2l0aW9uKCdjaGlsZFN0YXRlQScpXG4gICAqIHBhcmVudFN0YXRlLnRyYW5zaXRpb24oJ2NoaWxkU3RhdGVCJywgeyBteURhdGE6IDQgfSlcbiAgICpgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBjaGlsZCBzdGF0ZSBub2RlIHRvIHRyYW5zaXRpb24gdG8uXG4gICAqIEBwYXJhbSBpbmZvIC0gQW55IGRhdGEgdG8gcGFzcyB0byB0aGUgYG9uRW50ZXJgIGFuZCBgb25FeGl0YCBoYW5kbGVycy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdHJhbnNpdGlvbihpZCwgaW5mbyA9IHt9KSB7XG4gICAgY29uc3QgcGF0aCA9IGlkLnNwbGl0KFwiLlwiKTtcbiAgICBsZXQgY3VyclN0YXRlID0gdGhpcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGlkMiA9IHBhdGhbaV07XG4gICAgICBjb25zdCBwcmV2Q2hpbGRTdGF0ZSA9IGN1cnJTdGF0ZS5nZXRDdXJyZW50KCk7XG4gICAgICBjb25zdCBuZXh0Q2hpbGRTdGF0ZSA9IGN1cnJTdGF0ZS5jaGlsZHJlbj8uW2lkMl07XG4gICAgICBpZiAoIW5leHRDaGlsZFN0YXRlKSB7XG4gICAgICAgIHRocm93IEVycm9yKGAke2N1cnJTdGF0ZS5pZH0gLSBubyBjaGlsZCBzdGF0ZSBleGlzdHMgd2l0aCB0aGUgaWQgJHtpZDJ9LmApO1xuICAgICAgfVxuICAgICAgaWYgKHByZXZDaGlsZFN0YXRlPy5pZCAhPT0gbmV4dENoaWxkU3RhdGUuaWQpIHtcbiAgICAgICAgcHJldkNoaWxkU3RhdGU/LmV4aXQoaW5mbywgaWQyKTtcbiAgICAgICAgY3VyclN0YXRlLl9jdXJyZW50LnNldChuZXh0Q2hpbGRTdGF0ZSk7XG4gICAgICAgIG5leHRDaGlsZFN0YXRlLmVudGVyKGluZm8sIHByZXZDaGlsZFN0YXRlPy5pZCB8fCBcImluaXRpYWxcIik7XG4gICAgICAgIGlmICghbmV4dENoaWxkU3RhdGUuZ2V0SXNBY3RpdmUoKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBjdXJyU3RhdGUgPSBuZXh0Q2hpbGRTdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgaGFuZGxlRXZlbnQoaW5mbykge1xuICAgIGNvbnN0IGNiTmFtZSA9IEVWRU5UX05BTUVfTUFQW2luZm8ubmFtZV07XG4gICAgY29uc3QgY3VycmVudEFjdGl2ZUNoaWxkID0gdGhpcy5fY3VycmVudC5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKTtcbiAgICB0aGlzW2NiTmFtZV0/LihpbmZvKTtcbiAgICBpZiAodGhpcy5faXNBY3RpdmUuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCkgJiYgY3VycmVudEFjdGl2ZUNoaWxkICYmIGN1cnJlbnRBY3RpdmVDaGlsZCA9PT0gdGhpcy5fY3VycmVudC5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKSkge1xuICAgICAgY3VycmVudEFjdGl2ZUNoaWxkLmhhbmRsZUV2ZW50KGluZm8pO1xuICAgIH1cbiAgfVxuICAvLyB0b2RvOiBtb3ZlIHRoaXMgbG9naWMgaW50byB0cmFuc2l0aW9uXG4gIGVudGVyKGluZm8sIGZyb20pIHtcbiAgICBpZiAoZGVidWdGbGFncy5tZWFzdXJlUGVyZm9ybWFuY2UuZ2V0KCkgJiYgU1RBVEVfTk9ERVNfVE9fTUVBU1VSRS5pbmNsdWRlcyh0aGlzLmlkKSkge1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIuc3RhcnQodGhpcy5pZCk7XG4gICAgfVxuICAgIHRoaXMuX2lzQWN0aXZlLnNldCh0cnVlKTtcbiAgICB0aGlzLm9uRW50ZXI/LihpbmZvLCBmcm9tKTtcbiAgICBpZiAodGhpcy5jaGlsZHJlbiAmJiB0aGlzLmluaXRpYWwgJiYgdGhpcy5nZXRJc0FjdGl2ZSgpKSB7XG4gICAgICBjb25zdCBpbml0aWFsID0gdGhpcy5jaGlsZHJlblt0aGlzLmluaXRpYWxdO1xuICAgICAgdGhpcy5fY3VycmVudC5zZXQoaW5pdGlhbCk7XG4gICAgICBpbml0aWFsLmVudGVyKGluZm8sIGZyb20pO1xuICAgIH1cbiAgfVxuICAvLyB0b2RvOiBtb3ZlIHRoaXMgbG9naWMgaW50byB0cmFuc2l0aW9uXG4gIGV4aXQoaW5mbywgZnJvbSkge1xuICAgIGlmIChkZWJ1Z0ZsYWdzLm1lYXN1cmVQZXJmb3JtYW5jZS5nZXQoKSAmJiB0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIuc3RvcCgpO1xuICAgIH1cbiAgICB0aGlzLl9pc0FjdGl2ZS5zZXQoZmFsc2UpO1xuICAgIHRoaXMub25FeGl0Py4oaW5mbywgZnJvbSk7XG4gICAgaWYgKCF0aGlzLmdldElzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuZ2V0Q3VycmVudCgpPy5leGl0KGluZm8sIGZyb20pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGhpcyBpcyBhIGhhY2sgLyBlc2NhcGUgaGF0Y2ggdGhhdCB3aWxsIHRlbGwgdGhlIGVkaXRvciB0b1xuICAgKiByZXBvcnQgYSBkaWZmZXJlbnQgc3RhdGUgYXMgYWN0aXZlIChpbiBgZ2V0Q3VycmVudFRvb2xJZCgpYCkgd2hlblxuICAgKiB0aGlzIHN0YXRlIGlzIGFjdGl2ZS4gVGhpcyBpcyB1c3VhbGx5IHVzZWQgd2hlbiBhIHRvb2wgdHJhbnNpdGlvbnNcbiAgICogdG8gYSBjaGlsZCBvZiBhIGRpZmZlcmVudCBzdGF0ZSBmb3IgYSBjZXJ0YWluIGludGVyYWN0aW9uIGFuZCB0aGVuXG4gICAqIHJldHVybnMgdG8gdGhlIG9yaWdpbmFsIHRvb2wgd2hlbiB0aGF0IGludGVyYWN0aW9uIGNvbXBsZXRlczsgYW5kXG4gICAqIHdoZXJlIHdlIHdvdWxkIHdhbnQgdG8gc2hvdyB0aGUgb3JpZ2luYWwgdG9vbCBhcyBhY3RpdmUgaW4gdGhlIFVJLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBfY3VycmVudFRvb2xJZE1hc2sgPSBhdG9tKFwiY3VyZW50IHRvb2wgaWQgbWFza1wiLCB2b2lkIDApO1xuICBnZXRDdXJyZW50VG9vbElkTWFzaygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFRvb2xJZE1hc2suZ2V0KCk7XG4gIH1cbiAgc2V0Q3VycmVudFRvb2xJZE1hc2soaWQpIHtcbiAgICB0aGlzLl9jdXJyZW50VG9vbElkTWFzay5zZXQoaWQpO1xuICB9XG59XG5leHBvcnQge1xuICBTdGF0ZU5vZGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZU5vZGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SvgExportContextProvider: () => (/* binding */ SvgExportContextProvider),\n/* harmony export */   useDelaySvgExport: () => (/* binding */ useDelaySvgExport),\n/* harmony export */   useSvgExportContext: () => (/* binding */ useSvgExportContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n\n\n\n\n\nconst Context = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nfunction SvgExportContextProvider({\n  context,\n  editor,\n  children\n}) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Context.Provider, { value: context, children }) });\n}\nfunction useSvgExportContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(Context);\n}\nfunction useDelaySvgExport() {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(Context);\n  const [promise] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.promiseWithResolve);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    ctx?.waitUntil(promise);\n    return () => {\n      promise.resolve();\n    };\n  }, [promise, ctx]);\n  return (0,_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_4__.useEvent)(() => {\n    promise.resolve();\n  });\n}\n\n//# sourceMappingURL=SvgExportContext.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90eXBlcy9TdmdFeHBvcnRDb250ZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3QztBQUNXO0FBQ29CO0FBQ2I7QUFDTjtBQUNwRCxnQkFBZ0Isb0RBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QseUJBQXlCLHNEQUFHLENBQUMsK0RBQWEsYUFBYSx5Q0FBeUMsc0RBQUcscUJBQXFCLDBCQUEwQixHQUFHO0FBQ3JKO0FBQ0E7QUFDQSxTQUFTLGlEQUFVO0FBQ25CO0FBQ0E7QUFDQSxjQUFjLGlEQUFVO0FBQ3hCLG9CQUFvQiwrQ0FBUSxDQUFDLDZEQUFrQjtBQUMvQyxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyw2REFBUTtBQUNqQjtBQUNBLEdBQUc7QUFDSDtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3R5cGVzL1N2Z0V4cG9ydENvbnRleHQubWpzPzdlYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBwcm9taXNlV2l0aFJlc29sdmUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRWRpdG9yQ29udGV4dCB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFdmVudCB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFdmVudC5tanNcIjtcbmNvbnN0IENvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gU3ZnRXhwb3J0Q29udGV4dFByb3ZpZGVyKHtcbiAgY29udGV4dCxcbiAgZWRpdG9yLFxuICBjaGlsZHJlblxufSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBlZGl0b3IsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNvbnRleHQsIGNoaWxkcmVuIH0pIH0pO1xufVxuZnVuY3Rpb24gdXNlU3ZnRXhwb3J0Q29udGV4dCgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQ29udGV4dCk7XG59XG5mdW5jdGlvbiB1c2VEZWxheVN2Z0V4cG9ydCgpIHtcbiAgY29uc3QgY3R4ID0gdXNlQ29udGV4dChDb250ZXh0KTtcbiAgY29uc3QgW3Byb21pc2VdID0gdXNlU3RhdGUocHJvbWlzZVdpdGhSZXNvbHZlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjdHg/LndhaXRVbnRpbChwcm9taXNlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgfSwgW3Byb21pc2UsIGN0eF0pO1xuICByZXR1cm4gdXNlRXZlbnQoKCkgPT4ge1xuICAgIHByb21pc2UucmVzb2x2ZSgpO1xuICB9KTtcbn1cbmV4cG9ydCB7XG4gIFN2Z0V4cG9ydENvbnRleHRQcm92aWRlcixcbiAgdXNlRGVsYXlTdmdFeHBvcnQsXG4gIHVzZVN2Z0V4cG9ydENvbnRleHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdmdFeHBvcnRDb250ZXh0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EVENT_NAME_MAP: () => (/* binding */ EVENT_NAME_MAP)\n/* harmony export */ });\nconst EVENT_NAME_MAP = {\n  wheel: \"onWheel\",\n  pointer_down: \"onPointerDown\",\n  pointer_move: \"onPointerMove\",\n  long_press: \"onLongPress\",\n  pointer_up: \"onPointerUp\",\n  right_click: \"onRightClick\",\n  middle_click: \"onMiddleClick\",\n  key_down: \"onKeyDown\",\n  key_up: \"onKeyUp\",\n  key_repeat: \"onKeyRepeat\",\n  cancel: \"onCancel\",\n  complete: \"onComplete\",\n  interrupt: \"onInterrupt\",\n  double_click: \"onDoubleClick\",\n  triple_click: \"onTripleClick\",\n  quadruple_click: \"onQuadrupleClick\",\n  tick: \"onTick\"\n};\n\n//# sourceMappingURL=event-types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90eXBlcy9ldmVudC10eXBlcy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvdHlwZXMvZXZlbnQtdHlwZXMubWpzPzc4NTYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRVZFTlRfTkFNRV9NQVAgPSB7XG4gIHdoZWVsOiBcIm9uV2hlZWxcIixcbiAgcG9pbnRlcl9kb3duOiBcIm9uUG9pbnRlckRvd25cIixcbiAgcG9pbnRlcl9tb3ZlOiBcIm9uUG9pbnRlck1vdmVcIixcbiAgbG9uZ19wcmVzczogXCJvbkxvbmdQcmVzc1wiLFxuICBwb2ludGVyX3VwOiBcIm9uUG9pbnRlclVwXCIsXG4gIHJpZ2h0X2NsaWNrOiBcIm9uUmlnaHRDbGlja1wiLFxuICBtaWRkbGVfY2xpY2s6IFwib25NaWRkbGVDbGlja1wiLFxuICBrZXlfZG93bjogXCJvbktleURvd25cIixcbiAga2V5X3VwOiBcIm9uS2V5VXBcIixcbiAga2V5X3JlcGVhdDogXCJvbktleVJlcGVhdFwiLFxuICBjYW5jZWw6IFwib25DYW5jZWxcIixcbiAgY29tcGxldGU6IFwib25Db21wbGV0ZVwiLFxuICBpbnRlcnJ1cHQ6IFwib25JbnRlcnJ1cHRcIixcbiAgZG91YmxlX2NsaWNrOiBcIm9uRG91YmxlQ2xpY2tcIixcbiAgdHJpcGxlX2NsaWNrOiBcIm9uVHJpcGxlQ2xpY2tcIixcbiAgcXVhZHJ1cGxlX2NsaWNrOiBcIm9uUXVhZHJ1cGxlQ2xpY2tcIixcbiAgdGljazogXCJvblRpY2tcIlxufTtcbmV4cG9ydCB7XG4gIEVWRU5UX05BTUVfTUFQXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtdHlwZXMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/ExportDelay.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/ExportDelay.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExportDelay: () => (/* binding */ ExportDelay)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _waitUntil_dec, _init;\n\n_waitUntil_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind];\nclass ExportDelay {\n  constructor(maxDelayTimeMs) {\n    this.maxDelayTimeMs = maxDelayTimeMs;\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"isResolved\", false);\n    __publicField(this, \"promisesToWaitFor\", []);\n  }\n  waitUntil(promise) {\n    if (this.isResolved) {\n      throw new Error(\n        \"Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.\"\n      );\n    }\n    this.promisesToWaitFor.push(\n      promise.catch((err) => console.error(\"Error whilst waiting for export:\", err))\n    );\n  }\n  async resolvePromises() {\n    let lastLength = null;\n    while (this.promisesToWaitFor.length !== lastLength) {\n      lastLength = this.promisesToWaitFor.length;\n      await Promise.allSettled(this.promisesToWaitFor);\n      await (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sleep)(0);\n    }\n  }\n  async resolve() {\n    const timeoutPromise = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sleep)(this.maxDelayTimeMs).then(() => \"timeout\");\n    const resolvePromise = this.resolvePromises().then(() => \"resolved\");\n    const result = await Promise.race([timeoutPromise, resolvePromise]);\n    if (result === \"timeout\") {\n      console.warn(\"[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms\");\n    }\n    this.isResolved = true;\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"waitUntil\", _waitUntil_dec, ExportDelay);\n__decoratorMetadata(_init, ExportDelay);\n\n//# sourceMappingURL=ExportDelay.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvRXhwb3J0RGVsYXkubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLHdKQUF3SjtBQUN6TjtBQUNBO0FBQ0Esa0VBQWtFLE9BQU87QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEhBQTBIO0FBQzFIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0NBQXNDLFFBQVE7QUFDOUMsK0NBQStDO0FBQy9DO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRiwrQkFBK0I7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEM7QUFDNUMsa0JBQWtCLCtDQUFJO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0RBQUs7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNERBQTRELG9CQUFvQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZXhwb3J0cy9FeHBvcnREZWxheS5tanM/NmRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2tub3duU3ltYm9sID0gKG5hbWUsIHN5bWJvbCkgPT4gKHN5bWJvbCA9IFN5bWJvbFtuYW1lXSkgPyBzeW1ib2wgOiBTeW1ib2wuZm9yKFwiU3ltYm9sLlwiICsgbmFtZSk7XG52YXIgX190eXBlRXJyb3IgPSAobXNnKSA9PiB7XG4gIHRocm93IFR5cGVFcnJvcihtc2cpO1xufTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX25hbWUgPSAodGFyZ2V0LCB2YWx1ZSkgPT4gX19kZWZQcm9wKHRhcmdldCwgXCJuYW1lXCIsIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbnZhciBfX2RlY29yYXRvclN0YXJ0ID0gKGJhc2UpID0+IFssICwgLCBfX2NyZWF0ZShiYXNlPy5bX19rbm93blN5bWJvbChcIm1ldGFkYXRhXCIpXSA/PyBudWxsKV07XG52YXIgX19kZWNvcmF0b3JTdHJpbmdzID0gW1wiY2xhc3NcIiwgXCJtZXRob2RcIiwgXCJnZXR0ZXJcIiwgXCJzZXR0ZXJcIiwgXCJhY2Nlc3NvclwiLCBcImZpZWxkXCIsIFwidmFsdWVcIiwgXCJnZXRcIiwgXCJzZXRcIl07XG52YXIgX19leHBlY3RGbiA9IChmbikgPT4gZm4gIT09IHZvaWQgMCAmJiB0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIiA/IF9fdHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIikgOiBmbjtcbnZhciBfX2RlY29yYXRvckNvbnRleHQgPSAoa2luZCwgbmFtZSwgZG9uZSwgbWV0YWRhdGEsIGZucykgPT4gKHsga2luZDogX19kZWNvcmF0b3JTdHJpbmdzW2tpbmRdLCBuYW1lLCBtZXRhZGF0YSwgYWRkSW5pdGlhbGl6ZXI6IChmbikgPT4gZG9uZS5fID8gX190eXBlRXJyb3IoXCJBbHJlYWR5IGluaXRpYWxpemVkXCIpIDogZm5zLnB1c2goX19leHBlY3RGbihmbiB8fCBudWxsKSkgfSk7XG52YXIgX19kZWNvcmF0b3JNZXRhZGF0YSA9IChhcnJheSwgdGFyZ2V0KSA9PiBfX2RlZk5vcm1hbFByb3AodGFyZ2V0LCBfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIiksIGFycmF5WzNdKTtcbnZhciBfX3J1bkluaXRpYWxpemVycyA9IChhcnJheSwgZmxhZ3MsIHNlbGYsIHZhbHVlKSA9PiB7XG4gIGZvciAodmFyIGkgPSAwLCBmbnMgPSBhcnJheVtmbGFncyA+PiAxXSwgbiA9IGZucyAmJiBmbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSBmbGFncyAmIDEgPyBmbnNbaV0uY2FsbChzZWxmKSA6IHZhbHVlID0gZm5zW2ldLmNhbGwoc2VsZiwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59O1xudmFyIF9fZGVjb3JhdGVFbGVtZW50ID0gKGFycmF5LCBmbGFncywgbmFtZSwgZGVjb3JhdG9ycywgdGFyZ2V0LCBleHRyYSkgPT4ge1xuICB2YXIgZm4sIGl0LCBkb25lLCBjdHgsIGFjY2VzcywgayA9IGZsYWdzICYgNywgcyA9ICEhKGZsYWdzICYgOCksIHAgPSAhIShmbGFncyAmIDE2KTtcbiAgdmFyIGogPSBrID4gMyA/IGFycmF5Lmxlbmd0aCArIDEgOiBrID8gcyA/IDEgOiAyIDogMCwga2V5ID0gX19kZWNvcmF0b3JTdHJpbmdzW2sgKyA1XTtcbiAgdmFyIGluaXRpYWxpemVycyA9IGsgPiAzICYmIChhcnJheVtqIC0gMV0gPSBbXSksIGV4dHJhSW5pdGlhbGl6ZXJzID0gYXJyYXlbal0gfHwgKGFycmF5W2pdID0gW10pO1xuICB2YXIgZGVzYyA9IGsgJiYgKCFwICYmICFzICYmICh0YXJnZXQgPSB0YXJnZXQucHJvdG90eXBlKSwgayA8IDUgJiYgKGsgPiAzIHx8ICFwKSAmJiBfX2dldE93blByb3BEZXNjKGsgPCA0ID8gdGFyZ2V0IDogeyBnZXQgW25hbWVdKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgZXh0cmEpO1xuICB9LCBzZXQgW25hbWVdKHgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlU2V0KHRoaXMsIGV4dHJhLCB4KTtcbiAgfSB9LCBuYW1lKSk7XG4gIGsgPyBwICYmIGsgPCA0ICYmIF9fbmFtZShleHRyYSwgKGsgPiAyID8gXCJzZXQgXCIgOiBrID4gMSA/IFwiZ2V0IFwiIDogXCJcIikgKyBuYW1lKSA6IF9fbmFtZSh0YXJnZXQsIG5hbWUpO1xuICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGN0eCA9IF9fZGVjb3JhdG9yQ29udGV4dChrLCBuYW1lLCBkb25lID0ge30sIGFycmF5WzNdLCBleHRyYUluaXRpYWxpemVycyk7XG4gICAgaWYgKGspIHtcbiAgICAgIGN0eC5zdGF0aWMgPSBzLCBjdHgucHJpdmF0ZSA9IHAsIGFjY2VzcyA9IGN0eC5hY2Nlc3MgPSB7IGhhczogcCA/ICh4KSA9PiBfX3ByaXZhdGVJbih0YXJnZXQsIHgpIDogKHgpID0+IG5hbWUgaW4geCB9O1xuICAgICAgaWYgKGsgXiAzKSBhY2Nlc3MuZ2V0ID0gcCA/ICh4KSA9PiAoayBeIDEgPyBfX3ByaXZhdGVHZXQgOiBfX3ByaXZhdGVNZXRob2QpKHgsIHRhcmdldCwgayBeIDQgPyBleHRyYSA6IGRlc2MuZ2V0KSA6ICh4KSA9PiB4W25hbWVdO1xuICAgICAgaWYgKGsgPiAyKSBhY2Nlc3Muc2V0ID0gcCA/ICh4LCB5KSA9PiBfX3ByaXZhdGVTZXQoeCwgdGFyZ2V0LCB5LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5zZXQpIDogKHgsIHkpID0+IHhbbmFtZV0gPSB5O1xuICAgIH1cbiAgICBpdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShrID8gayA8IDQgPyBwID8gZXh0cmEgOiBkZXNjW2tleV0gOiBrID4gNCA/IHZvaWQgMCA6IHsgZ2V0OiBkZXNjLmdldCwgc2V0OiBkZXNjLnNldCB9IDogdGFyZ2V0LCBjdHgpLCBkb25lLl8gPSAxO1xuICAgIGlmIChrIF4gNCB8fCBpdCA9PT0gdm9pZCAwKSBfX2V4cGVjdEZuKGl0KSAmJiAoayA+IDQgPyBpbml0aWFsaXplcnMudW5zaGlmdChpdCkgOiBrID8gcCA/IGV4dHJhID0gaXQgOiBkZXNjW2tleV0gPSBpdCA6IHRhcmdldCA9IGl0KTtcbiAgICBlbHNlIGlmICh0eXBlb2YgaXQgIT09IFwib2JqZWN0XCIgfHwgaXQgPT09IG51bGwpIF9fdHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgIGVsc2UgX19leHBlY3RGbihmbiA9IGl0LmdldCkgJiYgKGRlc2MuZ2V0ID0gZm4pLCBfX2V4cGVjdEZuKGZuID0gaXQuc2V0KSAmJiAoZGVzYy5zZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5pbml0KSAmJiBpbml0aWFsaXplcnMudW5zaGlmdChmbik7XG4gIH1cbiAgcmV0dXJuIGsgfHwgX19kZWNvcmF0b3JNZXRhZGF0YShhcnJheSwgdGFyZ2V0KSwgZGVzYyAmJiBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCBkZXNjKSwgcCA/IGsgXiA0ID8gZXh0cmEgOiBkZXNjIDogdGFyZ2V0O1xufTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG52YXIgX19wcml2YXRlSW4gPSAobWVtYmVyLCBvYmopID0+IE9iamVjdChvYmopICE9PSBvYmogPyBfX3R5cGVFcnJvcignQ2Fubm90IHVzZSB0aGUgXCJpblwiIG9wZXJhdG9yIG9uIHRoaXMgdmFsdWUnKSA6IG1lbWJlci5oYXMob2JqKTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIiksIGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiBtZW1iZXIuZ2V0KG9iaikpO1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZFwiKSwgc2V0dGVyID8gc2V0dGVyLmNhbGwob2JqLCB2YWx1ZSkgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpLCB2YWx1ZSk7XG52YXIgX19wcml2YXRlTWV0aG9kID0gKG9iaiwgbWVtYmVyLCBtZXRob2QpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcImFjY2VzcyBwcml2YXRlIG1ldGhvZFwiKSwgbWV0aG9kKTtcbnZhciBfd2FpdFVudGlsX2RlYywgX2luaXQ7XG5pbXBvcnQgeyBiaW5kLCBzbGVlcCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5fd2FpdFVudGlsX2RlYyA9IFtiaW5kXTtcbmNsYXNzIEV4cG9ydERlbGF5IHtcbiAgY29uc3RydWN0b3IobWF4RGVsYXlUaW1lTXMpIHtcbiAgICB0aGlzLm1heERlbGF5VGltZU1zID0gbWF4RGVsYXlUaW1lTXM7XG4gICAgX19ydW5Jbml0aWFsaXplcnMoX2luaXQsIDUsIHRoaXMpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpc1Jlc29sdmVkXCIsIGZhbHNlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicHJvbWlzZXNUb1dhaXRGb3JcIiwgW10pO1xuICB9XG4gIHdhaXRVbnRpbChwcm9taXNlKSB7XG4gICAgaWYgKHRoaXMuaXNSZXNvbHZlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBgd2FpdFVudGlsYCAtIHRoZSBleHBvcnQgaGFzIGFscmVhZHkgYmVlbiByZXNvbHZlZC4gTWFrZSBzdXJlIHRvIGNhbGwgYHdhaXRVbnRpbGAgYXMgc29vbiBhcyBwb3NzaWJsZSBkdXJpbmcgYW4gZXhwb3J0IC0gaWUgd2l0aGluIHRoZSBmaXJzdCByZWFjdCBlZmZlY3QgYWZ0ZXIgcmVuZGVyaW5nLlwiXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnByb21pc2VzVG9XYWl0Rm9yLnB1c2goXG4gICAgICBwcm9taXNlLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsc3Qgd2FpdGluZyBmb3IgZXhwb3J0OlwiLCBlcnIpKVxuICAgICk7XG4gIH1cbiAgYXN5bmMgcmVzb2x2ZVByb21pc2VzKCkge1xuICAgIGxldCBsYXN0TGVuZ3RoID0gbnVsbDtcbiAgICB3aGlsZSAodGhpcy5wcm9taXNlc1RvV2FpdEZvci5sZW5ndGggIT09IGxhc3RMZW5ndGgpIHtcbiAgICAgIGxhc3RMZW5ndGggPSB0aGlzLnByb21pc2VzVG9XYWl0Rm9yLmxlbmd0aDtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCh0aGlzLnByb21pc2VzVG9XYWl0Rm9yKTtcbiAgICAgIGF3YWl0IHNsZWVwKDApO1xuICAgIH1cbiAgfVxuICBhc3luYyByZXNvbHZlKCkge1xuICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gc2xlZXAodGhpcy5tYXhEZWxheVRpbWVNcykudGhlbigoKSA9PiBcInRpbWVvdXRcIik7XG4gICAgY29uc3QgcmVzb2x2ZVByb21pc2UgPSB0aGlzLnJlc29sdmVQcm9taXNlcygpLnRoZW4oKCkgPT4gXCJyZXNvbHZlZFwiKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLnJhY2UoW3RpbWVvdXRQcm9taXNlLCByZXNvbHZlUHJvbWlzZV0pO1xuICAgIGlmIChyZXN1bHQgPT09IFwidGltZW91dFwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJbdGxkcmF3XSBFeHBvcnQgZGVsYXkgdGltZWQgb3V0IGFmdGVyICR7dGhpcy5tYXhEZWxheVRpbWVNc31tc1wiKTtcbiAgICB9XG4gICAgdGhpcy5pc1Jlc29sdmVkID0gdHJ1ZTtcbiAgfVxufVxuX2luaXQgPSBfX2RlY29yYXRvclN0YXJ0KG51bGwpO1xuX19kZWNvcmF0ZUVsZW1lbnQoX2luaXQsIDEsIFwid2FpdFVudGlsXCIsIF93YWl0VW50aWxfZGVjLCBFeHBvcnREZWxheSk7XG5fX2RlY29yYXRvck1ldGFkYXRhKF9pbml0LCBFeHBvcnREZWxheSk7XG5leHBvcnQge1xuICBFeHBvcnREZWxheVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cG9ydERlbGF5Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/ExportDelay.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/FontEmbedder.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/FontEmbedder.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FontEmbedder: () => (/* binding */ FontEmbedder)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _fetchCache_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetchCache.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs\");\n/* harmony import */ var _parseCss_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parseCss.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/parseCss.mjs\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __knownSymbol = (name, symbol) => (symbol = Symbol[name]) ? symbol : Symbol.for(\"Symbol.\" + name);\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __decoratorStart = (base) => [, , , __create(base?.[__knownSymbol(\"metadata\")] ?? null)];\nvar __decoratorStrings = [\"class\", \"method\", \"getter\", \"setter\", \"accessor\", \"field\", \"value\", \"get\", \"set\"];\nvar __expectFn = (fn) => fn !== void 0 && typeof fn !== \"function\" ? __typeError(\"Function expected\") : fn;\nvar __decoratorContext = (kind, name, done, metadata, fns) => ({ kind: __decoratorStrings[kind], name, metadata, addInitializer: (fn) => done._ ? __typeError(\"Already initialized\") : fns.push(__expectFn(fn || null)) });\nvar __decoratorMetadata = (array, target) => __defNormalProp(target, __knownSymbol(\"metadata\"), array[3]);\nvar __runInitializers = (array, flags, self, value) => {\n  for (var i = 0, fns = array[flags >> 1], n = fns && fns.length; i < n; i++) flags & 1 ? fns[i].call(self) : value = fns[i].call(self, value);\n  return value;\n};\nvar __decorateElement = (array, flags, name, decorators, target, extra) => {\n  var fn, it, done, ctx, access, k = flags & 7, s = !!(flags & 8), p = !!(flags & 16);\n  var j = k > 3 ? array.length + 1 : k ? s ? 1 : 2 : 0, key = __decoratorStrings[k + 5];\n  var initializers = k > 3 && (array[j - 1] = []), extraInitializers = array[j] || (array[j] = []);\n  var desc = k && (!p && !s && (target = target.prototype), k < 5 && (k > 3 || !p) && __getOwnPropDesc(k < 4 ? target : { get [name]() {\n    return __privateGet(this, extra);\n  }, set [name](x) {\n    return __privateSet(this, extra, x);\n  } }, name));\n  k ? p && k < 4 && __name(extra, (k > 2 ? \"set \" : k > 1 ? \"get \" : \"\") + name) : __name(target, name);\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    ctx = __decoratorContext(k, name, done = {}, array[3], extraInitializers);\n    if (k) {\n      ctx.static = s, ctx.private = p, access = ctx.access = { has: p ? (x) => __privateIn(target, x) : (x) => name in x };\n      if (k ^ 3) access.get = p ? (x) => (k ^ 1 ? __privateGet : __privateMethod)(x, target, k ^ 4 ? extra : desc.get) : (x) => x[name];\n      if (k > 2) access.set = p ? (x, y) => __privateSet(x, target, y, k ^ 4 ? extra : desc.set) : (x, y) => x[name] = y;\n    }\n    it = (0, decorators[i])(k ? k < 4 ? p ? extra : desc[key] : k > 4 ? void 0 : { get: desc.get, set: desc.set } : target, ctx), done._ = 1;\n    if (k ^ 4 || it === void 0) __expectFn(it) && (k > 4 ? initializers.unshift(it) : k ? p ? extra = it : desc[key] = it : target = it);\n    else if (typeof it !== \"object\" || it === null) __typeError(\"Object expected\");\n    else __expectFn(fn = it.get) && (desc.get = fn), __expectFn(fn = it.set) && (desc.set = fn), __expectFn(fn = it.init) && initializers.unshift(fn);\n  }\n  return k || __decoratorMetadata(array, target), desc && __defProp(target, name, desc), p ? k ^ 4 ? extra : desc : target;\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateIn = (member, obj) => Object(obj) !== obj ? __typeError('Cannot use the \"in\" operator on this value') : member.has(obj);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _onFontFamilyValue_dec, _init;\n\n\n\n_onFontFamilyValue_dec = [_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.bind];\nclass FontEmbedder {\n  constructor() {\n    __runInitializers(_init, 5, this);\n    __publicField(this, \"fontFacesPromise\", null);\n    __publicField(this, \"foundFontNames\", /* @__PURE__ */ new Set());\n    __publicField(this, \"fontFacesToEmbed\", /* @__PURE__ */ new Set());\n    __publicField(this, \"pendingPromises\", []);\n  }\n  startFindingCurrentDocumentFontFaces() {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.fontFacesPromise, \"FontEmbedder already started\");\n    this.fontFacesPromise = getCurrentDocumentFontFaces();\n  }\n  onFontFamilyValue(fontFamilyValue) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(this.fontFacesPromise, \"FontEmbedder not started\");\n    const fonts = (0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCssFontFamilyValue)(fontFamilyValue);\n    for (const font of fonts) {\n      if (this.foundFontNames.has(font)) return;\n      this.foundFontNames.add(font);\n      this.pendingPromises.push(\n        this.fontFacesPromise.then((fontFaces) => {\n          const relevantFontFaces = fontFaces.filter((fontFace) => fontFace.fontFamilies.has(font));\n          for (const fontFace of relevantFontFaces) {\n            if (this.fontFacesToEmbed.has(fontFace)) continue;\n            this.fontFacesToEmbed.add(fontFace);\n            for (const url of fontFace.urls) {\n              if (!url.resolved || url.embedded) continue;\n              url.embedded = (0,_fetchCache_mjs__WEBPACK_IMPORTED_MODULE_1__.resourceToDataUrl)(url.resolved);\n            }\n          }\n        })\n      );\n    }\n  }\n  async createCss() {\n    await Promise.all(this.pendingPromises);\n    let css = \"\";\n    for (const fontFace of this.fontFacesToEmbed) {\n      let fontFaceString = `@font-face {${fontFace.fontFace}}`;\n      for (const url of fontFace.urls) {\n        if (!url.embedded) continue;\n        const dataUrl = await url.embedded;\n        if (!dataUrl) continue;\n        fontFaceString = fontFaceString.replace(url.original, dataUrl);\n      }\n      css += fontFaceString;\n    }\n    return css;\n  }\n}\n_init = __decoratorStart(null);\n__decorateElement(_init, 1, \"onFontFamilyValue\", _onFontFamilyValue_dec, FontEmbedder);\n__decoratorMetadata(_init, FontEmbedder);\nasync function getCurrentDocumentFontFaces() {\n  const fontFaces = [];\n  for (const styleSheet of document.styleSheets) {\n    let cssRules;\n    try {\n      cssRules = styleSheet.cssRules;\n    } catch (err) {\n    }\n    if (cssRules) {\n      for (const rule of styleSheet.cssRules) {\n        if (rule instanceof CSSFontFaceRule) {\n          fontFaces.push((0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCssFontFaces)(rule.cssText, styleSheet.href ?? document.baseURI));\n        } else if (rule instanceof CSSImportRule) {\n          fontFaces.push(fetchCssFontFaces(rule.href));\n        }\n      }\n    } else if (styleSheet.href) {\n      fontFaces.push(fetchCssFontFaces(styleSheet.href));\n    }\n  }\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(await Promise.all(fontFaces)).flat();\n}\nconst fetchCssFontFaces = (0,_fetchCache_mjs__WEBPACK_IMPORTED_MODULE_1__.fetchCache)(async (response) => {\n  const parsed = (0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCss)(await response.text(), response.url);\n  const importedFontFaces = await Promise.all(\n    parsed.imports.map(({ url }) => fetchCssFontFaces(new URL(url, response.url).href))\n  );\n  return [...parsed.fontFaces, ...(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(importedFontFaces).flat()];\n});\n\n//# sourceMappingURL=FontEmbedder.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvRm9udEVtYmVkZGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJLDREQUE0RCwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLHdKQUF3SjtBQUN6TjtBQUNBO0FBQ0Esa0VBQWtFLE9BQU87QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEhBQTBIO0FBQzFIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0NBQXNDLFFBQVE7QUFDOUMsK0NBQStDO0FBQy9DO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRiwrQkFBK0I7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDc0Q7QUFDVztBQUNxQjtBQUN0RiwwQkFBMEIsK0NBQUk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQU07QUFDVixrQkFBa0Isc0VBQXVCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsa0VBQWlCO0FBQzlDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsRUFBRSxtQkFBbUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnRUFBaUI7QUFDMUMsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNEQUFPO0FBQ2hCO0FBQ0EsMEJBQTBCLDJEQUFVO0FBQ3BDLGlCQUFpQix1REFBUTtBQUN6QjtBQUNBLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0Esa0NBQWtDLHNEQUFPO0FBQ3pDLENBQUM7QUFHQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvRm9udEVtYmVkZGVyLm1qcz85MzIzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fa25vd25TeW1ib2wgPSAobmFtZSwgc3ltYm9sKSA9PiAoc3ltYm9sID0gU3ltYm9sW25hbWVdKSA/IHN5bWJvbCA6IFN5bWJvbC5mb3IoXCJTeW1ib2wuXCIgKyBuYW1lKTtcbnZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHtcbiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7XG59O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xudmFyIF9fZGVjb3JhdG9yU3RhcnQgPSAoYmFzZSkgPT4gWywgLCAsIF9fY3JlYXRlKGJhc2U/LltfX2tub3duU3ltYm9sKFwibWV0YWRhdGFcIildID8/IG51bGwpXTtcbnZhciBfX2RlY29yYXRvclN0cmluZ3MgPSBbXCJjbGFzc1wiLCBcIm1ldGhvZFwiLCBcImdldHRlclwiLCBcInNldHRlclwiLCBcImFjY2Vzc29yXCIsIFwiZmllbGRcIiwgXCJ2YWx1ZVwiLCBcImdldFwiLCBcInNldFwiXTtcbnZhciBfX2V4cGVjdEZuID0gKGZuKSA9PiBmbiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiID8gX190eXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKSA6IGZuO1xudmFyIF9fZGVjb3JhdG9yQ29udGV4dCA9IChraW5kLCBuYW1lLCBkb25lLCBtZXRhZGF0YSwgZm5zKSA9PiAoeyBraW5kOiBfX2RlY29yYXRvclN0cmluZ3Nba2luZF0sIG5hbWUsIG1ldGFkYXRhLCBhZGRJbml0aWFsaXplcjogKGZuKSA9PiBkb25lLl8gPyBfX3R5cGVFcnJvcihcIkFscmVhZHkgaW5pdGlhbGl6ZWRcIikgOiBmbnMucHVzaChfX2V4cGVjdEZuKGZuIHx8IG51bGwpKSB9KTtcbnZhciBfX2RlY29yYXRvck1ldGFkYXRhID0gKGFycmF5LCB0YXJnZXQpID0+IF9fZGVmTm9ybWFsUHJvcCh0YXJnZXQsIF9fa25vd25TeW1ib2woXCJtZXRhZGF0YVwiKSwgYXJyYXlbM10pO1xudmFyIF9fcnVuSW5pdGlhbGl6ZXJzID0gKGFycmF5LCBmbGFncywgc2VsZiwgdmFsdWUpID0+IHtcbiAgZm9yICh2YXIgaSA9IDAsIGZucyA9IGFycmF5W2ZsYWdzID4+IDFdLCBuID0gZm5zICYmIGZucy5sZW5ndGg7IGkgPCBuOyBpKyspIGZsYWdzICYgMSA/IGZuc1tpXS5jYWxsKHNlbGYpIDogdmFsdWUgPSBmbnNbaV0uY2FsbChzZWxmLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG52YXIgX19kZWNvcmF0ZUVsZW1lbnQgPSAoYXJyYXksIGZsYWdzLCBuYW1lLCBkZWNvcmF0b3JzLCB0YXJnZXQsIGV4dHJhKSA9PiB7XG4gIHZhciBmbiwgaXQsIGRvbmUsIGN0eCwgYWNjZXNzLCBrID0gZmxhZ3MgJiA3LCBzID0gISEoZmxhZ3MgJiA4KSwgcCA9ICEhKGZsYWdzICYgMTYpO1xuICB2YXIgaiA9IGsgPiAzID8gYXJyYXkubGVuZ3RoICsgMSA6IGsgPyBzID8gMSA6IDIgOiAwLCBrZXkgPSBfX2RlY29yYXRvclN0cmluZ3NbayArIDVdO1xuICB2YXIgaW5pdGlhbGl6ZXJzID0gayA+IDMgJiYgKGFycmF5W2ogLSAxXSA9IFtdKSwgZXh0cmFJbml0aWFsaXplcnMgPSBhcnJheVtqXSB8fCAoYXJyYXlbal0gPSBbXSk7XG4gIHZhciBkZXNjID0gayAmJiAoIXAgJiYgIXMgJiYgKHRhcmdldCA9IHRhcmdldC5wcm90b3R5cGUpLCBrIDwgNSAmJiAoayA+IDMgfHwgIXApICYmIF9fZ2V0T3duUHJvcERlc2MoayA8IDQgPyB0YXJnZXQgOiB7IGdldCBbbmFtZV0oKSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBleHRyYSk7XG4gIH0sIHNldCBbbmFtZV0oeCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVTZXQodGhpcywgZXh0cmEsIHgpO1xuICB9IH0sIG5hbWUpKTtcbiAgayA/IHAgJiYgayA8IDQgJiYgX19uYW1lKGV4dHJhLCAoayA+IDIgPyBcInNldCBcIiA6IGsgPiAxID8gXCJnZXQgXCIgOiBcIlwiKSArIG5hbWUpIDogX19uYW1lKHRhcmdldCwgbmFtZSk7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY3R4ID0gX19kZWNvcmF0b3JDb250ZXh0KGssIG5hbWUsIGRvbmUgPSB7fSwgYXJyYXlbM10sIGV4dHJhSW5pdGlhbGl6ZXJzKTtcbiAgICBpZiAoaykge1xuICAgICAgY3R4LnN0YXRpYyA9IHMsIGN0eC5wcml2YXRlID0gcCwgYWNjZXNzID0gY3R4LmFjY2VzcyA9IHsgaGFzOiBwID8gKHgpID0+IF9fcHJpdmF0ZUluKHRhcmdldCwgeCkgOiAoeCkgPT4gbmFtZSBpbiB4IH07XG4gICAgICBpZiAoayBeIDMpIGFjY2Vzcy5nZXQgPSBwID8gKHgpID0+IChrIF4gMSA/IF9fcHJpdmF0ZUdldCA6IF9fcHJpdmF0ZU1ldGhvZCkoeCwgdGFyZ2V0LCBrIF4gNCA/IGV4dHJhIDogZGVzYy5nZXQpIDogKHgpID0+IHhbbmFtZV07XG4gICAgICBpZiAoayA+IDIpIGFjY2Vzcy5zZXQgPSBwID8gKHgsIHkpID0+IF9fcHJpdmF0ZVNldCh4LCB0YXJnZXQsIHksIGsgXiA0ID8gZXh0cmEgOiBkZXNjLnNldCkgOiAoeCwgeSkgPT4geFtuYW1lXSA9IHk7XG4gICAgfVxuICAgIGl0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGsgPyBrIDwgNCA/IHAgPyBleHRyYSA6IGRlc2Nba2V5XSA6IGsgPiA0ID8gdm9pZCAwIDogeyBnZXQ6IGRlc2MuZ2V0LCBzZXQ6IGRlc2Muc2V0IH0gOiB0YXJnZXQsIGN0eCksIGRvbmUuXyA9IDE7XG4gICAgaWYgKGsgXiA0IHx8IGl0ID09PSB2b2lkIDApIF9fZXhwZWN0Rm4oaXQpICYmIChrID4gNCA/IGluaXRpYWxpemVycy51bnNoaWZ0KGl0KSA6IGsgPyBwID8gZXh0cmEgPSBpdCA6IGRlc2Nba2V5XSA9IGl0IDogdGFyZ2V0ID0gaXQpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBpdCAhPT0gXCJvYmplY3RcIiB8fCBpdCA9PT0gbnVsbCkgX190eXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgZWxzZSBfX2V4cGVjdEZuKGZuID0gaXQuZ2V0KSAmJiAoZGVzYy5nZXQgPSBmbiksIF9fZXhwZWN0Rm4oZm4gPSBpdC5zZXQpICYmIChkZXNjLnNldCA9IGZuKSwgX19leHBlY3RGbihmbiA9IGl0LmluaXQpICYmIGluaXRpYWxpemVycy51bnNoaWZ0KGZuKTtcbiAgfVxuICByZXR1cm4gayB8fCBfX2RlY29yYXRvck1ldGFkYXRhKGFycmF5LCB0YXJnZXQpLCBkZXNjICYmIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIGRlc2MpLCBwID8gayBeIDQgPyBleHRyYSA6IGRlc2MgOiB0YXJnZXQ7XG59O1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4gbWVtYmVyLmhhcyhvYmopIHx8IF9fdHlwZUVycm9yKFwiQ2Fubm90IFwiICsgbXNnKTtcbnZhciBfX3ByaXZhdGVJbiA9IChtZW1iZXIsIG9iaikgPT4gT2JqZWN0KG9iaikgIT09IG9iaiA/IF9fdHlwZUVycm9yKCdDYW5ub3QgdXNlIHRoZSBcImluXCIgb3BlcmF0b3Igb24gdGhpcyB2YWx1ZScpIDogbWVtYmVyLmhhcyhvYmopO1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZFwiKSwgZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKSk7XG52YXIgX19wcml2YXRlU2V0ID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSwgc2V0dGVyKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpLCBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSksIHZhbHVlKTtcbnZhciBfX3ByaXZhdGVNZXRob2QgPSAob2JqLCBtZW1iZXIsIG1ldGhvZCkgPT4gKF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwiYWNjZXNzIHByaXZhdGUgbWV0aG9kXCIpLCBtZXRob2QpO1xudmFyIF9vbkZvbnRGYW1pbHlWYWx1ZV9kZWMsIF9pbml0O1xuaW1wb3J0IHsgYXNzZXJ0LCBiaW5kLCBjb21wYWN0IH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IGZldGNoQ2FjaGUsIHJlc291cmNlVG9EYXRhVXJsIH0gZnJvbSBcIi4vZmV0Y2hDYWNoZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ3NzLCBwYXJzZUNzc0ZvbnRGYWNlcywgcGFyc2VDc3NGb250RmFtaWx5VmFsdWUgfSBmcm9tIFwiLi9wYXJzZUNzcy5tanNcIjtcbl9vbkZvbnRGYW1pbHlWYWx1ZV9kZWMgPSBbYmluZF07XG5jbGFzcyBGb250RW1iZWRkZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBfX3J1bkluaXRpYWxpemVycyhfaW5pdCwgNSwgdGhpcyk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImZvbnRGYWNlc1Byb21pc2VcIiwgbnVsbCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImZvdW5kRm9udE5hbWVzXCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJmb250RmFjZXNUb0VtYmVkXCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwZW5kaW5nUHJvbWlzZXNcIiwgW10pO1xuICB9XG4gIHN0YXJ0RmluZGluZ0N1cnJlbnREb2N1bWVudEZvbnRGYWNlcygpIHtcbiAgICBhc3NlcnQoIXRoaXMuZm9udEZhY2VzUHJvbWlzZSwgXCJGb250RW1iZWRkZXIgYWxyZWFkeSBzdGFydGVkXCIpO1xuICAgIHRoaXMuZm9udEZhY2VzUHJvbWlzZSA9IGdldEN1cnJlbnREb2N1bWVudEZvbnRGYWNlcygpO1xuICB9XG4gIG9uRm9udEZhbWlseVZhbHVlKGZvbnRGYW1pbHlWYWx1ZSkge1xuICAgIGFzc2VydCh0aGlzLmZvbnRGYWNlc1Byb21pc2UsIFwiRm9udEVtYmVkZGVyIG5vdCBzdGFydGVkXCIpO1xuICAgIGNvbnN0IGZvbnRzID0gcGFyc2VDc3NGb250RmFtaWx5VmFsdWUoZm9udEZhbWlseVZhbHVlKTtcbiAgICBmb3IgKGNvbnN0IGZvbnQgb2YgZm9udHMpIHtcbiAgICAgIGlmICh0aGlzLmZvdW5kRm9udE5hbWVzLmhhcyhmb250KSkgcmV0dXJuO1xuICAgICAgdGhpcy5mb3VuZEZvbnROYW1lcy5hZGQoZm9udCk7XG4gICAgICB0aGlzLnBlbmRpbmdQcm9taXNlcy5wdXNoKFxuICAgICAgICB0aGlzLmZvbnRGYWNlc1Byb21pc2UudGhlbigoZm9udEZhY2VzKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVsZXZhbnRGb250RmFjZXMgPSBmb250RmFjZXMuZmlsdGVyKChmb250RmFjZSkgPT4gZm9udEZhY2UuZm9udEZhbWlsaWVzLmhhcyhmb250KSk7XG4gICAgICAgICAgZm9yIChjb25zdCBmb250RmFjZSBvZiByZWxldmFudEZvbnRGYWNlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9udEZhY2VzVG9FbWJlZC5oYXMoZm9udEZhY2UpKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMuZm9udEZhY2VzVG9FbWJlZC5hZGQoZm9udEZhY2UpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB1cmwgb2YgZm9udEZhY2UudXJscykge1xuICAgICAgICAgICAgICBpZiAoIXVybC5yZXNvbHZlZCB8fCB1cmwuZW1iZWRkZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB1cmwuZW1iZWRkZWQgPSByZXNvdXJjZVRvRGF0YVVybCh1cmwucmVzb2x2ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGNyZWF0ZUNzcygpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLnBlbmRpbmdQcm9taXNlcyk7XG4gICAgbGV0IGNzcyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBmb250RmFjZSBvZiB0aGlzLmZvbnRGYWNlc1RvRW1iZWQpIHtcbiAgICAgIGxldCBmb250RmFjZVN0cmluZyA9IGBAZm9udC1mYWNlIHske2ZvbnRGYWNlLmZvbnRGYWNlfX1gO1xuICAgICAgZm9yIChjb25zdCB1cmwgb2YgZm9udEZhY2UudXJscykge1xuICAgICAgICBpZiAoIXVybC5lbWJlZGRlZCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGRhdGFVcmwgPSBhd2FpdCB1cmwuZW1iZWRkZWQ7XG4gICAgICAgIGlmICghZGF0YVVybCkgY29udGludWU7XG4gICAgICAgIGZvbnRGYWNlU3RyaW5nID0gZm9udEZhY2VTdHJpbmcucmVwbGFjZSh1cmwub3JpZ2luYWwsIGRhdGFVcmwpO1xuICAgICAgfVxuICAgICAgY3NzICs9IGZvbnRGYWNlU3RyaW5nO1xuICAgIH1cbiAgICByZXR1cm4gY3NzO1xuICB9XG59XG5faW5pdCA9IF9fZGVjb3JhdG9yU3RhcnQobnVsbCk7XG5fX2RlY29yYXRlRWxlbWVudChfaW5pdCwgMSwgXCJvbkZvbnRGYW1pbHlWYWx1ZVwiLCBfb25Gb250RmFtaWx5VmFsdWVfZGVjLCBGb250RW1iZWRkZXIpO1xuX19kZWNvcmF0b3JNZXRhZGF0YShfaW5pdCwgRm9udEVtYmVkZGVyKTtcbmFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudEZvbnRGYWNlcygpIHtcbiAgY29uc3QgZm9udEZhY2VzID0gW107XG4gIGZvciAoY29uc3Qgc3R5bGVTaGVldCBvZiBkb2N1bWVudC5zdHlsZVNoZWV0cykge1xuICAgIGxldCBjc3NSdWxlcztcbiAgICB0cnkge1xuICAgICAgY3NzUnVsZXMgPSBzdHlsZVNoZWV0LmNzc1J1bGVzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgIH1cbiAgICBpZiAoY3NzUnVsZXMpIHtcbiAgICAgIGZvciAoY29uc3QgcnVsZSBvZiBzdHlsZVNoZWV0LmNzc1J1bGVzKSB7XG4gICAgICAgIGlmIChydWxlIGluc3RhbmNlb2YgQ1NTRm9udEZhY2VSdWxlKSB7XG4gICAgICAgICAgZm9udEZhY2VzLnB1c2gocGFyc2VDc3NGb250RmFjZXMocnVsZS5jc3NUZXh0LCBzdHlsZVNoZWV0LmhyZWYgPz8gZG9jdW1lbnQuYmFzZVVSSSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGUgaW5zdGFuY2VvZiBDU1NJbXBvcnRSdWxlKSB7XG4gICAgICAgICAgZm9udEZhY2VzLnB1c2goZmV0Y2hDc3NGb250RmFjZXMocnVsZS5ocmVmKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0eWxlU2hlZXQuaHJlZikge1xuICAgICAgZm9udEZhY2VzLnB1c2goZmV0Y2hDc3NGb250RmFjZXMoc3R5bGVTaGVldC5ocmVmKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjb21wYWN0KGF3YWl0IFByb21pc2UuYWxsKGZvbnRGYWNlcykpLmZsYXQoKTtcbn1cbmNvbnN0IGZldGNoQ3NzRm9udEZhY2VzID0gZmV0Y2hDYWNoZShhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VDc3MoYXdhaXQgcmVzcG9uc2UudGV4dCgpLCByZXNwb25zZS51cmwpO1xuICBjb25zdCBpbXBvcnRlZEZvbnRGYWNlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgIHBhcnNlZC5pbXBvcnRzLm1hcCgoeyB1cmwgfSkgPT4gZmV0Y2hDc3NGb250RmFjZXMobmV3IFVSTCh1cmwsIHJlc3BvbnNlLnVybCkuaHJlZikpXG4gICk7XG4gIHJldHVybiBbLi4ucGFyc2VkLmZvbnRGYWNlcywgLi4uY29tcGFjdChpbXBvcnRlZEZvbnRGYWNlcykuZmxhdCgpXTtcbn0pO1xuZXhwb3J0IHtcbiAgRm9udEVtYmVkZGVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rm9udEVtYmVkZGVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/FontEmbedder.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/StyleEmbedder.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/StyleEmbedder.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StyleEmbedder: () => (/* binding */ StyleEmbedder)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _FontEmbedder_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FontEmbedder.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/FontEmbedder.mjs\");\n/* harmony import */ var _domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./domUtils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/domUtils.mjs\");\n/* harmony import */ var _fetchCache_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fetchCache.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs\");\n/* harmony import */ var _parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./parseCss.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/parseCss.mjs\");\n\n\n\n\n\nconst NO_STYLES = {};\nclass StyleEmbedder {\n  constructor(root) {\n    this.root = root;\n  }\n  styles = /* @__PURE__ */ new Map();\n  fonts = new _FontEmbedder_mjs__WEBPACK_IMPORTED_MODULE_1__.FontEmbedder();\n  readRootElementStyles(rootElement) {\n    this.readElementStyles(rootElement, {\n      shouldRespectDefaults: false,\n      shouldSkipInheritedParentStyles: false\n    });\n    const children = Array.from((0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getRenderedChildren)(rootElement));\n    while (children.length) {\n      const child = children.pop();\n      children.push(...(0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getRenderedChildren)(child));\n      this.readElementStyles(child, {\n        shouldRespectDefaults: true,\n        shouldSkipInheritedParentStyles: true\n      });\n    }\n  }\n  readElementStyles(element, { shouldRespectDefaults = true, shouldSkipInheritedParentStyles = true }) {\n    const defaultStyles = shouldRespectDefaults ? getDefaultStylesForTagName(element.tagName.toLowerCase()) : NO_STYLES;\n    const parentStyles = shouldSkipInheritedParentStyles ? this.styles.get(element.parentElement)?.self ?? NO_STYLES : NO_STYLES;\n    const info = {\n      self: styleFromElement(element, { defaultStyles, parentStyles }),\n      before: styleFromPseudoElement(element, \"::before\"),\n      after: styleFromPseudoElement(element, \"::after\")\n    };\n    this.styles.set(element, info);\n  }\n  fetchResources() {\n    const promises = [];\n    for (const info of this.styles.values()) {\n      for (const styles of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapValues)(info)) {\n        if (!styles) continue;\n        for (const [property, value] of Object.entries(styles)) {\n          if (!value) continue;\n          if (property === \"font-family\") {\n            this.fonts.onFontFamilyValue(value);\n          }\n          const urlMatches = (0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__.parseCssValueUrls)(value);\n          if (urlMatches.length === 0) continue;\n          promises.push(\n            ...urlMatches.map(async ({ url, original }) => {\n              const dataUrl = (await (0,_fetchCache_mjs__WEBPACK_IMPORTED_MODULE_3__.resourceToDataUrl)(url)) ?? \"data:\";\n              styles[property] = value.replace(original, `url(\"${dataUrl}\")`);\n            })\n          );\n        }\n      }\n    }\n    return Promise.all(promises);\n  }\n  // custom elements are tricky. if we serialize the dom as-is, the custom elements wont have\n  // their shadow-dom contents serialized. after we've read all the styles, we need to unwrap the\n  // contents of each custom elements shadow dom directly into the parent element itself.\n  unwrapCustomElements() {\n    const visited = /* @__PURE__ */ new Set();\n    const visit = (element, clonedParent) => {\n      if (visited.has(element)) return;\n      visited.add(element);\n      const shadowRoot = element.shadowRoot;\n      if (shadowRoot) {\n        const clonedCustomEl = document.createElement(\"div\");\n        this.styles.set(clonedCustomEl, this.styles.get(element));\n        clonedCustomEl.setAttribute(\"data-tl-custom-element\", element.tagName);\n        (clonedParent ?? element.parentElement).appendChild(clonedCustomEl);\n        for (const child of shadowRoot.childNodes) {\n          if (child instanceof Element) {\n            visit(child, clonedCustomEl);\n          } else {\n            clonedCustomEl.appendChild(child.cloneNode(true));\n          }\n        }\n        element.remove();\n      } else if (clonedParent) {\n        if (element.tagName.toLowerCase() === \"style\") {\n          return;\n        }\n        const clonedEl = element.cloneNode(false);\n        this.styles.set(clonedEl, this.styles.get(element));\n        clonedParent.appendChild(clonedEl);\n        for (const child of (0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getRenderedChildNodes)(element)) {\n          if (child instanceof Element) {\n            visit(child, clonedEl);\n          } else {\n            clonedEl.appendChild(child.cloneNode(true));\n          }\n        }\n      }\n    };\n    for (const element of this.styles.keys()) {\n      visit(element, null);\n    }\n  }\n  embedStyles() {\n    let css = \"\";\n    for (const [element, info] of this.styles) {\n      if (info.after || info.before) {\n        const className = `pseudo-${(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniqueId)()}`;\n        element.classList.add(className);\n        if (info.before) {\n          css += `.${className}::before {${formatCss(info.before)}}\n`;\n        }\n        if (info.after) {\n          css += `.${className}::after {${formatCss(info.after)}}\n`;\n        }\n      }\n      const style = (0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.elementStyle)(element);\n      for (const [property, value] of Object.entries(info.self)) {\n        if (!value) continue;\n        style.setProperty(property, value);\n      }\n      if (style.fontKerning === \"auto\") {\n        style.fontKerning = \"normal\";\n      }\n    }\n    return css;\n  }\n  async getFontFaceCss() {\n    return await this.fonts.createCss();\n  }\n  dispose() {\n    destroyDefaultStyleFrame();\n  }\n}\nfunction styleFromElement(element, { defaultStyles, parentStyles }) {\n  if (element.computedStyleMap) {\n    return styleFromComputedStyleMap(element.computedStyleMap(), { defaultStyles, parentStyles });\n  }\n  return styleFromComputedStyle((0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getComputedStyle)(element), { defaultStyles, parentStyles });\n}\nfunction styleFromPseudoElement(element, pseudo) {\n  const style = (0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getComputedStyle)(element, pseudo);\n  const content = style.getPropertyValue(\"content\");\n  if (content === \"\" || content === \"none\") {\n    return void 0;\n  }\n  return styleFromComputedStyle(style, { defaultStyles: NO_STYLES, parentStyles: NO_STYLES });\n}\nfunction styleFromComputedStyleMap(style, { defaultStyles, parentStyles }) {\n  const styles = {};\n  for (const property of style.keys()) {\n    if (!(0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__.shouldIncludeCssProperty)(property)) continue;\n    const value = style.get(property).toString();\n    if (defaultStyles[property] === value) continue;\n    if (parentStyles[property] === value && (0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__.isPropertyInherited)(property)) continue;\n    styles[property] = value;\n  }\n  return styles;\n}\nfunction styleFromComputedStyle(style, { defaultStyles, parentStyles }) {\n  const styles = {};\n  for (const property of style) {\n    if (!(0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__.shouldIncludeCssProperty)(property)) continue;\n    const value = style.getPropertyValue(property);\n    if (defaultStyles[property] === value) continue;\n    if (parentStyles[property] === value && (0,_parseCss_mjs__WEBPACK_IMPORTED_MODULE_4__.isPropertyInherited)(property)) continue;\n    styles[property] = value;\n  }\n  return styles;\n}\nfunction formatCss(style) {\n  let cssText = \"\";\n  for (const [property, value] of Object.entries(style)) {\n    cssText += `${property}: ${value};`;\n  }\n  return cssText;\n}\nlet defaultStyleFrame;\nconst defaultStylesByTagName = {};\nfunction getDefaultStyleFrame() {\n  if (!defaultStyleFrame) {\n    const frame = document.createElement(\"iframe\");\n    frame.style.display = \"none\";\n    document.body.appendChild(frame);\n    const frameDocument = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assertExists)(frame.contentDocument, \"frame must have a document\");\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    const foreignObject = document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\");\n    svg.appendChild(foreignObject);\n    frameDocument.body.appendChild(svg);\n    defaultStyleFrame = { iframe: frame, foreignObject, document: frameDocument };\n  }\n  return defaultStyleFrame;\n}\nfunction destroyDefaultStyleFrame() {\n  if (defaultStyleFrame) {\n    document.body.removeChild(defaultStyleFrame.iframe);\n    defaultStyleFrame = void 0;\n  }\n}\nconst defaultStyleReadOptions = { defaultStyles: NO_STYLES, parentStyles: NO_STYLES };\nfunction getDefaultStylesForTagName(tagName) {\n  let existing = defaultStylesByTagName[tagName];\n  if (!existing) {\n    const { foreignObject, document: document2 } = getDefaultStyleFrame();\n    const element = document2.createElement(tagName);\n    foreignObject.appendChild(element);\n    existing = element.computedStyleMap ? styleFromComputedStyleMap(element.computedStyleMap(), defaultStyleReadOptions) : styleFromComputedStyle((0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.getComputedStyle)(element), defaultStyleReadOptions);\n    foreignObject.removeChild(element);\n    defaultStylesByTagName[tagName] = existing;\n  }\n  return existing;\n}\n\n//# sourceMappingURL=StyleEmbedder.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvU3R5bGVFbWJlZGRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdFO0FBQ3RCO0FBTTFCO0FBQzZCO0FBQzZDO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0NBQWdDLGtFQUFtQjtBQUNuRDtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLCtCQUErQixzRUFBc0U7QUFDckc7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDZCQUE2QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhEQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnRUFBaUI7QUFDOUM7QUFDQTtBQUNBLHVDQUF1QyxlQUFlO0FBQ3RELHFDQUFxQyxrRUFBaUI7QUFDdEQsaUVBQWlFLFFBQVE7QUFDekUsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9FQUFxQjtBQUNqRDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHVEQUFRLEdBQUc7QUFDL0M7QUFDQTtBQUNBLHFCQUFxQixVQUFVLFVBQVUsRUFBRTtBQUMzQztBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsVUFBVSxTQUFTLEVBQUU7QUFDMUM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJEQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNkJBQTZCO0FBQ2xFO0FBQ0EsbUVBQW1FLDZCQUE2QjtBQUNoRztBQUNBLGdDQUFnQywrREFBZ0IsYUFBYSw2QkFBNkI7QUFDMUY7QUFDQTtBQUNBLGdCQUFnQiwrREFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsbURBQW1EO0FBQzVGO0FBQ0EsNENBQTRDLDZCQUE2QjtBQUN6RTtBQUNBO0FBQ0EsU0FBUyx1RUFBd0I7QUFDakM7QUFDQTtBQUNBLDRDQUE0QyxrRUFBbUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkJBQTZCO0FBQ3RFO0FBQ0E7QUFDQSxTQUFTLHVFQUF3QjtBQUNqQztBQUNBO0FBQ0EsNENBQTRDLGtFQUFtQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTLElBQUksT0FBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxQ0FBcUM7QUFDakQ7QUFDQTtBQUNBLGtKQUFrSiwrREFBZ0I7QUFDbEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZXhwb3J0cy9TdHlsZUVtYmVkZGVyLm1qcz9mZjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydEV4aXN0cywgb2JqZWN0TWFwVmFsdWVzLCB1bmlxdWVJZCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBGb250RW1iZWRkZXIgfSBmcm9tIFwiLi9Gb250RW1iZWRkZXIubWpzXCI7XG5pbXBvcnQge1xuICBlbGVtZW50U3R5bGUsXG4gIGdldENvbXB1dGVkU3R5bGUsXG4gIGdldFJlbmRlcmVkQ2hpbGROb2RlcyxcbiAgZ2V0UmVuZGVyZWRDaGlsZHJlblxufSBmcm9tIFwiLi9kb21VdGlscy5tanNcIjtcbmltcG9ydCB7IHJlc291cmNlVG9EYXRhVXJsIH0gZnJvbSBcIi4vZmV0Y2hDYWNoZS5tanNcIjtcbmltcG9ydCB7IGlzUHJvcGVydHlJbmhlcml0ZWQsIHBhcnNlQ3NzVmFsdWVVcmxzLCBzaG91bGRJbmNsdWRlQ3NzUHJvcGVydHkgfSBmcm9tIFwiLi9wYXJzZUNzcy5tanNcIjtcbmNvbnN0IE5PX1NUWUxFUyA9IHt9O1xuY2xhc3MgU3R5bGVFbWJlZGRlciB7XG4gIGNvbnN0cnVjdG9yKHJvb3QpIHtcbiAgICB0aGlzLnJvb3QgPSByb290O1xuICB9XG4gIHN0eWxlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGZvbnRzID0gbmV3IEZvbnRFbWJlZGRlcigpO1xuICByZWFkUm9vdEVsZW1lbnRTdHlsZXMocm9vdEVsZW1lbnQpIHtcbiAgICB0aGlzLnJlYWRFbGVtZW50U3R5bGVzKHJvb3RFbGVtZW50LCB7XG4gICAgICBzaG91bGRSZXNwZWN0RGVmYXVsdHM6IGZhbHNlLFxuICAgICAgc2hvdWxkU2tpcEluaGVyaXRlZFBhcmVudFN0eWxlczogZmFsc2VcbiAgICB9KTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20oZ2V0UmVuZGVyZWRDaGlsZHJlbihyb290RWxlbWVudCkpO1xuICAgIHdoaWxlIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW4ucG9wKCk7XG4gICAgICBjaGlsZHJlbi5wdXNoKC4uLmdldFJlbmRlcmVkQ2hpbGRyZW4oY2hpbGQpKTtcbiAgICAgIHRoaXMucmVhZEVsZW1lbnRTdHlsZXMoY2hpbGQsIHtcbiAgICAgICAgc2hvdWxkUmVzcGVjdERlZmF1bHRzOiB0cnVlLFxuICAgICAgICBzaG91bGRTa2lwSW5oZXJpdGVkUGFyZW50U3R5bGVzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmVhZEVsZW1lbnRTdHlsZXMoZWxlbWVudCwgeyBzaG91bGRSZXNwZWN0RGVmYXVsdHMgPSB0cnVlLCBzaG91bGRTa2lwSW5oZXJpdGVkUGFyZW50U3R5bGVzID0gdHJ1ZSB9KSB7XG4gICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHNob3VsZFJlc3BlY3REZWZhdWx0cyA/IGdldERlZmF1bHRTdHlsZXNGb3JUYWdOYW1lKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSA6IE5PX1NUWUxFUztcbiAgICBjb25zdCBwYXJlbnRTdHlsZXMgPSBzaG91bGRTa2lwSW5oZXJpdGVkUGFyZW50U3R5bGVzID8gdGhpcy5zdHlsZXMuZ2V0KGVsZW1lbnQucGFyZW50RWxlbWVudCk/LnNlbGYgPz8gTk9fU1RZTEVTIDogTk9fU1RZTEVTO1xuICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICBzZWxmOiBzdHlsZUZyb21FbGVtZW50KGVsZW1lbnQsIHsgZGVmYXVsdFN0eWxlcywgcGFyZW50U3R5bGVzIH0pLFxuICAgICAgYmVmb3JlOiBzdHlsZUZyb21Qc2V1ZG9FbGVtZW50KGVsZW1lbnQsIFwiOjpiZWZvcmVcIiksXG4gICAgICBhZnRlcjogc3R5bGVGcm9tUHNldWRvRWxlbWVudChlbGVtZW50LCBcIjo6YWZ0ZXJcIilcbiAgICB9O1xuICAgIHRoaXMuc3R5bGVzLnNldChlbGVtZW50LCBpbmZvKTtcbiAgfVxuICBmZXRjaFJlc291cmNlcygpIHtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgaW5mbyBvZiB0aGlzLnN0eWxlcy52YWx1ZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBzdHlsZXMgb2Ygb2JqZWN0TWFwVmFsdWVzKGluZm8pKSB7XG4gICAgICAgIGlmICghc3R5bGVzKSBjb250aW51ZTtcbiAgICAgICAgZm9yIChjb25zdCBbcHJvcGVydHksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZXMpKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgY29udGludWU7XG4gICAgICAgICAgaWYgKHByb3BlcnR5ID09PSBcImZvbnQtZmFtaWx5XCIpIHtcbiAgICAgICAgICAgIHRoaXMuZm9udHMub25Gb250RmFtaWx5VmFsdWUodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cmxNYXRjaGVzID0gcGFyc2VDc3NWYWx1ZVVybHModmFsdWUpO1xuICAgICAgICAgIGlmICh1cmxNYXRjaGVzLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgIC4uLnVybE1hdGNoZXMubWFwKGFzeW5jICh7IHVybCwgb3JpZ2luYWwgfSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gKGF3YWl0IHJlc291cmNlVG9EYXRhVXJsKHVybCkpID8/IFwiZGF0YTpcIjtcbiAgICAgICAgICAgICAgc3R5bGVzW3Byb3BlcnR5XSA9IHZhbHVlLnJlcGxhY2Uob3JpZ2luYWwsIGB1cmwoXCIke2RhdGFVcmx9XCIpYCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxuICAvLyBjdXN0b20gZWxlbWVudHMgYXJlIHRyaWNreS4gaWYgd2Ugc2VyaWFsaXplIHRoZSBkb20gYXMtaXMsIHRoZSBjdXN0b20gZWxlbWVudHMgd29udCBoYXZlXG4gIC8vIHRoZWlyIHNoYWRvdy1kb20gY29udGVudHMgc2VyaWFsaXplZC4gYWZ0ZXIgd2UndmUgcmVhZCBhbGwgdGhlIHN0eWxlcywgd2UgbmVlZCB0byB1bndyYXAgdGhlXG4gIC8vIGNvbnRlbnRzIG9mIGVhY2ggY3VzdG9tIGVsZW1lbnRzIHNoYWRvdyBkb20gZGlyZWN0bHkgaW50byB0aGUgcGFyZW50IGVsZW1lbnQgaXRzZWxmLlxuICB1bndyYXBDdXN0b21FbGVtZW50cygpIHtcbiAgICBjb25zdCB2aXNpdGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBjb25zdCB2aXNpdCA9IChlbGVtZW50LCBjbG9uZWRQYXJlbnQpID0+IHtcbiAgICAgIGlmICh2aXNpdGVkLmhhcyhlbGVtZW50KSkgcmV0dXJuO1xuICAgICAgdmlzaXRlZC5hZGQoZWxlbWVudCk7XG4gICAgICBjb25zdCBzaGFkb3dSb290ID0gZWxlbWVudC5zaGFkb3dSb290O1xuICAgICAgaWYgKHNoYWRvd1Jvb3QpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkQ3VzdG9tRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnN0eWxlcy5zZXQoY2xvbmVkQ3VzdG9tRWwsIHRoaXMuc3R5bGVzLmdldChlbGVtZW50KSk7XG4gICAgICAgIGNsb25lZEN1c3RvbUVsLnNldEF0dHJpYnV0ZShcImRhdGEtdGwtY3VzdG9tLWVsZW1lbnRcIiwgZWxlbWVudC50YWdOYW1lKTtcbiAgICAgICAgKGNsb25lZFBhcmVudCA/PyBlbGVtZW50LnBhcmVudEVsZW1lbnQpLmFwcGVuZENoaWxkKGNsb25lZEN1c3RvbUVsKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBzaGFkb3dSb290LmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICB2aXNpdChjaGlsZCwgY2xvbmVkQ3VzdG9tRWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbG9uZWRDdXN0b21FbC5hcHBlbmRDaGlsZChjaGlsZC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRQYXJlbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xvbmVkRWwgPSBlbGVtZW50LmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgIHRoaXMuc3R5bGVzLnNldChjbG9uZWRFbCwgdGhpcy5zdHlsZXMuZ2V0KGVsZW1lbnQpKTtcbiAgICAgICAgY2xvbmVkUGFyZW50LmFwcGVuZENoaWxkKGNsb25lZEVsKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBnZXRSZW5kZXJlZENoaWxkTm9kZXMoZWxlbWVudCkpIHtcbiAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICB2aXNpdChjaGlsZCwgY2xvbmVkRWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbG9uZWRFbC5hcHBlbmRDaGlsZChjaGlsZC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuc3R5bGVzLmtleXMoKSkge1xuICAgICAgdmlzaXQoZWxlbWVudCwgbnVsbCk7XG4gICAgfVxuICB9XG4gIGVtYmVkU3R5bGVzKCkge1xuICAgIGxldCBjc3MgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgW2VsZW1lbnQsIGluZm9dIG9mIHRoaXMuc3R5bGVzKSB7XG4gICAgICBpZiAoaW5mby5hZnRlciB8fCBpbmZvLmJlZm9yZSkge1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBgcHNldWRvLSR7dW5pcXVlSWQoKX1gO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGluZm8uYmVmb3JlKSB7XG4gICAgICAgICAgY3NzICs9IGAuJHtjbGFzc05hbWV9OjpiZWZvcmUgeyR7Zm9ybWF0Q3NzKGluZm8uYmVmb3JlKX19XG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLmFmdGVyKSB7XG4gICAgICAgICAgY3NzICs9IGAuJHtjbGFzc05hbWV9OjphZnRlciB7JHtmb3JtYXRDc3MoaW5mby5hZnRlcil9fVxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50U3R5bGUoZWxlbWVudCk7XG4gICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGluZm8uc2VsZikpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkgY29udGludWU7XG4gICAgICAgIHN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGUuZm9udEtlcm5pbmcgPT09IFwiYXV0b1wiKSB7XG4gICAgICAgIHN0eWxlLmZvbnRLZXJuaW5nID0gXCJub3JtYWxcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNzcztcbiAgfVxuICBhc3luYyBnZXRGb250RmFjZUNzcygpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mb250cy5jcmVhdGVDc3MoKTtcbiAgfVxuICBkaXNwb3NlKCkge1xuICAgIGRlc3Ryb3lEZWZhdWx0U3R5bGVGcmFtZSgpO1xuICB9XG59XG5mdW5jdGlvbiBzdHlsZUZyb21FbGVtZW50KGVsZW1lbnQsIHsgZGVmYXVsdFN0eWxlcywgcGFyZW50U3R5bGVzIH0pIHtcbiAgaWYgKGVsZW1lbnQuY29tcHV0ZWRTdHlsZU1hcCkge1xuICAgIHJldHVybiBzdHlsZUZyb21Db21wdXRlZFN0eWxlTWFwKGVsZW1lbnQuY29tcHV0ZWRTdHlsZU1hcCgpLCB7IGRlZmF1bHRTdHlsZXMsIHBhcmVudFN0eWxlcyB9KTtcbiAgfVxuICByZXR1cm4gc3R5bGVGcm9tQ29tcHV0ZWRTdHlsZShnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLCB7IGRlZmF1bHRTdHlsZXMsIHBhcmVudFN0eWxlcyB9KTtcbn1cbmZ1bmN0aW9uIHN0eWxlRnJvbVBzZXVkb0VsZW1lbnQoZWxlbWVudCwgcHNldWRvKSB7XG4gIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBwc2V1ZG8pO1xuICBjb25zdCBjb250ZW50ID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImNvbnRlbnRcIik7XG4gIGlmIChjb250ZW50ID09PSBcIlwiIHx8IGNvbnRlbnQgPT09IFwibm9uZVwiKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICByZXR1cm4gc3R5bGVGcm9tQ29tcHV0ZWRTdHlsZShzdHlsZSwgeyBkZWZhdWx0U3R5bGVzOiBOT19TVFlMRVMsIHBhcmVudFN0eWxlczogTk9fU1RZTEVTIH0pO1xufVxuZnVuY3Rpb24gc3R5bGVGcm9tQ29tcHV0ZWRTdHlsZU1hcChzdHlsZSwgeyBkZWZhdWx0U3R5bGVzLCBwYXJlbnRTdHlsZXMgfSkge1xuICBjb25zdCBzdHlsZXMgPSB7fTtcbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBzdHlsZS5rZXlzKCkpIHtcbiAgICBpZiAoIXNob3VsZEluY2x1ZGVDc3NQcm9wZXJ0eShwcm9wZXJ0eSkpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHZhbHVlID0gc3R5bGUuZ2V0KHByb3BlcnR5KS50b1N0cmluZygpO1xuICAgIGlmIChkZWZhdWx0U3R5bGVzW3Byb3BlcnR5XSA9PT0gdmFsdWUpIGNvbnRpbnVlO1xuICAgIGlmIChwYXJlbnRTdHlsZXNbcHJvcGVydHldID09PSB2YWx1ZSAmJiBpc1Byb3BlcnR5SW5oZXJpdGVkKHByb3BlcnR5KSkgY29udGludWU7XG4gICAgc3R5bGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG5mdW5jdGlvbiBzdHlsZUZyb21Db21wdXRlZFN0eWxlKHN0eWxlLCB7IGRlZmF1bHRTdHlsZXMsIHBhcmVudFN0eWxlcyB9KSB7XG4gIGNvbnN0IHN0eWxlcyA9IHt9O1xuICBmb3IgKGNvbnN0IHByb3BlcnR5IG9mIHN0eWxlKSB7XG4gICAgaWYgKCFzaG91bGRJbmNsdWRlQ3NzUHJvcGVydHkocHJvcGVydHkpKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWx1ZSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICAgIGlmIChkZWZhdWx0U3R5bGVzW3Byb3BlcnR5XSA9PT0gdmFsdWUpIGNvbnRpbnVlO1xuICAgIGlmIChwYXJlbnRTdHlsZXNbcHJvcGVydHldID09PSB2YWx1ZSAmJiBpc1Byb3BlcnR5SW5oZXJpdGVkKHByb3BlcnR5KSkgY29udGludWU7XG4gICAgc3R5bGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG5mdW5jdGlvbiBmb3JtYXRDc3Moc3R5bGUpIHtcbiAgbGV0IGNzc1RleHQgPSBcIlwiO1xuICBmb3IgKGNvbnN0IFtwcm9wZXJ0eSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlKSkge1xuICAgIGNzc1RleHQgKz0gYCR7cHJvcGVydHl9OiAke3ZhbHVlfTtgO1xuICB9XG4gIHJldHVybiBjc3NUZXh0O1xufVxubGV0IGRlZmF1bHRTdHlsZUZyYW1lO1xuY29uc3QgZGVmYXVsdFN0eWxlc0J5VGFnTmFtZSA9IHt9O1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFN0eWxlRnJhbWUoKSB7XG4gIGlmICghZGVmYXVsdFN0eWxlRnJhbWUpIHtcbiAgICBjb25zdCBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgZnJhbWUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnJhbWUpO1xuICAgIGNvbnN0IGZyYW1lRG9jdW1lbnQgPSBhc3NlcnRFeGlzdHMoZnJhbWUuY29udGVudERvY3VtZW50LCBcImZyYW1lIG11c3QgaGF2ZSBhIGRvY3VtZW50XCIpO1xuICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgIGNvbnN0IGZvcmVpZ25PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImZvcmVpZ25PYmplY3RcIik7XG4gICAgc3ZnLmFwcGVuZENoaWxkKGZvcmVpZ25PYmplY3QpO1xuICAgIGZyYW1lRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpO1xuICAgIGRlZmF1bHRTdHlsZUZyYW1lID0geyBpZnJhbWU6IGZyYW1lLCBmb3JlaWduT2JqZWN0LCBkb2N1bWVudDogZnJhbWVEb2N1bWVudCB9O1xuICB9XG4gIHJldHVybiBkZWZhdWx0U3R5bGVGcmFtZTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lEZWZhdWx0U3R5bGVGcmFtZSgpIHtcbiAgaWYgKGRlZmF1bHRTdHlsZUZyYW1lKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkZWZhdWx0U3R5bGVGcmFtZS5pZnJhbWUpO1xuICAgIGRlZmF1bHRTdHlsZUZyYW1lID0gdm9pZCAwO1xuICB9XG59XG5jb25zdCBkZWZhdWx0U3R5bGVSZWFkT3B0aW9ucyA9IHsgZGVmYXVsdFN0eWxlczogTk9fU1RZTEVTLCBwYXJlbnRTdHlsZXM6IE5PX1NUWUxFUyB9O1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFN0eWxlc0ZvclRhZ05hbWUodGFnTmFtZSkge1xuICBsZXQgZXhpc3RpbmcgPSBkZWZhdWx0U3R5bGVzQnlUYWdOYW1lW3RhZ05hbWVdO1xuICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgY29uc3QgeyBmb3JlaWduT2JqZWN0LCBkb2N1bWVudDogZG9jdW1lbnQyIH0gPSBnZXREZWZhdWx0U3R5bGVGcmFtZSgpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudDIuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICBmb3JlaWduT2JqZWN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIGV4aXN0aW5nID0gZWxlbWVudC5jb21wdXRlZFN0eWxlTWFwID8gc3R5bGVGcm9tQ29tcHV0ZWRTdHlsZU1hcChlbGVtZW50LmNvbXB1dGVkU3R5bGVNYXAoKSwgZGVmYXVsdFN0eWxlUmVhZE9wdGlvbnMpIDogc3R5bGVGcm9tQ29tcHV0ZWRTdHlsZShnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLCBkZWZhdWx0U3R5bGVSZWFkT3B0aW9ucyk7XG4gICAgZm9yZWlnbk9iamVjdC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICBkZWZhdWx0U3R5bGVzQnlUYWdOYW1lW3RhZ05hbWVdID0gZXhpc3Rpbmc7XG4gIH1cbiAgcmV0dXJuIGV4aXN0aW5nO1xufVxuZXhwb3J0IHtcbiAgU3R5bGVFbWJlZGRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0eWxlRW1iZWRkZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/StyleEmbedder.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/domUtils.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/domUtils.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   elementStyle: () => (/* binding */ elementStyle),\n/* harmony export */   getComputedStyle: () => (/* binding */ getComputedStyle),\n/* harmony export */   getRenderedChildNodes: () => (/* binding */ getRenderedChildNodes),\n/* harmony export */   getRenderedChildren: () => (/* binding */ getRenderedChildren),\n/* harmony export */   isElement: () => (/* binding */ isElement)\n/* harmony export */ });\nfunction getRenderedChildNodes(node) {\n  if (node.shadowRoot) {\n    return node.shadowRoot.childNodes;\n  }\n  if (isShadowSlotElement(node)) {\n    const assignedNodes = node.assignedNodes();\n    if (assignedNodes?.length) {\n      return assignedNodes;\n    }\n  }\n  return node.childNodes;\n}\nfunction* getRenderedChildren(node) {\n  for (const child of getRenderedChildNodes(node)) {\n    if (isElement(child)) yield child;\n  }\n}\nfunction getWindow(node) {\n  return node.ownerDocument?.defaultView ?? globalThis;\n}\nfunction isElement(node) {\n  return node instanceof getWindow(node).Element;\n}\nfunction isShadowRoot(node) {\n  return node instanceof getWindow(node).ShadowRoot;\n}\nfunction isInShadowRoot(node) {\n  return \"getRootNode\" in node && isShadowRoot(node.getRootNode());\n}\nfunction isShadowSlotElement(node) {\n  return isInShadowRoot(node) && node instanceof getWindow(node).HTMLSlotElement;\n}\nfunction elementStyle(element) {\n  return element.style;\n}\nfunction getComputedStyle(element, pseudoElement) {\n  return getWindow(element).getComputedStyle(element, pseudoElement);\n}\n\n//# sourceMappingURL=domUtils.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZG9tVXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZXhwb3J0cy9kb21VdGlscy5tanM/ODY1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRSZW5kZXJlZENoaWxkTm9kZXMobm9kZSkge1xuICBpZiAobm9kZS5zaGFkb3dSb290KSB7XG4gICAgcmV0dXJuIG5vZGUuc2hhZG93Um9vdC5jaGlsZE5vZGVzO1xuICB9XG4gIGlmIChpc1NoYWRvd1Nsb3RFbGVtZW50KG5vZGUpKSB7XG4gICAgY29uc3QgYXNzaWduZWROb2RlcyA9IG5vZGUuYXNzaWduZWROb2RlcygpO1xuICAgIGlmIChhc3NpZ25lZE5vZGVzPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBhc3NpZ25lZE5vZGVzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzO1xufVxuZnVuY3Rpb24qIGdldFJlbmRlcmVkQ2hpbGRyZW4obm9kZSkge1xuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGdldFJlbmRlcmVkQ2hpbGROb2Rlcyhub2RlKSkge1xuICAgIGlmIChpc0VsZW1lbnQoY2hpbGQpKSB5aWVsZCBjaGlsZDtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudD8uZGVmYXVsdFZpZXcgPz8gZ2xvYmFsVGhpcztcbn1cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgZ2V0V2luZG93KG5vZGUpLkVsZW1lbnQ7XG59XG5mdW5jdGlvbiBpc1NoYWRvd1Jvb3Qobm9kZSkge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIGdldFdpbmRvdyhub2RlKS5TaGFkb3dSb290O1xufVxuZnVuY3Rpb24gaXNJblNoYWRvd1Jvb3Qobm9kZSkge1xuICByZXR1cm4gXCJnZXRSb290Tm9kZVwiIGluIG5vZGUgJiYgaXNTaGFkb3dSb290KG5vZGUuZ2V0Um9vdE5vZGUoKSk7XG59XG5mdW5jdGlvbiBpc1NoYWRvd1Nsb3RFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIGlzSW5TaGFkb3dSb290KG5vZGUpICYmIG5vZGUgaW5zdGFuY2VvZiBnZXRXaW5kb3cobm9kZSkuSFRNTFNsb3RFbGVtZW50O1xufVxuZnVuY3Rpb24gZWxlbWVudFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGU7XG59XG5mdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIHBzZXVkb0VsZW1lbnQpIHtcbiAgcmV0dXJuIGdldFdpbmRvdyhlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIHBzZXVkb0VsZW1lbnQpO1xufVxuZXhwb3J0IHtcbiAgZWxlbWVudFN0eWxlLFxuICBnZXRDb21wdXRlZFN0eWxlLFxuICBnZXRSZW5kZXJlZENoaWxkTm9kZXMsXG4gIGdldFJlbmRlcmVkQ2hpbGRyZW4sXG4gIGlzRWxlbWVudFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbVV0aWxzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/domUtils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/embedMedia.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/embedMedia.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embedMedia: () => (/* binding */ embedMedia)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _domUtils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./domUtils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/domUtils.mjs\");\n/* harmony import */ var _fetchCache_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fetchCache.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs\");\n\n\n\nfunction copyAttrs(source, target) {\n  const attrs = Array.from(source.attributes);\n  attrs.forEach((attr) => {\n    target.setAttribute(attr.name, attr.value);\n  });\n}\nfunction replace(original, replacement) {\n  original.replaceWith(replacement);\n  return replacement;\n}\nasync function createImage(dataUrl, cloneAttributesFrom) {\n  const image = document.createElement(\"img\");\n  if (cloneAttributesFrom) {\n    copyAttrs(cloneAttributesFrom, image);\n  }\n  image.setAttribute(\"src\", dataUrl ?? \"data:\");\n  image.setAttribute(\"decoding\", \"sync\");\n  image.setAttribute(\"loading\", \"eager\");\n  try {\n    await image.decode();\n  } catch (err) {\n  }\n  return image;\n}\nasync function getCanvasReplacement(canvas) {\n  try {\n    const dataURL = canvas.toDataURL();\n    return await createImage(dataURL, canvas);\n  } catch {\n    return await createImage(null, canvas);\n  }\n}\nasync function getVideoReplacement(video) {\n  try {\n    const dataUrl = await _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.MediaHelpers.getVideoFrameAsDataUrl(video);\n    return createImage(dataUrl, video);\n  } catch (err) {\n    console.error(\"Could not get video frame\", err);\n  }\n  if (video.poster) {\n    const dataUrl = await (0,_fetchCache_mjs__WEBPACK_IMPORTED_MODULE_2__.resourceToDataUrl)(video.poster);\n    return createImage(dataUrl, video);\n  }\n  return createImage(null, video);\n}\nasync function embedMedia(node) {\n  if (node instanceof HTMLCanvasElement) {\n    return replace(node, await getCanvasReplacement(node));\n  } else if (node instanceof HTMLVideoElement) {\n    return replace(node, await getVideoReplacement(node));\n  } else if (node instanceof HTMLImageElement) {\n    const src = node.currentSrc || node.src;\n    const dataUrl = await (0,_fetchCache_mjs__WEBPACK_IMPORTED_MODULE_2__.resourceToDataUrl)(src);\n    node.setAttribute(\"src\", dataUrl ?? \"data:\");\n    node.setAttribute(\"decoding\", \"sync\");\n    node.setAttribute(\"loading\", \"eager\");\n    try {\n      await node.decode();\n    } catch (err) {\n    }\n    return node;\n  } else if (node instanceof HTMLInputElement) {\n    node.setAttribute(\"value\", node.value);\n  } else if (node instanceof HTMLTextAreaElement) {\n    node.textContent = node.value;\n  }\n  await Promise.all(\n    Array.from((0,_domUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.getRenderedChildren)(node), (child) => embedMedia(child))\n  );\n}\n\n//# sourceMappingURL=embedMedia.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZW1iZWRNZWRpYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUNRO0FBQ0E7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdURBQVk7QUFDdEM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtFQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLDBCQUEwQixrRUFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0VBQW1CO0FBQ2xDO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZW1iZWRNZWRpYS5tanM/YjhmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZWRpYUhlbHBlcnMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0UmVuZGVyZWRDaGlsZHJlbiB9IGZyb20gXCIuL2RvbVV0aWxzLm1qc1wiO1xuaW1wb3J0IHsgcmVzb3VyY2VUb0RhdGFVcmwgfSBmcm9tIFwiLi9mZXRjaENhY2hlLm1qc1wiO1xuZnVuY3Rpb24gY29weUF0dHJzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gIGNvbnN0IGF0dHJzID0gQXJyYXkuZnJvbShzb3VyY2UuYXR0cmlidXRlcyk7XG4gIGF0dHJzLmZvckVhY2goKGF0dHIpID0+IHtcbiAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVwbGFjZShvcmlnaW5hbCwgcmVwbGFjZW1lbnQpIHtcbiAgb3JpZ2luYWwucmVwbGFjZVdpdGgocmVwbGFjZW1lbnQpO1xuICByZXR1cm4gcmVwbGFjZW1lbnQ7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVJbWFnZShkYXRhVXJsLCBjbG9uZUF0dHJpYnV0ZXNGcm9tKSB7XG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaWYgKGNsb25lQXR0cmlidXRlc0Zyb20pIHtcbiAgICBjb3B5QXR0cnMoY2xvbmVBdHRyaWJ1dGVzRnJvbSwgaW1hZ2UpO1xuICB9XG4gIGltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhVXJsID8/IFwiZGF0YTpcIik7XG4gIGltYWdlLnNldEF0dHJpYnV0ZShcImRlY29kaW5nXCIsIFwic3luY1wiKTtcbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwibG9hZGluZ1wiLCBcImVhZ2VyXCIpO1xuICB0cnkge1xuICAgIGF3YWl0IGltYWdlLmRlY29kZSgpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgfVxuICByZXR1cm4gaW1hZ2U7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRDYW52YXNSZXBsYWNlbWVudChjYW52YXMpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgIHJldHVybiBhd2FpdCBjcmVhdGVJbWFnZShkYXRhVVJMLCBjYW52YXMpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gYXdhaXQgY3JlYXRlSW1hZ2UobnVsbCwgY2FudmFzKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9SZXBsYWNlbWVudCh2aWRlbykge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGFVcmwgPSBhd2FpdCBNZWRpYUhlbHBlcnMuZ2V0VmlkZW9GcmFtZUFzRGF0YVVybCh2aWRlbyk7XG4gICAgcmV0dXJuIGNyZWF0ZUltYWdlKGRhdGFVcmwsIHZpZGVvKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBnZXQgdmlkZW8gZnJhbWVcIiwgZXJyKTtcbiAgfVxuICBpZiAodmlkZW8ucG9zdGVyKSB7XG4gICAgY29uc3QgZGF0YVVybCA9IGF3YWl0IHJlc291cmNlVG9EYXRhVXJsKHZpZGVvLnBvc3Rlcik7XG4gICAgcmV0dXJuIGNyZWF0ZUltYWdlKGRhdGFVcmwsIHZpZGVvKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlSW1hZ2UobnVsbCwgdmlkZW8pO1xufVxuYXN5bmMgZnVuY3Rpb24gZW1iZWRNZWRpYShub2RlKSB7XG4gIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICByZXR1cm4gcmVwbGFjZShub2RlLCBhd2FpdCBnZXRDYW52YXNSZXBsYWNlbWVudChub2RlKSk7XG4gIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICByZXR1cm4gcmVwbGFjZShub2RlLCBhd2FpdCBnZXRWaWRlb1JlcGxhY2VtZW50KG5vZGUpKTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuICAgIGNvbnN0IHNyYyA9IG5vZGUuY3VycmVudFNyYyB8fCBub2RlLnNyYztcbiAgICBjb25zdCBkYXRhVXJsID0gYXdhaXQgcmVzb3VyY2VUb0RhdGFVcmwoc3JjKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhVXJsID8/IFwiZGF0YTpcIik7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJkZWNvZGluZ1wiLCBcInN5bmNcIik7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIsIFwiZWFnZXJcIik7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG5vZGUuZGVjb2RlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9IGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBub2RlLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkge1xuICAgIG5vZGUudGV4dENvbnRlbnQgPSBub2RlLnZhbHVlO1xuICB9XG4gIGF3YWl0IFByb21pc2UuYWxsKFxuICAgIEFycmF5LmZyb20oZ2V0UmVuZGVyZWRDaGlsZHJlbihub2RlKSwgKGNoaWxkKSA9PiBlbWJlZE1lZGlhKGNoaWxkKSlcbiAgKTtcbn1cbmV4cG9ydCB7XG4gIGVtYmVkTWVkaWFcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWJlZE1lZGlhLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/embedMedia.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/exportToSvg.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/exportToSvg.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exportToSvg: () => (/* binding */ exportToSvg)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom/client */ \"(ssr)/./node_modules/next/dist/compiled/react-dom/client.js\");\n/* harmony import */ var _StyleEmbedder_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StyleEmbedder.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/StyleEmbedder.mjs\");\n/* harmony import */ var _embedMedia_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./embedMedia.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/embedMedia.mjs\");\n/* harmony import */ var _getSvgJsx_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getSvgJsx.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/getSvgJsx.mjs\");\n\n\n\n\n\n\nasync function exportToSvg(editor, shapeIds, opts = {}) {\n  const result = (0,_getSvgJsx_mjs__WEBPACK_IMPORTED_MODULE_5__.getSvgJsx)(editor, shapeIds, opts);\n  if (!result) return void 0;\n  const container = editor.getContainer();\n  const renderTarget = document.createElement(\"div\");\n  renderTarget.className = \"tldraw-svg-export\";\n  renderTarget.inert = true;\n  renderTarget.tabIndex = -1;\n  Object.assign(renderTarget.style, {\n    position: \"absolute\",\n    top: \"0px\",\n    left: \"0px\",\n    width: result.width + \"px\",\n    height: result.height + \"px\",\n    pointerEvents: \"none\",\n    opacity: 0\n  });\n  container.appendChild(renderTarget);\n  const root = (0,react_dom_client__WEBPACK_IMPORTED_MODULE_2__.createRoot)(renderTarget);\n  try {\n    (0,react_dom__WEBPACK_IMPORTED_MODULE_1__.flushSync)(() => {\n      root.render(result.jsx);\n    });\n    await result.exportDelay.resolve();\n    const svg = renderTarget.firstElementChild;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(svg instanceof SVGSVGElement, \"Expected an SVG element\");\n    await applyChangesToForeignObjects(svg);\n    return { svg, width: result.width, height: result.height };\n  } finally {\n    setTimeout(() => {\n      root.unmount();\n      container.removeChild(renderTarget);\n    }, 0);\n  }\n}\nasync function applyChangesToForeignObjects(svg) {\n  const foreignObjectChildren = [\n    ...svg.querySelectorAll(\"foreignObject.tl-shape-foreign-object > *\")\n  ];\n  if (!foreignObjectChildren.length) return;\n  const styleEmbedder = new _StyleEmbedder_mjs__WEBPACK_IMPORTED_MODULE_3__.StyleEmbedder(svg);\n  try {\n    styleEmbedder.fonts.startFindingCurrentDocumentFontFaces();\n    await Promise.all(foreignObjectChildren.map((el) => (0,_embedMedia_mjs__WEBPACK_IMPORTED_MODULE_4__.embedMedia)(el)));\n    for (const el of foreignObjectChildren) {\n      styleEmbedder.readRootElementStyles(el);\n    }\n    await styleEmbedder.fetchResources();\n    const fontCss = await styleEmbedder.getFontFaceCss();\n    styleEmbedder.unwrapCustomElements();\n    const pseudoCss = styleEmbedder.embedStyles();\n    if (fontCss || pseudoCss) {\n      const style = document.createElementNS(\"http://www.w3.org/2000/svg\", \"style\");\n      style.textContent = `${fontCss}\n${pseudoCss}`;\n      svg.prepend(style);\n    }\n  } finally {\n    styleEmbedder.dispose();\n  }\n}\n\n//# sourceMappingURL=exportToSvg.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZXhwb3J0VG9TdmcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUM7QUFDRDtBQUNRO0FBQ007QUFDTjtBQUNGO0FBQzVDLHNEQUFzRDtBQUN0RCxpQkFBaUIseURBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGVBQWUsNERBQVU7QUFDekI7QUFDQSxJQUFJLG9EQUFTO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUkscURBQU07QUFDVjtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZEQUFhO0FBQ3pDO0FBQ0E7QUFDQSx3REFBd0QsMkRBQVU7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLEVBQUUsVUFBVTtBQUNaO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9leHBvcnRzL2V4cG9ydFRvU3ZnLm1qcz9lZWUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBmbHVzaFN5bmMgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBjcmVhdGVSb290IH0gZnJvbSBcInJlYWN0LWRvbS9jbGllbnRcIjtcbmltcG9ydCB7IFN0eWxlRW1iZWRkZXIgfSBmcm9tIFwiLi9TdHlsZUVtYmVkZGVyLm1qc1wiO1xuaW1wb3J0IHsgZW1iZWRNZWRpYSB9IGZyb20gXCIuL2VtYmVkTWVkaWEubWpzXCI7XG5pbXBvcnQgeyBnZXRTdmdKc3ggfSBmcm9tIFwiLi9nZXRTdmdKc3gubWpzXCI7XG5hc3luYyBmdW5jdGlvbiBleHBvcnRUb1N2ZyhlZGl0b3IsIHNoYXBlSWRzLCBvcHRzID0ge30pIHtcbiAgY29uc3QgcmVzdWx0ID0gZ2V0U3ZnSnN4KGVkaXRvciwgc2hhcGVJZHMsIG9wdHMpO1xuICBpZiAoIXJlc3VsdCkgcmV0dXJuIHZvaWQgMDtcbiAgY29uc3QgY29udGFpbmVyID0gZWRpdG9yLmdldENvbnRhaW5lcigpO1xuICBjb25zdCByZW5kZXJUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICByZW5kZXJUYXJnZXQuY2xhc3NOYW1lID0gXCJ0bGRyYXctc3ZnLWV4cG9ydFwiO1xuICByZW5kZXJUYXJnZXQuaW5lcnQgPSB0cnVlO1xuICByZW5kZXJUYXJnZXQudGFiSW5kZXggPSAtMTtcbiAgT2JqZWN0LmFzc2lnbihyZW5kZXJUYXJnZXQuc3R5bGUsIHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHRvcDogXCIwcHhcIixcbiAgICBsZWZ0OiBcIjBweFwiLFxuICAgIHdpZHRoOiByZXN1bHQud2lkdGggKyBcInB4XCIsXG4gICAgaGVpZ2h0OiByZXN1bHQuaGVpZ2h0ICsgXCJweFwiLFxuICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgIG9wYWNpdHk6IDBcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJUYXJnZXQpO1xuICBjb25zdCByb290ID0gY3JlYXRlUm9vdChyZW5kZXJUYXJnZXQpO1xuICB0cnkge1xuICAgIGZsdXNoU3luYygoKSA9PiB7XG4gICAgICByb290LnJlbmRlcihyZXN1bHQuanN4KTtcbiAgICB9KTtcbiAgICBhd2FpdCByZXN1bHQuZXhwb3J0RGVsYXkucmVzb2x2ZSgpO1xuICAgIGNvbnN0IHN2ZyA9IHJlbmRlclRhcmdldC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBhc3NlcnQoc3ZnIGluc3RhbmNlb2YgU1ZHU1ZHRWxlbWVudCwgXCJFeHBlY3RlZCBhbiBTVkcgZWxlbWVudFwiKTtcbiAgICBhd2FpdCBhcHBseUNoYW5nZXNUb0ZvcmVpZ25PYmplY3RzKHN2Zyk7XG4gICAgcmV0dXJuIHsgc3ZnLCB3aWR0aDogcmVzdWx0LndpZHRoLCBoZWlnaHQ6IHJlc3VsdC5oZWlnaHQgfTtcbiAgfSBmaW5hbGx5IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJvb3QudW5tb3VudCgpO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHJlbmRlclRhcmdldCk7XG4gICAgfSwgMCk7XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGFwcGx5Q2hhbmdlc1RvRm9yZWlnbk9iamVjdHMoc3ZnKSB7XG4gIGNvbnN0IGZvcmVpZ25PYmplY3RDaGlsZHJlbiA9IFtcbiAgICAuLi5zdmcucXVlcnlTZWxlY3RvckFsbChcImZvcmVpZ25PYmplY3QudGwtc2hhcGUtZm9yZWlnbi1vYmplY3QgPiAqXCIpXG4gIF07XG4gIGlmICghZm9yZWlnbk9iamVjdENoaWxkcmVuLmxlbmd0aCkgcmV0dXJuO1xuICBjb25zdCBzdHlsZUVtYmVkZGVyID0gbmV3IFN0eWxlRW1iZWRkZXIoc3ZnKTtcbiAgdHJ5IHtcbiAgICBzdHlsZUVtYmVkZGVyLmZvbnRzLnN0YXJ0RmluZGluZ0N1cnJlbnREb2N1bWVudEZvbnRGYWNlcygpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKGZvcmVpZ25PYmplY3RDaGlsZHJlbi5tYXAoKGVsKSA9PiBlbWJlZE1lZGlhKGVsKSkpO1xuICAgIGZvciAoY29uc3QgZWwgb2YgZm9yZWlnbk9iamVjdENoaWxkcmVuKSB7XG4gICAgICBzdHlsZUVtYmVkZGVyLnJlYWRSb290RWxlbWVudFN0eWxlcyhlbCk7XG4gICAgfVxuICAgIGF3YWl0IHN0eWxlRW1iZWRkZXIuZmV0Y2hSZXNvdXJjZXMoKTtcbiAgICBjb25zdCBmb250Q3NzID0gYXdhaXQgc3R5bGVFbWJlZGRlci5nZXRGb250RmFjZUNzcygpO1xuICAgIHN0eWxlRW1iZWRkZXIudW53cmFwQ3VzdG9tRWxlbWVudHMoKTtcbiAgICBjb25zdCBwc2V1ZG9Dc3MgPSBzdHlsZUVtYmVkZGVyLmVtYmVkU3R5bGVzKCk7XG4gICAgaWYgKGZvbnRDc3MgfHwgcHNldWRvQ3NzKSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3R5bGVcIik7XG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGAke2ZvbnRDc3N9XG4ke3BzZXVkb0Nzc31gO1xuICAgICAgc3ZnLnByZXBlbmQoc3R5bGUpO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBzdHlsZUVtYmVkZGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgZXhwb3J0VG9Tdmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHBvcnRUb1N2Zy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/exportToSvg.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchCache: () => (/* binding */ fetchCache),\n/* harmony export */   resourceToDataUrl: () => (/* binding */ resourceToDataUrl)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction fetchCache(cb, init) {\n  const cache = /* @__PURE__ */ new Map();\n  return async function fetchCached(url) {\n    const existing = cache.get(url);\n    if (existing) return existing;\n    const promise = (async () => {\n      try {\n        const response = await (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.fetch)(url, init);\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(response.ok);\n        return await cb(response);\n      } catch (err) {\n        console.error(err);\n        return null;\n      }\n    })();\n    cache.set(url, promise);\n    return promise;\n  };\n}\nconst resourceToDataUrl = fetchCache(async (response) => {\n  return await _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.FileHelpers.blobToDataUrl(await response.blob());\n});\n\n//# sourceMappingURL=fetchCache.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZmV0Y2hDYWNoZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9EQUFLO0FBQ3BDLFFBQVEscURBQU07QUFDZDtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVc7QUFDMUIsQ0FBQztBQUlDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZXhwb3J0cy9mZXRjaENhY2hlLm1qcz82YjZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpbGVIZWxwZXJzLCBhc3NlcnQsIGZldGNoIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIGZldGNoQ2FjaGUoY2IsIGluaXQpIHtcbiAgY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gZmV0Y2hDYWNoZWQodXJsKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBjYWNoZS5nZXQodXJsKTtcbiAgICBpZiAoZXhpc3RpbmcpIHJldHVybiBleGlzdGluZztcbiAgICBjb25zdCBwcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBpbml0KTtcbiAgICAgICAgYXNzZXJ0KHJlc3BvbnNlLm9rKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNiKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgY2FjaGUuc2V0KHVybCwgcHJvbWlzZSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG59XG5jb25zdCByZXNvdXJjZVRvRGF0YVVybCA9IGZldGNoQ2FjaGUoYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gIHJldHVybiBhd2FpdCBGaWxlSGVscGVycy5ibG9iVG9EYXRhVXJsKGF3YWl0IHJlc3BvbnNlLmJsb2IoKSk7XG59KTtcbmV4cG9ydCB7XG4gIGZldGNoQ2FjaGUsXG4gIHJlc291cmNlVG9EYXRhVXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2hDYWNoZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/fetchCache.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/getSvgJsx.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/getSvgJsx.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSvgJsx: () => (/* binding */ getSvgJsx)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var _components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n/* harmony import */ var _components_Shape_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/Shape.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs\");\n/* harmony import */ var _editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../editor/types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n/* harmony import */ var _hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../hooks/useSafeId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _ExportDelay_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ExportDelay.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/ExportDelay.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getSvgJsx(editor, ids, opts = {}) {\n  if (!window.document) throw Error(\"No document\");\n  const {\n    scale = 1,\n    // should we include the background in the export? or is it transparent?\n    background = false,\n    padding = editor.options.defaultSvgPadding,\n    preserveAspectRatio\n  } = opts;\n  const isDarkMode = opts.darkMode ?? editor.user.getIsDarkMode();\n  const shapeIdsToInclude = editor.getShapeAndDescendantIds(ids);\n  const renderingShapes = editor.getUnorderedRenderingShapes(false).filter(({ id }) => shapeIdsToInclude.has(id));\n  let bbox = null;\n  if (opts.bounds) {\n    bbox = opts.bounds;\n  } else {\n    for (const { id } of renderingShapes) {\n      const maskedPageBounds = editor.getShapeMaskedPageBounds(id);\n      if (!maskedPageBounds) continue;\n      if (bbox) {\n        bbox.union(maskedPageBounds);\n      } else {\n        bbox = maskedPageBounds.clone();\n      }\n    }\n  }\n  if (!bbox) return;\n  const singleFrameShapeId = ids.length === 1 && editor.isShapeOfType(editor.getShape(ids[0]), \"frame\") ? ids[0] : null;\n  if (!singleFrameShapeId) {\n    bbox.expandBy(padding);\n  }\n  const w = bbox.width * scale;\n  const h = bbox.height * scale;\n  try {\n    document.body.focus?.();\n  } catch (e) {\n  }\n  const exportDelay = new _ExportDelay_mjs__WEBPACK_IMPORTED_MODULE_12__.ExportDelay(editor.options.maxExportDelayMs);\n  const initialEffectPromise = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolve)();\n  exportDelay.waitUntil(initialEffectPromise);\n  const svg = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    SvgExport,\n    {\n      editor,\n      preserveAspectRatio,\n      scale,\n      bbox,\n      background,\n      singleFrameShapeId,\n      isDarkMode,\n      renderingShapes,\n      onMount: initialEffectPromise.resolve,\n      waitUntil: exportDelay.waitUntil\n    }\n  );\n  return { jsx: svg, width: w, height: h, exportDelay };\n}\nfunction SvgExport({\n  editor,\n  preserveAspectRatio,\n  scale,\n  bbox,\n  background,\n  singleFrameShapeId,\n  isDarkMode,\n  renderingShapes,\n  onMount,\n  waitUntil\n}) {\n  const theme = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.getDefaultColorTheme)({ isDarkMode });\n  const [defsById, setDefsById] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({});\n  const addExportDef = (0,_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_9__.useEvent)((def) => {\n    if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.hasOwnProperty)(defsById, def.key)) return;\n    waitUntil(\n      (async () => {\n        const element = await def.getElement();\n        if (!element) return;\n        (0,react_dom__WEBPACK_IMPORTED_MODULE_4__.flushSync)(() => setDefsById((defsById2) => ({ ...defsById2, [def.key]: element })));\n      })()\n    );\n  });\n  const exportContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(\n    () => ({\n      isDarkMode,\n      waitUntil,\n      addExportDef\n    }),\n    [isDarkMode, waitUntil, addExportDef]\n  );\n  const [shapeElements, setShapeElements] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  const didRenderRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    if (didRenderRef.current) {\n      throw new Error(\"SvgExport should only render once - do not use with react strict mode\");\n    }\n    didRenderRef.current = true;\n    (async () => {\n      const shapeDefs = {};\n      const unorderedShapeElementPromises = renderingShapes.map(\n        async ({ id, opacity, index, backgroundIndex }) => {\n          if (id === singleFrameShapeId) return [];\n          const shape = editor.getShape(id);\n          if (editor.isShapeOfType(shape, \"group\")) return [];\n          const elements = [];\n          const util = editor.getShapeUtil(shape);\n          if (util.toSvg || util.toBackgroundSvg) {\n            const [toSvgResult, toBackgroundSvgResult] = await Promise.all([\n              util.toSvg?.(shape, exportContext),\n              util.toBackgroundSvg?.(shape, exportContext)\n            ]);\n            const pageTransform = editor.getShapePageTransform(shape);\n            let pageTransformString = pageTransform.toCssString();\n            if (\"scale\" in shape.props) {\n              if (shape.props.scale !== 1) {\n                pageTransformString = `${pageTransformString} scale(${shape.props.scale}, ${shape.props.scale})`;\n              }\n            }\n            const pageMask = editor.getShapeMask(shape.id);\n            const shapeMask = pageMask ? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_11__.Mat.From(_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_11__.Mat.Inverse(pageTransform)).applyToPoints(pageMask) : null;\n            const shapeMaskId = `mask_${(0,_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_10__.sanitizeId)(shape.id)}`;\n            if (shapeMask) {\n              shapeDefs[shapeMaskId] = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"clipPath\", { id: shapeMaskId, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: `M${shapeMask.map(({ x, y }) => `${x},${y}`).join(\"L\")}Z` }) });\n            }\n            if (toSvgResult) {\n              elements.push({\n                zIndex: index,\n                element: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                  \"g\",\n                  {\n                    transform: pageTransformString,\n                    opacity,\n                    clipPath: pageMask ? `url(#${shapeMaskId})` : void 0,\n                    children: toSvgResult\n                  },\n                  `fg_${shape.id}`\n                )\n              });\n            }\n            if (toBackgroundSvgResult) {\n              elements.push({\n                zIndex: backgroundIndex,\n                element: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                  \"g\",\n                  {\n                    transform: pageTransformString,\n                    opacity,\n                    clipPath: pageMask ? `url(#${shapeMaskId})` : void 0,\n                    children: toBackgroundSvgResult\n                  },\n                  `bg_${shape.id}`\n                )\n              });\n            }\n          } else {\n            elements.push({\n              zIndex: index,\n              element: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                ForeignObjectShape,\n                {\n                  shape,\n                  util,\n                  component: _components_Shape_mjs__WEBPACK_IMPORTED_MODULE_6__.InnerShape,\n                  className: \"tl-shape\",\n                  bbox,\n                  opacity\n                },\n                `fg_${shape.id}`\n              )\n            });\n            if (util.backgroundComponent) {\n              elements.push({\n                zIndex: backgroundIndex,\n                element: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                  ForeignObjectShape,\n                  {\n                    shape,\n                    util,\n                    component: _components_Shape_mjs__WEBPACK_IMPORTED_MODULE_6__.InnerShapeBackground,\n                    className: \"tl-shape tl-shape-background\",\n                    bbox,\n                    opacity\n                  },\n                  `bg_${shape.id}`\n                )\n              });\n            }\n          }\n          return elements;\n        }\n      );\n      const unorderedShapeElements = (await Promise.all(unorderedShapeElementPromises)).flat();\n      (0,react_dom__WEBPACK_IMPORTED_MODULE_4__.flushSync)(() => {\n        setShapeElements(\n          unorderedShapeElements.sort((a, b) => a.zIndex - b.zIndex).map(({ element }) => element)\n        );\n        setDefsById((defsById2) => ({ ...defsById2, ...shapeDefs }));\n      });\n    })();\n  }, [bbox, editor, exportContext, renderingShapes, singleFrameShapeId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (shapeElements === null) return;\n    onMount();\n  }, [onMount, shapeElements]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_7__.SvgExportContextProvider, { editor, context: exportContext, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n    \"svg\",\n    {\n      preserveAspectRatio,\n      direction: \"ltr\",\n      width: bbox.width * scale,\n      height: bbox.height * scale,\n      viewBox: `${bbox.minX} ${bbox.minY} ${bbox.width} ${bbox.height}`,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      style: {\n        backgroundColor: background ? singleFrameShapeId ? theme.solid : theme.background : \"transparent\"\n      },\n      \"data-color-mode\": isDarkMode ? \"dark\" : \"light\",\n      className: `tl-container tl-theme__force-sRGB ${isDarkMode ? \"tl-theme__dark\" : \"tl-theme__light\"}`,\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"defs\", { children: Object.entries(defsById).map(([key, def]) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: def }, key)) }),\n        shapeElements\n      ]\n    }\n  ) });\n}\nfunction ForeignObjectShape({\n  shape,\n  util,\n  className,\n  component: Component,\n  bbox,\n  opacity\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_8__.useEditor)();\n  const transform = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_11__.Mat.Translate(-bbox.minX, -bbox.minY).multiply(\n    editor.getShapePageTransform(shape.id)\n  );\n  const bounds = editor.getShapeGeometry(shape.id).bounds;\n  const width = Math.max(bounds.width, 1);\n  const height = Math.max(bounds.height, 1);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_5__.ErrorBoundary, { fallback: () => null, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"foreignObject\",\n    {\n      x: bbox.minX,\n      y: bbox.minY,\n      width: bbox.w,\n      height: bbox.h,\n      className: \"tl-shape-foreign-object\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"div\",\n        {\n          className,\n          \"data-shape-type\": shape.type,\n          style: {\n            clipPath: editor.getShapeClipPath(shape.id),\n            transform: transform.toCssString(),\n            width,\n            height,\n            opacity\n          },\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component, { shape, util })\n        }\n      )\n    }\n  ) });\n}\n\n//# sourceMappingURL=getSvgJsx.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZ2V0U3ZnSnN4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QztBQUdwQjtBQUN5QztBQVFwRDtBQUN1QjtBQUMwQjtBQUNXO0FBRzdCO0FBQ0s7QUFDRjtBQUNHO0FBQ1I7QUFDSTtBQUNoRCx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLDhFQUE4RSxJQUFJO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixpQkFBaUIsS0FBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDBCQUEwQiwwREFBVztBQUNyQywrQkFBK0IsaUVBQWtCO0FBQ2pEO0FBQ0EsOEJBQThCLHNEQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGdCQUFnQixzRUFBb0IsR0FBRyxZQUFZO0FBQ25ELGtDQUFrQywrQ0FBUSxHQUFHO0FBQzdDLHVCQUF1Qiw2REFBUTtBQUMvQixRQUFRLDZEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBUyxxQ0FBcUMsa0NBQWtDO0FBQ3hGLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSCx3QkFBd0IsOENBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRDQUE0QywrQ0FBUTtBQUNwRCx1QkFBdUIsNkNBQU07QUFDN0IsRUFBRSxzREFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxQ0FBcUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxxQkFBcUIsUUFBUSxrQkFBa0IsSUFBSSxrQkFBa0I7QUFDOUc7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHFEQUFHLE1BQU0scURBQUc7QUFDckQsd0NBQXdDLGlFQUFVLFdBQVc7QUFDN0Q7QUFDQSx1REFBdUQsc0RBQUcsZUFBZSwyQ0FBMkMsc0RBQUcsV0FBVyxPQUFPLGlCQUFpQixNQUFNLFFBQVEsRUFBRSxHQUFHLEVBQUUsYUFBYSxJQUFJLEdBQUc7QUFDbk07QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0RBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsWUFBWTtBQUM3RDtBQUNBLG1CQUFtQjtBQUNuQix3QkFBd0IsU0FBUztBQUNqQztBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBRztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxZQUFZO0FBQzdEO0FBQ0EsbUJBQW1CO0FBQ25CLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSx1Q0FBdUMsc0RBQUc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNkRBQVU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBRztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1RUFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0RBQVM7QUFDZjtBQUNBLDRFQUE0RSxTQUFTO0FBQ3JGO0FBQ0Esc0NBQXNDLDRCQUE0QjtBQUNsRSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsc0RBQUcsQ0FBQyx3RkFBd0IsSUFBSSwwREFBMEQsdURBQUk7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFlBQVk7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzREFBc0Qsa0RBQWtEO0FBQ3hHO0FBQ0Esd0JBQXdCLHNEQUFHLFdBQVcsdUVBQXVFLHNEQUFHLENBQUMsMkNBQVEsSUFBSSxlQUFlLFNBQVM7QUFDcko7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCLG9CQUFvQixxREFBRztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsd0VBQWEsSUFBSSxnREFBZ0Qsc0RBQUc7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsb0NBQW9DLHNEQUFHLGNBQWMsYUFBYTtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvZ2V0U3ZnSnN4Lm1qcz8zMTA5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHtcbiAgZ2V0RGVmYXVsdENvbG9yVGhlbWVcbn0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IGhhc093blByb3BlcnR5LCBwcm9taXNlV2l0aFJlc29sdmUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHtcbiAgRnJhZ21lbnQsXG4gIHVzZUVmZmVjdCxcbiAgdXNlTGF5b3V0RWZmZWN0LFxuICB1c2VNZW1vLFxuICB1c2VSZWYsXG4gIHVzZVN0YXRlXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZmx1c2hTeW5jIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgRXJyb3JCb3VuZGFyeSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkubWpzXCI7XG5pbXBvcnQgeyBJbm5lclNoYXBlLCBJbm5lclNoYXBlQmFja2dyb3VuZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgU3ZnRXhwb3J0Q29udGV4dFByb3ZpZGVyXG59IGZyb20gXCIuLi9lZGl0b3IvdHlwZXMvU3ZnRXhwb3J0Q29udGV4dC5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFdmVudCB9IGZyb20gXCIuLi9ob29rcy91c2VFdmVudC5tanNcIjtcbmltcG9ydCB7IHNhbml0aXplSWQgfSBmcm9tIFwiLi4vaG9va3MvdXNlU2FmZUlkLm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgRXhwb3J0RGVsYXkgfSBmcm9tIFwiLi9FeHBvcnREZWxheS5tanNcIjtcbmZ1bmN0aW9uIGdldFN2Z0pzeChlZGl0b3IsIGlkcywgb3B0cyA9IHt9KSB7XG4gIGlmICghd2luZG93LmRvY3VtZW50KSB0aHJvdyBFcnJvcihcIk5vIGRvY3VtZW50XCIpO1xuICBjb25zdCB7XG4gICAgc2NhbGUgPSAxLFxuICAgIC8vIHNob3VsZCB3ZSBpbmNsdWRlIHRoZSBiYWNrZ3JvdW5kIGluIHRoZSBleHBvcnQ/IG9yIGlzIGl0IHRyYW5zcGFyZW50P1xuICAgIGJhY2tncm91bmQgPSBmYWxzZSxcbiAgICBwYWRkaW5nID0gZWRpdG9yLm9wdGlvbnMuZGVmYXVsdFN2Z1BhZGRpbmcsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpb1xuICB9ID0gb3B0cztcbiAgY29uc3QgaXNEYXJrTW9kZSA9IG9wdHMuZGFya01vZGUgPz8gZWRpdG9yLnVzZXIuZ2V0SXNEYXJrTW9kZSgpO1xuICBjb25zdCBzaGFwZUlkc1RvSW5jbHVkZSA9IGVkaXRvci5nZXRTaGFwZUFuZERlc2NlbmRhbnRJZHMoaWRzKTtcbiAgY29uc3QgcmVuZGVyaW5nU2hhcGVzID0gZWRpdG9yLmdldFVub3JkZXJlZFJlbmRlcmluZ1NoYXBlcyhmYWxzZSkuZmlsdGVyKCh7IGlkIH0pID0+IHNoYXBlSWRzVG9JbmNsdWRlLmhhcyhpZCkpO1xuICBsZXQgYmJveCA9IG51bGw7XG4gIGlmIChvcHRzLmJvdW5kcykge1xuICAgIGJib3ggPSBvcHRzLmJvdW5kcztcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGNvbnN0IHsgaWQgfSBvZiByZW5kZXJpbmdTaGFwZXMpIHtcbiAgICAgIGNvbnN0IG1hc2tlZFBhZ2VCb3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzKGlkKTtcbiAgICAgIGlmICghbWFza2VkUGFnZUJvdW5kcykgY29udGludWU7XG4gICAgICBpZiAoYmJveCkge1xuICAgICAgICBiYm94LnVuaW9uKG1hc2tlZFBhZ2VCb3VuZHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmJveCA9IG1hc2tlZFBhZ2VCb3VuZHMuY2xvbmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKCFiYm94KSByZXR1cm47XG4gIGNvbnN0IHNpbmdsZUZyYW1lU2hhcGVJZCA9IGlkcy5sZW5ndGggPT09IDEgJiYgZWRpdG9yLmlzU2hhcGVPZlR5cGUoZWRpdG9yLmdldFNoYXBlKGlkc1swXSksIFwiZnJhbWVcIikgPyBpZHNbMF0gOiBudWxsO1xuICBpZiAoIXNpbmdsZUZyYW1lU2hhcGVJZCkge1xuICAgIGJib3guZXhwYW5kQnkocGFkZGluZyk7XG4gIH1cbiAgY29uc3QgdyA9IGJib3gud2lkdGggKiBzY2FsZTtcbiAgY29uc3QgaCA9IGJib3guaGVpZ2h0ICogc2NhbGU7XG4gIHRyeSB7XG4gICAgZG9jdW1lbnQuYm9keS5mb2N1cz8uKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBjb25zdCBleHBvcnREZWxheSA9IG5ldyBFeHBvcnREZWxheShlZGl0b3Iub3B0aW9ucy5tYXhFeHBvcnREZWxheU1zKTtcbiAgY29uc3QgaW5pdGlhbEVmZmVjdFByb21pc2UgPSBwcm9taXNlV2l0aFJlc29sdmUoKTtcbiAgZXhwb3J0RGVsYXkud2FpdFVudGlsKGluaXRpYWxFZmZlY3RQcm9taXNlKTtcbiAgY29uc3Qgc3ZnID0gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBTdmdFeHBvcnQsXG4gICAge1xuICAgICAgZWRpdG9yLFxuICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbyxcbiAgICAgIHNjYWxlLFxuICAgICAgYmJveCxcbiAgICAgIGJhY2tncm91bmQsXG4gICAgICBzaW5nbGVGcmFtZVNoYXBlSWQsXG4gICAgICBpc0RhcmtNb2RlLFxuICAgICAgcmVuZGVyaW5nU2hhcGVzLFxuICAgICAgb25Nb3VudDogaW5pdGlhbEVmZmVjdFByb21pc2UucmVzb2x2ZSxcbiAgICAgIHdhaXRVbnRpbDogZXhwb3J0RGVsYXkud2FpdFVudGlsXG4gICAgfVxuICApO1xuICByZXR1cm4geyBqc3g6IHN2Zywgd2lkdGg6IHcsIGhlaWdodDogaCwgZXhwb3J0RGVsYXkgfTtcbn1cbmZ1bmN0aW9uIFN2Z0V4cG9ydCh7XG4gIGVkaXRvcixcbiAgcHJlc2VydmVBc3BlY3RSYXRpbyxcbiAgc2NhbGUsXG4gIGJib3gsXG4gIGJhY2tncm91bmQsXG4gIHNpbmdsZUZyYW1lU2hhcGVJZCxcbiAgaXNEYXJrTW9kZSxcbiAgcmVuZGVyaW5nU2hhcGVzLFxuICBvbk1vdW50LFxuICB3YWl0VW50aWxcbn0pIHtcbiAgY29uc3QgdGhlbWUgPSBnZXREZWZhdWx0Q29sb3JUaGVtZSh7IGlzRGFya01vZGUgfSk7XG4gIGNvbnN0IFtkZWZzQnlJZCwgc2V0RGVmc0J5SWRdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBhZGRFeHBvcnREZWYgPSB1c2VFdmVudCgoZGVmKSA9PiB7XG4gICAgaWYgKGhhc093blByb3BlcnR5KGRlZnNCeUlkLCBkZWYua2V5KSkgcmV0dXJuO1xuICAgIHdhaXRVbnRpbChcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBhd2FpdCBkZWYuZ2V0RWxlbWVudCgpO1xuICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICAgICAgZmx1c2hTeW5jKCgpID0+IHNldERlZnNCeUlkKChkZWZzQnlJZDIpID0+ICh7IC4uLmRlZnNCeUlkMiwgW2RlZi5rZXldOiBlbGVtZW50IH0pKSk7XG4gICAgICB9KSgpXG4gICAgKTtcbiAgfSk7XG4gIGNvbnN0IGV4cG9ydENvbnRleHQgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBpc0RhcmtNb2RlLFxuICAgICAgd2FpdFVudGlsLFxuICAgICAgYWRkRXhwb3J0RGVmXG4gICAgfSksXG4gICAgW2lzRGFya01vZGUsIHdhaXRVbnRpbCwgYWRkRXhwb3J0RGVmXVxuICApO1xuICBjb25zdCBbc2hhcGVFbGVtZW50cywgc2V0U2hhcGVFbGVtZW50c10gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgZGlkUmVuZGVyUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZGlkUmVuZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN2Z0V4cG9ydCBzaG91bGQgb25seSByZW5kZXIgb25jZSAtIGRvIG5vdCB1c2Ugd2l0aCByZWFjdCBzdHJpY3QgbW9kZVwiKTtcbiAgICB9XG4gICAgZGlkUmVuZGVyUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaGFwZURlZnMgPSB7fTtcbiAgICAgIGNvbnN0IHVub3JkZXJlZFNoYXBlRWxlbWVudFByb21pc2VzID0gcmVuZGVyaW5nU2hhcGVzLm1hcChcbiAgICAgICAgYXN5bmMgKHsgaWQsIG9wYWNpdHksIGluZGV4LCBiYWNrZ3JvdW5kSW5kZXggfSkgPT4ge1xuICAgICAgICAgIGlmIChpZCA9PT0gc2luZ2xlRnJhbWVTaGFwZUlkKSByZXR1cm4gW107XG4gICAgICAgICAgY29uc3Qgc2hhcGUgPSBlZGl0b3IuZ2V0U2hhcGUoaWQpO1xuICAgICAgICAgIGlmIChlZGl0b3IuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkgcmV0dXJuIFtdO1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG4gICAgICAgICAgY29uc3QgdXRpbCA9IGVkaXRvci5nZXRTaGFwZVV0aWwoc2hhcGUpO1xuICAgICAgICAgIGlmICh1dGlsLnRvU3ZnIHx8IHV0aWwudG9CYWNrZ3JvdW5kU3ZnKSB7XG4gICAgICAgICAgICBjb25zdCBbdG9TdmdSZXN1bHQsIHRvQmFja2dyb3VuZFN2Z1Jlc3VsdF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgIHV0aWwudG9Tdmc/LihzaGFwZSwgZXhwb3J0Q29udGV4dCksXG4gICAgICAgICAgICAgIHV0aWwudG9CYWNrZ3JvdW5kU3ZnPy4oc2hhcGUsIGV4cG9ydENvbnRleHQpXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgICAgICAgIGxldCBwYWdlVHJhbnNmb3JtU3RyaW5nID0gcGFnZVRyYW5zZm9ybS50b0Nzc1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKFwic2NhbGVcIiBpbiBzaGFwZS5wcm9wcykge1xuICAgICAgICAgICAgICBpZiAoc2hhcGUucHJvcHMuc2NhbGUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICBwYWdlVHJhbnNmb3JtU3RyaW5nID0gYCR7cGFnZVRyYW5zZm9ybVN0cmluZ30gc2NhbGUoJHtzaGFwZS5wcm9wcy5zY2FsZX0sICR7c2hhcGUucHJvcHMuc2NhbGV9KWA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhZ2VNYXNrID0gZWRpdG9yLmdldFNoYXBlTWFzayhzaGFwZS5pZCk7XG4gICAgICAgICAgICBjb25zdCBzaGFwZU1hc2sgPSBwYWdlTWFzayA/IE1hdC5Gcm9tKE1hdC5JbnZlcnNlKHBhZ2VUcmFuc2Zvcm0pKS5hcHBseVRvUG9pbnRzKHBhZ2VNYXNrKSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBzaGFwZU1hc2tJZCA9IGBtYXNrXyR7c2FuaXRpemVJZChzaGFwZS5pZCl9YDtcbiAgICAgICAgICAgIGlmIChzaGFwZU1hc2spIHtcbiAgICAgICAgICAgICAgc2hhcGVEZWZzW3NoYXBlTWFza0lkXSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJjbGlwUGF0aFwiLCB7IGlkOiBzaGFwZU1hc2tJZCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogYE0ke3NoYXBlTWFzay5tYXAoKHsgeCwgeSB9KSA9PiBgJHt4fSwke3l9YCkuam9pbihcIkxcIil9WmAgfSkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9TdmdSZXN1bHQpIHtcbiAgICAgICAgICAgICAgZWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgekluZGV4OiBpbmRleCxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgICAgICAgXCJnXCIsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcGFnZVRyYW5zZm9ybVN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgICAgICAgICAgY2xpcFBhdGg6IHBhZ2VNYXNrID8gYHVybCgjJHtzaGFwZU1hc2tJZH0pYCA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHRvU3ZnUmVzdWx0XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgYGZnXyR7c2hhcGUuaWR9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9CYWNrZ3JvdW5kU3ZnUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHpJbmRleDogYmFja2dyb3VuZEluZGV4LFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgICAgICAgICBcImdcIixcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBwYWdlVHJhbnNmb3JtU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5LFxuICAgICAgICAgICAgICAgICAgICBjbGlwUGF0aDogcGFnZU1hc2sgPyBgdXJsKCMke3NoYXBlTWFza0lkfSlgIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogdG9CYWNrZ3JvdW5kU3ZnUmVzdWx0XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgYGJnXyR7c2hhcGUuaWR9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICB6SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICBlbGVtZW50OiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgICAgIEZvcmVpZ25PYmplY3RTaGFwZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzaGFwZSxcbiAgICAgICAgICAgICAgICAgIHV0aWwsXG4gICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IElubmVyU2hhcGUsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwidGwtc2hhcGVcIixcbiAgICAgICAgICAgICAgICAgIGJib3gsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBgZmdfJHtzaGFwZS5pZH1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHV0aWwuYmFja2dyb3VuZENvbXBvbmVudCkge1xuICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB6SW5kZXg6IGJhY2tncm91bmRJbmRleCxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgICAgICAgRm9yZWlnbk9iamVjdFNoYXBlLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgdXRpbCxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBJbm5lclNoYXBlQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInRsLXNoYXBlIHRsLXNoYXBlLWJhY2tncm91bmRcIixcbiAgICAgICAgICAgICAgICAgICAgYmJveCxcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGBiZ18ke3NoYXBlLmlkfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zdCB1bm9yZGVyZWRTaGFwZUVsZW1lbnRzID0gKGF3YWl0IFByb21pc2UuYWxsKHVub3JkZXJlZFNoYXBlRWxlbWVudFByb21pc2VzKSkuZmxhdCgpO1xuICAgICAgZmx1c2hTeW5jKCgpID0+IHtcbiAgICAgICAgc2V0U2hhcGVFbGVtZW50cyhcbiAgICAgICAgICB1bm9yZGVyZWRTaGFwZUVsZW1lbnRzLnNvcnQoKGEsIGIpID0+IGEuekluZGV4IC0gYi56SW5kZXgpLm1hcCgoeyBlbGVtZW50IH0pID0+IGVsZW1lbnQpXG4gICAgICAgICk7XG4gICAgICAgIHNldERlZnNCeUlkKChkZWZzQnlJZDIpID0+ICh7IC4uLmRlZnNCeUlkMiwgLi4uc2hhcGVEZWZzIH0pKTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0sIFtiYm94LCBlZGl0b3IsIGV4cG9ydENvbnRleHQsIHJlbmRlcmluZ1NoYXBlcywgc2luZ2xlRnJhbWVTaGFwZUlkXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNoYXBlRWxlbWVudHMgPT09IG51bGwpIHJldHVybjtcbiAgICBvbk1vdW50KCk7XG4gIH0sIFtvbk1vdW50LCBzaGFwZUVsZW1lbnRzXSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFN2Z0V4cG9ydENvbnRleHRQcm92aWRlciwgeyBlZGl0b3IsIGNvbnRleHQ6IGV4cG9ydENvbnRleHQsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhcbiAgICBcInN2Z1wiLFxuICAgIHtcbiAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW8sXG4gICAgICBkaXJlY3Rpb246IFwibHRyXCIsXG4gICAgICB3aWR0aDogYmJveC53aWR0aCAqIHNjYWxlLFxuICAgICAgaGVpZ2h0OiBiYm94LmhlaWdodCAqIHNjYWxlLFxuICAgICAgdmlld0JveDogYCR7YmJveC5taW5YfSAke2Jib3gubWluWX0gJHtiYm94LndpZHRofSAke2Jib3guaGVpZ2h0fWAsXG4gICAgICBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsXG4gICAgICBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kID8gc2luZ2xlRnJhbWVTaGFwZUlkID8gdGhlbWUuc29saWQgOiB0aGVtZS5iYWNrZ3JvdW5kIDogXCJ0cmFuc3BhcmVudFwiXG4gICAgICB9LFxuICAgICAgXCJkYXRhLWNvbG9yLW1vZGVcIjogaXNEYXJrTW9kZSA/IFwiZGFya1wiIDogXCJsaWdodFwiLFxuICAgICAgY2xhc3NOYW1lOiBgdGwtY29udGFpbmVyIHRsLXRoZW1lX19mb3JjZS1zUkdCICR7aXNEYXJrTW9kZSA/IFwidGwtdGhlbWVfX2RhcmtcIiA6IFwidGwtdGhlbWVfX2xpZ2h0XCJ9YCxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkZWZzXCIsIHsgY2hpbGRyZW46IE9iamVjdC5lbnRyaWVzKGRlZnNCeUlkKS5tYXAoKFtrZXksIGRlZl0pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IGRlZiB9LCBrZXkpKSB9KSxcbiAgICAgICAgc2hhcGVFbGVtZW50c1xuICAgICAgXVxuICAgIH1cbiAgKSB9KTtcbn1cbmZ1bmN0aW9uIEZvcmVpZ25PYmplY3RTaGFwZSh7XG4gIHNoYXBlLFxuICB1dGlsLFxuICBjbGFzc05hbWUsXG4gIGNvbXBvbmVudDogQ29tcG9uZW50LFxuICBiYm94LFxuICBvcGFjaXR5XG59KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB0cmFuc2Zvcm0gPSBNYXQuVHJhbnNsYXRlKC1iYm94Lm1pblgsIC1iYm94Lm1pblkpLm11bHRpcGx5KFxuICAgIGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUuaWQpXG4gICk7XG4gIGNvbnN0IGJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlLmlkKS5ib3VuZHM7XG4gIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoYm91bmRzLndpZHRoLCAxKTtcbiAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoYm91bmRzLmhlaWdodCwgMSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEVycm9yQm91bmRhcnksIHsgZmFsbGJhY2s6ICgpID0+IG51bGwsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwiZm9yZWlnbk9iamVjdFwiLFxuICAgIHtcbiAgICAgIHg6IGJib3gubWluWCxcbiAgICAgIHk6IGJib3gubWluWSxcbiAgICAgIHdpZHRoOiBiYm94LncsXG4gICAgICBoZWlnaHQ6IGJib3guaCxcbiAgICAgIGNsYXNzTmFtZTogXCJ0bC1zaGFwZS1mb3JlaWduLW9iamVjdFwiLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgXCJkYXRhLXNoYXBlLXR5cGVcIjogc2hhcGUudHlwZSxcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgY2xpcFBhdGg6IGVkaXRvci5nZXRTaGFwZUNsaXBQYXRoKHNoYXBlLmlkKSxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtLnRvQ3NzU3RyaW5nKCksXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgIG9wYWNpdHlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENvbXBvbmVudCwgeyBzaGFwZSwgdXRpbCB9KVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApIH0pO1xufVxuZXhwb3J0IHtcbiAgZ2V0U3ZnSnN4XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0U3ZnSnN4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/getSvgJsx.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/parseCss.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/exports/parseCss.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPropertyInherited: () => (/* binding */ isPropertyInherited),\n/* harmony export */   parseCss: () => (/* binding */ parseCss),\n/* harmony export */   parseCssFontFaces: () => (/* binding */ parseCssFontFaces),\n/* harmony export */   parseCssFontFamilyValue: () => (/* binding */ parseCssFontFamilyValue),\n/* harmony export */   parseCssImports: () => (/* binding */ parseCssImports),\n/* harmony export */   parseCssValueUrls: () => (/* binding */ parseCssValueUrls),\n/* harmony export */   shouldIncludeCssProperty: () => (/* binding */ shouldIncludeCssProperty)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nconst importsRegex = /@import\\s+(?:\"([^\"]+)\"|'([^']+)'|url\\s*\\(\\s*(?:\"([^\"]+)\"|'([^']+)'|([^'\")]+))\\s*\\))([^;]+);/gi;\nconst fontFaceRegex = /@font-face\\s*{([^}]+)}/gi;\nconst urlsRegex = /url\\s*\\(\\s*(?:\"([^\"]+)\"|'([^']+)'|([^'\")]+))\\s*\\)/gi;\nconst fontFamilyRegex = /(?:^|;)\\s*font-family\\s*:\\s*(?:([^'\"][^;\\n]+)|\"([^\"]+)\"|'([^']+)')\\s*(?:;|$)/gi;\nfunction parseCssImports(css) {\n  return Array.from(css.matchAll(importsRegex), (m) => ({\n    url: m[1] || m[2] || m[3] || m[4] || m[5],\n    extras: m[6]\n  }));\n}\nfunction parseCssFontFaces(css, baseUrl) {\n  return Array.from(css.matchAll(fontFaceRegex), (m) => {\n    const fontFace = m[1];\n    const urls = Array.from(fontFace.matchAll(urlsRegex), (m2) => {\n      const original = m2[1] || m2[2] || m2[3];\n      return {\n        original,\n        resolved: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(original, baseUrl)?.href ?? null\n      };\n    });\n    const fontFamilies = new Set(\n      Array.from(fontFace.matchAll(fontFamilyRegex), (m2) => (m2[1] || m2[2] || m2[3]).toLowerCase())\n    );\n    return { fontFace, urls, fontFamilies };\n  });\n}\nfunction parseCssFontFamilyValue(value) {\n  const valueRegex = /\\s*(?:([^'\"][^;\\n\\s,]+)|\"([^\"]+)\"|'([^']+)')\\s*/gi;\n  const separatorRegex = /\\s*,\\s*/gi;\n  const fontFamilies = /* @__PURE__ */ new Set();\n  while (true) {\n    const valueMatch = valueRegex.exec(value);\n    if (!valueMatch) {\n      break;\n    }\n    const fontFamily = valueMatch[1] || valueMatch[2] || valueMatch[3];\n    fontFamilies.add(fontFamily.toLowerCase());\n    separatorRegex.lastIndex = valueRegex.lastIndex;\n    const separatorMatch = separatorRegex.exec(value);\n    if (!separatorMatch) {\n      break;\n    }\n    valueRegex.lastIndex = separatorRegex.lastIndex;\n  }\n  return fontFamilies;\n}\nfunction shouldIncludeCssProperty(property) {\n  if (property.startsWith(\"-\")) return false;\n  if (property.startsWith(\"animation\")) return false;\n  if (property.startsWith(\"transition\")) return false;\n  if (property === \"cursor\") return false;\n  if (property === \"pointer-events\") return false;\n  if (property === \"user-select\") return false;\n  if (property === \"touch-action\") return false;\n  return true;\n}\nfunction parseCss(css, baseUrl) {\n  return {\n    imports: parseCssImports(css),\n    fontFaces: parseCssFontFaces(css, baseUrl)\n  };\n}\nfunction parseCssValueUrls(value) {\n  return Array.from(value.matchAll(urlsRegex), (m) => ({\n    original: m[0],\n    url: m[1] || m[2] || m[3]\n  }));\n}\nconst inheritedProperties = /* @__PURE__ */ new Set([\n  \"border-collapse\",\n  \"border-spacing\",\n  \"caption-side\",\n  \"color\",\n  \"cursor\",\n  \"direction\",\n  \"empty-cells\",\n  \"font-family\",\n  \"font-size\",\n  \"font-style\",\n  \"font-variant\",\n  \"font-weight\",\n  \"font-size-adjust\",\n  \"font-stretch\",\n  \"font\",\n  \"letter-spacing\",\n  \"line-height\",\n  \"list-style-image\",\n  \"list-style-position\",\n  \"list-style-type\",\n  \"list-style\",\n  \"orphans\",\n  \"quotes\",\n  \"tab-size\",\n  \"text-align\",\n  \"text-align-last\",\n  \"text-decoration-color\",\n  \"text-indent\",\n  \"text-justify\",\n  \"text-shadow\",\n  \"text-transform\",\n  \"visibility\",\n  \"white-space\",\n  \"widows\",\n  \"word-break\",\n  \"word-spacing\",\n  \"word-wrap\"\n]);\nfunction isPropertyInherited(property) {\n  return inheritedProperties.has(property);\n}\n\n//# sourceMappingURL=parseCss.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2V4cG9ydHMvcGFyc2VDc3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTZDO0FBQzdDLDZHQUE2RyxJQUFJO0FBQ2pILHFDQUFxQyxJQUFJLElBQUk7QUFDN0M7QUFDQSwrQkFBK0Isa0NBQWtDLGlDQUFpQztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJEQUFZO0FBQzlCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9leHBvcnRzL3BhcnNlQ3NzLm1qcz84ZDQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhZmVQYXJzZVVybCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5jb25zdCBpbXBvcnRzUmVnZXggPSAvQGltcG9ydFxccysoPzpcIihbXlwiXSspXCJ8JyhbXiddKyknfHVybFxccypcXChcXHMqKD86XCIoW15cIl0rKVwifCcoW14nXSspJ3woW14nXCIpXSspKVxccypcXCkpKFteO10rKTsvZ2k7XG5jb25zdCBmb250RmFjZVJlZ2V4ID0gL0Bmb250LWZhY2VcXHMqeyhbXn1dKyl9L2dpO1xuY29uc3QgdXJsc1JlZ2V4ID0gL3VybFxccypcXChcXHMqKD86XCIoW15cIl0rKVwifCcoW14nXSspJ3woW14nXCIpXSspKVxccypcXCkvZ2k7XG5jb25zdCBmb250RmFtaWx5UmVnZXggPSAvKD86Xnw7KVxccypmb250LWZhbWlseVxccyo6XFxzKig/OihbXidcIl1bXjtcXG5dKyl8XCIoW15cIl0rKVwifCcoW14nXSspJylcXHMqKD86O3wkKS9naTtcbmZ1bmN0aW9uIHBhcnNlQ3NzSW1wb3J0cyhjc3MpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oY3NzLm1hdGNoQWxsKGltcG9ydHNSZWdleCksIChtKSA9PiAoe1xuICAgIHVybDogbVsxXSB8fCBtWzJdIHx8IG1bM10gfHwgbVs0XSB8fCBtWzVdLFxuICAgIGV4dHJhczogbVs2XVxuICB9KSk7XG59XG5mdW5jdGlvbiBwYXJzZUNzc0ZvbnRGYWNlcyhjc3MsIGJhc2VVcmwpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oY3NzLm1hdGNoQWxsKGZvbnRGYWNlUmVnZXgpLCAobSkgPT4ge1xuICAgIGNvbnN0IGZvbnRGYWNlID0gbVsxXTtcbiAgICBjb25zdCB1cmxzID0gQXJyYXkuZnJvbShmb250RmFjZS5tYXRjaEFsbCh1cmxzUmVnZXgpLCAobTIpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsID0gbTJbMV0gfHwgbTJbMl0gfHwgbTJbM107XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcmlnaW5hbCxcbiAgICAgICAgcmVzb2x2ZWQ6IHNhZmVQYXJzZVVybChvcmlnaW5hbCwgYmFzZVVybCk/LmhyZWYgPz8gbnVsbFxuICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCBmb250RmFtaWxpZXMgPSBuZXcgU2V0KFxuICAgICAgQXJyYXkuZnJvbShmb250RmFjZS5tYXRjaEFsbChmb250RmFtaWx5UmVnZXgpLCAobTIpID0+IChtMlsxXSB8fCBtMlsyXSB8fCBtMlszXSkudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICAgIHJldHVybiB7IGZvbnRGYWNlLCB1cmxzLCBmb250RmFtaWxpZXMgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZUNzc0ZvbnRGYW1pbHlWYWx1ZSh2YWx1ZSkge1xuICBjb25zdCB2YWx1ZVJlZ2V4ID0gL1xccyooPzooW14nXCJdW147XFxuXFxzLF0rKXxcIihbXlwiXSspXCJ8JyhbXiddKyknKVxccyovZ2k7XG4gIGNvbnN0IHNlcGFyYXRvclJlZ2V4ID0gL1xccyosXFxzKi9naTtcbiAgY29uc3QgZm9udEZhbWlsaWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCB2YWx1ZU1hdGNoID0gdmFsdWVSZWdleC5leGVjKHZhbHVlKTtcbiAgICBpZiAoIXZhbHVlTWF0Y2gpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBmb250RmFtaWx5ID0gdmFsdWVNYXRjaFsxXSB8fCB2YWx1ZU1hdGNoWzJdIHx8IHZhbHVlTWF0Y2hbM107XG4gICAgZm9udEZhbWlsaWVzLmFkZChmb250RmFtaWx5LnRvTG93ZXJDYXNlKCkpO1xuICAgIHNlcGFyYXRvclJlZ2V4Lmxhc3RJbmRleCA9IHZhbHVlUmVnZXgubGFzdEluZGV4O1xuICAgIGNvbnN0IHNlcGFyYXRvck1hdGNoID0gc2VwYXJhdG9yUmVnZXguZXhlYyh2YWx1ZSk7XG4gICAgaWYgKCFzZXBhcmF0b3JNYXRjaCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhbHVlUmVnZXgubGFzdEluZGV4ID0gc2VwYXJhdG9yUmVnZXgubGFzdEluZGV4O1xuICB9XG4gIHJldHVybiBmb250RmFtaWxpZXM7XG59XG5mdW5jdGlvbiBzaG91bGRJbmNsdWRlQ3NzUHJvcGVydHkocHJvcGVydHkpIHtcbiAgaWYgKHByb3BlcnR5LnN0YXJ0c1dpdGgoXCItXCIpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChwcm9wZXJ0eS5zdGFydHNXaXRoKFwiYW5pbWF0aW9uXCIpKSByZXR1cm4gZmFsc2U7XG4gIGlmIChwcm9wZXJ0eS5zdGFydHNXaXRoKFwidHJhbnNpdGlvblwiKSkgcmV0dXJuIGZhbHNlO1xuICBpZiAocHJvcGVydHkgPT09IFwiY3Vyc29yXCIpIHJldHVybiBmYWxzZTtcbiAgaWYgKHByb3BlcnR5ID09PSBcInBvaW50ZXItZXZlbnRzXCIpIHJldHVybiBmYWxzZTtcbiAgaWYgKHByb3BlcnR5ID09PSBcInVzZXItc2VsZWN0XCIpIHJldHVybiBmYWxzZTtcbiAgaWYgKHByb3BlcnR5ID09PSBcInRvdWNoLWFjdGlvblwiKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcGFyc2VDc3MoY3NzLCBiYXNlVXJsKSB7XG4gIHJldHVybiB7XG4gICAgaW1wb3J0czogcGFyc2VDc3NJbXBvcnRzKGNzcyksXG4gICAgZm9udEZhY2VzOiBwYXJzZUNzc0ZvbnRGYWNlcyhjc3MsIGJhc2VVcmwpXG4gIH07XG59XG5mdW5jdGlvbiBwYXJzZUNzc1ZhbHVlVXJscyh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZS5tYXRjaEFsbCh1cmxzUmVnZXgpLCAobSkgPT4gKHtcbiAgICBvcmlnaW5hbDogbVswXSxcbiAgICB1cmw6IG1bMV0gfHwgbVsyXSB8fCBtWzNdXG4gIH0pKTtcbn1cbmNvbnN0IGluaGVyaXRlZFByb3BlcnRpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwiYm9yZGVyLWNvbGxhcHNlXCIsXG4gIFwiYm9yZGVyLXNwYWNpbmdcIixcbiAgXCJjYXB0aW9uLXNpZGVcIixcbiAgXCJjb2xvclwiLFxuICBcImN1cnNvclwiLFxuICBcImRpcmVjdGlvblwiLFxuICBcImVtcHR5LWNlbGxzXCIsXG4gIFwiZm9udC1mYW1pbHlcIixcbiAgXCJmb250LXNpemVcIixcbiAgXCJmb250LXN0eWxlXCIsXG4gIFwiZm9udC12YXJpYW50XCIsXG4gIFwiZm9udC13ZWlnaHRcIixcbiAgXCJmb250LXNpemUtYWRqdXN0XCIsXG4gIFwiZm9udC1zdHJldGNoXCIsXG4gIFwiZm9udFwiLFxuICBcImxldHRlci1zcGFjaW5nXCIsXG4gIFwibGluZS1oZWlnaHRcIixcbiAgXCJsaXN0LXN0eWxlLWltYWdlXCIsXG4gIFwibGlzdC1zdHlsZS1wb3NpdGlvblwiLFxuICBcImxpc3Qtc3R5bGUtdHlwZVwiLFxuICBcImxpc3Qtc3R5bGVcIixcbiAgXCJvcnBoYW5zXCIsXG4gIFwicXVvdGVzXCIsXG4gIFwidGFiLXNpemVcIixcbiAgXCJ0ZXh0LWFsaWduXCIsXG4gIFwidGV4dC1hbGlnbi1sYXN0XCIsXG4gIFwidGV4dC1kZWNvcmF0aW9uLWNvbG9yXCIsXG4gIFwidGV4dC1pbmRlbnRcIixcbiAgXCJ0ZXh0LWp1c3RpZnlcIixcbiAgXCJ0ZXh0LXNoYWRvd1wiLFxuICBcInRleHQtdHJhbnNmb3JtXCIsXG4gIFwidmlzaWJpbGl0eVwiLFxuICBcIndoaXRlLXNwYWNlXCIsXG4gIFwid2lkb3dzXCIsXG4gIFwid29yZC1icmVha1wiLFxuICBcIndvcmQtc3BhY2luZ1wiLFxuICBcIndvcmQtd3JhcFwiXG5dKTtcbmZ1bmN0aW9uIGlzUHJvcGVydHlJbmhlcml0ZWQocHJvcGVydHkpIHtcbiAgcmV0dXJuIGluaGVyaXRlZFByb3BlcnRpZXMuaGFzKHByb3BlcnR5KTtcbn1cbmV4cG9ydCB7XG4gIGlzUHJvcGVydHlJbmhlcml0ZWQsXG4gIHBhcnNlQ3NzLFxuICBwYXJzZUNzc0ZvbnRGYWNlcyxcbiAgcGFyc2VDc3NGb250RmFtaWx5VmFsdWUsXG4gIHBhcnNlQ3NzSW1wb3J0cyxcbiAgcGFyc2VDc3NWYWx1ZVVybHMsXG4gIHNob3VsZEluY2x1ZGVDc3NQcm9wZXJ0eVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlQ3NzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/exports/parseCss.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tlenv: () => (/* binding */ tlenv)\n/* harmony export */ });\nconst tlenv = {\n  isSafari: false,\n  isIos: false,\n  isChromeForIos: false,\n  isFirefox: false,\n  isAndroid: false,\n  isWebview: false,\n  isDarwin: false\n};\nif (typeof window !== \"undefined\" && \"navigator\" in window) {\n  tlenv.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  tlenv.isIos = !!navigator.userAgent.match(/iPad/i) || !!navigator.userAgent.match(/iPhone/i);\n  tlenv.isChromeForIos = /crios.*safari/i.test(navigator.userAgent);\n  tlenv.isFirefox = /firefox/i.test(navigator.userAgent);\n  tlenv.isAndroid = /android/i.test(navigator.userAgent);\n  tlenv.isDarwin = window.navigator.userAgent.toLowerCase().indexOf(\"mac\") > -1;\n}\n\n//# sourceMappingURL=environment.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2dsb2JhbHMvZW52aXJvbm1lbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9nbG9iYWxzL2Vudmlyb25tZW50Lm1qcz8wYjllIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRsZW52ID0ge1xuICBpc1NhZmFyaTogZmFsc2UsXG4gIGlzSW9zOiBmYWxzZSxcbiAgaXNDaHJvbWVGb3JJb3M6IGZhbHNlLFxuICBpc0ZpcmVmb3g6IGZhbHNlLFxuICBpc0FuZHJvaWQ6IGZhbHNlLFxuICBpc1dlYnZpZXc6IGZhbHNlLFxuICBpc0RhcndpbjogZmFsc2Vcbn07XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBcIm5hdmlnYXRvclwiIGluIHdpbmRvdykge1xuICB0bGVudi5pc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIHRsZW52LmlzSW9zID0gISFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpIHx8ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpO1xuICB0bGVudi5pc0Nocm9tZUZvcklvcyA9IC9jcmlvcy4qc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgdGxlbnYuaXNGaXJlZm94ID0gL2ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICB0bGVudi5pc0FuZHJvaWQgPSAvYW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIHRsZW52LmlzRGFyd2luID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwibWFjXCIpID4gLTE7XG59XG5leHBvcnQge1xuICB0bGVudlxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudmlyb25tZW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tlmenus: () => (/* binding */ tlmenus)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n\nconst tlmenus = {\n  /**\n   * A set of strings representing any open menus. When menus are open,\n   * certain interactions will behave differently; for example, when a\n   * draw tool is selected and a menu is open, a pointer-down will not\n   * create a dot (because the user is probably trying to close the menu)\n   * however a pointer-down event followed by a drag will begin drawing\n   * a line (because the user is BOTH trying to close the menu AND start\n   * drawing a line).\n   *\n   * @public\n   */\n  menus: (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"open menus\", []),\n  /**\n   * Get the current open menus.\n   *\n   * @param contextId - An optional context to get menus for.\n   *\n   * @public\n   */\n  getOpenMenus(contextId) {\n    if (contextId) return this.menus.get().filter((m) => m.endsWith(\"-\" + contextId));\n    return this.menus.get();\n  },\n  /**\n   * Add an open menu.\n   *\n   * @example\n   * ```ts\n   * addOpenMenu('menu-id')\n   * addOpenMenu('menu-id', myEditorId)\n   * ```\n   *\n   * @param id - The id of the menu to add.\n   * @param contextId - An optional context to add the menu to.\n   *\n   * @public\n   */\n  addOpenMenu(id, contextId = \"\") {\n    const idWithContext = contextId ? `${id}-${contextId}` : id;\n    const menus = new Set(this.menus.get());\n    if (!menus.has(idWithContext)) {\n      menus.add(idWithContext);\n      this.menus.set([...menus]);\n    }\n  },\n  /**\n   * Delete an open menu.\n   *\n   * @example\n   * ```ts\n   * deleteOpenMenu('menu-id')\n   * deleteOpenMenu('menu-id', myEditorId)\n   * ```\n   *\n   * @param id - The id of the menu to delete.\n   * @param contextId - An optional context to delete the menu from.\n   *\n   * @public\n   */\n  deleteOpenMenu(id, contextId = \"\") {\n    const idWithContext = contextId ? `${id}-${contextId}` : id;\n    const menus = new Set(this.menus.get());\n    if (menus.has(idWithContext)) {\n      menus.delete(idWithContext);\n      this.menus.set([...menus]);\n    }\n  },\n  /**\n   * Clear all open menus.\n   *\n   * @example\n   * ```ts\n   * clearOpenMenus()\n   * clearOpenMenus(myEditorId)\n   * ```\n   *\n   * @param contextId - An optional context to clear menus for.\n   *\n   * @public\n   */\n  clearOpenMenus(contextId) {\n    this.menus.set(contextId ? this.menus.get().filter((m) => !m.endsWith(\"-\" + contextId)) : []);\n  },\n  _hiddenMenus: [],\n  /**\n   * Hide all open menus. Restore them with the `showOpenMenus` method.\n   *\n   * @example\n   * ```ts\n   * hideOpenMenus()\n   * hideOpenMenus(myEditorId)\n   * ```\n   *\n   * @param contextId - An optional context to hide menus for.\n   *\n   * @public\n   */\n  hideOpenMenus(contextId) {\n    this._hiddenMenus = [...this.getOpenMenus(contextId)];\n    if (this._hiddenMenus.length === 0) return;\n    for (const menu of this._hiddenMenus) {\n      this.deleteOpenMenu(menu, contextId);\n    }\n  },\n  /**\n   * Show all hidden menus.\n   *\n   * @example\n   * ```ts\n   * showOpenMenus()\n   * showOpenMenus(myEditorId)\n   * ```\n   *\n   * @param contextId - An optional context to show menus for.\n   *\n   * @public\n   */\n  showOpenMenus(contextId) {\n    if (this._hiddenMenus.length === 0) return;\n    for (const menu of this._hiddenMenus) {\n      this.addOpenMenu(menu, contextId);\n    }\n    this._hiddenMenus = [];\n  },\n  /**\n   * Get whether a menu is open for a given context.\n   *\n   * @example\n   * ```ts\n   * isMenuOpem(id, myEditorId)\n   * ```\n   *\n   * @param id - The id of the menu to check.\n   * @param contextId - An optional context to check menus for.\n   *\n   * @public\n   */\n  isMenuOpen(id, contextId) {\n    return this.getOpenMenus(contextId).includes(id);\n  },\n  /**\n   * Get whether any menus are open for a given context.\n   *\n   * @example\n   * ```ts\n   * hasOpenMenus(myEditorId)\n   * ```\n   *\n   * @param contextId - A context to check menus for.\n   *\n   * @public\n   */\n  hasOpenMenus(contextId) {\n    return this.getOpenMenus(contextId).length > 0;\n  },\n  /**\n   * Get whether any menus are open for any context.\n   *\n   * @example\n   * ```ts\n   * hasAnyOpenMenus()\n   * ```\n   *\n   * @public\n   */\n  hasAnyOpenMenus() {\n    return this.getOpenMenus().length > 0;\n  },\n  forContext(contextId) {\n    return {\n      getOpenMenus: () => this.getOpenMenus(contextId),\n      addOpenMenu: (id) => this.addOpenMenu(id, contextId),\n      deleteOpenMenu: (id) => this.deleteOpenMenu(id, contextId),\n      clearOpenMenus: () => this.clearOpenMenus(contextId),\n      // Gets whether any menus are open\n      isMenuOpen: (id) => this.isMenuOpen(id, contextId),\n      hasOpenMenus: () => this.hasOpenMenus(contextId),\n      hasAnyOpenMenus: () => this.hasAnyOpenMenus()\n    };\n  }\n};\n\n//# sourceMappingURL=menus.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2dsb2JhbHMvbWVudXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtREFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxHQUFHLEdBQUcsVUFBVTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxHQUFHLEdBQUcsVUFBVTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZ2xvYmFscy9tZW51cy5tanM/YWU4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmNvbnN0IHRsbWVudXMgPSB7XG4gIC8qKlxuICAgKiBBIHNldCBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyBhbnkgb3BlbiBtZW51cy4gV2hlbiBtZW51cyBhcmUgb3BlbixcbiAgICogY2VydGFpbiBpbnRlcmFjdGlvbnMgd2lsbCBiZWhhdmUgZGlmZmVyZW50bHk7IGZvciBleGFtcGxlLCB3aGVuIGFcbiAgICogZHJhdyB0b29sIGlzIHNlbGVjdGVkIGFuZCBhIG1lbnUgaXMgb3BlbiwgYSBwb2ludGVyLWRvd24gd2lsbCBub3RcbiAgICogY3JlYXRlIGEgZG90IChiZWNhdXNlIHRoZSB1c2VyIGlzIHByb2JhYmx5IHRyeWluZyB0byBjbG9zZSB0aGUgbWVudSlcbiAgICogaG93ZXZlciBhIHBvaW50ZXItZG93biBldmVudCBmb2xsb3dlZCBieSBhIGRyYWcgd2lsbCBiZWdpbiBkcmF3aW5nXG4gICAqIGEgbGluZSAoYmVjYXVzZSB0aGUgdXNlciBpcyBCT1RIIHRyeWluZyB0byBjbG9zZSB0aGUgbWVudSBBTkQgc3RhcnRcbiAgICogZHJhd2luZyBhIGxpbmUpLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBtZW51czogYXRvbShcIm9wZW4gbWVudXNcIiwgW10pLFxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IG9wZW4gbWVudXMuXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZXh0SWQgLSBBbiBvcHRpb25hbCBjb250ZXh0IHRvIGdldCBtZW51cyBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldE9wZW5NZW51cyhjb250ZXh0SWQpIHtcbiAgICBpZiAoY29udGV4dElkKSByZXR1cm4gdGhpcy5tZW51cy5nZXQoKS5maWx0ZXIoKG0pID0+IG0uZW5kc1dpdGgoXCItXCIgKyBjb250ZXh0SWQpKTtcbiAgICByZXR1cm4gdGhpcy5tZW51cy5nZXQoKTtcbiAgfSxcbiAgLyoqXG4gICAqIEFkZCBhbiBvcGVuIG1lbnUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGFkZE9wZW5NZW51KCdtZW51LWlkJylcbiAgICogYWRkT3Blbk1lbnUoJ21lbnUtaWQnLCBteUVkaXRvcklkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBtZW51IHRvIGFkZC5cbiAgICogQHBhcmFtIGNvbnRleHRJZCAtIEFuIG9wdGlvbmFsIGNvbnRleHQgdG8gYWRkIHRoZSBtZW51IHRvLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRPcGVuTWVudShpZCwgY29udGV4dElkID0gXCJcIikge1xuICAgIGNvbnN0IGlkV2l0aENvbnRleHQgPSBjb250ZXh0SWQgPyBgJHtpZH0tJHtjb250ZXh0SWR9YCA6IGlkO1xuICAgIGNvbnN0IG1lbnVzID0gbmV3IFNldCh0aGlzLm1lbnVzLmdldCgpKTtcbiAgICBpZiAoIW1lbnVzLmhhcyhpZFdpdGhDb250ZXh0KSkge1xuICAgICAgbWVudXMuYWRkKGlkV2l0aENvbnRleHQpO1xuICAgICAgdGhpcy5tZW51cy5zZXQoWy4uLm1lbnVzXSk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogRGVsZXRlIGFuIG9wZW4gbWVudS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZGVsZXRlT3Blbk1lbnUoJ21lbnUtaWQnKVxuICAgKiBkZWxldGVPcGVuTWVudSgnbWVudS1pZCcsIG15RWRpdG9ySWQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIG1lbnUgdG8gZGVsZXRlLlxuICAgKiBAcGFyYW0gY29udGV4dElkIC0gQW4gb3B0aW9uYWwgY29udGV4dCB0byBkZWxldGUgdGhlIG1lbnUgZnJvbS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVsZXRlT3Blbk1lbnUoaWQsIGNvbnRleHRJZCA9IFwiXCIpIHtcbiAgICBjb25zdCBpZFdpdGhDb250ZXh0ID0gY29udGV4dElkID8gYCR7aWR9LSR7Y29udGV4dElkfWAgOiBpZDtcbiAgICBjb25zdCBtZW51cyA9IG5ldyBTZXQodGhpcy5tZW51cy5nZXQoKSk7XG4gICAgaWYgKG1lbnVzLmhhcyhpZFdpdGhDb250ZXh0KSkge1xuICAgICAgbWVudXMuZGVsZXRlKGlkV2l0aENvbnRleHQpO1xuICAgICAgdGhpcy5tZW51cy5zZXQoWy4uLm1lbnVzXSk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogQ2xlYXIgYWxsIG9wZW4gbWVudXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNsZWFyT3Blbk1lbnVzKClcbiAgICogY2xlYXJPcGVuTWVudXMobXlFZGl0b3JJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZXh0SWQgLSBBbiBvcHRpb25hbCBjb250ZXh0IHRvIGNsZWFyIG1lbnVzIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYXJPcGVuTWVudXMoY29udGV4dElkKSB7XG4gICAgdGhpcy5tZW51cy5zZXQoY29udGV4dElkID8gdGhpcy5tZW51cy5nZXQoKS5maWx0ZXIoKG0pID0+ICFtLmVuZHNXaXRoKFwiLVwiICsgY29udGV4dElkKSkgOiBbXSk7XG4gIH0sXG4gIF9oaWRkZW5NZW51czogW10sXG4gIC8qKlxuICAgKiBIaWRlIGFsbCBvcGVuIG1lbnVzLiBSZXN0b3JlIHRoZW0gd2l0aCB0aGUgYHNob3dPcGVuTWVudXNgIG1ldGhvZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogaGlkZU9wZW5NZW51cygpXG4gICAqIGhpZGVPcGVuTWVudXMobXlFZGl0b3JJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZXh0SWQgLSBBbiBvcHRpb25hbCBjb250ZXh0IHRvIGhpZGUgbWVudXMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoaWRlT3Blbk1lbnVzKGNvbnRleHRJZCkge1xuICAgIHRoaXMuX2hpZGRlbk1lbnVzID0gWy4uLnRoaXMuZ2V0T3Blbk1lbnVzKGNvbnRleHRJZCldO1xuICAgIGlmICh0aGlzLl9oaWRkZW5NZW51cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBmb3IgKGNvbnN0IG1lbnUgb2YgdGhpcy5faGlkZGVuTWVudXMpIHtcbiAgICAgIHRoaXMuZGVsZXRlT3Blbk1lbnUobWVudSwgY29udGV4dElkKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBTaG93IGFsbCBoaWRkZW4gbWVudXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIHNob3dPcGVuTWVudXMoKVxuICAgKiBzaG93T3Blbk1lbnVzKG15RWRpdG9ySWQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY29udGV4dElkIC0gQW4gb3B0aW9uYWwgY29udGV4dCB0byBzaG93IG1lbnVzIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2hvd09wZW5NZW51cyhjb250ZXh0SWQpIHtcbiAgICBpZiAodGhpcy5faGlkZGVuTWVudXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBtZW51IG9mIHRoaXMuX2hpZGRlbk1lbnVzKSB7XG4gICAgICB0aGlzLmFkZE9wZW5NZW51KG1lbnUsIGNvbnRleHRJZCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGRlbk1lbnVzID0gW107XG4gIH0sXG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciBhIG1lbnUgaXMgb3BlbiBmb3IgYSBnaXZlbiBjb250ZXh0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBpc01lbnVPcGVtKGlkLCBteUVkaXRvcklkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBtZW51IHRvIGNoZWNrLlxuICAgKiBAcGFyYW0gY29udGV4dElkIC0gQW4gb3B0aW9uYWwgY29udGV4dCB0byBjaGVjayBtZW51cyBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGlzTWVudU9wZW4oaWQsIGNvbnRleHRJZCkge1xuICAgIHJldHVybiB0aGlzLmdldE9wZW5NZW51cyhjb250ZXh0SWQpLmluY2x1ZGVzKGlkKTtcbiAgfSxcbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIGFueSBtZW51cyBhcmUgb3BlbiBmb3IgYSBnaXZlbiBjb250ZXh0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBoYXNPcGVuTWVudXMobXlFZGl0b3JJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZXh0SWQgLSBBIGNvbnRleHQgdG8gY2hlY2sgbWVudXMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoYXNPcGVuTWVudXMoY29udGV4dElkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3Blbk1lbnVzKGNvbnRleHRJZCkubGVuZ3RoID4gMDtcbiAgfSxcbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIGFueSBtZW51cyBhcmUgb3BlbiBmb3IgYW55IGNvbnRleHQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGhhc0FueU9wZW5NZW51cygpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoYXNBbnlPcGVuTWVudXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3Blbk1lbnVzKCkubGVuZ3RoID4gMDtcbiAgfSxcbiAgZm9yQ29udGV4dChjb250ZXh0SWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0T3Blbk1lbnVzOiAoKSA9PiB0aGlzLmdldE9wZW5NZW51cyhjb250ZXh0SWQpLFxuICAgICAgYWRkT3Blbk1lbnU6IChpZCkgPT4gdGhpcy5hZGRPcGVuTWVudShpZCwgY29udGV4dElkKSxcbiAgICAgIGRlbGV0ZU9wZW5NZW51OiAoaWQpID0+IHRoaXMuZGVsZXRlT3Blbk1lbnUoaWQsIGNvbnRleHRJZCksXG4gICAgICBjbGVhck9wZW5NZW51czogKCkgPT4gdGhpcy5jbGVhck9wZW5NZW51cyhjb250ZXh0SWQpLFxuICAgICAgLy8gR2V0cyB3aGV0aGVyIGFueSBtZW51cyBhcmUgb3BlblxuICAgICAgaXNNZW51T3BlbjogKGlkKSA9PiB0aGlzLmlzTWVudU9wZW4oaWQsIGNvbnRleHRJZCksXG4gICAgICBoYXNPcGVuTWVudXM6ICgpID0+IHRoaXMuaGFzT3Blbk1lbnVzKGNvbnRleHRJZCksXG4gICAgICBoYXNBbnlPcGVuTWVudXM6ICgpID0+IHRoaXMuaGFzQW55T3Blbk1lbnVzKClcbiAgICB9O1xuICB9XG59O1xuZXhwb3J0IHtcbiAgdGxtZW51c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbnVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/time.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/globals/time.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tltime: () => (/* binding */ tltime)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nconst tltime = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Timers();\n\n//# sourceMappingURL=time.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2dsb2JhbHMvdGltZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7QUFDdkMsbUJBQW1CLGlEQUFNO0FBR3ZCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZ2xvYmFscy90aW1lLm1qcz80OWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRpbWVycyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5jb25zdCB0bHRpbWUgPSBuZXcgVGltZXJzKCk7XG5leHBvcnQge1xuICB0bHRpbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/time.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCanvasEvents: () => (/* binding */ useCanvasEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useCanvasEvents() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const events = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    function canvasEvents() {\n      let lastX, lastY;\n      function onPointerDown(e) {\n        if (e.isKilled) return;\n        if (e.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.RIGHT_MOUSE_BUTTON) {\n          editor.dispatch({\n            type: \"pointer\",\n            target: \"canvas\",\n            name: \"right_click\",\n            ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n          });\n          return;\n        }\n        if (e.button !== 0 && e.button !== 1 && e.button !== 5) return;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.setPointerCapture)(e.currentTarget, e);\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_down\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerMove(e) {\n        if (e.isKilled) return;\n        if (e.clientX === lastX && e.clientY === lastY) return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_move\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerUp(e) {\n        if (e.isKilled) return;\n        if (e.button !== 0 && e.button !== 1 && e.button !== 2 && e.button !== 5) return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.releasePointerCapture)(e.currentTarget, e);\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_up\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerEnter(e) {\n        if (e.isKilled) return;\n        if (editor.getInstanceState().isPenMode && e.pointerType !== \"pen\") return;\n        const canHover = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n        editor.updateInstanceState({ isHoveringCanvas: canHover ? true : null });\n      }\n      function onPointerLeave(e) {\n        if (e.isKilled) return;\n        if (editor.getInstanceState().isPenMode && e.pointerType !== \"pen\") return;\n        const canHover = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n        editor.updateInstanceState({ isHoveringCanvas: canHover ? false : null });\n      }\n      function onTouchStart(e) {\n        ;\n        e.isKilled = true;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      function onTouchEnd(e) {\n        ;\n        e.isKilled = true;\n        if (!(e.target instanceof HTMLElement)) return;\n        if (e.target.tagName !== \"A\" && e.target.tagName !== \"TEXTAREA\" && // When in EditingShape state, we are actually clicking on a 'DIV'\n        // not A/TEXTAREA element yet. So, to preserve cursor position\n        // for edit mode on mobile we need to not preventDefault.\n        // TODO: Find out if we still need this preventDefault in general though.\n        !(editor.getEditingShape() && e.target.className.includes(\"tl-text-content\"))) {\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        }\n      }\n      function onDragOver(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      async function onDrop(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(e);\n        if (!e.dataTransfer?.files?.length) return;\n        const files = Array.from(e.dataTransfer.files);\n        await editor.putExternalContent({\n          type: \"files\",\n          files,\n          point: editor.screenToPage({ x: e.clientX, y: e.clientY }),\n          ignoreParent: false\n        });\n      }\n      function onClick(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(e);\n      }\n      return {\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n        onPointerEnter,\n        onPointerLeave,\n        onDragOver,\n        onDrop,\n        onTouchStart,\n        onTouchEnd,\n        onClick\n      };\n    },\n    [editor]\n  );\n  return events;\n}\n\n//# sourceMappingURL=useCanvasEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNhbnZhc0V2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdDO0FBQ3NCO0FBTTVCO0FBQ21DO0FBQ2pCO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlFQUFjO0FBQzdCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUVBQWM7QUFDM0IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5RUFBYztBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBDQUEwQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDJDQUEyQztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhEQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEIsUUFBUSxvRUFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw0QkFBNEI7QUFDbkU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsb0VBQW9CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VDYW52YXNFdmVudHMubWpzP2FjMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUklHSFRfTU9VU0VfQlVUVE9OIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7XG4gIHByZXZlbnREZWZhdWx0LFxuICByZWxlYXNlUG9pbnRlckNhcHR1cmUsXG4gIHNldFBvaW50ZXJDYXB0dXJlLFxuICBzdG9wRXZlbnRQcm9wYWdhdGlvblxufSBmcm9tIFwiLi4vdXRpbHMvZG9tLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UG9pbnRlckluZm8gfSBmcm9tIFwiLi4vdXRpbHMvZ2V0UG9pbnRlckluZm8ubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VDYW52YXNFdmVudHMoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBldmVudHMgPSB1c2VNZW1vKFxuICAgIGZ1bmN0aW9uIGNhbnZhc0V2ZW50cygpIHtcbiAgICAgIGxldCBsYXN0WCwgbGFzdFk7XG4gICAgICBmdW5jdGlvbiBvblBvaW50ZXJEb3duKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSBSSUdIVF9NT1VTRV9CVVRUT04pIHtcbiAgICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICB0YXJnZXQ6IFwiY2FudmFzXCIsXG4gICAgICAgICAgICBuYW1lOiBcInJpZ2h0X2NsaWNrXCIsXG4gICAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5idXR0b24gIT09IDAgJiYgZS5idXR0b24gIT09IDEgJiYgZS5idXR0b24gIT09IDUpIHJldHVybjtcbiAgICAgICAgc2V0UG9pbnRlckNhcHR1cmUoZS5jdXJyZW50VGFyZ2V0LCBlKTtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiY2FudmFzXCIsXG4gICAgICAgICAgbmFtZTogXCJwb2ludGVyX2Rvd25cIixcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZSkge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZS5jbGllbnRYID09PSBsYXN0WCAmJiBlLmNsaWVudFkgPT09IGxhc3RZKSByZXR1cm47XG4gICAgICAgIGxhc3RYID0gZS5jbGllbnRYO1xuICAgICAgICBsYXN0WSA9IGUuY2xpZW50WTtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiY2FudmFzXCIsXG4gICAgICAgICAgbmFtZTogXCJwb2ludGVyX21vdmVcIixcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwICYmIGUuYnV0dG9uICE9PSAxICYmIGUuYnV0dG9uICE9PSAyICYmIGUuYnV0dG9uICE9PSA1KSByZXR1cm47XG4gICAgICAgIGxhc3RYID0gZS5jbGllbnRYO1xuICAgICAgICBsYXN0WSA9IGUuY2xpZW50WTtcbiAgICAgICAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUuY3VycmVudFRhcmdldCwgZSk7XG4gICAgICAgIGVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcImNhbnZhc1wiLFxuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl91cFwiLFxuICAgICAgICAgIC4uLmdldFBvaW50ZXJJbmZvKGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gb25Qb2ludGVyRW50ZXIoZSkge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc1Blbk1vZGUgJiYgZS5wb2ludGVyVHlwZSAhPT0gXCJwZW5cIikgcmV0dXJuO1xuICAgICAgICBjb25zdCBjYW5Ib3ZlciA9IGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiO1xuICAgICAgICBlZGl0b3IudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGlzSG92ZXJpbmdDYW52YXM6IGNhbkhvdmVyID8gdHJ1ZSA6IG51bGwgfSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBvblBvaW50ZXJMZWF2ZShlKSB7XG4gICAgICAgIGlmIChlLmlzS2lsbGVkKSByZXR1cm47XG4gICAgICAgIGlmIChlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUGVuTW9kZSAmJiBlLnBvaW50ZXJUeXBlICE9PSBcInBlblwiKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGNhbkhvdmVyID0gZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNIb3ZlcmluZ0NhbnZhczogY2FuSG92ZXIgPyBmYWxzZSA6IG51bGwgfSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgICAgICA7XG4gICAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xuICAgICAgICA7XG4gICAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIShlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xuICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSAhPT0gXCJBXCIgJiYgZS50YXJnZXQudGFnTmFtZSAhPT0gXCJURVhUQVJFQVwiICYmIC8vIFdoZW4gaW4gRWRpdGluZ1NoYXBlIHN0YXRlLCB3ZSBhcmUgYWN0dWFsbHkgY2xpY2tpbmcgb24gYSAnRElWJ1xuICAgICAgICAvLyBub3QgQS9URVhUQVJFQSBlbGVtZW50IHlldC4gU28sIHRvIHByZXNlcnZlIGN1cnNvciBwb3NpdGlvblxuICAgICAgICAvLyBmb3IgZWRpdCBtb2RlIG9uIG1vYmlsZSB3ZSBuZWVkIHRvIG5vdCBwcmV2ZW50RGVmYXVsdC5cbiAgICAgICAgLy8gVE9ETzogRmluZCBvdXQgaWYgd2Ugc3RpbGwgbmVlZCB0aGlzIHByZXZlbnREZWZhdWx0IGluIGdlbmVyYWwgdGhvdWdoLlxuICAgICAgICAhKGVkaXRvci5nZXRFZGl0aW5nU2hhcGUoKSAmJiBlLnRhcmdldC5jbGFzc05hbWUuaW5jbHVkZXMoXCJ0bC10ZXh0LWNvbnRlbnRcIikpKSB7XG4gICAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uRHJhZ092ZXIoZSkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGZ1bmN0aW9uIG9uRHJvcChlKSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgaWYgKCFlLmRhdGFUcmFuc2Zlcj8uZmlsZXM/Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgICAgICBhd2FpdCBlZGl0b3IucHV0RXh0ZXJuYWxDb250ZW50KHtcbiAgICAgICAgICB0eXBlOiBcImZpbGVzXCIsXG4gICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgcG9pbnQ6IGVkaXRvci5zY3JlZW5Ub1BhZ2UoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KSxcbiAgICAgICAgICBpZ25vcmVQYXJlbnQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgIHN0b3BFdmVudFByb3BhZ2F0aW9uKGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb25Qb2ludGVyRG93bixcbiAgICAgICAgb25Qb2ludGVyTW92ZSxcbiAgICAgICAgb25Qb2ludGVyVXAsXG4gICAgICAgIG9uUG9pbnRlckVudGVyLFxuICAgICAgICBvblBvaW50ZXJMZWF2ZSxcbiAgICAgICAgb25EcmFnT3ZlcixcbiAgICAgICAgb25Ecm9wLFxuICAgICAgICBvblRvdWNoU3RhcnQsXG4gICAgICAgIG9uVG91Y2hFbmQsXG4gICAgICAgIG9uQ2xpY2tcbiAgICAgIH07XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICByZXR1cm4gZXZlbnRzO1xufVxuZXhwb3J0IHtcbiAgdXNlQ2FudmFzRXZlbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQ2FudmFzRXZlbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCoarsePointer: () => (/* binding */ useCoarsePointer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction useCoarsePointer() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let isCoarse = editor.getInstanceState().isCoarsePointer;\n    const handlePointerDown = (e) => {\n      const isCoarseEvent = e.pointerType !== \"mouse\";\n      if (isCoarse === isCoarseEvent) return;\n      isCoarse = isCoarseEvent;\n      editor.updateInstanceState({ isCoarsePointer: isCoarseEvent });\n    };\n    window.addEventListener(\"pointerdown\", handlePointerDown, { capture: true });\n    const mql = window.matchMedia && window.matchMedia(\"(any-pointer: coarse)\");\n    const isForcedFinePointer = _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_1__.tlenv.isFirefox && !_globals_environment_mjs__WEBPACK_IMPORTED_MODULE_1__.tlenv.isAndroid && !_globals_environment_mjs__WEBPACK_IMPORTED_MODULE_1__.tlenv.isIos;\n    const handleMediaQueryChange = () => {\n      const next = isForcedFinePointer ? false : mql.matches;\n      if (isCoarse !== next) return;\n      isCoarse = next;\n      editor.updateInstanceState({ isCoarsePointer: next });\n    };\n    if (mql) {\n      mql.addEventListener(\"change\", handleMediaQueryChange);\n      handleMediaQueryChange();\n    }\n    return () => {\n      window.removeEventListener(\"pointerdown\", handlePointerDown, { capture: true });\n      if (mql) {\n        mql.removeEventListener(\"change\", handleMediaQueryChange);\n      }\n    };\n  }, [editor]);\n}\n\n//# sourceMappingURL=useCoarsePointer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNvYXJzZVBvaW50ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFDaUI7QUFDUDtBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQixFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQ0FBZ0M7QUFDbkU7QUFDQSxnRUFBZ0UsZUFBZTtBQUMvRTtBQUNBLGdDQUFnQywyREFBSyxlQUFlLDJEQUFLLGVBQWUsMkRBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxlQUFlO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VDb2Fyc2VQb2ludGVyLm1qcz8xMTljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdGxlbnYgfSBmcm9tIFwiLi4vZ2xvYmFscy9lbnZpcm9ubWVudC5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZUNvYXJzZVBvaW50ZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc0NvYXJzZSA9IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNDb2Fyc2VQb2ludGVyO1xuICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJEb3duID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGlzQ29hcnNlRXZlbnQgPSBlLnBvaW50ZXJUeXBlICE9PSBcIm1vdXNlXCI7XG4gICAgICBpZiAoaXNDb2Fyc2UgPT09IGlzQ29hcnNlRXZlbnQpIHJldHVybjtcbiAgICAgIGlzQ29hcnNlID0gaXNDb2Fyc2VFdmVudDtcbiAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNDb2Fyc2VQb2ludGVyOiBpc0NvYXJzZUV2ZW50IH0pO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBoYW5kbGVQb2ludGVyRG93biwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIGNvbnN0IG1xbCA9IHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKFwiKGFueS1wb2ludGVyOiBjb2Fyc2UpXCIpO1xuICAgIGNvbnN0IGlzRm9yY2VkRmluZVBvaW50ZXIgPSB0bGVudi5pc0ZpcmVmb3ggJiYgIXRsZW52LmlzQW5kcm9pZCAmJiAhdGxlbnYuaXNJb3M7XG4gICAgY29uc3QgaGFuZGxlTWVkaWFRdWVyeUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSBpc0ZvcmNlZEZpbmVQb2ludGVyID8gZmFsc2UgOiBtcWwubWF0Y2hlcztcbiAgICAgIGlmIChpc0NvYXJzZSAhPT0gbmV4dCkgcmV0dXJuO1xuICAgICAgaXNDb2Fyc2UgPSBuZXh0O1xuICAgICAgZWRpdG9yLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBpc0NvYXJzZVBvaW50ZXI6IG5leHQgfSk7XG4gICAgfTtcbiAgICBpZiAobXFsKSB7XG4gICAgICBtcWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVNZWRpYVF1ZXJ5Q2hhbmdlKTtcbiAgICAgIGhhbmRsZU1lZGlhUXVlcnlDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgaGFuZGxlUG9pbnRlckRvd24sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgIGlmIChtcWwpIHtcbiAgICAgICAgbXFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlTWVkaWFRdWVyeUNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2VkaXRvcl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlQ29hcnNlUG9pbnRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUNvYXJzZVBvaW50ZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContainerProvider: () => (/* binding */ ContainerProvider),\n/* harmony export */   useContainer: () => (/* binding */ useContainer),\n/* harmony export */   useContainerIfExists: () => (/* binding */ useContainerIfExists)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\nconst ContainerContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nfunction ContainerProvider({ container, children }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ContainerContext.Provider, { value: container, children });\n}\nfunction useContainer() {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)((0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ContainerContext), \"useContainer used outside of <Tldraw />\");\n}\nfunction useContainerIfExists() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ContainerContext);\n}\n\n//# sourceMappingURL=useContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNvbnRhaW5lci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdDO0FBQ0s7QUFDSztBQUNsRCx5QkFBeUIsb0RBQWE7QUFDdEMsNkJBQTZCLHFCQUFxQjtBQUNsRCx5QkFBeUIsc0RBQUcsOEJBQThCLDRCQUE0QjtBQUN0RjtBQUNBO0FBQ0EsU0FBUywyREFBWSxDQUFDLGlEQUFVO0FBQ2hDO0FBQ0E7QUFDQSxTQUFTLGlEQUFVO0FBQ25CO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VDb250YWluZXIubWpzPzZmNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBhc3NlcnRFeGlzdHMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuY29uc3QgQ29udGFpbmVyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiBDb250YWluZXJQcm92aWRlcih7IGNvbnRhaW5lciwgY2hpbGRyZW4gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDb250YWluZXJDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjb250YWluZXIsIGNoaWxkcmVuIH0pO1xufVxuZnVuY3Rpb24gdXNlQ29udGFpbmVyKCkge1xuICByZXR1cm4gYXNzZXJ0RXhpc3RzKHVzZUNvbnRleHQoQ29udGFpbmVyQ29udGV4dCksIFwidXNlQ29udGFpbmVyIHVzZWQgb3V0c2lkZSBvZiA8VGxkcmF3IC8+XCIpO1xufVxuZnVuY3Rpb24gdXNlQ29udGFpbmVySWZFeGlzdHMoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KENvbnRhaW5lckNvbnRleHQpO1xufVxuZXhwb3J0IHtcbiAgQ29udGFpbmVyUHJvdmlkZXIsXG4gIHVzZUNvbnRhaW5lcixcbiAgdXNlQ29udGFpbmVySWZFeGlzdHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VDb250YWluZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCursor: () => (/* binding */ getCursor),\n/* harmony export */   useCursor: () => (/* binding */ useCursor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n\n\n\n\n\nconst CORNER_SVG = `<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>`;\nconst EDGE_SVG = `<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>`;\nconst ROTATE_CORNER_SVG = `<path d=\"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z\" fill=\"black\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z\" fill=\"white\"/>`;\nfunction getCursorCss(svg, r, tr, f, color, hotspotX = 16, hotspotY = 16) {\n  const a = (-tr - r) * (_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI / 180);\n  const s = Math.sin(a);\n  const c = Math.cos(a);\n  const dx = 1 * c - 1 * s;\n  const dy = 1 * s + 1 * c;\n  return `url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${color};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${dx}' dy='${dy}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${r + tr} 16 16)${f ? ` scale(-1,-1) translate(0, -32)` : \"\"}' filter='url(%23shadow)'>` + svg.replaceAll(`\"`, `'`) + `</g></svg>\") ${hotspotX} ${hotspotY}, pointer`;\n}\nconst STATIC_CURSORS = [\n  \"default\",\n  \"pointer\",\n  \"cross\",\n  \"move\",\n  \"grab\",\n  \"grabbing\",\n  \"text\",\n  \"zoom-in\",\n  \"zoom-out\"\n];\nconst CURSORS = {\n  none: () => \"none\",\n  \"ew-resize\": (r, f, c) => getCursorCss(EDGE_SVG, r, 0, f, c),\n  \"ns-resize\": (r, f, c) => getCursorCss(EDGE_SVG, r, 90, f, c),\n  \"nesw-resize\": (r, f, c) => getCursorCss(CORNER_SVG, r, 0, f, c),\n  \"nwse-resize\": (r, f, c) => getCursorCss(CORNER_SVG, r, 90, f, c),\n  \"nwse-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 0, f, c),\n  \"nesw-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 90, f, c),\n  \"senw-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 180, f, c),\n  \"swne-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 270, f, c)\n};\nfunction getCursor(cursor, rotation = 0, color = \"black\") {\n  return CURSORS[cursor]((0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.radiansToDegrees)(rotation), false, color);\n}\nfunction useCursor() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__.useContainer)();\n  const isDarkMode = (0,_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_4__.useIsDarkMode)();\n  (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useQuickReactor)(\n    \"useCursor\",\n    () => {\n      const { type, rotation } = editor.getInstanceState().cursor;\n      if (STATIC_CURSORS.includes(type)) {\n        container.style.setProperty(\"--tl-cursor\", `var(--tl-cursor-${type})`);\n        return;\n      }\n      container.style.setProperty(\n        \"--tl-cursor\",\n        getCursor(type, rotation, isDarkMode ? \"white\" : \"black\")\n      );\n    },\n    [editor, container, isDarkMode]\n  );\n}\n\n//# sourceMappingURL=useCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUN1cnNvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzRDtBQUNTO0FBQ2I7QUFDTjtBQUNRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFFO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUlBQXFJLE9BQU8saUlBQWlJLEdBQUcsUUFBUSxHQUFHLDRGQUE0RixRQUFRLFFBQVEsMkNBQTJDLHlFQUF5RSxVQUFVLEVBQUUsU0FBUztBQUNoaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVFQUFnQjtBQUN6QztBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLG9CQUFvQiwrREFBWTtBQUNoQyxxQkFBcUIsaUVBQWE7QUFDbEMsRUFBRSxvRUFBZTtBQUNqQjtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQSxzRUFBc0UsS0FBSztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VDdXJzb3IubWpzPzUyOTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUXVpY2tSZWFjdG9yIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IFBJLCByYWRpYW5zVG9EZWdyZWVzIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyB1c2VDb250YWluZXIgfSBmcm9tIFwiLi91c2VDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0RhcmtNb2RlIH0gZnJvbSBcIi4vdXNlSXNEYXJrTW9kZS5tanNcIjtcbmNvbnN0IENPUk5FUl9TVkcgPSBgPHBhdGggZD0nbTE5Ljc0MzIgMTcuMDg2OS00LjA3MiA0LjA2OCAyLjgyOSAyLjgyOC04LjQ3My0uMDEzLS4wMTMtOC40NyAyLjg0MSAyLjg0MiA0LjA3NS00LjA2OCAxLjQxNC0xLjQxNS0yLjg0NC0yLjg0Mmg4LjQ4NnY4LjQ4NGwtMi44My0yLjgyN3onIGZpbGw9JyUyM2ZmZicvPjxwYXRoIGQ9J20xOC42ODI2IDE2LjczMzQtNC40MjcgNC40MjQgMS44MjggMS44MjgtNS4wNTYtLjAxNi0uMDE0LTUuMDU0IDEuODQyIDEuODQxIDQuNDI4LTQuNDIyIDIuNDc0LTIuNDc1LTEuODQ0LTEuODQzaDUuMDczdjUuMDcxbC0xLjgzLTEuODI4eicgZmlsbD0nJTIzMDAwJy8+YDtcbmNvbnN0IEVER0VfU1ZHID0gYDxwYXRoIGQ9J205IDE3Ljk5MDd2LjAwNWw1Ljk5NyA1Ljk5Ni4wMDEtMy45OTloMS45OTkgMi4wMnY0bDUuOTgtNi4wMDEtNS45OC01Ljk5OS4wMDEgNC4wMTktMi4wMjEuMDAyaC0ybC4wMDEtNC4wMjJ6bTEuNDExLjAwMyAzLjU4Ny0zLjU4OC0uMDAxIDIuNTg3aDMuNSAyLjUyMXYtMi41ODVsMy41NjUgMy41ODYtMy41NjQgMy41ODUtLjAwMS0yLjU4NWgtMi41MjFsLTMuNDk5LS4wMDEtLjAwMSAyLjU4NnonIGZpbGw9JyUyM2ZmZicvPjxwYXRoIGQ9J20xNy40OTcxIDE4Ljk5MzJoMi41MjF2Mi41ODZsMy41NjUtMy41ODYtMy41NjUtMy41ODV2Mi42MDVoLTIuNTIxLTMuNXYtMi42MDdsLTMuNTg2IDMuNTg3IDMuNTg2IDMuNTg2di0yLjU4N3onIGZpbGw9JyUyMzAwMCcvPmA7XG5jb25zdCBST1RBVEVfQ09STkVSX1NWRyA9IGA8cGF0aCBkPVwiTTIyLjQ3ODkgOS40NTcyOEwyNS45OTM1IDEyLjk5NDJMMjIuNDc4OSAxNi41MjgzVjE0LjEwMzJDMTguMTI2IDE0LjE1MDIgMTQuNjA3MSAxNy42NzM3IDE0LjU2NzUgMjIuMDI4M0gxNy4wNUwxMy41MTMgMjUuNTQzTDkuOTc4ODkgMjIuMDI4M0gxMi41Njc0QzEyLjYwNzEgMTYuNTY5MSAxNy4wMjE0IDEyLjE1MDMgMjIuNDc4OSAxMi4xMDMxTDIyLjQ3ODkgOS40NTcyOFpcIiBmaWxsPVwiYmxhY2tcIi8+PHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIxLjQ3ODkgNy4wMzIyM0wyNy40MDM1IDEyLjk5NDVMMjEuNDc4OSAxOC45NTIxVjE1LjE4NjhDMTguNDc5OCAxNS42NTQ5IDE2LjExMTMgMTguMDI3MyAxNS42NDkgMjEuMDI4NEgxOS40NzVMMTMuNTEyOCAyNi45NTNMNy41NTUxOSAyMS4wMjg0SDExLjYxODlDMTIuMTI0MyAxNS44MTU1IDE2LjI2NzkgMTEuNjY3NyAyMS40Nzg5IDExLjE1NTlMMjEuNDc4OSA3LjAzMjIzWk0yMi40Nzg5IDEyLjEwMzFDMTcuMDIxNCAxMi4xNTAzIDEyLjYwNzEgMTYuNTY5MSAxMi41Njc0IDIyLjAyODRIOS45Nzg4OUwxMy41MTMgMjUuNTQzTDE3LjA1IDIyLjAyODRIMTQuNTY3NUMxNC41NzA1IDIxLjY4OTYgMTQuNTk0NyAyMS4zNTU4IDE0LjYzODYgMjEuMDI4NEMxNS4xMTU3IDE3LjQ3NDEgMTcuOTI2NiAxNC42NTkyIDIxLjQ3ODkgMTQuMTc2MUMyMS44MDYzIDE0LjEzMTYgMjIuMTQwMSAxNC4xMDY5IDIyLjQ3ODkgMTQuMTAzMlYxNi41Mjg0TDI1Ljk5MzUgMTIuOTk0MkwyMi40Nzg5IDkuNDU3MjlMMjIuNDc4OSAxMi4xMDMxWlwiIGZpbGw9XCJ3aGl0ZVwiLz5gO1xuZnVuY3Rpb24gZ2V0Q3Vyc29yQ3NzKHN2ZywgciwgdHIsIGYsIGNvbG9yLCBob3RzcG90WCA9IDE2LCBob3RzcG90WSA9IDE2KSB7XG4gIGNvbnN0IGEgPSAoLXRyIC0gcikgKiAoUEkgLyAxODApO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYSk7XG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhKTtcbiAgY29uc3QgZHggPSAxICogYyAtIDEgKiBzO1xuICBjb25zdCBkeSA9IDEgKiBzICsgMSAqIGM7XG4gIHJldHVybiBgdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgaGVpZ2h0PSczMicgd2lkdGg9JzMyJyB2aWV3Qm94PScwIDAgMzIgMzInIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgc3R5bGU9J2NvbG9yOiAke2NvbG9yfTsnPjxkZWZzPjxmaWx0ZXIgaWQ9J3NoYWRvdycgeT0nLTQwJScgeD0nLTQwJScgd2lkdGg9JzE4MHB4JyBoZWlnaHQ9JzE4MCUnIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0nc1JHQic+PGZlRHJvcFNoYWRvdyBkeD0nJHtkeH0nIGR5PScke2R5fScgc3RkRGV2aWF0aW9uPScxLjInIGZsb29kLW9wYWNpdHk9Jy41Jy8+PC9maWx0ZXI+PC9kZWZzPjxnIGZpbGw9J25vbmUnIHRyYW5zZm9ybT0ncm90YXRlKCR7ciArIHRyfSAxNiAxNikke2YgPyBgIHNjYWxlKC0xLC0xKSB0cmFuc2xhdGUoMCwgLTMyKWAgOiBcIlwifScgZmlsdGVyPSd1cmwoJTIzc2hhZG93KSc+YCArIHN2Zy5yZXBsYWNlQWxsKGBcImAsIGAnYCkgKyBgPC9nPjwvc3ZnPlwiKSAke2hvdHNwb3RYfSAke2hvdHNwb3RZfSwgcG9pbnRlcmA7XG59XG5jb25zdCBTVEFUSUNfQ1VSU09SUyA9IFtcbiAgXCJkZWZhdWx0XCIsXG4gIFwicG9pbnRlclwiLFxuICBcImNyb3NzXCIsXG4gIFwibW92ZVwiLFxuICBcImdyYWJcIixcbiAgXCJncmFiYmluZ1wiLFxuICBcInRleHRcIixcbiAgXCJ6b29tLWluXCIsXG4gIFwiem9vbS1vdXRcIlxuXTtcbmNvbnN0IENVUlNPUlMgPSB7XG4gIG5vbmU6ICgpID0+IFwibm9uZVwiLFxuICBcImV3LXJlc2l6ZVwiOiAociwgZiwgYykgPT4gZ2V0Q3Vyc29yQ3NzKEVER0VfU1ZHLCByLCAwLCBmLCBjKSxcbiAgXCJucy1yZXNpemVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhFREdFX1NWRywgciwgOTAsIGYsIGMpLFxuICBcIm5lc3ctcmVzaXplXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoQ09STkVSX1NWRywgciwgMCwgZiwgYyksXG4gIFwibndzZS1yZXNpemVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhDT1JORVJfU1ZHLCByLCA5MCwgZiwgYyksXG4gIFwibndzZS1yb3RhdGVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhST1RBVEVfQ09STkVSX1NWRywgciwgMCwgZiwgYyksXG4gIFwibmVzdy1yb3RhdGVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhST1RBVEVfQ09STkVSX1NWRywgciwgOTAsIGYsIGMpLFxuICBcInNlbnctcm90YXRlXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoUk9UQVRFX0NPUk5FUl9TVkcsIHIsIDE4MCwgZiwgYyksXG4gIFwic3duZS1yb3RhdGVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhST1RBVEVfQ09STkVSX1NWRywgciwgMjcwLCBmLCBjKVxufTtcbmZ1bmN0aW9uIGdldEN1cnNvcihjdXJzb3IsIHJvdGF0aW9uID0gMCwgY29sb3IgPSBcImJsYWNrXCIpIHtcbiAgcmV0dXJuIENVUlNPUlNbY3Vyc29yXShyYWRpYW5zVG9EZWdyZWVzKHJvdGF0aW9uKSwgZmFsc2UsIGNvbG9yKTtcbn1cbmZ1bmN0aW9uIHVzZUN1cnNvcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICBjb25zdCBpc0RhcmtNb2RlID0gdXNlSXNEYXJrTW9kZSgpO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJ1c2VDdXJzb3JcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCB7IHR5cGUsIHJvdGF0aW9uIH0gPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmN1cnNvcjtcbiAgICAgIGlmIChTVEFUSUNfQ1VSU09SUy5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgICBjb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLXRsLWN1cnNvclwiLCBgdmFyKC0tdGwtY3Vyc29yLSR7dHlwZX0pYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgXCItLXRsLWN1cnNvclwiLFxuICAgICAgICBnZXRDdXJzb3IodHlwZSwgcm90YXRpb24sIGlzRGFya01vZGUgPyBcIndoaXRlXCIgOiBcImJsYWNrXCIpXG4gICAgICApO1xuICAgIH0sXG4gICAgW2VkaXRvciwgY29udGFpbmVyLCBpc0RhcmtNb2RlXVxuICApO1xufVxuZXhwb3J0IHtcbiAgZ2V0Q3Vyc29yLFxuICB1c2VDdXJzb3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VDdXJzb3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDarkMode: () => (/* binding */ useDarkMode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n\n\n\n\n\n\nfunction useDarkMode() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__.useContainer)();\n  const isDarkMode = (0,_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_5__.useIsDarkMode)();\n  const forceSrgb = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.forceSrgb);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (isDarkMode) {\n      container.setAttribute(\"data-color-mode\", \"dark\");\n      container.classList.remove(\"tl-theme__light\");\n      container.classList.add(\"tl-theme__dark\");\n    } else {\n      container.setAttribute(\"data-color-mode\", \"light\");\n      container.classList.remove(\"tl-theme__dark\");\n      container.classList.add(\"tl-theme__light\");\n    }\n    if (forceSrgb) {\n      container.classList.add(\"tl-theme__force-sRGB\");\n    } else {\n      container.classList.remove(\"tl-theme__force-sRGB\");\n    }\n  }, [editor, container, forceSrgb, isDarkMode]);\n}\n\n//# sourceMappingURL=useDarkMode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZURhcmtNb2RlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStDO0FBQ3JCO0FBQzRCO0FBQ0o7QUFDTjtBQUNRO0FBQ3BEO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLG9CQUFvQiwrREFBWTtBQUNoQyxxQkFBcUIsaUVBQWE7QUFDbEMsb0JBQW9CLDZEQUFRLENBQUMsOERBQVU7QUFDdkMsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRGFya01vZGUubWpzPzNkYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZGVidWdGbGFncyB9IGZyb20gXCIuLi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7IHVzZUNvbnRhaW5lciB9IGZyb20gXCIuL3VzZUNvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUlzRGFya01vZGUgfSBmcm9tIFwiLi91c2VJc0RhcmtNb2RlLm1qc1wiO1xuZnVuY3Rpb24gdXNlRGFya01vZGUoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgaXNEYXJrTW9kZSA9IHVzZUlzRGFya01vZGUoKTtcbiAgY29uc3QgZm9yY2VTcmdiID0gdXNlVmFsdWUoZGVidWdGbGFncy5mb3JjZVNyZ2IpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0RhcmtNb2RlKSB7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvci1tb2RlXCIsIFwiZGFya1wiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwidGwtdGhlbWVfX2xpZ2h0XCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0bC10aGVtZV9fZGFya1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtY29sb3ItbW9kZVwiLCBcImxpZ2h0XCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC10aGVtZV9fZGFya1wiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGwtdGhlbWVfX2xpZ2h0XCIpO1xuICAgIH1cbiAgICBpZiAoZm9yY2VTcmdiKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRsLXRoZW1lX19mb3JjZS1zUkdCXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInRsLXRoZW1lX19mb3JjZS1zUkdCXCIpO1xuICAgIH1cbiAgfSwgW2VkaXRvciwgY29udGFpbmVyLCBmb3JjZVNyZ2IsIGlzRGFya01vZGVdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZURhcmtNb2RlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlRGFya01vZGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDocumentEvents: () => (/* binding */ useDocumentEvents)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/keyboard.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\n\nfunction useDocumentEvents() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_4__.useContainer)();\n  const isAppFocused = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isFocused\", () => editor.getIsFocused(), [editor]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!container) return;\n    function onDrop(e) {\n      if (e.isSpecialRedispatchedEvent) return;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      const cvs = container.querySelector(\".tl-canvas\");\n      if (!cvs) return;\n      const newEvent = new DragEvent(\"drop\", e);\n      newEvent.isSpecialRedispatchedEvent = true;\n      cvs.dispatchEvent(newEvent);\n    }\n    container.addEventListener(\"dragover\", onDrop);\n    container.addEventListener(\"drop\", onDrop);\n    return () => {\n      container.removeEventListener(\"dragover\", onDrop);\n      container.removeEventListener(\"drop\", onDrop);\n    };\n  }, [container]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (typeof window === \"undefined\" || !(\"matchMedia\" in window)) return;\n    let remove = null;\n    const updatePixelRatio = () => {\n      if (remove != null) {\n        remove();\n      }\n      const mqString = `(resolution: ${window.devicePixelRatio}dppx)`;\n      const media = matchMedia(mqString);\n      const safariCb = (ev) => {\n        if (ev.type === \"change\") {\n          updatePixelRatio();\n        }\n      };\n      if (media.addEventListener) {\n        media.addEventListener(\"change\", updatePixelRatio);\n      } else if (media.addListener) {\n        media.addListener(safariCb);\n      }\n      remove = () => {\n        if (media.removeEventListener) {\n          media.removeEventListener(\"change\", updatePixelRatio);\n        } else if (media.removeListener) {\n          media.removeListener(safariCb);\n        }\n      };\n      editor.updateInstanceState({ devicePixelRatio: window.devicePixelRatio });\n    };\n    updatePixelRatio();\n    return () => {\n      remove?.();\n    };\n  }, [editor]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!isAppFocused) return;\n    const handleKeyDown = (e) => {\n      if (e.altKey && // todo: When should we allow the alt key to be used? Perhaps states should declare which keys matter to them?\n      (editor.isIn(\"zoom\") || !editor.getPath().endsWith(\".idle\")) && !isFocusingInput()) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      if (e.isKilled) return;\n      e.isKilled = true;\n      switch (e.key) {\n        case \"=\":\n        case \"-\":\n        case \"0\": {\n          if (e.metaKey || e.ctrlKey) {\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n            return;\n          }\n          break;\n        }\n        case \"Tab\": {\n          if (isFocusingInput() || editor.menus.hasAnyOpenMenus()) {\n            return;\n          }\n          break;\n        }\n        case \",\": {\n          return;\n        }\n        case \"Escape\": {\n          if (editor.getEditingShape() || editor.getSelectedShapeIds().length > 0) {\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n          }\n          if (editor.menus.getOpenMenus().length > 0) return;\n          if (editor.inputs.keys.has(\"Escape\")) {\n          } else {\n            editor.inputs.keys.add(\"Escape\");\n            editor.cancel();\n            container.focus();\n          }\n          return;\n        }\n        default: {\n          if (isFocusingInput() || editor.menus.hasAnyOpenMenus()) {\n            return;\n          }\n        }\n      }\n      const info = {\n        type: \"keyboard\",\n        name: e.repeat ? \"key_repeat\" : \"key_down\",\n        key: e.key,\n        code: e.code,\n        shiftKey: e.shiftKey,\n        altKey: e.altKey,\n        ctrlKey: e.metaKey || e.ctrlKey,\n        metaKey: e.metaKey,\n        accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(e)\n      };\n      editor.dispatch(info);\n    };\n    const handleKeyUp = (e) => {\n      if (e.isKilled) return;\n      e.isKilled = true;\n      if (isFocusingInput() || editor.menus.hasAnyOpenMenus()) {\n        return;\n      }\n      if (e.key === \",\") {\n        return;\n      }\n      const info = {\n        type: \"keyboard\",\n        name: \"key_up\",\n        key: e.key,\n        code: e.code,\n        shiftKey: e.shiftKey,\n        altKey: e.altKey,\n        ctrlKey: e.metaKey || e.ctrlKey,\n        metaKey: e.metaKey,\n        accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(e)\n      };\n      editor.dispatch(info);\n    };\n    function handleTouchStart(e) {\n      if (container.contains(e.target)) {\n        const touchXPosition = e.touches[0].pageX;\n        const touchXRadius = e.touches[0].radiusX || 0;\n        if (touchXPosition - touchXRadius < 10 || touchXPosition + touchXRadius > editor.getViewportScreenBounds().width - 10) {\n          if (e.target?.tagName === \"BUTTON\") {\n            ;\n            e.target?.click();\n          }\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        }\n      }\n    }\n    const handleWheel = (e) => {\n      if (container.contains(e.target) && (e.ctrlKey || e.metaKey)) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n    };\n    container.addEventListener(\"touchstart\", handleTouchStart, { passive: false });\n    container.addEventListener(\"wheel\", handleWheel, { passive: false });\n    document.addEventListener(\"gesturestart\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    document.addEventListener(\"gesturechange\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    document.addEventListener(\"gestureend\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    container.addEventListener(\"keydown\", handleKeyDown);\n    container.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      container.removeEventListener(\"touchstart\", handleTouchStart);\n      container.removeEventListener(\"wheel\", handleWheel);\n      document.removeEventListener(\"gesturestart\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      document.removeEventListener(\"gesturechange\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      document.removeEventListener(\"gestureend\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      container.removeEventListener(\"keydown\", handleKeyDown);\n      container.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [editor, container, isAppFocused]);\n}\nconst INPUTS = [\"input\", \"select\", \"button\", \"textarea\"];\nfunction isFocusingInput() {\n  const { activeElement } = document;\n  if (activeElement && (activeElement.getAttribute(\"contenteditable\") || INPUTS.indexOf(activeElement.tagName.toLowerCase()) > -1)) {\n    return true;\n  }\n  return false;\n}\n\n//# sourceMappingURL=useDocumentEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZURvY3VtZW50RXZlbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStDO0FBQ2I7QUFDZ0I7QUFDQztBQUNEO0FBQ047QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsb0JBQW9CLCtEQUFZO0FBQ2hDLHVCQUF1Qiw2REFBUTtBQUMvQixFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsTUFBTSw4REFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx3QkFBd0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywyQ0FBMkM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhEQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrREFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsK0RBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBYztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBYztBQUN0QjtBQUNBO0FBQ0EsaUVBQWlFLGdCQUFnQjtBQUNqRix1REFBdUQsZ0JBQWdCO0FBQ3ZFLDhDQUE4QywwREFBYztBQUM1RCwrQ0FBK0MsMERBQWM7QUFDN0QsNENBQTRDLDBEQUFjO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMERBQWM7QUFDakUsb0RBQW9ELDBEQUFjO0FBQ2xFLGlEQUFpRCwwREFBYztBQUMvRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRG9jdW1lbnRFdmVudHMubWpzP2VjMTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBpc0FjY2VsS2V5IH0gZnJvbSBcIi4uL3V0aWxzL2tleWJvYXJkLm1qc1wiO1xuaW1wb3J0IHsgdXNlQ29udGFpbmVyIH0gZnJvbSBcIi4vdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlRG9jdW1lbnRFdmVudHMoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgaXNBcHBGb2N1c2VkID0gdXNlVmFsdWUoXCJpc0ZvY3VzZWRcIiwgKCkgPT4gZWRpdG9yLmdldElzRm9jdXNlZCgpLCBbZWRpdG9yXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgICBmdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgICAgaWYgKGUuaXNTcGVjaWFsUmVkaXNwYXRjaGVkRXZlbnQpIHJldHVybjtcbiAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgY29uc3QgY3ZzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIudGwtY2FudmFzXCIpO1xuICAgICAgaWYgKCFjdnMpIHJldHVybjtcbiAgICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IERyYWdFdmVudChcImRyb3BcIiwgZSk7XG4gICAgICBuZXdFdmVudC5pc1NwZWNpYWxSZWRpc3BhdGNoZWRFdmVudCA9IHRydWU7XG4gICAgICBjdnMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgfVxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgb25Ecm9wKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgb25Ecm9wKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBvbkRyb3ApO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIG9uRHJvcCk7XG4gICAgfTtcbiAgfSwgW2NvbnRhaW5lcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICEoXCJtYXRjaE1lZGlhXCIgaW4gd2luZG93KSkgcmV0dXJuO1xuICAgIGxldCByZW1vdmUgPSBudWxsO1xuICAgIGNvbnN0IHVwZGF0ZVBpeGVsUmF0aW8gPSAoKSA9PiB7XG4gICAgICBpZiAocmVtb3ZlICE9IG51bGwpIHtcbiAgICAgICAgcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtcVN0cmluZyA9IGAocmVzb2x1dGlvbjogJHt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb31kcHB4KWA7XG4gICAgICBjb25zdCBtZWRpYSA9IG1hdGNoTWVkaWEobXFTdHJpbmcpO1xuICAgICAgY29uc3Qgc2FmYXJpQ2IgPSAoZXYpID0+IHtcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09IFwiY2hhbmdlXCIpIHtcbiAgICAgICAgICB1cGRhdGVQaXhlbFJhdGlvKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAobWVkaWEuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBtZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHVwZGF0ZVBpeGVsUmF0aW8pO1xuICAgICAgfSBlbHNlIGlmIChtZWRpYS5hZGRMaXN0ZW5lcikge1xuICAgICAgICBtZWRpYS5hZGRMaXN0ZW5lcihzYWZhcmlDYik7XG4gICAgICB9XG4gICAgICByZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChtZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgbWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB1cGRhdGVQaXhlbFJhdGlvKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYS5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgIG1lZGlhLnJlbW92ZUxpc3RlbmVyKHNhZmFyaUNiKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgZGV2aWNlUGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfSk7XG4gICAgfTtcbiAgICB1cGRhdGVQaXhlbFJhdGlvKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlbW92ZT8uKCk7XG4gICAgfTtcbiAgfSwgW2VkaXRvcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNBcHBGb2N1c2VkKSByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5hbHRLZXkgJiYgLy8gdG9kbzogV2hlbiBzaG91bGQgd2UgYWxsb3cgdGhlIGFsdCBrZXkgdG8gYmUgdXNlZD8gUGVyaGFwcyBzdGF0ZXMgc2hvdWxkIGRlY2xhcmUgd2hpY2gga2V5cyBtYXR0ZXIgdG8gdGhlbT9cbiAgICAgIChlZGl0b3IuaXNJbihcInpvb21cIikgfHwgIWVkaXRvci5nZXRQYXRoKCkuZW5kc1dpdGgoXCIuaWRsZVwiKSkgJiYgIWlzRm9jdXNpbmdJbnB1dCgpKSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgfVxuICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlIFwiPVwiOlxuICAgICAgICBjYXNlIFwiLVwiOlxuICAgICAgICBjYXNlIFwiMFwiOiB7XG4gICAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiVGFiXCI6IHtcbiAgICAgICAgICBpZiAoaXNGb2N1c2luZ0lucHV0KCkgfHwgZWRpdG9yLm1lbnVzLmhhc0FueU9wZW5NZW51cygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCIsXCI6IHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XG4gICAgICAgICAgaWYgKGVkaXRvci5nZXRFZGl0aW5nU2hhcGUoKSB8fCBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWRpdG9yLm1lbnVzLmdldE9wZW5NZW51cygpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICBpZiAoZWRpdG9yLmlucHV0cy5rZXlzLmhhcyhcIkVzY2FwZVwiKSkge1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlZGl0b3IuaW5wdXRzLmtleXMuYWRkKFwiRXNjYXBlXCIpO1xuICAgICAgICAgICAgZWRpdG9yLmNhbmNlbCgpO1xuICAgICAgICAgICAgY29udGFpbmVyLmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgaWYgKGlzRm9jdXNpbmdJbnB1dCgpIHx8IGVkaXRvci5tZW51cy5oYXNBbnlPcGVuTWVudXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgdHlwZTogXCJrZXlib2FyZFwiLFxuICAgICAgICBuYW1lOiBlLnJlcGVhdCA/IFwia2V5X3JlcGVhdFwiIDogXCJrZXlfZG93blwiLFxuICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICBjb2RlOiBlLmNvZGUsXG4gICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5LFxuICAgICAgICBhbHRLZXk6IGUuYWx0S2V5LFxuICAgICAgICBjdHJsS2V5OiBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5LFxuICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gICAgICAgIGFjY2VsS2V5OiBpc0FjY2VsS2V5KGUpXG4gICAgICB9O1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKGluZm8pO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgaWYgKGlzRm9jdXNpbmdJbnB1dCgpIHx8IGVkaXRvci5tZW51cy5oYXNBbnlPcGVuTWVudXMoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZS5rZXkgPT09IFwiLFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgIHR5cGU6IFwia2V5Ym9hcmRcIixcbiAgICAgICAgbmFtZTogXCJrZXlfdXBcIixcbiAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgY29kZTogZS5jb2RlLFxuICAgICAgICBzaGlmdEtleTogZS5zaGlmdEtleSxcbiAgICAgICAgYWx0S2V5OiBlLmFsdEtleSxcbiAgICAgICAgY3RybEtleTogZS5tZXRhS2V5IHx8IGUuY3RybEtleSxcbiAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICAgICAgICBhY2NlbEtleTogaXNBY2NlbEtleShlKVxuICAgICAgfTtcbiAgICAgIGVkaXRvci5kaXNwYXRjaChpbmZvKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnQoZSkge1xuICAgICAgaWYgKGNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgY29uc3QgdG91Y2hYUG9zaXRpb24gPSBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGNvbnN0IHRvdWNoWFJhZGl1cyA9IGUudG91Y2hlc1swXS5yYWRpdXNYIHx8IDA7XG4gICAgICAgIGlmICh0b3VjaFhQb3NpdGlvbiAtIHRvdWNoWFJhZGl1cyA8IDEwIHx8IHRvdWNoWFBvc2l0aW9uICsgdG91Y2hYUmFkaXVzID4gZWRpdG9yLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkud2lkdGggLSAxMCkge1xuICAgICAgICAgIGlmIChlLnRhcmdldD8udGFnTmFtZSA9PT0gXCJCVVRUT05cIikge1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgZS50YXJnZXQ/LmNsaWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZVdoZWVsID0gKGUpID0+IHtcbiAgICAgIGlmIChjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlV2hlZWwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVzdGFydFwiLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVjaGFuZ2VcIiwgcHJldmVudERlZmF1bHQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlZW5kXCIsIHByZXZlbnREZWZhdWx0KTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBoYW5kbGVLZXlVcCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0KTtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlV2hlZWwpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVzdGFydFwiLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWNoYW5nZVwiLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWVuZFwiLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93bik7XG4gICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUtleVVwKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBjb250YWluZXIsIGlzQXBwRm9jdXNlZF0pO1xufVxuY29uc3QgSU5QVVRTID0gW1wiaW5wdXRcIiwgXCJzZWxlY3RcIiwgXCJidXR0b25cIiwgXCJ0ZXh0YXJlYVwiXTtcbmZ1bmN0aW9uIGlzRm9jdXNpbmdJbnB1dCgpIHtcbiAgY29uc3QgeyBhY3RpdmVFbGVtZW50IH0gPSBkb2N1bWVudDtcbiAgaWYgKGFjdGl2ZUVsZW1lbnQgJiYgKGFjdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpIHx8IElOUFVUUy5pbmRleE9mKGFjdGl2ZUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7XG4gIHVzZURvY3VtZW50RXZlbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlRG9jdW1lbnRFdmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditorContext: () => (/* binding */ EditorContext),\n/* harmony export */   useEditor: () => (/* binding */ useEditor),\n/* harmony export */   useMaybeEditor: () => (/* binding */ useMaybeEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nconst EditorContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);\nfunction useEditor() {\n  const editor = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\n      \"useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components\"\n    );\n  }\n  return editor;\n}\nfunction useMaybeEditor() {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(EditorContext);\n}\n\n//# sourceMappingURL=useEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUVkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUM3QyxzQkFBc0Isb0RBQWE7QUFDbkM7QUFDQSxpQkFBaUIsNkNBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFnQjtBQUN6QjtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRWRpdG9yLm1qcz9jNTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5jb25zdCBFZGl0b3JDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZUVkaXRvcigpIHtcbiAgY29uc3QgZWRpdG9yID0gUmVhY3QudXNlQ29udGV4dChFZGl0b3JDb250ZXh0KTtcbiAgaWYgKCFlZGl0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcInVzZUVkaXRvciBtdXN0IGJlIHVzZWQgaW5zaWRlIG9mIHRoZSA8VGxkcmF3IC8+IG9yIDxUbGRyYXdFZGl0b3IgLz4gY29tcG9uZW50c1wiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gZWRpdG9yO1xufVxuZnVuY3Rpb24gdXNlTWF5YmVFZGl0b3IoKSB7XG4gIHJldHVybiBSZWFjdC51c2VDb250ZXh0KEVkaXRvckNvbnRleHQpO1xufVxuZXhwb3J0IHtcbiAgRWRpdG9yQ29udGV4dCxcbiAgdXNlRWRpdG9yLFxuICB1c2VNYXliZUVkaXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUVkaXRvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditorComponentsProvider: () => (/* binding */ EditorComponentsProvider),\n/* harmony export */   useEditorComponents: () => (/* binding */ useEditorComponents)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/default-components/DefaultBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\");\n/* harmony import */ var _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/default-components/DefaultBrush.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\");\n/* harmony import */ var _components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/default-components/DefaultCanvas.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\");\n/* harmony import */ var _components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/default-components/DefaultCollaboratorHint.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\");\n/* harmony import */ var _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/default-components/DefaultCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\");\n/* harmony import */ var _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/default-components/DefaultGrid.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\");\n/* harmony import */ var _components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/default-components/DefaultHandle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\");\n/* harmony import */ var _components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/default-components/DefaultHandles.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\");\n/* harmony import */ var _components_default_components_DefaultLoadingScreen_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/default-components/DefaultLoadingScreen.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs\");\n/* harmony import */ var _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/default-components/DefaultScribble.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\");\n/* harmony import */ var _components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/default-components/DefaultSelectionBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\");\n/* harmony import */ var _components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/default-components/DefaultSelectionForeground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/default-components/DefaultShapeErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/default-components/DefaultShapeIndicator.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeIndicatorErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../components/default-components/DefaultShapeIndicatorErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeIndicators_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../components/default-components/DefaultShapeIndicators.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicators.mjs\");\n/* harmony import */ var _components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../components/default-components/DefaultSnapIndictor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\");\n/* harmony import */ var _components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../components/default-components/DefaultSpinner.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\");\n/* harmony import */ var _components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../components/default-components/DefaultSvgDefs.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\");\n/* harmony import */ var _useIdentity_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EditorComponentsContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction EditorComponentsProvider({\n  overrides = {},\n  children\n}) {\n  const _overrides = (0,_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_22__.useShallowObjectIdentity)(overrides);\n  const value = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n    () => ({\n      Background: _components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultBackground,\n      SvgDefs: _components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_21__.DefaultSvgDefs,\n      Brush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n      ZoomBrush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n      CollaboratorBrush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n      Cursor: _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultCursor,\n      CollaboratorCursor: _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultCursor,\n      CollaboratorHint: _components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultCollaboratorHint,\n      CollaboratorShapeIndicator: _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultShapeIndicator,\n      Grid: _components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultGrid,\n      Scribble: _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__.DefaultScribble,\n      SnapIndicator: _components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_19__.DefaultSnapIndicator,\n      Handles: _components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_10__.DefaultHandles,\n      Handle: _components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultHandle,\n      CollaboratorScribble: _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__.DefaultScribble,\n      ErrorFallback: _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultErrorFallback,\n      ShapeErrorFallback: _components_default_components_DefaultShapeErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_15__.DefaultShapeErrorFallback,\n      ShapeIndicatorErrorFallback: _components_default_components_DefaultShapeIndicatorErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_17__.DefaultShapeIndicatorErrorFallback,\n      Spinner: _components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_20__.DefaultSpinner,\n      SelectionBackground: _components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_13__.DefaultSelectionBackground,\n      SelectionForeground: _components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_14__.DefaultSelectionForeground,\n      ShapeIndicators: _components_default_components_DefaultShapeIndicators_mjs__WEBPACK_IMPORTED_MODULE_18__.DefaultShapeIndicators,\n      ShapeIndicator: _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultShapeIndicator,\n      OnTheCanvas: null,\n      InFrontOfTheCanvas: null,\n      Canvas: _components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultCanvas,\n      LoadingScreen: _components_default_components_DefaultLoadingScreen_mjs__WEBPACK_IMPORTED_MODULE_11__.DefaultLoadingScreen,\n      ..._overrides\n    }),\n    [_overrides]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EditorComponentsContext.Provider, { value, children });\n}\nfunction useEditorComponents() {\n  const components = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(EditorComponentsContext);\n  if (!components) {\n    throw new Error(\"useEditorComponents must be used inside of <EditorComponentsProvider />\");\n  }\n  return components;\n}\n\n//# sourceMappingURL=useEditorComponents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDbUI7QUFDZ0M7QUFDVjtBQUdyQjtBQUdVO0FBQ2E7QUFHaEI7QUFDWTtBQUNJO0FBQ0U7QUFDWTtBQUNWO0FBR2Q7QUFHQTtBQUdEO0FBR0o7QUFHYTtBQUNvQjtBQUduQztBQUNtQjtBQUNBO0FBQ3hCO0FBQzdELGdDQUFnQyxvREFBYTtBQUM3QztBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLENBQUM7QUFDRCxxQkFBcUIsMkVBQXdCO0FBQzdDLGdCQUFnQiw4Q0FBTztBQUN2QjtBQUNBLGtCQUFrQixtR0FBaUI7QUFDbkMsZUFBZSw4RkFBYztBQUM3QixhQUFhLHlGQUFZO0FBQ3pCLGlCQUFpQix5RkFBWTtBQUM3Qix5QkFBeUIseUZBQVk7QUFDckMsY0FBYywyRkFBYTtBQUMzQiwwQkFBMEIsMkZBQWE7QUFDdkMsd0JBQXdCLCtHQUF1QjtBQUMvQyxrQ0FBa0MsNEdBQXFCO0FBQ3ZELFlBQVksdUZBQVc7QUFDdkIsZ0JBQWdCLGdHQUFlO0FBQy9CLHFCQUFxQix5R0FBb0I7QUFDekMsZUFBZSw4RkFBYztBQUM3QixjQUFjLDJGQUFhO0FBQzNCLDRCQUE0QixnR0FBZTtBQUMzQyxxQkFBcUIseUdBQW9CO0FBQ3pDLDBCQUEwQixvSEFBeUI7QUFDbkQsbUNBQW1DLHNJQUFrQztBQUNyRSxlQUFlLDhGQUFjO0FBQzdCLDJCQUEyQixzSEFBMEI7QUFDckQsMkJBQTJCLHNIQUEwQjtBQUNyRCx1QkFBdUIsOEdBQXNCO0FBQzdDLHNCQUFzQiw0R0FBcUI7QUFDM0M7QUFDQTtBQUNBLGNBQWMsMkZBQWE7QUFDM0IscUJBQXFCLDBHQUFvQjtBQUN6QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLHFDQUFxQyxpQkFBaUI7QUFDbEY7QUFDQTtBQUNBLHFCQUFxQixpREFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qcz82YTI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRGVmYXVsdEJhY2tncm91bmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEJhY2tncm91bmQubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0QnJ1c2ggfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEJydXNoLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdENhbnZhc1xufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdENhbnZhcy5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRDb2xsYWJvcmF0b3JIaW50XG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0Q29sbGFib3JhdG9ySGludC5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDdXJzb3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEN1cnNvci5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRFcnJvckZhbGxiYWNrXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0RXJyb3JGYWxsYmFjay5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRHcmlkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRHcmlkLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEhhbmRsZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0SGFuZGxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEhhbmRsZXMgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEhhbmRsZXMubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0TG9hZGluZ1NjcmVlbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0TG9hZGluZ1NjcmVlbi5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTY3JpYmJsZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2NyaWJibGUubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2hhcGVFcnJvckZhbGxiYWNrXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVFcnJvckZhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNoYXBlSW5kaWNhdG9yXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3IubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNoYXBlSW5kaWNhdG9ycyB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3JzLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNuYXBJbmRpY2F0b3Jcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTbmFwSW5kaWN0b3IubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U3Bpbm5lciB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U3Bpbm5lci5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTdmdEZWZzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTdmdEZWZzLm1qc1wiO1xuaW1wb3J0IHsgdXNlU2hhbGxvd09iamVjdElkZW50aXR5IH0gZnJvbSBcIi4vdXNlSWRlbnRpdHkubWpzXCI7XG5jb25zdCBFZGl0b3JDb21wb25lbnRzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiBFZGl0b3JDb21wb25lbnRzUHJvdmlkZXIoe1xuICBvdmVycmlkZXMgPSB7fSxcbiAgY2hpbGRyZW5cbn0pIHtcbiAgY29uc3QgX292ZXJyaWRlcyA9IHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eShvdmVycmlkZXMpO1xuICBjb25zdCB2YWx1ZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIEJhY2tncm91bmQ6IERlZmF1bHRCYWNrZ3JvdW5kLFxuICAgICAgU3ZnRGVmczogRGVmYXVsdFN2Z0RlZnMsXG4gICAgICBCcnVzaDogRGVmYXVsdEJydXNoLFxuICAgICAgWm9vbUJydXNoOiBEZWZhdWx0QnJ1c2gsXG4gICAgICBDb2xsYWJvcmF0b3JCcnVzaDogRGVmYXVsdEJydXNoLFxuICAgICAgQ3Vyc29yOiBEZWZhdWx0Q3Vyc29yLFxuICAgICAgQ29sbGFib3JhdG9yQ3Vyc29yOiBEZWZhdWx0Q3Vyc29yLFxuICAgICAgQ29sbGFib3JhdG9ySGludDogRGVmYXVsdENvbGxhYm9yYXRvckhpbnQsXG4gICAgICBDb2xsYWJvcmF0b3JTaGFwZUluZGljYXRvcjogRGVmYXVsdFNoYXBlSW5kaWNhdG9yLFxuICAgICAgR3JpZDogRGVmYXVsdEdyaWQsXG4gICAgICBTY3JpYmJsZTogRGVmYXVsdFNjcmliYmxlLFxuICAgICAgU25hcEluZGljYXRvcjogRGVmYXVsdFNuYXBJbmRpY2F0b3IsXG4gICAgICBIYW5kbGVzOiBEZWZhdWx0SGFuZGxlcyxcbiAgICAgIEhhbmRsZTogRGVmYXVsdEhhbmRsZSxcbiAgICAgIENvbGxhYm9yYXRvclNjcmliYmxlOiBEZWZhdWx0U2NyaWJibGUsXG4gICAgICBFcnJvckZhbGxiYWNrOiBEZWZhdWx0RXJyb3JGYWxsYmFjayxcbiAgICAgIFNoYXBlRXJyb3JGYWxsYmFjazogRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjayxcbiAgICAgIFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjazogRGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjayxcbiAgICAgIFNwaW5uZXI6IERlZmF1bHRTcGlubmVyLFxuICAgICAgU2VsZWN0aW9uQmFja2dyb3VuZDogRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmQsXG4gICAgICBTZWxlY3Rpb25Gb3JlZ3JvdW5kOiBEZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZCxcbiAgICAgIFNoYXBlSW5kaWNhdG9yczogRGVmYXVsdFNoYXBlSW5kaWNhdG9ycyxcbiAgICAgIFNoYXBlSW5kaWNhdG9yOiBEZWZhdWx0U2hhcGVJbmRpY2F0b3IsXG4gICAgICBPblRoZUNhbnZhczogbnVsbCxcbiAgICAgIEluRnJvbnRPZlRoZUNhbnZhczogbnVsbCxcbiAgICAgIENhbnZhczogRGVmYXVsdENhbnZhcyxcbiAgICAgIExvYWRpbmdTY3JlZW46IERlZmF1bHRMb2FkaW5nU2NyZWVuLFxuICAgICAgLi4uX292ZXJyaWRlc1xuICAgIH0pLFxuICAgIFtfb3ZlcnJpZGVzXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb21wb25lbnRzQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZSwgY2hpbGRyZW4gfSk7XG59XG5mdW5jdGlvbiB1c2VFZGl0b3JDb21wb25lbnRzKCkge1xuICBjb25zdCBjb21wb25lbnRzID0gdXNlQ29udGV4dChFZGl0b3JDb21wb25lbnRzQ29udGV4dCk7XG4gIGlmICghY29tcG9uZW50cykge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUVkaXRvckNvbXBvbmVudHMgbXVzdCBiZSB1c2VkIGluc2lkZSBvZiA8RWRpdG9yQ29tcG9uZW50c1Byb3ZpZGVyIC8+XCIpO1xuICB9XG4gIHJldHVybiBjb21wb25lbnRzO1xufVxuZXhwb3J0IHtcbiAgRWRpdG9yQ29tcG9uZW50c1Byb3ZpZGVyLFxuICB1c2VFZGl0b3JDb21wb25lbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlRWRpdG9yQ29tcG9uZW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useEvent: () => (/* binding */ useEvent)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useEvent(handler) {\n  const handlerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    handlerRef.current = handler;\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useDebugValue)(handler);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((...args) => {\n    const fn = handlerRef.current;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(fn, \"fn does not exist\");\n    return fn(...args);\n  }, []);\n}\n\n//# sourceMappingURL=useEvent.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUV2ZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDcUM7QUFDNUU7QUFDQSxxQkFBcUIsNkNBQU07QUFDM0IsRUFBRSxzREFBZTtBQUNqQjtBQUNBLEdBQUc7QUFDSCxFQUFFLG9EQUFhO0FBQ2YsU0FBUyxrREFBVztBQUNwQjtBQUNBLElBQUkscURBQU07QUFDVjtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRXZlbnQubWpzP2JiMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VEZWJ1Z1ZhbHVlLCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlRXZlbnQoaGFuZGxlcikge1xuICBjb25zdCBoYW5kbGVyUmVmID0gdXNlUmVmKCk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaGFuZGxlclJlZi5jdXJyZW50ID0gaGFuZGxlcjtcbiAgfSk7XG4gIHVzZURlYnVnVmFsdWUoaGFuZGxlcik7XG4gIHJldHVybiB1c2VDYWxsYmFjaygoLi4uYXJncykgPT4ge1xuICAgIGNvbnN0IGZuID0gaGFuZGxlclJlZi5jdXJyZW50O1xuICAgIGFzc2VydChmbiwgXCJmbiBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICByZXR1cm4gZm4oLi4uYXJncyk7XG4gIH0sIFtdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUV2ZW50XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlRXZlbnQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFixSafariDoubleTapZoomPencilEvents: () => (/* binding */ useFixSafariDoubleTapZoomPencilEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nconst IGNORED_TAGS = [\"textarea\", \"input\"];\nfunction useFixSafariDoubleTapZoomPencilEvents(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const elm = ref.current;\n    if (!elm) return;\n    const handleEvent = (e) => {\n      if (e instanceof PointerEvent && e.pointerType === \"pen\") {\n        ;\n        e.isKilled = true;\n        const { target } = e;\n        if (IGNORED_TAGS.includes(target.tagName?.toLocaleLowerCase()) || editor.isIn(\"select.editing_shape\")) {\n          return;\n        }\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.preventDefault)(e);\n      }\n    };\n    elm.addEventListener(\"touchstart\", handleEvent);\n    elm.addEventListener(\"touchend\", handleEvent);\n    return () => {\n      elm.removeEventListener(\"touchstart\", handleEvent);\n      elm.removeEventListener(\"touchend\", handleEvent);\n    };\n  }, [editor, ref]);\n}\n\n//# sourceMappingURL=useFixSafariDoubleTapZoomPencilEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFDZ0I7QUFDTjtBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzP2Q0NjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5jb25zdCBJR05PUkVEX1RBR1MgPSBbXCJ0ZXh0YXJlYVwiLCBcImlucHV0XCJdO1xuZnVuY3Rpb24gdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50cyhyZWYpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbG0pIHJldHVybjtcbiAgICBjb25zdCBoYW5kbGVFdmVudCA9IChlKSA9PiB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIFBvaW50ZXJFdmVudCAmJiBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiKSB7XG4gICAgICAgIDtcbiAgICAgICAgZS5pc0tpbGxlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBlO1xuICAgICAgICBpZiAoSUdOT1JFRF9UQUdTLmluY2x1ZGVzKHRhcmdldC50YWdOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpKSB8fCBlZGl0b3IuaXNJbihcInNlbGVjdC5lZGl0aW5nX3NoYXBlXCIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZUV2ZW50KTtcbiAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGhhbmRsZUV2ZW50KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZUV2ZW50KTtcbiAgICAgIGVsbS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgaGFuZGxlRXZlbnQpO1xuICAgIH07XG4gIH0sIFtlZGl0b3IsIHJlZl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useForceUpdate: () => (/* binding */ useForceUpdate)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useForceUpdate() {\n  const [_, ss] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => ss((s) => s + 1), []);\n}\n\n//# sourceMappingURL=useForceUpdate.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZvcmNlVXBkYXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUM1QztBQUNBLGtCQUFrQiwrQ0FBUTtBQUMxQixFQUFFLGdEQUFTO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZvcmNlVXBkYXRlLm1qcz9mYTZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUZvcmNlVXBkYXRlKCkge1xuICBjb25zdCBbXywgc3NdID0gdXNlU3RhdGUoMCk7XG4gIHVzZUVmZmVjdCgoKSA9PiBzcygocykgPT4gcyArIDEpLCBbXSk7XG59XG5leHBvcnQge1xuICB1c2VGb3JjZVVwZGF0ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUZvcmNlVXBkYXRlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGestureEvents: () => (/* binding */ useGestureEvents)\n/* harmony export */ });\n/* harmony import */ var _use_gesture_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @use-gesture/react */ \"(ssr)/./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js\");\n/* harmony import */ var _use_gesture_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @use-gesture/react */ \"(ssr)/./node_modules/@use-gesture/core/actions/dist/use-gesture-core-actions.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/keyboard.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\");\n/* harmony import */ var _utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/normalizeWheel.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\n\n\nconst useGesture = (0,_use_gesture_react__WEBPACK_IMPORTED_MODULE_6__.createUseGesture)([_use_gesture_react__WEBPACK_IMPORTED_MODULE_7__.wheelAction, _use_gesture_react__WEBPACK_IMPORTED_MODULE_7__.pinchAction]);\nlet lastWheelTime = void 0;\nconst isWheelEndEvent = (time) => {\n  if (lastWheelTime === void 0) {\n    lastWheelTime = time;\n    return false;\n  }\n  if (time - lastWheelTime > 120 && time - lastWheelTime < 160) {\n    lastWheelTime = time;\n    return true;\n  }\n  lastWheelTime = time;\n  return false;\n};\nfunction useGestureEvents(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditor)();\n  const events = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    let pinchState = \"not sure\";\n    const onWheel = ({ event }) => {\n      if (!editor.getInstanceState().isFocused) {\n        return;\n      }\n      pinchState = \"not sure\";\n      if (isWheelEndEvent(Date.now())) {\n        return;\n      }\n      const editingShapeId = editor.getEditingShapeId();\n      if (editingShapeId) {\n        const shape = editor.getShape(editingShapeId);\n        if (shape) {\n          const util = editor.getShapeUtil(shape);\n          if (util.canScroll(shape)) {\n            const bounds = editor.getShapePageBounds(editingShapeId);\n            if (bounds?.containsPoint(editor.inputs.currentPagePoint)) {\n              return;\n            }\n          }\n        }\n      }\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(event);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(event);\n      const delta = (0,_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_4__.normalizeWheel)(event);\n      if (delta.x === 0 && delta.y === 0) return;\n      const info = {\n        type: \"wheel\",\n        name: \"wheel\",\n        delta,\n        point: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(event.clientX, event.clientY),\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n        ctrlKey: event.metaKey || event.ctrlKey,\n        metaKey: event.metaKey,\n        accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(event)\n      };\n      editor.dispatch(info);\n    };\n    let initDistanceBetweenFingers = 1;\n    let initZoom = 1;\n    let currZoom = 1;\n    let currDistanceBetweenFingers = 0;\n    const initPointBetweenFingers = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec();\n    const prevPointBetweenFingers = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec();\n    const onPinchStart = (gesture) => {\n      const elm = ref.current;\n      pinchState = \"not sure\";\n      const { event, origin, da } = gesture;\n      if (event instanceof WheelEvent) return;\n      if (!(event.target === elm || elm?.contains(event.target))) return;\n      prevPointBetweenFingers.x = origin[0];\n      prevPointBetweenFingers.y = origin[1];\n      initPointBetweenFingers.x = origin[0];\n      initPointBetweenFingers.y = origin[1];\n      initDistanceBetweenFingers = da[0];\n      initZoom = editor.getZoomLevel();\n      editor.dispatch({\n        type: \"pinch\",\n        name: \"pinch_start\",\n        point: { x: origin[0], y: origin[1], z: editor.getZoomLevel() },\n        delta: { x: 0, y: 0 },\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n        ctrlKey: event.metaKey || event.ctrlKey,\n        metaKey: event.metaKey,\n        accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(event)\n      });\n    };\n    const updatePinchState = (isSafariTrackpadPinch) => {\n      if (isSafariTrackpadPinch) {\n        pinchState = \"zooming\";\n      }\n      if (pinchState === \"zooming\") {\n        return;\n      }\n      const touchDistance = Math.abs(currDistanceBetweenFingers - initDistanceBetweenFingers);\n      const originDistance = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist(initPointBetweenFingers, prevPointBetweenFingers);\n      switch (pinchState) {\n        case \"not sure\": {\n          if (touchDistance > 24) {\n            pinchState = \"zooming\";\n          } else if (originDistance > 16) {\n            pinchState = \"panning\";\n          }\n          break;\n        }\n        case \"panning\": {\n          if (touchDistance > 64) {\n            pinchState = \"zooming\";\n          }\n          break;\n        }\n      }\n    };\n    const onPinch = (gesture) => {\n      const elm = ref.current;\n      const { event, origin, offset, da } = gesture;\n      if (event instanceof WheelEvent) return;\n      if (!(event.target === elm || elm?.contains(event.target))) return;\n      const isSafariTrackpadPinch = gesture.type === \"gesturechange\" || gesture.type === \"gestureend\";\n      currDistanceBetweenFingers = da[0];\n      const dx = origin[0] - prevPointBetweenFingers.x;\n      const dy = origin[1] - prevPointBetweenFingers.y;\n      prevPointBetweenFingers.x = origin[0];\n      prevPointBetweenFingers.y = origin[1];\n      updatePinchState(isSafariTrackpadPinch);\n      switch (pinchState) {\n        case \"zooming\": {\n          currZoom = offset[0];\n          editor.dispatch({\n            type: \"pinch\",\n            name: \"pinch\",\n            point: { x: origin[0], y: origin[1], z: currZoom },\n            delta: { x: dx, y: dy },\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            ctrlKey: event.metaKey || event.ctrlKey,\n            metaKey: event.metaKey,\n            accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(event)\n          });\n          break;\n        }\n        case \"panning\": {\n          editor.dispatch({\n            type: \"pinch\",\n            name: \"pinch\",\n            point: { x: origin[0], y: origin[1], z: initZoom },\n            delta: { x: dx, y: dy },\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            ctrlKey: event.metaKey || event.ctrlKey,\n            metaKey: event.metaKey,\n            accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(event)\n          });\n          break;\n        }\n      }\n    };\n    const onPinchEnd = (gesture) => {\n      const elm = ref.current;\n      const { event, origin, offset } = gesture;\n      if (event instanceof WheelEvent) return;\n      if (!(event.target === elm || elm?.contains(event.target))) return;\n      const scale = offset[0];\n      pinchState = \"not sure\";\n      editor.timers.requestAnimationFrame(() => {\n        editor.dispatch({\n          type: \"pinch\",\n          name: \"pinch_end\",\n          point: { x: origin[0], y: origin[1], z: scale },\n          delta: { x: origin[0], y: origin[1] },\n          shiftKey: event.shiftKey,\n          altKey: event.altKey,\n          ctrlKey: event.metaKey || event.ctrlKey,\n          metaKey: event.metaKey,\n          accelKey: (0,_utils_keyboard_mjs__WEBPACK_IMPORTED_MODULE_3__.isAccelKey)(event)\n        });\n      });\n    };\n    return {\n      onWheel,\n      onPinchStart,\n      onPinchEnd,\n      onPinch\n    };\n  }, [editor, ref]);\n  useGesture(events, {\n    target: ref,\n    eventOptions: { passive: false },\n    pinch: {\n      from: () => [editor.getZoomLevel(), 0],\n      // Return the camera z to use when pinch starts\n      scaleBounds: () => {\n        const baseZoom = editor.getBaseZoom();\n        const zoomSteps = editor.getCameraOptions().zoomSteps;\n        const zoomMin = zoomSteps[0] * baseZoom;\n        const zoomMax = zoomSteps[zoomSteps.length - 1] * baseZoom;\n        return { from: editor.getZoomLevel(), max: zoomMax, min: zoomMin };\n      }\n    }\n  });\n}\n\n//# sourceMappingURL=useGestureEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUdlc3R1cmVFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFnRjtBQUNqRDtBQUNhO0FBQzRCO0FBQ3JCO0FBQ1U7QUFDakI7QUFDNUMsbUJBQW1CLG9FQUFnQixFQUFFLDJEQUFXLEVBQUUsMkRBQVc7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix5REFBUztBQUMxQixpQkFBaUIsMENBQWE7QUFDOUI7QUFDQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw4REFBYztBQUNwQixNQUFNLG9FQUFvQjtBQUMxQixvQkFBb0IseUVBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvREFBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrREFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxvREFBRztBQUMzQyx3Q0FBd0Msb0RBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvQkFBb0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzREFBc0Q7QUFDdkUsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsK0RBQVU7QUFDNUIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixvREFBRztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0QkFBNEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrREFBVTtBQUNoQyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrREFBVTtBQUNoQyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQ0FBc0M7QUFDekQsbUJBQW1CLDRCQUE0QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrREFBVTtBQUM5QixTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlR2VzdHVyZUV2ZW50cy5tanM/NTM3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVVc2VHZXN0dXJlLCBwaW5jaEFjdGlvbiwgd2hlZWxBY3Rpb24gfSBmcm9tIFwiQHVzZS1nZXN0dXJlL3JlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IHByZXZlbnREZWZhdWx0LCBzdG9wRXZlbnRQcm9wYWdhdGlvbiB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBpc0FjY2VsS2V5IH0gZnJvbSBcIi4uL3V0aWxzL2tleWJvYXJkLm1qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplV2hlZWwgfSBmcm9tIFwiLi4vdXRpbHMvbm9ybWFsaXplV2hlZWwubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5jb25zdCB1c2VHZXN0dXJlID0gY3JlYXRlVXNlR2VzdHVyZShbd2hlZWxBY3Rpb24sIHBpbmNoQWN0aW9uXSk7XG5sZXQgbGFzdFdoZWVsVGltZSA9IHZvaWQgMDtcbmNvbnN0IGlzV2hlZWxFbmRFdmVudCA9ICh0aW1lKSA9PiB7XG4gIGlmIChsYXN0V2hlZWxUaW1lID09PSB2b2lkIDApIHtcbiAgICBsYXN0V2hlZWxUaW1lID0gdGltZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHRpbWUgLSBsYXN0V2hlZWxUaW1lID4gMTIwICYmIHRpbWUgLSBsYXN0V2hlZWxUaW1lIDwgMTYwKSB7XG4gICAgbGFzdFdoZWVsVGltZSA9IHRpbWU7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgbGFzdFdoZWVsVGltZSA9IHRpbWU7XG4gIHJldHVybiBmYWxzZTtcbn07XG5mdW5jdGlvbiB1c2VHZXN0dXJlRXZlbnRzKHJlZikge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgZXZlbnRzID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IHBpbmNoU3RhdGUgPSBcIm5vdCBzdXJlXCI7XG4gICAgY29uc3Qgb25XaGVlbCA9ICh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGlmICghZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc0ZvY3VzZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGluY2hTdGF0ZSA9IFwibm90IHN1cmVcIjtcbiAgICAgIGlmIChpc1doZWVsRW5kRXZlbnQoRGF0ZS5ub3coKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZWRpdGluZ1NoYXBlSWQgPSBlZGl0b3IuZ2V0RWRpdGluZ1NoYXBlSWQoKTtcbiAgICAgIGlmIChlZGl0aW5nU2hhcGVJZCkge1xuICAgICAgICBjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShlZGl0aW5nU2hhcGVJZCk7XG4gICAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICAgIGNvbnN0IHV0aWwgPSBlZGl0b3IuZ2V0U2hhcGVVdGlsKHNoYXBlKTtcbiAgICAgICAgICBpZiAodXRpbC5jYW5TY3JvbGwoc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKGVkaXRpbmdTaGFwZUlkKTtcbiAgICAgICAgICAgIGlmIChib3VuZHM/LmNvbnRhaW5zUG9pbnQoZWRpdG9yLmlucHV0cy5jdXJyZW50UGFnZVBvaW50KSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbihldmVudCk7XG4gICAgICBjb25zdCBkZWx0YSA9IG5vcm1hbGl6ZVdoZWVsKGV2ZW50KTtcbiAgICAgIGlmIChkZWx0YS54ID09PSAwICYmIGRlbHRhLnkgPT09IDApIHJldHVybjtcbiAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgIHR5cGU6IFwid2hlZWxcIixcbiAgICAgICAgbmFtZTogXCJ3aGVlbFwiLFxuICAgICAgICBkZWx0YSxcbiAgICAgICAgcG9pbnQ6IG5ldyBWZWMoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSksXG4gICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgYWx0S2V5OiBldmVudC5hbHRLZXksXG4gICAgICAgIGN0cmxLZXk6IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSxcbiAgICAgICAgbWV0YUtleTogZXZlbnQubWV0YUtleSxcbiAgICAgICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkoZXZlbnQpXG4gICAgICB9O1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKGluZm8pO1xuICAgIH07XG4gICAgbGV0IGluaXREaXN0YW5jZUJldHdlZW5GaW5nZXJzID0gMTtcbiAgICBsZXQgaW5pdFpvb20gPSAxO1xuICAgIGxldCBjdXJyWm9vbSA9IDE7XG4gICAgbGV0IGN1cnJEaXN0YW5jZUJldHdlZW5GaW5nZXJzID0gMDtcbiAgICBjb25zdCBpbml0UG9pbnRCZXR3ZWVuRmluZ2VycyA9IG5ldyBWZWMoKTtcbiAgICBjb25zdCBwcmV2UG9pbnRCZXR3ZWVuRmluZ2VycyA9IG5ldyBWZWMoKTtcbiAgICBjb25zdCBvblBpbmNoU3RhcnQgPSAoZ2VzdHVyZSkgPT4ge1xuICAgICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgICBwaW5jaFN0YXRlID0gXCJub3Qgc3VyZVwiO1xuICAgICAgY29uc3QgeyBldmVudCwgb3JpZ2luLCBkYSB9ID0gZ2VzdHVyZTtcbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIFdoZWVsRXZlbnQpIHJldHVybjtcbiAgICAgIGlmICghKGV2ZW50LnRhcmdldCA9PT0gZWxtIHx8IGVsbT8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpIHJldHVybjtcbiAgICAgIHByZXZQb2ludEJldHdlZW5GaW5nZXJzLnggPSBvcmlnaW5bMF07XG4gICAgICBwcmV2UG9pbnRCZXR3ZWVuRmluZ2Vycy55ID0gb3JpZ2luWzFdO1xuICAgICAgaW5pdFBvaW50QmV0d2VlbkZpbmdlcnMueCA9IG9yaWdpblswXTtcbiAgICAgIGluaXRQb2ludEJldHdlZW5GaW5nZXJzLnkgPSBvcmlnaW5bMV07XG4gICAgICBpbml0RGlzdGFuY2VCZXR3ZWVuRmluZ2VycyA9IGRhWzBdO1xuICAgICAgaW5pdFpvb20gPSBlZGl0b3IuZ2V0Wm9vbUxldmVsKCk7XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBpbmNoXCIsXG4gICAgICAgIG5hbWU6IFwicGluY2hfc3RhcnRcIixcbiAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IGVkaXRvci5nZXRab29tTGV2ZWwoKSB9LFxuICAgICAgICBkZWx0YTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgYWx0S2V5OiBldmVudC5hbHRLZXksXG4gICAgICAgIGN0cmxLZXk6IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSxcbiAgICAgICAgbWV0YUtleTogZXZlbnQubWV0YUtleSxcbiAgICAgICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkoZXZlbnQpXG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHVwZGF0ZVBpbmNoU3RhdGUgPSAoaXNTYWZhcmlUcmFja3BhZFBpbmNoKSA9PiB7XG4gICAgICBpZiAoaXNTYWZhcmlUcmFja3BhZFBpbmNoKSB7XG4gICAgICAgIHBpbmNoU3RhdGUgPSBcInpvb21pbmdcIjtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5jaFN0YXRlID09PSBcInpvb21pbmdcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB0b3VjaERpc3RhbmNlID0gTWF0aC5hYnMoY3VyckRpc3RhbmNlQmV0d2VlbkZpbmdlcnMgLSBpbml0RGlzdGFuY2VCZXR3ZWVuRmluZ2Vycyk7XG4gICAgICBjb25zdCBvcmlnaW5EaXN0YW5jZSA9IFZlYy5EaXN0KGluaXRQb2ludEJldHdlZW5GaW5nZXJzLCBwcmV2UG9pbnRCZXR3ZWVuRmluZ2Vycyk7XG4gICAgICBzd2l0Y2ggKHBpbmNoU3RhdGUpIHtcbiAgICAgICAgY2FzZSBcIm5vdCBzdXJlXCI6IHtcbiAgICAgICAgICBpZiAodG91Y2hEaXN0YW5jZSA+IDI0KSB7XG4gICAgICAgICAgICBwaW5jaFN0YXRlID0gXCJ6b29taW5nXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcmlnaW5EaXN0YW5jZSA+IDE2KSB7XG4gICAgICAgICAgICBwaW5jaFN0YXRlID0gXCJwYW5uaW5nXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYW5uaW5nXCI6IHtcbiAgICAgICAgICBpZiAodG91Y2hEaXN0YW5jZSA+IDY0KSB7XG4gICAgICAgICAgICBwaW5jaFN0YXRlID0gXCJ6b29taW5nXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvblBpbmNoID0gKGdlc3R1cmUpID0+IHtcbiAgICAgIGNvbnN0IGVsbSA9IHJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgeyBldmVudCwgb3JpZ2luLCBvZmZzZXQsIGRhIH0gPSBnZXN0dXJlO1xuICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgV2hlZWxFdmVudCkgcmV0dXJuO1xuICAgICAgaWYgKCEoZXZlbnQudGFyZ2V0ID09PSBlbG0gfHwgZWxtPy5jb250YWlucyhldmVudC50YXJnZXQpKSkgcmV0dXJuO1xuICAgICAgY29uc3QgaXNTYWZhcmlUcmFja3BhZFBpbmNoID0gZ2VzdHVyZS50eXBlID09PSBcImdlc3R1cmVjaGFuZ2VcIiB8fCBnZXN0dXJlLnR5cGUgPT09IFwiZ2VzdHVyZWVuZFwiO1xuICAgICAgY3VyckRpc3RhbmNlQmV0d2VlbkZpbmdlcnMgPSBkYVswXTtcbiAgICAgIGNvbnN0IGR4ID0gb3JpZ2luWzBdIC0gcHJldlBvaW50QmV0d2VlbkZpbmdlcnMueDtcbiAgICAgIGNvbnN0IGR5ID0gb3JpZ2luWzFdIC0gcHJldlBvaW50QmV0d2VlbkZpbmdlcnMueTtcbiAgICAgIHByZXZQb2ludEJldHdlZW5GaW5nZXJzLnggPSBvcmlnaW5bMF07XG4gICAgICBwcmV2UG9pbnRCZXR3ZWVuRmluZ2Vycy55ID0gb3JpZ2luWzFdO1xuICAgICAgdXBkYXRlUGluY2hTdGF0ZShpc1NhZmFyaVRyYWNrcGFkUGluY2gpO1xuICAgICAgc3dpdGNoIChwaW5jaFN0YXRlKSB7XG4gICAgICAgIGNhc2UgXCJ6b29taW5nXCI6IHtcbiAgICAgICAgICBjdXJyWm9vbSA9IG9mZnNldFswXTtcbiAgICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgbmFtZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IGN1cnJab29tIH0sXG4gICAgICAgICAgICBkZWx0YTogeyB4OiBkeCwgeTogZHkgfSxcbiAgICAgICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgICAgICAgICAgY3RybEtleTogZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5LFxuICAgICAgICAgICAgbWV0YUtleTogZXZlbnQubWV0YUtleSxcbiAgICAgICAgICAgIGFjY2VsS2V5OiBpc0FjY2VsS2V5KGV2ZW50KVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYW5uaW5nXCI6IHtcbiAgICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgbmFtZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IGluaXRab29tIH0sXG4gICAgICAgICAgICBkZWx0YTogeyB4OiBkeCwgeTogZHkgfSxcbiAgICAgICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgICAgICAgICAgY3RybEtleTogZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5LFxuICAgICAgICAgICAgbWV0YUtleTogZXZlbnQubWV0YUtleSxcbiAgICAgICAgICAgIGFjY2VsS2V5OiBpc0FjY2VsS2V5KGV2ZW50KVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvblBpbmNoRW5kID0gKGdlc3R1cmUpID0+IHtcbiAgICAgIGNvbnN0IGVsbSA9IHJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgeyBldmVudCwgb3JpZ2luLCBvZmZzZXQgfSA9IGdlc3R1cmU7XG4gICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBXaGVlbEV2ZW50KSByZXR1cm47XG4gICAgICBpZiAoIShldmVudC50YXJnZXQgPT09IGVsbSB8fCBlbG0/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpKSByZXR1cm47XG4gICAgICBjb25zdCBzY2FsZSA9IG9mZnNldFswXTtcbiAgICAgIHBpbmNoU3RhdGUgPSBcIm5vdCBzdXJlXCI7XG4gICAgICBlZGl0b3IudGltZXJzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJwaW5jaFwiLFxuICAgICAgICAgIG5hbWU6IFwicGluY2hfZW5kXCIsXG4gICAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IHNjYWxlIH0sXG4gICAgICAgICAgZGVsdGE6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0gfSxcbiAgICAgICAgICBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgYWx0S2V5OiBldmVudC5hbHRLZXksXG4gICAgICAgICAgY3RybEtleTogZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5LFxuICAgICAgICAgIG1ldGFLZXk6IGV2ZW50Lm1ldGFLZXksXG4gICAgICAgICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkoZXZlbnQpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgb25XaGVlbCxcbiAgICAgIG9uUGluY2hTdGFydCxcbiAgICAgIG9uUGluY2hFbmQsXG4gICAgICBvblBpbmNoXG4gICAgfTtcbiAgfSwgW2VkaXRvciwgcmVmXSk7XG4gIHVzZUdlc3R1cmUoZXZlbnRzLCB7XG4gICAgdGFyZ2V0OiByZWYsXG4gICAgZXZlbnRPcHRpb25zOiB7IHBhc3NpdmU6IGZhbHNlIH0sXG4gICAgcGluY2g6IHtcbiAgICAgIGZyb206ICgpID0+IFtlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIDBdLFxuICAgICAgLy8gUmV0dXJuIHRoZSBjYW1lcmEgeiB0byB1c2Ugd2hlbiBwaW5jaCBzdGFydHNcbiAgICAgIHNjYWxlQm91bmRzOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhc2Vab29tID0gZWRpdG9yLmdldEJhc2Vab29tKCk7XG4gICAgICAgIGNvbnN0IHpvb21TdGVwcyA9IGVkaXRvci5nZXRDYW1lcmFPcHRpb25zKCkuem9vbVN0ZXBzO1xuICAgICAgICBjb25zdCB6b29tTWluID0gem9vbVN0ZXBzWzBdICogYmFzZVpvb207XG4gICAgICAgIGNvbnN0IHpvb21NYXggPSB6b29tU3RlcHNbem9vbVN0ZXBzLmxlbmd0aCAtIDFdICogYmFzZVpvb207XG4gICAgICAgIHJldHVybiB7IGZyb206IGVkaXRvci5nZXRab29tTGV2ZWwoKSwgbWF4OiB6b29tTWF4LCBtaW46IHpvb21NaW4gfTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgdXNlR2VzdHVyZUV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUdlc3R1cmVFdmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGlobalMenuIsOpen.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGlobalMenuIsOpen.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGlobalMenuIsOpen: () => (/* binding */ useGlobalMenuIsOpen)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/menus.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/menus.mjs\");\n\n\n\nfunction useGlobalMenuIsOpen(id, onChange, onEvent) {\n  const rIsOpen = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n  const onOpenChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (isOpen2) => {\n      rIsOpen.current = isOpen2;\n      if (isOpen2) {\n        _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.addOpenMenu(id);\n      } else {\n        _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.deleteOpenMenu(id);\n      }\n      onChange?.(isOpen2);\n    },\n    [id, onChange]\n  );\n  const isOpen = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"is menu open\", () => _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.getOpenMenus().includes(id), [id]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (rIsOpen.current) {\n      onEvent?.(\"open-menu\");\n      _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.addOpenMenu(id);\n    }\n    return () => {\n      if (rIsOpen.current) {\n        _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.deleteOpenMenu(id);\n        _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.getOpenMenus().forEach((menuId) => {\n          if (menuId.startsWith(id)) {\n            onEvent?.(\"close-menu\");\n            _globals_menus_mjs__WEBPACK_IMPORTED_MODULE_2__.tlmenus.deleteOpenMenu(menuId);\n          }\n        });\n        rIsOpen.current = false;\n      }\n    };\n  }, [id, onEvent]);\n  return [isOpen, onOpenChange];\n}\n\n//# sourceMappingURL=useGlobalMenuIsOpen.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUdsb2JhbE1lbnVJc09wZW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDUTtBQUNSO0FBQy9DO0FBQ0Esa0JBQWtCLDZDQUFNO0FBQ3hCLHVCQUF1QixrREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFPO0FBQ2YsUUFBUTtBQUNSLFFBQVEsdURBQU87QUFDZjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQVEsdUJBQXVCLHVEQUFPO0FBQ3ZELEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0EsTUFBTSx1REFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdURBQU87QUFDZixRQUFRLHVEQUFPO0FBQ2Y7QUFDQTtBQUNBLFlBQVksdURBQU87QUFDbkI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUdsb2JhbE1lbnVJc09wZW4ubWpzPzA0ODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0bG1lbnVzIH0gZnJvbSBcIi4uL2dsb2JhbHMvbWVudXMubWpzXCI7XG5mdW5jdGlvbiB1c2VHbG9iYWxNZW51SXNPcGVuKGlkLCBvbkNoYW5nZSwgb25FdmVudCkge1xuICBjb25zdCBySXNPcGVuID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3Qgb25PcGVuQ2hhbmdlID0gdXNlQ2FsbGJhY2soXG4gICAgKGlzT3BlbjIpID0+IHtcbiAgICAgIHJJc09wZW4uY3VycmVudCA9IGlzT3BlbjI7XG4gICAgICBpZiAoaXNPcGVuMikge1xuICAgICAgICB0bG1lbnVzLmFkZE9wZW5NZW51KGlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRsbWVudXMuZGVsZXRlT3Blbk1lbnUoaWQpO1xuICAgICAgfVxuICAgICAgb25DaGFuZ2U/Lihpc09wZW4yKTtcbiAgICB9LFxuICAgIFtpZCwgb25DaGFuZ2VdXG4gICk7XG4gIGNvbnN0IGlzT3BlbiA9IHVzZVZhbHVlKFwiaXMgbWVudSBvcGVuXCIsICgpID0+IHRsbWVudXMuZ2V0T3Blbk1lbnVzKCkuaW5jbHVkZXMoaWQpLCBbaWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocklzT3Blbi5jdXJyZW50KSB7XG4gICAgICBvbkV2ZW50Py4oXCJvcGVuLW1lbnVcIik7XG4gICAgICB0bG1lbnVzLmFkZE9wZW5NZW51KGlkKTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChySXNPcGVuLmN1cnJlbnQpIHtcbiAgICAgICAgdGxtZW51cy5kZWxldGVPcGVuTWVudShpZCk7XG4gICAgICAgIHRsbWVudXMuZ2V0T3Blbk1lbnVzKCkuZm9yRWFjaCgobWVudUlkKSA9PiB7XG4gICAgICAgICAgaWYgKG1lbnVJZC5zdGFydHNXaXRoKGlkKSkge1xuICAgICAgICAgICAgb25FdmVudD8uKFwiY2xvc2UtbWVudVwiKTtcbiAgICAgICAgICAgIHRsbWVudXMuZGVsZXRlT3Blbk1lbnUobWVudUlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBySXNPcGVuLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaWQsIG9uRXZlbnRdKTtcbiAgcmV0dXJuIFtpc09wZW4sIG9uT3BlbkNoYW5nZV07XG59XG5leHBvcnQge1xuICB1c2VHbG9iYWxNZW51SXNPcGVuXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlR2xvYmFsTWVudUlzT3Blbi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGlobalMenuIsOpen.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHandleEvents: () => (/* binding */ useHandleEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\nfunction getHandle(editor, id, handleId) {\n  const shape = editor.getShape(id);\n  const handles = editor.getShapeHandles(shape);\n  return { shape, handle: handles.find((h) => h.id === handleId) };\n}\nfunction useHandleEvents(id, handleId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const onPointerDown = (e) => {\n      if (e.isKilled) return;\n      const target = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.loopToHtmlElement)(e.currentTarget);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.setPointerCapture)(target, e);\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle) return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_down\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    let lastX, lastY;\n    const onPointerMove = (e) => {\n      if (e.isKilled) return;\n      if (e.clientX === lastX && e.clientY === lastY) return;\n      lastX = e.clientX;\n      lastY = e.clientY;\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle) return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_move\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    const onPointerUp = (e) => {\n      if (e.isKilled) return;\n      const target = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.loopToHtmlElement)(e.currentTarget);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.releasePointerCapture)(target, e);\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle) return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_up\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    return {\n      onPointerDown,\n      onPointerMove,\n      onPointerUp\n    };\n  }, [editor, id, handleId]);\n}\n\n//# sourceMappingURL=useHandleEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUhhbmRsZUV2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDZ0U7QUFDbEM7QUFDakI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsU0FBUywwQ0FBYTtBQUN0QjtBQUNBO0FBQ0EscUJBQXFCLGlFQUFpQjtBQUN0QyxNQUFNLGlFQUFpQjtBQUN2QixjQUFjLGdCQUFnQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUVBQWM7QUFDekIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlFQUFjO0FBQ3pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQWlCO0FBQ3RDLE1BQU0scUVBQXFCO0FBQzNCLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBYztBQUN6QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VIYW5kbGVFdmVudHMubWpzPzcyOTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBsb29wVG9IdG1sRWxlbWVudCwgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLCBzZXRQb2ludGVyQ2FwdHVyZSB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRQb2ludGVySW5mbyB9IGZyb20gXCIuLi91dGlscy9nZXRQb2ludGVySW5mby5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIGdldEhhbmRsZShlZGl0b3IsIGlkLCBoYW5kbGVJZCkge1xuICBjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShpZCk7XG4gIGNvbnN0IGhhbmRsZXMgPSBlZGl0b3IuZ2V0U2hhcGVIYW5kbGVzKHNoYXBlKTtcbiAgcmV0dXJuIHsgc2hhcGUsIGhhbmRsZTogaGFuZGxlcy5maW5kKChoKSA9PiBoLmlkID09PSBoYW5kbGVJZCkgfTtcbn1cbmZ1bmN0aW9uIHVzZUhhbmRsZUV2ZW50cyhpZCwgaGFuZGxlSWQpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBvblBvaW50ZXJEb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmlzS2lsbGVkKSByZXR1cm47XG4gICAgICBjb25zdCB0YXJnZXQgPSBsb29wVG9IdG1sRWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgc2V0UG9pbnRlckNhcHR1cmUodGFyZ2V0LCBlKTtcbiAgICAgIGNvbnN0IHsgc2hhcGUsIGhhbmRsZSB9ID0gZ2V0SGFuZGxlKGVkaXRvciwgaWQsIGhhbmRsZUlkKTtcbiAgICAgIGlmICghaGFuZGxlKSByZXR1cm47XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgdGFyZ2V0OiBcImhhbmRsZVwiLFxuICAgICAgICBoYW5kbGUsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBuYW1lOiBcInBvaW50ZXJfZG93blwiLFxuICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBsZXQgbGFzdFgsIGxhc3RZO1xuICAgIGNvbnN0IG9uUG9pbnRlck1vdmUgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgIGlmIChlLmNsaWVudFggPT09IGxhc3RYICYmIGUuY2xpZW50WSA9PT0gbGFzdFkpIHJldHVybjtcbiAgICAgIGxhc3RYID0gZS5jbGllbnRYO1xuICAgICAgbGFzdFkgPSBlLmNsaWVudFk7XG4gICAgICBjb25zdCB7IHNoYXBlLCBoYW5kbGUgfSA9IGdldEhhbmRsZShlZGl0b3IsIGlkLCBoYW5kbGVJZCk7XG4gICAgICBpZiAoIWhhbmRsZSkgcmV0dXJuO1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgIHRhcmdldDogXCJoYW5kbGVcIixcbiAgICAgICAgaGFuZGxlLFxuICAgICAgICBzaGFwZSxcbiAgICAgICAgbmFtZTogXCJwb2ludGVyX21vdmVcIixcbiAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgb25Qb2ludGVyVXAgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuaXNLaWxsZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGxvb3BUb0h0bWxFbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgICByZWxlYXNlUG9pbnRlckNhcHR1cmUodGFyZ2V0LCBlKTtcbiAgICAgIGNvbnN0IHsgc2hhcGUsIGhhbmRsZSB9ID0gZ2V0SGFuZGxlKGVkaXRvciwgaWQsIGhhbmRsZUlkKTtcbiAgICAgIGlmICghaGFuZGxlKSByZXR1cm47XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgdGFyZ2V0OiBcImhhbmRsZVwiLFxuICAgICAgICBoYW5kbGUsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBuYW1lOiBcInBvaW50ZXJfdXBcIixcbiAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uUG9pbnRlckRvd24sXG4gICAgICBvblBvaW50ZXJNb3ZlLFxuICAgICAgb25Qb2ludGVyVXBcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBpZCwgaGFuZGxlSWRdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUhhbmRsZUV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUhhbmRsZUV2ZW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShallowArrayIdentity: () => (/* binding */ useShallowArrayIdentity),\n/* harmony export */   useShallowObjectIdentity: () => (/* binding */ useShallowObjectIdentity)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useIdentity(value, isEqual) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);\n  if (isEqual(value, ref.current)) {\n    return ref.current;\n  }\n  ref.current = value;\n  return value;\n}\nconst areNullableArraysShallowEqual = (a, b) => {\n  a ??= null;\n  b ??= null;\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areArraysShallowEqual)(a, b);\n};\nfunction useShallowArrayIdentity(arr) {\n  return useIdentity(arr, areNullableArraysShallowEqual);\n}\nconst areNullableObjectsShallowEqual = (a, b) => {\n  a ??= null;\n  b ??= null;\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual)(a, b);\n};\nfunction useShallowObjectIdentity(obj) {\n  return useIdentity(obj, areNullableObjectsShallowEqual);\n}\n\n//# sourceMappingURL=useIdentity.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlkZW50aXR5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThFO0FBQy9DO0FBQy9CO0FBQ0EsY0FBYyw2Q0FBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9FQUFxQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscUVBQXNCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VJZGVudGl0eS5tanM/YzM1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcmVBcnJheXNTaGFsbG93RXF1YWwsIGFyZU9iamVjdHNTaGFsbG93RXF1YWwgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VJZGVudGl0eSh2YWx1ZSwgaXNFcXVhbCkge1xuICBjb25zdCByZWYgPSB1c2VSZWYodmFsdWUpO1xuICBpZiAoaXNFcXVhbCh2YWx1ZSwgcmVmLmN1cnJlbnQpKSB7XG4gICAgcmV0dXJuIHJlZi5jdXJyZW50O1xuICB9XG4gIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IGFyZU51bGxhYmxlQXJyYXlzU2hhbGxvd0VxdWFsID0gKGEsIGIpID0+IHtcbiAgYSA/Pz0gbnVsbDtcbiAgYiA/Pz0gbnVsbDtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIWEgfHwgIWIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGFyZUFycmF5c1NoYWxsb3dFcXVhbChhLCBiKTtcbn07XG5mdW5jdGlvbiB1c2VTaGFsbG93QXJyYXlJZGVudGl0eShhcnIpIHtcbiAgcmV0dXJuIHVzZUlkZW50aXR5KGFyciwgYXJlTnVsbGFibGVBcnJheXNTaGFsbG93RXF1YWwpO1xufVxuY29uc3QgYXJlTnVsbGFibGVPYmplY3RzU2hhbGxvd0VxdWFsID0gKGEsIGIpID0+IHtcbiAgYSA/Pz0gbnVsbDtcbiAgYiA/Pz0gbnVsbDtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIWEgfHwgIWIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGFyZU9iamVjdHNTaGFsbG93RXF1YWwoYSwgYik7XG59O1xuZnVuY3Rpb24gdXNlU2hhbGxvd09iamVjdElkZW50aXR5KG9iaikge1xuICByZXR1cm4gdXNlSWRlbnRpdHkob2JqLCBhcmVOdWxsYWJsZU9iamVjdHNTaGFsbG93RXF1YWwpO1xufVxuZXhwb3J0IHtcbiAgdXNlU2hhbGxvd0FycmF5SWRlbnRpdHksXG4gIHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUlkZW50aXR5Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsCropping: () => (/* binding */ useIsCropping)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction useIsCropping(shapeId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isCropping\", () => editor.getCroppingShapeId() === shapeId, [editor, shapeId]);\n}\n\n//# sourceMappingURL=useIsCropping.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzQ3JvcHBpbmcubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUNIO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLFNBQVMsNkRBQVE7QUFDakI7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzQ3JvcHBpbmcubWpzPzU0MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlSXNDcm9wcGluZyhzaGFwZUlkKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICByZXR1cm4gdXNlVmFsdWUoXCJpc0Nyb3BwaW5nXCIsICgpID0+IGVkaXRvci5nZXRDcm9wcGluZ1NoYXBlSWQoKSA9PT0gc2hhcGVJZCwgW2VkaXRvciwgc2hhcGVJZF0pO1xufVxuZXhwb3J0IHtcbiAgdXNlSXNDcm9wcGluZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUlzQ3JvcHBpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsDarkMode: () => (/* binding */ useIsDarkMode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../editor/types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction useIsDarkMode() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const exportContext = (0,_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_1__.useSvgExportContext)();\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isDarkMode\", () => exportContext?.isDarkMode ?? editor.user.getIsDarkMode(), [\n    exportContext,\n    editor\n  ]);\n}\n\n//# sourceMappingURL=useIsDarkMode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzRGFya01vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDNEI7QUFDL0I7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsd0JBQXdCLHVGQUFtQjtBQUMzQyxTQUFTLDZEQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VJc0RhcmtNb2RlLm1qcz8zMzAzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IHVzZVN2Z0V4cG9ydENvbnRleHQgfSBmcm9tIFwiLi4vZWRpdG9yL3R5cGVzL1N2Z0V4cG9ydENvbnRleHQubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VJc0RhcmtNb2RlKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgZXhwb3J0Q29udGV4dCA9IHVzZVN2Z0V4cG9ydENvbnRleHQoKTtcbiAgcmV0dXJuIHVzZVZhbHVlKFwiaXNEYXJrTW9kZVwiLCAoKSA9PiBleHBvcnRDb250ZXh0Py5pc0RhcmtNb2RlID8/IGVkaXRvci51c2VyLmdldElzRGFya01vZGUoKSwgW1xuICAgIGV4cG9ydENvbnRleHQsXG4gICAgZWRpdG9yXG4gIF0pO1xufVxuZXhwb3J0IHtcbiAgdXNlSXNEYXJrTW9kZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUlzRGFya01vZGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsEditing: () => (/* binding */ useIsEditing)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction useIsEditing(shapeId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isEditing\", () => editor.getEditingShapeId() === shapeId, [editor, shapeId]);\n}\n\n//# sourceMappingURL=useIsEditing.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzRWRpdGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ0g7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsU0FBUyw2REFBUTtBQUNqQjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlSXNFZGl0aW5nLm1qcz8xYzM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZUlzRWRpdGluZyhzaGFwZUlkKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICByZXR1cm4gdXNlVmFsdWUoXCJpc0VkaXRpbmdcIiwgKCkgPT4gZWRpdG9yLmdldEVkaXRpbmdTaGFwZUlkKCkgPT09IHNoYXBlSWQsIFtlZGl0b3IsIHNoYXBlSWRdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUlzRWRpdGluZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUlzRWRpdGluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalStore: () => (/* binding */ useLocalStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/createTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\");\n/* harmony import */ var _utils_sync_TLLocalSyncClient_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/sync/TLLocalSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs\");\n/* harmony import */ var _useIdentity_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n/* harmony import */ var _useRefState_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useRefState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs\");\n\n\n\n\n\n\nfunction useLocalStore(options) {\n  const [state, setState] = (0,_useRefState_mjs__WEBPACK_IMPORTED_MODULE_5__.useRefState)({ status: \"loading\" });\n  options = (0,_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_4__.useShallowObjectIdentity)(options);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const { persistenceKey, sessionId, ...rest } = options;\n    if (!persistenceKey) {\n      setState({\n        status: \"not-synced\",\n        store: (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLStore)(rest)\n      });\n      return;\n    }\n    setState({ status: \"loading\" });\n    const objectURLCache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.WeakCache();\n    const assets = {\n      upload: async (asset, file) => {\n        await client.db.storeAsset(asset.id, file);\n        return asset.id;\n      },\n      resolve: async (asset) => {\n        if (!asset.props.src) return null;\n        if (asset.props.src.startsWith(\"asset:\")) {\n          return await objectURLCache.get(asset, async () => {\n            const blob = await client.db.getAsset(asset.id);\n            if (!blob) return null;\n            return URL.createObjectURL(blob);\n          });\n        }\n        return asset.props.src;\n      },\n      ...rest.assets\n    };\n    const store = (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLStore)({ ...rest, assets });\n    let isClosed = false;\n    const client = new _utils_sync_TLLocalSyncClient_mjs__WEBPACK_IMPORTED_MODULE_3__.TLLocalSyncClient(store, {\n      sessionId,\n      persistenceKey,\n      onLoad() {\n        if (isClosed) return;\n        setState({ store, status: \"synced-local\" });\n      },\n      onLoadError(err) {\n        if (isClosed) return;\n        setState({ status: \"error\", error: err });\n      }\n    });\n    return () => {\n      isClosed = true;\n      client.close();\n    };\n  }, [options, setState]);\n  return state;\n}\n\n//# sourceMappingURL=useLocalStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUxvY2FsU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEM7QUFDUjtBQUMwQjtBQUNZO0FBQ1g7QUFDYjtBQUNoRDtBQUNBLDRCQUE0Qiw2REFBVyxHQUFHLG1CQUFtQjtBQUM3RCxZQUFZLDBFQUF3QjtBQUNwQyxFQUFFLGdEQUFTO0FBQ1gsWUFBWSxxQ0FBcUM7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3RUFBYTtBQUM1QixPQUFPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDLCtCQUErQixvREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxrQkFBa0Isd0VBQWEsR0FBRyxpQkFBaUI7QUFDbkQ7QUFDQSx1QkFBdUIsZ0ZBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtCQUErQjtBQUNsRCxPQUFPO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlTG9jYWxTdG9yZS5tanM/ZmJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXZWFrQ2FjaGUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVUTFN0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgVExMb2NhbFN5bmNDbGllbnQgfSBmcm9tIFwiLi4vdXRpbHMvc3luYy9UTExvY2FsU3luY0NsaWVudC5tanNcIjtcbmltcG9ydCB7IHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eSB9IGZyb20gXCIuL3VzZUlkZW50aXR5Lm1qc1wiO1xuaW1wb3J0IHsgdXNlUmVmU3RhdGUgfSBmcm9tIFwiLi91c2VSZWZTdGF0ZS5tanNcIjtcbmZ1bmN0aW9uIHVzZUxvY2FsU3RvcmUob3B0aW9ucykge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVJlZlN0YXRlKHsgc3RhdHVzOiBcImxvYWRpbmdcIiB9KTtcbiAgb3B0aW9ucyA9IHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eShvcHRpb25zKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7IHBlcnNpc3RlbmNlS2V5LCBzZXNzaW9uSWQsIC4uLnJlc3QgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFwZXJzaXN0ZW5jZUtleSkge1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXM6IFwibm90LXN5bmNlZFwiLFxuICAgICAgICBzdG9yZTogY3JlYXRlVExTdG9yZShyZXN0KVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFN0YXRlKHsgc3RhdHVzOiBcImxvYWRpbmdcIiB9KTtcbiAgICBjb25zdCBvYmplY3RVUkxDYWNoZSA9IG5ldyBXZWFrQ2FjaGUoKTtcbiAgICBjb25zdCBhc3NldHMgPSB7XG4gICAgICB1cGxvYWQ6IGFzeW5jIChhc3NldCwgZmlsZSkgPT4ge1xuICAgICAgICBhd2FpdCBjbGllbnQuZGIuc3RvcmVBc3NldChhc3NldC5pZCwgZmlsZSk7XG4gICAgICAgIHJldHVybiBhc3NldC5pZDtcbiAgICAgIH0sXG4gICAgICByZXNvbHZlOiBhc3luYyAoYXNzZXQpID0+IHtcbiAgICAgICAgaWYgKCFhc3NldC5wcm9wcy5zcmMpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoYXNzZXQucHJvcHMuc3JjLnN0YXJ0c1dpdGgoXCJhc3NldDpcIikpIHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgb2JqZWN0VVJMQ2FjaGUuZ2V0KGFzc2V0LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgY2xpZW50LmRiLmdldEFzc2V0KGFzc2V0LmlkKTtcbiAgICAgICAgICAgIGlmICghYmxvYikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzZXQucHJvcHMuc3JjO1xuICAgICAgfSxcbiAgICAgIC4uLnJlc3QuYXNzZXRzXG4gICAgfTtcbiAgICBjb25zdCBzdG9yZSA9IGNyZWF0ZVRMU3RvcmUoeyAuLi5yZXN0LCBhc3NldHMgfSk7XG4gICAgbGV0IGlzQ2xvc2VkID0gZmFsc2U7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IFRMTG9jYWxTeW5jQ2xpZW50KHN0b3JlLCB7XG4gICAgICBzZXNzaW9uSWQsXG4gICAgICBwZXJzaXN0ZW5jZUtleSxcbiAgICAgIG9uTG9hZCgpIHtcbiAgICAgICAgaWYgKGlzQ2xvc2VkKSByZXR1cm47XG4gICAgICAgIHNldFN0YXRlKHsgc3RvcmUsIHN0YXR1czogXCJzeW5jZWQtbG9jYWxcIiB9KTtcbiAgICAgIH0sXG4gICAgICBvbkxvYWRFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKGlzQ2xvc2VkKSByZXR1cm47XG4gICAgICAgIHNldFN0YXRlKHsgc3RhdHVzOiBcImVycm9yXCIsIGVycm9yOiBlcnIgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH07XG4gIH0sIFtvcHRpb25zLCBzZXRTdGF0ZV0pO1xuICByZXR1cm4gc3RhdGU7XG59XG5leHBvcnQge1xuICB1c2VMb2NhbFN0b3JlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlTG9jYWxTdG9yZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePassThroughWheelEvents.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePassThroughWheelEvents.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePassThroughWheelEvents: () => (/* binding */ usePassThroughWheelEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n\n\n\nfunction usePassThroughWheelEvents(ref) {\n  if (!ref) throw Error(\"usePassThroughWheelEvents must be passed a ref\");\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__.useContainer)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    function onWheel(e) {\n      if (e.isSpecialRedispatchedEvent) return;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.preventDefault)(e);\n      const cvs = container.querySelector(\".tl-canvas\");\n      if (!cvs) return;\n      const newEvent = new WheelEvent(\"wheel\", e);\n      newEvent.isSpecialRedispatchedEvent = true;\n      cvs.dispatchEvent(newEvent);\n    }\n    const elm = ref.current;\n    if (!elm) return;\n    elm.addEventListener(\"wheel\", onWheel, { passive: false });\n    return () => {\n      elm.removeEventListener(\"wheel\", onWheel);\n    };\n  }, [container, ref]);\n}\n\n//# sourceMappingURL=usePassThroughWheelEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBhc3NUaHJvdWdoV2hlZWxFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFDZ0I7QUFDQTtBQUNsRDtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFZO0FBQ2hDLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0EsTUFBTSw4REFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGdCQUFnQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBhc3NUaHJvdWdoV2hlZWxFdmVudHMubWpzPzQyNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyB1c2VDb250YWluZXIgfSBmcm9tIFwiLi91c2VDb250YWluZXIubWpzXCI7XG5mdW5jdGlvbiB1c2VQYXNzVGhyb3VnaFdoZWVsRXZlbnRzKHJlZikge1xuICBpZiAoIXJlZikgdGhyb3cgRXJyb3IoXCJ1c2VQYXNzVGhyb3VnaFdoZWVsRXZlbnRzIG11c3QgYmUgcGFzc2VkIGEgcmVmXCIpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBvbldoZWVsKGUpIHtcbiAgICAgIGlmIChlLmlzU3BlY2lhbFJlZGlzcGF0Y2hlZEV2ZW50KSByZXR1cm47XG4gICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIGNvbnN0IGN2cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLnRsLWNhbnZhc1wiKTtcbiAgICAgIGlmICghY3ZzKSByZXR1cm47XG4gICAgICBjb25zdCBuZXdFdmVudCA9IG5ldyBXaGVlbEV2ZW50KFwid2hlZWxcIiwgZSk7XG4gICAgICBuZXdFdmVudC5pc1NwZWNpYWxSZWRpc3BhdGNoZWRFdmVudCA9IHRydWU7XG4gICAgICBjdnMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgfVxuICAgIGNvbnN0IGVsbSA9IHJlZi5jdXJyZW50O1xuICAgIGlmICghZWxtKSByZXR1cm47XG4gICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBvbldoZWVsLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIG9uV2hlZWwpO1xuICAgIH07XG4gIH0sIFtjb250YWluZXIsIHJlZl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlUGFzc1Rocm91Z2hXaGVlbEV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVBhc3NUaHJvdWdoV2hlZWxFdmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePassThroughWheelEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePeerIds: () => (/* binding */ usePeerIds)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/uniq.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction usePeerIds() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const $userIds = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useComputed)(\n    \"userIds\",\n    () => (0,_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_1__.uniq)(editor.getCollaborators().map((p) => p.userId)).sort(),\n    { isEqual: (a, b) => a.join(\",\") === b.join?.(\",\") },\n    [editor]\n  );\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)($userIds);\n}\n\n//# sourceMappingURL=usePeerIds.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBlZXJJZHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEQ7QUFDbkI7QUFDRztBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQixtQkFBbUIsZ0VBQVc7QUFDOUI7QUFDQSxVQUFVLHFEQUFJO0FBQ2QsTUFBTSxrREFBa0Q7QUFDeEQ7QUFDQTtBQUNBLFNBQVMsNkRBQVE7QUFDakI7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBlZXJJZHMubWpzPzQzNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ29tcHV0ZWQsIHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IHVuaXEgfSBmcm9tIFwiLi4vdXRpbHMvdW5pcS5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZVBlZXJJZHMoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCAkdXNlcklkcyA9IHVzZUNvbXB1dGVkKFxuICAgIFwidXNlcklkc1wiLFxuICAgICgpID0+IHVuaXEoZWRpdG9yLmdldENvbGxhYm9yYXRvcnMoKS5tYXAoKHApID0+IHAudXNlcklkKSkuc29ydCgpLFxuICAgIHsgaXNFcXVhbDogKGEsIGIpID0+IGEuam9pbihcIixcIikgPT09IGIuam9pbj8uKFwiLFwiKSB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHJldHVybiB1c2VWYWx1ZSgkdXNlcklkcyk7XG59XG5leHBvcnQge1xuICB1c2VQZWVySWRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlUGVlcklkcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePresence: () => (/* binding */ usePresence)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction usePresence(userId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  const latestPresence = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\n    `latestPresence:${userId}`,\n    () => {\n      return editor.getCollaborators().find((c) => c.userId === userId);\n    },\n    [editor, userId]\n  );\n  return latestPresence ?? null;\n}\n\n//# sourceMappingURL=usePresence.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVByZXNlbmNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDSDtBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQix5QkFBeUIsNkRBQVE7QUFDakMsc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlUHJlc2VuY2UubWpzPzJkNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlUHJlc2VuY2UodXNlcklkKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBsYXRlc3RQcmVzZW5jZSA9IHVzZVZhbHVlKFxuICAgIGBsYXRlc3RQcmVzZW5jZToke3VzZXJJZH1gLFxuICAgICgpID0+IHtcbiAgICAgIHJldHVybiBlZGl0b3IuZ2V0Q29sbGFib3JhdG9ycygpLmZpbmQoKGMpID0+IGMudXNlcklkID09PSB1c2VySWQpO1xuICAgIH0sXG4gICAgW2VkaXRvciwgdXNlcklkXVxuICApO1xuICByZXR1cm4gbGF0ZXN0UHJlc2VuY2UgPz8gbnVsbDtcbn1cbmV4cG9ydCB7XG4gIHVzZVByZXNlbmNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlUHJlc2VuY2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRefState: () => (/* binding */ useRefState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useRefState(initialValue) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initialValue);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialValue);\n  if (state !== ref.current) {\n    setState(ref.current);\n  }\n  const update = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value) => {\n    if (typeof value === \"function\") {\n      ref.current = value(ref.current);\n    } else {\n      ref.current = value;\n    }\n    setState(ref.current);\n  }, []);\n  return [state, update];\n}\n\n//# sourceMappingURL=useRefState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVJlZlN0YXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUN0RDtBQUNBLGNBQWMsNkNBQU07QUFDcEIsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrREFBVztBQUM1QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VSZWZTdGF0ZS5tanM/ZjJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUmVmU3RhdGUoaW5pdGlhbFZhbHVlKSB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZihpbml0aWFsVmFsdWUpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKGluaXRpYWxWYWx1ZSk7XG4gIGlmIChzdGF0ZSAhPT0gcmVmLmN1cnJlbnQpIHtcbiAgICBzZXRTdGF0ZShyZWYuY3VycmVudCk7XG4gIH1cbiAgY29uc3QgdXBkYXRlID0gdXNlQ2FsbGJhY2soKHZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZWYuY3VycmVudCA9IHZhbHVlKHJlZi5jdXJyZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0U3RhdGUocmVmLmN1cnJlbnQpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbc3RhdGUsIHVwZGF0ZV07XG59XG5leHBvcnQge1xuICB1c2VSZWZTdGF0ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVJlZlN0YXRlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useRefState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sanitizeId: () => (/* binding */ sanitizeId),\n/* harmony export */   useSafeId: () => (/* binding */ useSafeId)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useSafeId() {\n  return sanitizeId((0,react__WEBPACK_IMPORTED_MODULE_0__.useId)());\n}\nfunction sanitizeId(id) {\n  return id.replace(/:/g, \"_\");\n}\n\n//# sourceMappingURL=useSafeId.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNhZmVJZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThCO0FBQzlCO0FBQ0Esb0JBQW9CLDRDQUFLO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VTYWZlSWQubWpzPzAyY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlSWQgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVNhZmVJZCgpIHtcbiAgcmV0dXJuIHNhbml0aXplSWQodXNlSWQoKSk7XG59XG5mdW5jdGlvbiBzYW5pdGl6ZUlkKGlkKSB7XG4gIHJldHVybiBpZC5yZXBsYWNlKC86L2csIFwiX1wiKTtcbn1cbmV4cG9ydCB7XG4gIHNhbml0aXplSWQsXG4gIHVzZVNhZmVJZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVNhZmVJZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useScreenBounds: () => (/* binding */ useScreenBounds)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction useScreenBounds(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    const updateBounds = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.throttle)(\n      () => {\n        if (!ref.current) return;\n        editor.updateViewportScreenBounds(ref.current);\n      },\n      200,\n      {\n        trailing: true\n      }\n    );\n    const interval = editor.timers.setInterval(updateBounds, 1e3);\n    window.addEventListener(\"resize\", updateBounds);\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (!entries[0].contentRect) return;\n      updateBounds();\n    });\n    const container = ref.current;\n    let scrollingParent = null;\n    if (container) {\n      resizeObserver.observe(container);\n      scrollingParent = getNearestScrollableContainer(container);\n      scrollingParent.addEventListener(\"scroll\", updateBounds);\n    }\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener(\"resize\", updateBounds);\n      resizeObserver.disconnect();\n      scrollingParent?.removeEventListener(\"scroll\", updateBounds);\n      updateBounds.cancel();\n    };\n  }, [editor, ref]);\n}\n/*!\n * Author: excalidraw\n * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE\n * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600\n */\nconst getNearestScrollableContainer = (element) => {\n  let parent = element.parentElement;\n  while (parent) {\n    if (parent === document.body) {\n      return document;\n    }\n    const { overflowY } = window.getComputedStyle(parent);\n    const hasScrollableContent = parent.scrollHeight > parent.clientHeight;\n    if (hasScrollableContent && (overflowY === \"auto\" || overflowY === \"scroll\" || overflowY === \"overlay\")) {\n      return parent;\n    }\n    parent = parent.parentElement;\n  }\n  return document;\n};\n\n//# sourceMappingURL=useScreenBounds.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNjcmVlbkJvdW5kcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUNEO0FBQ0k7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsRUFBRSxzREFBZTtBQUNqQix5QkFBeUIsdURBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNjcmVlbkJvdW5kcy5tanM/N2I5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZVNjcmVlbkJvdW5kcyhyZWYpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlQm91bmRzID0gdGhyb3R0bGUoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICghcmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgZWRpdG9yLnVwZGF0ZVZpZXdwb3J0U2NyZWVuQm91bmRzKHJlZi5jdXJyZW50KTtcbiAgICAgIH0sXG4gICAgICAyMDAsXG4gICAgICB7XG4gICAgICAgIHRyYWlsaW5nOiB0cnVlXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBpbnRlcnZhbCA9IGVkaXRvci50aW1lcnMuc2V0SW50ZXJ2YWwodXBkYXRlQm91bmRzLCAxZTMpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGlmICghZW50cmllc1swXS5jb250ZW50UmVjdCkgcmV0dXJuO1xuICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgfSk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcmVmLmN1cnJlbnQ7XG4gICAgbGV0IHNjcm9sbGluZ1BhcmVudCA9IG51bGw7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIpO1xuICAgICAgc2Nyb2xsaW5nUGFyZW50ID0gZ2V0TmVhcmVzdFNjcm9sbGFibGVDb250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIHNjcm9sbGluZ1BhcmVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICBzY3JvbGxpbmdQYXJlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlQm91bmRzKTtcbiAgICAgIHVwZGF0ZUJvdW5kcy5jYW5jZWwoKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCByZWZdKTtcbn1cbi8qIVxuICogQXV0aG9yOiBleGNhbGlkcmF3XG4gKiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2V4Y2FsaWRyYXcvZXhjYWxpZHJhdy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZXhjYWxpZHJhdy9leGNhbGlkcmF3L2Jsb2IvNDhjMzQ2NWIxOWYxMGVjNzU1YjNlYjg0ZTIxYTAxYTQ2OGU5NmU0My9wYWNrYWdlcy9leGNhbGlkcmF3L3V0aWxzLnRzI0w2MDBcbiAqL1xuY29uc3QgZ2V0TmVhcmVzdFNjcm9sbGFibGVDb250YWluZXIgPSAoZWxlbWVudCkgPT4ge1xuICBsZXQgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICB3aGlsZSAocGFyZW50KSB7XG4gICAgaWYgKHBhcmVudCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICBjb25zdCB7IG92ZXJmbG93WSB9ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICBjb25zdCBoYXNTY3JvbGxhYmxlQ29udGVudCA9IHBhcmVudC5zY3JvbGxIZWlnaHQgPiBwYXJlbnQuY2xpZW50SGVpZ2h0O1xuICAgIGlmIChoYXNTY3JvbGxhYmxlQ29udGVudCAmJiAob3ZlcmZsb3dZID09PSBcImF1dG9cIiB8fCBvdmVyZmxvd1kgPT09IFwic2Nyb2xsXCIgfHwgb3ZlcmZsb3dZID09PSBcIm92ZXJsYXlcIikpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBkb2N1bWVudDtcbn07XG5leHBvcnQge1xuICB1c2VTY3JlZW5Cb3VuZHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTY3JlZW5Cb3VuZHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSelectionEvents: () => (/* binding */ useSelectionEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useSelectionEvents(handle) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const events = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    function selectionEvents() {\n      const onPointerDown = (e) => {\n        if (e.isKilled) return;\n        if (e.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.RIGHT_MOUSE_BUTTON) {\n          editor.dispatch({\n            type: \"pointer\",\n            target: \"selection\",\n            handle,\n            name: \"right_click\",\n            ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n          });\n          return;\n        }\n        if (e.button !== 0) return;\n        const elm = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.loopToHtmlElement)(e.currentTarget);\n        function releaseCapture() {\n          elm.removeEventListener(\"pointerup\", releaseCapture);\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.releasePointerCapture)(elm, e);\n        }\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.setPointerCapture)(elm, e);\n        elm.addEventListener(\"pointerup\", releaseCapture);\n        editor.dispatch({\n          name: \"pointer_down\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(e);\n      };\n      let lastX, lastY;\n      function onPointerMove(e) {\n        if (e.isKilled) return;\n        if (e.button !== 0) return;\n        if (e.clientX === lastX && e.clientY === lastY) return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        editor.dispatch({\n          name: \"pointer_move\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      const onPointerUp = (e) => {\n        if (e.isKilled) return;\n        if (e.button !== 0) return;\n        editor.dispatch({\n          name: \"pointer_up\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      };\n      return {\n        onPointerDown,\n        onPointerMove,\n        onPointerUp\n      };\n    },\n    [editor, handle]\n  );\n  return events;\n}\n\n//# sourceMappingURL=useSelectionEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNlbGVjdGlvbkV2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdDO0FBQ3NCO0FBTTVCO0FBQ21DO0FBQ2pCO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlFQUFjO0FBQzdCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQWlCO0FBQ3JDO0FBQ0E7QUFDQSxVQUFVLHFFQUFxQjtBQUMvQjtBQUNBLFFBQVEsaUVBQWlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUVBQWM7QUFDM0IsU0FBUztBQUNULFFBQVEsb0VBQW9CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5RUFBYztBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5RUFBYztBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VTZWxlY3Rpb25FdmVudHMubWpzPzMzZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUklHSFRfTU9VU0VfQlVUVE9OIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7XG4gIGxvb3BUb0h0bWxFbGVtZW50LFxuICByZWxlYXNlUG9pbnRlckNhcHR1cmUsXG4gIHNldFBvaW50ZXJDYXB0dXJlLFxuICBzdG9wRXZlbnRQcm9wYWdhdGlvblxufSBmcm9tIFwiLi4vdXRpbHMvZG9tLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UG9pbnRlckluZm8gfSBmcm9tIFwiLi4vdXRpbHMvZ2V0UG9pbnRlckluZm8ubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VTZWxlY3Rpb25FdmVudHMoaGFuZGxlKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBldmVudHMgPSB1c2VNZW1vKFxuICAgIGZ1bmN0aW9uIHNlbGVjdGlvbkV2ZW50cygpIHtcbiAgICAgIGNvbnN0IG9uUG9pbnRlckRvd24gPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gPT09IFJJR0hUX01PVVNFX0JVVFRPTikge1xuICAgICAgICAgIGVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICAgIHRhcmdldDogXCJzZWxlY3Rpb25cIixcbiAgICAgICAgICAgIGhhbmRsZSxcbiAgICAgICAgICAgIG5hbWU6IFwicmlnaHRfY2xpY2tcIixcbiAgICAgICAgICAgIC4uLmdldFBvaW50ZXJJbmZvKGUpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlbG0gPSBsb29wVG9IdG1sRWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICBmdW5jdGlvbiByZWxlYXNlQ2FwdHVyZSgpIHtcbiAgICAgICAgICBlbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCByZWxlYXNlQ2FwdHVyZSk7XG4gICAgICAgICAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlKGVsbSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0UG9pbnRlckNhcHR1cmUoZWxtLCBlKTtcbiAgICAgICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgcmVsZWFzZUNhcHR1cmUpO1xuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl9kb3duXCIsXG4gICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcInNlbGVjdGlvblwiLFxuICAgICAgICAgIGhhbmRsZSxcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgICAgc3RvcEV2ZW50UHJvcGFnYXRpb24oZSk7XG4gICAgICB9O1xuICAgICAgbGV0IGxhc3RYLCBsYXN0WTtcbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZSkge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcbiAgICAgICAgaWYgKGUuY2xpZW50WCA9PT0gbGFzdFggJiYgZS5jbGllbnRZID09PSBsYXN0WSkgcmV0dXJuO1xuICAgICAgICBsYXN0WCA9IGUuY2xpZW50WDtcbiAgICAgICAgbGFzdFkgPSBlLmNsaWVudFk7XG4gICAgICAgIGVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgbmFtZTogXCJwb2ludGVyX21vdmVcIixcbiAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICB0YXJnZXQ6IFwic2VsZWN0aW9uXCIsXG4gICAgICAgICAgaGFuZGxlLFxuICAgICAgICAgIC4uLmdldFBvaW50ZXJJbmZvKGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgb25Qb2ludGVyVXAgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICBuYW1lOiBcInBvaW50ZXJfdXBcIixcbiAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICB0YXJnZXQ6IFwic2VsZWN0aW9uXCIsXG4gICAgICAgICAgaGFuZGxlLFxuICAgICAgICAgIC4uLmdldFBvaW50ZXJJbmZvKGUpXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9uUG9pbnRlckRvd24sXG4gICAgICAgIG9uUG9pbnRlck1vdmUsXG4gICAgICAgIG9uUG9pbnRlclVwXG4gICAgICB9O1xuICAgIH0sXG4gICAgW2VkaXRvciwgaGFuZGxlXVxuICApO1xuICByZXR1cm4gZXZlbnRzO1xufVxuZXhwb3J0IHtcbiAgdXNlU2VsZWN0aW9uRXZlbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlU2VsZWN0aW9uRXZlbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTLSchemaFromUtils: () => (/* binding */ useTLSchemaFromUtils),\n/* harmony export */   useTLStore: () => (/* binding */ useTLStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/createTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\");\n\n\n\nfunction useTLStore(opts) {\n  const [current, setCurrent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => ({ store: (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLStore)(opts), opts }));\n  if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual)(current.opts, opts)) {\n    const next = { store: (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLStore)(opts), opts };\n    setCurrent(next);\n    return next.store;\n  }\n  return current.store;\n}\nfunction useTLSchemaFromUtils(opts) {\n  const [current, setCurrent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => ({ opts, schema: (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLSchemaFromUtils)(opts) }));\n  if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual)(current.opts, opts)) {\n    const next = (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createTLSchemaFromUtils)(opts);\n    setCurrent({ opts, schema: next });\n    return next;\n  }\n  return current.schema;\n}\n\n//# sourceMappingURL=useTLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRMU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ3RCO0FBSUk7QUFDckM7QUFDQSxnQ0FBZ0MsK0NBQVEsVUFBVSxPQUFPLHdFQUFhLGNBQWM7QUFDcEYsT0FBTyxxRUFBc0I7QUFDN0IsbUJBQW1CLE9BQU8sd0VBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFRLFVBQVUsY0FBYyxrRkFBdUIsUUFBUTtBQUMvRixPQUFPLHFFQUFzQjtBQUM3QixpQkFBaUIsa0ZBQXVCO0FBQ3hDLGlCQUFpQixvQkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRMU3RvcmUubWpzPzkyMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXJlT2JqZWN0c1NoYWxsb3dFcXVhbCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlVExTY2hlbWFGcm9tVXRpbHMsXG4gIGNyZWF0ZVRMU3RvcmVcbn0gZnJvbSBcIi4uL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qc1wiO1xuZnVuY3Rpb24gdXNlVExTdG9yZShvcHRzKSB7XG4gIGNvbnN0IFtjdXJyZW50LCBzZXRDdXJyZW50XSA9IHVzZVN0YXRlKCgpID0+ICh7IHN0b3JlOiBjcmVhdGVUTFN0b3JlKG9wdHMpLCBvcHRzIH0pKTtcbiAgaWYgKCFhcmVPYmplY3RzU2hhbGxvd0VxdWFsKGN1cnJlbnQub3B0cywgb3B0cykpIHtcbiAgICBjb25zdCBuZXh0ID0geyBzdG9yZTogY3JlYXRlVExTdG9yZShvcHRzKSwgb3B0cyB9O1xuICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgcmV0dXJuIG5leHQuc3RvcmU7XG4gIH1cbiAgcmV0dXJuIGN1cnJlbnQuc3RvcmU7XG59XG5mdW5jdGlvbiB1c2VUTFNjaGVtYUZyb21VdGlscyhvcHRzKSB7XG4gIGNvbnN0IFtjdXJyZW50LCBzZXRDdXJyZW50XSA9IHVzZVN0YXRlKCgpID0+ICh7IG9wdHMsIHNjaGVtYTogY3JlYXRlVExTY2hlbWFGcm9tVXRpbHMob3B0cykgfSkpO1xuICBpZiAoIWFyZU9iamVjdHNTaGFsbG93RXF1YWwoY3VycmVudC5vcHRzLCBvcHRzKSkge1xuICAgIGNvbnN0IG5leHQgPSBjcmVhdGVUTFNjaGVtYUZyb21VdGlscyhvcHRzKTtcbiAgICBzZXRDdXJyZW50KHsgb3B0cywgc2NoZW1hOiBuZXh0IH0pO1xuICAgIHJldHVybiBuZXh0O1xuICB9XG4gIHJldHVybiBjdXJyZW50LnNjaGVtYTtcbn1cbmV4cG9ydCB7XG4gIHVzZVRMU2NoZW1hRnJvbVV0aWxzLFxuICB1c2VUTFN0b3JlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlVExTdG9yZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTransform: () => (/* binding */ useTransform)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useTransform(ref, x, y, scale, rotate, additionalOffset) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    const elm = ref.current;\n    if (!elm) return;\n    if (x === void 0) return;\n    let trans = `translate(${x}px, ${y}px)`;\n    if (scale !== void 0) {\n      trans += ` scale(${scale})`;\n    }\n    if (rotate !== void 0) {\n      trans += ` rotate(${rotate}rad)`;\n    }\n    if (additionalOffset) {\n      trans += ` translate(${additionalOffset.x}px, ${additionalOffset.y}px)`;\n    }\n    elm.style.transform = trans;\n  });\n}\n\n//# sourceMappingURL=useTransform.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRyYW5zZm9ybS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7QUFDQSxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixFQUFFLE1BQU0sRUFBRTtBQUN2QztBQUNBLHlCQUF5QixNQUFNO0FBQy9CO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0EsNkJBQTZCLG1CQUFtQixNQUFNLG1CQUFtQjtBQUN6RTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VUcmFuc2Zvcm0ubWpzPzgyMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUcmFuc2Zvcm0ocmVmLCB4LCB5LCBzY2FsZSwgcm90YXRlLCBhZGRpdGlvbmFsT2Zmc2V0KSB7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbG0pIHJldHVybjtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKSByZXR1cm47XG4gICAgbGV0IHRyYW5zID0gYHRyYW5zbGF0ZSgke3h9cHgsICR7eX1weClgO1xuICAgIGlmIChzY2FsZSAhPT0gdm9pZCAwKSB7XG4gICAgICB0cmFucyArPSBgIHNjYWxlKCR7c2NhbGV9KWA7XG4gICAgfVxuICAgIGlmIChyb3RhdGUgIT09IHZvaWQgMCkge1xuICAgICAgdHJhbnMgKz0gYCByb3RhdGUoJHtyb3RhdGV9cmFkKWA7XG4gICAgfVxuICAgIGlmIChhZGRpdGlvbmFsT2Zmc2V0KSB7XG4gICAgICB0cmFucyArPSBgIHRyYW5zbGF0ZSgke2FkZGl0aW9uYWxPZmZzZXQueH1weCwgJHthZGRpdGlvbmFsT2Zmc2V0Lnl9cHgpYDtcbiAgICB9XG4gICAgZWxtLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zO1xuICB9KTtcbn1cbmV4cG9ydCB7XG4gIHVzZVRyYW5zZm9ybVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVRyYW5zZm9ybS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useZoomCss: () => (/* binding */ useZoomCss)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useZoomCss() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__.useContainer)();\n  react__WEBPACK_IMPORTED_MODULE_2__.useEffect(() => {\n    const setScale = (s) => container.style.setProperty(\"--tl-zoom\", s.toString());\n    const setScaleDebounced = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.debounce)(setScale, 100);\n    const scheduler = new _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler(\"useZoomCss\", () => {\n      const numShapes = editor.getCurrentPageShapeIds().size;\n      if (numShapes < 300) {\n        setScale(editor.getZoomLevel());\n      } else {\n        setScaleDebounced(editor.getZoomLevel());\n      }\n    });\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n      setScaleDebounced.cancel();\n    };\n  }, [editor, container]);\n}\n\n//# sourceMappingURL=useZoomCss.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVpvb21Dc3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnRDtBQUNQO0FBQ1Y7QUFDbUI7QUFDTjtBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQixvQkFBb0IsK0RBQVk7QUFDaEMsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBLDhCQUE4Qix1REFBUTtBQUN0QywwQkFBMEIsMERBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2Vab29tQ3NzLm1qcz84NTk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVmZmVjdFNjaGVkdWxlciB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNvbnRhaW5lciB9IGZyb20gXCIuL3VzZUNvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZVpvb21Dc3MoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzZXRTY2FsZSA9IChzKSA9PiBjb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLXRsLXpvb21cIiwgcy50b1N0cmluZygpKTtcbiAgICBjb25zdCBzZXRTY2FsZURlYm91bmNlZCA9IGRlYm91bmNlKHNldFNjYWxlLCAxMDApO1xuICAgIGNvbnN0IHNjaGVkdWxlciA9IG5ldyBFZmZlY3RTY2hlZHVsZXIoXCJ1c2Vab29tQ3NzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG51bVNoYXBlcyA9IGVkaXRvci5nZXRDdXJyZW50UGFnZVNoYXBlSWRzKCkuc2l6ZTtcbiAgICAgIGlmIChudW1TaGFwZXMgPCAzMDApIHtcbiAgICAgICAgc2V0U2NhbGUoZWRpdG9yLmdldFpvb21MZXZlbCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNjYWxlRGVib3VuY2VkKGVkaXRvci5nZXRab29tTGV2ZWwoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2NoZWR1bGVyLmF0dGFjaCgpO1xuICAgIHNjaGVkdWxlci5leGVjdXRlKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNjaGVkdWxlci5kZXRhY2goKTtcbiAgICAgIHNldFNjYWxlRGVib3VuY2VkLmNhbmNlbCgpO1xuICAgIH07XG4gIH0sIFtlZGl0b3IsIGNvbnRhaW5lcl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlWm9vbUNzc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVpvb21Dc3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FLAGS: () => (/* binding */ FLAGS),\n/* harmony export */   LicenseManager: () => (/* binding */ LicenseManager),\n/* harmony export */   PROPERTIES: () => (/* binding */ PROPERTIES),\n/* harmony export */   isEditorUnlicensed: () => (/* binding */ isEditorUnlicensed)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _version_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../version.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/version.mjs\");\n/* harmony import */ var _utils_assets_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/assets.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\");\n/* harmony import */ var _utils_licensing_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/licensing.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/licensing.mjs\");\n\n\n\n\n\nconst GRACE_PERIOD_DAYS = 5;\nconst FLAGS = {\n  ANNUAL_LICENSE: 1,\n  PERPETUAL_LICENSE: 2,\n  INTERNAL_LICENSE: 4,\n  WITH_WATERMARK: 8\n};\nconst HIGHEST_FLAG = Math.max(...Object.values(FLAGS));\nconst PROPERTIES = {\n  ID: 0,\n  HOSTS: 1,\n  FLAGS: 2,\n  EXPIRY_DATE: 3\n};\nconst NUMBER_OF_KNOWN_PROPERTIES = Object.keys(PROPERTIES).length;\nconst LICENSE_EMAIL = \"sales@tldraw.com\";\nconst WATERMARK_TRACK_SRC = `${(0,_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_3__.getDefaultCdnBaseUrl)()}/watermarks/watermark-track.svg`;\nclass LicenseManager {\n  publicKey = \"MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ\";\n  isDevelopment;\n  isTest;\n  isCryptoAvailable;\n  state = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    \"license state\",\n    \"pending\"\n  );\n  verbose = true;\n  constructor(licenseKey, testPublicKey, testEnvironment) {\n    this.isTest = \"development\" === \"test\";\n    this.isDevelopment = this.getIsDevelopment(testEnvironment);\n    this.publicKey = testPublicKey || this.publicKey;\n    this.isCryptoAvailable = !!crypto.subtle;\n    this.getLicenseFromKey(licenseKey).then((result) => {\n      const isUnlicensed = isEditorUnlicensed(result);\n      if (!this.isDevelopment && isUnlicensed) {\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.fetch)(WATERMARK_TRACK_SRC);\n      }\n      if (isUnlicensed) {\n        this.state.set(\"unlicensed\");\n      } else if (result.isLicensedWithWatermark) {\n        this.state.set(\"licensed-with-watermark\");\n      } else {\n        this.state.set(\"licensed\");\n      }\n    });\n  }\n  getIsDevelopment(testEnvironment) {\n    if (testEnvironment === \"development\") return true;\n    if (testEnvironment === \"production\") return false;\n    return window.location.protocol !== \"https:\";\n  }\n  async extractLicenseKey(licenseKey) {\n    const [data, signature] = licenseKey.split(\".\");\n    const [prefix, encodedData] = data.split(\"/\");\n    if (!prefix.startsWith(\"tldraw-\")) {\n      throw new Error(`Unsupported prefix '${prefix}'`);\n    }\n    const publicCryptoKey = await (0,_utils_licensing_mjs__WEBPACK_IMPORTED_MODULE_4__.importPublicKey)(this.publicKey);\n    let isVerified;\n    try {\n      isVerified = await crypto.subtle.verify(\n        {\n          name: \"ECDSA\",\n          hash: { name: \"SHA-256\" }\n        },\n        publicCryptoKey,\n        new Uint8Array((0,_utils_licensing_mjs__WEBPACK_IMPORTED_MODULE_4__.str2ab)(atob(signature))),\n        new Uint8Array((0,_utils_licensing_mjs__WEBPACK_IMPORTED_MODULE_4__.str2ab)(atob(encodedData)))\n      );\n    } catch (e) {\n      console.error(e);\n      throw new Error(\"Could not perform signature validation\");\n    }\n    if (!isVerified) {\n      throw new Error(\"Invalid signature\");\n    }\n    let decodedData;\n    try {\n      decodedData = JSON.parse(atob(encodedData));\n    } catch (e) {\n      throw new Error(\"Could not parse object\");\n    }\n    if (decodedData.length > NUMBER_OF_KNOWN_PROPERTIES) {\n      this.outputMessages([\n        \"License key contains some unknown properties.\",\n        \"You may want to update tldraw packages to a newer version to get access to new functionality.\"\n      ]);\n    }\n    return {\n      id: decodedData[PROPERTIES.ID],\n      hosts: decodedData[PROPERTIES.HOSTS],\n      flags: decodedData[PROPERTIES.FLAGS],\n      expiryDate: decodedData[PROPERTIES.EXPIRY_DATE]\n    };\n  }\n  async getLicenseFromKey(licenseKey) {\n    if (!licenseKey) {\n      if (!this.isDevelopment) {\n        this.outputNoLicenseKeyProvided();\n      }\n      return { isLicenseParseable: false, reason: \"no-key-provided\" };\n    }\n    if (this.isDevelopment && !this.isCryptoAvailable) {\n      if (this.verbose) {\n        console.log(\n          \"tldraw: you seem to be in a development environment that does not support crypto. License not verified.\"\n        );\n        console.log(\"You should check that this works in production separately.\");\n      }\n      return { isLicenseParseable: false, reason: \"has-key-development-mode\" };\n    }\n    let cleanedLicenseKey = licenseKey.replace(/[\\u200B-\\u200D\\uFEFF]/g, \"\");\n    cleanedLicenseKey = cleanedLicenseKey.replace(/\\r?\\n|\\r/g, \"\");\n    try {\n      const licenseInfo = await this.extractLicenseKey(cleanedLicenseKey);\n      const expiryDate = new Date(licenseInfo.expiryDate);\n      const isAnnualLicense = this.isFlagEnabled(licenseInfo.flags, FLAGS.ANNUAL_LICENSE);\n      const isPerpetualLicense = this.isFlagEnabled(licenseInfo.flags, FLAGS.PERPETUAL_LICENSE);\n      const result = {\n        license: licenseInfo,\n        isLicenseParseable: true,\n        isDevelopment: this.isDevelopment,\n        isDomainValid: this.isDomainValid(licenseInfo),\n        expiryDate,\n        isAnnualLicense,\n        isAnnualLicenseExpired: isAnnualLicense && this.isAnnualLicenseExpired(expiryDate),\n        isPerpetualLicense,\n        isPerpetualLicenseExpired: isPerpetualLicense && this.isPerpetualLicenseExpired(expiryDate),\n        isInternalLicense: this.isFlagEnabled(licenseInfo.flags, FLAGS.INTERNAL_LICENSE),\n        isLicensedWithWatermark: this.isFlagEnabled(licenseInfo.flags, FLAGS.WITH_WATERMARK)\n      };\n      this.outputLicenseInfoIfNeeded(result);\n      return result;\n    } catch (e) {\n      this.outputInvalidLicenseKey(e.message);\n      return { isLicenseParseable: false, reason: \"invalid-license-key\" };\n    }\n  }\n  isDomainValid(licenseInfo) {\n    const currentHostname = window.location.hostname.toLowerCase();\n    return licenseInfo.hosts.some((host) => {\n      const normalizedHost = host.toLowerCase().trim();\n      if (normalizedHost === currentHostname || `www.${normalizedHost}` === currentHostname || normalizedHost === `www.${currentHostname}`) {\n        return true;\n      }\n      if (host === \"*\") {\n        return true;\n      }\n      if (host.includes(\"*\")) {\n        const globToRegex = new RegExp(host.replace(/\\*/g, \".*?\"));\n        return globToRegex.test(currentHostname) || globToRegex.test(`www.${currentHostname}`);\n      }\n      return false;\n    });\n  }\n  getExpirationDateWithoutGracePeriod(expiryDate) {\n    return new Date(expiryDate.getFullYear(), expiryDate.getMonth(), expiryDate.getDate());\n  }\n  getExpirationDateWithGracePeriod(expiryDate) {\n    return new Date(\n      expiryDate.getFullYear(),\n      expiryDate.getMonth(),\n      expiryDate.getDate() + GRACE_PERIOD_DAYS + 1\n      // Add 1 day to include the expiration day\n    );\n  }\n  isAnnualLicenseExpired(expiryDate) {\n    const expiration = this.getExpirationDateWithGracePeriod(expiryDate);\n    const isExpired = /* @__PURE__ */ new Date() >= expiration;\n    if (!isExpired && /* @__PURE__ */ new Date() >= this.getExpirationDateWithoutGracePeriod(expiryDate)) {\n      this.outputMessages([\n        \"tldraw license is about to expire, you are in a grace period.\",\n        `Please reach out to ${LICENSE_EMAIL} if you would like to renew your license.`\n      ]);\n    }\n    return isExpired;\n  }\n  isPerpetualLicenseExpired(expiryDate) {\n    const expiration = this.getExpirationDateWithGracePeriod(expiryDate);\n    const dates = {\n      major: new Date(_version_mjs__WEBPACK_IMPORTED_MODULE_2__.publishDates.major),\n      minor: new Date(_version_mjs__WEBPACK_IMPORTED_MODULE_2__.publishDates.minor)\n    };\n    return dates.major >= expiration || dates.minor >= expiration;\n  }\n  isFlagEnabled(flags, flag) {\n    return (flags & flag) === flag;\n  }\n  outputNoLicenseKeyProvided() {\n  }\n  outputInvalidLicenseKey(msg) {\n    this.outputMessages([\"Invalid tldraw license key\", `Reason: ${msg}`]);\n  }\n  outputLicenseInfoIfNeeded(result) {\n    if (result.isAnnualLicenseExpired) {\n      this.outputMessages([\n        \"Your tldraw license has expired!\",\n        `Please reach out to ${LICENSE_EMAIL} to renew.`\n      ]);\n    }\n    if (!result.isDomainValid && !result.isDevelopment) {\n      this.outputMessages([\n        \"This tldraw license key is not valid for this domain!\",\n        `Please reach out to ${LICENSE_EMAIL} if you would like to use tldraw on other domains.`\n      ]);\n    }\n    if (result.license.flags >= HIGHEST_FLAG * 2) {\n      this.outputMessages([\n        \"This tldraw license contains some unknown flags.\",\n        \"You may want to update tldraw packages to a newer version to get access to new functionality.\"\n      ]);\n    }\n  }\n  outputMessages(messages) {\n    if (this.isTest) return;\n    if (this.verbose) {\n      this.outputDelimiter();\n      for (const message of messages) {\n        console.log(\n          `%c${message}`,\n          `color: white; background: crimson; padding: 2px; border-radius: 3px;`\n        );\n      }\n      this.outputDelimiter();\n    }\n  }\n  outputDelimiter() {\n    console.log(\n      \"%c-------------------------------------------------------------------\",\n      `color: white; background: crimson; padding: 2px; border-radius: 3px;`\n    );\n  }\n  static className = \"tl-watermark_SEE-LICENSE\";\n}\nfunction isEditorUnlicensed(result) {\n  if (!result.isLicenseParseable) return true;\n  if (!result.isDomainValid && !result.isDevelopment) return true;\n  if (result.isPerpetualLicenseExpired || result.isAnnualLicenseExpired) {\n    if (result.isInternalLicense) {\n      throw new Error(\"License: Internal license expired.\");\n    }\n    return true;\n  }\n  return false;\n}\n\n//# sourceMappingURL=LicenseManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2xpY2Vuc2UvTGljZW5zZU1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxQztBQUNDO0FBQ1c7QUFDVTtBQUNNO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVFQUFvQixHQUFHO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1EQUFJO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9EQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsT0FBTztBQUNwRDtBQUNBLGtDQUFrQyxxRUFBZTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFNBQVM7QUFDVDtBQUNBLHVCQUF1Qiw0REFBTTtBQUM3Qix1QkFBdUIsNERBQU07QUFDN0I7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxlQUFlLG1EQUFtRCxnQkFBZ0I7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsZ0JBQWdCO0FBQzVGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGVBQWU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQVk7QUFDbEMsc0JBQXNCLHNEQUFZO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxJQUFJO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZUFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGVBQWU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLHlCQUF5QixxQkFBcUIsY0FBYyxtQkFBbUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxQkFBcUIsY0FBYyxtQkFBbUI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9saWNlbnNlL0xpY2Vuc2VNYW5hZ2VyLm1qcz9hMWVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20gfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgcHVibGlzaERhdGVzIH0gZnJvbSBcIi4uLy4uL3ZlcnNpb24ubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0Q2RuQmFzZVVybCB9IGZyb20gXCIuLi91dGlscy9hc3NldHMubWpzXCI7XG5pbXBvcnQgeyBpbXBvcnRQdWJsaWNLZXksIHN0cjJhYiB9IGZyb20gXCIuLi91dGlscy9saWNlbnNpbmcubWpzXCI7XG5jb25zdCBHUkFDRV9QRVJJT0RfREFZUyA9IDU7XG5jb25zdCBGTEFHUyA9IHtcbiAgQU5OVUFMX0xJQ0VOU0U6IDEsXG4gIFBFUlBFVFVBTF9MSUNFTlNFOiAyLFxuICBJTlRFUk5BTF9MSUNFTlNFOiA0LFxuICBXSVRIX1dBVEVSTUFSSzogOFxufTtcbmNvbnN0IEhJR0hFU1RfRkxBRyA9IE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMoRkxBR1MpKTtcbmNvbnN0IFBST1BFUlRJRVMgPSB7XG4gIElEOiAwLFxuICBIT1NUUzogMSxcbiAgRkxBR1M6IDIsXG4gIEVYUElSWV9EQVRFOiAzXG59O1xuY29uc3QgTlVNQkVSX09GX0tOT1dOX1BST1BFUlRJRVMgPSBPYmplY3Qua2V5cyhQUk9QRVJUSUVTKS5sZW5ndGg7XG5jb25zdCBMSUNFTlNFX0VNQUlMID0gXCJzYWxlc0B0bGRyYXcuY29tXCI7XG5jb25zdCBXQVRFUk1BUktfVFJBQ0tfU1JDID0gYCR7Z2V0RGVmYXVsdENkbkJhc2VVcmwoKX0vd2F0ZXJtYXJrcy93YXRlcm1hcmstdHJhY2suc3ZnYDtcbmNsYXNzIExpY2Vuc2VNYW5hZ2VyIHtcbiAgcHVibGljS2V5ID0gXCJNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUVISmgwdVVmeEh0Q0d5ZXJYbW1hdEUzNjhIZDlySTZMSDlvUERRaWhuYUNyeVJGV0VWZU92ZjlVL1NQYnl4WDc0TEZ5SnM1dFllQUhxNU5jMEF4MjVMUVwiO1xuICBpc0RldmVsb3BtZW50O1xuICBpc1Rlc3Q7XG4gIGlzQ3J5cHRvQXZhaWxhYmxlO1xuICBzdGF0ZSA9IGF0b20oXG4gICAgXCJsaWNlbnNlIHN0YXRlXCIsXG4gICAgXCJwZW5kaW5nXCJcbiAgKTtcbiAgdmVyYm9zZSA9IHRydWU7XG4gIGNvbnN0cnVjdG9yKGxpY2Vuc2VLZXksIHRlc3RQdWJsaWNLZXksIHRlc3RFbnZpcm9ubWVudCkge1xuICAgIHRoaXMuaXNUZXN0ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiO1xuICAgIHRoaXMuaXNEZXZlbG9wbWVudCA9IHRoaXMuZ2V0SXNEZXZlbG9wbWVudCh0ZXN0RW52aXJvbm1lbnQpO1xuICAgIHRoaXMucHVibGljS2V5ID0gdGVzdFB1YmxpY0tleSB8fCB0aGlzLnB1YmxpY0tleTtcbiAgICB0aGlzLmlzQ3J5cHRvQXZhaWxhYmxlID0gISFjcnlwdG8uc3VidGxlO1xuICAgIHRoaXMuZ2V0TGljZW5zZUZyb21LZXkobGljZW5zZUtleSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBjb25zdCBpc1VubGljZW5zZWQgPSBpc0VkaXRvclVubGljZW5zZWQocmVzdWx0KTtcbiAgICAgIGlmICghdGhpcy5pc0RldmVsb3BtZW50ICYmIGlzVW5saWNlbnNlZCkge1xuICAgICAgICBmZXRjaChXQVRFUk1BUktfVFJBQ0tfU1JDKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1VubGljZW5zZWQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQoXCJ1bmxpY2Vuc2VkXCIpO1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuaXNMaWNlbnNlZFdpdGhXYXRlcm1hcmspIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQoXCJsaWNlbnNlZC13aXRoLXdhdGVybWFya1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0KFwibGljZW5zZWRcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZ2V0SXNEZXZlbG9wbWVudCh0ZXN0RW52aXJvbm1lbnQpIHtcbiAgICBpZiAodGVzdEVudmlyb25tZW50ID09PSBcImRldmVsb3BtZW50XCIpIHJldHVybiB0cnVlO1xuICAgIGlmICh0ZXN0RW52aXJvbm1lbnQgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAhPT0gXCJodHRwczpcIjtcbiAgfVxuICBhc3luYyBleHRyYWN0TGljZW5zZUtleShsaWNlbnNlS2V5KSB7XG4gICAgY29uc3QgW2RhdGEsIHNpZ25hdHVyZV0gPSBsaWNlbnNlS2V5LnNwbGl0KFwiLlwiKTtcbiAgICBjb25zdCBbcHJlZml4LCBlbmNvZGVkRGF0YV0gPSBkYXRhLnNwbGl0KFwiL1wiKTtcbiAgICBpZiAoIXByZWZpeC5zdGFydHNXaXRoKFwidGxkcmF3LVwiKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBwcmVmaXggJyR7cHJlZml4fSdgKTtcbiAgICB9XG4gICAgY29uc3QgcHVibGljQ3J5cHRvS2V5ID0gYXdhaXQgaW1wb3J0UHVibGljS2V5KHRoaXMucHVibGljS2V5KTtcbiAgICBsZXQgaXNWZXJpZmllZDtcbiAgICB0cnkge1xuICAgICAgaXNWZXJpZmllZCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUudmVyaWZ5KFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJFQ0RTQVwiLFxuICAgICAgICAgIGhhc2g6IHsgbmFtZTogXCJTSEEtMjU2XCIgfVxuICAgICAgICB9LFxuICAgICAgICBwdWJsaWNDcnlwdG9LZXksXG4gICAgICAgIG5ldyBVaW50OEFycmF5KHN0cjJhYihhdG9iKHNpZ25hdHVyZSkpKSxcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoc3RyMmFiKGF0b2IoZW5jb2RlZERhdGEpKSlcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwZXJmb3JtIHNpZ25hdHVyZSB2YWxpZGF0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAoIWlzVmVyaWZpZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuICAgIH1cbiAgICBsZXQgZGVjb2RlZERhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGRlY29kZWREYXRhID0gSlNPTi5wYXJzZShhdG9iKGVuY29kZWREYXRhKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHBhcnNlIG9iamVjdFwiKTtcbiAgICB9XG4gICAgaWYgKGRlY29kZWREYXRhLmxlbmd0aCA+IE5VTUJFUl9PRl9LTk9XTl9QUk9QRVJUSUVTKSB7XG4gICAgICB0aGlzLm91dHB1dE1lc3NhZ2VzKFtcbiAgICAgICAgXCJMaWNlbnNlIGtleSBjb250YWlucyBzb21lIHVua25vd24gcHJvcGVydGllcy5cIixcbiAgICAgICAgXCJZb3UgbWF5IHdhbnQgdG8gdXBkYXRlIHRsZHJhdyBwYWNrYWdlcyB0byBhIG5ld2VyIHZlcnNpb24gdG8gZ2V0IGFjY2VzcyB0byBuZXcgZnVuY3Rpb25hbGl0eS5cIlxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBpZDogZGVjb2RlZERhdGFbUFJPUEVSVElFUy5JRF0sXG4gICAgICBob3N0czogZGVjb2RlZERhdGFbUFJPUEVSVElFUy5IT1NUU10sXG4gICAgICBmbGFnczogZGVjb2RlZERhdGFbUFJPUEVSVElFUy5GTEFHU10sXG4gICAgICBleHBpcnlEYXRlOiBkZWNvZGVkRGF0YVtQUk9QRVJUSUVTLkVYUElSWV9EQVRFXVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZ2V0TGljZW5zZUZyb21LZXkobGljZW5zZUtleSkge1xuICAgIGlmICghbGljZW5zZUtleSkge1xuICAgICAgaWYgKCF0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgdGhpcy5vdXRwdXROb0xpY2Vuc2VLZXlQcm92aWRlZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaXNMaWNlbnNlUGFyc2VhYmxlOiBmYWxzZSwgcmVhc29uOiBcIm5vLWtleS1wcm92aWRlZFwiIH07XG4gICAgfVxuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQgJiYgIXRoaXMuaXNDcnlwdG9BdmFpbGFibGUpIHtcbiAgICAgIGlmICh0aGlzLnZlcmJvc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJ0bGRyYXc6IHlvdSBzZWVtIHRvIGJlIGluIGEgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IGNyeXB0by4gTGljZW5zZSBub3QgdmVyaWZpZWQuXCJcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJZb3Ugc2hvdWxkIGNoZWNrIHRoYXQgdGhpcyB3b3JrcyBpbiBwcm9kdWN0aW9uIHNlcGFyYXRlbHkuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgaXNMaWNlbnNlUGFyc2VhYmxlOiBmYWxzZSwgcmVhc29uOiBcImhhcy1rZXktZGV2ZWxvcG1lbnQtbW9kZVwiIH07XG4gICAgfVxuICAgIGxldCBjbGVhbmVkTGljZW5zZUtleSA9IGxpY2Vuc2VLZXkucmVwbGFjZSgvW1xcdTIwMEItXFx1MjAwRFxcdUZFRkZdL2csIFwiXCIpO1xuICAgIGNsZWFuZWRMaWNlbnNlS2V5ID0gY2xlYW5lZExpY2Vuc2VLZXkucmVwbGFjZSgvXFxyP1xcbnxcXHIvZywgXCJcIik7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxpY2Vuc2VJbmZvID0gYXdhaXQgdGhpcy5leHRyYWN0TGljZW5zZUtleShjbGVhbmVkTGljZW5zZUtleSk7XG4gICAgICBjb25zdCBleHBpcnlEYXRlID0gbmV3IERhdGUobGljZW5zZUluZm8uZXhwaXJ5RGF0ZSk7XG4gICAgICBjb25zdCBpc0FubnVhbExpY2Vuc2UgPSB0aGlzLmlzRmxhZ0VuYWJsZWQobGljZW5zZUluZm8uZmxhZ3MsIEZMQUdTLkFOTlVBTF9MSUNFTlNFKTtcbiAgICAgIGNvbnN0IGlzUGVycGV0dWFsTGljZW5zZSA9IHRoaXMuaXNGbGFnRW5hYmxlZChsaWNlbnNlSW5mby5mbGFncywgRkxBR1MuUEVSUEVUVUFMX0xJQ0VOU0UpO1xuICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBsaWNlbnNlOiBsaWNlbnNlSW5mbyxcbiAgICAgICAgaXNMaWNlbnNlUGFyc2VhYmxlOiB0cnVlLFxuICAgICAgICBpc0RldmVsb3BtZW50OiB0aGlzLmlzRGV2ZWxvcG1lbnQsXG4gICAgICAgIGlzRG9tYWluVmFsaWQ6IHRoaXMuaXNEb21haW5WYWxpZChsaWNlbnNlSW5mbyksXG4gICAgICAgIGV4cGlyeURhdGUsXG4gICAgICAgIGlzQW5udWFsTGljZW5zZSxcbiAgICAgICAgaXNBbm51YWxMaWNlbnNlRXhwaXJlZDogaXNBbm51YWxMaWNlbnNlICYmIHRoaXMuaXNBbm51YWxMaWNlbnNlRXhwaXJlZChleHBpcnlEYXRlKSxcbiAgICAgICAgaXNQZXJwZXR1YWxMaWNlbnNlLFxuICAgICAgICBpc1BlcnBldHVhbExpY2Vuc2VFeHBpcmVkOiBpc1BlcnBldHVhbExpY2Vuc2UgJiYgdGhpcy5pc1BlcnBldHVhbExpY2Vuc2VFeHBpcmVkKGV4cGlyeURhdGUpLFxuICAgICAgICBpc0ludGVybmFsTGljZW5zZTogdGhpcy5pc0ZsYWdFbmFibGVkKGxpY2Vuc2VJbmZvLmZsYWdzLCBGTEFHUy5JTlRFUk5BTF9MSUNFTlNFKSxcbiAgICAgICAgaXNMaWNlbnNlZFdpdGhXYXRlcm1hcms6IHRoaXMuaXNGbGFnRW5hYmxlZChsaWNlbnNlSW5mby5mbGFncywgRkxBR1MuV0lUSF9XQVRFUk1BUkspXG4gICAgICB9O1xuICAgICAgdGhpcy5vdXRwdXRMaWNlbnNlSW5mb0lmTmVlZGVkKHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMub3V0cHV0SW52YWxpZExpY2Vuc2VLZXkoZS5tZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IGlzTGljZW5zZVBhcnNlYWJsZTogZmFsc2UsIHJlYXNvbjogXCJpbnZhbGlkLWxpY2Vuc2Uta2V5XCIgfTtcbiAgICB9XG4gIH1cbiAgaXNEb21haW5WYWxpZChsaWNlbnNlSW5mbykge1xuICAgIGNvbnN0IGN1cnJlbnRIb3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBsaWNlbnNlSW5mby5ob3N0cy5zb21lKChob3N0KSA9PiB7XG4gICAgICBjb25zdCBub3JtYWxpemVkSG9zdCA9IGhvc3QudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBpZiAobm9ybWFsaXplZEhvc3QgPT09IGN1cnJlbnRIb3N0bmFtZSB8fCBgd3d3LiR7bm9ybWFsaXplZEhvc3R9YCA9PT0gY3VycmVudEhvc3RuYW1lIHx8IG5vcm1hbGl6ZWRIb3N0ID09PSBgd3d3LiR7Y3VycmVudEhvc3RuYW1lfWApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaG9zdCA9PT0gXCIqXCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaG9zdC5pbmNsdWRlcyhcIipcIikpIHtcbiAgICAgICAgY29uc3QgZ2xvYlRvUmVnZXggPSBuZXcgUmVnRXhwKGhvc3QucmVwbGFjZSgvXFwqL2csIFwiLio/XCIpKTtcbiAgICAgICAgcmV0dXJuIGdsb2JUb1JlZ2V4LnRlc3QoY3VycmVudEhvc3RuYW1lKSB8fCBnbG9iVG9SZWdleC50ZXN0KGB3d3cuJHtjdXJyZW50SG9zdG5hbWV9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cbiAgZ2V0RXhwaXJhdGlvbkRhdGVXaXRob3V0R3JhY2VQZXJpb2QoZXhwaXJ5RGF0ZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShleHBpcnlEYXRlLmdldEZ1bGxZZWFyKCksIGV4cGlyeURhdGUuZ2V0TW9udGgoKSwgZXhwaXJ5RGF0ZS5nZXREYXRlKCkpO1xuICB9XG4gIGdldEV4cGlyYXRpb25EYXRlV2l0aEdyYWNlUGVyaW9kKGV4cGlyeURhdGUpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoXG4gICAgICBleHBpcnlEYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBleHBpcnlEYXRlLmdldE1vbnRoKCksXG4gICAgICBleHBpcnlEYXRlLmdldERhdGUoKSArIEdSQUNFX1BFUklPRF9EQVlTICsgMVxuICAgICAgLy8gQWRkIDEgZGF5IHRvIGluY2x1ZGUgdGhlIGV4cGlyYXRpb24gZGF5XG4gICAgKTtcbiAgfVxuICBpc0FubnVhbExpY2Vuc2VFeHBpcmVkKGV4cGlyeURhdGUpIHtcbiAgICBjb25zdCBleHBpcmF0aW9uID0gdGhpcy5nZXRFeHBpcmF0aW9uRGF0ZVdpdGhHcmFjZVBlcmlvZChleHBpcnlEYXRlKTtcbiAgICBjb25zdCBpc0V4cGlyZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSA+PSBleHBpcmF0aW9uO1xuICAgIGlmICghaXNFeHBpcmVkICYmIC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpID49IHRoaXMuZ2V0RXhwaXJhdGlvbkRhdGVXaXRob3V0R3JhY2VQZXJpb2QoZXhwaXJ5RGF0ZSkpIHtcbiAgICAgIHRoaXMub3V0cHV0TWVzc2FnZXMoW1xuICAgICAgICBcInRsZHJhdyBsaWNlbnNlIGlzIGFib3V0IHRvIGV4cGlyZSwgeW91IGFyZSBpbiBhIGdyYWNlIHBlcmlvZC5cIixcbiAgICAgICAgYFBsZWFzZSByZWFjaCBvdXQgdG8gJHtMSUNFTlNFX0VNQUlMfSBpZiB5b3Ugd291bGQgbGlrZSB0byByZW5ldyB5b3VyIGxpY2Vuc2UuYFxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiBpc0V4cGlyZWQ7XG4gIH1cbiAgaXNQZXJwZXR1YWxMaWNlbnNlRXhwaXJlZChleHBpcnlEYXRlKSB7XG4gICAgY29uc3QgZXhwaXJhdGlvbiA9IHRoaXMuZ2V0RXhwaXJhdGlvbkRhdGVXaXRoR3JhY2VQZXJpb2QoZXhwaXJ5RGF0ZSk7XG4gICAgY29uc3QgZGF0ZXMgPSB7XG4gICAgICBtYWpvcjogbmV3IERhdGUocHVibGlzaERhdGVzLm1ham9yKSxcbiAgICAgIG1pbm9yOiBuZXcgRGF0ZShwdWJsaXNoRGF0ZXMubWlub3IpXG4gICAgfTtcbiAgICByZXR1cm4gZGF0ZXMubWFqb3IgPj0gZXhwaXJhdGlvbiB8fCBkYXRlcy5taW5vciA+PSBleHBpcmF0aW9uO1xuICB9XG4gIGlzRmxhZ0VuYWJsZWQoZmxhZ3MsIGZsYWcpIHtcbiAgICByZXR1cm4gKGZsYWdzICYgZmxhZykgPT09IGZsYWc7XG4gIH1cbiAgb3V0cHV0Tm9MaWNlbnNlS2V5UHJvdmlkZWQoKSB7XG4gIH1cbiAgb3V0cHV0SW52YWxpZExpY2Vuc2VLZXkobXNnKSB7XG4gICAgdGhpcy5vdXRwdXRNZXNzYWdlcyhbXCJJbnZhbGlkIHRsZHJhdyBsaWNlbnNlIGtleVwiLCBgUmVhc29uOiAke21zZ31gXSk7XG4gIH1cbiAgb3V0cHV0TGljZW5zZUluZm9JZk5lZWRlZChyZXN1bHQpIHtcbiAgICBpZiAocmVzdWx0LmlzQW5udWFsTGljZW5zZUV4cGlyZWQpIHtcbiAgICAgIHRoaXMub3V0cHV0TWVzc2FnZXMoW1xuICAgICAgICBcIllvdXIgdGxkcmF3IGxpY2Vuc2UgaGFzIGV4cGlyZWQhXCIsXG4gICAgICAgIGBQbGVhc2UgcmVhY2ggb3V0IHRvICR7TElDRU5TRV9FTUFJTH0gdG8gcmVuZXcuYFxuICAgICAgXSk7XG4gICAgfVxuICAgIGlmICghcmVzdWx0LmlzRG9tYWluVmFsaWQgJiYgIXJlc3VsdC5pc0RldmVsb3BtZW50KSB7XG4gICAgICB0aGlzLm91dHB1dE1lc3NhZ2VzKFtcbiAgICAgICAgXCJUaGlzIHRsZHJhdyBsaWNlbnNlIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoaXMgZG9tYWluIVwiLFxuICAgICAgICBgUGxlYXNlIHJlYWNoIG91dCB0byAke0xJQ0VOU0VfRU1BSUx9IGlmIHlvdSB3b3VsZCBsaWtlIHRvIHVzZSB0bGRyYXcgb24gb3RoZXIgZG9tYWlucy5gXG4gICAgICBdKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5saWNlbnNlLmZsYWdzID49IEhJR0hFU1RfRkxBRyAqIDIpIHtcbiAgICAgIHRoaXMub3V0cHV0TWVzc2FnZXMoW1xuICAgICAgICBcIlRoaXMgdGxkcmF3IGxpY2Vuc2UgY29udGFpbnMgc29tZSB1bmtub3duIGZsYWdzLlwiLFxuICAgICAgICBcIllvdSBtYXkgd2FudCB0byB1cGRhdGUgdGxkcmF3IHBhY2thZ2VzIHRvIGEgbmV3ZXIgdmVyc2lvbiB0byBnZXQgYWNjZXNzIHRvIG5ldyBmdW5jdGlvbmFsaXR5LlwiXG4gICAgICBdKTtcbiAgICB9XG4gIH1cbiAgb3V0cHV0TWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICBpZiAodGhpcy5pc1Rlc3QpIHJldHVybjtcbiAgICBpZiAodGhpcy52ZXJib3NlKSB7XG4gICAgICB0aGlzLm91dHB1dERlbGltaXRlcigpO1xuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGAlYyR7bWVzc2FnZX1gLFxuICAgICAgICAgIGBjb2xvcjogd2hpdGU7IGJhY2tncm91bmQ6IGNyaW1zb247IHBhZGRpbmc6IDJweDsgYm9yZGVyLXJhZGl1czogM3B4O2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3V0cHV0RGVsaW1pdGVyKCk7XG4gICAgfVxuICB9XG4gIG91dHB1dERlbGltaXRlcigpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiJWMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsXG4gICAgICBgY29sb3I6IHdoaXRlOyBiYWNrZ3JvdW5kOiBjcmltc29uOyBwYWRkaW5nOiAycHg7IGJvcmRlci1yYWRpdXM6IDNweDtgXG4gICAgKTtcbiAgfVxuICBzdGF0aWMgY2xhc3NOYW1lID0gXCJ0bC13YXRlcm1hcmtfU0VFLUxJQ0VOU0VcIjtcbn1cbmZ1bmN0aW9uIGlzRWRpdG9yVW5saWNlbnNlZChyZXN1bHQpIHtcbiAgaWYgKCFyZXN1bHQuaXNMaWNlbnNlUGFyc2VhYmxlKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKCFyZXN1bHQuaXNEb21haW5WYWxpZCAmJiAhcmVzdWx0LmlzRGV2ZWxvcG1lbnQpIHJldHVybiB0cnVlO1xuICBpZiAocmVzdWx0LmlzUGVycGV0dWFsTGljZW5zZUV4cGlyZWQgfHwgcmVzdWx0LmlzQW5udWFsTGljZW5zZUV4cGlyZWQpIHtcbiAgICBpZiAocmVzdWx0LmlzSW50ZXJuYWxMaWNlbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMaWNlbnNlOiBJbnRlcm5hbCBsaWNlbnNlIGV4cGlyZWQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1xuICBGTEFHUyxcbiAgTGljZW5zZU1hbmFnZXIsXG4gIFBST1BFUlRJRVMsXG4gIGlzRWRpdG9yVW5saWNlbnNlZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpY2Vuc2VNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseProvider.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseProvider.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LicenseContext: () => (/* binding */ LicenseContext),\n/* harmony export */   LicenseProvider: () => (/* binding */ LicenseProvider),\n/* harmony export */   useLicenseContext: () => (/* binding */ useLicenseContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LicenseManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs\");\n\n\n\nconst LicenseContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({});\nconst useLicenseContext = () => (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(LicenseContext);\nfunction LicenseProvider({\n  licenseKey,\n  children\n}) {\n  const [licenseManager] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => new _LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_2__.LicenseManager(licenseKey));\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LicenseContext.Provider, { value: licenseManager, children });\n}\n\n//# sourceMappingURL=LicenseProvider.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2xpY2Vuc2UvTGljZW5zZVByb3ZpZGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0M7QUFDb0I7QUFDTjtBQUN0RCx1QkFBdUIsb0RBQWEsR0FBRztBQUN2QyxnQ0FBZ0MsaURBQVU7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDJCQUEyQiwrQ0FBUSxXQUFXLCtEQUFjO0FBQzVELHlCQUF5QixzREFBRyw0QkFBNEIsaUNBQWlDO0FBQ3pGO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9saWNlbnNlL0xpY2Vuc2VQcm92aWRlci5tanM/Y2RiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMaWNlbnNlTWFuYWdlciB9IGZyb20gXCIuL0xpY2Vuc2VNYW5hZ2VyLm1qc1wiO1xuY29uc3QgTGljZW5zZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KHt9KTtcbmNvbnN0IHVzZUxpY2Vuc2VDb250ZXh0ID0gKCkgPT4gdXNlQ29udGV4dChMaWNlbnNlQ29udGV4dCk7XG5mdW5jdGlvbiBMaWNlbnNlUHJvdmlkZXIoe1xuICBsaWNlbnNlS2V5LFxuICBjaGlsZHJlblxufSkge1xuICBjb25zdCBbbGljZW5zZU1hbmFnZXJdID0gdXNlU3RhdGUoKCkgPT4gbmV3IExpY2Vuc2VNYW5hZ2VyKGxpY2Vuc2VLZXkpKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goTGljZW5zZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGxpY2Vuc2VNYW5hZ2VyLCBjaGlsZHJlbiB9KTtcbn1cbmV4cG9ydCB7XG4gIExpY2Vuc2VDb250ZXh0LFxuICBMaWNlbnNlUHJvdmlkZXIsXG4gIHVzZUxpY2Vuc2VDb250ZXh0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGljZW5zZVByb3ZpZGVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseProvider.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/Watermark.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/license/Watermark.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Watermark: () => (/* binding */ Watermark)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n/* harmony import */ var _hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useCanvasEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_usePassThroughWheelEvents_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/usePassThroughWheelEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePassThroughWheelEvents.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n/* harmony import */ var _watermarks_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../watermarks.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/watermarks.mjs\");\n/* harmony import */ var _LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./LicenseManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseManager.mjs\");\n/* harmony import */ var _LicenseProvider_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./LicenseProvider.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/LicenseProvider.mjs\");\n/* harmony import */ var _useLicenseManagerState_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./useLicenseManagerState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/useLicenseManagerState.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst WATERMARK_DESKTOP_LOCAL_SRC = `data:image/svg+xml;utf8,${encodeURIComponent(_watermarks_mjs__WEBPACK_IMPORTED_MODULE_9__.watermarkDesktopSvg)}`;\nconst WATERMARK_MOBILE_LOCAL_SRC = `data:image/svg+xml;utf8,${encodeURIComponent(_watermarks_mjs__WEBPACK_IMPORTED_MODULE_9__.watermarkMobileSvg)}`;\nconst Watermark = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function Watermark2() {\n  const licenseManager = (0,_LicenseProvider_mjs__WEBPACK_IMPORTED_MODULE_11__.useLicenseContext)();\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditor)();\n  const isMobile = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"is mobile\", () => editor.getViewportScreenBounds().width < 700, [\n    editor\n  ]);\n  const licenseManagerState = (0,_useLicenseManagerState_mjs__WEBPACK_IMPORTED_MODULE_12__.useLicenseManagerState)(licenseManager);\n  if (![\"licensed-with-watermark\", \"unlicensed\"].includes(licenseManagerState)) return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LicenseStyles, {}),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WatermarkInner, { src: isMobile ? WATERMARK_MOBILE_LOCAL_SRC : WATERMARK_DESKTOP_LOCAL_SRC })\n  ] });\n});\nconst WatermarkInner = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function WatermarkInner2({ src }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditor)();\n  const isDebugMode = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"debug mode\", () => editor.getInstanceState().isDebugMode, [editor]);\n  const isMenuOpen = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"is menu open\", () => editor.menus.hasAnyOpenMenus(), [editor]);\n  const isMobile = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"is mobile\", () => editor.getViewportScreenBounds().width < 700, [\n    editor\n  ]);\n  const events = (0,_hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.useCanvasEvents)();\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,_hooks_usePassThroughWheelEvents_mjs__WEBPACK_IMPORTED_MODULE_6__.usePassThroughWheelEvents)(ref);\n  const maskCss = `url('${src}') center 100% / 100% no-repeat`;\n  const url = \"https://tldraw.dev\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"div\",\n    {\n      ref,\n      className: _LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_10__.LicenseManager.className,\n      \"data-debug\": isDebugMode,\n      \"data-menu\": isMenuOpen,\n      \"data-mobile\": isMobile,\n      draggable: false,\n      ...events,\n      children: _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_3__.tlenv.isWebview ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"a\",\n        {\n          draggable: false,\n          role: \"button\",\n          onPointerDown: (e) => {\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_7__.stopEventPropagation)(e);\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_7__.preventDefault)(e);\n          },\n          onClick: () => _utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_8__.runtime.openWindow(url, \"_blank\"),\n          style: { mask: maskCss, WebkitMask: maskCss }\n        }\n      ) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"a\",\n        {\n          href: url,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          draggable: false,\n          onPointerDown: (e) => {\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_7__.stopEventPropagation)(e);\n          },\n          style: { mask: maskCss, WebkitMask: maskCss }\n        }\n      )\n    }\n  );\n});\nconst LicenseStyles = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function LicenseStyles2() {\n  const className = _LicenseManager_mjs__WEBPACK_IMPORTED_MODULE_10__.LicenseManager.className;\n  const CSS = `/* ------------------- SEE LICENSE -------------------\nThe tldraw watermark is part of tldraw's license. It is shown for unlicensed\nor \"licensed-with-watermark\" users. By using this library, you agree to\npreserve the watermark's behavior, keeping it visible, unobscured, and\navailable to user-interaction.\n\nTo remove the watermark, please purchase a license at tldraw.dev.\n*/\n\n\t.${className} {\n\t\tposition: absolute;\n\t\tbottom: var(--space-2);\n\t\tright: var(--space-2);\n\t\twidth: 96px;\n\t\theight: 32px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: var(--layer-watermark) !important;\n\t\tbackground-color: color-mix(in srgb, var(--color-background) 62%, transparent);\n\t\topacity: 1;\n\t\tborder-radius: 5px;\n\t\tpointer-events: all;\n\t\tpadding: 2px;\n\t\tbox-sizing: content-box;\n\t}\n\t\n\t.${className} > a {\n\t\tposition: absolute;\n\t\twidth: 96px;\n\t\theight: 32px;\n\t\tpointer-events: all;\n\t\tcursor: inherit;\n\t\tcolor: var(--color-text);\n\t\topacity: .38;\n\t\tbackground-color: currentColor;\n\t}\n\n\t\n\t.${className}[data-menu='true'] {\n\t\tpointer-events: none;\n\t}\n\n\t.${className}[data-debug='true'] {\n\t\tbottom: 46px;\n\t}\n\t\n\t.${className}[data-mobile='true'] {\n\t\tborder-radius: 4px 0px 0px 4px;\n\t\tright: -2px;\n\t\twidth: 8px;\n\t\theight: 48px;\n\t}\n\n\t.${className}[data-mobile='true'] > a {\n\t\twidth: 8px;\n\t\theight: 32px;\n\t}\n\t\n\t@media (hover: hover) {\n\t\t.${className} > a {\n\t\t\tpointer-events: none;\n\t\t}\n\n\t\t.${className}:hover {\n\t\t\tbackground-color: var(--color-background);\n\t\t\ttransition: background-color 0.2s ease-in-out;\n\t\t\ttransition-delay: 0.32s;\n\t\t}\n\t\t\t\n\t\t.${className}:hover > a {\n\t\t\tanimation: delayed_link 0.2s forwards ease-in-out;\n\t\t\tanimation-delay: 0.32s;\n\t\t}\n\t}\n\t\n\n\t@keyframes delayed_link {\n\t\t0% {\n\t\t\tcursor: inherit;\n\t\t\topacity: .38;\n\t\t\tpointer-events: none;\n\t\t}\n\t\t100% {\n\t\t\tcursor: pointer;\n\t\t\topacity: 1;\n\t\t\tpointer-events: all;\n\t\t}\n\t}`;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"style\", { children: CSS });\n});\n\n//# sourceMappingURL=Watermark.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2xpY2Vuc2UvV2F0ZXJtYXJrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNUO0FBQ1Y7QUFDYztBQUNZO0FBQ1o7QUFDZ0M7QUFDWDtBQUN6QjtBQUM2QjtBQUN0QjtBQUNJO0FBQ1k7QUFDdEUsd0RBQXdELE9BQU8sbUJBQW1CLGdFQUFtQixFQUFFO0FBQ3ZHLHVEQUF1RCxPQUFPLG1CQUFtQiwrREFBa0IsRUFBRTtBQUNyRyxrQkFBa0IsMkNBQUk7QUFDdEIseUJBQXlCLHdFQUFpQjtBQUMxQyxpQkFBaUIsK0RBQVM7QUFDMUIsbUJBQW1CLDZEQUFRO0FBQzNCO0FBQ0E7QUFDQSw4QkFBOEIsb0ZBQXNCO0FBQ3BEO0FBQ0EseUJBQXlCLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUMxQyxvQkFBb0Isc0RBQUcsa0JBQWtCO0FBQ3pDLG9CQUFvQixzREFBRyxtQkFBbUIsMEVBQTBFO0FBQ3BILEtBQUs7QUFDTCxDQUFDO0FBQ0QsdUJBQXVCLDJDQUFJLDRCQUE0QixLQUFLO0FBQzVELGlCQUFpQiwrREFBUztBQUMxQixzQkFBc0IsNkRBQVE7QUFDOUIscUJBQXFCLDZEQUFRO0FBQzdCLG1CQUFtQiw2REFBUTtBQUMzQjtBQUNBO0FBQ0EsaUJBQWlCLDJFQUFlO0FBQ2hDLGNBQWMsNkNBQU07QUFDcEIsRUFBRSwrRkFBeUI7QUFDM0IsMEJBQTBCLElBQUk7QUFDOUI7QUFDQSx5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQUssNkJBQTZCLHNEQUFHO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9FQUFvQjtBQUNoQyxZQUFZLDhEQUFjO0FBQzFCLFdBQVc7QUFDWCx5QkFBeUIsdURBQU87QUFDaEMsbUJBQW1CO0FBQ25CO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvRUFBb0I7QUFDaEMsV0FBVztBQUNYLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzQkFBc0IsMkNBQUk7QUFDMUIsb0JBQW9CLGdFQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksV0FBVztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUksVUFBVTtBQUNkO0FBQ0E7O0FBRUEsSUFBSSxVQUFVO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsSUFBSSxVQUFVO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLFVBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxXQUFXO0FBQ2hCO0FBQ0E7O0FBRUEsS0FBSyxVQUFVO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssVUFBVTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix5QkFBeUIsc0RBQUcsWUFBWSxlQUFlO0FBQ3ZELENBQUM7QUFHQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2xpY2Vuc2UvV2F0ZXJtYXJrLm1qcz9mZmFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIjtcbmltcG9ydCB7IG1lbW8sIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdGxlbnYgfSBmcm9tIFwiLi4vZ2xvYmFscy9lbnZpcm9ubWVudC5tanNcIjtcbmltcG9ydCB7IHVzZUNhbnZhc0V2ZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VDYW52YXNFdmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlUGFzc1Rocm91Z2hXaGVlbEV2ZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VQYXNzVGhyb3VnaFdoZWVsRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgcHJldmVudERlZmF1bHQsIHN0b3BFdmVudFByb3BhZ2F0aW9uIH0gZnJvbSBcIi4uL3V0aWxzL2RvbS5tanNcIjtcbmltcG9ydCB7IHJ1bnRpbWUgfSBmcm9tIFwiLi4vdXRpbHMvcnVudGltZS5tanNcIjtcbmltcG9ydCB7IHdhdGVybWFya0Rlc2t0b3BTdmcsIHdhdGVybWFya01vYmlsZVN2ZyB9IGZyb20gXCIuLi93YXRlcm1hcmtzLm1qc1wiO1xuaW1wb3J0IHsgTGljZW5zZU1hbmFnZXIgfSBmcm9tIFwiLi9MaWNlbnNlTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IHVzZUxpY2Vuc2VDb250ZXh0IH0gZnJvbSBcIi4vTGljZW5zZVByb3ZpZGVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlTGljZW5zZU1hbmFnZXJTdGF0ZSB9IGZyb20gXCIuL3VzZUxpY2Vuc2VNYW5hZ2VyU3RhdGUubWpzXCI7XG5jb25zdCBXQVRFUk1BUktfREVTS1RPUF9MT0NBTF9TUkMgPSBgZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJHtlbmNvZGVVUklDb21wb25lbnQod2F0ZXJtYXJrRGVza3RvcFN2Zyl9YDtcbmNvbnN0IFdBVEVSTUFSS19NT0JJTEVfTE9DQUxfU1JDID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KHdhdGVybWFya01vYmlsZVN2Zyl9YDtcbmNvbnN0IFdhdGVybWFyayA9IG1lbW8oZnVuY3Rpb24gV2F0ZXJtYXJrMigpIHtcbiAgY29uc3QgbGljZW5zZU1hbmFnZXIgPSB1c2VMaWNlbnNlQ29udGV4dCgpO1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgaXNNb2JpbGUgPSB1c2VWYWx1ZShcImlzIG1vYmlsZVwiLCAoKSA9PiBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKS53aWR0aCA8IDcwMCwgW1xuICAgIGVkaXRvclxuICBdKTtcbiAgY29uc3QgbGljZW5zZU1hbmFnZXJTdGF0ZSA9IHVzZUxpY2Vuc2VNYW5hZ2VyU3RhdGUobGljZW5zZU1hbmFnZXIpO1xuICBpZiAoIVtcImxpY2Vuc2VkLXdpdGgtd2F0ZXJtYXJrXCIsIFwidW5saWNlbnNlZFwiXS5pbmNsdWRlcyhsaWNlbnNlTWFuYWdlclN0YXRlKSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goTGljZW5zZVN0eWxlcywge30pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goV2F0ZXJtYXJrSW5uZXIsIHsgc3JjOiBpc01vYmlsZSA/IFdBVEVSTUFSS19NT0JJTEVfTE9DQUxfU1JDIDogV0FURVJNQVJLX0RFU0tUT1BfTE9DQUxfU1JDIH0pXG4gIF0gfSk7XG59KTtcbmNvbnN0IFdhdGVybWFya0lubmVyID0gbWVtbyhmdW5jdGlvbiBXYXRlcm1hcmtJbm5lcjIoeyBzcmMgfSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgaXNEZWJ1Z01vZGUgPSB1c2VWYWx1ZShcImRlYnVnIG1vZGVcIiwgKCkgPT4gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc0RlYnVnTW9kZSwgW2VkaXRvcl0pO1xuICBjb25zdCBpc01lbnVPcGVuID0gdXNlVmFsdWUoXCJpcyBtZW51IG9wZW5cIiwgKCkgPT4gZWRpdG9yLm1lbnVzLmhhc0FueU9wZW5NZW51cygpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlVmFsdWUoXCJpcyBtb2JpbGVcIiwgKCkgPT4gZWRpdG9yLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkud2lkdGggPCA3MDAsIFtcbiAgICBlZGl0b3JcbiAgXSk7XG4gIGNvbnN0IGV2ZW50cyA9IHVzZUNhbnZhc0V2ZW50cygpO1xuICBjb25zdCByZWYgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVBhc3NUaHJvdWdoV2hlZWxFdmVudHMocmVmKTtcbiAgY29uc3QgbWFza0NzcyA9IGB1cmwoJyR7c3JjfScpIGNlbnRlciAxMDAlIC8gMTAwJSBuby1yZXBlYXRgO1xuICBjb25zdCB1cmwgPSBcImh0dHBzOi8vdGxkcmF3LmRldlwiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBcImRpdlwiLFxuICAgIHtcbiAgICAgIHJlZixcbiAgICAgIGNsYXNzTmFtZTogTGljZW5zZU1hbmFnZXIuY2xhc3NOYW1lLFxuICAgICAgXCJkYXRhLWRlYnVnXCI6IGlzRGVidWdNb2RlLFxuICAgICAgXCJkYXRhLW1lbnVcIjogaXNNZW51T3BlbixcbiAgICAgIFwiZGF0YS1tb2JpbGVcIjogaXNNb2JpbGUsXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgLi4uZXZlbnRzLFxuICAgICAgY2hpbGRyZW46IHRsZW52LmlzV2VidmlldyA/IC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgIFwiYVwiLFxuICAgICAgICB7XG4gICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIG9uUG9pbnRlckRvd246IChlKSA9PiB7XG4gICAgICAgICAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25DbGljazogKCkgPT4gcnVudGltZS5vcGVuV2luZG93KHVybCwgXCJfYmxhbmtcIiksXG4gICAgICAgICAgc3R5bGU6IHsgbWFzazogbWFza0NzcywgV2Via2l0TWFzazogbWFza0NzcyB9XG4gICAgICAgIH1cbiAgICAgICkgOiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICBcImFcIixcbiAgICAgICAge1xuICAgICAgICAgIGhyZWY6IHVybCxcbiAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICAgIG9uUG9pbnRlckRvd246IChlKSA9PiB7XG4gICAgICAgICAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlOiB7IG1hc2s6IG1hc2tDc3MsIFdlYmtpdE1hc2s6IG1hc2tDc3MgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufSk7XG5jb25zdCBMaWNlbnNlU3R5bGVzID0gbWVtbyhmdW5jdGlvbiBMaWNlbnNlU3R5bGVzMigpIHtcbiAgY29uc3QgY2xhc3NOYW1lID0gTGljZW5zZU1hbmFnZXIuY2xhc3NOYW1lO1xuICBjb25zdCBDU1MgPSBgLyogLS0tLS0tLS0tLS0tLS0tLS0tLSBTRUUgTElDRU5TRSAtLS0tLS0tLS0tLS0tLS0tLS0tXG5UaGUgdGxkcmF3IHdhdGVybWFyayBpcyBwYXJ0IG9mIHRsZHJhdydzIGxpY2Vuc2UuIEl0IGlzIHNob3duIGZvciB1bmxpY2Vuc2VkXG5vciBcImxpY2Vuc2VkLXdpdGgtd2F0ZXJtYXJrXCIgdXNlcnMuIEJ5IHVzaW5nIHRoaXMgbGlicmFyeSwgeW91IGFncmVlIHRvXG5wcmVzZXJ2ZSB0aGUgd2F0ZXJtYXJrJ3MgYmVoYXZpb3IsIGtlZXBpbmcgaXQgdmlzaWJsZSwgdW5vYnNjdXJlZCwgYW5kXG5hdmFpbGFibGUgdG8gdXNlci1pbnRlcmFjdGlvbi5cblxuVG8gcmVtb3ZlIHRoZSB3YXRlcm1hcmssIHBsZWFzZSBwdXJjaGFzZSBhIGxpY2Vuc2UgYXQgdGxkcmF3LmRldi5cbiovXG5cblx0LiR7Y2xhc3NOYW1lfSB7XG5cdFx0cG9zaXRpb246IGFic29sdXRlO1xuXHRcdGJvdHRvbTogdmFyKC0tc3BhY2UtMik7XG5cdFx0cmlnaHQ6IHZhcigtLXNwYWNlLTIpO1xuXHRcdHdpZHRoOiA5NnB4O1xuXHRcdGhlaWdodDogMzJweDtcblx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdFx0ei1pbmRleDogdmFyKC0tbGF5ZXItd2F0ZXJtYXJrKSAhaW1wb3J0YW50O1xuXHRcdGJhY2tncm91bmQtY29sb3I6IGNvbG9yLW1peChpbiBzcmdiLCB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKSA2MiUsIHRyYW5zcGFyZW50KTtcblx0XHRvcGFjaXR5OiAxO1xuXHRcdGJvcmRlci1yYWRpdXM6IDVweDtcblx0XHRwb2ludGVyLWV2ZW50czogYWxsO1xuXHRcdHBhZGRpbmc6IDJweDtcblx0XHRib3gtc2l6aW5nOiBjb250ZW50LWJveDtcblx0fVxuXHRcblx0LiR7Y2xhc3NOYW1lfSA+IGEge1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHR3aWR0aDogOTZweDtcblx0XHRoZWlnaHQ6IDMycHg7XG5cdFx0cG9pbnRlci1ldmVudHM6IGFsbDtcblx0XHRjdXJzb3I6IGluaGVyaXQ7XG5cdFx0Y29sb3I6IHZhcigtLWNvbG9yLXRleHQpO1xuXHRcdG9wYWNpdHk6IC4zODtcblx0XHRiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG5cdH1cblxuXHRcblx0LiR7Y2xhc3NOYW1lfVtkYXRhLW1lbnU9J3RydWUnXSB7XG5cdFx0cG9pbnRlci1ldmVudHM6IG5vbmU7XG5cdH1cblxuXHQuJHtjbGFzc05hbWV9W2RhdGEtZGVidWc9J3RydWUnXSB7XG5cdFx0Ym90dG9tOiA0NnB4O1xuXHR9XG5cdFxuXHQuJHtjbGFzc05hbWV9W2RhdGEtbW9iaWxlPSd0cnVlJ10ge1xuXHRcdGJvcmRlci1yYWRpdXM6IDRweCAwcHggMHB4IDRweDtcblx0XHRyaWdodDogLTJweDtcblx0XHR3aWR0aDogOHB4O1xuXHRcdGhlaWdodDogNDhweDtcblx0fVxuXG5cdC4ke2NsYXNzTmFtZX1bZGF0YS1tb2JpbGU9J3RydWUnXSA+IGEge1xuXHRcdHdpZHRoOiA4cHg7XG5cdFx0aGVpZ2h0OiAzMnB4O1xuXHR9XG5cdFxuXHRAbWVkaWEgKGhvdmVyOiBob3Zlcikge1xuXHRcdC4ke2NsYXNzTmFtZX0gPiBhIHtcblx0XHRcdHBvaW50ZXItZXZlbnRzOiBub25lO1xuXHRcdH1cblxuXHRcdC4ke2NsYXNzTmFtZX06aG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmFja2dyb3VuZCk7XG5cdFx0XHR0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQ7XG5cdFx0XHR0cmFuc2l0aW9uLWRlbGF5OiAwLjMycztcblx0XHR9XG5cdFx0XHRcblx0XHQuJHtjbGFzc05hbWV9OmhvdmVyID4gYSB7XG5cdFx0XHRhbmltYXRpb246IGRlbGF5ZWRfbGluayAwLjJzIGZvcndhcmRzIGVhc2UtaW4tb3V0O1xuXHRcdFx0YW5pbWF0aW9uLWRlbGF5OiAwLjMycztcblx0XHR9XG5cdH1cblx0XG5cblx0QGtleWZyYW1lcyBkZWxheWVkX2xpbmsge1xuXHRcdDAlIHtcblx0XHRcdGN1cnNvcjogaW5oZXJpdDtcblx0XHRcdG9wYWNpdHk6IC4zODtcblx0XHRcdHBvaW50ZXItZXZlbnRzOiBub25lO1xuXHRcdH1cblx0XHQxMDAlIHtcblx0XHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRcdG9wYWNpdHk6IDE7XG5cdFx0XHRwb2ludGVyLWV2ZW50czogYWxsO1xuXHRcdH1cblx0fWA7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3R5bGVcIiwgeyBjaGlsZHJlbjogQ1NTIH0pO1xufSk7XG5leHBvcnQge1xuICBXYXRlcm1hcmtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1XYXRlcm1hcmsubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/Watermark.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/useLicenseManagerState.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/license/useLicenseManagerState.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLicenseManagerState: () => (/* binding */ useLicenseManagerState)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n\nfunction useLicenseManagerState(licenseManager) {\n  return (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"watermarkState\", () => licenseManager.state.get(), [licenseManager]);\n}\n\n//# sourceMappingURL=useLicenseManagerState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2xpY2Vuc2UvdXNlTGljZW5zZU1hbmFnZXJTdGF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDL0M7QUFDQSxTQUFTLDZEQUFRO0FBQ2pCO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9saWNlbnNlL3VzZUxpY2Vuc2VNYW5hZ2VyU3RhdGUubWpzPzM4NjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZS1yZWFjdFwiO1xuZnVuY3Rpb24gdXNlTGljZW5zZU1hbmFnZXJTdGF0ZShsaWNlbnNlTWFuYWdlcikge1xuICByZXR1cm4gdXNlVmFsdWUoXCJ3YXRlcm1hcmtTdGF0ZVwiLCAoKSA9PiBsaWNlbnNlTWFuYWdlci5zdGF0ZS5nZXQoKSwgW2xpY2Vuc2VNYW5hZ2VyXSk7XG59XG5leHBvcnQge1xuICB1c2VMaWNlbnNlTWFuYWdlclN0YXRlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlTGljZW5zZU1hbmFnZXJTdGF0ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/license/useLicenseManagerState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/options.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultTldrawOptions: () => (/* binding */ defaultTldrawOptions)\n/* harmony export */ });\nconst defaultTldrawOptions = {\n  maxShapesPerPage: 4e3,\n  maxFilesAtOnce: 100,\n  maxPages: 40,\n  animationMediumMs: 320,\n  followChaseViewportSnap: 2,\n  doubleClickDurationMs: 450,\n  multiClickDurationMs: 200,\n  coarseDragDistanceSquared: 36,\n  // 6 squared\n  dragDistanceSquared: 16,\n  // 4 squared\n  defaultSvgPadding: 32,\n  cameraSlideFriction: 0.09,\n  maxPointsPerDrawShape: 500,\n  gridSteps: [\n    { min: -1, mid: 0.15, step: 64 },\n    { min: 0.05, mid: 0.375, step: 16 },\n    { min: 0.15, mid: 1, step: 4 },\n    { min: 0.7, mid: 2.5, step: 1 }\n  ],\n  collaboratorInactiveTimeoutMs: 6e4,\n  collaboratorIdleTimeoutMs: 3e3,\n  collaboratorCheckIntervalMs: 1200,\n  cameraMovingTimeoutMs: 64,\n  hitTestMargin: 8,\n  edgeScrollDelay: 200,\n  edgeScrollEaseDuration: 200,\n  edgeScrollSpeed: 25,\n  edgeScrollDistance: 8,\n  coarsePointerWidth: 12,\n  coarseHandleRadius: 20,\n  handleRadius: 12,\n  longPressDurationMs: 500,\n  textShadowLod: 0.35,\n  adjacentShapeMargin: 10,\n  flattenImageBoundsExpand: 64,\n  flattenImageBoundsPadding: 16,\n  laserDelayMs: 1200,\n  maxExportDelayMs: 5e3,\n  temporaryAssetPreviewLifetimeMs: 18e4,\n  actionShortcutsLocation: \"swap\"\n};\n\n//# sourceMappingURL=options.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL29wdGlvbnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sOEJBQThCO0FBQ3BDLE1BQU0saUNBQWlDO0FBQ3ZDLE1BQU0sNEJBQTRCO0FBQ2xDLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9vcHRpb25zLm1qcz85ZDExIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRlZmF1bHRUbGRyYXdPcHRpb25zID0ge1xuICBtYXhTaGFwZXNQZXJQYWdlOiA0ZTMsXG4gIG1heEZpbGVzQXRPbmNlOiAxMDAsXG4gIG1heFBhZ2VzOiA0MCxcbiAgYW5pbWF0aW9uTWVkaXVtTXM6IDMyMCxcbiAgZm9sbG93Q2hhc2VWaWV3cG9ydFNuYXA6IDIsXG4gIGRvdWJsZUNsaWNrRHVyYXRpb25NczogNDUwLFxuICBtdWx0aUNsaWNrRHVyYXRpb25NczogMjAwLFxuICBjb2Fyc2VEcmFnRGlzdGFuY2VTcXVhcmVkOiAzNixcbiAgLy8gNiBzcXVhcmVkXG4gIGRyYWdEaXN0YW5jZVNxdWFyZWQ6IDE2LFxuICAvLyA0IHNxdWFyZWRcbiAgZGVmYXVsdFN2Z1BhZGRpbmc6IDMyLFxuICBjYW1lcmFTbGlkZUZyaWN0aW9uOiAwLjA5LFxuICBtYXhQb2ludHNQZXJEcmF3U2hhcGU6IDUwMCxcbiAgZ3JpZFN0ZXBzOiBbXG4gICAgeyBtaW46IC0xLCBtaWQ6IDAuMTUsIHN0ZXA6IDY0IH0sXG4gICAgeyBtaW46IDAuMDUsIG1pZDogMC4zNzUsIHN0ZXA6IDE2IH0sXG4gICAgeyBtaW46IDAuMTUsIG1pZDogMSwgc3RlcDogNCB9LFxuICAgIHsgbWluOiAwLjcsIG1pZDogMi41LCBzdGVwOiAxIH1cbiAgXSxcbiAgY29sbGFib3JhdG9ySW5hY3RpdmVUaW1lb3V0TXM6IDZlNCxcbiAgY29sbGFib3JhdG9ySWRsZVRpbWVvdXRNczogM2UzLFxuICBjb2xsYWJvcmF0b3JDaGVja0ludGVydmFsTXM6IDEyMDAsXG4gIGNhbWVyYU1vdmluZ1RpbWVvdXRNczogNjQsXG4gIGhpdFRlc3RNYXJnaW46IDgsXG4gIGVkZ2VTY3JvbGxEZWxheTogMjAwLFxuICBlZGdlU2Nyb2xsRWFzZUR1cmF0aW9uOiAyMDAsXG4gIGVkZ2VTY3JvbGxTcGVlZDogMjUsXG4gIGVkZ2VTY3JvbGxEaXN0YW5jZTogOCxcbiAgY29hcnNlUG9pbnRlcldpZHRoOiAxMixcbiAgY29hcnNlSGFuZGxlUmFkaXVzOiAyMCxcbiAgaGFuZGxlUmFkaXVzOiAxMixcbiAgbG9uZ1ByZXNzRHVyYXRpb25NczogNTAwLFxuICB0ZXh0U2hhZG93TG9kOiAwLjM1LFxuICBhZGphY2VudFNoYXBlTWFyZ2luOiAxMCxcbiAgZmxhdHRlbkltYWdlQm91bmRzRXhwYW5kOiA2NCxcbiAgZmxhdHRlbkltYWdlQm91bmRzUGFkZGluZzogMTYsXG4gIGxhc2VyRGVsYXlNczogMTIwMCxcbiAgbWF4RXhwb3J0RGVsYXlNczogNWUzLFxuICB0ZW1wb3JhcnlBc3NldFByZXZpZXdMaWZldGltZU1zOiAxOGU0LFxuICBhY3Rpb25TaG9ydGN1dHNMb2NhdGlvbjogXCJzd2FwXCJcbn07XG5leHBvcnQge1xuICBkZWZhdWx0VGxkcmF3T3B0aW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Box: () => (/* binding */ Box),\n/* harmony export */   ROTATE_CORNER_TO_SELECTION_CORNER: () => (/* binding */ ROTATE_CORNER_TO_SELECTION_CORNER),\n/* harmony export */   flipSelectionHandleX: () => (/* binding */ flipSelectionHandleX),\n/* harmony export */   flipSelectionHandleY: () => (/* binding */ flipSelectionHandleY),\n/* harmony export */   isSelectionCorner: () => (/* binding */ isSelectionCorner),\n/* harmony export */   rotateSelectionHandle: () => (/* binding */ rotateSelectionHandle)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\nclass Box {\n  constructor(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }\n  x = 0;\n  y = 0;\n  w = 0;\n  h = 0;\n  // eslint-disable-next-line no-restricted-syntax\n  get point() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.x, this.y);\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set point(val) {\n    this.x = val.x;\n    this.y = val.y;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get minX() {\n    return this.x;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set minX(n) {\n    this.x = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get midX() {\n    return this.x + this.w / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get maxX() {\n    return this.x + this.w;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get minY() {\n    return this.y;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set minY(n) {\n    this.y = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get midY() {\n    return this.y + this.h / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get maxY() {\n    return this.y + this.h;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get width() {\n    return this.w;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set width(n) {\n    this.w = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get height() {\n    return this.h;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set height(n) {\n    this.h = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get aspectRatio() {\n    return this.width / this.height;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get center() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.midY);\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set center(v) {\n    this.minX = v.x - this.width / 2;\n    this.minY = v.y - this.height / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get corners() {\n    return [\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY)\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get cornersAndCenter() {\n    return [\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY),\n      this.center\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get sides() {\n    const { corners } = this;\n    return [\n      [corners[0], corners[1]],\n      [corners[1], corners[2]],\n      [corners[2], corners[3]],\n      [corners[3], corners[0]]\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get size() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.w, this.h);\n  }\n  toFixed() {\n    this.x = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.x);\n    this.y = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.y);\n    this.w = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.w);\n    this.h = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.h);\n    return this;\n  }\n  setTo(B) {\n    this.x = B.x;\n    this.y = B.y;\n    this.w = B.w;\n    this.h = B.h;\n    return this;\n  }\n  set(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    return this;\n  }\n  expand(A) {\n    const minX = Math.min(this.minX, A.minX);\n    const minY = Math.min(this.minY, A.minY);\n    const maxX = Math.max(this.maxX, A.maxX);\n    const maxY = Math.max(this.maxY, A.maxY);\n    this.x = minX;\n    this.y = minY;\n    this.w = maxX - minX;\n    this.h = maxY - minY;\n    return this;\n  }\n  expandBy(n) {\n    this.x -= n;\n    this.y -= n;\n    this.w += n * 2;\n    this.h += n * 2;\n    return this;\n  }\n  scale(n) {\n    this.x /= n;\n    this.y /= n;\n    this.w /= n;\n    this.h /= n;\n    return this;\n  }\n  clone() {\n    const { x, y, w, h } = this;\n    return new Box(x, y, w, h);\n  }\n  translate(delta) {\n    this.x += delta.x;\n    this.y += delta.y;\n    return this;\n  }\n  snapToGrid(size) {\n    const minX = Math.round(this.minX / size) * size;\n    const minY = Math.round(this.minY / size) * size;\n    const maxX = Math.round(this.maxX / size) * size;\n    const maxY = Math.round(this.maxY / size) * size;\n    this.minX = minX;\n    this.minY = minY;\n    this.width = Math.max(1, maxX - minX);\n    this.height = Math.max(1, maxY - minY);\n  }\n  collides(B) {\n    return Box.Collides(this, B);\n  }\n  contains(B) {\n    return Box.Contains(this, B);\n  }\n  includes(B) {\n    return Box.Includes(this, B);\n  }\n  containsPoint(V, margin = 0) {\n    return Box.ContainsPoint(this, V, margin);\n  }\n  getHandlePoint(handle) {\n    switch (handle) {\n      case \"top_left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY);\n      case \"top_right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY);\n      case \"bottom_left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY);\n      case \"bottom_right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY);\n      case \"top\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.minY);\n      case \"right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.midY);\n      case \"bottom\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.maxY);\n      case \"left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.midY);\n    }\n  }\n  toJson() {\n    return { x: this.minX, y: this.minY, w: this.w, h: this.h };\n  }\n  resize(handle, dx, dy) {\n    const { minX: a0x, minY: a0y, maxX: a1x, maxY: a1y } = this;\n    let { minX: b0x, minY: b0y, maxX: b1x, maxY: b1y } = this;\n    switch (handle) {\n      case \"left\":\n      case \"top_left\":\n      case \"bottom_left\": {\n        b0x += dx;\n        break;\n      }\n      case \"right\":\n      case \"top_right\":\n      case \"bottom_right\": {\n        b1x += dx;\n        break;\n      }\n    }\n    switch (handle) {\n      case \"top\":\n      case \"top_left\":\n      case \"top_right\": {\n        b0y += dy;\n        break;\n      }\n      case \"bottom\":\n      case \"bottom_left\":\n      case \"bottom_right\": {\n        b1y += dy;\n        break;\n      }\n    }\n    const scaleX = (b1x - b0x) / (a1x - a0x);\n    const scaleY = (b1y - b0y) / (a1y - a0y);\n    const flipX = scaleX < 0;\n    const flipY = scaleY < 0;\n    if (flipX) {\n      const t = b1x;\n      b1x = b0x;\n      b0x = t;\n    }\n    if (flipY) {\n      const t = b1y;\n      b1y = b0y;\n      b0y = t;\n    }\n    this.minX = b0x;\n    this.minY = b0y;\n    this.width = Math.abs(b1x - b0x);\n    this.height = Math.abs(b1y - b0y);\n  }\n  union(box) {\n    const minX = Math.min(this.minX, box.x);\n    const minY = Math.min(this.minY, box.y);\n    const maxX = Math.max(this.maxX, box.w + box.x);\n    const maxY = Math.max(this.maxY, box.h + box.y);\n    this.x = minX;\n    this.y = minY;\n    this.width = maxX - minX;\n    this.height = maxY - minY;\n    return this;\n  }\n  static From(box) {\n    return new Box(box.x, box.y, box.w, box.h);\n  }\n  static FromCenter(center, size) {\n    return new Box(center.x - size.x / 2, center.y - size.y / 2, size.x, size.y);\n  }\n  static FromPoints(points) {\n    if (points.length === 0) return new Box();\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    let point;\n    for (let i = 0, n = points.length; i < n; i++) {\n      point = points[i];\n      minX = Math.min(point.x, minX);\n      minY = Math.min(point.y, minY);\n      maxX = Math.max(point.x, maxX);\n      maxY = Math.max(point.y, maxY);\n    }\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  }\n  static Expand(A, B) {\n    const minX = Math.min(B.minX, A.minX);\n    const minY = Math.min(B.minY, A.minY);\n    const maxX = Math.max(B.maxX, A.maxX);\n    const maxY = Math.max(B.maxY, A.maxY);\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  }\n  static ExpandBy(A, n) {\n    return new Box(A.minX - n, A.minY - n, A.width + n * 2, A.height + n * 2);\n  }\n  static Collides(A, B) {\n    return !(A.maxX < B.minX || A.minX > B.maxX || A.maxY < B.minY || A.minY > B.maxY);\n  }\n  static Contains(A, B) {\n    return A.minX < B.minX && A.minY < B.minY && A.maxY > B.maxY && A.maxX > B.maxX;\n  }\n  static Includes(A, B) {\n    return Box.Collides(A, B) || Box.Contains(A, B);\n  }\n  static ContainsPoint(A, B, margin = 0) {\n    return !(B.x < A.minX - margin || B.y < A.minY - margin || B.x > A.maxX + margin || B.y > A.maxY + margin);\n  }\n  static Common(boxes) {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < boxes.length; i++) {\n      const B = boxes[i];\n      minX = Math.min(minX, B.minX);\n      minY = Math.min(minY, B.minY);\n      maxX = Math.max(maxX, B.maxX);\n      maxY = Math.max(maxY, B.maxY);\n    }\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  }\n  static Sides(A, inset = 0) {\n    const { corners } = A;\n    if (inset) {\n    }\n    return [\n      [corners[0], corners[1]],\n      [corners[1], corners[2]],\n      [corners[2], corners[3]],\n      [corners[3], corners[0]]\n    ];\n  }\n  static Resize(box, handle, dx, dy, isAspectRatioLocked = false) {\n    const { minX: a0x, minY: a0y, maxX: a1x, maxY: a1y } = box;\n    let { minX: b0x, minY: b0y, maxX: b1x, maxY: b1y } = box;\n    switch (handle) {\n      case \"left\":\n      case \"top_left\":\n      case \"bottom_left\": {\n        b0x += dx;\n        break;\n      }\n      case \"right\":\n      case \"top_right\":\n      case \"bottom_right\": {\n        b1x += dx;\n        break;\n      }\n    }\n    switch (handle) {\n      case \"top\":\n      case \"top_left\":\n      case \"top_right\": {\n        b0y += dy;\n        break;\n      }\n      case \"bottom\":\n      case \"bottom_left\":\n      case \"bottom_right\": {\n        b1y += dy;\n        break;\n      }\n    }\n    const scaleX = (b1x - b0x) / (a1x - a0x);\n    const scaleY = (b1y - b0y) / (a1y - a0y);\n    const flipX = scaleX < 0;\n    const flipY = scaleY < 0;\n    if (isAspectRatioLocked) {\n      const aspectRatio = (a1x - a0x) / (a1y - a0y);\n      const bw = Math.abs(b1x - b0x);\n      const bh = Math.abs(b1y - b0y);\n      const tw = bw * (scaleY < 0 ? 1 : -1) * (1 / aspectRatio);\n      const th = bh * (scaleX < 0 ? 1 : -1) * aspectRatio;\n      const isTall = aspectRatio < bw / bh;\n      switch (handle) {\n        case \"top_left\": {\n          if (isTall) b0y = b1y + tw;\n          else b0x = b1x + th;\n          break;\n        }\n        case \"top_right\": {\n          if (isTall) b0y = b1y + tw;\n          else b1x = b0x - th;\n          break;\n        }\n        case \"bottom_right\": {\n          if (isTall) b1y = b0y - tw;\n          else b1x = b0x - th;\n          break;\n        }\n        case \"bottom_left\": {\n          if (isTall) b1y = b0y - tw;\n          else b0x = b1x + th;\n          break;\n        }\n        case \"bottom\":\n        case \"top\": {\n          const m = (b0x + b1x) / 2;\n          const w = bh * aspectRatio;\n          b0x = m - w / 2;\n          b1x = m + w / 2;\n          break;\n        }\n        case \"left\":\n        case \"right\": {\n          const m = (b0y + b1y) / 2;\n          const h = bw / aspectRatio;\n          b0y = m - h / 2;\n          b1y = m + h / 2;\n          break;\n        }\n      }\n    }\n    if (flipX) {\n      const t = b1x;\n      b1x = b0x;\n      b0x = t;\n    }\n    if (flipY) {\n      const t = b1y;\n      b1y = b0y;\n      b0y = t;\n    }\n    const final = new Box(b0x, b0y, Math.abs(b1x - b0x), Math.abs(b1y - b0y));\n    return {\n      box: final,\n      scaleX: +(final.width / box.width * (scaleX > 0 ? 1 : -1)).toFixed(5),\n      scaleY: +(final.height / box.height * (scaleY > 0 ? 1 : -1)).toFixed(5)\n    };\n  }\n  equals(other) {\n    return Box.Equals(this, other);\n  }\n  static Equals(a, b) {\n    return b.x === a.x && b.y === a.y && b.w === a.w && b.h === a.h;\n  }\n  zeroFix() {\n    this.w = Math.max(1, this.w);\n    this.h = Math.max(1, this.h);\n    return this;\n  }\n  static ZeroFix(other) {\n    return new Box(other.x, other.y, Math.max(1, other.w), Math.max(1, other.h));\n  }\n}\nfunction flipSelectionHandleY(handle) {\n  switch (handle) {\n    case \"top\":\n      return \"bottom\";\n    case \"bottom\":\n      return \"top\";\n    case \"top_left\":\n      return \"bottom_left\";\n    case \"top_right\":\n      return \"bottom_right\";\n    case \"bottom_left\":\n      return \"top_left\";\n    case \"bottom_right\":\n      return \"top_right\";\n    default:\n      return handle;\n  }\n}\nfunction flipSelectionHandleX(handle) {\n  switch (handle) {\n    case \"left\":\n      return \"right\";\n    case \"right\":\n      return \"left\";\n    case \"top_left\":\n      return \"top_right\";\n    case \"top_right\":\n      return \"top_left\";\n    case \"bottom_left\":\n      return \"bottom_right\";\n    case \"bottom_right\":\n      return \"bottom_left\";\n    default:\n      return handle;\n  }\n}\nconst ORDERED_SELECTION_HANDLES = [\n  \"top\",\n  \"top_right\",\n  \"right\",\n  \"bottom_right\",\n  \"bottom\",\n  \"bottom_left\",\n  \"left\",\n  \"top_left\"\n];\nfunction rotateSelectionHandle(handle, rotation) {\n  rotation = rotation % _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI2;\n  const numSteps = Math.round(rotation / (_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI / 4));\n  const currentIndex = ORDERED_SELECTION_HANDLES.indexOf(handle);\n  return ORDERED_SELECTION_HANDLES[(currentIndex + numSteps) % ORDERED_SELECTION_HANDLES.length];\n}\nfunction isSelectionCorner(selection) {\n  return selection === \"top_left\" || selection === \"top_right\" || selection === \"bottom_right\" || selection === \"bottom_left\";\n}\nconst ROTATE_CORNER_TO_SELECTION_CORNER = {\n  top_left_rotate: \"top_left\",\n  top_right_rotate: \"top_right\",\n  bottom_right_rotate: \"bottom_right\",\n  bottom_left_rotate: \"bottom_left\",\n  mobile_rotate: \"top_left\"\n};\n\n//# sourceMappingURL=Box.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvQm94Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnQztBQUNtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2IsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYixVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUNBQUc7QUFDYixVQUFVLHlDQUFHO0FBQ2IsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLGFBQWEsdURBQVc7QUFDeEIsYUFBYSx1REFBVztBQUN4QixhQUFhLHVEQUFXO0FBQ3hCLGFBQWEsdURBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxVQUFVLDZDQUE2QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE9BQU87QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBNkM7QUFDekQsVUFBVSw2Q0FBNkM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUc7QUFDM0IsMENBQTBDLDBDQUFFO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL0JveC5tanM/ZDczMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQSSwgUEkyLCB0b1ByZWNpc2lvbiB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuY2xhc3MgQm94IHtcbiAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB3ID0gMCwgaCA9IDApIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy53ID0gdztcbiAgICB0aGlzLmggPSBoO1xuICB9XG4gIHggPSAwO1xuICB5ID0gMDtcbiAgdyA9IDA7XG4gIGggPSAwO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IHBvaW50KCkge1xuICAgIHJldHVybiBuZXcgVmVjKHRoaXMueCwgdGhpcy55KTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgc2V0IHBvaW50KHZhbCkge1xuICAgIHRoaXMueCA9IHZhbC54O1xuICAgIHRoaXMueSA9IHZhbC55O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbWluWCgpIHtcbiAgICByZXR1cm4gdGhpcy54O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBzZXQgbWluWChuKSB7XG4gICAgdGhpcy54ID0gbjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IG1pZFgoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIHRoaXMudyAvIDI7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBtYXhYKCkge1xuICAgIHJldHVybiB0aGlzLnggKyB0aGlzLnc7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBtaW5ZKCkge1xuICAgIHJldHVybiB0aGlzLnk7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIHNldCBtaW5ZKG4pIHtcbiAgICB0aGlzLnkgPSBuO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbWlkWSgpIHtcbiAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5oIC8gMjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IG1heFkoKSB7XG4gICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaDtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IHdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLnc7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIHNldCB3aWR0aChuKSB7XG4gICAgdGhpcy53ID0gbjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5oO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBzZXQgaGVpZ2h0KG4pIHtcbiAgICB0aGlzLmggPSBuO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgYXNwZWN0UmF0aW8oKSB7XG4gICAgcmV0dXJuIHRoaXMud2lkdGggLyB0aGlzLmhlaWdodDtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGNlbnRlcigpIHtcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1pZFgsIHRoaXMubWlkWSk7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIHNldCBjZW50ZXIodikge1xuICAgIHRoaXMubWluWCA9IHYueCAtIHRoaXMud2lkdGggLyAyO1xuICAgIHRoaXMubWluWSA9IHYueSAtIHRoaXMuaGVpZ2h0IC8gMjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGNvcm5lcnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1pblkpLFxuICAgICAgbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWluWSksXG4gICAgICBuZXcgVmVjKHRoaXMubWF4WCwgdGhpcy5tYXhZKSxcbiAgICAgIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1heFkpXG4gICAgXTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGNvcm5lcnNBbmRDZW50ZXIoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1pblkpLFxuICAgICAgbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWluWSksXG4gICAgICBuZXcgVmVjKHRoaXMubWF4WCwgdGhpcy5tYXhZKSxcbiAgICAgIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1heFkpLFxuICAgICAgdGhpcy5jZW50ZXJcbiAgICBdO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2lkZXMoKSB7XG4gICAgY29uc3QgeyBjb3JuZXJzIH0gPSB0aGlzO1xuICAgIHJldHVybiBbXG4gICAgICBbY29ybmVyc1swXSwgY29ybmVyc1sxXV0sXG4gICAgICBbY29ybmVyc1sxXSwgY29ybmVyc1syXV0sXG4gICAgICBbY29ybmVyc1syXSwgY29ybmVyc1szXV0sXG4gICAgICBbY29ybmVyc1szXSwgY29ybmVyc1swXV1cbiAgICBdO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLncsIHRoaXMuaCk7XG4gIH1cbiAgdG9GaXhlZCgpIHtcbiAgICB0aGlzLnggPSB0b1ByZWNpc2lvbih0aGlzLngpO1xuICAgIHRoaXMueSA9IHRvUHJlY2lzaW9uKHRoaXMueSk7XG4gICAgdGhpcy53ID0gdG9QcmVjaXNpb24odGhpcy53KTtcbiAgICB0aGlzLmggPSB0b1ByZWNpc2lvbih0aGlzLmgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldFRvKEIpIHtcbiAgICB0aGlzLnggPSBCLng7XG4gICAgdGhpcy55ID0gQi55O1xuICAgIHRoaXMudyA9IEIudztcbiAgICB0aGlzLmggPSBCLmg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2V0KHggPSAwLCB5ID0gMCwgdyA9IDAsIGggPSAwKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMudyA9IHc7XG4gICAgdGhpcy5oID0gaDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBleHBhbmQoQSkge1xuICAgIGNvbnN0IG1pblggPSBNYXRoLm1pbih0aGlzLm1pblgsIEEubWluWCk7XG4gICAgY29uc3QgbWluWSA9IE1hdGgubWluKHRoaXMubWluWSwgQS5taW5ZKTtcbiAgICBjb25zdCBtYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCBBLm1heFgpO1xuICAgIGNvbnN0IG1heFkgPSBNYXRoLm1heCh0aGlzLm1heFksIEEubWF4WSk7XG4gICAgdGhpcy54ID0gbWluWDtcbiAgICB0aGlzLnkgPSBtaW5ZO1xuICAgIHRoaXMudyA9IG1heFggLSBtaW5YO1xuICAgIHRoaXMuaCA9IG1heFkgLSBtaW5ZO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGV4cGFuZEJ5KG4pIHtcbiAgICB0aGlzLnggLT0gbjtcbiAgICB0aGlzLnkgLT0gbjtcbiAgICB0aGlzLncgKz0gbiAqIDI7XG4gICAgdGhpcy5oICs9IG4gKiAyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNjYWxlKG4pIHtcbiAgICB0aGlzLnggLz0gbjtcbiAgICB0aGlzLnkgLz0gbjtcbiAgICB0aGlzLncgLz0gbjtcbiAgICB0aGlzLmggLz0gbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjbG9uZSgpIHtcbiAgICBjb25zdCB7IHgsIHksIHcsIGggfSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBCb3goeCwgeSwgdywgaCk7XG4gIH1cbiAgdHJhbnNsYXRlKGRlbHRhKSB7XG4gICAgdGhpcy54ICs9IGRlbHRhLng7XG4gICAgdGhpcy55ICs9IGRlbHRhLnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc25hcFRvR3JpZChzaXplKSB7XG4gICAgY29uc3QgbWluWCA9IE1hdGgucm91bmQodGhpcy5taW5YIC8gc2l6ZSkgKiBzaXplO1xuICAgIGNvbnN0IG1pblkgPSBNYXRoLnJvdW5kKHRoaXMubWluWSAvIHNpemUpICogc2l6ZTtcbiAgICBjb25zdCBtYXhYID0gTWF0aC5yb3VuZCh0aGlzLm1heFggLyBzaXplKSAqIHNpemU7XG4gICAgY29uc3QgbWF4WSA9IE1hdGgucm91bmQodGhpcy5tYXhZIC8gc2l6ZSkgKiBzaXplO1xuICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICB0aGlzLndpZHRoID0gTWF0aC5tYXgoMSwgbWF4WCAtIG1pblgpO1xuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgbWF4WSAtIG1pblkpO1xuICB9XG4gIGNvbGxpZGVzKEIpIHtcbiAgICByZXR1cm4gQm94LkNvbGxpZGVzKHRoaXMsIEIpO1xuICB9XG4gIGNvbnRhaW5zKEIpIHtcbiAgICByZXR1cm4gQm94LkNvbnRhaW5zKHRoaXMsIEIpO1xuICB9XG4gIGluY2x1ZGVzKEIpIHtcbiAgICByZXR1cm4gQm94LkluY2x1ZGVzKHRoaXMsIEIpO1xuICB9XG4gIGNvbnRhaW5zUG9pbnQoViwgbWFyZ2luID0gMCkge1xuICAgIHJldHVybiBCb3guQ29udGFpbnNQb2ludCh0aGlzLCBWLCBtYXJnaW4pO1xuICB9XG4gIGdldEhhbmRsZVBvaW50KGhhbmRsZSkge1xuICAgIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1pblkpO1xuICAgICAgY2FzZSBcInRvcF9yaWdodFwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWluWSk7XG4gICAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBWZWModGhpcy5taW5YLCB0aGlzLm1heFkpO1xuICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWF4WSk7XG4gICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgIHJldHVybiBuZXcgVmVjKHRoaXMubWlkWCwgdGhpcy5taW5ZKTtcbiAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWlkWSk7XG4gICAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICAgIHJldHVybiBuZXcgVmVjKHRoaXMubWlkWCwgdGhpcy5tYXhZKTtcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIHJldHVybiBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5taWRZKTtcbiAgICB9XG4gIH1cbiAgdG9Kc29uKCkge1xuICAgIHJldHVybiB7IHg6IHRoaXMubWluWCwgeTogdGhpcy5taW5ZLCB3OiB0aGlzLncsIGg6IHRoaXMuaCB9O1xuICB9XG4gIHJlc2l6ZShoYW5kbGUsIGR4LCBkeSkge1xuICAgIGNvbnN0IHsgbWluWDogYTB4LCBtaW5ZOiBhMHksIG1heFg6IGExeCwgbWF4WTogYTF5IH0gPSB0aGlzO1xuICAgIGxldCB7IG1pblg6IGIweCwgbWluWTogYjB5LCBtYXhYOiBiMXgsIG1heFk6IGIxeSB9ID0gdGhpcztcbiAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6IHtcbiAgICAgICAgYjB4ICs9IGR4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgY2FzZSBcInRvcF9yaWdodFwiOlxuICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOiB7XG4gICAgICAgIGIxeCArPSBkeDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgICBjYXNlIFwidG9wXCI6XG4gICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjoge1xuICAgICAgICBiMHkgKz0gZHk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6XG4gICAgICBjYXNlIFwiYm90dG9tX3JpZ2h0XCI6IHtcbiAgICAgICAgYjF5ICs9IGR5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2NhbGVYID0gKGIxeCAtIGIweCkgLyAoYTF4IC0gYTB4KTtcbiAgICBjb25zdCBzY2FsZVkgPSAoYjF5IC0gYjB5KSAvIChhMXkgLSBhMHkpO1xuICAgIGNvbnN0IGZsaXBYID0gc2NhbGVYIDwgMDtcbiAgICBjb25zdCBmbGlwWSA9IHNjYWxlWSA8IDA7XG4gICAgaWYgKGZsaXBYKSB7XG4gICAgICBjb25zdCB0ID0gYjF4O1xuICAgICAgYjF4ID0gYjB4O1xuICAgICAgYjB4ID0gdDtcbiAgICB9XG4gICAgaWYgKGZsaXBZKSB7XG4gICAgICBjb25zdCB0ID0gYjF5O1xuICAgICAgYjF5ID0gYjB5O1xuICAgICAgYjB5ID0gdDtcbiAgICB9XG4gICAgdGhpcy5taW5YID0gYjB4O1xuICAgIHRoaXMubWluWSA9IGIweTtcbiAgICB0aGlzLndpZHRoID0gTWF0aC5hYnMoYjF4IC0gYjB4KTtcbiAgICB0aGlzLmhlaWdodCA9IE1hdGguYWJzKGIxeSAtIGIweSk7XG4gIH1cbiAgdW5pb24oYm94KSB7XG4gICAgY29uc3QgbWluWCA9IE1hdGgubWluKHRoaXMubWluWCwgYm94LngpO1xuICAgIGNvbnN0IG1pblkgPSBNYXRoLm1pbih0aGlzLm1pblksIGJveC55KTtcbiAgICBjb25zdCBtYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCBib3gudyArIGJveC54KTtcbiAgICBjb25zdCBtYXhZID0gTWF0aC5tYXgodGhpcy5tYXhZLCBib3guaCArIGJveC55KTtcbiAgICB0aGlzLnggPSBtaW5YO1xuICAgIHRoaXMueSA9IG1pblk7XG4gICAgdGhpcy53aWR0aCA9IG1heFggLSBtaW5YO1xuICAgIHRoaXMuaGVpZ2h0ID0gbWF4WSAtIG1pblk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3RhdGljIEZyb20oYm94KSB7XG4gICAgcmV0dXJuIG5ldyBCb3goYm94LngsIGJveC55LCBib3gudywgYm94LmgpO1xuICB9XG4gIHN0YXRpYyBGcm9tQ2VudGVyKGNlbnRlciwgc2l6ZSkge1xuICAgIHJldHVybiBuZXcgQm94KGNlbnRlci54IC0gc2l6ZS54IC8gMiwgY2VudGVyLnkgLSBzaXplLnkgLyAyLCBzaXplLngsIHNpemUueSk7XG4gIH1cbiAgc3RhdGljIEZyb21Qb2ludHMocG9pbnRzKSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQm94KCk7XG4gICAgbGV0IG1pblggPSBJbmZpbml0eTtcbiAgICBsZXQgbWluWSA9IEluZmluaXR5O1xuICAgIGxldCBtYXhYID0gLUluZmluaXR5O1xuICAgIGxldCBtYXhZID0gLUluZmluaXR5O1xuICAgIGxldCBwb2ludDtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBvaW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgbWluWCA9IE1hdGgubWluKHBvaW50LngsIG1pblgpO1xuICAgICAgbWluWSA9IE1hdGgubWluKHBvaW50LnksIG1pblkpO1xuICAgICAgbWF4WCA9IE1hdGgubWF4KHBvaW50LngsIG1heFgpO1xuICAgICAgbWF4WSA9IE1hdGgubWF4KHBvaW50LnksIG1heFkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJveChtaW5YLCBtaW5ZLCBtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xuICB9XG4gIHN0YXRpYyBFeHBhbmQoQSwgQikge1xuICAgIGNvbnN0IG1pblggPSBNYXRoLm1pbihCLm1pblgsIEEubWluWCk7XG4gICAgY29uc3QgbWluWSA9IE1hdGgubWluKEIubWluWSwgQS5taW5ZKTtcbiAgICBjb25zdCBtYXhYID0gTWF0aC5tYXgoQi5tYXhYLCBBLm1heFgpO1xuICAgIGNvbnN0IG1heFkgPSBNYXRoLm1heChCLm1heFksIEEubWF4WSk7XG4gICAgcmV0dXJuIG5ldyBCb3gobWluWCwgbWluWSwgbWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcbiAgfVxuICBzdGF0aWMgRXhwYW5kQnkoQSwgbikge1xuICAgIHJldHVybiBuZXcgQm94KEEubWluWCAtIG4sIEEubWluWSAtIG4sIEEud2lkdGggKyBuICogMiwgQS5oZWlnaHQgKyBuICogMik7XG4gIH1cbiAgc3RhdGljIENvbGxpZGVzKEEsIEIpIHtcbiAgICByZXR1cm4gIShBLm1heFggPCBCLm1pblggfHwgQS5taW5YID4gQi5tYXhYIHx8IEEubWF4WSA8IEIubWluWSB8fCBBLm1pblkgPiBCLm1heFkpO1xuICB9XG4gIHN0YXRpYyBDb250YWlucyhBLCBCKSB7XG4gICAgcmV0dXJuIEEubWluWCA8IEIubWluWCAmJiBBLm1pblkgPCBCLm1pblkgJiYgQS5tYXhZID4gQi5tYXhZICYmIEEubWF4WCA+IEIubWF4WDtcbiAgfVxuICBzdGF0aWMgSW5jbHVkZXMoQSwgQikge1xuICAgIHJldHVybiBCb3guQ29sbGlkZXMoQSwgQikgfHwgQm94LkNvbnRhaW5zKEEsIEIpO1xuICB9XG4gIHN0YXRpYyBDb250YWluc1BvaW50KEEsIEIsIG1hcmdpbiA9IDApIHtcbiAgICByZXR1cm4gIShCLnggPCBBLm1pblggLSBtYXJnaW4gfHwgQi55IDwgQS5taW5ZIC0gbWFyZ2luIHx8IEIueCA+IEEubWF4WCArIG1hcmdpbiB8fCBCLnkgPiBBLm1heFkgKyBtYXJnaW4pO1xuICB9XG4gIHN0YXRpYyBDb21tb24oYm94ZXMpIHtcbiAgICBsZXQgbWluWCA9IEluZmluaXR5O1xuICAgIGxldCBtaW5ZID0gSW5maW5pdHk7XG4gICAgbGV0IG1heFggPSAtSW5maW5pdHk7XG4gICAgbGV0IG1heFkgPSAtSW5maW5pdHk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgQiA9IGJveGVzW2ldO1xuICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIEIubWluWCk7XG4gICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgQi5taW5ZKTtcbiAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBCLm1heFgpO1xuICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIEIubWF4WSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQm94KG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG4gIH1cbiAgc3RhdGljIFNpZGVzKEEsIGluc2V0ID0gMCkge1xuICAgIGNvbnN0IHsgY29ybmVycyB9ID0gQTtcbiAgICBpZiAoaW5zZXQpIHtcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIFtjb3JuZXJzWzBdLCBjb3JuZXJzWzFdXSxcbiAgICAgIFtjb3JuZXJzWzFdLCBjb3JuZXJzWzJdXSxcbiAgICAgIFtjb3JuZXJzWzJdLCBjb3JuZXJzWzNdXSxcbiAgICAgIFtjb3JuZXJzWzNdLCBjb3JuZXJzWzBdXVxuICAgIF07XG4gIH1cbiAgc3RhdGljIFJlc2l6ZShib3gsIGhhbmRsZSwgZHgsIGR5LCBpc0FzcGVjdFJhdGlvTG9ja2VkID0gZmFsc2UpIHtcbiAgICBjb25zdCB7IG1pblg6IGEweCwgbWluWTogYTB5LCBtYXhYOiBhMXgsIG1heFk6IGExeSB9ID0gYm94O1xuICAgIGxldCB7IG1pblg6IGIweCwgbWluWTogYjB5LCBtYXhYOiBiMXgsIG1heFk6IGIxeSB9ID0gYm94O1xuICAgIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjoge1xuICAgICAgICBiMHggKz0gZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICBjYXNlIFwidG9wX3JpZ2h0XCI6XG4gICAgICBjYXNlIFwiYm90dG9tX3JpZ2h0XCI6IHtcbiAgICAgICAgYjF4ICs9IGR4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgIGNhc2UgXCJ0b3BcIjpcbiAgICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgY2FzZSBcInRvcF9yaWdodFwiOiB7XG4gICAgICAgIGIweSArPSBkeTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjpcbiAgICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjoge1xuICAgICAgICBiMXkgKz0gZHk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzY2FsZVggPSAoYjF4IC0gYjB4KSAvIChhMXggLSBhMHgpO1xuICAgIGNvbnN0IHNjYWxlWSA9IChiMXkgLSBiMHkpIC8gKGExeSAtIGEweSk7XG4gICAgY29uc3QgZmxpcFggPSBzY2FsZVggPCAwO1xuICAgIGNvbnN0IGZsaXBZID0gc2NhbGVZIDwgMDtcbiAgICBpZiAoaXNBc3BlY3RSYXRpb0xvY2tlZCkge1xuICAgICAgY29uc3QgYXNwZWN0UmF0aW8gPSAoYTF4IC0gYTB4KSAvIChhMXkgLSBhMHkpO1xuICAgICAgY29uc3QgYncgPSBNYXRoLmFicyhiMXggLSBiMHgpO1xuICAgICAgY29uc3QgYmggPSBNYXRoLmFicyhiMXkgLSBiMHkpO1xuICAgICAgY29uc3QgdHcgPSBidyAqIChzY2FsZVkgPCAwID8gMSA6IC0xKSAqICgxIC8gYXNwZWN0UmF0aW8pO1xuICAgICAgY29uc3QgdGggPSBiaCAqIChzY2FsZVggPCAwID8gMSA6IC0xKSAqIGFzcGVjdFJhdGlvO1xuICAgICAgY29uc3QgaXNUYWxsID0gYXNwZWN0UmF0aW8gPCBidyAvIGJoO1xuICAgICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6IHtcbiAgICAgICAgICBpZiAoaXNUYWxsKSBiMHkgPSBiMXkgKyB0dztcbiAgICAgICAgICBlbHNlIGIweCA9IGIxeCArIHRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjoge1xuICAgICAgICAgIGlmIChpc1RhbGwpIGIweSA9IGIxeSArIHR3O1xuICAgICAgICAgIGVsc2UgYjF4ID0gYjB4IC0gdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOiB7XG4gICAgICAgICAgaWYgKGlzVGFsbCkgYjF5ID0gYjB5IC0gdHc7XG4gICAgICAgICAgZWxzZSBiMXggPSBiMHggLSB0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjoge1xuICAgICAgICAgIGlmIChpc1RhbGwpIGIxeSA9IGIweSAtIHR3O1xuICAgICAgICAgIGVsc2UgYjB4ID0gYjF4ICsgdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgICBjYXNlIFwidG9wXCI6IHtcbiAgICAgICAgICBjb25zdCBtID0gKGIweCArIGIxeCkgLyAyO1xuICAgICAgICAgIGNvbnN0IHcgPSBiaCAqIGFzcGVjdFJhdGlvO1xuICAgICAgICAgIGIweCA9IG0gLSB3IC8gMjtcbiAgICAgICAgICBiMXggPSBtICsgdyAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgY2FzZSBcInJpZ2h0XCI6IHtcbiAgICAgICAgICBjb25zdCBtID0gKGIweSArIGIxeSkgLyAyO1xuICAgICAgICAgIGNvbnN0IGggPSBidyAvIGFzcGVjdFJhdGlvO1xuICAgICAgICAgIGIweSA9IG0gLSBoIC8gMjtcbiAgICAgICAgICBiMXkgPSBtICsgaCAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZsaXBYKSB7XG4gICAgICBjb25zdCB0ID0gYjF4O1xuICAgICAgYjF4ID0gYjB4O1xuICAgICAgYjB4ID0gdDtcbiAgICB9XG4gICAgaWYgKGZsaXBZKSB7XG4gICAgICBjb25zdCB0ID0gYjF5O1xuICAgICAgYjF5ID0gYjB5O1xuICAgICAgYjB5ID0gdDtcbiAgICB9XG4gICAgY29uc3QgZmluYWwgPSBuZXcgQm94KGIweCwgYjB5LCBNYXRoLmFicyhiMXggLSBiMHgpLCBNYXRoLmFicyhiMXkgLSBiMHkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgYm94OiBmaW5hbCxcbiAgICAgIHNjYWxlWDogKyhmaW5hbC53aWR0aCAvIGJveC53aWR0aCAqIChzY2FsZVggPiAwID8gMSA6IC0xKSkudG9GaXhlZCg1KSxcbiAgICAgIHNjYWxlWTogKyhmaW5hbC5oZWlnaHQgLyBib3guaGVpZ2h0ICogKHNjYWxlWSA+IDAgPyAxIDogLTEpKS50b0ZpeGVkKDUpXG4gICAgfTtcbiAgfVxuICBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gQm94LkVxdWFscyh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIEVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIGIueCA9PT0gYS54ICYmIGIueSA9PT0gYS55ICYmIGIudyA9PT0gYS53ICYmIGIuaCA9PT0gYS5oO1xuICB9XG4gIHplcm9GaXgoKSB7XG4gICAgdGhpcy53ID0gTWF0aC5tYXgoMSwgdGhpcy53KTtcbiAgICB0aGlzLmggPSBNYXRoLm1heCgxLCB0aGlzLmgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN0YXRpYyBaZXJvRml4KG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBCb3gob3RoZXIueCwgb3RoZXIueSwgTWF0aC5tYXgoMSwgb3RoZXIudyksIE1hdGgubWF4KDEsIG90aGVyLmgpKTtcbiAgfVxufVxuZnVuY3Rpb24gZmxpcFNlbGVjdGlvbkhhbmRsZVkoaGFuZGxlKSB7XG4gIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgY2FzZSBcInRvcFwiOlxuICAgICAgcmV0dXJuIFwiYm90dG9tXCI7XG4gICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgcmV0dXJuIFwidG9wXCI7XG4gICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICByZXR1cm4gXCJib3R0b21fbGVmdFwiO1xuICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjpcbiAgICAgIHJldHVybiBcImJvdHRvbV9yaWdodFwiO1xuICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOlxuICAgICAgcmV0dXJuIFwidG9wX2xlZnRcIjtcbiAgICBjYXNlIFwiYm90dG9tX3JpZ2h0XCI6XG4gICAgICByZXR1cm4gXCJ0b3BfcmlnaHRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgfVxufVxuZnVuY3Rpb24gZmxpcFNlbGVjdGlvbkhhbmRsZVgoaGFuZGxlKSB7XG4gIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgY2FzZSBcImxlZnRcIjpcbiAgICAgIHJldHVybiBcInJpZ2h0XCI7XG4gICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICByZXR1cm4gXCJsZWZ0XCI7XG4gICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICByZXR1cm4gXCJ0b3BfcmlnaHRcIjtcbiAgICBjYXNlIFwidG9wX3JpZ2h0XCI6XG4gICAgICByZXR1cm4gXCJ0b3BfbGVmdFwiO1xuICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOlxuICAgICAgcmV0dXJuIFwiYm90dG9tX3JpZ2h0XCI7XG4gICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOlxuICAgICAgcmV0dXJuIFwiYm90dG9tX2xlZnRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgfVxufVxuY29uc3QgT1JERVJFRF9TRUxFQ1RJT05fSEFORExFUyA9IFtcbiAgXCJ0b3BcIixcbiAgXCJ0b3BfcmlnaHRcIixcbiAgXCJyaWdodFwiLFxuICBcImJvdHRvbV9yaWdodFwiLFxuICBcImJvdHRvbVwiLFxuICBcImJvdHRvbV9sZWZ0XCIsXG4gIFwibGVmdFwiLFxuICBcInRvcF9sZWZ0XCJcbl07XG5mdW5jdGlvbiByb3RhdGVTZWxlY3Rpb25IYW5kbGUoaGFuZGxlLCByb3RhdGlvbikge1xuICByb3RhdGlvbiA9IHJvdGF0aW9uICUgUEkyO1xuICBjb25zdCBudW1TdGVwcyA9IE1hdGgucm91bmQocm90YXRpb24gLyAoUEkgLyA0KSk7XG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IE9SREVSRURfU0VMRUNUSU9OX0hBTkRMRVMuaW5kZXhPZihoYW5kbGUpO1xuICByZXR1cm4gT1JERVJFRF9TRUxFQ1RJT05fSEFORExFU1soY3VycmVudEluZGV4ICsgbnVtU3RlcHMpICUgT1JERVJFRF9TRUxFQ1RJT05fSEFORExFUy5sZW5ndGhdO1xufVxuZnVuY3Rpb24gaXNTZWxlY3Rpb25Db3JuZXIoc2VsZWN0aW9uKSB7XG4gIHJldHVybiBzZWxlY3Rpb24gPT09IFwidG9wX2xlZnRcIiB8fCBzZWxlY3Rpb24gPT09IFwidG9wX3JpZ2h0XCIgfHwgc2VsZWN0aW9uID09PSBcImJvdHRvbV9yaWdodFwiIHx8IHNlbGVjdGlvbiA9PT0gXCJib3R0b21fbGVmdFwiO1xufVxuY29uc3QgUk9UQVRFX0NPUk5FUl9UT19TRUxFQ1RJT05fQ09STkVSID0ge1xuICB0b3BfbGVmdF9yb3RhdGU6IFwidG9wX2xlZnRcIixcbiAgdG9wX3JpZ2h0X3JvdGF0ZTogXCJ0b3BfcmlnaHRcIixcbiAgYm90dG9tX3JpZ2h0X3JvdGF0ZTogXCJib3R0b21fcmlnaHRcIixcbiAgYm90dG9tX2xlZnRfcm90YXRlOiBcImJvdHRvbV9sZWZ0XCIsXG4gIG1vYmlsZV9yb3RhdGU6IFwidG9wX2xlZnRcIlxufTtcbmV4cG9ydCB7XG4gIEJveCxcbiAgUk9UQVRFX0NPUk5FUl9UT19TRUxFQ1RJT05fQ09STkVSLFxuICBmbGlwU2VsZWN0aW9uSGFuZGxlWCxcbiAgZmxpcFNlbGVjdGlvbkhhbmRsZVksXG4gIGlzU2VsZWN0aW9uQ29ybmVyLFxuICByb3RhdGVTZWxlY3Rpb25IYW5kbGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3gubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mat: () => (/* binding */ Mat),\n/* harmony export */   decomposeMatrix: () => (/* binding */ decomposeMatrix)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\n\nclass Mat {\n  constructor(a, b, c, d, e, f) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.e = e;\n    this.f = f;\n  }\n  a = 1;\n  b = 0;\n  c = 0;\n  d = 1;\n  e = 0;\n  f = 0;\n  equals(m) {\n    return this === m || this.a === m.a && this.b === m.b && this.c === m.c && this.d === m.d && this.e === m.e && this.f === m.f;\n  }\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.e = 0;\n    this.f = 0;\n    return this;\n  }\n  multiply(m) {\n    const m2 = m;\n    const { a, b, c, d, e, f } = this;\n    this.a = a * m2.a + c * m2.b;\n    this.c = a * m2.c + c * m2.d;\n    this.e = a * m2.e + c * m2.f + e;\n    this.b = b * m2.a + d * m2.b;\n    this.d = b * m2.c + d * m2.d;\n    this.f = b * m2.e + d * m2.f + f;\n    return this;\n  }\n  rotate(r, cx, cy) {\n    if (r === 0) return this;\n    if (cx === void 0) return this.multiply(Mat.Rotate(r));\n    return this.translate(cx, cy).multiply(Mat.Rotate(r)).translate(-cx, -cy);\n  }\n  translate(x, y) {\n    return this.multiply(Mat.Translate(x, y));\n  }\n  scale(x, y) {\n    return this.multiply(Mat.Scale(x, y));\n  }\n  invert() {\n    const { a, b, c, d, e, f } = this;\n    const denom = a * d - b * c;\n    this.a = d / denom;\n    this.b = b / -denom;\n    this.c = c / -denom;\n    this.d = a / denom;\n    this.e = (d * e - c * f) / -denom;\n    this.f = (b * e - a * f) / denom;\n    return this;\n  }\n  applyToPoint(point) {\n    return Mat.applyToPoint(this, point);\n  }\n  applyToPoints(points) {\n    return Mat.applyToPoints(this, points);\n  }\n  rotation() {\n    return Mat.Rotation(this);\n  }\n  point() {\n    return Mat.Point(this);\n  }\n  decomposed() {\n    return Mat.Decompose(this);\n  }\n  toCssString() {\n    return Mat.toCssString(this);\n  }\n  setTo(model) {\n    Object.assign(this, model);\n    return this;\n  }\n  decompose() {\n    return Mat.Decompose(this);\n  }\n  clone() {\n    return new Mat(this.a, this.b, this.c, this.d, this.e, this.f);\n  }\n  /* --------------------- Static --------------------- */\n  static Identity() {\n    return new Mat(1, 0, 0, 1, 0, 0);\n  }\n  static Translate(x, y) {\n    return new Mat(1, 0, 0, 1, x, y);\n  }\n  static Rotate(r, cx, cy) {\n    if (r === 0) return Mat.Identity();\n    const cosAngle = Math.cos(r);\n    const sinAngle = Math.sin(r);\n    const rotationMatrix = new Mat(cosAngle, sinAngle, -sinAngle, cosAngle, 0, 0);\n    if (cx === void 0) return rotationMatrix;\n    return Mat.Compose(Mat.Translate(cx, cy), rotationMatrix, Mat.Translate(-cx, -cy));\n  }\n  static Scale(x, y, cx, cy) {\n    const scaleMatrix = new Mat(x, 0, 0, y, 0, 0);\n    if (cx === void 0) return scaleMatrix;\n    return Mat.Compose(Mat.Translate(cx, cy), scaleMatrix, Mat.Translate(-cx, -cy));\n  }\n  static Multiply(m1, m2) {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    };\n  }\n  static Inverse(m) {\n    const denom = m.a * m.d - m.b * m.c;\n    return {\n      a: m.d / denom,\n      b: m.b / -denom,\n      c: m.c / -denom,\n      d: m.a / denom,\n      e: (m.d * m.e - m.c * m.f) / -denom,\n      f: (m.b * m.e - m.a * m.f) / denom\n    };\n  }\n  static Absolute(m) {\n    const denom = m.a * m.d - m.b * m.c;\n    return {\n      a: m.d / denom,\n      b: m.b / -denom,\n      c: m.c / -denom,\n      d: m.a / denom,\n      e: (m.d * m.e - m.c * m.f) / denom,\n      f: (m.b * m.e - m.a * m.f) / -denom\n    };\n  }\n  static Compose(...matrices) {\n    const matrix = Mat.Identity();\n    for (let i = 0, n = matrices.length; i < n; i++) {\n      matrix.multiply(matrices[i]);\n    }\n    return matrix;\n  }\n  static Point(m) {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(m.e, m.f);\n  }\n  static Rotation(m) {\n    let rotation;\n    if (m.a !== 0 || m.c !== 0) {\n      const hypotAc = (m.a * m.a + m.c * m.c) ** 0.5;\n      rotation = Math.acos(m.a / hypotAc) * (m.c > 0 ? -1 : 1);\n    } else if (m.b !== 0 || m.d !== 0) {\n      const hypotBd = (m.b * m.b + m.d * m.d) ** 0.5;\n      rotation = _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.HALF_PI + Math.acos(m.b / hypotBd) * (m.d > 0 ? -1 : 1);\n    } else {\n      rotation = 0;\n    }\n    return (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.clampRadians)(rotation);\n  }\n  static Decompose(m) {\n    let scaleX, scaleY, rotation;\n    if (m.a !== 0 || m.c !== 0) {\n      const hypotAc = (m.a * m.a + m.c * m.c) ** 0.5;\n      scaleX = hypotAc;\n      scaleY = (m.a * m.d - m.b * m.c) / hypotAc;\n      rotation = Math.acos(m.a / hypotAc) * (m.c > 0 ? -1 : 1);\n    } else if (m.b !== 0 || m.d !== 0) {\n      const hypotBd = (m.b * m.b + m.d * m.d) ** 0.5;\n      scaleX = (m.a * m.d - m.b * m.c) / hypotBd;\n      scaleY = hypotBd;\n      rotation = _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.HALF_PI + Math.acos(m.b / hypotBd) * (m.d > 0 ? -1 : 1);\n    } else {\n      scaleX = 0;\n      scaleY = 0;\n      rotation = 0;\n    }\n    return {\n      x: m.e,\n      y: m.f,\n      scaleX,\n      scaleY,\n      rotation: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.clampRadians)(rotation)\n    };\n  }\n  static Smooth(m, precision = 1e10) {\n    m.a = Math.round(m.a * precision) / precision;\n    m.b = Math.round(m.b * precision) / precision;\n    m.c = Math.round(m.c * precision) / precision;\n    m.d = Math.round(m.d * precision) / precision;\n    m.e = Math.round(m.e * precision) / precision;\n    m.f = Math.round(m.f * precision) / precision;\n    return m;\n  }\n  static toCssString(m) {\n    return `matrix(${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.a)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.b)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(\n      m.c\n    )}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.d)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.e)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.f)})`;\n  }\n  static applyToPoint(m, point) {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(\n      m.a * point.x + m.c * point.y + m.e,\n      m.b * point.x + m.d * point.y + m.f,\n      point.z\n    );\n  }\n  static applyToXY(m, x, y) {\n    return [m.a * x + m.c * y + m.e, m.b * x + m.d * y + m.f];\n  }\n  static applyToPoints(m, points) {\n    return points.map(\n      (point) => new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(m.a * point.x + m.c * point.y + m.e, m.b * point.x + m.d * point.y + m.f, point.z)\n    );\n  }\n  static applyToBounds(m, box) {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(m.e + box.minX, m.f + box.minY, box.width, box.height);\n  }\n  static From(m) {\n    return new Mat(m.a, m.b, m.c, m.d, m.e, m.f);\n  }\n  static Cast(m) {\n    return m instanceof Mat ? m : Mat.From(m);\n  }\n}\nfunction decomposeMatrix(m) {\n  return {\n    x: m.e,\n    y: m.f,\n    scaleX: Math.sqrt(m.a * m.a + m.b * m.b),\n    scaleY: Math.sqrt(m.c * m.c + m.d * m.d),\n    rotation: Math.atan2(m.b, m.a)\n  };\n}\n\n//# sourceMappingURL=Mat.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvTWF0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnQztBQUNvQztBQUNwQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsaUJBQWlCLCtDQUFPO0FBQ3hCLE1BQU07QUFDTjtBQUNBO0FBQ0EsV0FBVyx3REFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrQ0FBTztBQUN4QixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdEQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwREFBYyxNQUFNLElBQUksMERBQWMsTUFBTSxJQUFJLDBEQUFjO0FBQ25GO0FBQ0EsTUFBTSxJQUFJLDBEQUFjLE1BQU0sSUFBSSwwREFBYyxNQUFNLElBQUksMERBQWMsTUFBTTtBQUM5RTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5Q0FBRztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlDQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvTWF0Lm1qcz85OGI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCB9IGZyb20gXCIuL0JveC5tanNcIjtcbmltcG9ydCB7IGNsYW1wUmFkaWFucywgSEFMRl9QSSwgdG9Eb21QcmVjaXNpb24gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuL1ZlYy5tanNcIjtcbmNsYXNzIE1hdCB7XG4gIGNvbnN0cnVjdG9yKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0aGlzLmEgPSBhO1xuICAgIHRoaXMuYiA9IGI7XG4gICAgdGhpcy5jID0gYztcbiAgICB0aGlzLmQgPSBkO1xuICAgIHRoaXMuZSA9IGU7XG4gICAgdGhpcy5mID0gZjtcbiAgfVxuICBhID0gMTtcbiAgYiA9IDA7XG4gIGMgPSAwO1xuICBkID0gMTtcbiAgZSA9IDA7XG4gIGYgPSAwO1xuICBlcXVhbHMobSkge1xuICAgIHJldHVybiB0aGlzID09PSBtIHx8IHRoaXMuYSA9PT0gbS5hICYmIHRoaXMuYiA9PT0gbS5iICYmIHRoaXMuYyA9PT0gbS5jICYmIHRoaXMuZCA9PT0gbS5kICYmIHRoaXMuZSA9PT0gbS5lICYmIHRoaXMuZiA9PT0gbS5mO1xuICB9XG4gIGlkZW50aXR5KCkge1xuICAgIHRoaXMuYSA9IDE7XG4gICAgdGhpcy5iID0gMDtcbiAgICB0aGlzLmMgPSAwO1xuICAgIHRoaXMuZCA9IDE7XG4gICAgdGhpcy5lID0gMDtcbiAgICB0aGlzLmYgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG11bHRpcGx5KG0pIHtcbiAgICBjb25zdCBtMiA9IG07XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkLCBlLCBmIH0gPSB0aGlzO1xuICAgIHRoaXMuYSA9IGEgKiBtMi5hICsgYyAqIG0yLmI7XG4gICAgdGhpcy5jID0gYSAqIG0yLmMgKyBjICogbTIuZDtcbiAgICB0aGlzLmUgPSBhICogbTIuZSArIGMgKiBtMi5mICsgZTtcbiAgICB0aGlzLmIgPSBiICogbTIuYSArIGQgKiBtMi5iO1xuICAgIHRoaXMuZCA9IGIgKiBtMi5jICsgZCAqIG0yLmQ7XG4gICAgdGhpcy5mID0gYiAqIG0yLmUgKyBkICogbTIuZiArIGY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcm90YXRlKHIsIGN4LCBjeSkge1xuICAgIGlmIChyID09PSAwKSByZXR1cm4gdGhpcztcbiAgICBpZiAoY3ggPT09IHZvaWQgMCkgcmV0dXJuIHRoaXMubXVsdGlwbHkoTWF0LlJvdGF0ZShyKSk7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKGN4LCBjeSkubXVsdGlwbHkoTWF0LlJvdGF0ZShyKSkudHJhbnNsYXRlKC1jeCwgLWN5KTtcbiAgfVxuICB0cmFuc2xhdGUoeCwgeSkge1xuICAgIHJldHVybiB0aGlzLm11bHRpcGx5KE1hdC5UcmFuc2xhdGUoeCwgeSkpO1xuICB9XG4gIHNjYWxlKHgsIHkpIHtcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBseShNYXQuU2NhbGUoeCwgeSkpO1xuICB9XG4gIGludmVydCgpIHtcbiAgICBjb25zdCB7IGEsIGIsIGMsIGQsIGUsIGYgfSA9IHRoaXM7XG4gICAgY29uc3QgZGVub20gPSBhICogZCAtIGIgKiBjO1xuICAgIHRoaXMuYSA9IGQgLyBkZW5vbTtcbiAgICB0aGlzLmIgPSBiIC8gLWRlbm9tO1xuICAgIHRoaXMuYyA9IGMgLyAtZGVub207XG4gICAgdGhpcy5kID0gYSAvIGRlbm9tO1xuICAgIHRoaXMuZSA9IChkICogZSAtIGMgKiBmKSAvIC1kZW5vbTtcbiAgICB0aGlzLmYgPSAoYiAqIGUgLSBhICogZikgLyBkZW5vbTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhcHBseVRvUG9pbnQocG9pbnQpIHtcbiAgICByZXR1cm4gTWF0LmFwcGx5VG9Qb2ludCh0aGlzLCBwb2ludCk7XG4gIH1cbiAgYXBwbHlUb1BvaW50cyhwb2ludHMpIHtcbiAgICByZXR1cm4gTWF0LmFwcGx5VG9Qb2ludHModGhpcywgcG9pbnRzKTtcbiAgfVxuICByb3RhdGlvbigpIHtcbiAgICByZXR1cm4gTWF0LlJvdGF0aW9uKHRoaXMpO1xuICB9XG4gIHBvaW50KCkge1xuICAgIHJldHVybiBNYXQuUG9pbnQodGhpcyk7XG4gIH1cbiAgZGVjb21wb3NlZCgpIHtcbiAgICByZXR1cm4gTWF0LkRlY29tcG9zZSh0aGlzKTtcbiAgfVxuICB0b0Nzc1N0cmluZygpIHtcbiAgICByZXR1cm4gTWF0LnRvQ3NzU3RyaW5nKHRoaXMpO1xuICB9XG4gIHNldFRvKG1vZGVsKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBtb2RlbCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVjb21wb3NlKCkge1xuICAgIHJldHVybiBNYXQuRGVjb21wb3NlKHRoaXMpO1xuICB9XG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgTWF0KHRoaXMuYSwgdGhpcy5iLCB0aGlzLmMsIHRoaXMuZCwgdGhpcy5lLCB0aGlzLmYpO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTdGF0aWMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIHN0YXRpYyBJZGVudGl0eSgpIHtcbiAgICByZXR1cm4gbmV3IE1hdCgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgfVxuICBzdGF0aWMgVHJhbnNsYXRlKHgsIHkpIHtcbiAgICByZXR1cm4gbmV3IE1hdCgxLCAwLCAwLCAxLCB4LCB5KTtcbiAgfVxuICBzdGF0aWMgUm90YXRlKHIsIGN4LCBjeSkge1xuICAgIGlmIChyID09PSAwKSByZXR1cm4gTWF0LklkZW50aXR5KCk7XG4gICAgY29uc3QgY29zQW5nbGUgPSBNYXRoLmNvcyhyKTtcbiAgICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKHIpO1xuICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdChjb3NBbmdsZSwgc2luQW5nbGUsIC1zaW5BbmdsZSwgY29zQW5nbGUsIDAsIDApO1xuICAgIGlmIChjeCA9PT0gdm9pZCAwKSByZXR1cm4gcm90YXRpb25NYXRyaXg7XG4gICAgcmV0dXJuIE1hdC5Db21wb3NlKE1hdC5UcmFuc2xhdGUoY3gsIGN5KSwgcm90YXRpb25NYXRyaXgsIE1hdC5UcmFuc2xhdGUoLWN4LCAtY3kpKTtcbiAgfVxuICBzdGF0aWMgU2NhbGUoeCwgeSwgY3gsIGN5KSB7XG4gICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgTWF0KHgsIDAsIDAsIHksIDAsIDApO1xuICAgIGlmIChjeCA9PT0gdm9pZCAwKSByZXR1cm4gc2NhbGVNYXRyaXg7XG4gICAgcmV0dXJuIE1hdC5Db21wb3NlKE1hdC5UcmFuc2xhdGUoY3gsIGN5KSwgc2NhbGVNYXRyaXgsIE1hdC5UcmFuc2xhdGUoLWN4LCAtY3kpKTtcbiAgfVxuICBzdGF0aWMgTXVsdGlwbHkobTEsIG0yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6IG0xLmEgKiBtMi5hICsgbTEuYyAqIG0yLmIsXG4gICAgICBjOiBtMS5hICogbTIuYyArIG0xLmMgKiBtMi5kLFxuICAgICAgZTogbTEuYSAqIG0yLmUgKyBtMS5jICogbTIuZiArIG0xLmUsXG4gICAgICBiOiBtMS5iICogbTIuYSArIG0xLmQgKiBtMi5iLFxuICAgICAgZDogbTEuYiAqIG0yLmMgKyBtMS5kICogbTIuZCxcbiAgICAgIGY6IG0xLmIgKiBtMi5lICsgbTEuZCAqIG0yLmYgKyBtMS5mXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgSW52ZXJzZShtKSB7XG4gICAgY29uc3QgZGVub20gPSBtLmEgKiBtLmQgLSBtLmIgKiBtLmM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6IG0uZCAvIGRlbm9tLFxuICAgICAgYjogbS5iIC8gLWRlbm9tLFxuICAgICAgYzogbS5jIC8gLWRlbm9tLFxuICAgICAgZDogbS5hIC8gZGVub20sXG4gICAgICBlOiAobS5kICogbS5lIC0gbS5jICogbS5mKSAvIC1kZW5vbSxcbiAgICAgIGY6IChtLmIgKiBtLmUgLSBtLmEgKiBtLmYpIC8gZGVub21cbiAgICB9O1xuICB9XG4gIHN0YXRpYyBBYnNvbHV0ZShtKSB7XG4gICAgY29uc3QgZGVub20gPSBtLmEgKiBtLmQgLSBtLmIgKiBtLmM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6IG0uZCAvIGRlbm9tLFxuICAgICAgYjogbS5iIC8gLWRlbm9tLFxuICAgICAgYzogbS5jIC8gLWRlbm9tLFxuICAgICAgZDogbS5hIC8gZGVub20sXG4gICAgICBlOiAobS5kICogbS5lIC0gbS5jICogbS5mKSAvIGRlbm9tLFxuICAgICAgZjogKG0uYiAqIG0uZSAtIG0uYSAqIG0uZikgLyAtZGVub21cbiAgICB9O1xuICB9XG4gIHN0YXRpYyBDb21wb3NlKC4uLm1hdHJpY2VzKSB7XG4gICAgY29uc3QgbWF0cml4ID0gTWF0LklkZW50aXR5KCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBtYXRyaWNlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIG1hdHJpeC5tdWx0aXBseShtYXRyaWNlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBtYXRyaXg7XG4gIH1cbiAgc3RhdGljIFBvaW50KG0pIHtcbiAgICByZXR1cm4gbmV3IFZlYyhtLmUsIG0uZik7XG4gIH1cbiAgc3RhdGljIFJvdGF0aW9uKG0pIHtcbiAgICBsZXQgcm90YXRpb247XG4gICAgaWYgKG0uYSAhPT0gMCB8fCBtLmMgIT09IDApIHtcbiAgICAgIGNvbnN0IGh5cG90QWMgPSAobS5hICogbS5hICsgbS5jICogbS5jKSAqKiAwLjU7XG4gICAgICByb3RhdGlvbiA9IE1hdGguYWNvcyhtLmEgLyBoeXBvdEFjKSAqIChtLmMgPiAwID8gLTEgOiAxKTtcbiAgICB9IGVsc2UgaWYgKG0uYiAhPT0gMCB8fCBtLmQgIT09IDApIHtcbiAgICAgIGNvbnN0IGh5cG90QmQgPSAobS5iICogbS5iICsgbS5kICogbS5kKSAqKiAwLjU7XG4gICAgICByb3RhdGlvbiA9IEhBTEZfUEkgKyBNYXRoLmFjb3MobS5iIC8gaHlwb3RCZCkgKiAobS5kID4gMCA/IC0xIDogMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJvdGF0aW9uID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wUmFkaWFucyhyb3RhdGlvbik7XG4gIH1cbiAgc3RhdGljIERlY29tcG9zZShtKSB7XG4gICAgbGV0IHNjYWxlWCwgc2NhbGVZLCByb3RhdGlvbjtcbiAgICBpZiAobS5hICE9PSAwIHx8IG0uYyAhPT0gMCkge1xuICAgICAgY29uc3QgaHlwb3RBYyA9IChtLmEgKiBtLmEgKyBtLmMgKiBtLmMpICoqIDAuNTtcbiAgICAgIHNjYWxlWCA9IGh5cG90QWM7XG4gICAgICBzY2FsZVkgPSAobS5hICogbS5kIC0gbS5iICogbS5jKSAvIGh5cG90QWM7XG4gICAgICByb3RhdGlvbiA9IE1hdGguYWNvcyhtLmEgLyBoeXBvdEFjKSAqIChtLmMgPiAwID8gLTEgOiAxKTtcbiAgICB9IGVsc2UgaWYgKG0uYiAhPT0gMCB8fCBtLmQgIT09IDApIHtcbiAgICAgIGNvbnN0IGh5cG90QmQgPSAobS5iICogbS5iICsgbS5kICogbS5kKSAqKiAwLjU7XG4gICAgICBzY2FsZVggPSAobS5hICogbS5kIC0gbS5iICogbS5jKSAvIGh5cG90QmQ7XG4gICAgICBzY2FsZVkgPSBoeXBvdEJkO1xuICAgICAgcm90YXRpb24gPSBIQUxGX1BJICsgTWF0aC5hY29zKG0uYiAvIGh5cG90QmQpICogKG0uZCA+IDAgPyAtMSA6IDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2FsZVggPSAwO1xuICAgICAgc2NhbGVZID0gMDtcbiAgICAgIHJvdGF0aW9uID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IG0uZSxcbiAgICAgIHk6IG0uZixcbiAgICAgIHNjYWxlWCxcbiAgICAgIHNjYWxlWSxcbiAgICAgIHJvdGF0aW9uOiBjbGFtcFJhZGlhbnMocm90YXRpb24pXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgU21vb3RoKG0sIHByZWNpc2lvbiA9IDFlMTApIHtcbiAgICBtLmEgPSBNYXRoLnJvdW5kKG0uYSAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgbS5iID0gTWF0aC5yb3VuZChtLmIgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIG0uYyA9IE1hdGgucm91bmQobS5jICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICBtLmQgPSBNYXRoLnJvdW5kKG0uZCAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgbS5lID0gTWF0aC5yb3VuZChtLmUgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIG0uZiA9IE1hdGgucm91bmQobS5mICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICByZXR1cm4gbTtcbiAgfVxuICBzdGF0aWMgdG9Dc3NTdHJpbmcobSkge1xuICAgIHJldHVybiBgbWF0cml4KCR7dG9Eb21QcmVjaXNpb24obS5hKX0sICR7dG9Eb21QcmVjaXNpb24obS5iKX0sICR7dG9Eb21QcmVjaXNpb24oXG4gICAgICBtLmNcbiAgICApfSwgJHt0b0RvbVByZWNpc2lvbihtLmQpfSwgJHt0b0RvbVByZWNpc2lvbihtLmUpfSwgJHt0b0RvbVByZWNpc2lvbihtLmYpfSlgO1xuICB9XG4gIHN0YXRpYyBhcHBseVRvUG9pbnQobSwgcG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIG0uYSAqIHBvaW50LnggKyBtLmMgKiBwb2ludC55ICsgbS5lLFxuICAgICAgbS5iICogcG9pbnQueCArIG0uZCAqIHBvaW50LnkgKyBtLmYsXG4gICAgICBwb2ludC56XG4gICAgKTtcbiAgfVxuICBzdGF0aWMgYXBwbHlUb1hZKG0sIHgsIHkpIHtcbiAgICByZXR1cm4gW20uYSAqIHggKyBtLmMgKiB5ICsgbS5lLCBtLmIgKiB4ICsgbS5kICogeSArIG0uZl07XG4gIH1cbiAgc3RhdGljIGFwcGx5VG9Qb2ludHMobSwgcG9pbnRzKSB7XG4gICAgcmV0dXJuIHBvaW50cy5tYXAoXG4gICAgICAocG9pbnQpID0+IG5ldyBWZWMobS5hICogcG9pbnQueCArIG0uYyAqIHBvaW50LnkgKyBtLmUsIG0uYiAqIHBvaW50LnggKyBtLmQgKiBwb2ludC55ICsgbS5mLCBwb2ludC56KVxuICAgICk7XG4gIH1cbiAgc3RhdGljIGFwcGx5VG9Cb3VuZHMobSwgYm94KSB7XG4gICAgcmV0dXJuIG5ldyBCb3gobS5lICsgYm94Lm1pblgsIG0uZiArIGJveC5taW5ZLCBib3gud2lkdGgsIGJveC5oZWlnaHQpO1xuICB9XG4gIHN0YXRpYyBGcm9tKG0pIHtcbiAgICByZXR1cm4gbmV3IE1hdChtLmEsIG0uYiwgbS5jLCBtLmQsIG0uZSwgbS5mKTtcbiAgfVxuICBzdGF0aWMgQ2FzdChtKSB7XG4gICAgcmV0dXJuIG0gaW5zdGFuY2VvZiBNYXQgPyBtIDogTWF0LkZyb20obSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlY29tcG9zZU1hdHJpeChtKSB7XG4gIHJldHVybiB7XG4gICAgeDogbS5lLFxuICAgIHk6IG0uZixcbiAgICBzY2FsZVg6IE1hdGguc3FydChtLmEgKiBtLmEgKyBtLmIgKiBtLmIpLFxuICAgIHNjYWxlWTogTWF0aC5zcXJ0KG0uYyAqIG0uYyArIG0uZCAqIG0uZCksXG4gICAgcm90YXRpb246IE1hdGguYXRhbjIobS5iLCBtLmEpXG4gIH07XG59XG5leHBvcnQge1xuICBNYXQsXG4gIGRlY29tcG9zZU1hdHJpeFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hdC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vec: () => (/* binding */ Vec)\n/* harmony export */ });\n/* harmony import */ var _easings_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\nclass Vec {\n  constructor(x = 0, y = 0, z = 1) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get pressure() {\n    return this.z;\n  }\n  set(x = this.x, y = this.y, z = this.z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  setTo({ x = 0, y = 0, z = 1 }) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  rot(r) {\n    if (r === 0) return this;\n    const { x, y } = this;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    this.x = x * c - y * s;\n    this.y = x * s + y * c;\n    return this;\n  }\n  rotWith(C, r) {\n    if (r === 0) return this;\n    const x = this.x - C.x;\n    const y = this.y - C.y;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    this.x = C.x + (x * c - y * s);\n    this.y = C.y + (x * s + y * c);\n    return this;\n  }\n  clone() {\n    const { x, y, z } = this;\n    return new Vec(x, y, z);\n  }\n  sub(V) {\n    this.x -= V.x;\n    this.y -= V.y;\n    return this;\n  }\n  subXY(x, y) {\n    this.x -= x;\n    this.y -= y;\n    return this;\n  }\n  subScalar(n) {\n    this.x -= n;\n    this.y -= n;\n    return this;\n  }\n  add(V) {\n    this.x += V.x;\n    this.y += V.y;\n    return this;\n  }\n  addXY(x, y) {\n    this.x += x;\n    this.y += y;\n    return this;\n  }\n  addScalar(n) {\n    this.x += n;\n    this.y += n;\n    return this;\n  }\n  clamp(min, max) {\n    this.x = Math.max(this.x, min);\n    this.y = Math.max(this.y, min);\n    if (max !== void 0) {\n      this.x = Math.min(this.x, max);\n      this.y = Math.min(this.y, max);\n    }\n    return this;\n  }\n  div(t) {\n    this.x /= t;\n    this.y /= t;\n    return this;\n  }\n  divV(V) {\n    this.x /= V.x;\n    this.y /= V.y;\n    return this;\n  }\n  mul(t) {\n    this.x *= t;\n    this.y *= t;\n    return this;\n  }\n  mulV(V) {\n    this.x *= V.x;\n    this.y *= V.y;\n    return this;\n  }\n  abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  }\n  nudge(B, distance) {\n    const tan = Vec.Tan(B, this);\n    return this.add(tan.mul(distance));\n  }\n  neg() {\n    this.x *= -1;\n    this.y *= -1;\n    return this;\n  }\n  cross(V) {\n    this.x = this.y * V.z - this.z * V.y;\n    this.y = this.z * V.x - this.x * V.z;\n    return this;\n  }\n  dpr(V) {\n    return Vec.Dpr(this, V);\n  }\n  cpr(V) {\n    return Vec.Cpr(this, V);\n  }\n  len2() {\n    return Vec.Len2(this);\n  }\n  len() {\n    return Vec.Len(this);\n  }\n  pry(V) {\n    return Vec.Pry(this, V);\n  }\n  per() {\n    const { x, y } = this;\n    this.x = y;\n    this.y = -x;\n    return this;\n  }\n  uni() {\n    return Vec.Uni(this);\n  }\n  tan(V) {\n    return Vec.Tan(this, V);\n  }\n  dist(V) {\n    return Vec.Dist(this, V);\n  }\n  distanceToLineSegment(A, B) {\n    return Vec.DistanceToLineSegment(A, B, this);\n  }\n  slope(B) {\n    return Vec.Slope(this, B);\n  }\n  snapToGrid(gridSize) {\n    this.x = Math.round(this.x / gridSize) * gridSize;\n    this.y = Math.round(this.y / gridSize) * gridSize;\n    return this;\n  }\n  angle(B) {\n    return Vec.Angle(this, B);\n  }\n  toAngle() {\n    return Vec.ToAngle(this);\n  }\n  lrp(B, t) {\n    this.x = this.x + (B.x - this.x) * t;\n    this.y = this.y + (B.y - this.y) * t;\n    return this;\n  }\n  equals(B) {\n    return Vec.Equals(this, B);\n  }\n  equalsXY(x, y) {\n    return Vec.EqualsXY(this, x, y);\n  }\n  norm() {\n    const l = this.len();\n    this.x = l === 0 ? 0 : this.x / l;\n    this.y = l === 0 ? 0 : this.y / l;\n    return this;\n  }\n  toFixed() {\n    return Vec.ToFixed(this);\n  }\n  toString() {\n    return Vec.ToString(Vec.ToFixed(this));\n  }\n  toJson() {\n    return Vec.ToJson(this);\n  }\n  toArray() {\n    return Vec.ToArray(this);\n  }\n  static Add(A, B) {\n    return new Vec(A.x + B.x, A.y + B.y);\n  }\n  static AddXY(A, x, y) {\n    return new Vec(A.x + x, A.y + y);\n  }\n  static Sub(A, B) {\n    return new Vec(A.x - B.x, A.y - B.y);\n  }\n  static SubXY(A, x, y) {\n    return new Vec(A.x - x, A.y - y);\n  }\n  static AddScalar(A, n) {\n    return new Vec(A.x + n, A.y + n);\n  }\n  static SubScalar(A, n) {\n    return new Vec(A.x - n, A.y - n);\n  }\n  static Div(A, t) {\n    return new Vec(A.x / t, A.y / t);\n  }\n  static Mul(A, t) {\n    return new Vec(A.x * t, A.y * t);\n  }\n  static DivV(A, B) {\n    return new Vec(A.x / B.x, A.y / B.y);\n  }\n  static MulV(A, B) {\n    return new Vec(A.x * B.x, A.y * B.y);\n  }\n  static Neg(A) {\n    return new Vec(-A.x, -A.y);\n  }\n  /**\n   * Get the perpendicular vector to A.\n   */\n  static Per(A) {\n    return new Vec(A.y, -A.x);\n  }\n  static Abs(A) {\n    return new Vec(Math.abs(A.x), Math.abs(A.y));\n  }\n  // Get the distance between two points.\n  static Dist(A, B) {\n    return ((A.y - B.y) ** 2 + (A.x - B.x) ** 2) ** 0.5;\n  }\n  // Get whether a distance between two points is less than a number. This is faster to calulate than using `Vec.Dist(a, b) < n`.\n  static DistMin(A, B, n) {\n    return (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y) < n ** 2;\n  }\n  // Get the squared distance between two points. This is faster to calculate (no square root) so useful for \"minimum distance\" checks where the actual measurement does not matter.\n  static Dist2(A, B) {\n    return (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y);\n  }\n  /**\n   * Dot product of two vectors which is used to calculate the angle between them.\n   */\n  static Dpr(A, B) {\n    return A.x * B.x + A.y * B.y;\n  }\n  static Cross(A, V) {\n    return new Vec(\n      A.y * V.z - A.z * V.y,\n      A.z * V.x - A.x * V.z\n      // A.z = A.x * V.y - A.y * V.x\n    );\n  }\n  /**\n   * Cross product of two vectors which is used to calculate the area of a parallelogram.\n   */\n  static Cpr(A, B) {\n    return A.x * B.y - B.x * A.y;\n  }\n  static Len2(A) {\n    return A.x * A.x + A.y * A.y;\n  }\n  static Len(A) {\n    return (A.x * A.x + A.y * A.y) ** 0.5;\n  }\n  /**\n   * Get the projection of A onto B.\n   */\n  static Pry(A, B) {\n    return Vec.Dpr(A, B) / Vec.Len(B);\n  }\n  /**\n   * Get the unit vector of A.\n   */\n  static Uni(A) {\n    return Vec.Div(A, Vec.Len(A));\n  }\n  static Tan(A, B) {\n    return Vec.Uni(Vec.Sub(A, B));\n  }\n  static Min(A, B) {\n    return new Vec(Math.min(A.x, B.x), Math.min(A.y, B.y));\n  }\n  static Max(A, B) {\n    return new Vec(Math.max(A.x, B.x), Math.max(A.y, B.y));\n  }\n  static From({ x, y, z = 1 }) {\n    return new Vec(x, y, z);\n  }\n  static FromArray(v) {\n    return new Vec(v[0], v[1]);\n  }\n  static Rot(A, r = 0) {\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    return new Vec(A.x * c - A.y * s, A.x * s + A.y * c);\n  }\n  static RotWith(A, C, r) {\n    const x = A.x - C.x;\n    const y = A.y - C.y;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    return new Vec(C.x + (x * c - y * s), C.y + (x * s + y * c));\n  }\n  /**\n   * Get the nearest point on a line with a known unit vector that passes through point A\n   *\n   * ```ts\n   * Vec.nearestPointOnLineThroughPoint(A, u, Point)\n   * ```\n   *\n   * @param A - Any point on the line\n   * @param u - The unit vector for the line.\n   * @param P - A point not on the line to test.\n   */\n  static NearestPointOnLineThroughPoint(A, u, P) {\n    return Vec.Mul(u, Vec.Sub(P, A).pry(u)).add(A);\n  }\n  static NearestPointOnLineSegment(A, B, P, clamp = true) {\n    if (Vec.Equals(A, P)) return Vec.From(P);\n    if (Vec.Equals(B, P)) return Vec.From(P);\n    const u = Vec.Tan(B, A);\n    const C = Vec.Add(A, Vec.Mul(u, Vec.Sub(P, A).pry(u)));\n    if (clamp) {\n      if (C.x < Math.min(A.x, B.x)) return Vec.Cast(A.x < B.x ? A : B);\n      if (C.x > Math.max(A.x, B.x)) return Vec.Cast(A.x > B.x ? A : B);\n      if (C.y < Math.min(A.y, B.y)) return Vec.Cast(A.y < B.y ? A : B);\n      if (C.y > Math.max(A.y, B.y)) return Vec.Cast(A.y > B.y ? A : B);\n    }\n    return C;\n  }\n  static DistanceToLineThroughPoint(A, u, P) {\n    return Vec.Dist(P, Vec.NearestPointOnLineThroughPoint(A, u, P));\n  }\n  static DistanceToLineSegment(A, B, P, clamp = true) {\n    return Vec.Dist(P, Vec.NearestPointOnLineSegment(A, B, P, clamp));\n  }\n  static Snap(A, step = 1) {\n    return new Vec(Math.round(A.x / step) * step, Math.round(A.y / step) * step);\n  }\n  static Cast(A) {\n    if (A instanceof Vec) return A;\n    return Vec.From(A);\n  }\n  static Slope(A, B) {\n    if (A.x === B.y) return NaN;\n    return (A.y - B.y) / (A.x - B.x);\n  }\n  static IsNaN(A) {\n    return isNaN(A.x) || isNaN(A.y);\n  }\n  static Angle(A, B) {\n    return Math.atan2(B.y - A.y, B.x - A.x);\n  }\n  /**\n   * Linearly interpolate between two points.\n   * @param A - The first point.\n   * @param B - The second point.\n   * @param t - The interpolation value between 0 and 1.\n   * @returns The interpolated point.\n   */\n  static Lrp(A, B, t) {\n    return Vec.Sub(B, A).mul(t).add(A);\n  }\n  static Med(A, B) {\n    return new Vec((A.x + B.x) / 2, (A.y + B.y) / 2);\n  }\n  static Equals(A, B) {\n    return Math.abs(A.x - B.x) < 1e-4 && Math.abs(A.y - B.y) < 1e-4;\n  }\n  static EqualsXY(A, x, y) {\n    return A.x === x && A.y === y;\n  }\n  static Clockwise(A, B, C) {\n    return (C.x - A.x) * (B.y - A.y) - (B.x - A.x) * (C.y - A.y) < 0;\n  }\n  static Rescale(A, n) {\n    const l = Vec.Len(A);\n    return new Vec(n * A.x / l, n * A.y / l);\n  }\n  static ScaleWithOrigin(A, scale, origin) {\n    return Vec.Sub(A, origin).mul(scale).add(origin);\n  }\n  static ToFixed(A) {\n    return new Vec((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toFixed)(A.x), (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toFixed)(A.y));\n  }\n  static ToInt(A) {\n    return new Vec(\n      parseInt(A.x.toFixed(0)),\n      parseInt(A.y.toFixed(0)),\n      parseInt((A.z ?? 0).toFixed(0))\n    );\n  }\n  static ToCss(A) {\n    return `${A.x},${A.y}`;\n  }\n  static Nudge(A, B, distance) {\n    return Vec.Add(A, Vec.Tan(B, A).mul(distance));\n  }\n  static ToString(A) {\n    return `${A.x}, ${A.y}`;\n  }\n  static ToAngle(A) {\n    let r = Math.atan2(A.y, A.x);\n    if (r < 0) r += Math.PI * 2;\n    return r;\n  }\n  static FromAngle(r, length = 1) {\n    return new Vec(Math.cos(r) * length, Math.sin(r) * length);\n  }\n  static ToArray(A) {\n    return [A.x, A.y, A.z];\n  }\n  static ToJson(A) {\n    const { x, y, z } = A;\n    return { x, y, z };\n  }\n  static Average(arr) {\n    const len = arr.length;\n    const avg = new Vec(0, 0);\n    if (len === 0) {\n      return avg;\n    }\n    for (let i = 0; i < len; i++) {\n      avg.add(arr[i]);\n    }\n    return avg.div(len);\n  }\n  static Clamp(A, min, max) {\n    if (max === void 0) {\n      return new Vec(Math.min(Math.max(A.x, min)), Math.min(Math.max(A.y, min)));\n    }\n    return new Vec(Math.min(Math.max(A.x, min), max), Math.min(Math.max(A.y, min), max));\n  }\n  /**\n   * Get an array of points (with simulated pressure) between two points.\n   *\n   * @param A - The first point.\n   * @param B - The second point.\n   * @param steps - The number of points to return.\n   */\n  static PointsBetween(A, B, steps = 6) {\n    const results = [];\n    for (let i = 0; i < steps; i++) {\n      const t = _easings_mjs__WEBPACK_IMPORTED_MODULE_0__.EASINGS.easeInQuad(i / (steps - 1));\n      const point = Vec.Lrp(A, B, t);\n      point.z = Math.min(1, 0.5 + Math.abs(0.5 - ease(t)) * 0.65);\n      results.push(point);\n    }\n    return results;\n  }\n  static SnapToGrid(A, gridSize = 8) {\n    return new Vec(Math.round(A.x / gridSize) * gridSize, Math.round(A.y / gridSize) * gridSize);\n  }\n}\nconst ease = (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n\n//# sourceMappingURL=Vec.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvVmVjLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDRjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUJBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1EQUFPLE9BQU8sbURBQU87QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxJQUFJLEdBQUcsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxJQUFJLElBQUksSUFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CLGdCQUFnQixpREFBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL1ZlYy5tanM/OGQxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFQVNJTkdTIH0gZnJvbSBcIi4vZWFzaW5ncy5tanNcIjtcbmltcG9ydCB7IHRvRml4ZWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmNsYXNzIFZlYyB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgeiA9IDEpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IHByZXNzdXJlKCkge1xuICAgIHJldHVybiB0aGlzLno7XG4gIH1cbiAgc2V0KHggPSB0aGlzLngsIHkgPSB0aGlzLnksIHogPSB0aGlzLnopIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRUbyh7IHggPSAwLCB5ID0gMCwgeiA9IDEgfSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJvdChyKSB7XG4gICAgaWYgKHIgPT09IDApIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcztcbiAgICBjb25zdCBzID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHIpO1xuICAgIHRoaXMueCA9IHggKiBjIC0geSAqIHM7XG4gICAgdGhpcy55ID0geCAqIHMgKyB5ICogYztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByb3RXaXRoKEMsIHIpIHtcbiAgICBpZiAociA9PT0gMCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgeCA9IHRoaXMueCAtIEMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55IC0gQy55O1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihyKTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3Mocik7XG4gICAgdGhpcy54ID0gQy54ICsgKHggKiBjIC0geSAqIHMpO1xuICAgIHRoaXMueSA9IEMueSArICh4ICogcyArIHkgKiBjKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjbG9uZSgpIHtcbiAgICBjb25zdCB7IHgsIHksIHogfSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBWZWMoeCwgeSwgeik7XG4gIH1cbiAgc3ViKFYpIHtcbiAgICB0aGlzLnggLT0gVi54O1xuICAgIHRoaXMueSAtPSBWLnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3ViWFkoeCwgeSkge1xuICAgIHRoaXMueCAtPSB4O1xuICAgIHRoaXMueSAtPSB5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN1YlNjYWxhcihuKSB7XG4gICAgdGhpcy54IC09IG47XG4gICAgdGhpcy55IC09IG47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYWRkKFYpIHtcbiAgICB0aGlzLnggKz0gVi54O1xuICAgIHRoaXMueSArPSBWLnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYWRkWFkoeCwgeSkge1xuICAgIHRoaXMueCArPSB4O1xuICAgIHRoaXMueSArPSB5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFkZFNjYWxhcihuKSB7XG4gICAgdGhpcy54ICs9IG47XG4gICAgdGhpcy55ICs9IG47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xhbXAobWluLCBtYXgpIHtcbiAgICB0aGlzLnggPSBNYXRoLm1heCh0aGlzLngsIG1pbik7XG4gICAgdGhpcy55ID0gTWF0aC5tYXgodGhpcy55LCBtaW4pO1xuICAgIGlmIChtYXggIT09IHZvaWQgMCkge1xuICAgICAgdGhpcy54ID0gTWF0aC5taW4odGhpcy54LCBtYXgpO1xuICAgICAgdGhpcy55ID0gTWF0aC5taW4odGhpcy55LCBtYXgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkaXYodCkge1xuICAgIHRoaXMueCAvPSB0O1xuICAgIHRoaXMueSAvPSB0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGRpdlYoVikge1xuICAgIHRoaXMueCAvPSBWLng7XG4gICAgdGhpcy55IC89IFYueTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBtdWwodCkge1xuICAgIHRoaXMueCAqPSB0O1xuICAgIHRoaXMueSAqPSB0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG11bFYoVikge1xuICAgIHRoaXMueCAqPSBWLng7XG4gICAgdGhpcy55ICo9IFYueTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhYnMoKSB7XG4gICAgdGhpcy54ID0gTWF0aC5hYnModGhpcy54KTtcbiAgICB0aGlzLnkgPSBNYXRoLmFicyh0aGlzLnkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG51ZGdlKEIsIGRpc3RhbmNlKSB7XG4gICAgY29uc3QgdGFuID0gVmVjLlRhbihCLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5hZGQodGFuLm11bChkaXN0YW5jZSkpO1xuICB9XG4gIG5lZygpIHtcbiAgICB0aGlzLnggKj0gLTE7XG4gICAgdGhpcy55ICo9IC0xO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNyb3NzKFYpIHtcbiAgICB0aGlzLnggPSB0aGlzLnkgKiBWLnogLSB0aGlzLnogKiBWLnk7XG4gICAgdGhpcy55ID0gdGhpcy56ICogVi54IC0gdGhpcy54ICogVi56O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGRwcihWKSB7XG4gICAgcmV0dXJuIFZlYy5EcHIodGhpcywgVik7XG4gIH1cbiAgY3ByKFYpIHtcbiAgICByZXR1cm4gVmVjLkNwcih0aGlzLCBWKTtcbiAgfVxuICBsZW4yKCkge1xuICAgIHJldHVybiBWZWMuTGVuMih0aGlzKTtcbiAgfVxuICBsZW4oKSB7XG4gICAgcmV0dXJuIFZlYy5MZW4odGhpcyk7XG4gIH1cbiAgcHJ5KFYpIHtcbiAgICByZXR1cm4gVmVjLlByeSh0aGlzLCBWKTtcbiAgfVxuICBwZXIoKSB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzO1xuICAgIHRoaXMueCA9IHk7XG4gICAgdGhpcy55ID0gLXg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdW5pKCkge1xuICAgIHJldHVybiBWZWMuVW5pKHRoaXMpO1xuICB9XG4gIHRhbihWKSB7XG4gICAgcmV0dXJuIFZlYy5UYW4odGhpcywgVik7XG4gIH1cbiAgZGlzdChWKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0KHRoaXMsIFYpO1xuICB9XG4gIGRpc3RhbmNlVG9MaW5lU2VnbWVudChBLCBCKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQiwgdGhpcyk7XG4gIH1cbiAgc2xvcGUoQikge1xuICAgIHJldHVybiBWZWMuU2xvcGUodGhpcywgQik7XG4gIH1cbiAgc25hcFRvR3JpZChncmlkU2l6ZSkge1xuICAgIHRoaXMueCA9IE1hdGgucm91bmQodGhpcy54IC8gZ3JpZFNpemUpICogZ3JpZFNpemU7XG4gICAgdGhpcy55ID0gTWF0aC5yb3VuZCh0aGlzLnkgLyBncmlkU2l6ZSkgKiBncmlkU2l6ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhbmdsZShCKSB7XG4gICAgcmV0dXJuIFZlYy5BbmdsZSh0aGlzLCBCKTtcbiAgfVxuICB0b0FuZ2xlKCkge1xuICAgIHJldHVybiBWZWMuVG9BbmdsZSh0aGlzKTtcbiAgfVxuICBscnAoQiwgdCkge1xuICAgIHRoaXMueCA9IHRoaXMueCArIChCLnggLSB0aGlzLngpICogdDtcbiAgICB0aGlzLnkgPSB0aGlzLnkgKyAoQi55IC0gdGhpcy55KSAqIHQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZXF1YWxzKEIpIHtcbiAgICByZXR1cm4gVmVjLkVxdWFscyh0aGlzLCBCKTtcbiAgfVxuICBlcXVhbHNYWSh4LCB5KSB7XG4gICAgcmV0dXJuIFZlYy5FcXVhbHNYWSh0aGlzLCB4LCB5KTtcbiAgfVxuICBub3JtKCkge1xuICAgIGNvbnN0IGwgPSB0aGlzLmxlbigpO1xuICAgIHRoaXMueCA9IGwgPT09IDAgPyAwIDogdGhpcy54IC8gbDtcbiAgICB0aGlzLnkgPSBsID09PSAwID8gMCA6IHRoaXMueSAvIGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdG9GaXhlZCgpIHtcbiAgICByZXR1cm4gVmVjLlRvRml4ZWQodGhpcyk7XG4gIH1cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIFZlYy5Ub1N0cmluZyhWZWMuVG9GaXhlZCh0aGlzKSk7XG4gIH1cbiAgdG9Kc29uKCkge1xuICAgIHJldHVybiBWZWMuVG9Kc29uKHRoaXMpO1xuICB9XG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFZlYy5Ub0FycmF5KHRoaXMpO1xuICB9XG4gIHN0YXRpYyBBZGQoQSwgQikge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCArIEIueCwgQS55ICsgQi55KTtcbiAgfVxuICBzdGF0aWMgQWRkWFkoQSwgeCwgeSkge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCArIHgsIEEueSArIHkpO1xuICB9XG4gIHN0YXRpYyBTdWIoQSwgQikge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAtIEIueCwgQS55IC0gQi55KTtcbiAgfVxuICBzdGF0aWMgU3ViWFkoQSwgeCwgeSkge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAtIHgsIEEueSAtIHkpO1xuICB9XG4gIHN0YXRpYyBBZGRTY2FsYXIoQSwgbikge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCArIG4sIEEueSArIG4pO1xuICB9XG4gIHN0YXRpYyBTdWJTY2FsYXIoQSwgbikge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAtIG4sIEEueSAtIG4pO1xuICB9XG4gIHN0YXRpYyBEaXYoQSwgdCkge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAvIHQsIEEueSAvIHQpO1xuICB9XG4gIHN0YXRpYyBNdWwoQSwgdCkge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAqIHQsIEEueSAqIHQpO1xuICB9XG4gIHN0YXRpYyBEaXZWKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggLyBCLngsIEEueSAvIEIueSk7XG4gIH1cbiAgc3RhdGljIE11bFYoQSwgQikge1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAqIEIueCwgQS55ICogQi55KTtcbiAgfVxuICBzdGF0aWMgTmVnKEEpIHtcbiAgICByZXR1cm4gbmV3IFZlYygtQS54LCAtQS55KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwZXJwZW5kaWN1bGFyIHZlY3RvciB0byBBLlxuICAgKi9cbiAgc3RhdGljIFBlcihBKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoQS55LCAtQS54KTtcbiAgfVxuICBzdGF0aWMgQWJzKEEpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLmFicyhBLngpLCBNYXRoLmFicyhBLnkpKTtcbiAgfVxuICAvLyBHZXQgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cy5cbiAgc3RhdGljIERpc3QoQSwgQikge1xuICAgIHJldHVybiAoKEEueSAtIEIueSkgKiogMiArIChBLnggLSBCLngpICoqIDIpICoqIDAuNTtcbiAgfVxuICAvLyBHZXQgd2hldGhlciBhIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cyBpcyBsZXNzIHRoYW4gYSBudW1iZXIuIFRoaXMgaXMgZmFzdGVyIHRvIGNhbHVsYXRlIHRoYW4gdXNpbmcgYFZlYy5EaXN0KGEsIGIpIDwgbmAuXG4gIHN0YXRpYyBEaXN0TWluKEEsIEIsIG4pIHtcbiAgICByZXR1cm4gKEEueCAtIEIueCkgKiAoQS54IC0gQi54KSArIChBLnkgLSBCLnkpICogKEEueSAtIEIueSkgPCBuICoqIDI7XG4gIH1cbiAgLy8gR2V0IHRoZSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cy4gVGhpcyBpcyBmYXN0ZXIgdG8gY2FsY3VsYXRlIChubyBzcXVhcmUgcm9vdCkgc28gdXNlZnVsIGZvciBcIm1pbmltdW0gZGlzdGFuY2VcIiBjaGVja3Mgd2hlcmUgdGhlIGFjdHVhbCBtZWFzdXJlbWVudCBkb2VzIG5vdCBtYXR0ZXIuXG4gIHN0YXRpYyBEaXN0MihBLCBCKSB7XG4gICAgcmV0dXJuIChBLnggLSBCLngpICogKEEueCAtIEIueCkgKyAoQS55IC0gQi55KSAqIChBLnkgLSBCLnkpO1xuICB9XG4gIC8qKlxuICAgKiBEb3QgcHJvZHVjdCBvZiB0d28gdmVjdG9ycyB3aGljaCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgYW5nbGUgYmV0d2VlbiB0aGVtLlxuICAgKi9cbiAgc3RhdGljIERwcihBLCBCKSB7XG4gICAgcmV0dXJuIEEueCAqIEIueCArIEEueSAqIEIueTtcbiAgfVxuICBzdGF0aWMgQ3Jvc3MoQSwgVikge1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgQS55ICogVi56IC0gQS56ICogVi55LFxuICAgICAgQS56ICogVi54IC0gQS54ICogVi56XG4gICAgICAvLyBBLnogPSBBLnggKiBWLnkgLSBBLnkgKiBWLnhcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzIHdoaWNoIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBhcmVhIG9mIGEgcGFyYWxsZWxvZ3JhbS5cbiAgICovXG4gIHN0YXRpYyBDcHIoQSwgQikge1xuICAgIHJldHVybiBBLnggKiBCLnkgLSBCLnggKiBBLnk7XG4gIH1cbiAgc3RhdGljIExlbjIoQSkge1xuICAgIHJldHVybiBBLnggKiBBLnggKyBBLnkgKiBBLnk7XG4gIH1cbiAgc3RhdGljIExlbihBKSB7XG4gICAgcmV0dXJuIChBLnggKiBBLnggKyBBLnkgKiBBLnkpICoqIDAuNTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIEEgb250byBCLlxuICAgKi9cbiAgc3RhdGljIFByeShBLCBCKSB7XG4gICAgcmV0dXJuIFZlYy5EcHIoQSwgQikgLyBWZWMuTGVuKEIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHVuaXQgdmVjdG9yIG9mIEEuXG4gICAqL1xuICBzdGF0aWMgVW5pKEEpIHtcbiAgICByZXR1cm4gVmVjLkRpdihBLCBWZWMuTGVuKEEpKTtcbiAgfVxuICBzdGF0aWMgVGFuKEEsIEIpIHtcbiAgICByZXR1cm4gVmVjLlVuaShWZWMuU3ViKEEsIEIpKTtcbiAgfVxuICBzdGF0aWMgTWluKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLm1pbihBLngsIEIueCksIE1hdGgubWluKEEueSwgQi55KSk7XG4gIH1cbiAgc3RhdGljIE1heChBLCBCKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoTWF0aC5tYXgoQS54LCBCLngpLCBNYXRoLm1heChBLnksIEIueSkpO1xuICB9XG4gIHN0YXRpYyBGcm9tKHsgeCwgeSwgeiA9IDEgfSkge1xuICAgIHJldHVybiBuZXcgVmVjKHgsIHksIHopO1xuICB9XG4gIHN0YXRpYyBGcm9tQXJyYXkodikge1xuICAgIHJldHVybiBuZXcgVmVjKHZbMF0sIHZbMV0pO1xuICB9XG4gIHN0YXRpYyBSb3QoQSwgciA9IDApIHtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHIpO1xuICAgIHJldHVybiBuZXcgVmVjKEEueCAqIGMgLSBBLnkgKiBzLCBBLnggKiBzICsgQS55ICogYyk7XG4gIH1cbiAgc3RhdGljIFJvdFdpdGgoQSwgQywgcikge1xuICAgIGNvbnN0IHggPSBBLnggLSBDLng7XG4gICAgY29uc3QgeSA9IEEueSAtIEMueTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHIpO1xuICAgIHJldHVybiBuZXcgVmVjKEMueCArICh4ICogYyAtIHkgKiBzKSwgQy55ICsgKHggKiBzICsgeSAqIGMpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBuZWFyZXN0IHBvaW50IG9uIGEgbGluZSB3aXRoIGEga25vd24gdW5pdCB2ZWN0b3IgdGhhdCBwYXNzZXMgdGhyb3VnaCBwb2ludCBBXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIFZlYy5uZWFyZXN0UG9pbnRPbkxpbmVUaHJvdWdoUG9pbnQoQSwgdSwgUG9pbnQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gQSAtIEFueSBwb2ludCBvbiB0aGUgbGluZVxuICAgKiBAcGFyYW0gdSAtIFRoZSB1bml0IHZlY3RvciBmb3IgdGhlIGxpbmUuXG4gICAqIEBwYXJhbSBQIC0gQSBwb2ludCBub3Qgb24gdGhlIGxpbmUgdG8gdGVzdC5cbiAgICovXG4gIHN0YXRpYyBOZWFyZXN0UG9pbnRPbkxpbmVUaHJvdWdoUG9pbnQoQSwgdSwgUCkge1xuICAgIHJldHVybiBWZWMuTXVsKHUsIFZlYy5TdWIoUCwgQSkucHJ5KHUpKS5hZGQoQSk7XG4gIH1cbiAgc3RhdGljIE5lYXJlc3RQb2ludE9uTGluZVNlZ21lbnQoQSwgQiwgUCwgY2xhbXAgPSB0cnVlKSB7XG4gICAgaWYgKFZlYy5FcXVhbHMoQSwgUCkpIHJldHVybiBWZWMuRnJvbShQKTtcbiAgICBpZiAoVmVjLkVxdWFscyhCLCBQKSkgcmV0dXJuIFZlYy5Gcm9tKFApO1xuICAgIGNvbnN0IHUgPSBWZWMuVGFuKEIsIEEpO1xuICAgIGNvbnN0IEMgPSBWZWMuQWRkKEEsIFZlYy5NdWwodSwgVmVjLlN1YihQLCBBKS5wcnkodSkpKTtcbiAgICBpZiAoY2xhbXApIHtcbiAgICAgIGlmIChDLnggPCBNYXRoLm1pbihBLngsIEIueCkpIHJldHVybiBWZWMuQ2FzdChBLnggPCBCLnggPyBBIDogQik7XG4gICAgICBpZiAoQy54ID4gTWF0aC5tYXgoQS54LCBCLngpKSByZXR1cm4gVmVjLkNhc3QoQS54ID4gQi54ID8gQSA6IEIpO1xuICAgICAgaWYgKEMueSA8IE1hdGgubWluKEEueSwgQi55KSkgcmV0dXJuIFZlYy5DYXN0KEEueSA8IEIueSA/IEEgOiBCKTtcbiAgICAgIGlmIChDLnkgPiBNYXRoLm1heChBLnksIEIueSkpIHJldHVybiBWZWMuQ2FzdChBLnkgPiBCLnkgPyBBIDogQik7XG4gICAgfVxuICAgIHJldHVybiBDO1xuICB9XG4gIHN0YXRpYyBEaXN0YW5jZVRvTGluZVRocm91Z2hQb2ludChBLCB1LCBQKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0KFAsIFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVUaHJvdWdoUG9pbnQoQSwgdSwgUCkpO1xuICB9XG4gIHN0YXRpYyBEaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQiwgUCwgY2xhbXAgPSB0cnVlKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0KFAsIFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVTZWdtZW50KEEsIEIsIFAsIGNsYW1wKSk7XG4gIH1cbiAgc3RhdGljIFNuYXAoQSwgc3RlcCA9IDEpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLnJvdW5kKEEueCAvIHN0ZXApICogc3RlcCwgTWF0aC5yb3VuZChBLnkgLyBzdGVwKSAqIHN0ZXApO1xuICB9XG4gIHN0YXRpYyBDYXN0KEEpIHtcbiAgICBpZiAoQSBpbnN0YW5jZW9mIFZlYykgcmV0dXJuIEE7XG4gICAgcmV0dXJuIFZlYy5Gcm9tKEEpO1xuICB9XG4gIHN0YXRpYyBTbG9wZShBLCBCKSB7XG4gICAgaWYgKEEueCA9PT0gQi55KSByZXR1cm4gTmFOO1xuICAgIHJldHVybiAoQS55IC0gQi55KSAvIChBLnggLSBCLngpO1xuICB9XG4gIHN0YXRpYyBJc05hTihBKSB7XG4gICAgcmV0dXJuIGlzTmFOKEEueCkgfHwgaXNOYU4oQS55KTtcbiAgfVxuICBzdGF0aWMgQW5nbGUoQSwgQikge1xuICAgIHJldHVybiBNYXRoLmF0YW4yKEIueSAtIEEueSwgQi54IC0gQS54KTtcbiAgfVxuICAvKipcbiAgICogTGluZWFybHkgaW50ZXJwb2xhdGUgYmV0d2VlbiB0d28gcG9pbnRzLlxuICAgKiBAcGFyYW0gQSAtIFRoZSBmaXJzdCBwb2ludC5cbiAgICogQHBhcmFtIEIgLSBUaGUgc2Vjb25kIHBvaW50LlxuICAgKiBAcGFyYW0gdCAtIFRoZSBpbnRlcnBvbGF0aW9uIHZhbHVlIGJldHdlZW4gMCBhbmQgMS5cbiAgICogQHJldHVybnMgVGhlIGludGVycG9sYXRlZCBwb2ludC5cbiAgICovXG4gIHN0YXRpYyBMcnAoQSwgQiwgdCkge1xuICAgIHJldHVybiBWZWMuU3ViKEIsIEEpLm11bCh0KS5hZGQoQSk7XG4gIH1cbiAgc3RhdGljIE1lZChBLCBCKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoKEEueCArIEIueCkgLyAyLCAoQS55ICsgQi55KSAvIDIpO1xuICB9XG4gIHN0YXRpYyBFcXVhbHMoQSwgQikge1xuICAgIHJldHVybiBNYXRoLmFicyhBLnggLSBCLngpIDwgMWUtNCAmJiBNYXRoLmFicyhBLnkgLSBCLnkpIDwgMWUtNDtcbiAgfVxuICBzdGF0aWMgRXF1YWxzWFkoQSwgeCwgeSkge1xuICAgIHJldHVybiBBLnggPT09IHggJiYgQS55ID09PSB5O1xuICB9XG4gIHN0YXRpYyBDbG9ja3dpc2UoQSwgQiwgQykge1xuICAgIHJldHVybiAoQy54IC0gQS54KSAqIChCLnkgLSBBLnkpIC0gKEIueCAtIEEueCkgKiAoQy55IC0gQS55KSA8IDA7XG4gIH1cbiAgc3RhdGljIFJlc2NhbGUoQSwgbikge1xuICAgIGNvbnN0IGwgPSBWZWMuTGVuKEEpO1xuICAgIHJldHVybiBuZXcgVmVjKG4gKiBBLnggLyBsLCBuICogQS55IC8gbCk7XG4gIH1cbiAgc3RhdGljIFNjYWxlV2l0aE9yaWdpbihBLCBzY2FsZSwgb3JpZ2luKSB7XG4gICAgcmV0dXJuIFZlYy5TdWIoQSwgb3JpZ2luKS5tdWwoc2NhbGUpLmFkZChvcmlnaW4pO1xuICB9XG4gIHN0YXRpYyBUb0ZpeGVkKEEpIHtcbiAgICByZXR1cm4gbmV3IFZlYyh0b0ZpeGVkKEEueCksIHRvRml4ZWQoQS55KSk7XG4gIH1cbiAgc3RhdGljIFRvSW50KEEpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIHBhcnNlSW50KEEueC50b0ZpeGVkKDApKSxcbiAgICAgIHBhcnNlSW50KEEueS50b0ZpeGVkKDApKSxcbiAgICAgIHBhcnNlSW50KChBLnogPz8gMCkudG9GaXhlZCgwKSlcbiAgICApO1xuICB9XG4gIHN0YXRpYyBUb0NzcyhBKSB7XG4gICAgcmV0dXJuIGAke0EueH0sJHtBLnl9YDtcbiAgfVxuICBzdGF0aWMgTnVkZ2UoQSwgQiwgZGlzdGFuY2UpIHtcbiAgICByZXR1cm4gVmVjLkFkZChBLCBWZWMuVGFuKEIsIEEpLm11bChkaXN0YW5jZSkpO1xuICB9XG4gIHN0YXRpYyBUb1N0cmluZyhBKSB7XG4gICAgcmV0dXJuIGAke0EueH0sICR7QS55fWA7XG4gIH1cbiAgc3RhdGljIFRvQW5nbGUoQSkge1xuICAgIGxldCByID0gTWF0aC5hdGFuMihBLnksIEEueCk7XG4gICAgaWYgKHIgPCAwKSByICs9IE1hdGguUEkgKiAyO1xuICAgIHJldHVybiByO1xuICB9XG4gIHN0YXRpYyBGcm9tQW5nbGUociwgbGVuZ3RoID0gMSkge1xuICAgIHJldHVybiBuZXcgVmVjKE1hdGguY29zKHIpICogbGVuZ3RoLCBNYXRoLnNpbihyKSAqIGxlbmd0aCk7XG4gIH1cbiAgc3RhdGljIFRvQXJyYXkoQSkge1xuICAgIHJldHVybiBbQS54LCBBLnksIEEuel07XG4gIH1cbiAgc3RhdGljIFRvSnNvbihBKSB7XG4gICAgY29uc3QgeyB4LCB5LCB6IH0gPSBBO1xuICAgIHJldHVybiB7IHgsIHksIHogfTtcbiAgfVxuICBzdGF0aWMgQXZlcmFnZShhcnIpIHtcbiAgICBjb25zdCBsZW4gPSBhcnIubGVuZ3RoO1xuICAgIGNvbnN0IGF2ZyA9IG5ldyBWZWMoMCwgMCk7XG4gICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF2ZztcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXZnLmFkZChhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXZnLmRpdihsZW4pO1xuICB9XG4gIHN0YXRpYyBDbGFtcChBLCBtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG5ldyBWZWMoTWF0aC5taW4oTWF0aC5tYXgoQS54LCBtaW4pKSwgTWF0aC5taW4oTWF0aC5tYXgoQS55LCBtaW4pKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVmVjKE1hdGgubWluKE1hdGgubWF4KEEueCwgbWluKSwgbWF4KSwgTWF0aC5taW4oTWF0aC5tYXgoQS55LCBtaW4pLCBtYXgpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGFycmF5IG9mIHBvaW50cyAod2l0aCBzaW11bGF0ZWQgcHJlc3N1cmUpIGJldHdlZW4gdHdvIHBvaW50cy5cbiAgICpcbiAgICogQHBhcmFtIEEgLSBUaGUgZmlyc3QgcG9pbnQuXG4gICAqIEBwYXJhbSBCIC0gVGhlIHNlY29uZCBwb2ludC5cbiAgICogQHBhcmFtIHN0ZXBzIC0gVGhlIG51bWJlciBvZiBwb2ludHMgdG8gcmV0dXJuLlxuICAgKi9cbiAgc3RhdGljIFBvaW50c0JldHdlZW4oQSwgQiwgc3RlcHMgPSA2KSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RlcHM7IGkrKykge1xuICAgICAgY29uc3QgdCA9IEVBU0lOR1MuZWFzZUluUXVhZChpIC8gKHN0ZXBzIC0gMSkpO1xuICAgICAgY29uc3QgcG9pbnQgPSBWZWMuTHJwKEEsIEIsIHQpO1xuICAgICAgcG9pbnQueiA9IE1hdGgubWluKDEsIDAuNSArIE1hdGguYWJzKDAuNSAtIGVhc2UodCkpICogMC42NSk7XG4gICAgICByZXN1bHRzLnB1c2gocG9pbnQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICBzdGF0aWMgU25hcFRvR3JpZChBLCBncmlkU2l6ZSA9IDgpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLnJvdW5kKEEueCAvIGdyaWRTaXplKSAqIGdyaWRTaXplLCBNYXRoLnJvdW5kKEEueSAvIGdyaWRTaXplKSAqIGdyaWRTaXplKTtcbiAgfVxufVxuY29uc3QgZWFzZSA9ICh0KSA9PiB0IDwgMC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHQ7XG5leHBvcnQge1xuICBWZWNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EASINGS: () => (/* binding */ EASINGS)\n/* harmony export */ });\nconst EASINGS = {\n  linear: (t) => t,\n  easeInQuad: (t) => t * t,\n  easeOutQuad: (t) => t * (2 - t),\n  easeInOutQuad: (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  easeInCubic: (t) => t * t * t,\n  easeOutCubic: (t) => --t * t * t + 1,\n  easeInOutCubic: (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  easeInQuart: (t) => t * t * t * t,\n  easeOutQuart: (t) => 1 - --t * t * t * t,\n  easeInOutQuart: (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  easeInQuint: (t) => t * t * t * t * t,\n  easeOutQuint: (t) => 1 + --t * t * t * t * t,\n  easeInOutQuint: (t) => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\n  easeInSine: (t) => 1 - Math.cos(t * Math.PI / 2),\n  easeOutSine: (t) => Math.sin(t * Math.PI / 2),\n  easeInOutSine: (t) => -(Math.cos(Math.PI * t) - 1) / 2,\n  easeInExpo: (t) => t <= 0 ? 0 : Math.pow(2, 10 * t - 10),\n  easeOutExpo: (t) => t >= 1 ? 1 : 1 - Math.pow(2, -10 * t),\n  easeInOutExpo: (t) => t <= 0 ? 0 : t >= 1 ? 1 : t < 0.5 ? Math.pow(2, 20 * t - 10) / 2 : (2 - Math.pow(2, -20 * t + 10)) / 2\n};\n\n//# sourceMappingURL=easings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZWFzaW5ncy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9lYXNpbmdzLm1qcz9mZTA3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVBU0lOR1MgPSB7XG4gIGxpbmVhcjogKHQpID0+IHQsXG4gIGVhc2VJblF1YWQ6ICh0KSA9PiB0ICogdCxcbiAgZWFzZU91dFF1YWQ6ICh0KSA9PiB0ICogKDIgLSB0KSxcbiAgZWFzZUluT3V0UXVhZDogKHQpID0+IHQgPCAwLjUgPyAyICogdCAqIHQgOiAtMSArICg0IC0gMiAqIHQpICogdCxcbiAgZWFzZUluQ3ViaWM6ICh0KSA9PiB0ICogdCAqIHQsXG4gIGVhc2VPdXRDdWJpYzogKHQpID0+IC0tdCAqIHQgKiB0ICsgMSxcbiAgZWFzZUluT3V0Q3ViaWM6ICh0KSA9PiB0IDwgMC41ID8gNCAqIHQgKiB0ICogdCA6ICh0IC0gMSkgKiAoMiAqIHQgLSAyKSAqICgyICogdCAtIDIpICsgMSxcbiAgZWFzZUluUXVhcnQ6ICh0KSA9PiB0ICogdCAqIHQgKiB0LFxuICBlYXNlT3V0UXVhcnQ6ICh0KSA9PiAxIC0gLS10ICogdCAqIHQgKiB0LFxuICBlYXNlSW5PdXRRdWFydDogKHQpID0+IHQgPCAwLjUgPyA4ICogdCAqIHQgKiB0ICogdCA6IDEgLSA4ICogLS10ICogdCAqIHQgKiB0LFxuICBlYXNlSW5RdWludDogKHQpID0+IHQgKiB0ICogdCAqIHQgKiB0LFxuICBlYXNlT3V0UXVpbnQ6ICh0KSA9PiAxICsgLS10ICogdCAqIHQgKiB0ICogdCxcbiAgZWFzZUluT3V0UXVpbnQ6ICh0KSA9PiB0IDwgMC41ID8gMTYgKiB0ICogdCAqIHQgKiB0ICogdCA6IDEgKyAxNiAqIC0tdCAqIHQgKiB0ICogdCAqIHQsXG4gIGVhc2VJblNpbmU6ICh0KSA9PiAxIC0gTWF0aC5jb3ModCAqIE1hdGguUEkgLyAyKSxcbiAgZWFzZU91dFNpbmU6ICh0KSA9PiBNYXRoLnNpbih0ICogTWF0aC5QSSAvIDIpLFxuICBlYXNlSW5PdXRTaW5lOiAodCkgPT4gLShNYXRoLmNvcyhNYXRoLlBJICogdCkgLSAxKSAvIDIsXG4gIGVhc2VJbkV4cG86ICh0KSA9PiB0IDw9IDAgPyAwIDogTWF0aC5wb3coMiwgMTAgKiB0IC0gMTApLFxuICBlYXNlT3V0RXhwbzogKHQpID0+IHQgPj0gMSA/IDEgOiAxIC0gTWF0aC5wb3coMiwgLTEwICogdCksXG4gIGVhc2VJbk91dEV4cG86ICh0KSA9PiB0IDw9IDAgPyAwIDogdCA+PSAxID8gMSA6IHQgPCAwLjUgPyBNYXRoLnBvdygyLCAyMCAqIHQgLSAxMCkgLyAyIDogKDIgLSBNYXRoLnBvdygyLCAtMjAgKiB0ICsgMTApKSAvIDJcbn07XG5leHBvcnQge1xuICBFQVNJTkdTXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWFzaW5ncy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arc2d: () => (/* binding */ Arc2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\nclass Arc2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Geometry2d {\n  _center;\n  radius;\n  start;\n  end;\n  largeArcFlag;\n  sweepFlag;\n  measure;\n  angleStart;\n  angleEnd;\n  constructor(config) {\n    super({ ...config, isFilled: false, isClosed: false });\n    const { center, sweepFlag, largeArcFlag, start, end } = config;\n    if (start.equals(end)) throw Error(`Arc must have different start and end points.`);\n    this.angleStart = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, start);\n    this.angleEnd = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, end);\n    this.radius = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(center, start);\n    this.measure = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getArcMeasure)(this.angleStart, this.angleEnd, sweepFlag, largeArcFlag);\n    this.start = start;\n    this.end = end;\n    this.sweepFlag = sweepFlag;\n    this.largeArcFlag = largeArcFlag;\n    this._center = center;\n  }\n  nearestPoint(point) {\n    const { _center, measure, radius, angleEnd, angleStart, start: A, end: B } = this;\n    const t = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointInArcT)(measure, angleStart, angleEnd, _center.angle(point));\n    if (t <= 0) return A;\n    if (t >= 1) return B;\n    const P = _center.clone().add(point.clone().sub(_center).uni().mul(radius));\n    let nearest;\n    let dist = Infinity;\n    let d;\n    for (const p of [A, B, P]) {\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(point, p);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    const { _center, radius, measure, angleStart, angleEnd } = this;\n    const intersection = (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_1__.intersectLineSegmentCircle)(A, B, _center, radius);\n    if (intersection === null) return false;\n    return intersection.some((p) => {\n      const result = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointInArcT)(measure, angleStart, angleEnd, _center.angle(p));\n      return result >= 0 && result <= 1;\n    });\n  }\n  getVertices() {\n    const { _center, measure, length, radius, angleStart } = this;\n    const vertices = [];\n    for (let i = 0, n = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_4__.getVerticesCountForLength)(Math.abs(length)); i < n + 1; i++) {\n      const t = i / n * measure;\n      const angle = angleStart + t;\n      vertices.push((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointOnCircle)(_center, radius, angle));\n    }\n    return vertices;\n  }\n  getSvgPathData(first = true) {\n    const { start, end, radius, largeArcFlag, sweepFlag } = this;\n    return `${first ? `M${start.toFixed()}` : ``} A${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.toFixed()}`;\n  }\n  getLength() {\n    return this.measure * this.radius;\n  }\n}\n\n//# sourceMappingURL=Arc2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQXJjMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUM2QjtBQUNpQjtBQUNqQztBQUN1QjtBQUNyRSxvQkFBb0IsdURBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxZQUFZLDhDQUE4QztBQUMxRDtBQUNBLHNCQUFzQix5Q0FBRztBQUN6QixvQkFBb0IseUNBQUc7QUFDdkIsa0JBQWtCLHlDQUFHO0FBQ3JCLG1CQUFtQix5REFBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUVBQW1FO0FBQy9FLGNBQWMsMERBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBaUQ7QUFDN0QseUJBQXlCLDBFQUEwQjtBQUNuRDtBQUNBO0FBQ0EscUJBQXFCLDBEQUFjO0FBQ25DO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZLCtDQUErQztBQUMzRDtBQUNBLHdCQUF3QixrRkFBeUIsb0JBQW9CLFdBQVc7QUFDaEY7QUFDQTtBQUNBLG9CQUFvQiw0REFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhDQUE4QztBQUMxRCxjQUFjLFlBQVksZ0JBQWdCLFFBQVEsR0FBRyxRQUFRLEVBQUUsUUFBUSxJQUFJLGNBQWMsRUFBRSxXQUFXLEVBQUUsY0FBYztBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0FyYzJkLm1qcz8wZjMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZSB9IGZyb20gXCIuLi9pbnRlcnNlY3QubWpzXCI7XG5pbXBvcnQgeyBnZXRBcmNNZWFzdXJlLCBnZXRQb2ludEluQXJjVCwgZ2V0UG9pbnRPbkNpcmNsZSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aCB9IGZyb20gXCIuL2dlb21ldHJ5LWNvbnN0YW50cy5tanNcIjtcbmNsYXNzIEFyYzJkIGV4dGVuZHMgR2VvbWV0cnkyZCB7XG4gIF9jZW50ZXI7XG4gIHJhZGl1cztcbiAgc3RhcnQ7XG4gIGVuZDtcbiAgbGFyZ2VBcmNGbGFnO1xuICBzd2VlcEZsYWc7XG4gIG1lYXN1cmU7XG4gIGFuZ2xlU3RhcnQ7XG4gIGFuZ2xlRW5kO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNGaWxsZWQ6IGZhbHNlLCBpc0Nsb3NlZDogZmFsc2UgfSk7XG4gICAgY29uc3QgeyBjZW50ZXIsIHN3ZWVwRmxhZywgbGFyZ2VBcmNGbGFnLCBzdGFydCwgZW5kIH0gPSBjb25maWc7XG4gICAgaWYgKHN0YXJ0LmVxdWFscyhlbmQpKSB0aHJvdyBFcnJvcihgQXJjIG11c3QgaGF2ZSBkaWZmZXJlbnQgc3RhcnQgYW5kIGVuZCBwb2ludHMuYCk7XG4gICAgdGhpcy5hbmdsZVN0YXJ0ID0gVmVjLkFuZ2xlKGNlbnRlciwgc3RhcnQpO1xuICAgIHRoaXMuYW5nbGVFbmQgPSBWZWMuQW5nbGUoY2VudGVyLCBlbmQpO1xuICAgIHRoaXMucmFkaXVzID0gVmVjLkRpc3QoY2VudGVyLCBzdGFydCk7XG4gICAgdGhpcy5tZWFzdXJlID0gZ2V0QXJjTWVhc3VyZSh0aGlzLmFuZ2xlU3RhcnQsIHRoaXMuYW5nbGVFbmQsIHN3ZWVwRmxhZywgbGFyZ2VBcmNGbGFnKTtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgdGhpcy5zd2VlcEZsYWcgPSBzd2VlcEZsYWc7XG4gICAgdGhpcy5sYXJnZUFyY0ZsYWcgPSBsYXJnZUFyY0ZsYWc7XG4gICAgdGhpcy5fY2VudGVyID0gY2VudGVyO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgbWVhc3VyZSwgcmFkaXVzLCBhbmdsZUVuZCwgYW5nbGVTdGFydCwgc3RhcnQ6IEEsIGVuZDogQiB9ID0gdGhpcztcbiAgICBjb25zdCB0ID0gZ2V0UG9pbnRJbkFyY1QobWVhc3VyZSwgYW5nbGVTdGFydCwgYW5nbGVFbmQsIF9jZW50ZXIuYW5nbGUocG9pbnQpKTtcbiAgICBpZiAodCA8PSAwKSByZXR1cm4gQTtcbiAgICBpZiAodCA+PSAxKSByZXR1cm4gQjtcbiAgICBjb25zdCBQID0gX2NlbnRlci5jbG9uZSgpLmFkZChwb2ludC5jbG9uZSgpLnN1YihfY2VudGVyKS51bmkoKS5tdWwocmFkaXVzKSk7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZDtcbiAgICBmb3IgKGNvbnN0IHAgb2YgW0EsIEIsIFBdKSB7XG4gICAgICBkID0gVmVjLkRpc3QyKHBvaW50LCBwKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdCkgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQikge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgcmFkaXVzLCBtZWFzdXJlLCBhbmdsZVN0YXJ0LCBhbmdsZUVuZCB9ID0gdGhpcztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZShBLCBCLCBfY2VudGVyLCByYWRpdXMpO1xuICAgIGlmIChpbnRlcnNlY3Rpb24gPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uLnNvbWUoKHApID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFBvaW50SW5BcmNUKG1lYXN1cmUsIGFuZ2xlU3RhcnQsIGFuZ2xlRW5kLCBfY2VudGVyLmFuZ2xlKHApKTtcbiAgICAgIHJldHVybiByZXN1bHQgPj0gMCAmJiByZXN1bHQgPD0gMTtcbiAgICB9KTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICBjb25zdCB7IF9jZW50ZXIsIG1lYXN1cmUsIGxlbmd0aCwgcmFkaXVzLCBhbmdsZVN0YXJ0IH0gPSB0aGlzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBnZXRWZXJ0aWNlc0NvdW50Rm9yTGVuZ3RoKE1hdGguYWJzKGxlbmd0aCkpOyBpIDwgbiArIDE7IGkrKykge1xuICAgICAgY29uc3QgdCA9IGkgLyBuICogbWVhc3VyZTtcbiAgICAgIGNvbnN0IGFuZ2xlID0gYW5nbGVTdGFydCArIHQ7XG4gICAgICB2ZXJ0aWNlcy5wdXNoKGdldFBvaW50T25DaXJjbGUoX2NlbnRlciwgcmFkaXVzLCBhbmdsZSkpO1xuICAgIH1cbiAgICByZXR1cm4gdmVydGljZXM7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoZmlyc3QgPSB0cnVlKSB7XG4gICAgY29uc3QgeyBzdGFydCwgZW5kLCByYWRpdXMsIGxhcmdlQXJjRmxhZywgc3dlZXBGbGFnIH0gPSB0aGlzO1xuICAgIHJldHVybiBgJHtmaXJzdCA/IGBNJHtzdGFydC50b0ZpeGVkKCl9YCA6IGBgfSBBJHtyYWRpdXN9ICR7cmFkaXVzfSAwICR7bGFyZ2VBcmNGbGFnfSAke3N3ZWVwRmxhZ30gJHtlbmQudG9GaXhlZCgpfWA7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLm1lYXN1cmUgKiB0aGlzLnJhZGl1cztcbiAgfVxufVxuZXhwb3J0IHtcbiAgQXJjMmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcmMyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Circle2d: () => (/* binding */ Circle2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\n\nclass Circle2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Geometry2d {\n  constructor(config) {\n    super({ isClosed: true, ...config });\n    this.config = config;\n    const { x = 0, y = 0, radius } = config;\n    this.x = x;\n    this.y = y;\n    this._center = new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(radius + x, radius + y);\n    this.radius = radius;\n  }\n  _center;\n  radius;\n  x;\n  y;\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(this.x, this.y, this.radius * 2, this.radius * 2);\n  }\n  getVertices() {\n    const { _center, radius } = this;\n    const perimeter = _utils_mjs__WEBPACK_IMPORTED_MODULE_3__.PI2 * radius;\n    const vertices = [];\n    for (let i = 0, n = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.getVerticesCountForLength)(perimeter); i < n; i++) {\n      const angle = i / n * _utils_mjs__WEBPACK_IMPORTED_MODULE_3__.PI2;\n      vertices.push((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointOnCircle)(_center, radius, angle));\n    }\n    return vertices;\n  }\n  nearestPoint(point) {\n    const { _center, radius } = this;\n    if (_center.equals(point)) return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.AddXY(_center, radius, 0);\n    return _center.clone().add(point.clone().sub(_center).uni().mul(radius));\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    const { _center, radius } = this;\n    return (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_2__.intersectLineSegmentCircle)(A, B, _center, radius + distance) !== null;\n  }\n  getSvgPathData() {\n    const { _center, radius } = this;\n    return `M${_center.x + radius},${_center.y} a${radius},${radius} 0 1,0 ${radius * 2},0a${radius},${radius} 0 1,0 -${radius * 2},0`;\n  }\n}\n\n//# sourceMappingURL=Circle2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ2lyY2xlMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUM7QUFDQTtBQUM2QjtBQUNUO0FBQ1A7QUFDdUI7QUFDckUsdUJBQXVCLHVEQUFVO0FBQ2pDO0FBQ0EsWUFBWSwyQkFBMkI7QUFDdkM7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0EsdUJBQXVCLHlDQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsc0JBQXNCLDJDQUFHO0FBQ3pCO0FBQ0Esd0JBQXdCLGtGQUF5QixhQUFhLE9BQU87QUFDckUsNEJBQTRCLDJDQUFHO0FBQy9CLG9CQUFvQiw0REFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QixzQ0FBc0MseUNBQUc7QUFDekM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsV0FBVywwRUFBMEI7QUFDckM7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCLGVBQWUsbUJBQW1CLEdBQUcsV0FBVyxHQUFHLE9BQU8sR0FBRyxRQUFRLFFBQVEsV0FBVyxLQUFLLE9BQU8sR0FBRyxRQUFRLFNBQVMsV0FBVztBQUNuSTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0NpcmNsZTJkLm1qcz9jMDMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCB9IGZyb20gXCIuLi9Cb3gubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgaW50ZXJzZWN0TGluZVNlZ21lbnRDaXJjbGUgfSBmcm9tIFwiLi4vaW50ZXJzZWN0Lm1qc1wiO1xuaW1wb3J0IHsgUEkyLCBnZXRQb2ludE9uQ2lyY2xlIH0gZnJvbSBcIi4uL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkyZCB9IGZyb20gXCIuL0dlb21ldHJ5MmQubWpzXCI7XG5pbXBvcnQgeyBnZXRWZXJ0aWNlc0NvdW50Rm9yTGVuZ3RoIH0gZnJvbSBcIi4vZ2VvbWV0cnktY29uc3RhbnRzLm1qc1wiO1xuY2xhc3MgQ2lyY2xlMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyBpc0Nsb3NlZDogdHJ1ZSwgLi4uY29uZmlnIH0pO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIGNvbnN0IHsgeCA9IDAsIHkgPSAwLCByYWRpdXMgfSA9IGNvbmZpZztcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5fY2VudGVyID0gbmV3IFZlYyhyYWRpdXMgKyB4LCByYWRpdXMgKyB5KTtcbiAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgfVxuICBfY2VudGVyO1xuICByYWRpdXM7XG4gIHg7XG4gIHk7XG4gIGdldEJvdW5kcygpIHtcbiAgICByZXR1cm4gbmV3IEJveCh0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMgKiAyLCB0aGlzLnJhZGl1cyAqIDIpO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgcmFkaXVzIH0gPSB0aGlzO1xuICAgIGNvbnN0IHBlcmltZXRlciA9IFBJMiAqIHJhZGl1cztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aChwZXJpbWV0ZXIpOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCBhbmdsZSA9IGkgLyBuICogUEkyO1xuICAgICAgdmVydGljZXMucHVzaChnZXRQb2ludE9uQ2lyY2xlKF9jZW50ZXIsIHJhZGl1cywgYW5nbGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgcmFkaXVzIH0gPSB0aGlzO1xuICAgIGlmIChfY2VudGVyLmVxdWFscyhwb2ludCkpIHJldHVybiBWZWMuQWRkWFkoX2NlbnRlciwgcmFkaXVzLCAwKTtcbiAgICByZXR1cm4gX2NlbnRlci5jbG9uZSgpLmFkZChwb2ludC5jbG9uZSgpLnN1YihfY2VudGVyKS51bmkoKS5tdWwocmFkaXVzKSk7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIsIGRpc3RhbmNlID0gMCkge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgcmFkaXVzIH0gPSB0aGlzO1xuICAgIHJldHVybiBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZShBLCBCLCBfY2VudGVyLCByYWRpdXMgKyBkaXN0YW5jZSkgIT09IG51bGw7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyBfY2VudGVyLCByYWRpdXMgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGBNJHtfY2VudGVyLnggKyByYWRpdXN9LCR7X2NlbnRlci55fSBhJHtyYWRpdXN9LCR7cmFkaXVzfSAwIDEsMCAke3JhZGl1cyAqIDJ9LDBhJHtyYWRpdXN9LCR7cmFkaXVzfSAwIDEsMCAtJHtyYWRpdXMgKiAyfSwwYDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgQ2lyY2xlMmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaXJjbGUyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CubicBezier2d: () => (/* binding */ CubicBezier2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n\n\nclass CubicBezier2d extends _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Polyline2d {\n  a;\n  b;\n  c;\n  d;\n  constructor(config) {\n    const { start: a, cp1: b, cp2: c, end: d } = config;\n    super({ ...config, points: [a, d] });\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n  }\n  getVertices() {\n    const vertices = [];\n    const { a, b, c, d } = this;\n    for (let i = 0, n = 10; i <= n; i++) {\n      const t = i / n;\n      vertices.push(\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(\n          (1 - t) * (1 - t) * (1 - t) * a.x + 3 * ((1 - t) * (1 - t)) * t * b.x + 3 * (1 - t) * (t * t) * c.x + t * t * t * d.x,\n          (1 - t) * (1 - t) * (1 - t) * a.y + 3 * ((1 - t) * (1 - t)) * t * b.y + 3 * (1 - t) * (t * t) * c.y + t * t * t * d.y\n        )\n      );\n    }\n    return vertices;\n  }\n  midPoint() {\n    return CubicBezier2d.GetAtT(this, 0.5);\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const edge of this.segments) {\n      p = edge.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  getSvgPathData(first = true) {\n    const { a, b, c, d } = this;\n    return `${first ? `M ${a.toFixed()} ` : ``} C${b.toFixed()} ${c.toFixed()} ${d.toFixed()}`;\n  }\n  static GetAtT(segment, t) {\n    const { a, b, c, d } = segment;\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(\n      (1 - t) * (1 - t) * (1 - t) * a.x + 3 * ((1 - t) * (1 - t)) * t * b.x + 3 * (1 - t) * (t * t) * c.x + t * t * t * d.x,\n      (1 - t) * (1 - t) * (1 - t) * a.y + 3 * ((1 - t) * (1 - t)) * t * b.y + 3 * (1 - t) * (t * t) * c.y + t * t * t * d.y\n    );\n  }\n  getLength(precision = 32) {\n    let n1, p1 = this.a, length = 0;\n    for (let i = 1; i <= precision; i++) {\n      n1 = CubicBezier2d.GetAtT(this, i / precision);\n      length += _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(p1, n1);\n      p1 = n1;\n    }\n    return length;\n  }\n}\n\n//# sourceMappingURL=CubicBezier2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNCZXppZXIyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2E7QUFDOUMsNEJBQTRCLHVEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxZQUFZLDJCQUEyQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6Qiw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0EsWUFBWSx5Q0FBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLGNBQWMsYUFBYSxhQUFhLFFBQVEsR0FBRyxhQUFhLEVBQUUsYUFBYSxFQUFFLFlBQVk7QUFDN0Y7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixlQUFlLHlDQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQSxnQkFBZ0IseUNBQUc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9DdWJpY0JlemllcjJkLm1qcz9hM2MwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQb2x5bGluZTJkIH0gZnJvbSBcIi4vUG9seWxpbmUyZC5tanNcIjtcbmNsYXNzIEN1YmljQmV6aWVyMmQgZXh0ZW5kcyBQb2x5bGluZTJkIHtcbiAgYTtcbiAgYjtcbiAgYztcbiAgZDtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgY29uc3QgeyBzdGFydDogYSwgY3AxOiBiLCBjcDI6IGMsIGVuZDogZCB9ID0gY29uZmlnO1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBwb2ludHM6IFthLCBkXSB9KTtcbiAgICB0aGlzLmEgPSBhO1xuICAgIHRoaXMuYiA9IGI7XG4gICAgdGhpcy5jID0gYztcbiAgICB0aGlzLmQgPSBkO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gW107XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gMTA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICBjb25zdCB0ID0gaSAvIG47XG4gICAgICB2ZXJ0aWNlcy5wdXNoKFxuICAgICAgICBuZXcgVmVjKFxuICAgICAgICAgICgxIC0gdCkgKiAoMSAtIHQpICogKDEgLSB0KSAqIGEueCArIDMgKiAoKDEgLSB0KSAqICgxIC0gdCkpICogdCAqIGIueCArIDMgKiAoMSAtIHQpICogKHQgKiB0KSAqIGMueCArIHQgKiB0ICogdCAqIGQueCxcbiAgICAgICAgICAoMSAtIHQpICogKDEgLSB0KSAqICgxIC0gdCkgKiBhLnkgKyAzICogKCgxIC0gdCkgKiAoMSAtIHQpKSAqIHQgKiBiLnkgKyAzICogKDEgLSB0KSAqICh0ICogdCkgKiBjLnkgKyB0ICogdCAqIHQgKiBkLnlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIG1pZFBvaW50KCkge1xuICAgIHJldHVybiBDdWJpY0JlemllcjJkLkdldEF0VCh0aGlzLCAwLjUpO1xuICB9XG4gIG5lYXJlc3RQb2ludChBKSB7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZDtcbiAgICBsZXQgcDtcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgdGhpcy5zZWdtZW50cykge1xuICAgICAgcCA9IGVkZ2UubmVhcmVzdFBvaW50KEEpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdCkgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YShmaXJzdCA9IHRydWUpIHtcbiAgICBjb25zdCB7IGEsIGIsIGMsIGQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGAke2ZpcnN0ID8gYE0gJHthLnRvRml4ZWQoKX0gYCA6IGBgfSBDJHtiLnRvRml4ZWQoKX0gJHtjLnRvRml4ZWQoKX0gJHtkLnRvRml4ZWQoKX1gO1xuICB9XG4gIHN0YXRpYyBHZXRBdFQoc2VnbWVudCwgdCkge1xuICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gc2VnbWVudDtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgICgxIC0gdCkgKiAoMSAtIHQpICogKDEgLSB0KSAqIGEueCArIDMgKiAoKDEgLSB0KSAqICgxIC0gdCkpICogdCAqIGIueCArIDMgKiAoMSAtIHQpICogKHQgKiB0KSAqIGMueCArIHQgKiB0ICogdCAqIGQueCxcbiAgICAgICgxIC0gdCkgKiAoMSAtIHQpICogKDEgLSB0KSAqIGEueSArIDMgKiAoKDEgLSB0KSAqICgxIC0gdCkpICogdCAqIGIueSArIDMgKiAoMSAtIHQpICogKHQgKiB0KSAqIGMueSArIHQgKiB0ICogdCAqIGQueVxuICAgICk7XG4gIH1cbiAgZ2V0TGVuZ3RoKHByZWNpc2lvbiA9IDMyKSB7XG4gICAgbGV0IG4xLCBwMSA9IHRoaXMuYSwgbGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwcmVjaXNpb247IGkrKykge1xuICAgICAgbjEgPSBDdWJpY0JlemllcjJkLkdldEF0VCh0aGlzLCBpIC8gcHJlY2lzaW9uKTtcbiAgICAgIGxlbmd0aCArPSBWZWMuRGlzdChwMSwgbjEpO1xuICAgICAgcDEgPSBuMTtcbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgQ3ViaWNCZXppZXIyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUN1YmljQmV6aWVyMmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CubicSpline2d: () => (/* binding */ CubicSpline2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CubicBezier2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass CubicSpline2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  points;\n  constructor(config) {\n    super({ ...config, isClosed: false, isFilled: false });\n    const { points } = config;\n    this.points = points;\n  }\n  _segments;\n  // eslint-disable-next-line no-restricted-syntax\n  get segments() {\n    if (!this._segments) {\n      this._segments = [];\n      const { points } = this;\n      const len = points.length;\n      const last = len - 2;\n      const k = 1.25;\n      for (let i = 0; i < len - 1; i++) {\n        const p0 = i === 0 ? points[0] : points[i - 1];\n        const p1 = points[i];\n        const p2 = points[i + 1];\n        const p3 = i === last ? p2 : points[i + 2];\n        const start = p1, cp1 = i === 0 ? p0 : new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(p1.x + (p2.x - p0.x) / 6 * k, p1.y + (p2.y - p0.y) / 6 * k), cp2 = i === last ? p2 : new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(p2.x - (p3.x - p1.x) / 6 * k, p2.y - (p3.y - p1.y) / 6 * k), end = p2;\n        this._segments.push(new _CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_1__.CubicBezier2d({ start, cp1, cp2, end }));\n      }\n    }\n    return this._segments;\n  }\n  getLength() {\n    return this.segments.reduce((acc, segment) => acc + segment.length, 0);\n  }\n  getVertices() {\n    const vertices = this.segments.reduce((acc, segment) => {\n      return acc.concat(segment.vertices);\n    }, []);\n    vertices.push(this.points[this.points.length - 1]);\n    return vertices;\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const segment of this.segments) {\n      p = segment.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    return this.segments.some((segment) => segment.hitTestLineSegment(A, B));\n  }\n  getSvgPathData() {\n    let d = this.segments.reduce((d2, segment, i) => {\n      return d2 + segment.getSvgPathData(i === 0);\n    }, \"\");\n    if (this.isClosed) {\n      d += \"Z\";\n    }\n    return d;\n  }\n}\n\n//# sourceMappingURL=CubicSpline2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNTcGxpbmUyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNtQjtBQUNOO0FBQzlDLDRCQUE0Qix1REFBVTtBQUN0QztBQUNBO0FBQ0EsWUFBWSw2Q0FBNkM7QUFDekQsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHlDQUFHLDBGQUEwRix5Q0FBRztBQUNuSixnQ0FBZ0MsNkRBQWEsR0FBRyxzQkFBc0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNTcGxpbmUyZC5tanM/MGExMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgQ3ViaWNCZXppZXIyZCB9IGZyb20gXCIuL0N1YmljQmV6aWVyMmQubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIEN1YmljU3BsaW5lMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgcG9pbnRzO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IGZhbHNlLCBpc0ZpbGxlZDogZmFsc2UgfSk7XG4gICAgY29uc3QgeyBwb2ludHMgfSA9IGNvbmZpZztcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgfVxuICBfc2VnbWVudHM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2VnbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9zZWdtZW50cykge1xuICAgICAgdGhpcy5fc2VnbWVudHMgPSBbXTtcbiAgICAgIGNvbnN0IHsgcG9pbnRzIH0gPSB0aGlzO1xuICAgICAgY29uc3QgbGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGxhc3QgPSBsZW4gLSAyO1xuICAgICAgY29uc3QgayA9IDEuMjU7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBwMCA9IGkgPT09IDAgPyBwb2ludHNbMF0gOiBwb2ludHNbaSAtIDFdO1xuICAgICAgICBjb25zdCBwMSA9IHBvaW50c1tpXTtcbiAgICAgICAgY29uc3QgcDIgPSBwb2ludHNbaSArIDFdO1xuICAgICAgICBjb25zdCBwMyA9IGkgPT09IGxhc3QgPyBwMiA6IHBvaW50c1tpICsgMl07XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcDEsIGNwMSA9IGkgPT09IDAgPyBwMCA6IG5ldyBWZWMocDEueCArIChwMi54IC0gcDAueCkgLyA2ICogaywgcDEueSArIChwMi55IC0gcDAueSkgLyA2ICogayksIGNwMiA9IGkgPT09IGxhc3QgPyBwMiA6IG5ldyBWZWMocDIueCAtIChwMy54IC0gcDEueCkgLyA2ICogaywgcDIueSAtIChwMy55IC0gcDEueSkgLyA2ICogayksIGVuZCA9IHAyO1xuICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKG5ldyBDdWJpY0JlemllcjJkKHsgc3RhcnQsIGNwMSwgY3AyLCBlbmQgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2VnbWVudHM7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnJlZHVjZSgoYWNjLCBzZWdtZW50KSA9PiBhY2MgKyBzZWdtZW50Lmxlbmd0aCwgMCk7XG4gIH1cbiAgZ2V0VmVydGljZXMoKSB7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnNlZ21lbnRzLnJlZHVjZSgoYWNjLCBzZWdtZW50KSA9PiB7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChzZWdtZW50LnZlcnRpY2VzKTtcbiAgICB9LCBbXSk7XG4gICAgdmVydGljZXMucHVzaCh0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAxXSk7XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIG5lYXJlc3RQb2ludChBKSB7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZDtcbiAgICBsZXQgcDtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2YgdGhpcy5zZWdtZW50cykge1xuICAgICAgcCA9IHNlZ21lbnQubmVhcmVzdFBvaW50KEEpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdCkgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQikge1xuICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNvbWUoKHNlZ21lbnQpID0+IHNlZ21lbnQuaGl0VGVzdExpbmVTZWdtZW50KEEsIEIpKTtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YSgpIHtcbiAgICBsZXQgZCA9IHRoaXMuc2VnbWVudHMucmVkdWNlKChkMiwgc2VnbWVudCwgaSkgPT4ge1xuICAgICAgcmV0dXJuIGQyICsgc2VnbWVudC5nZXRTdmdQYXRoRGF0YShpID09PSAwKTtcbiAgICB9LCBcIlwiKTtcbiAgICBpZiAodGhpcy5pc0Nsb3NlZCkge1xuICAgICAgZCArPSBcIlpcIjtcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEN1YmljU3BsaW5lMmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DdWJpY1NwbGluZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Edge2d: () => (/* binding */ Edge2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Edge2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  start;\n  end;\n  d;\n  u;\n  ul;\n  constructor(config) {\n    super({ ...config, isClosed: false, isFilled: false });\n    const { start, end } = config;\n    this.start = start;\n    this.end = end;\n    this.d = start.clone().sub(end);\n    this.u = this.d.clone().uni();\n    this.ul = this.u.len();\n  }\n  getLength() {\n    return this.d.len();\n  }\n  midPoint() {\n    return this.start.lrp(this.end, 0.5);\n  }\n  getVertices() {\n    return [this.start, this.end];\n  }\n  nearestPoint(point) {\n    const { start, end, d, u, ul: l } = this;\n    if (d.len() === 0) return start;\n    if (l === 0) return start;\n    const k = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Sub(point, start).dpr(u) / l;\n    const cx = start.x + u.x * k;\n    if (cx < Math.min(start.x, end.x)) return start.x < end.x ? start : end;\n    if (cx > Math.max(start.x, end.x)) return start.x > end.x ? start : end;\n    const cy = start.y + u.y * k;\n    if (cy < Math.min(start.y, end.y)) return start.y < end.y ? start : end;\n    if (cy > Math.max(start.y, end.y)) return start.y > end.y ? start : end;\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(cx, cy);\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    return (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_1__.linesIntersect)(A, B, this.start, this.end) || this.distanceToLineSegment(A, B) <= distance;\n  }\n  getSvgPathData(first = true) {\n    const { start, end } = this;\n    return `${first ? `M${start.toFixed()}` : ``} L${end.toFixed()}`;\n  }\n}\n\n//# sourceMappingURL=Edge2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWRnZTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ2lCO0FBQ0o7QUFDOUMscUJBQXFCLHVEQUFVO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkNBQTZDO0FBQ3pELFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCO0FBQ3RDO0FBQ0E7QUFDQSxjQUFjLHlDQUFHO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLFdBQVcsOERBQWM7QUFDekI7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixjQUFjLFlBQVksZ0JBQWdCLFFBQVEsR0FBRyxjQUFjO0FBQ25FO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWRnZTJkLm1qcz83OTcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBsaW5lc0ludGVyc2VjdCB9IGZyb20gXCIuLi9pbnRlcnNlY3QubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIEVkZ2UyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBzdGFydDtcbiAgZW5kO1xuICBkO1xuICB1O1xuICB1bDtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcsIGlzQ2xvc2VkOiBmYWxzZSwgaXNGaWxsZWQ6IGZhbHNlIH0pO1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gY29uZmlnO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICB0aGlzLmQgPSBzdGFydC5jbG9uZSgpLnN1YihlbmQpO1xuICAgIHRoaXMudSA9IHRoaXMuZC5jbG9uZSgpLnVuaSgpO1xuICAgIHRoaXMudWwgPSB0aGlzLnUubGVuKCk7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLmQubGVuKCk7XG4gIH1cbiAgbWlkUG9pbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQubHJwKHRoaXMuZW5kLCAwLjUpO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIHJldHVybiBbdGhpcy5zdGFydCwgdGhpcy5lbmRdO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgZCwgdSwgdWw6IGwgfSA9IHRoaXM7XG4gICAgaWYgKGQubGVuKCkgPT09IDApIHJldHVybiBzdGFydDtcbiAgICBpZiAobCA9PT0gMCkgcmV0dXJuIHN0YXJ0O1xuICAgIGNvbnN0IGsgPSBWZWMuU3ViKHBvaW50LCBzdGFydCkuZHByKHUpIC8gbDtcbiAgICBjb25zdCBjeCA9IHN0YXJ0LnggKyB1LnggKiBrO1xuICAgIGlmIChjeCA8IE1hdGgubWluKHN0YXJ0LngsIGVuZC54KSkgcmV0dXJuIHN0YXJ0LnggPCBlbmQueCA/IHN0YXJ0IDogZW5kO1xuICAgIGlmIChjeCA+IE1hdGgubWF4KHN0YXJ0LngsIGVuZC54KSkgcmV0dXJuIHN0YXJ0LnggPiBlbmQueCA/IHN0YXJ0IDogZW5kO1xuICAgIGNvbnN0IGN5ID0gc3RhcnQueSArIHUueSAqIGs7XG4gICAgaWYgKGN5IDwgTWF0aC5taW4oc3RhcnQueSwgZW5kLnkpKSByZXR1cm4gc3RhcnQueSA8IGVuZC55ID8gc3RhcnQgOiBlbmQ7XG4gICAgaWYgKGN5ID4gTWF0aC5tYXgoc3RhcnQueSwgZW5kLnkpKSByZXR1cm4gc3RhcnQueSA+IGVuZC55ID8gc3RhcnQgOiBlbmQ7XG4gICAgcmV0dXJuIG5ldyBWZWMoY3gsIGN5KTtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgZGlzdGFuY2UgPSAwKSB7XG4gICAgcmV0dXJuIGxpbmVzSW50ZXJzZWN0KEEsIEIsIHRoaXMuc3RhcnQsIHRoaXMuZW5kKSB8fCB0aGlzLmRpc3RhbmNlVG9MaW5lU2VnbWVudChBLCBCKSA8PSBkaXN0YW5jZTtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YShmaXJzdCA9IHRydWUpIHtcbiAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGAke2ZpcnN0ID8gYE0ke3N0YXJ0LnRvRml4ZWQoKX1gIDogYGB9IEwke2VuZC50b0ZpeGVkKCl9YDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgRWRnZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRnZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ellipse2d: () => (/* binding */ Ellipse2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\n\nclass Ellipse2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Geometry2d {\n  constructor(config) {\n    super({ ...config, isClosed: true });\n    this.config = config;\n    const { width, height } = config;\n    this.w = width;\n    this.h = height;\n  }\n  w;\n  h;\n  _edges;\n  // eslint-disable-next-line no-restricted-syntax\n  get edges() {\n    if (!this._edges) {\n      const { vertices } = this;\n      this._edges = [];\n      for (let i = 0, n = vertices.length; i < n; i++) {\n        const start = vertices[i];\n        const end = vertices[(i + 1) % n];\n        this._edges.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Edge2d({ start, end }));\n      }\n    }\n    return this._edges;\n  }\n  getVertices() {\n    const w = Math.max(1, this.w);\n    const h = Math.max(1, this.h);\n    const cx = w / 2;\n    const cy = h / 2;\n    const q = Math.pow(cx - cy, 2) / Math.pow(cx + cy, 2);\n    const p = _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (cx + cy) * (1 + 3 * q / (10 + Math.sqrt(4 - 3 * q)));\n    const len = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.getVerticesCountForLength)(p);\n    const step = _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI2 / len;\n    const a = Math.cos(step);\n    const b = Math.sin(step);\n    let sin = 0;\n    let cos = 1;\n    let ts = 0;\n    let tc = 1;\n    const vertices = Array(len);\n    for (let i = 0; i < len; i++) {\n      vertices[i] = new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(cx + cx * cos, cy + cy * sin);\n      ts = b * cos + a * sin;\n      tc = a * cos - b * sin;\n      sin = ts;\n      cos = tc;\n    }\n    return vertices;\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const edge of this.edges) {\n      p = edge.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    return this.edges.some((edge) => edge.hitTestLineSegment(A, B));\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(0, 0, this.w, this.h);\n  }\n  getLength() {\n    const { w, h } = this;\n    const cx = w / 2;\n    const cy = h / 2;\n    const rx = Math.max(0, cx);\n    const ry = Math.max(0, cy);\n    return (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.perimeterOfEllipse)(rx, ry);\n  }\n  getSvgPathData(first = false) {\n    const { w, h } = this;\n    const cx = w / 2;\n    const cy = h / 2;\n    const rx = Math.max(0, cx);\n    const ry = Math.max(0, cy);\n    return `${first ? `M${cx - rx},${cy}` : ``} a${rx},${ry},0,1,1,${rx * 2},0a${rx},${ry},0,1,1,-${rx * 2},0`;\n  }\n}\n\n//# sourceMappingURL=Ellipse2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWxsaXBzZTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ0E7QUFDMEI7QUFDckI7QUFDUTtBQUN1QjtBQUNyRSx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsV0FBVztBQUN6QjtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQSw2QkFBNkIsK0NBQU0sR0FBRyxZQUFZO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQ0FBRTtBQUNoQixnQkFBZ0Isa0ZBQXlCO0FBQ3pDLGlCQUFpQiwyQ0FBRztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCLHdCQUF3Qix5Q0FBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWtCO0FBQzdCO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVksUUFBUSxHQUFHLEdBQUcsUUFBUSxHQUFHLEdBQUcsR0FBRyxHQUFHLFNBQVMsT0FBTyxLQUFLLEdBQUcsR0FBRyxHQUFHLFVBQVUsT0FBTztBQUMzRztBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0VsbGlwc2UyZC5tanM/OTkwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3ggfSBmcm9tIFwiLi4vQm94Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IFBJLCBQSTIsIHBlcmltZXRlck9mRWxsaXBzZSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEVkZ2UyZCB9IGZyb20gXCIuL0VkZ2UyZC5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aCB9IGZyb20gXCIuL2dlb21ldHJ5LWNvbnN0YW50cy5tanNcIjtcbmNsYXNzIEVsbGlwc2UyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IHRydWUgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjb25maWc7XG4gICAgdGhpcy53ID0gd2lkdGg7XG4gICAgdGhpcy5oID0gaGVpZ2h0O1xuICB9XG4gIHc7XG4gIGg7XG4gIF9lZGdlcztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBlZGdlcygpIHtcbiAgICBpZiAoIXRoaXMuX2VkZ2VzKSB7XG4gICAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgICAgdGhpcy5fZWRnZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdmVydGljZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdmVydGljZXNbaV07XG4gICAgICAgIGNvbnN0IGVuZCA9IHZlcnRpY2VzWyhpICsgMSkgJSBuXTtcbiAgICAgICAgdGhpcy5fZWRnZXMucHVzaChuZXcgRWRnZTJkKHsgc3RhcnQsIGVuZCB9KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lZGdlcztcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICBjb25zdCB3ID0gTWF0aC5tYXgoMSwgdGhpcy53KTtcbiAgICBjb25zdCBoID0gTWF0aC5tYXgoMSwgdGhpcy5oKTtcbiAgICBjb25zdCBjeCA9IHcgLyAyO1xuICAgIGNvbnN0IGN5ID0gaCAvIDI7XG4gICAgY29uc3QgcSA9IE1hdGgucG93KGN4IC0gY3ksIDIpIC8gTWF0aC5wb3coY3ggKyBjeSwgMik7XG4gICAgY29uc3QgcCA9IFBJICogKGN4ICsgY3kpICogKDEgKyAzICogcSAvICgxMCArIE1hdGguc3FydCg0IC0gMyAqIHEpKSk7XG4gICAgY29uc3QgbGVuID0gZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aChwKTtcbiAgICBjb25zdCBzdGVwID0gUEkyIC8gbGVuO1xuICAgIGNvbnN0IGEgPSBNYXRoLmNvcyhzdGVwKTtcbiAgICBjb25zdCBiID0gTWF0aC5zaW4oc3RlcCk7XG4gICAgbGV0IHNpbiA9IDA7XG4gICAgbGV0IGNvcyA9IDE7XG4gICAgbGV0IHRzID0gMDtcbiAgICBsZXQgdGMgPSAxO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gQXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2ZXJ0aWNlc1tpXSA9IG5ldyBWZWMoY3ggKyBjeCAqIGNvcywgY3kgKyBjeSAqIHNpbik7XG4gICAgICB0cyA9IGIgKiBjb3MgKyBhICogc2luO1xuICAgICAgdGMgPSBhICogY29zIC0gYiAqIHNpbjtcbiAgICAgIHNpbiA9IHRzO1xuICAgICAgY29zID0gdGM7XG4gICAgfVxuICAgIHJldHVybiB2ZXJ0aWNlcztcbiAgfVxuICBuZWFyZXN0UG9pbnQoQSkge1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IGQ7XG4gICAgbGV0IHA7XG4gICAgZm9yIChjb25zdCBlZGdlIG9mIHRoaXMuZWRnZXMpIHtcbiAgICAgIHAgPSBlZGdlLm5lYXJlc3RQb2ludChBKTtcbiAgICAgIGQgPSBWZWMuRGlzdDIocCwgQSk7XG4gICAgICBpZiAoZCA8IGRpc3QpIHtcbiAgICAgICAgbmVhcmVzdCA9IHA7XG4gICAgICAgIGRpc3QgPSBkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5lYXJlc3QpIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIG5lYXJlc3Q7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIpIHtcbiAgICByZXR1cm4gdGhpcy5lZGdlcy5zb21lKChlZGdlKSA9PiBlZGdlLmhpdFRlc3RMaW5lU2VnbWVudChBLCBCKSk7XG4gIH1cbiAgZ2V0Qm91bmRzKCkge1xuICAgIHJldHVybiBuZXcgQm94KDAsIDAsIHRoaXMudywgdGhpcy5oKTtcbiAgfVxuICBnZXRMZW5ndGgoKSB7XG4gICAgY29uc3QgeyB3LCBoIH0gPSB0aGlzO1xuICAgIGNvbnN0IGN4ID0gdyAvIDI7XG4gICAgY29uc3QgY3kgPSBoIC8gMjtcbiAgICBjb25zdCByeCA9IE1hdGgubWF4KDAsIGN4KTtcbiAgICBjb25zdCByeSA9IE1hdGgubWF4KDAsIGN5KTtcbiAgICByZXR1cm4gcGVyaW1ldGVyT2ZFbGxpcHNlKHJ4LCByeSk7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoZmlyc3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgdywgaCB9ID0gdGhpcztcbiAgICBjb25zdCBjeCA9IHcgLyAyO1xuICAgIGNvbnN0IGN5ID0gaCAvIDI7XG4gICAgY29uc3QgcnggPSBNYXRoLm1heCgwLCBjeCk7XG4gICAgY29uc3QgcnkgPSBNYXRoLm1heCgwLCBjeSk7XG4gICAgcmV0dXJuIGAke2ZpcnN0ID8gYE0ke2N4IC0gcnh9LCR7Y3l9YCA6IGBgfSBhJHtyeH0sJHtyeX0sMCwxLDEsJHtyeCAqIDJ9LDBhJHtyeH0sJHtyeX0sMCwxLDEsLSR7cnggKiAyfSwwYDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgRWxsaXBzZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWxsaXBzZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Geometry2d: () => (/* binding */ Geometry2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\nclass Geometry2d {\n  isFilled = false;\n  isClosed = true;\n  isLabel = false;\n  debugColor;\n  ignore;\n  constructor(opts) {\n    this.isFilled = opts.isFilled;\n    this.isClosed = opts.isClosed;\n    this.isLabel = opts.isLabel ?? false;\n    this.debugColor = opts.debugColor;\n    this.ignore = opts.ignore;\n  }\n  // hitTestPoint(point: Vec, margin = 0, hitInside = false) {\n  // \t// We've removed the broad phase here; that should be done outside of the call\n  // \treturn this.distanceToPoint(point, hitInside) <= margin\n  // }\n  hitTestPoint(point, margin = 0, hitInside = false) {\n    if (this.isClosed && (this.isFilled || hitInside) && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(point, this.vertices)) {\n      return true;\n    }\n    return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(point, this.nearestPoint(point)) <= margin * margin;\n  }\n  distanceToPoint(point, hitInside = false) {\n    return point.dist(this.nearestPoint(point)) * (this.isClosed && (this.isFilled || hitInside) && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(point, this.vertices) ? -1 : 1);\n  }\n  distanceToLineSegment(A, B) {\n    if (A.equals(B)) return this.distanceToPoint(A);\n    const { vertices } = this;\n    let nearest;\n    let dist = Infinity;\n    let d, p, q;\n    for (let i = 0; i < vertices.length; i++) {\n      p = vertices[i];\n      q = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.NearestPointOnLineSegment(A, B, p, true);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, q);\n      if (d < dist) {\n        dist = d;\n        nearest = q;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return this.isClosed && this.isFilled && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(nearest, this.vertices) ? -dist : dist;\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    return this.distanceToLineSegment(A, B) <= distance;\n  }\n  nearestPointOnLineSegment(A, B) {\n    const { vertices } = this;\n    let nearest;\n    let dist = Infinity;\n    let d, p, q;\n    for (let i = 0; i < vertices.length; i++) {\n      p = vertices[i];\n      q = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.NearestPointOnLineSegment(A, B, p, true);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, q);\n      if (d < dist) {\n        dist = d;\n        nearest = q;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  isPointInBounds(point, margin = 0) {\n    const { bounds } = this;\n    return !(point.x < bounds.minX - margin || point.y < bounds.minY - margin || point.x > bounds.maxX + margin || point.y > bounds.maxY + margin);\n  }\n  _vertices;\n  // eslint-disable-next-line no-restricted-syntax\n  get vertices() {\n    if (!this._vertices) {\n      this._vertices = this.getVertices();\n    }\n    return this._vertices;\n  }\n  getBounds() {\n    return _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box.FromPoints(this.vertices);\n  }\n  _bounds;\n  // eslint-disable-next-line no-restricted-syntax\n  get bounds() {\n    if (!this._bounds) {\n      this._bounds = this.getBounds();\n    }\n    return this._bounds;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get center() {\n    return this.bounds.center;\n  }\n  _area;\n  // eslint-disable-next-line no-restricted-syntax\n  get area() {\n    if (!this._area) {\n      this._area = this.getArea();\n    }\n    return this._area;\n  }\n  getArea() {\n    if (!this.isClosed) {\n      return 0;\n    }\n    const { vertices } = this;\n    let area = 0;\n    for (let i = 0, n = vertices.length; i < n; i++) {\n      const curr = vertices[i];\n      const next = vertices[(i + 1) % n];\n      area += curr.x * next.y - next.x * curr.y;\n    }\n    return area / 2;\n  }\n  toSimpleSvgPath() {\n    let path = \"\";\n    const { vertices } = this;\n    const n = vertices.length;\n    if (n === 0) return path;\n    path += `M${vertices[0].x},${vertices[0].y}`;\n    for (let i = 1; i < n; i++) {\n      path += `L${vertices[i].x},${vertices[i].y}`;\n    }\n    if (this.isClosed) {\n      path += \"Z\";\n    }\n    return path;\n  }\n  _length;\n  // eslint-disable-next-line no-restricted-syntax\n  get length() {\n    if (this._length) return this._length;\n    this._length = this.getLength();\n    return this._length;\n  }\n  getLength() {\n    const { vertices } = this;\n    let n1, p1 = vertices[0], length = 0;\n    for (let i = 1; i < vertices.length; i++) {\n      n1 = vertices[i];\n      length += _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p1, n1);\n      p1 = n1;\n    }\n    return Math.sqrt(length);\n  }\n}\n\n//# sourceMappingURL=Geometry2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR2VvbWV0cnkyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNBO0FBQ2E7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSx5REFBeUQsMERBQWM7QUFDdkU7QUFDQTtBQUNBLFdBQVcseUNBQUc7QUFDZDtBQUNBO0FBQ0Esb0dBQW9HLDBEQUFjO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0EsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMERBQWM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0EsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUNBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBLGdCQUFnQixjQUFjLEdBQUcsY0FBYztBQUMvQyxvQkFBb0IsT0FBTztBQUMzQixrQkFBa0IsY0FBYyxHQUFHLGNBQWM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQSxnQkFBZ0IseUNBQUc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9HZW9tZXRyeTJkLm1qcz9lOWU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCB9IGZyb20gXCIuLi9Cb3gubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgcG9pbnRJblBvbHlnb24gfSBmcm9tIFwiLi4vdXRpbHMubWpzXCI7XG5jbGFzcyBHZW9tZXRyeTJkIHtcbiAgaXNGaWxsZWQgPSBmYWxzZTtcbiAgaXNDbG9zZWQgPSB0cnVlO1xuICBpc0xhYmVsID0gZmFsc2U7XG4gIGRlYnVnQ29sb3I7XG4gIGlnbm9yZTtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuaXNGaWxsZWQgPSBvcHRzLmlzRmlsbGVkO1xuICAgIHRoaXMuaXNDbG9zZWQgPSBvcHRzLmlzQ2xvc2VkO1xuICAgIHRoaXMuaXNMYWJlbCA9IG9wdHMuaXNMYWJlbCA/PyBmYWxzZTtcbiAgICB0aGlzLmRlYnVnQ29sb3IgPSBvcHRzLmRlYnVnQ29sb3I7XG4gICAgdGhpcy5pZ25vcmUgPSBvcHRzLmlnbm9yZTtcbiAgfVxuICAvLyBoaXRUZXN0UG9pbnQocG9pbnQ6IFZlYywgbWFyZ2luID0gMCwgaGl0SW5zaWRlID0gZmFsc2UpIHtcbiAgLy8gXHQvLyBXZSd2ZSByZW1vdmVkIHRoZSBicm9hZCBwaGFzZSBoZXJlOyB0aGF0IHNob3VsZCBiZSBkb25lIG91dHNpZGUgb2YgdGhlIGNhbGxcbiAgLy8gXHRyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQocG9pbnQsIGhpdEluc2lkZSkgPD0gbWFyZ2luXG4gIC8vIH1cbiAgaGl0VGVzdFBvaW50KHBvaW50LCBtYXJnaW4gPSAwLCBoaXRJbnNpZGUgPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLmlzQ2xvc2VkICYmICh0aGlzLmlzRmlsbGVkIHx8IGhpdEluc2lkZSkgJiYgcG9pbnRJblBvbHlnb24ocG9pbnQsIHRoaXMudmVydGljZXMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIFZlYy5EaXN0Mihwb2ludCwgdGhpcy5uZWFyZXN0UG9pbnQocG9pbnQpKSA8PSBtYXJnaW4gKiBtYXJnaW47XG4gIH1cbiAgZGlzdGFuY2VUb1BvaW50KHBvaW50LCBoaXRJbnNpZGUgPSBmYWxzZSkge1xuICAgIHJldHVybiBwb2ludC5kaXN0KHRoaXMubmVhcmVzdFBvaW50KHBvaW50KSkgKiAodGhpcy5pc0Nsb3NlZCAmJiAodGhpcy5pc0ZpbGxlZCB8fCBoaXRJbnNpZGUpICYmIHBvaW50SW5Qb2x5Z29uKHBvaW50LCB0aGlzLnZlcnRpY2VzKSA/IC0xIDogMSk7XG4gIH1cbiAgZGlzdGFuY2VUb0xpbmVTZWdtZW50KEEsIEIpIHtcbiAgICBpZiAoQS5lcXVhbHMoQikpIHJldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChBKTtcbiAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IGQsIHAsIHE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcCA9IHZlcnRpY2VzW2ldO1xuICAgICAgcSA9IFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVTZWdtZW50KEEsIEIsIHAsIHRydWUpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBxKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBkaXN0ID0gZDtcbiAgICAgICAgbmVhcmVzdCA9IHE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdCkgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gdGhpcy5pc0Nsb3NlZCAmJiB0aGlzLmlzRmlsbGVkICYmIHBvaW50SW5Qb2x5Z29uKG5lYXJlc3QsIHRoaXMudmVydGljZXMpID8gLWRpc3QgOiBkaXN0O1xuICB9XG4gIGhpdFRlc3RMaW5lU2VnbWVudChBLCBCLCBkaXN0YW5jZSA9IDApIHtcbiAgICByZXR1cm4gdGhpcy5kaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQikgPD0gZGlzdGFuY2U7XG4gIH1cbiAgbmVhcmVzdFBvaW50T25MaW5lU2VnbWVudChBLCBCKSB7XG4gICAgY29uc3QgeyB2ZXJ0aWNlcyB9ID0gdGhpcztcbiAgICBsZXQgbmVhcmVzdDtcbiAgICBsZXQgZGlzdCA9IEluZmluaXR5O1xuICAgIGxldCBkLCBwLCBxO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHAgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIHEgPSBWZWMuTmVhcmVzdFBvaW50T25MaW5lU2VnbWVudChBLCBCLCBwLCB0cnVlKTtcbiAgICAgIGQgPSBWZWMuRGlzdDIocCwgcSk7XG4gICAgICBpZiAoZCA8IGRpc3QpIHtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICAgIG5lYXJlc3QgPSBxO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5lYXJlc3QpIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIG5lYXJlc3Q7XG4gIH1cbiAgaXNQb2ludEluQm91bmRzKHBvaW50LCBtYXJnaW4gPSAwKSB7XG4gICAgY29uc3QgeyBib3VuZHMgfSA9IHRoaXM7XG4gICAgcmV0dXJuICEocG9pbnQueCA8IGJvdW5kcy5taW5YIC0gbWFyZ2luIHx8IHBvaW50LnkgPCBib3VuZHMubWluWSAtIG1hcmdpbiB8fCBwb2ludC54ID4gYm91bmRzLm1heFggKyBtYXJnaW4gfHwgcG9pbnQueSA+IGJvdW5kcy5tYXhZICsgbWFyZ2luKTtcbiAgfVxuICBfdmVydGljZXM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgdmVydGljZXMoKSB7XG4gICAgaWYgKCF0aGlzLl92ZXJ0aWNlcykge1xuICAgICAgdGhpcy5fdmVydGljZXMgPSB0aGlzLmdldFZlcnRpY2VzKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92ZXJ0aWNlcztcbiAgfVxuICBnZXRCb3VuZHMoKSB7XG4gICAgcmV0dXJuIEJveC5Gcm9tUG9pbnRzKHRoaXMudmVydGljZXMpO1xuICB9XG4gIF9ib3VuZHM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgYm91bmRzKCkge1xuICAgIGlmICghdGhpcy5fYm91bmRzKSB7XG4gICAgICB0aGlzLl9ib3VuZHMgPSB0aGlzLmdldEJvdW5kcygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYm91bmRzO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgY2VudGVyKCkge1xuICAgIHJldHVybiB0aGlzLmJvdW5kcy5jZW50ZXI7XG4gIH1cbiAgX2FyZWE7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgYXJlYSgpIHtcbiAgICBpZiAoIXRoaXMuX2FyZWEpIHtcbiAgICAgIHRoaXMuX2FyZWEgPSB0aGlzLmdldEFyZWEoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FyZWE7XG4gIH1cbiAgZ2V0QXJlYSgpIHtcbiAgICBpZiAoIXRoaXMuaXNDbG9zZWQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgIGxldCBhcmVhID0gMDtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHZlcnRpY2VzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgY29uc3QgY3VyciA9IHZlcnRpY2VzW2ldO1xuICAgICAgY29uc3QgbmV4dCA9IHZlcnRpY2VzWyhpICsgMSkgJSBuXTtcbiAgICAgIGFyZWEgKz0gY3Vyci54ICogbmV4dC55IC0gbmV4dC54ICogY3Vyci55O1xuICAgIH1cbiAgICByZXR1cm4gYXJlYSAvIDI7XG4gIH1cbiAgdG9TaW1wbGVTdmdQYXRoKCkge1xuICAgIGxldCBwYXRoID0gXCJcIjtcbiAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgIGNvbnN0IG4gPSB2ZXJ0aWNlcy5sZW5ndGg7XG4gICAgaWYgKG4gPT09IDApIHJldHVybiBwYXRoO1xuICAgIHBhdGggKz0gYE0ke3ZlcnRpY2VzWzBdLnh9LCR7dmVydGljZXNbMF0ueX1gO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBwYXRoICs9IGBMJHt2ZXJ0aWNlc1tpXS54fSwke3ZlcnRpY2VzW2ldLnl9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNDbG9zZWQpIHtcbiAgICAgIHBhdGggKz0gXCJaXCI7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIF9sZW5ndGg7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbGVuZ3RoKCkge1xuICAgIGlmICh0aGlzLl9sZW5ndGgpIHJldHVybiB0aGlzLl9sZW5ndGg7XG4gICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgIGxldCBuMSwgcDEgPSB2ZXJ0aWNlc1swXSwgbGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuMSA9IHZlcnRpY2VzW2ldO1xuICAgICAgbGVuZ3RoICs9IFZlYy5EaXN0MihwMSwgbjEpO1xuICAgICAgcDEgPSBuMTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGguc3FydChsZW5ndGgpO1xuICB9XG59XG5leHBvcnQge1xuICBHZW9tZXRyeTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnkyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group2d: () => (/* binding */ Group2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Group2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  children = [];\n  ignoredChildren = [];\n  constructor(config) {\n    super({ ...config, isClosed: true, isFilled: false });\n    for (const child of config.children) {\n      if (child.ignore) {\n        this.ignoredChildren.push(child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    if (this.children.length === 0) throw Error(\"Group2d must have at least one child\");\n  }\n  getVertices() {\n    return this.children.filter((c) => !c.isLabel).flatMap((c) => c.vertices);\n  }\n  nearestPoint(point) {\n    let dist = Infinity;\n    let nearest;\n    const { children } = this;\n    if (children.length === 0) {\n      throw Error(\"no children\");\n    }\n    let p;\n    let d;\n    for (const child of children) {\n      p = child.nearestPoint(point);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, point);\n      if (d < dist) {\n        dist = d;\n        nearest = p;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  distanceToPoint(point, hitInside = false) {\n    return Math.min(...this.children.map((c, i) => c.distanceToPoint(point, hitInside || i > 0)));\n  }\n  hitTestPoint(point, margin, hitInside) {\n    return !!this.children.filter((c) => !c.isLabel).find((c) => c.hitTestPoint(point, margin, hitInside));\n  }\n  hitTestLineSegment(A, B, zoom) {\n    return !!this.children.filter((c) => !c.isLabel).find((c) => c.hitTestLineSegment(A, B, zoom));\n  }\n  getArea() {\n    return this.children[0].area;\n  }\n  toSimpleSvgPath() {\n    let path = \"\";\n    for (const child of this.children) {\n      path += child.toSimpleSvgPath();\n    }\n    const corners = _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box.FromPoints(this.vertices).corners;\n    for (let i = 0, n = corners.length; i < n; i++) {\n      const corner = corners[i];\n      const prevCorner = corners[(i - 1 + n) % n];\n      const prevDist = corner.dist(prevCorner);\n      const nextCorner = corners[(i + 1) % n];\n      const nextDist = corner.dist(nextCorner);\n      const A = corner.clone().lrp(prevCorner, 4 / prevDist);\n      const B = corner;\n      const C = corner.clone().lrp(nextCorner, 4 / nextDist);\n      path += `M${A.x},${A.y} L${B.x},${B.y} L${C.x},${C.y} `;\n    }\n    return path;\n  }\n  getLength() {\n    return this.children.reduce((a, c) => c.isLabel ? a : a + c.length, 0);\n  }\n  getSvgPathData() {\n    return this.children.map((c, i) => c.isLabel ? \"\" : c.getSvgPathData(i === 0)).join(\" \");\n  }\n}\n\n//# sourceMappingURL=Group2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNBO0FBQ2E7QUFDOUMsc0JBQXNCLHVEQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLFlBQVksNENBQTRDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlDQUFHO0FBQ3ZCLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLElBQUksR0FBRyxLQUFLO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0dyb3VwMmQubWpzPzYyNzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL0JveC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIEdyb3VwMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgY2hpbGRyZW4gPSBbXTtcbiAgaWdub3JlZENoaWxkcmVuID0gW107XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBpc0Nsb3NlZDogdHJ1ZSwgaXNGaWxsZWQ6IGZhbHNlIH0pO1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY29uZmlnLmNoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQuaWdub3JlKSB7XG4gICAgICAgIHRoaXMuaWdub3JlZENoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB0aHJvdyBFcnJvcihcIkdyb3VwMmQgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBjaGlsZFwiKTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5maWx0ZXIoKGMpID0+ICFjLmlzTGFiZWwpLmZsYXRNYXAoKGMpID0+IGMudmVydGljZXMpO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcztcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIm5vIGNoaWxkcmVuXCIpO1xuICAgIH1cbiAgICBsZXQgcDtcbiAgICBsZXQgZDtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICBwID0gY2hpbGQubmVhcmVzdFBvaW50KHBvaW50KTtcbiAgICAgIGQgPSBWZWMuRGlzdDIocCwgcG9pbnQpO1xuICAgICAgaWYgKGQgPCBkaXN0KSB7XG4gICAgICAgIGRpc3QgPSBkO1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KSB0aHJvdyBFcnJvcihcIm5lYXJlc3QgcG9pbnQgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBuZWFyZXN0O1xuICB9XG4gIGRpc3RhbmNlVG9Qb2ludChwb2ludCwgaGl0SW5zaWRlID0gZmFsc2UpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oLi4udGhpcy5jaGlsZHJlbi5tYXAoKGMsIGkpID0+IGMuZGlzdGFuY2VUb1BvaW50KHBvaW50LCBoaXRJbnNpZGUgfHwgaSA+IDApKSk7XG4gIH1cbiAgaGl0VGVzdFBvaW50KHBvaW50LCBtYXJnaW4sIGhpdEluc2lkZSkge1xuICAgIHJldHVybiAhIXRoaXMuY2hpbGRyZW4uZmlsdGVyKChjKSA9PiAhYy5pc0xhYmVsKS5maW5kKChjKSA9PiBjLmhpdFRlc3RQb2ludChwb2ludCwgbWFyZ2luLCBoaXRJbnNpZGUpKTtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgem9vbSkge1xuICAgIHJldHVybiAhIXRoaXMuY2hpbGRyZW4uZmlsdGVyKChjKSA9PiAhYy5pc0xhYmVsKS5maW5kKChjKSA9PiBjLmhpdFRlc3RMaW5lU2VnbWVudChBLCBCLCB6b29tKSk7XG4gIH1cbiAgZ2V0QXJlYSgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlblswXS5hcmVhO1xuICB9XG4gIHRvU2ltcGxlU3ZnUGF0aCgpIHtcbiAgICBsZXQgcGF0aCA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICBwYXRoICs9IGNoaWxkLnRvU2ltcGxlU3ZnUGF0aCgpO1xuICAgIH1cbiAgICBjb25zdCBjb3JuZXJzID0gQm94LkZyb21Qb2ludHModGhpcy52ZXJ0aWNlcykuY29ybmVycztcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IGNvcm5lcnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCBjb3JuZXIgPSBjb3JuZXJzW2ldO1xuICAgICAgY29uc3QgcHJldkNvcm5lciA9IGNvcm5lcnNbKGkgLSAxICsgbikgJSBuXTtcbiAgICAgIGNvbnN0IHByZXZEaXN0ID0gY29ybmVyLmRpc3QocHJldkNvcm5lcik7XG4gICAgICBjb25zdCBuZXh0Q29ybmVyID0gY29ybmVyc1soaSArIDEpICUgbl07XG4gICAgICBjb25zdCBuZXh0RGlzdCA9IGNvcm5lci5kaXN0KG5leHRDb3JuZXIpO1xuICAgICAgY29uc3QgQSA9IGNvcm5lci5jbG9uZSgpLmxycChwcmV2Q29ybmVyLCA0IC8gcHJldkRpc3QpO1xuICAgICAgY29uc3QgQiA9IGNvcm5lcjtcbiAgICAgIGNvbnN0IEMgPSBjb3JuZXIuY2xvbmUoKS5scnAobmV4dENvcm5lciwgNCAvIG5leHREaXN0KTtcbiAgICAgIHBhdGggKz0gYE0ke0EueH0sJHtBLnl9IEwke0IueH0sJHtCLnl9IEwke0MueH0sJHtDLnl9IGA7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5yZWR1Y2UoKGEsIGMpID0+IGMuaXNMYWJlbCA/IGEgOiBhICsgYy5sZW5ndGgsIDApO1xuICB9XG4gIGdldFN2Z1BhdGhEYXRhKCkge1xuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoYywgaSkgPT4gYy5pc0xhYmVsID8gXCJcIiA6IGMuZ2V0U3ZnUGF0aERhdGEoaSA9PT0gMCkpLmpvaW4oXCIgXCIpO1xuICB9XG59XG5leHBvcnQge1xuICBHcm91cDJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JvdXAyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Point2d: () => (/* binding */ Point2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\nclass Point2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Geometry2d {\n  point;\n  constructor(config) {\n    super({ ...config, isClosed: true, isFilled: true });\n    const { point } = config;\n    this.point = point;\n  }\n  getVertices() {\n    return [this.point];\n  }\n  nearestPoint() {\n    return this.point;\n  }\n  hitTestLineSegment(A, B, margin) {\n    return _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.DistanceToLineSegment(A, B, this.point) < margin;\n  }\n  getSvgPathData() {\n    const { point } = this;\n    return `M${point.toFixed()}`;\n  }\n}\n\n//# sourceMappingURL=Point2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9pbnQyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2E7QUFDOUMsc0JBQXNCLHVEQUFVO0FBQ2hDO0FBQ0E7QUFDQSxZQUFZLDJDQUEyQztBQUN2RCxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5Q0FBRztBQUNkO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEIsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2ludDJkLm1qcz81Yzk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIFBvaW50MmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgcG9pbnQ7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBpc0Nsb3NlZDogdHJ1ZSwgaXNGaWxsZWQ6IHRydWUgfSk7XG4gICAgY29uc3QgeyBwb2ludCB9ID0gY29uZmlnO1xuICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICByZXR1cm4gW3RoaXMucG9pbnRdO1xuICB9XG4gIG5lYXJlc3RQb2ludCgpIHtcbiAgICByZXR1cm4gdGhpcy5wb2ludDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgbWFyZ2luKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQiwgdGhpcy5wb2ludCkgPCBtYXJnaW47XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyBwb2ludCB9ID0gdGhpcztcbiAgICByZXR1cm4gYE0ke3BvaW50LnRvRml4ZWQoKX1gO1xuICB9XG59XG5leHBvcnQge1xuICBQb2ludDJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnQyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Polygon2d: () => (/* binding */ Polygon2d)\n/* harmony export */ });\n/* harmony import */ var _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n\nclass Polygon2d extends _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_0__.Polyline2d {\n  constructor(config) {\n    super({ ...config });\n    this.isClosed = true;\n  }\n}\n\n//# sourceMappingURL=Polygon2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWdvbjJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUM5Qyx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1BvbHlnb24yZC5tanM/OTIxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb2x5bGluZTJkIH0gZnJvbSBcIi4vUG9seWxpbmUyZC5tanNcIjtcbmNsYXNzIFBvbHlnb24yZCBleHRlbmRzIFBvbHlsaW5lMmQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZyB9KTtcbiAgICB0aGlzLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUG9seWdvbjJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbjJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Polyline2d: () => (/* binding */ Polyline2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Polyline2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  points;\n  constructor(config) {\n    super({ isClosed: false, isFilled: false, ...config });\n    const { points } = config;\n    this.points = points;\n  }\n  _segments;\n  // eslint-disable-next-line no-restricted-syntax\n  get segments() {\n    if (!this._segments) {\n      this._segments = [];\n      const { vertices } = this;\n      for (let i = 0, n = vertices.length - 1; i < n; i++) {\n        const start = vertices[i];\n        const end = vertices[i + 1];\n        this._segments.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Edge2d({ start, end }));\n      }\n      if (this.isClosed) {\n        this._segments.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Edge2d({ start: vertices[vertices.length - 1], end: vertices[0] }));\n      }\n    }\n    return this._segments;\n  }\n  getLength() {\n    return this.segments.reduce((acc, segment) => acc + segment.length, 0);\n  }\n  getVertices() {\n    return this.points;\n  }\n  nearestPoint(A) {\n    const { segments } = this;\n    let nearest = this.points[0];\n    let dist = Infinity;\n    let p;\n    let d;\n    for (let i = 0; i < segments.length; i++) {\n      p = segments[i].nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    const { segments } = this;\n    for (let i = 0, n = segments.length; i < n; i++) {\n      if (segments[i].hitTestLineSegment(A, B, distance)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  getSvgPathData() {\n    const { vertices } = this;\n    if (vertices.length < 2) return \"\";\n    return vertices.reduce((acc, vertex, i) => {\n      if (i === 0) return `M ${vertex.x} ${vertex.y}`;\n      return `${acc} L ${vertex.x} ${vertex.y}`;\n    }, \"\");\n  }\n}\n\n//# sourceMappingURL=Polyline2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWxpbmUyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNLO0FBQ1E7QUFDOUMseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFdBQVc7QUFDekIsK0NBQStDLE9BQU87QUFDdEQ7QUFDQTtBQUNBLGdDQUFnQywrQ0FBTSxHQUFHLFlBQVk7QUFDckQ7QUFDQTtBQUNBLGdDQUFnQywrQ0FBTSxHQUFHLHdEQUF3RDtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkIseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBLCtCQUErQixVQUFVLEVBQUUsU0FBUztBQUNwRCxnQkFBZ0IsS0FBSyxJQUFJLFVBQVUsRUFBRSxTQUFTO0FBQzlDLEtBQUs7QUFDTDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1BvbHlsaW5lMmQubWpzPzIwOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IEVkZ2UyZCB9IGZyb20gXCIuL0VkZ2UyZC5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuY2xhc3MgUG9seWxpbmUyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBwb2ludHM7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgaXNDbG9zZWQ6IGZhbHNlLCBpc0ZpbGxlZDogZmFsc2UsIC4uLmNvbmZpZyB9KTtcbiAgICBjb25zdCB7IHBvaW50cyB9ID0gY29uZmlnO1xuICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICB9XG4gIF9zZWdtZW50cztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBzZWdtZW50cygpIHtcbiAgICBpZiAoIXRoaXMuX3NlZ21lbnRzKSB7XG4gICAgICB0aGlzLl9zZWdtZW50cyA9IFtdO1xuICAgICAgY29uc3QgeyB2ZXJ0aWNlcyB9ID0gdGhpcztcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdmVydGljZXMubGVuZ3RoIC0gMTsgaSA8IG47IGkrKykge1xuICAgICAgICBjb25zdCBzdGFydCA9IHZlcnRpY2VzW2ldO1xuICAgICAgICBjb25zdCBlbmQgPSB2ZXJ0aWNlc1tpICsgMV07XG4gICAgICAgIHRoaXMuX3NlZ21lbnRzLnB1c2gobmV3IEVkZ2UyZCh7IHN0YXJ0LCBlbmQgfSkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNDbG9zZWQpIHtcbiAgICAgICAgdGhpcy5fc2VnbWVudHMucHVzaChuZXcgRWRnZTJkKHsgc3RhcnQ6IHZlcnRpY2VzW3ZlcnRpY2VzLmxlbmd0aCAtIDFdLCBlbmQ6IHZlcnRpY2VzWzBdIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NlZ21lbnRzO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5yZWR1Y2UoKGFjYywgc2VnbWVudCkgPT4gYWNjICsgc2VnbWVudC5sZW5ndGgsIDApO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIHJldHVybiB0aGlzLnBvaW50cztcbiAgfVxuICBuZWFyZXN0UG9pbnQoQSkge1xuICAgIGNvbnN0IHsgc2VnbWVudHMgfSA9IHRoaXM7XG4gICAgbGV0IG5lYXJlc3QgPSB0aGlzLnBvaW50c1swXTtcbiAgICBsZXQgZGlzdCA9IEluZmluaXR5O1xuICAgIGxldCBwO1xuICAgIGxldCBkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHAgPSBzZWdtZW50c1tpXS5uZWFyZXN0UG9pbnQoQSk7XG4gICAgICBkID0gVmVjLkRpc3QyKHAsIEEpO1xuICAgICAgaWYgKGQgPCBkaXN0KSB7XG4gICAgICAgIG5lYXJlc3QgPSBwO1xuICAgICAgICBkaXN0ID0gZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KSB0aHJvdyBFcnJvcihcIm5lYXJlc3QgcG9pbnQgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBuZWFyZXN0O1xuICB9XG4gIGhpdFRlc3RMaW5lU2VnbWVudChBLCBCLCBkaXN0YW5jZSA9IDApIHtcbiAgICBjb25zdCB7IHNlZ21lbnRzIH0gPSB0aGlzO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoc2VnbWVudHNbaV0uaGl0VGVzdExpbmVTZWdtZW50KEEsIEIsIGRpc3RhbmNlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGdldFN2Z1BhdGhEYXRhKCkge1xuICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IHRoaXM7XG4gICAgaWYgKHZlcnRpY2VzLmxlbmd0aCA8IDIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiB2ZXJ0aWNlcy5yZWR1Y2UoKGFjYywgdmVydGV4LCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PT0gMCkgcmV0dXJuIGBNICR7dmVydGV4Lnh9ICR7dmVydGV4Lnl9YDtcbiAgICAgIHJldHVybiBgJHthY2N9IEwgJHt2ZXJ0ZXgueH0gJHt2ZXJ0ZXgueX1gO1xuICAgIH0sIFwiXCIpO1xuICB9XG59XG5leHBvcnQge1xuICBQb2x5bGluZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWxpbmUyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Rectangle2d: () => (/* binding */ Rectangle2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n\n\n\nclass Rectangle2d extends _Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Polygon2d {\n  x;\n  y;\n  w;\n  h;\n  constructor(config) {\n    const { x = 0, y = 0, width, height } = config;\n    super({\n      ...config,\n      points: [\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x, y),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x + width, y),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x + width, y + height),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x, y + height)\n      ]\n    });\n    this.x = x;\n    this.y = y;\n    this.w = width;\n    this.h = height;\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(this.x, this.y, this.w, this.h);\n  }\n  getSvgPathData() {\n    const { x, y, w, h } = this;\n    return `M${x},${y} h${w} v${h} h-${w}z`;\n  }\n}\n\n//# sourceMappingURL=Rectangle2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUmVjdGFuZ2xlMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDQTtBQUNXO0FBQzVDLDBCQUEwQixxREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4QkFBOEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5Q0FBRztBQUNmLFlBQVkseUNBQUc7QUFDZixZQUFZLHlDQUFHO0FBQ2YsWUFBWSx5Q0FBRztBQUNmO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixlQUFlLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFO0FBQ3pDO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUmVjdGFuZ2xlMmQubWpzPzc3ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL0JveC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQb2x5Z29uMmQgfSBmcm9tIFwiLi9Qb2x5Z29uMmQubWpzXCI7XG5jbGFzcyBSZWN0YW5nbGUyZCBleHRlbmRzIFBvbHlnb24yZCB7XG4gIHg7XG4gIHk7XG4gIHc7XG4gIGg7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbnN0IHsgeCA9IDAsIHkgPSAwLCB3aWR0aCwgaGVpZ2h0IH0gPSBjb25maWc7XG4gICAgc3VwZXIoe1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgcG9pbnRzOiBbXG4gICAgICAgIG5ldyBWZWMoeCwgeSksXG4gICAgICAgIG5ldyBWZWMoeCArIHdpZHRoLCB5KSxcbiAgICAgICAgbmV3IFZlYyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQpLFxuICAgICAgICBuZXcgVmVjKHgsIHkgKyBoZWlnaHQpXG4gICAgICBdXG4gICAgfSk7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMudyA9IHdpZHRoO1xuICAgIHRoaXMuaCA9IGhlaWdodDtcbiAgfVxuICBnZXRCb3VuZHMoKSB7XG4gICAgcmV0dXJuIG5ldyBCb3godGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YSgpIHtcbiAgICBjb25zdCB7IHgsIHksIHcsIGggfSA9IHRoaXM7XG4gICAgcmV0dXJuIGBNJHt4fSwke3l9IGgke3d9IHYke2h9IGgtJHt3fXpgO1xuICB9XG59XG5leHBvcnQge1xuICBSZWN0YW5nbGUyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY3RhbmdsZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stadium2d: () => (/* binding */ Stadium2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Arc2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\n\n\n\nclass Stadium2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Geometry2d {\n  constructor(config) {\n    super({ ...config, isClosed: true });\n    this.config = config;\n    const { width: w, height: h } = config;\n    this.w = w;\n    this.h = h;\n    if (h > w) {\n      const r = w / 2;\n      this.a = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, r),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, r),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w / 2, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.b = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, r), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, h - r) });\n      this.c = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, h - r),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, h - r),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w / 2, h - r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.d = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, h - r), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, r) });\n    } else {\n      const r = h / 2;\n      this.a = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, h),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, 0),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.b = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, 0), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, 0) });\n      this.c = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, 0),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, h),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.d = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, h), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, h) });\n    }\n  }\n  w;\n  h;\n  a;\n  b;\n  c;\n  d;\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let _d;\n    let p;\n    const { a, b, c, d } = this;\n    for (const part of [a, b, c, d]) {\n      p = part.nearestPoint(A);\n      _d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, A);\n      if (_d < dist) {\n        nearest = p;\n        dist = _d;\n      }\n    }\n    if (!nearest) throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].some((edge) => edge.hitTestLineSegment(A, B));\n  }\n  getVertices() {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].reduce((a2, p) => {\n      a2.push(...p.vertices);\n      return a2;\n    }, []);\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(0, 0, this.w, this.h);\n  }\n  getLength() {\n    const { h, w } = this;\n    if (h > w) return (_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (w / 2) + (h - w)) * 2;\n    else return (_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (h / 2) + (w - h)) * 2;\n  }\n  getSvgPathData() {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].map((p, i) => p.getSvgPathData(i === 0)).join(\" \") + \" Z\";\n  }\n}\n\n//# sourceMappingURL=Stadium2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvU3RhZGl1bTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ0E7QUFDQztBQUNFO0FBQ0U7QUFDUTtBQUM5Qyx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZDQUFLO0FBQ3hCLG1CQUFtQix5Q0FBRztBQUN0QixpQkFBaUIseUNBQUc7QUFDcEIsb0JBQW9CLHlDQUFHO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLCtDQUFNLEdBQUcsV0FBVyx5Q0FBRyxpQkFBaUIseUNBQUcsWUFBWTtBQUMxRSxtQkFBbUIsNkNBQUs7QUFDeEIsbUJBQW1CLHlDQUFHO0FBQ3RCLGlCQUFpQix5Q0FBRztBQUNwQixvQkFBb0IseUNBQUc7QUFDdkI7QUFDQTtBQUNBLE9BQU87QUFDUCxtQkFBbUIsK0NBQU0sR0FBRyxXQUFXLHlDQUFHLHFCQUFxQix5Q0FBRyxRQUFRO0FBQzFFLE1BQU07QUFDTjtBQUNBLG1CQUFtQiw2Q0FBSztBQUN4QixtQkFBbUIseUNBQUc7QUFDdEIsaUJBQWlCLHlDQUFHO0FBQ3BCLG9CQUFvQix5Q0FBRztBQUN2QjtBQUNBO0FBQ0EsT0FBTztBQUNQLG1CQUFtQiwrQ0FBTSxHQUFHLFdBQVcseUNBQUcsaUJBQWlCLHlDQUFHLFlBQVk7QUFDMUUsbUJBQW1CLDZDQUFLO0FBQ3hCLG1CQUFtQix5Q0FBRztBQUN0QixpQkFBaUIseUNBQUc7QUFDcEIsb0JBQW9CLHlDQUFHO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLCtDQUFNLEdBQUcsV0FBVyx5Q0FBRyxxQkFBcUIseUNBQUcsUUFBUTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0EsV0FBVyx5Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLHlDQUFHO0FBQ2xCO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsdUJBQXVCLDBDQUFFO0FBQ3pCLGlCQUFpQiwwQ0FBRTtBQUNuQjtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9TdGFkaXVtMmQubWpzP2IyYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL0JveC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQSSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEFyYzJkIH0gZnJvbSBcIi4vQXJjMmQubWpzXCI7XG5pbXBvcnQgeyBFZGdlMmQgfSBmcm9tIFwiLi9FZGdlMmQubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIFN0YWRpdW0yZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IHRydWUgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgY29uc3QgeyB3aWR0aDogdywgaGVpZ2h0OiBoIH0gPSBjb25maWc7XG4gICAgdGhpcy53ID0gdztcbiAgICB0aGlzLmggPSBoO1xuICAgIGlmIChoID4gdykge1xuICAgICAgY29uc3QgciA9IHcgLyAyO1xuICAgICAgdGhpcy5hID0gbmV3IEFyYzJkKHtcbiAgICAgICAgc3RhcnQ6IG5ldyBWZWMoMCwgciksXG4gICAgICAgIGVuZDogbmV3IFZlYyh3LCByKSxcbiAgICAgICAgY2VudGVyOiBuZXcgVmVjKHcgLyAyLCByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5iID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKHcsIHIpLCBlbmQ6IG5ldyBWZWModywgaCAtIHIpIH0pO1xuICAgICAgdGhpcy5jID0gbmV3IEFyYzJkKHtcbiAgICAgICAgc3RhcnQ6IG5ldyBWZWModywgaCAtIHIpLFxuICAgICAgICBlbmQ6IG5ldyBWZWMoMCwgaCAtIHIpLFxuICAgICAgICBjZW50ZXI6IG5ldyBWZWModyAvIDIsIGggLSByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKDAsIGggLSByKSwgZW5kOiBuZXcgVmVjKDAsIHIpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByID0gaCAvIDI7XG4gICAgICB0aGlzLmEgPSBuZXcgQXJjMmQoe1xuICAgICAgICBzdGFydDogbmV3IFZlYyhyLCBoKSxcbiAgICAgICAgZW5kOiBuZXcgVmVjKHIsIDApLFxuICAgICAgICBjZW50ZXI6IG5ldyBWZWMociwgciksXG4gICAgICAgIHN3ZWVwRmxhZzogMSxcbiAgICAgICAgbGFyZ2VBcmNGbGFnOiAxXG4gICAgICB9KTtcbiAgICAgIHRoaXMuYiA9IG5ldyBFZGdlMmQoeyBzdGFydDogbmV3IFZlYyhyLCAwKSwgZW5kOiBuZXcgVmVjKHcgLSByLCAwKSB9KTtcbiAgICAgIHRoaXMuYyA9IG5ldyBBcmMyZCh7XG4gICAgICAgIHN0YXJ0OiBuZXcgVmVjKHcgLSByLCAwKSxcbiAgICAgICAgZW5kOiBuZXcgVmVjKHcgLSByLCBoKSxcbiAgICAgICAgY2VudGVyOiBuZXcgVmVjKHcgLSByLCByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKHcgLSByLCBoKSwgZW5kOiBuZXcgVmVjKHIsIGgpIH0pO1xuICAgIH1cbiAgfVxuICB3O1xuICBoO1xuICBhO1xuICBiO1xuICBjO1xuICBkO1xuICBuZWFyZXN0UG9pbnQoQSkge1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IF9kO1xuICAgIGxldCBwO1xuICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gdGhpcztcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgW2EsIGIsIGMsIGRdKSB7XG4gICAgICBwID0gcGFydC5uZWFyZXN0UG9pbnQoQSk7XG4gICAgICBfZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChfZCA8IGRpc3QpIHtcbiAgICAgICAgbmVhcmVzdCA9IHA7XG4gICAgICAgIGRpc3QgPSBfZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KSB0aHJvdyBFcnJvcihcIm5lYXJlc3QgcG9pbnQgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBuZWFyZXN0O1xuICB9XG4gIGhpdFRlc3RMaW5lU2VnbWVudChBLCBCKSB7XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIHJldHVybiBbYSwgYiwgYywgZF0uc29tZSgoZWRnZSkgPT4gZWRnZS5oaXRUZXN0TGluZVNlZ21lbnQoQSwgQikpO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gdGhpcztcbiAgICByZXR1cm4gW2EsIGIsIGMsIGRdLnJlZHVjZSgoYTIsIHApID0+IHtcbiAgICAgIGEyLnB1c2goLi4ucC52ZXJ0aWNlcyk7XG4gICAgICByZXR1cm4gYTI7XG4gICAgfSwgW10pO1xuICB9XG4gIGdldEJvdW5kcygpIHtcbiAgICByZXR1cm4gbmV3IEJveCgwLCAwLCB0aGlzLncsIHRoaXMuaCk7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIGNvbnN0IHsgaCwgdyB9ID0gdGhpcztcbiAgICBpZiAoaCA+IHcpIHJldHVybiAoUEkgKiAodyAvIDIpICsgKGggLSB3KSkgKiAyO1xuICAgIGVsc2UgcmV0dXJuIChQSSAqIChoIC8gMikgKyAodyAtIGgpKSAqIDI7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIHJldHVybiBbYSwgYiwgYywgZF0ubWFwKChwLCBpKSA9PiBwLmdldFN2Z1BhdGhEYXRhKGkgPT09IDApKS5qb2luKFwiIFwiKSArIFwiIFpcIjtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU3RhZGl1bTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhZGl1bTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVerticesCountForLength: () => (/* binding */ getVerticesCountForLength)\n/* harmony export */ });\nconst SPACING = 20;\nconst MIN_COUNT = 8;\nfunction getVerticesCountForLength(length, spacing = SPACING) {\n  return Math.max(MIN_COUNT, Math.ceil(length / spacing));\n}\n\n//# sourceMappingURL=geometry-constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvZ2VvbWV0cnktY29uc3RhbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9nZW9tZXRyeS1jb25zdGFudHMubWpzP2UyYzUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU1BBQ0lORyA9IDIwO1xuY29uc3QgTUlOX0NPVU5UID0gODtcbmZ1bmN0aW9uIGdldFZlcnRpY2VzQ291bnRGb3JMZW5ndGgobGVuZ3RoLCBzcGFjaW5nID0gU1BBQ0lORykge1xuICByZXR1cm4gTWF0aC5tYXgoTUlOX0NPVU5ULCBNYXRoLmNlaWwobGVuZ3RoIC8gc3BhY2luZykpO1xufVxuZXhwb3J0IHtcbiAgZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdlb21ldHJ5LWNvbnN0YW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   intersectCircleCircle: () => (/* binding */ intersectCircleCircle),\n/* harmony export */   intersectCirclePolygon: () => (/* binding */ intersectCirclePolygon),\n/* harmony export */   intersectCirclePolyline: () => (/* binding */ intersectCirclePolyline),\n/* harmony export */   intersectLineSegmentCircle: () => (/* binding */ intersectLineSegmentCircle),\n/* harmony export */   intersectLineSegmentLineSegment: () => (/* binding */ intersectLineSegmentLineSegment),\n/* harmony export */   intersectLineSegmentPolygon: () => (/* binding */ intersectLineSegmentPolygon),\n/* harmony export */   intersectLineSegmentPolyline: () => (/* binding */ intersectLineSegmentPolyline),\n/* harmony export */   intersectPolygonBounds: () => (/* binding */ intersectPolygonBounds),\n/* harmony export */   intersectPolygonPolygon: () => (/* binding */ intersectPolygonPolygon),\n/* harmony export */   linesIntersect: () => (/* binding */ linesIntersect),\n/* harmony export */   polygonIntersectsPolyline: () => (/* binding */ polygonIntersectsPolyline),\n/* harmony export */   polygonsIntersect: () => (/* binding */ polygonsIntersect)\n/* harmony export */ });\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\nfunction intersectLineSegmentLineSegment(a1, a2, b1, b2) {\n  const ABx = a1.x - b1.x;\n  const ABy = a1.y - b1.y;\n  const BVx = b2.x - b1.x;\n  const BVy = b2.y - b1.y;\n  const AVx = a2.x - a1.x;\n  const AVy = a2.y - a1.y;\n  const ua_t = BVx * ABy - BVy * ABx;\n  const ub_t = AVx * ABy - AVy * ABx;\n  const u_b = BVy * AVx - BVx * AVy;\n  if (ua_t === 0 || ub_t === 0) return null;\n  if (u_b === 0) return null;\n  if (u_b !== 0) {\n    const ua = ua_t / u_b;\n    const ub = ub_t / u_b;\n    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n      return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.AddXY(a1, ua * AVx, ua * AVy);\n    }\n  }\n  return null;\n}\nfunction intersectLineSegmentCircle(a1, a2, c, r) {\n  const a = (a2.x - a1.x) * (a2.x - a1.x) + (a2.y - a1.y) * (a2.y - a1.y);\n  const b = 2 * ((a2.x - a1.x) * (a1.x - c.x) + (a2.y - a1.y) * (a1.y - c.y));\n  const cc = c.x * c.x + c.y * c.y + a1.x * a1.x + a1.y * a1.y - 2 * (c.x * a1.x + c.y * a1.y) - r * r;\n  const deter = b * b - 4 * a * cc;\n  if (deter < 0) return null;\n  if (deter === 0) return null;\n  const e = Math.sqrt(deter);\n  const u1 = (-b + e) / (2 * a);\n  const u2 = (-b - e) / (2 * a);\n  if ((u1 < 0 || u1 > 1) && (u2 < 0 || u2 > 1)) {\n    return null;\n  }\n  const result = [];\n  if (0 <= u1 && u1 <= 1) result.push(_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Lrp(a1, a2, u1));\n  if (0 <= u2 && u2 <= 1) result.push(_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Lrp(a1, a2, u2));\n  if (result.length === 0) return null;\n  return result;\n}\nfunction intersectLineSegmentPolyline(a1, a2, points) {\n  const result = [];\n  let segmentIntersection;\n  for (let i = 0, n = points.length - 1; i < n; i++) {\n    segmentIntersection = intersectLineSegmentLineSegment(a1, a2, points[i], points[i + 1]);\n    if (segmentIntersection) result.push(segmentIntersection);\n  }\n  if (result.length === 0) return null;\n  return result;\n}\nfunction intersectLineSegmentPolygon(a1, a2, points) {\n  const result = [];\n  let segmentIntersection;\n  for (let i = 1, n = points.length; i < n + 1; i++) {\n    segmentIntersection = intersectLineSegmentLineSegment(\n      a1,\n      a2,\n      points[i - 1],\n      points[i % points.length]\n    );\n    if (segmentIntersection) result.push(segmentIntersection);\n  }\n  if (result.length === 0) return null;\n  return result;\n}\nfunction intersectCircleCircle(c1, r1, c2, r2) {\n  let dx = c2.x - c1.x;\n  let dy = c2.y - c1.y;\n  const d = Math.sqrt(dx * dx + dy * dy), x = (d * d - r2 * r2 + r1 * r1) / (2 * d), y = Math.sqrt(r1 * r1 - x * x);\n  dx /= d;\n  dy /= d;\n  return [\n    new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(c1.x + dx * x - dy * y, c1.y + dy * x + dx * y),\n    new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(c1.x + dx * x + dy * y, c1.y + dy * x - dx * y)\n  ];\n}\nfunction intersectCirclePolygon(c, r, points) {\n  const result = [];\n  let a, b, int;\n  for (let i = 0, n = points.length; i < n; i++) {\n    a = points[i];\n    b = points[(i + 1) % points.length];\n    int = intersectLineSegmentCircle(a, b, c, r);\n    if (int) result.push(...int);\n  }\n  if (result.length === 0) return null;\n  return result;\n}\nfunction intersectCirclePolyline(c, r, points) {\n  const result = [];\n  let a, b, int;\n  for (let i = 1, n = points.length; i < n; i++) {\n    a = points[i - 1];\n    b = points[i];\n    int = intersectLineSegmentCircle(a, b, c, r);\n    if (int) result.push(...int);\n  }\n  if (result.length === 0) return null;\n  return result;\n}\nfunction intersectPolygonBounds(points, bounds) {\n  const result = [];\n  let segmentIntersection;\n  for (const side of bounds.sides) {\n    segmentIntersection = intersectLineSegmentPolygon(side[0], side[1], points);\n    if (segmentIntersection) result.push(...segmentIntersection);\n  }\n  if (result.length === 0) return null;\n  return result;\n}\nfunction ccw(A, B, C) {\n  return (C.y - A.y) * (B.x - A.x) > (B.y - A.y) * (C.x - A.x);\n}\nfunction linesIntersect(A, B, C, D) {\n  return ccw(A, C, D) !== ccw(B, C, D) && ccw(A, B, C) !== ccw(A, B, D);\n}\nfunction intersectPolygonPolygon(polygonA, polygonB) {\n  const result = /* @__PURE__ */ new Map();\n  let a, b, c, d;\n  for (let i = 0, n = polygonA.length; i < n; i++) {\n    a = polygonA[i];\n    if ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.pointInPolygon)(a, polygonB)) {\n      const id = getPointId(a);\n      if (!result.has(id)) {\n        result.set(id, a);\n      }\n    }\n  }\n  for (let i = 0, n = polygonB.length; i < n; i++) {\n    a = polygonB[i];\n    if ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.pointInPolygon)(a, polygonA)) {\n      const id = getPointId(a);\n      if (!result.has(id)) {\n        result.set(id, a);\n      }\n    }\n  }\n  for (let i = 0, n = polygonA.length; i < n; i++) {\n    a = polygonA[i];\n    b = polygonA[(i + 1) % polygonA.length];\n    for (let j = 0, m = polygonB.length; j < m; j++) {\n      c = polygonB[j];\n      d = polygonB[(j + 1) % polygonB.length];\n      const intersection = intersectLineSegmentLineSegment(a, b, c, d);\n      if (intersection !== null) {\n        const id = getPointId(intersection);\n        if (!result.has(id)) {\n          result.set(id, intersection);\n        }\n      }\n    }\n  }\n  if (result.size === 0) return null;\n  return orderClockwise([...result.values()]);\n}\nfunction getPointId(point) {\n  return `${point.x},${point.y}`;\n}\nfunction orderClockwise(points) {\n  const C = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Average(points);\n  return points.sort((A, B) => _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Angle(C, A) - _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Angle(C, B));\n}\nfunction polygonsIntersect(a, b) {\n  let a0, a1, b0, b1;\n  for (let i = 0, n = a.length; i < n; i++) {\n    a0 = a[i];\n    a1 = a[(i + 1) % n];\n    for (let j = 0, m = b.length; j < m; j++) {\n      b0 = b[j];\n      b1 = b[(j + 1) % m];\n      if (linesIntersect(a0, a1, b0, b1)) return true;\n    }\n  }\n  return false;\n}\nfunction polygonIntersectsPolyline(polygon, polyline) {\n  let a, b, c, d;\n  for (let i = 0, n = polygon.length; i < n; i++) {\n    a = polygon[i];\n    b = polygon[(i + 1) % n];\n    for (let j = 1, m = polyline.length; j < m; j++) {\n      c = polyline[j - 1];\n      d = polyline[j];\n      if (linesIntersect(a, b, c, d)) return true;\n    }\n  }\n  return false;\n}\n\n//# sourceMappingURL=intersect.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvaW50ZXJzZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNiO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5Q0FBRztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MseUNBQUc7QUFDekMsc0NBQXNDLHlDQUFHO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseUNBQUc7QUFDWCxRQUFRLHlDQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxPQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBLFFBQVEsMERBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE9BQU87QUFDOUM7QUFDQSxRQUFRLDBEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQSx5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsR0FBRyxRQUFRO0FBQy9CO0FBQ0E7QUFDQSxZQUFZLHlDQUFHO0FBQ2YsK0JBQStCLHlDQUFHLGVBQWUseUNBQUc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBLGtDQUFrQyxPQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxPQUFPO0FBQzdDO0FBQ0E7QUFDQSx5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9pbnRlcnNlY3QubWpzP2EzMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcG9pbnRJblBvbHlnb24gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuL1ZlYy5tanNcIjtcbmZ1bmN0aW9uIGludGVyc2VjdExpbmVTZWdtZW50TGluZVNlZ21lbnQoYTEsIGEyLCBiMSwgYjIpIHtcbiAgY29uc3QgQUJ4ID0gYTEueCAtIGIxLng7XG4gIGNvbnN0IEFCeSA9IGExLnkgLSBiMS55O1xuICBjb25zdCBCVnggPSBiMi54IC0gYjEueDtcbiAgY29uc3QgQlZ5ID0gYjIueSAtIGIxLnk7XG4gIGNvbnN0IEFWeCA9IGEyLnggLSBhMS54O1xuICBjb25zdCBBVnkgPSBhMi55IC0gYTEueTtcbiAgY29uc3QgdWFfdCA9IEJWeCAqIEFCeSAtIEJWeSAqIEFCeDtcbiAgY29uc3QgdWJfdCA9IEFWeCAqIEFCeSAtIEFWeSAqIEFCeDtcbiAgY29uc3QgdV9iID0gQlZ5ICogQVZ4IC0gQlZ4ICogQVZ5O1xuICBpZiAodWFfdCA9PT0gMCB8fCB1Yl90ID09PSAwKSByZXR1cm4gbnVsbDtcbiAgaWYgKHVfYiA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIGlmICh1X2IgIT09IDApIHtcbiAgICBjb25zdCB1YSA9IHVhX3QgLyB1X2I7XG4gICAgY29uc3QgdWIgPSB1Yl90IC8gdV9iO1xuICAgIGlmICgwIDw9IHVhICYmIHVhIDw9IDEgJiYgMCA8PSB1YiAmJiB1YiA8PSAxKSB7XG4gICAgICByZXR1cm4gVmVjLkFkZFhZKGExLCB1YSAqIEFWeCwgdWEgKiBBVnkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlKGExLCBhMiwgYywgcikge1xuICBjb25zdCBhID0gKGEyLnggLSBhMS54KSAqIChhMi54IC0gYTEueCkgKyAoYTIueSAtIGExLnkpICogKGEyLnkgLSBhMS55KTtcbiAgY29uc3QgYiA9IDIgKiAoKGEyLnggLSBhMS54KSAqIChhMS54IC0gYy54KSArIChhMi55IC0gYTEueSkgKiAoYTEueSAtIGMueSkpO1xuICBjb25zdCBjYyA9IGMueCAqIGMueCArIGMueSAqIGMueSArIGExLnggKiBhMS54ICsgYTEueSAqIGExLnkgLSAyICogKGMueCAqIGExLnggKyBjLnkgKiBhMS55KSAtIHIgKiByO1xuICBjb25zdCBkZXRlciA9IGIgKiBiIC0gNCAqIGEgKiBjYztcbiAgaWYgKGRldGVyIDwgMCkgcmV0dXJuIG51bGw7XG4gIGlmIChkZXRlciA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGUgPSBNYXRoLnNxcnQoZGV0ZXIpO1xuICBjb25zdCB1MSA9ICgtYiArIGUpIC8gKDIgKiBhKTtcbiAgY29uc3QgdTIgPSAoLWIgLSBlKSAvICgyICogYSk7XG4gIGlmICgodTEgPCAwIHx8IHUxID4gMSkgJiYgKHUyIDwgMCB8fCB1MiA+IDEpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGlmICgwIDw9IHUxICYmIHUxIDw9IDEpIHJlc3VsdC5wdXNoKFZlYy5McnAoYTEsIGEyLCB1MSkpO1xuICBpZiAoMCA8PSB1MiAmJiB1MiA8PSAxKSByZXN1bHQucHVzaChWZWMuTHJwKGExLCBhMiwgdTIpKTtcbiAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaW50ZXJzZWN0TGluZVNlZ21lbnRQb2x5bGluZShhMSwgYTIsIHBvaW50cykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbGV0IHNlZ21lbnRJbnRlcnNlY3Rpb247XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBuOyBpKyspIHtcbiAgICBzZWdtZW50SW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudChhMSwgYTIsIHBvaW50c1tpXSwgcG9pbnRzW2kgKyAxXSk7XG4gICAgaWYgKHNlZ21lbnRJbnRlcnNlY3Rpb24pIHJlc3VsdC5wdXNoKHNlZ21lbnRJbnRlcnNlY3Rpb24pO1xuICB9XG4gIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdExpbmVTZWdtZW50UG9seWdvbihhMSwgYTIsIHBvaW50cykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbGV0IHNlZ21lbnRJbnRlcnNlY3Rpb247XG4gIGZvciAobGV0IGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aDsgaSA8IG4gKyAxOyBpKyspIHtcbiAgICBzZWdtZW50SW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudChcbiAgICAgIGExLFxuICAgICAgYTIsXG4gICAgICBwb2ludHNbaSAtIDFdLFxuICAgICAgcG9pbnRzW2kgJSBwb2ludHMubGVuZ3RoXVxuICAgICk7XG4gICAgaWYgKHNlZ21lbnRJbnRlcnNlY3Rpb24pIHJlc3VsdC5wdXNoKHNlZ21lbnRJbnRlcnNlY3Rpb24pO1xuICB9XG4gIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdENpcmNsZUNpcmNsZShjMSwgcjEsIGMyLCByMikge1xuICBsZXQgZHggPSBjMi54IC0gYzEueDtcbiAgbGV0IGR5ID0gYzIueSAtIGMxLnk7XG4gIGNvbnN0IGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpLCB4ID0gKGQgKiBkIC0gcjIgKiByMiArIHIxICogcjEpIC8gKDIgKiBkKSwgeSA9IE1hdGguc3FydChyMSAqIHIxIC0geCAqIHgpO1xuICBkeCAvPSBkO1xuICBkeSAvPSBkO1xuICByZXR1cm4gW1xuICAgIG5ldyBWZWMoYzEueCArIGR4ICogeCAtIGR5ICogeSwgYzEueSArIGR5ICogeCArIGR4ICogeSksXG4gICAgbmV3IFZlYyhjMS54ICsgZHggKiB4ICsgZHkgKiB5LCBjMS55ICsgZHkgKiB4IC0gZHggKiB5KVxuICBdO1xufVxuZnVuY3Rpb24gaW50ZXJzZWN0Q2lyY2xlUG9seWdvbihjLCByLCBwb2ludHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBhLCBiLCBpbnQ7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9pbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGEgPSBwb2ludHNbaV07XG4gICAgYiA9IHBvaW50c1soaSArIDEpICUgcG9pbnRzLmxlbmd0aF07XG4gICAgaW50ID0gaW50ZXJzZWN0TGluZVNlZ21lbnRDaXJjbGUoYSwgYiwgYywgcik7XG4gICAgaWYgKGludCkgcmVzdWx0LnB1c2goLi4uaW50KTtcbiAgfVxuICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpbnRlcnNlY3RDaXJjbGVQb2x5bGluZShjLCByLCBwb2ludHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBhLCBiLCBpbnQ7XG4gIGZvciAobGV0IGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGEgPSBwb2ludHNbaSAtIDFdO1xuICAgIGIgPSBwb2ludHNbaV07XG4gICAgaW50ID0gaW50ZXJzZWN0TGluZVNlZ21lbnRDaXJjbGUoYSwgYiwgYywgcik7XG4gICAgaWYgKGludCkgcmVzdWx0LnB1c2goLi4uaW50KTtcbiAgfVxuICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpbnRlcnNlY3RQb2x5Z29uQm91bmRzKHBvaW50cywgYm91bmRzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBsZXQgc2VnbWVudEludGVyc2VjdGlvbjtcbiAgZm9yIChjb25zdCBzaWRlIG9mIGJvdW5kcy5zaWRlcykge1xuICAgIHNlZ21lbnRJbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlnb24oc2lkZVswXSwgc2lkZVsxXSwgcG9pbnRzKTtcbiAgICBpZiAoc2VnbWVudEludGVyc2VjdGlvbikgcmVzdWx0LnB1c2goLi4uc2VnbWVudEludGVyc2VjdGlvbik7XG4gIH1cbiAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2N3KEEsIEIsIEMpIHtcbiAgcmV0dXJuIChDLnkgLSBBLnkpICogKEIueCAtIEEueCkgPiAoQi55IC0gQS55KSAqIChDLnggLSBBLngpO1xufVxuZnVuY3Rpb24gbGluZXNJbnRlcnNlY3QoQSwgQiwgQywgRCkge1xuICByZXR1cm4gY2N3KEEsIEMsIEQpICE9PSBjY3coQiwgQywgRCkgJiYgY2N3KEEsIEIsIEMpICE9PSBjY3coQSwgQiwgRCk7XG59XG5mdW5jdGlvbiBpbnRlcnNlY3RQb2x5Z29uUG9seWdvbihwb2x5Z29uQSwgcG9seWdvbkIpIHtcbiAgY29uc3QgcmVzdWx0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgbGV0IGEsIGIsIGMsIGQ7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9seWdvbkEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgYSA9IHBvbHlnb25BW2ldO1xuICAgIGlmIChwb2ludEluUG9seWdvbihhLCBwb2x5Z29uQikpIHtcbiAgICAgIGNvbnN0IGlkID0gZ2V0UG9pbnRJZChhKTtcbiAgICAgIGlmICghcmVzdWx0LmhhcyhpZCkpIHtcbiAgICAgICAgcmVzdWx0LnNldChpZCwgYSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9seWdvbkIubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgYSA9IHBvbHlnb25CW2ldO1xuICAgIGlmIChwb2ludEluUG9seWdvbihhLCBwb2x5Z29uQSkpIHtcbiAgICAgIGNvbnN0IGlkID0gZ2V0UG9pbnRJZChhKTtcbiAgICAgIGlmICghcmVzdWx0LmhhcyhpZCkpIHtcbiAgICAgICAgcmVzdWx0LnNldChpZCwgYSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9seWdvbkEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgYSA9IHBvbHlnb25BW2ldO1xuICAgIGIgPSBwb2x5Z29uQVsoaSArIDEpICUgcG9seWdvbkEubGVuZ3RoXTtcbiAgICBmb3IgKGxldCBqID0gMCwgbSA9IHBvbHlnb25CLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgYyA9IHBvbHlnb25CW2pdO1xuICAgICAgZCA9IHBvbHlnb25CWyhqICsgMSkgJSBwb2x5Z29uQi5sZW5ndGhdO1xuICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudChhLCBiLCBjLCBkKTtcbiAgICAgIGlmIChpbnRlcnNlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRQb2ludElkKGludGVyc2VjdGlvbik7XG4gICAgICAgIGlmICghcmVzdWx0LmhhcyhpZCkpIHtcbiAgICAgICAgICByZXN1bHQuc2V0KGlkLCBpbnRlcnNlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChyZXN1bHQuc2l6ZSA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBvcmRlckNsb2Nrd2lzZShbLi4ucmVzdWx0LnZhbHVlcygpXSk7XG59XG5mdW5jdGlvbiBnZXRQb2ludElkKHBvaW50KSB7XG4gIHJldHVybiBgJHtwb2ludC54fSwke3BvaW50Lnl9YDtcbn1cbmZ1bmN0aW9uIG9yZGVyQ2xvY2t3aXNlKHBvaW50cykge1xuICBjb25zdCBDID0gVmVjLkF2ZXJhZ2UocG9pbnRzKTtcbiAgcmV0dXJuIHBvaW50cy5zb3J0KChBLCBCKSA9PiBWZWMuQW5nbGUoQywgQSkgLSBWZWMuQW5nbGUoQywgQikpO1xufVxuZnVuY3Rpb24gcG9seWdvbnNJbnRlcnNlY3QoYSwgYikge1xuICBsZXQgYTAsIGExLCBiMCwgYjE7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gYS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhMCA9IGFbaV07XG4gICAgYTEgPSBhWyhpICsgMSkgJSBuXTtcbiAgICBmb3IgKGxldCBqID0gMCwgbSA9IGIubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICBiMCA9IGJbal07XG4gICAgICBiMSA9IGJbKGogKyAxKSAlIG1dO1xuICAgICAgaWYgKGxpbmVzSW50ZXJzZWN0KGEwLCBhMSwgYjAsIGIxKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUocG9seWdvbiwgcG9seWxpbmUpIHtcbiAgbGV0IGEsIGIsIGMsIGQ7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9seWdvbi5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhID0gcG9seWdvbltpXTtcbiAgICBiID0gcG9seWdvblsoaSArIDEpICUgbl07XG4gICAgZm9yIChsZXQgaiA9IDEsIG0gPSBwb2x5bGluZS5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgIGMgPSBwb2x5bGluZVtqIC0gMV07XG4gICAgICBkID0gcG9seWxpbmVbal07XG4gICAgICBpZiAobGluZXNJbnRlcnNlY3QoYSwgYiwgYywgZCkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1xuICBpbnRlcnNlY3RDaXJjbGVDaXJjbGUsXG4gIGludGVyc2VjdENpcmNsZVBvbHlnb24sXG4gIGludGVyc2VjdENpcmNsZVBvbHlsaW5lLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZSxcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudCxcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRQb2x5Z29uLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlsaW5lLFxuICBpbnRlcnNlY3RQb2x5Z29uQm91bmRzLFxuICBpbnRlcnNlY3RQb2x5Z29uUG9seWdvbixcbiAgbGluZXNJbnRlcnNlY3QsXG4gIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUsXG4gIHBvbHlnb25zSW50ZXJzZWN0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HALF_PI: () => (/* binding */ HALF_PI),\n/* harmony export */   PI: () => (/* binding */ PI),\n/* harmony export */   PI2: () => (/* binding */ PI2),\n/* harmony export */   SIN: () => (/* binding */ SIN),\n/* harmony export */   angleDistance: () => (/* binding */ angleDistance),\n/* harmony export */   approximately: () => (/* binding */ approximately),\n/* harmony export */   areAnglesCompatible: () => (/* binding */ areAnglesCompatible),\n/* harmony export */   average: () => (/* binding */ average),\n/* harmony export */   canonicalizeRotation: () => (/* binding */ canonicalizeRotation),\n/* harmony export */   centerOfCircleFromThreePoints: () => (/* binding */ centerOfCircleFromThreePoints),\n/* harmony export */   clamp: () => (/* binding */ clamp),\n/* harmony export */   clampRadians: () => (/* binding */ clampRadians),\n/* harmony export */   clockwiseAngleDist: () => (/* binding */ clockwiseAngleDist),\n/* harmony export */   counterClockwiseAngleDist: () => (/* binding */ counterClockwiseAngleDist),\n/* harmony export */   degreesToRadians: () => (/* binding */ degreesToRadians),\n/* harmony export */   getArcMeasure: () => (/* binding */ getArcMeasure),\n/* harmony export */   getPointInArcT: () => (/* binding */ getPointInArcT),\n/* harmony export */   getPointOnCircle: () => (/* binding */ getPointOnCircle),\n/* harmony export */   getPointsOnArc: () => (/* binding */ getPointsOnArc),\n/* harmony export */   getPolygonVertices: () => (/* binding */ getPolygonVertices),\n/* harmony export */   isSafeFloat: () => (/* binding */ isSafeFloat),\n/* harmony export */   perimeterOfEllipse: () => (/* binding */ perimeterOfEllipse),\n/* harmony export */   pointInPolygon: () => (/* binding */ pointInPolygon),\n/* harmony export */   precise: () => (/* binding */ precise),\n/* harmony export */   radiansToDegrees: () => (/* binding */ radiansToDegrees),\n/* harmony export */   rangeIntersection: () => (/* binding */ rangeIntersection),\n/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),\n/* harmony export */   shortAngleDist: () => (/* binding */ shortAngleDist),\n/* harmony export */   snapAngle: () => (/* binding */ snapAngle),\n/* harmony export */   toDomPrecision: () => (/* binding */ toDomPrecision),\n/* harmony export */   toFixed: () => (/* binding */ toFixed),\n/* harmony export */   toPrecision: () => (/* binding */ toPrecision)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\nfunction precise(A) {\n  return `${toDomPrecision(A.x)},${toDomPrecision(A.y)} `;\n}\nfunction average(A, B) {\n  return `${toDomPrecision((A.x + B.x) / 2)},${toDomPrecision((A.y + B.y) / 2)} `;\n}\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst PI2 = PI * 2;\nconst SIN = Math.sin;\nfunction clamp(n, min, max) {\n  return Math.max(min, typeof max !== \"undefined\" ? Math.min(n, max) : n);\n}\nfunction toPrecision(n, precision = 1e10) {\n  if (!n) return 0;\n  return Math.round(n * precision) / precision;\n}\nfunction approximately(a, b, precision = 1e-6) {\n  return Math.abs(a - b) <= precision;\n}\nfunction perimeterOfEllipse(rx, ry) {\n  const h = Math.pow(rx - ry, 2) / Math.pow(rx + ry, 2);\n  return PI * (rx + ry) * (1 + 3 * h / (10 + Math.sqrt(4 - 3 * h)));\n}\nfunction canonicalizeRotation(a) {\n  a = a % PI2;\n  if (a < 0) {\n    a = a + PI2;\n  } else if (a === 0) {\n    a = 0;\n  }\n  return a;\n}\nfunction clockwiseAngleDist(a0, a1) {\n  a0 = canonicalizeRotation(a0);\n  a1 = canonicalizeRotation(a1);\n  if (a0 > a1) {\n    a1 += PI2;\n  }\n  return a1 - a0;\n}\nfunction counterClockwiseAngleDist(a0, a1) {\n  return PI2 - clockwiseAngleDist(a0, a1);\n}\nfunction shortAngleDist(a0, a1) {\n  const da = (a1 - a0) % PI2;\n  return 2 * da % PI2 - da;\n}\nfunction clampRadians(r) {\n  return (PI2 + r) % PI2;\n}\nfunction snapAngle(r, segments) {\n  const seg = PI2 / segments;\n  let ang = Math.floor((clampRadians(r) + seg / 2) / seg) * seg % PI2;\n  if (ang < PI) ang += PI2;\n  if (ang > PI) ang -= PI2;\n  return ang;\n}\nfunction areAnglesCompatible(a, b) {\n  return a === b || approximately(a % (Math.PI / 2) - b % (Math.PI / 2), 0);\n}\nfunction degreesToRadians(d) {\n  return d * PI / 180;\n}\nfunction radiansToDegrees(r) {\n  return r * 180 / PI;\n}\nfunction getPointOnCircle(center, r, a) {\n  return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(center.x, center.y).add(_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.FromAngle(a, r));\n}\nfunction getPolygonVertices(width, height, sides) {\n  const cx = width / 2;\n  const cy = height / 2;\n  const pointsOnPerimeter = [];\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n  for (let i = 0; i < sides; i++) {\n    const step = PI2 / sides;\n    const t = -HALF_PI + i * step;\n    const x = cx + cx * Math.cos(t);\n    const y = cy + cy * Math.sin(t);\n    if (x < minX) minX = x;\n    if (y < minY) minY = y;\n    if (x > maxX) maxX = x;\n    if (y > maxY) maxY = y;\n    pointsOnPerimeter.push(new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(x, y));\n  }\n  const w = maxX - minX;\n  const h = maxY - minY;\n  const dx = width - w;\n  const dy = height - h;\n  if (dx !== 0 || dy !== 0) {\n    for (let i = 0; i < pointsOnPerimeter.length; i++) {\n      const pt = pointsOnPerimeter[i];\n      pt.x = (pt.x - minX) / w * width;\n      pt.y = (pt.y - minY) / h * height;\n    }\n  }\n  return pointsOnPerimeter;\n}\nfunction rangesOverlap(a0, a1, b0, b1) {\n  return a0 < b1 && b0 < a1;\n}\nfunction rangeIntersection(a0, a1, b0, b1) {\n  const min = Math.max(a0, b0);\n  const max = Math.min(a1, b1);\n  if (min <= max) {\n    return [min, max];\n  }\n  return null;\n}\nfunction cross(x, y, z) {\n  return (y.x - x.x) * (z.y - x.y) - (z.x - x.x) * (y.y - x.y);\n}\nfunction pointInPolygon(A, points) {\n  let windingNumber = 0;\n  let a;\n  let b;\n  for (let i = 0; i < points.length; i++) {\n    a = points[i];\n    if (a.x === A.x && a.y === A.y) return true;\n    b = points[(i + 1) % points.length];\n    if (_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(A, a) + _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(A, b) === _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(a, b)) return true;\n    if (a.y <= A.y) {\n      if (b.y > A.y && cross(a, b, A) > 0) {\n        windingNumber += 1;\n      }\n    } else if (b.y <= A.y && cross(a, b, A) < 0) {\n      windingNumber -= 1;\n    }\n  }\n  return windingNumber !== 0;\n}\nfunction toDomPrecision(v) {\n  return Math.round(v * 1e4) / 1e4;\n}\nfunction toFixed(v) {\n  return Math.round(v * 100) / 100;\n}\nconst isSafeFloat = (n) => {\n  return Math.abs(n) < Number.MAX_SAFE_INTEGER;\n};\nfunction angleDistance(fromAngle, toAngle, direction) {\n  const dist = direction < 0 ? clockwiseAngleDist(fromAngle, toAngle) : counterClockwiseAngleDist(fromAngle, toAngle);\n  return dist;\n}\nfunction getPointInArcT(mAB, A, B, P) {\n  let mAP;\n  if (Math.abs(mAB) > PI) {\n    mAP = shortAngleDist(A, P);\n    const mPB = shortAngleDist(P, B);\n    if (Math.abs(mAP) < Math.abs(mPB)) {\n      return mAP / mAB;\n    } else {\n      return (mAB - mPB) / mAB;\n    }\n  } else {\n    mAP = shortAngleDist(A, P);\n    const t = mAP / mAB;\n    if (Math.sign(mAP) !== Math.sign(mAB)) {\n      return Math.abs(t) > 0.5 ? 1 : 0;\n    }\n    return t;\n  }\n}\nfunction getArcMeasure(A, B, sweepFlag, largeArcFlag) {\n  const m = 2 * ((B - A) % PI2) % PI2 - (B - A) % PI2;\n  if (!largeArcFlag) return m;\n  return (PI2 - Math.abs(m)) * (sweepFlag ? 1 : -1);\n}\nfunction centerOfCircleFromThreePoints(a, b, c) {\n  const u = -2 * (a.x * (b.y - c.y) - a.y * (b.x - c.x) + b.x * c.y - c.x * b.y);\n  const x = ((a.x * a.x + a.y * a.y) * (c.y - b.y) + (b.x * b.x + b.y * b.y) * (a.y - c.y) + (c.x * c.x + c.y * c.y) * (b.y - a.y)) / u;\n  const y = ((a.x * a.x + a.y * a.y) * (b.x - c.x) + (b.x * b.x + b.y * b.y) * (c.x - a.x) + (c.x * c.x + c.y * c.y) * (a.x - b.x)) / u;\n  if (!Number.isFinite(x) || !Number.isFinite(y)) {\n    return null;\n  }\n  return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(x, y);\n}\nfunction getPointsOnArc(startPoint, endPoint, center, radius, numPoints) {\n  if (center === null) {\n    return [_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(startPoint), _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(endPoint)];\n  }\n  const results = [];\n  const startAngle = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, startPoint);\n  const endAngle = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, endPoint);\n  const l = clockwiseAngleDist(startAngle, endAngle);\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle = startAngle + l * t;\n    const point = getPointOnCircle(center, radius, angle);\n    results.push(point);\n  }\n  return results;\n}\n\n//# sourceMappingURL=utils.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnQztBQUNoQztBQUNBLFlBQVksb0JBQW9CLEdBQUcscUJBQXFCO0FBQ3hEO0FBQ0E7QUFDQSxZQUFZLGdDQUFnQyxHQUFHLGlDQUFpQztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUNBQUcseUJBQXlCLHlDQUFHO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUNBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhCQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5Q0FBRyxjQUFjLHlDQUFHLGdCQUFnQix5Q0FBRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlDQUFHO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUNBQUcsbUJBQW1CLHlDQUFHO0FBQ3JDO0FBQ0E7QUFDQSxxQkFBcUIseUNBQUc7QUFDeEIsbUJBQW1CLHlDQUFHO0FBQ3RCO0FBQ0Esa0JBQWtCLGVBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrQ0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL3V0aWxzLm1qcz81YmI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuL1ZlYy5tanNcIjtcbmZ1bmN0aW9uIHByZWNpc2UoQSkge1xuICByZXR1cm4gYCR7dG9Eb21QcmVjaXNpb24oQS54KX0sJHt0b0RvbVByZWNpc2lvbihBLnkpfSBgO1xufVxuZnVuY3Rpb24gYXZlcmFnZShBLCBCKSB7XG4gIHJldHVybiBgJHt0b0RvbVByZWNpc2lvbigoQS54ICsgQi54KSAvIDIpfSwke3RvRG9tUHJlY2lzaW9uKChBLnkgKyBCLnkpIC8gMil9IGA7XG59XG5jb25zdCBQSSA9IE1hdGguUEk7XG5jb25zdCBIQUxGX1BJID0gUEkgLyAyO1xuY29uc3QgUEkyID0gUEkgKiAyO1xuY29uc3QgU0lOID0gTWF0aC5zaW47XG5mdW5jdGlvbiBjbGFtcChuLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5tYXgobWluLCB0eXBlb2YgbWF4ICE9PSBcInVuZGVmaW5lZFwiID8gTWF0aC5taW4obiwgbWF4KSA6IG4pO1xufVxuZnVuY3Rpb24gdG9QcmVjaXNpb24obiwgcHJlY2lzaW9uID0gMWUxMCkge1xuICBpZiAoIW4pIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5yb3VuZChuICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbn1cbmZ1bmN0aW9uIGFwcHJveGltYXRlbHkoYSwgYiwgcHJlY2lzaW9uID0gMWUtNikge1xuICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDw9IHByZWNpc2lvbjtcbn1cbmZ1bmN0aW9uIHBlcmltZXRlck9mRWxsaXBzZShyeCwgcnkpIHtcbiAgY29uc3QgaCA9IE1hdGgucG93KHJ4IC0gcnksIDIpIC8gTWF0aC5wb3cocnggKyByeSwgMik7XG4gIHJldHVybiBQSSAqIChyeCArIHJ5KSAqICgxICsgMyAqIGggLyAoMTAgKyBNYXRoLnNxcnQoNCAtIDMgKiBoKSkpO1xufVxuZnVuY3Rpb24gY2Fub25pY2FsaXplUm90YXRpb24oYSkge1xuICBhID0gYSAlIFBJMjtcbiAgaWYgKGEgPCAwKSB7XG4gICAgYSA9IGEgKyBQSTI7XG4gIH0gZWxzZSBpZiAoYSA9PT0gMCkge1xuICAgIGEgPSAwO1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gY2xvY2t3aXNlQW5nbGVEaXN0KGEwLCBhMSkge1xuICBhMCA9IGNhbm9uaWNhbGl6ZVJvdGF0aW9uKGEwKTtcbiAgYTEgPSBjYW5vbmljYWxpemVSb3RhdGlvbihhMSk7XG4gIGlmIChhMCA+IGExKSB7XG4gICAgYTEgKz0gUEkyO1xuICB9XG4gIHJldHVybiBhMSAtIGEwO1xufVxuZnVuY3Rpb24gY291bnRlckNsb2Nrd2lzZUFuZ2xlRGlzdChhMCwgYTEpIHtcbiAgcmV0dXJuIFBJMiAtIGNsb2Nrd2lzZUFuZ2xlRGlzdChhMCwgYTEpO1xufVxuZnVuY3Rpb24gc2hvcnRBbmdsZURpc3QoYTAsIGExKSB7XG4gIGNvbnN0IGRhID0gKGExIC0gYTApICUgUEkyO1xuICByZXR1cm4gMiAqIGRhICUgUEkyIC0gZGE7XG59XG5mdW5jdGlvbiBjbGFtcFJhZGlhbnMocikge1xuICByZXR1cm4gKFBJMiArIHIpICUgUEkyO1xufVxuZnVuY3Rpb24gc25hcEFuZ2xlKHIsIHNlZ21lbnRzKSB7XG4gIGNvbnN0IHNlZyA9IFBJMiAvIHNlZ21lbnRzO1xuICBsZXQgYW5nID0gTWF0aC5mbG9vcigoY2xhbXBSYWRpYW5zKHIpICsgc2VnIC8gMikgLyBzZWcpICogc2VnICUgUEkyO1xuICBpZiAoYW5nIDwgUEkpIGFuZyArPSBQSTI7XG4gIGlmIChhbmcgPiBQSSkgYW5nIC09IFBJMjtcbiAgcmV0dXJuIGFuZztcbn1cbmZ1bmN0aW9uIGFyZUFuZ2xlc0NvbXBhdGlibGUoYSwgYikge1xuICByZXR1cm4gYSA9PT0gYiB8fCBhcHByb3hpbWF0ZWx5KGEgJSAoTWF0aC5QSSAvIDIpIC0gYiAlIChNYXRoLlBJIC8gMiksIDApO1xufVxuZnVuY3Rpb24gZGVncmVlc1RvUmFkaWFucyhkKSB7XG4gIHJldHVybiBkICogUEkgLyAxODA7XG59XG5mdW5jdGlvbiByYWRpYW5zVG9EZWdyZWVzKHIpIHtcbiAgcmV0dXJuIHIgKiAxODAgLyBQSTtcbn1cbmZ1bmN0aW9uIGdldFBvaW50T25DaXJjbGUoY2VudGVyLCByLCBhKSB7XG4gIHJldHVybiBuZXcgVmVjKGNlbnRlci54LCBjZW50ZXIueSkuYWRkKFZlYy5Gcm9tQW5nbGUoYSwgcikpO1xufVxuZnVuY3Rpb24gZ2V0UG9seWdvblZlcnRpY2VzKHdpZHRoLCBoZWlnaHQsIHNpZGVzKSB7XG4gIGNvbnN0IGN4ID0gd2lkdGggLyAyO1xuICBjb25zdCBjeSA9IGhlaWdodCAvIDI7XG4gIGNvbnN0IHBvaW50c09uUGVyaW1ldGVyID0gW107XG4gIGxldCBtaW5YID0gSW5maW5pdHk7XG4gIGxldCBtYXhYID0gLUluZmluaXR5O1xuICBsZXQgbWluWSA9IEluZmluaXR5O1xuICBsZXQgbWF4WSA9IC1JbmZpbml0eTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWRlczsgaSsrKSB7XG4gICAgY29uc3Qgc3RlcCA9IFBJMiAvIHNpZGVzO1xuICAgIGNvbnN0IHQgPSAtSEFMRl9QSSArIGkgKiBzdGVwO1xuICAgIGNvbnN0IHggPSBjeCArIGN4ICogTWF0aC5jb3ModCk7XG4gICAgY29uc3QgeSA9IGN5ICsgY3kgKiBNYXRoLnNpbih0KTtcbiAgICBpZiAoeCA8IG1pblgpIG1pblggPSB4O1xuICAgIGlmICh5IDwgbWluWSkgbWluWSA9IHk7XG4gICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICBpZiAoeSA+IG1heFkpIG1heFkgPSB5O1xuICAgIHBvaW50c09uUGVyaW1ldGVyLnB1c2gobmV3IFZlYyh4LCB5KSk7XG4gIH1cbiAgY29uc3QgdyA9IG1heFggLSBtaW5YO1xuICBjb25zdCBoID0gbWF4WSAtIG1pblk7XG4gIGNvbnN0IGR4ID0gd2lkdGggLSB3O1xuICBjb25zdCBkeSA9IGhlaWdodCAtIGg7XG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzT25QZXJpbWV0ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHB0ID0gcG9pbnRzT25QZXJpbWV0ZXJbaV07XG4gICAgICBwdC54ID0gKHB0LnggLSBtaW5YKSAvIHcgKiB3aWR0aDtcbiAgICAgIHB0LnkgPSAocHQueSAtIG1pblkpIC8gaCAqIGhlaWdodDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50c09uUGVyaW1ldGVyO1xufVxuZnVuY3Rpb24gcmFuZ2VzT3ZlcmxhcChhMCwgYTEsIGIwLCBiMSkge1xuICByZXR1cm4gYTAgPCBiMSAmJiBiMCA8IGExO1xufVxuZnVuY3Rpb24gcmFuZ2VJbnRlcnNlY3Rpb24oYTAsIGExLCBiMCwgYjEpIHtcbiAgY29uc3QgbWluID0gTWF0aC5tYXgoYTAsIGIwKTtcbiAgY29uc3QgbWF4ID0gTWF0aC5taW4oYTEsIGIxKTtcbiAgaWYgKG1pbiA8PSBtYXgpIHtcbiAgICByZXR1cm4gW21pbiwgbWF4XTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNyb3NzKHgsIHksIHopIHtcbiAgcmV0dXJuICh5LnggLSB4LngpICogKHoueSAtIHgueSkgLSAoei54IC0geC54KSAqICh5LnkgLSB4LnkpO1xufVxuZnVuY3Rpb24gcG9pbnRJblBvbHlnb24oQSwgcG9pbnRzKSB7XG4gIGxldCB3aW5kaW5nTnVtYmVyID0gMDtcbiAgbGV0IGE7XG4gIGxldCBiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIGEgPSBwb2ludHNbaV07XG4gICAgaWYgKGEueCA9PT0gQS54ICYmIGEueSA9PT0gQS55KSByZXR1cm4gdHJ1ZTtcbiAgICBiID0gcG9pbnRzWyhpICsgMSkgJSBwb2ludHMubGVuZ3RoXTtcbiAgICBpZiAoVmVjLkRpc3QoQSwgYSkgKyBWZWMuRGlzdChBLCBiKSA9PT0gVmVjLkRpc3QoYSwgYikpIHJldHVybiB0cnVlO1xuICAgIGlmIChhLnkgPD0gQS55KSB7XG4gICAgICBpZiAoYi55ID4gQS55ICYmIGNyb3NzKGEsIGIsIEEpID4gMCkge1xuICAgICAgICB3aW5kaW5nTnVtYmVyICs9IDE7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChiLnkgPD0gQS55ICYmIGNyb3NzKGEsIGIsIEEpIDwgMCkge1xuICAgICAgd2luZGluZ051bWJlciAtPSAxO1xuICAgIH1cbiAgfVxuICByZXR1cm4gd2luZGluZ051bWJlciAhPT0gMDtcbn1cbmZ1bmN0aW9uIHRvRG9tUHJlY2lzaW9uKHYpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQodiAqIDFlNCkgLyAxZTQ7XG59XG5mdW5jdGlvbiB0b0ZpeGVkKHYpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQodiAqIDEwMCkgLyAxMDA7XG59XG5jb25zdCBpc1NhZmVGbG9hdCA9IChuKSA9PiB7XG4gIHJldHVybiBNYXRoLmFicyhuKSA8IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xufTtcbmZ1bmN0aW9uIGFuZ2xlRGlzdGFuY2UoZnJvbUFuZ2xlLCB0b0FuZ2xlLCBkaXJlY3Rpb24pIHtcbiAgY29uc3QgZGlzdCA9IGRpcmVjdGlvbiA8IDAgPyBjbG9ja3dpc2VBbmdsZURpc3QoZnJvbUFuZ2xlLCB0b0FuZ2xlKSA6IGNvdW50ZXJDbG9ja3dpc2VBbmdsZURpc3QoZnJvbUFuZ2xlLCB0b0FuZ2xlKTtcbiAgcmV0dXJuIGRpc3Q7XG59XG5mdW5jdGlvbiBnZXRQb2ludEluQXJjVChtQUIsIEEsIEIsIFApIHtcbiAgbGV0IG1BUDtcbiAgaWYgKE1hdGguYWJzKG1BQikgPiBQSSkge1xuICAgIG1BUCA9IHNob3J0QW5nbGVEaXN0KEEsIFApO1xuICAgIGNvbnN0IG1QQiA9IHNob3J0QW5nbGVEaXN0KFAsIEIpO1xuICAgIGlmIChNYXRoLmFicyhtQVApIDwgTWF0aC5hYnMobVBCKSkge1xuICAgICAgcmV0dXJuIG1BUCAvIG1BQjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChtQUIgLSBtUEIpIC8gbUFCO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBtQVAgPSBzaG9ydEFuZ2xlRGlzdChBLCBQKTtcbiAgICBjb25zdCB0ID0gbUFQIC8gbUFCO1xuICAgIGlmIChNYXRoLnNpZ24obUFQKSAhPT0gTWF0aC5zaWduKG1BQikpIHtcbiAgICAgIHJldHVybiBNYXRoLmFicyh0KSA+IDAuNSA/IDEgOiAwO1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0QXJjTWVhc3VyZShBLCBCLCBzd2VlcEZsYWcsIGxhcmdlQXJjRmxhZykge1xuICBjb25zdCBtID0gMiAqICgoQiAtIEEpICUgUEkyKSAlIFBJMiAtIChCIC0gQSkgJSBQSTI7XG4gIGlmICghbGFyZ2VBcmNGbGFnKSByZXR1cm4gbTtcbiAgcmV0dXJuIChQSTIgLSBNYXRoLmFicyhtKSkgKiAoc3dlZXBGbGFnID8gMSA6IC0xKTtcbn1cbmZ1bmN0aW9uIGNlbnRlck9mQ2lyY2xlRnJvbVRocmVlUG9pbnRzKGEsIGIsIGMpIHtcbiAgY29uc3QgdSA9IC0yICogKGEueCAqIChiLnkgLSBjLnkpIC0gYS55ICogKGIueCAtIGMueCkgKyBiLnggKiBjLnkgLSBjLnggKiBiLnkpO1xuICBjb25zdCB4ID0gKChhLnggKiBhLnggKyBhLnkgKiBhLnkpICogKGMueSAtIGIueSkgKyAoYi54ICogYi54ICsgYi55ICogYi55KSAqIChhLnkgLSBjLnkpICsgKGMueCAqIGMueCArIGMueSAqIGMueSkgKiAoYi55IC0gYS55KSkgLyB1O1xuICBjb25zdCB5ID0gKChhLnggKiBhLnggKyBhLnkgKiBhLnkpICogKGIueCAtIGMueCkgKyAoYi54ICogYi54ICsgYi55ICogYi55KSAqIChjLnggLSBhLngpICsgKGMueCAqIGMueCArIGMueSAqIGMueSkgKiAoYS54IC0gYi54KSkgLyB1O1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZSh4KSB8fCAhTnVtYmVyLmlzRmluaXRlKHkpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIG5ldyBWZWMoeCwgeSk7XG59XG5mdW5jdGlvbiBnZXRQb2ludHNPbkFyYyhzdGFydFBvaW50LCBlbmRQb2ludCwgY2VudGVyLCByYWRpdXMsIG51bVBvaW50cykge1xuICBpZiAoY2VudGVyID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFtWZWMuRnJvbShzdGFydFBvaW50KSwgVmVjLkZyb20oZW5kUG9pbnQpXTtcbiAgfVxuICBjb25zdCByZXN1bHRzID0gW107XG4gIGNvbnN0IHN0YXJ0QW5nbGUgPSBWZWMuQW5nbGUoY2VudGVyLCBzdGFydFBvaW50KTtcbiAgY29uc3QgZW5kQW5nbGUgPSBWZWMuQW5nbGUoY2VudGVyLCBlbmRQb2ludCk7XG4gIGNvbnN0IGwgPSBjbG9ja3dpc2VBbmdsZURpc3Qoc3RhcnRBbmdsZSwgZW5kQW5nbGUpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBvaW50czsgaSsrKSB7XG4gICAgY29uc3QgdCA9IGkgLyAobnVtUG9pbnRzIC0gMSk7XG4gICAgY29uc3QgYW5nbGUgPSBzdGFydEFuZ2xlICsgbCAqIHQ7XG4gICAgY29uc3QgcG9pbnQgPSBnZXRQb2ludE9uQ2lyY2xlKGNlbnRlciwgcmFkaXVzLCBhbmdsZSk7XG4gICAgcmVzdWx0cy5wdXNoKHBvaW50KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCB7XG4gIEhBTEZfUEksXG4gIFBJLFxuICBQSTIsXG4gIFNJTixcbiAgYW5nbGVEaXN0YW5jZSxcbiAgYXBwcm94aW1hdGVseSxcbiAgYXJlQW5nbGVzQ29tcGF0aWJsZSxcbiAgYXZlcmFnZSxcbiAgY2Fub25pY2FsaXplUm90YXRpb24sXG4gIGNlbnRlck9mQ2lyY2xlRnJvbVRocmVlUG9pbnRzLFxuICBjbGFtcCxcbiAgY2xhbXBSYWRpYW5zLFxuICBjbG9ja3dpc2VBbmdsZURpc3QsXG4gIGNvdW50ZXJDbG9ja3dpc2VBbmdsZURpc3QsXG4gIGRlZ3JlZXNUb1JhZGlhbnMsXG4gIGdldEFyY01lYXN1cmUsXG4gIGdldFBvaW50SW5BcmNULFxuICBnZXRQb2ludE9uQ2lyY2xlLFxuICBnZXRQb2ludHNPbkFyYyxcbiAgZ2V0UG9seWdvblZlcnRpY2VzLFxuICBpc1NhZmVGbG9hdCxcbiAgcGVyaW1ldGVyT2ZFbGxpcHNlLFxuICBwb2ludEluUG9seWdvbixcbiAgcHJlY2lzZSxcbiAgcmFkaWFuc1RvRGVncmVlcyxcbiAgcmFuZ2VJbnRlcnNlY3Rpb24sXG4gIHJhbmdlc092ZXJsYXAsXG4gIHNob3J0QW5nbGVEaXN0LFxuICBzbmFwQW5nbGUsXG4gIHRvRG9tUHJlY2lzaW9uLFxuICB0b0ZpeGVkLFxuICB0b1ByZWNpc2lvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReadonlySharedStyleMap: () => (/* binding */ ReadonlySharedStyleMap),\n/* harmony export */   SharedStyleMap: () => (/* binding */ SharedStyleMap)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction sharedStyleEquals(a, b) {\n  if (!b) return false;\n  switch (a.type) {\n    case \"mixed\":\n      return b.type === \"mixed\";\n    case \"shared\":\n      return b.type === \"shared\" && a.value === b.value;\n    default:\n      throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(a);\n  }\n}\nclass ReadonlySharedStyleMap {\n  /** @internal */\n  map;\n  constructor(entries) {\n    this.map = new Map(entries);\n  }\n  get(prop) {\n    return this.map.get(prop);\n  }\n  getAsKnownValue(prop) {\n    const value = this.get(prop);\n    if (!value) return void 0;\n    if (value.type === \"mixed\") return void 0;\n    return value.value;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get size() {\n    return this.map.size;\n  }\n  equals(other) {\n    if (this.size !== other.size) return false;\n    const checkedKeys = /* @__PURE__ */ new Set();\n    for (const [styleProp, value] of this) {\n      if (!sharedStyleEquals(value, other.get(styleProp))) return false;\n      checkedKeys.add(styleProp);\n    }\n    for (const [styleProp, value] of other) {\n      if (checkedKeys.has(styleProp)) continue;\n      if (!sharedStyleEquals(value, this.get(styleProp))) return false;\n    }\n    return true;\n  }\n  keys() {\n    return this.map.keys();\n  }\n  values() {\n    return this.map.values();\n  }\n  entries() {\n    return this.map.entries();\n  }\n  [Symbol.iterator]() {\n    return this.map[Symbol.iterator]();\n  }\n}\nclass SharedStyleMap extends ReadonlySharedStyleMap {\n  set(prop, value) {\n    this.map.set(prop, value);\n  }\n  applyValue(prop, value) {\n    const existingValue = this.get(prop);\n    if (!existingValue) {\n      this.set(prop, { type: \"shared\", value });\n      return;\n    }\n    switch (existingValue.type) {\n      case \"mixed\":\n        return;\n      case \"shared\":\n        if (existingValue.value !== value) {\n          this.set(prop, { type: \"mixed\" });\n        }\n        return;\n      default:\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(existingValue, \"type\");\n    }\n  }\n}\n\n//# sourceMappingURL=SharedStylesMap.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL1NoYXJlZFN0eWxlc01hcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9FQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGVBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvRUFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9TaGFyZWRTdHlsZXNNYXAubWpzPzEyMGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhoYXVzdGl2ZVN3aXRjaEVycm9yIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIHNoYXJlZFN0eWxlRXF1YWxzKGEsIGIpIHtcbiAgaWYgKCFiKSByZXR1cm4gZmFsc2U7XG4gIHN3aXRjaCAoYS50eXBlKSB7XG4gICAgY2FzZSBcIm1peGVkXCI6XG4gICAgICByZXR1cm4gYi50eXBlID09PSBcIm1peGVkXCI7XG4gICAgY2FzZSBcInNoYXJlZFwiOlxuICAgICAgcmV0dXJuIGIudHlwZSA9PT0gXCJzaGFyZWRcIiAmJiBhLnZhbHVlID09PSBiLnZhbHVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBleGhhdXN0aXZlU3dpdGNoRXJyb3IoYSk7XG4gIH1cbn1cbmNsYXNzIFJlYWRvbmx5U2hhcmVkU3R5bGVNYXAge1xuICAvKiogQGludGVybmFsICovXG4gIG1hcDtcbiAgY29uc3RydWN0b3IoZW50cmllcykge1xuICAgIHRoaXMubWFwID0gbmV3IE1hcChlbnRyaWVzKTtcbiAgfVxuICBnZXQocHJvcCkge1xuICAgIHJldHVybiB0aGlzLm1hcC5nZXQocHJvcCk7XG4gIH1cbiAgZ2V0QXNLbm93blZhbHVlKHByb3ApIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHByb3ApO1xuICAgIGlmICghdmFsdWUpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKHZhbHVlLnR5cGUgPT09IFwibWl4ZWRcIikgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gdmFsdWUudmFsdWU7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLm1hcC5zaXplO1xuICB9XG4gIGVxdWFscyhvdGhlcikge1xuICAgIGlmICh0aGlzLnNpemUgIT09IG90aGVyLnNpemUpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBjaGVja2VkS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBbc3R5bGVQcm9wLCB2YWx1ZV0gb2YgdGhpcykge1xuICAgICAgaWYgKCFzaGFyZWRTdHlsZUVxdWFscyh2YWx1ZSwgb3RoZXIuZ2V0KHN0eWxlUHJvcCkpKSByZXR1cm4gZmFsc2U7XG4gICAgICBjaGVja2VkS2V5cy5hZGQoc3R5bGVQcm9wKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbc3R5bGVQcm9wLCB2YWx1ZV0gb2Ygb3RoZXIpIHtcbiAgICAgIGlmIChjaGVja2VkS2V5cy5oYXMoc3R5bGVQcm9wKSkgY29udGludWU7XG4gICAgICBpZiAoIXNoYXJlZFN0eWxlRXF1YWxzKHZhbHVlLCB0aGlzLmdldChzdHlsZVByb3ApKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBrZXlzKCkge1xuICAgIHJldHVybiB0aGlzLm1hcC5rZXlzKCk7XG4gIH1cbiAgdmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLm1hcC52YWx1ZXMoKTtcbiAgfVxuICBlbnRyaWVzKCkge1xuICAgIHJldHVybiB0aGlzLm1hcC5lbnRyaWVzKCk7XG4gIH1cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgfVxufVxuY2xhc3MgU2hhcmVkU3R5bGVNYXAgZXh0ZW5kcyBSZWFkb25seVNoYXJlZFN0eWxlTWFwIHtcbiAgc2V0KHByb3AsIHZhbHVlKSB7XG4gICAgdGhpcy5tYXAuc2V0KHByb3AsIHZhbHVlKTtcbiAgfVxuICBhcHBseVZhbHVlKHByb3AsIHZhbHVlKSB7XG4gICAgY29uc3QgZXhpc3RpbmdWYWx1ZSA9IHRoaXMuZ2V0KHByb3ApO1xuICAgIGlmICghZXhpc3RpbmdWYWx1ZSkge1xuICAgICAgdGhpcy5zZXQocHJvcCwgeyB0eXBlOiBcInNoYXJlZFwiLCB2YWx1ZSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoIChleGlzdGluZ1ZhbHVlLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJtaXhlZFwiOlxuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwic2hhcmVkXCI6XG4gICAgICAgIGlmIChleGlzdGluZ1ZhbHVlLnZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgIHRoaXMuc2V0KHByb3AsIHsgdHlwZTogXCJtaXhlZFwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcihleGlzdGluZ1ZhbHVlLCBcInR5cGVcIik7XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBSZWFkb25seVNoYXJlZFN0eWxlTWFwLFxuICBTaGFyZWRTdHlsZU1hcFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNoYXJlZFN0eWxlc01hcC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dataUrlToFile: () => (/* binding */ dataUrlToFile),\n/* harmony export */   getDefaultCdnBaseUrl: () => (/* binding */ getDefaultCdnBaseUrl)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _version_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../version.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/version.mjs\");\n\n\nfunction dataUrlToFile(url, filename, mimeType) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.fetch)(url).then(function(res) {\n    return res.arrayBuffer();\n  }).then(function(buf) {\n    return new File([buf], filename, { type: mimeType });\n  });\n}\nconst CDN_BASE_URL = \"https://cdn.tldraw.com\";\nfunction getDefaultCdnBaseUrl() {\n  return `${CDN_BASE_URL}/${_version_mjs__WEBPACK_IMPORTED_MODULE_1__.version}`;\n}\n\n//# sourceMappingURL=assets.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2Fzc2V0cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQUNNO0FBQzVDO0FBQ0EsU0FBUyxvREFBSztBQUNkO0FBQ0EsR0FBRztBQUNILHVDQUF1QyxnQkFBZ0I7QUFDdkQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYSxHQUFHLGlEQUFPLENBQUM7QUFDcEM7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2Fzc2V0cy5tanM/MDRkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL3ZlcnNpb24ubWpzXCI7XG5mdW5jdGlvbiBkYXRhVXJsVG9GaWxlKHVybCwgZmlsZW5hbWUsIG1pbWVUeXBlKSB7XG4gIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5hcnJheUJ1ZmZlcigpO1xuICB9KS50aGVuKGZ1bmN0aW9uKGJ1Zikge1xuICAgIHJldHVybiBuZXcgRmlsZShbYnVmXSwgZmlsZW5hbWUsIHsgdHlwZTogbWltZVR5cGUgfSk7XG4gIH0pO1xufVxuY29uc3QgQ0ROX0JBU0VfVVJMID0gXCJodHRwczovL2Nkbi50bGRyYXcuY29tXCI7XG5mdW5jdGlvbiBnZXREZWZhdWx0Q2RuQmFzZVVybCgpIHtcbiAgcmV0dXJuIGAke0NETl9CQVNFX1VSTH0vJHt2ZXJzaW9ufWA7XG59XG5leHBvcnQge1xuICBkYXRhVXJsVG9GaWxlLFxuICBnZXREZWZhdWx0Q2RuQmFzZVVybFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debugFlags: () => (/* binding */ debugFlags),\n/* harmony export */   featureFlags: () => (/* binding */ featureFlags),\n/* harmony export */   pointerCaptureTrackingObject: () => (/* binding */ pointerCaptureTrackingObject)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst featureFlags = {};\nconst pointerCaptureTrackingObject = createDebugValue(\n  \"pointerCaptureTrackingObject\",\n  // ideally we wouldn't store this mutable value in an atom but it's not\n  // a big deal for debug values\n  {\n    defaults: { all: /* @__PURE__ */ new Map() },\n    shouldStoreForSession: false\n  }\n);\nconst debugFlags = {\n  // --- DEBUG VALUES ---\n  logPreventDefaults: createDebugValue(\"logPreventDefaults\", {\n    defaults: { all: false }\n  }),\n  logPointerCaptures: createDebugValue(\"logPointerCaptures\", {\n    defaults: { all: false }\n  }),\n  logElementRemoves: createDebugValue(\"logElementRemoves\", {\n    defaults: { all: false }\n  }),\n  debugSvg: createDebugValue(\"debugSvg\", {\n    defaults: { all: false }\n  }),\n  showFps: createDebugValue(\"showFps\", {\n    defaults: { all: false }\n  }),\n  measurePerformance: createDebugValue(\"measurePerformance\", { defaults: { all: false } }),\n  throwToBlob: createDebugValue(\"throwToBlob\", {\n    defaults: { all: false }\n  }),\n  reconnectOnPing: createDebugValue(\"reconnectOnPing\", {\n    defaults: { all: false }\n  }),\n  debugCursors: createDebugValue(\"debugCursors\", {\n    defaults: { all: false }\n  }),\n  forceSrgb: createDebugValue(\"forceSrgbColors\", { defaults: { all: false } }),\n  debugGeometry: createDebugValue(\"debugGeometry\", { defaults: { all: false } }),\n  hideShapes: createDebugValue(\"hideShapes\", { defaults: { all: false } }),\n  editOnType: createDebugValue(\"editOnType\", { defaults: { all: false } })\n};\nif (typeof Element !== \"undefined\") {\n  const nativeElementRemoveChild = Element.prototype.removeChild;\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"element removal logging\", () => {\n    if (debugFlags.logElementRemoves.get()) {\n      Element.prototype.removeChild = function(child) {\n        console.warn(\"[tldraw] removing child:\", child);\n        return nativeElementRemoveChild.call(this, child);\n      };\n    } else {\n      Element.prototype.removeChild = nativeElementRemoveChild;\n    }\n  });\n}\nfunction createDebugValue(name, {\n  defaults,\n  shouldStoreForSession = true\n}) {\n  return createDebugValueBase({\n    name,\n    defaults,\n    shouldStoreForSession\n  });\n}\nfunction createDebugValueBase(def) {\n  const defaultValue = getDefaultValue(def);\n  const storedValue = def.shouldStoreForSession ? getStoredInitialValue(def.name) : null;\n  const valueAtom = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(`debug:${def.name}`, storedValue ?? defaultValue);\n  if (typeof window !== \"undefined\") {\n    if (def.shouldStoreForSession) {\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(`debug:${def.name}`, () => {\n        const currentValue = valueAtom.get();\n        if (currentValue === defaultValue) {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.deleteFromSessionStorage)(`tldraw_debug:${def.name}`);\n        } else {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.setInSessionStorage)(`tldraw_debug:${def.name}`, JSON.stringify(currentValue));\n        }\n      });\n    }\n    Object.defineProperty(window, `tldraw${def.name.replace(/^[a-z]/, (l) => l.toUpperCase())}`, {\n      get() {\n        return valueAtom.get();\n      },\n      set(newValue) {\n        valueAtom.set(newValue);\n      },\n      configurable: true\n    });\n  }\n  return Object.assign(valueAtom, def);\n}\nfunction getStoredInitialValue(name) {\n  try {\n    return JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.getFromSessionStorage)(`tldraw_debug:${name}`) ?? \"null\");\n  } catch (err) {\n    return null;\n  }\n}\nfunction readEnv(fn) {\n  try {\n    return fn();\n  } catch {\n    return null;\n  }\n}\nfunction getDefaultValue(def) {\n  const env = readEnv(() => process.env.TLDRAW_ENV) ?? readEnv(() => process.env.VERCEL_PUBLIC_TLDRAW_ENV) ?? readEnv(() => process.env.NEXT_PUBLIC_TLDRAW_ENV) ?? // default to production because if we don't have one of these, this is probably a library use\n  \"production\";\n  switch (env) {\n    case \"production\":\n      return def.defaults.production ?? def.defaults.all;\n    case \"preview\":\n    case \"staging\":\n      return def.defaults.staging ?? def.defaults.all;\n    default:\n      return def.defaults.development ?? def.defaults.all;\n  }\n}\n\n//# sourceMappingURL=debug-flags.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RlYnVnLWZsYWdzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0QztBQUN5RDtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0NBQWdDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0g7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0g7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNILCtEQUErRCxZQUFZLGNBQWM7QUFDekY7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0gsbURBQW1ELFlBQVksY0FBYztBQUM3RSxxREFBcUQsWUFBWSxjQUFjO0FBQy9FLCtDQUErQyxZQUFZLGNBQWM7QUFDekUsK0NBQStDLFlBQVksY0FBYztBQUN6RTtBQUNBO0FBQ0E7QUFDQSxFQUFFLG9EQUFLO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFJLFVBQVUsU0FBUztBQUMzQztBQUNBO0FBQ0EsTUFBTSxvREFBSyxVQUFVLFNBQVM7QUFDOUI7QUFDQTtBQUNBLFVBQVUsdUVBQXdCLGlCQUFpQixTQUFTO0FBQzVELFVBQVU7QUFDVixVQUFVLGtFQUFtQixpQkFBaUIsU0FBUztBQUN2RDtBQUNBLE9BQU87QUFDUDtBQUNBLDJDQUEyQyxtREFBbUQ7QUFDOUY7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0VBQXFCLGlCQUFpQixLQUFLO0FBQ2pFLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RlYnVnLWZsYWdzLm1qcz80Nzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIHJlYWN0IH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSwgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLCBzZXRJblNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmNvbnN0IGZlYXR1cmVGbGFncyA9IHt9O1xuY29uc3QgcG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdCA9IGNyZWF0ZURlYnVnVmFsdWUoXG4gIFwicG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdFwiLFxuICAvLyBpZGVhbGx5IHdlIHdvdWxkbid0IHN0b3JlIHRoaXMgbXV0YWJsZSB2YWx1ZSBpbiBhbiBhdG9tIGJ1dCBpdCdzIG5vdFxuICAvLyBhIGJpZyBkZWFsIGZvciBkZWJ1ZyB2YWx1ZXNcbiAge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSB9LFxuICAgIHNob3VsZFN0b3JlRm9yU2Vzc2lvbjogZmFsc2VcbiAgfVxuKTtcbmNvbnN0IGRlYnVnRmxhZ3MgPSB7XG4gIC8vIC0tLSBERUJVRyBWQUxVRVMgLS0tXG4gIGxvZ1ByZXZlbnREZWZhdWx0czogY3JlYXRlRGVidWdWYWx1ZShcImxvZ1ByZXZlbnREZWZhdWx0c1wiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICBsb2dQb2ludGVyQ2FwdHVyZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJsb2dQb2ludGVyQ2FwdHVyZXNcIiwge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfVxuICB9KSxcbiAgbG9nRWxlbWVudFJlbW92ZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJsb2dFbGVtZW50UmVtb3Zlc1wiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICBkZWJ1Z1N2ZzogY3JlYXRlRGVidWdWYWx1ZShcImRlYnVnU3ZnXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIHNob3dGcHM6IGNyZWF0ZURlYnVnVmFsdWUoXCJzaG93RnBzXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIG1lYXN1cmVQZXJmb3JtYW5jZTogY3JlYXRlRGVidWdWYWx1ZShcIm1lYXN1cmVQZXJmb3JtYW5jZVwiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KSxcbiAgdGhyb3dUb0Jsb2I6IGNyZWF0ZURlYnVnVmFsdWUoXCJ0aHJvd1RvQmxvYlwiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICByZWNvbm5lY3RPblBpbmc6IGNyZWF0ZURlYnVnVmFsdWUoXCJyZWNvbm5lY3RPblBpbmdcIiwge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfVxuICB9KSxcbiAgZGVidWdDdXJzb3JzOiBjcmVhdGVEZWJ1Z1ZhbHVlKFwiZGVidWdDdXJzb3JzXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIGZvcmNlU3JnYjogY3JlYXRlRGVidWdWYWx1ZShcImZvcmNlU3JnYkNvbG9yc1wiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KSxcbiAgZGVidWdHZW9tZXRyeTogY3JlYXRlRGVidWdWYWx1ZShcImRlYnVnR2VvbWV0cnlcIiwgeyBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH0gfSksXG4gIGhpZGVTaGFwZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJoaWRlU2hhcGVzXCIsIHsgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9IH0pLFxuICBlZGl0T25UeXBlOiBjcmVhdGVEZWJ1Z1ZhbHVlKFwiZWRpdE9uVHlwZVwiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KVxufTtcbmlmICh0eXBlb2YgRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBjb25zdCBuYXRpdmVFbGVtZW50UmVtb3ZlQ2hpbGQgPSBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZDtcbiAgcmVhY3QoXCJlbGVtZW50IHJlbW92YWwgbG9nZ2luZ1wiLCAoKSA9PiB7XG4gICAgaWYgKGRlYnVnRmxhZ3MubG9nRWxlbWVudFJlbW92ZXMuZ2V0KCkpIHtcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiW3RsZHJhd10gcmVtb3ZpbmcgY2hpbGQ6XCIsIGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZUVsZW1lbnRSZW1vdmVDaGlsZC5jYWxsKHRoaXMsIGNoaWxkKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gbmF0aXZlRWxlbWVudFJlbW92ZUNoaWxkO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWJ1Z1ZhbHVlKG5hbWUsIHtcbiAgZGVmYXVsdHMsXG4gIHNob3VsZFN0b3JlRm9yU2Vzc2lvbiA9IHRydWVcbn0pIHtcbiAgcmV0dXJuIGNyZWF0ZURlYnVnVmFsdWVCYXNlKHtcbiAgICBuYW1lLFxuICAgIGRlZmF1bHRzLFxuICAgIHNob3VsZFN0b3JlRm9yU2Vzc2lvblxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURlYnVnVmFsdWVCYXNlKGRlZikge1xuICBjb25zdCBkZWZhdWx0VmFsdWUgPSBnZXREZWZhdWx0VmFsdWUoZGVmKTtcbiAgY29uc3Qgc3RvcmVkVmFsdWUgPSBkZWYuc2hvdWxkU3RvcmVGb3JTZXNzaW9uID8gZ2V0U3RvcmVkSW5pdGlhbFZhbHVlKGRlZi5uYW1lKSA6IG51bGw7XG4gIGNvbnN0IHZhbHVlQXRvbSA9IGF0b20oYGRlYnVnOiR7ZGVmLm5hbWV9YCwgc3RvcmVkVmFsdWUgPz8gZGVmYXVsdFZhbHVlKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBpZiAoZGVmLnNob3VsZFN0b3JlRm9yU2Vzc2lvbikge1xuICAgICAgcmVhY3QoYGRlYnVnOiR7ZGVmLm5hbWV9YCwgKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZUF0b20uZ2V0KCk7XG4gICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT09IGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZShgdGxkcmF3X2RlYnVnOiR7ZGVmLm5hbWV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0SW5TZXNzaW9uU3RvcmFnZShgdGxkcmF3X2RlYnVnOiR7ZGVmLm5hbWV9YCwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBgdGxkcmF3JHtkZWYubmFtZS5yZXBsYWNlKC9eW2Etel0vLCAobCkgPT4gbC50b1VwcGVyQ2FzZSgpKX1gLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUF0b20uZ2V0KCk7XG4gICAgICB9LFxuICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgIHZhbHVlQXRvbS5zZXQobmV3VmFsdWUpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHZhbHVlQXRvbSwgZGVmKTtcbn1cbmZ1bmN0aW9uIGdldFN0b3JlZEluaXRpYWxWYWx1ZShuYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZ2V0RnJvbVNlc3Npb25TdG9yYWdlKGB0bGRyYXdfZGVidWc6JHtuYW1lfWApID8/IFwibnVsbFwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlYWRFbnYoZm4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZShkZWYpIHtcbiAgY29uc3QgZW52ID0gcmVhZEVudigoKSA9PiBwcm9jZXNzLmVudi5UTERSQVdfRU5WKSA/PyByZWFkRW52KCgpID0+IHByb2Nlc3MuZW52LlZFUkNFTF9QVUJMSUNfVExEUkFXX0VOVikgPz8gcmVhZEVudigoKSA9PiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19UTERSQVdfRU5WKSA/PyAvLyBkZWZhdWx0IHRvIHByb2R1Y3Rpb24gYmVjYXVzZSBpZiB3ZSBkb24ndCBoYXZlIG9uZSBvZiB0aGVzZSwgdGhpcyBpcyBwcm9iYWJseSBhIGxpYnJhcnkgdXNlXG4gIFwicHJvZHVjdGlvblwiO1xuICBzd2l0Y2ggKGVudikge1xuICAgIGNhc2UgXCJwcm9kdWN0aW9uXCI6XG4gICAgICByZXR1cm4gZGVmLmRlZmF1bHRzLnByb2R1Y3Rpb24gPz8gZGVmLmRlZmF1bHRzLmFsbDtcbiAgICBjYXNlIFwicHJldmlld1wiOlxuICAgIGNhc2UgXCJzdGFnaW5nXCI6XG4gICAgICByZXR1cm4gZGVmLmRlZmF1bHRzLnN0YWdpbmcgPz8gZGVmLmRlZmF1bHRzLmFsbDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRlZi5kZWZhdWx0cy5kZXZlbG9wbWVudCA/PyBkZWYuZGVmYXVsdHMuYWxsO1xuICB9XG59XG5leHBvcnQge1xuICBkZWJ1Z0ZsYWdzLFxuICBmZWF0dXJlRmxhZ3MsXG4gIHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJ1Zy1mbGFncy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/deepLinks.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/deepLinks.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeepLinkString: () => (/* binding */ createDeepLinkString),\n/* harmony export */   parseDeepLinkString: () => (/* binding */ parseDeepLinkString)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n\n\n\nfunction createDeepLinkString(deepLink) {\n  switch (deepLink.type) {\n    case \"shapes\": {\n      const ids = deepLink.shapeIds.map((id) => encodeId(id.slice(\"shape:\".length)));\n      return `s${ids.join(\".\")}`;\n    }\n    case \"page\": {\n      return \"p\" + encodeId(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.PageRecordType.parseId(deepLink.pageId));\n    }\n    case \"viewport\": {\n      const { bounds, pageId } = deepLink;\n      let res = `v${Math.round(bounds.x)}.${Math.round(bounds.y)}.${Math.round(bounds.w)}.${Math.round(bounds.h)}`;\n      if (pageId) {\n        res += \".\" + encodeId(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.PageRecordType.parseId(pageId));\n      }\n      return res;\n    }\n    default:\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.exhaustiveSwitchError)(deepLink);\n  }\n}\nfunction parseDeepLinkString(deepLinkString) {\n  const type = deepLinkString[0];\n  switch (type) {\n    case \"s\": {\n      const shapeIds = deepLinkString.slice(1).split(\".\").filter(Boolean).map((id) => (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createShapeId)(decodeURIComponent(id)));\n      return { type: \"shapes\", shapeIds };\n    }\n    case \"p\": {\n      const pageId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.PageRecordType.createId(decodeURIComponent(deepLinkString.slice(1)));\n      return { type: \"page\", pageId };\n    }\n    case \"v\": {\n      const [x, y, w, h, pageId] = deepLinkString.slice(1).split(\".\");\n      return {\n        type: \"viewport\",\n        bounds: new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box(Number(x), Number(y), Number(w), Number(h)),\n        pageId: pageId ? _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.PageRecordType.createId(decodeURIComponent(pageId)) : void 0\n      };\n    }\n    default:\n      throw Error(\"Invalid deep link string\");\n  }\n}\nfunction encodeId(str) {\n  return encodeURIComponent(str).replace(/\\./g, \"%2E\");\n}\n\n//# sourceMappingURL=deepLinks.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RlZXBMaW5rcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUU7QUFDWDtBQUNWO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBLDRCQUE0Qiw0REFBYztBQUMxQztBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0Isb0JBQW9CLHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLHFCQUFxQjtBQUNqSDtBQUNBLDhCQUE4Qiw0REFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0VBQXFCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNGQUFzRiwrREFBYTtBQUNuRyxlQUFlO0FBQ2Y7QUFDQTtBQUNBLHFCQUFxQiw0REFBYztBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvREFBRztBQUN2Qix5QkFBeUIsNERBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9kZWVwTGlua3MubWpzP2ZlNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZVJlY29yZFR5cGUsIGNyZWF0ZVNoYXBlSWQgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHsgZXhoYXVzdGl2ZVN3aXRjaEVycm9yIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IEJveCB9IGZyb20gXCIuLi9wcmltaXRpdmVzL0JveC5tanNcIjtcbmZ1bmN0aW9uIGNyZWF0ZURlZXBMaW5rU3RyaW5nKGRlZXBMaW5rKSB7XG4gIHN3aXRjaCAoZGVlcExpbmsudHlwZSkge1xuICAgIGNhc2UgXCJzaGFwZXNcIjoge1xuICAgICAgY29uc3QgaWRzID0gZGVlcExpbmsuc2hhcGVJZHMubWFwKChpZCkgPT4gZW5jb2RlSWQoaWQuc2xpY2UoXCJzaGFwZTpcIi5sZW5ndGgpKSk7XG4gICAgICByZXR1cm4gYHMke2lkcy5qb2luKFwiLlwiKX1gO1xuICAgIH1cbiAgICBjYXNlIFwicGFnZVwiOiB7XG4gICAgICByZXR1cm4gXCJwXCIgKyBlbmNvZGVJZChQYWdlUmVjb3JkVHlwZS5wYXJzZUlkKGRlZXBMaW5rLnBhZ2VJZCkpO1xuICAgIH1cbiAgICBjYXNlIFwidmlld3BvcnRcIjoge1xuICAgICAgY29uc3QgeyBib3VuZHMsIHBhZ2VJZCB9ID0gZGVlcExpbms7XG4gICAgICBsZXQgcmVzID0gYHYke01hdGgucm91bmQoYm91bmRzLngpfS4ke01hdGgucm91bmQoYm91bmRzLnkpfS4ke01hdGgucm91bmQoYm91bmRzLncpfS4ke01hdGgucm91bmQoYm91bmRzLmgpfWA7XG4gICAgICBpZiAocGFnZUlkKSB7XG4gICAgICAgIHJlcyArPSBcIi5cIiArIGVuY29kZUlkKFBhZ2VSZWNvcmRUeXBlLnBhcnNlSWQocGFnZUlkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGRlZXBMaW5rKTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VEZWVwTGlua1N0cmluZyhkZWVwTGlua1N0cmluZykge1xuICBjb25zdCB0eXBlID0gZGVlcExpbmtTdHJpbmdbMF07XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJzXCI6IHtcbiAgICAgIGNvbnN0IHNoYXBlSWRzID0gZGVlcExpbmtTdHJpbmcuc2xpY2UoMSkuc3BsaXQoXCIuXCIpLmZpbHRlcihCb29sZWFuKS5tYXAoKGlkKSA9PiBjcmVhdGVTaGFwZUlkKGRlY29kZVVSSUNvbXBvbmVudChpZCkpKTtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwic2hhcGVzXCIsIHNoYXBlSWRzIH07XG4gICAgfVxuICAgIGNhc2UgXCJwXCI6IHtcbiAgICAgIGNvbnN0IHBhZ2VJZCA9IFBhZ2VSZWNvcmRUeXBlLmNyZWF0ZUlkKGRlY29kZVVSSUNvbXBvbmVudChkZWVwTGlua1N0cmluZy5zbGljZSgxKSkpO1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJwYWdlXCIsIHBhZ2VJZCB9O1xuICAgIH1cbiAgICBjYXNlIFwidlwiOiB7XG4gICAgICBjb25zdCBbeCwgeSwgdywgaCwgcGFnZUlkXSA9IGRlZXBMaW5rU3RyaW5nLnNsaWNlKDEpLnNwbGl0KFwiLlwiKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwidmlld3BvcnRcIixcbiAgICAgICAgYm91bmRzOiBuZXcgQm94KE51bWJlcih4KSwgTnVtYmVyKHkpLCBOdW1iZXIodyksIE51bWJlcihoKSksXG4gICAgICAgIHBhZ2VJZDogcGFnZUlkID8gUGFnZVJlY29yZFR5cGUuY3JlYXRlSWQoZGVjb2RlVVJJQ29tcG9uZW50KHBhZ2VJZCkpIDogdm9pZCAwXG4gICAgICB9O1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGRlZXAgbGluayBzdHJpbmdcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVuY29kZUlkKHN0cikge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvXFwuL2csIFwiJTJFXCIpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlRGVlcExpbmtTdHJpbmcsXG4gIHBhcnNlRGVlcExpbmtTdHJpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWVwTGlua3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/deepLinks.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loopToHtmlElement: () => (/* binding */ loopToHtmlElement),\n/* harmony export */   preventDefault: () => (/* binding */ preventDefault),\n/* harmony export */   releasePointerCapture: () => (/* binding */ releasePointerCapture),\n/* harmony export */   setPointerCapture: () => (/* binding */ setPointerCapture),\n/* harmony export */   setStyleProperty: () => (/* binding */ setStyleProperty),\n/* harmony export */   stopEventPropagation: () => (/* binding */ stopEventPropagation)\n/* harmony export */ });\n/* harmony import */ var _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n\nfunction loopToHtmlElement(elm) {\n  if (elm instanceof HTMLElement) return elm;\n  if (elm.parentElement) return loopToHtmlElement(elm.parentElement);\n  else throw Error(\"Could not find a parent element of an HTML type!\");\n}\nfunction preventDefault(event) {\n  event.preventDefault();\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPreventDefaults.get()) {\n    console.warn(\"preventDefault called on event:\", event);\n  }\n}\nfunction setPointerCapture(element, event) {\n  element.setPointerCapture(event.pointerId);\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPointerCaptures.get()) {\n    const trackingObj = _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.pointerCaptureTrackingObject.get();\n    trackingObj.set(element, (trackingObj.get(element) ?? 0) + 1);\n    console.warn(\"setPointerCapture called on element:\", element, event);\n  }\n}\nfunction releasePointerCapture(element, event) {\n  if (!element.hasPointerCapture(event.pointerId)) {\n    return;\n  }\n  element.releasePointerCapture(event.pointerId);\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPointerCaptures.get()) {\n    const trackingObj = _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.pointerCaptureTrackingObject.get();\n    if (trackingObj.get(element) === 1) {\n      trackingObj.delete(element);\n    } else if (trackingObj.has(element)) {\n      trackingObj.set(element, trackingObj.get(element) - 1);\n    } else {\n      console.warn(\"Release without capture\");\n    }\n    console.warn(\"releasePointerCapture called on element:\", element, event);\n  }\n}\nconst stopEventPropagation = (e) => e.stopPropagation();\nconst setStyleProperty = (elm, property, value) => {\n  if (!elm) return;\n  elm.style.setProperty(property, value);\n};\n\n//# sourceMappingURL=dom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0RBQVU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0RBQVU7QUFDaEIsd0JBQXdCLDBFQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdEQUFVO0FBQ2hCLHdCQUF3QiwwRUFBNEI7QUFDcEQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZG9tLm1qcz84MmQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlYnVnRmxhZ3MsIHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3QgfSBmcm9tIFwiLi9kZWJ1Zy1mbGFncy5tanNcIjtcbmZ1bmN0aW9uIGxvb3BUb0h0bWxFbGVtZW50KGVsbSkge1xuICBpZiAoZWxtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHJldHVybiBlbG07XG4gIGlmIChlbG0ucGFyZW50RWxlbWVudCkgcmV0dXJuIGxvb3BUb0h0bWxFbGVtZW50KGVsbS5wYXJlbnRFbGVtZW50KTtcbiAgZWxzZSB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGEgcGFyZW50IGVsZW1lbnQgb2YgYW4gSFRNTCB0eXBlIVwiKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmIChkZWJ1Z0ZsYWdzLmxvZ1ByZXZlbnREZWZhdWx0cy5nZXQoKSkge1xuICAgIGNvbnNvbGUud2FybihcInByZXZlbnREZWZhdWx0IGNhbGxlZCBvbiBldmVudDpcIiwgZXZlbnQpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRQb2ludGVyQ2FwdHVyZShlbGVtZW50LCBldmVudCkge1xuICBlbGVtZW50LnNldFBvaW50ZXJDYXB0dXJlKGV2ZW50LnBvaW50ZXJJZCk7XG4gIGlmIChkZWJ1Z0ZsYWdzLmxvZ1BvaW50ZXJDYXB0dXJlcy5nZXQoKSkge1xuICAgIGNvbnN0IHRyYWNraW5nT2JqID0gcG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdC5nZXQoKTtcbiAgICB0cmFja2luZ09iai5zZXQoZWxlbWVudCwgKHRyYWNraW5nT2JqLmdldChlbGVtZW50KSA/PyAwKSArIDEpO1xuICAgIGNvbnNvbGUud2FybihcInNldFBvaW50ZXJDYXB0dXJlIGNhbGxlZCBvbiBlbGVtZW50OlwiLCBlbGVtZW50LCBldmVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbGVhc2VQb2ludGVyQ2FwdHVyZShlbGVtZW50LCBldmVudCkge1xuICBpZiAoIWVsZW1lbnQuaGFzUG9pbnRlckNhcHR1cmUoZXZlbnQucG9pbnRlcklkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBlbGVtZW50LnJlbGVhc2VQb2ludGVyQ2FwdHVyZShldmVudC5wb2ludGVySWQpO1xuICBpZiAoZGVidWdGbGFncy5sb2dQb2ludGVyQ2FwdHVyZXMuZ2V0KCkpIHtcbiAgICBjb25zdCB0cmFja2luZ09iaiA9IHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3QuZ2V0KCk7XG4gICAgaWYgKHRyYWNraW5nT2JqLmdldChlbGVtZW50KSA9PT0gMSkge1xuICAgICAgdHJhY2tpbmdPYmouZGVsZXRlKGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAodHJhY2tpbmdPYmouaGFzKGVsZW1lbnQpKSB7XG4gICAgICB0cmFja2luZ09iai5zZXQoZWxlbWVudCwgdHJhY2tpbmdPYmouZ2V0KGVsZW1lbnQpIC0gMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlJlbGVhc2Ugd2l0aG91dCBjYXB0dXJlXCIpO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oXCJyZWxlYXNlUG9pbnRlckNhcHR1cmUgY2FsbGVkIG9uIGVsZW1lbnQ6XCIsIGVsZW1lbnQsIGV2ZW50KTtcbiAgfVxufVxuY29uc3Qgc3RvcEV2ZW50UHJvcGFnYXRpb24gPSAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKTtcbmNvbnN0IHNldFN0eWxlUHJvcGVydHkgPSAoZWxtLCBwcm9wZXJ0eSwgdmFsdWUpID0+IHtcbiAgaWYgKCFlbG0pIHJldHVybjtcbiAgZWxtLnN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSk7XG59O1xuZXhwb3J0IHtcbiAgbG9vcFRvSHRtbEVsZW1lbnQsXG4gIHByZXZlbnREZWZhdWx0LFxuICByZWxlYXNlUG9pbnRlckNhcHR1cmUsXG4gIHNldFBvaW50ZXJDYXB0dXJlLFxuICBzZXRTdHlsZVByb3BlcnR5LFxuICBzdG9wRXZlbnRQcm9wYWdhdGlvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIncrementedName: () => (/* binding */ getIncrementedName)\n/* harmony export */ });\nfunction getIncrementedName(name, others) {\n  let result = name;\n  const set = new Set(others);\n  while (set.has(result)) {\n    result = /^.*(\\d+)$/.exec(result)?.[1] ? result.replace(/(\\d+)(?=\\D?)$/, (m) => {\n      return (+m + 1).toString();\n    }) : `${result} 1`;\n  }\n  return result;\n}\n\n//# sourceMappingURL=getIncrementedName.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldEluY3JlbWVudGVkTmFtZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssT0FBTyxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZ2V0SW5jcmVtZW50ZWROYW1lLm1qcz9jNzE4Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEluY3JlbWVudGVkTmFtZShuYW1lLCBvdGhlcnMpIHtcbiAgbGV0IHJlc3VsdCA9IG5hbWU7XG4gIGNvbnN0IHNldCA9IG5ldyBTZXQob3RoZXJzKTtcbiAgd2hpbGUgKHNldC5oYXMocmVzdWx0KSkge1xuICAgIHJlc3VsdCA9IC9eLiooXFxkKykkLy5leGVjKHJlc3VsdCk/LlsxXSA/IHJlc3VsdC5yZXBsYWNlKC8oXFxkKykoPz1cXEQ/KSQvLCAobSkgPT4ge1xuICAgICAgcmV0dXJuICgrbSArIDEpLnRvU3RyaW5nKCk7XG4gICAgfSkgOiBgJHtyZXN1bHR9IDFgO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQge1xuICBnZXRJbmNyZW1lbnRlZE5hbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRJbmNyZW1lbnRlZE5hbWUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPointerInfo: () => (/* binding */ getPointerInfo)\n/* harmony export */ });\n/* harmony import */ var _keyboard_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keyboard.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\");\n\nfunction getPointerInfo(e) {\n  ;\n  e.isKilled = true;\n  return {\n    point: {\n      x: e.clientX,\n      y: e.clientY,\n      z: e.pressure\n    },\n    shiftKey: e.shiftKey,\n    altKey: e.altKey,\n    ctrlKey: e.metaKey || e.ctrlKey,\n    metaKey: e.metaKey,\n    accelKey: (0,_keyboard_mjs__WEBPACK_IMPORTED_MODULE_0__.isAccelKey)(e),\n    pointerId: e.pointerId,\n    button: e.button,\n    isPen: e.pointerType === \"pen\"\n  };\n}\n\n//# sourceMappingURL=getPointerInfo.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldFBvaW50ZXJJbmZvLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5REFBVTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9nZXRQb2ludGVySW5mby5tanM/NzY3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0FjY2VsS2V5IH0gZnJvbSBcIi4va2V5Ym9hcmQubWpzXCI7XG5mdW5jdGlvbiBnZXRQb2ludGVySW5mbyhlKSB7XG4gIDtcbiAgZS5pc0tpbGxlZCA9IHRydWU7XG4gIHJldHVybiB7XG4gICAgcG9pbnQ6IHtcbiAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgIHo6IGUucHJlc3N1cmVcbiAgICB9LFxuICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5LFxuICAgIGFsdEtleTogZS5hbHRLZXksXG4gICAgY3RybEtleTogZS5tZXRhS2V5IHx8IGUuY3RybEtleSxcbiAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gICAgYWNjZWxLZXk6IGlzQWNjZWxLZXkoZSksXG4gICAgcG9pbnRlcklkOiBlLnBvaW50ZXJJZCxcbiAgICBidXR0b246IGUuYnV0dG9uLFxuICAgIGlzUGVuOiBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiXG4gIH07XG59XG5leHBvcnQge1xuICBnZXRQb2ludGVySW5mb1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFBvaW50ZXJJbmZvLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSvgPathFromPoints: () => (/* binding */ getSvgPathFromPoints)\n/* harmony export */ });\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\nfunction getSvgPathFromPoints(points, closed = true) {\n  const len = points.length;\n  if (len < 2) {\n    return \"\";\n  }\n  let a = points[0];\n  let b = points[1];\n  if (len === 2) {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(a)}L${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(b)}`;\n  }\n  let result = \"\";\n  for (let i = 2, max = len - 1; i < max; i++) {\n    a = points[i];\n    b = points[i + 1];\n    result += (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(a, b);\n  }\n  if (closed) {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[0], points[1])}Q${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[1])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(\n      points[1],\n      points[2]\n    )}T${result}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[len - 1], points[0])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[0], points[1])}Z`;\n  } else {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[0])}Q${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[1])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[1], points[2])}${points.length > 3 ? \"T\" : \"\"}${result}L${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[len - 1])}`;\n  }\n}\n\n//# sourceMappingURL=getSvgPathFromPoints.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldFN2Z1BhdGhGcm9tUG9pbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBTyxJQUFJLEdBQUcsOERBQU8sSUFBSTtBQUN4QztBQUNBO0FBQ0EsaUNBQWlDLFNBQVM7QUFDMUM7QUFDQTtBQUNBLGNBQWMsOERBQU87QUFDckI7QUFDQTtBQUNBLGVBQWUsOERBQU8sdUJBQXVCLEdBQUcsOERBQU8sWUFBWSxFQUFFLDhEQUFPO0FBQzVFO0FBQ0E7QUFDQSxNQUFNLEdBQUcsT0FBTyxFQUFFLDhEQUFPLDZCQUE2QixFQUFFLDhEQUFPLHVCQUF1QjtBQUN0RixJQUFJO0FBQ0osZUFBZSw4REFBTyxZQUFZLEdBQUcsOERBQU8sWUFBWSxFQUFFLDhEQUFPLHVCQUF1QixFQUFFLDZCQUE2QixFQUFFLE9BQU8sR0FBRyw4REFBTyxrQkFBa0I7QUFDNUo7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZ2V0U3ZnUGF0aEZyb21Qb2ludHMubWpzPzNjMDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXZlcmFnZSwgcHJlY2lzZSB9IGZyb20gXCIuLi9wcmltaXRpdmVzL3V0aWxzLm1qc1wiO1xuZnVuY3Rpb24gZ2V0U3ZnUGF0aEZyb21Qb2ludHMocG9pbnRzLCBjbG9zZWQgPSB0cnVlKSB7XG4gIGNvbnN0IGxlbiA9IHBvaW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPCAyKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgbGV0IGEgPSBwb2ludHNbMF07XG4gIGxldCBiID0gcG9pbnRzWzFdO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgcmV0dXJuIGBNJHtwcmVjaXNlKGEpfUwke3ByZWNpc2UoYil9YDtcbiAgfVxuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDIsIG1heCA9IGxlbiAtIDE7IGkgPCBtYXg7IGkrKykge1xuICAgIGEgPSBwb2ludHNbaV07XG4gICAgYiA9IHBvaW50c1tpICsgMV07XG4gICAgcmVzdWx0ICs9IGF2ZXJhZ2UoYSwgYik7XG4gIH1cbiAgaWYgKGNsb3NlZCkge1xuICAgIHJldHVybiBgTSR7YXZlcmFnZShwb2ludHNbMF0sIHBvaW50c1sxXSl9USR7cHJlY2lzZShwb2ludHNbMV0pfSR7YXZlcmFnZShcbiAgICAgIHBvaW50c1sxXSxcbiAgICAgIHBvaW50c1syXVxuICAgICl9VCR7cmVzdWx0fSR7YXZlcmFnZShwb2ludHNbbGVuIC0gMV0sIHBvaW50c1swXSl9JHthdmVyYWdlKHBvaW50c1swXSwgcG9pbnRzWzFdKX1aYDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYE0ke3ByZWNpc2UocG9pbnRzWzBdKX1RJHtwcmVjaXNlKHBvaW50c1sxXSl9JHthdmVyYWdlKHBvaW50c1sxXSwgcG9pbnRzWzJdKX0ke3BvaW50cy5sZW5ndGggPiAzID8gXCJUXCIgOiBcIlwifSR7cmVzdWx0fUwke3ByZWNpc2UocG9pbnRzW2xlbiAtIDFdKX1gO1xuICB9XG59XG5leHBvcnQge1xuICBnZXRTdmdQYXRoRnJvbVBvaW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFN2Z1BhdGhGcm9tUG9pbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hardResetEditor: () => (/* binding */ hardResetEditor)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction hardResetEditor() {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.hardReset();\n}\n\n//# sourceMappingURL=hardResetEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2hhcmRSZXNldEVkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7QUFDQSxFQUFFLGlEQUFPO0FBQ1Q7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2hhcmRSZXNldEVkaXRvci5tanM/MGRiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBydW50aW1lIH0gZnJvbSBcIi4vcnVudGltZS5tanNcIjtcbmZ1bmN0aW9uIGhhcmRSZXNldEVkaXRvcigpIHtcbiAgcnVudGltZS5oYXJkUmVzZXQoKTtcbn1cbmV4cG9ydCB7XG4gIGhhcmRSZXNldEVkaXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcmRSZXNldEVkaXRvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAccelKey: () => (/* binding */ isAccelKey)\n/* harmony export */ });\n/* harmony import */ var _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/environment.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/globals/environment.mjs\");\n\nconst isAccelKey = (e) => {\n  return _globals_environment_mjs__WEBPACK_IMPORTED_MODULE_0__.tlenv.isDarwin ? e.metaKey : e.ctrlKey || e.metaKey;\n};\n\n//# sourceMappingURL=keyboard.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2tleWJvYXJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFtRDtBQUNuRDtBQUNBLFNBQVMsMkRBQUs7QUFDZDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMva2V5Ym9hcmQubWpzP2ViOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGxlbnYgfSBmcm9tIFwiLi4vZ2xvYmFscy9lbnZpcm9ubWVudC5tanNcIjtcbmNvbnN0IGlzQWNjZWxLZXkgPSAoZSkgPT4ge1xuICByZXR1cm4gdGxlbnYuaXNEYXJ3aW4gPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5O1xufTtcbmV4cG9ydCB7XG4gIGlzQWNjZWxLZXlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXlib2FyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/keyboard.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/licensing.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/licensing.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   importPublicKey: () => (/* binding */ importPublicKey),\n/* harmony export */   str2ab: () => (/* binding */ str2ab)\n/* harmony export */ });\nfunction str2ab(str) {\n  const buf = new ArrayBuffer(str.length);\n  const bufView = new Uint8Array(buf);\n  for (let i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\nfunction importPublicKey(pemContents) {\n  const binaryDerString = atob(pemContents);\n  const binaryDer = str2ab(binaryDerString);\n  return crypto.subtle.importKey(\n    \"spki\",\n    new Uint8Array(binaryDer),\n    {\n      name: \"ECDSA\",\n      namedCurve: \"P-256\"\n    },\n    true,\n    [\"verify\"]\n  );\n}\n\n//# sourceMappingURL=licensing.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2xpY2Vuc2luZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsWUFBWTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvbGljZW5zaW5nLm1qcz9iNTdiIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHN0cjJhYihzdHIpIHtcbiAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpO1xuICBjb25zdCBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgZm9yIChsZXQgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykge1xuICAgIGJ1ZlZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnVmO1xufVxuZnVuY3Rpb24gaW1wb3J0UHVibGljS2V5KHBlbUNvbnRlbnRzKSB7XG4gIGNvbnN0IGJpbmFyeURlclN0cmluZyA9IGF0b2IocGVtQ29udGVudHMpO1xuICBjb25zdCBiaW5hcnlEZXIgPSBzdHIyYWIoYmluYXJ5RGVyU3RyaW5nKTtcbiAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KFxuICAgIFwic3BraVwiLFxuICAgIG5ldyBVaW50OEFycmF5KGJpbmFyeURlciksXG4gICAge1xuICAgICAgbmFtZTogXCJFQ0RTQVwiLFxuICAgICAgbmFtZWRDdXJ2ZTogXCJQLTI1NlwiXG4gICAgfSxcbiAgICB0cnVlLFxuICAgIFtcInZlcmlmeVwiXVxuICApO1xufVxuZXhwb3J0IHtcbiAgaW1wb3J0UHVibGljS2V5LFxuICBzdHIyYWJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWNlbnNpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/licensing.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeWheel: () => (/* binding */ normalizeWheel)\n/* harmony export */ });\nconst MAX_ZOOM_STEP = 10;\nconst IS_DARWIN = /Mac|iPod|iPhone|iPad/.test(\n  // eslint-disable-next-line deprecation/deprecation\n  typeof window === \"undefined\" ? \"node\" : window.navigator.platform\n);\nfunction normalizeWheel(event) {\n  let { deltaY, deltaX } = event;\n  let deltaZ = 0;\n  if (event.ctrlKey || event.altKey || event.metaKey) {\n    deltaZ = (Math.abs(deltaY) > MAX_ZOOM_STEP ? MAX_ZOOM_STEP * Math.sign(deltaY) : deltaY) / 100;\n  } else {\n    if (event.shiftKey && !IS_DARWIN) {\n      deltaX = deltaY;\n      deltaY = 0;\n    }\n  }\n  return { x: -deltaX, y: -deltaY, z: -deltaZ };\n}\n\n//# sourceMappingURL=normalizeWheel.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL25vcm1hbGl6ZVdoZWVsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpQkFBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL25vcm1hbGl6ZVdoZWVsLm1qcz81MTQ4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1BWF9aT09NX1NURVAgPSAxMDtcbmNvbnN0IElTX0RBUldJTiA9IC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdChcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gIHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgPyBcIm5vZGVcIiA6IHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm1cbik7XG5mdW5jdGlvbiBub3JtYWxpemVXaGVlbChldmVudCkge1xuICBsZXQgeyBkZWx0YVksIGRlbHRhWCB9ID0gZXZlbnQ7XG4gIGxldCBkZWx0YVogPSAwO1xuICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuICAgIGRlbHRhWiA9IChNYXRoLmFicyhkZWx0YVkpID4gTUFYX1pPT01fU1RFUCA/IE1BWF9aT09NX1NURVAgKiBNYXRoLnNpZ24oZGVsdGFZKSA6IGRlbHRhWSkgLyAxMDA7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmICFJU19EQVJXSU4pIHtcbiAgICAgIGRlbHRhWCA9IGRlbHRhWTtcbiAgICAgIGRlbHRhWSA9IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IHg6IC1kZWx0YVgsIHk6IC1kZWx0YVksIHo6IC1kZWx0YVogfTtcbn1cbmV4cG9ydCB7XG4gIG5vcm1hbGl6ZVdoZWVsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9ybWFsaXplV2hlZWwubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   refreshPage: () => (/* binding */ refreshPage)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction refreshPage() {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.refreshPage();\n}\n\n//# sourceMappingURL=refreshPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3JlZnJlc2hQYWdlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLEVBQUUsaURBQU87QUFDVDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvcmVmcmVzaFBhZ2UubWpzP2FjYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVudGltZSB9IGZyb20gXCIuL3J1bnRpbWUubWpzXCI7XG5mdW5jdGlvbiByZWZyZXNoUGFnZSgpIHtcbiAgcnVudGltZS5yZWZyZXNoUGFnZSgpO1xufVxuZXhwb3J0IHtcbiAgcmVmcmVzaFBhZ2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWZyZXNoUGFnZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getReorderingShapesChanges: () => (/* binding */ getReorderingShapesChanges)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction getReorderingShapesChanges(editor, operation, ids) {\n  if (ids.length === 0) return [];\n  const parents = /* @__PURE__ */ new Map();\n  for (const shape of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(ids.map((id) => editor.getShape(id)))) {\n    const { parentId } = shape;\n    if (!parents.has(parentId)) {\n      parents.set(parentId, {\n        children: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(\n          editor.getSortedChildIdsForParent(parentId).map((id) => editor.getShape(id))\n        ),\n        moving: /* @__PURE__ */ new Set()\n      });\n    }\n    parents.get(parentId).moving.add(shape);\n  }\n  const changes = [];\n  switch (operation) {\n    case \"toBack\": {\n      parents.forEach(({ moving, children }) => reorderToBack(moving, children, changes));\n      break;\n    }\n    case \"toFront\": {\n      parents.forEach(({ moving, children }) => reorderToFront(moving, children, changes));\n      break;\n    }\n    case \"forward\": {\n      parents.forEach(({ moving, children }) => reorderForward(moving, children, changes));\n      break;\n    }\n    case \"backward\": {\n      parents.forEach(({ moving, children }) => reorderBackward(moving, children, changes));\n      break;\n    }\n  }\n  return changes;\n}\nfunction reorderToBack(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len) return;\n  let below;\n  let above;\n  for (let i = 0; i < len; i++) {\n    const shape = children[i];\n    if (moving.has(shape)) {\n      below = shape.index;\n      moving.delete(shape);\n    } else {\n      above = shape.index;\n      break;\n    }\n  }\n  if (moving.size === 0) {\n    return;\n  } else {\n    const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(below, above, moving.size);\n    changes.push(\n      ...Array.from(moving.values()).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex).map((shape, i) => ({ ...shape, index: indices[i] }))\n    );\n  }\n}\nfunction reorderToFront(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len) return;\n  let below;\n  let above;\n  for (let i = len - 1; i > -1; i--) {\n    const shape = children[i];\n    if (moving.has(shape)) {\n      above = shape.index;\n      moving.delete(shape);\n    } else {\n      below = shape.index;\n      break;\n    }\n  }\n  if (moving.size === 0) {\n    return;\n  } else {\n    const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(below, above, moving.size);\n    changes.push(\n      ...Array.from(moving.values()).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex).map((shape, i) => ({ ...shape, index: indices[i] }))\n    );\n  }\n}\nfunction reorderForward(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len) return;\n  let state = { name: \"skipping\" };\n  for (let i = 0; i < len; i++) {\n    const isMoving = moving.has(children[i]);\n    switch (state.name) {\n      case \"skipping\": {\n        if (!isMoving) continue;\n        state = { name: \"selecting\", selectIndex: i };\n        break;\n      }\n      case \"selecting\": {\n        if (isMoving) continue;\n        const { selectIndex } = state;\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(children[i].index, children[i + 1]?.index, i - selectIndex).forEach(\n          (index, k) => changes.push({ ...children[selectIndex + k], index })\n        );\n        state = { name: \"skipping\" };\n        break;\n      }\n    }\n  }\n}\nfunction reorderBackward(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len) return;\n  let state = { name: \"skipping\" };\n  for (let i = len - 1; i > -1; i--) {\n    const isMoving = moving.has(children[i]);\n    switch (state.name) {\n      case \"skipping\": {\n        if (!isMoving) continue;\n        state = { name: \"selecting\", selectIndex: i };\n        break;\n      }\n      case \"selecting\": {\n        if (isMoving) continue;\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(children[i - 1]?.index, children[i].index, state.selectIndex - i).forEach(\n          (index, k) => {\n            changes.push({ ...children[i + k + 1], index });\n          }\n        );\n        state = { name: \"skipping\" };\n        break;\n      }\n    }\n  }\n}\n\n//# sourceMappingURL=reorderShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3Jlb3JkZXJTaGFwZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBTztBQUM3QixZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixzREFBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0IsZ0VBQWlCO0FBQ3JDO0FBQ0EsMENBQTBDLHNEQUFXLHVCQUF1Qiw2QkFBNkI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0IsZ0VBQWlCO0FBQ3JDO0FBQ0EsMENBQTBDLHNEQUFXLHVCQUF1Qiw2QkFBNkI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUIsUUFBUSxnRUFBaUI7QUFDekIsdUNBQXVDLHFDQUFxQztBQUM1RTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBaUI7QUFDekI7QUFDQSwyQkFBMkIsK0JBQStCO0FBQzFEO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvcmVvcmRlclNoYXBlcy5tanM/NjUxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wYWN0LCBnZXRJbmRpY2VzQmV0d2Vlbiwgc29ydEJ5SW5kZXggfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuZnVuY3Rpb24gZ2V0UmVvcmRlcmluZ1NoYXBlc0NoYW5nZXMoZWRpdG9yLCBvcGVyYXRpb24sIGlkcykge1xuICBpZiAoaWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuICBjb25zdCBwYXJlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBzaGFwZSBvZiBjb21wYWN0KGlkcy5tYXAoKGlkKSA9PiBlZGl0b3IuZ2V0U2hhcGUoaWQpKSkpIHtcbiAgICBjb25zdCB7IHBhcmVudElkIH0gPSBzaGFwZTtcbiAgICBpZiAoIXBhcmVudHMuaGFzKHBhcmVudElkKSkge1xuICAgICAgcGFyZW50cy5zZXQocGFyZW50SWQsIHtcbiAgICAgICAgY2hpbGRyZW46IGNvbXBhY3QoXG4gICAgICAgICAgZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhcmVudElkKS5tYXAoKGlkKSA9PiBlZGl0b3IuZ2V0U2hhcGUoaWQpKVxuICAgICAgICApLFxuICAgICAgICBtb3Zpbmc6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwYXJlbnRzLmdldChwYXJlbnRJZCkubW92aW5nLmFkZChzaGFwZSk7XG4gIH1cbiAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICBzd2l0Y2ggKG9wZXJhdGlvbikge1xuICAgIGNhc2UgXCJ0b0JhY2tcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlclRvQmFjayhtb3ZpbmcsIGNoaWxkcmVuLCBjaGFuZ2VzKSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcInRvRnJvbnRcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlclRvRnJvbnQobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJmb3J3YXJkXCI6IHtcbiAgICAgIHBhcmVudHMuZm9yRWFjaCgoeyBtb3ZpbmcsIGNoaWxkcmVuIH0pID0+IHJlb3JkZXJGb3J3YXJkKG1vdmluZywgY2hpbGRyZW4sIGNoYW5nZXMpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiYmFja3dhcmRcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlckJhY2t3YXJkKG1vdmluZywgY2hpbGRyZW4sIGNoYW5nZXMpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hhbmdlcztcbn1cbmZ1bmN0aW9uIHJlb3JkZXJUb0JhY2sobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykge1xuICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gbGVuKSByZXR1cm47XG4gIGxldCBiZWxvdztcbiAgbGV0IGFib3ZlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3Qgc2hhcGUgPSBjaGlsZHJlbltpXTtcbiAgICBpZiAobW92aW5nLmhhcyhzaGFwZSkpIHtcbiAgICAgIGJlbG93ID0gc2hhcGUuaW5kZXg7XG4gICAgICBtb3ZpbmcuZGVsZXRlKHNoYXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWJvdmUgPSBzaGFwZS5pbmRleDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAobW92aW5nLnNpemUgPT09IDApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW5kaWNlcyA9IGdldEluZGljZXNCZXR3ZWVuKGJlbG93LCBhYm92ZSwgbW92aW5nLnNpemUpO1xuICAgIGNoYW5nZXMucHVzaChcbiAgICAgIC4uLkFycmF5LmZyb20obW92aW5nLnZhbHVlcygpKS5zb3J0KHNvcnRCeUluZGV4KS5tYXAoKHNoYXBlLCBpKSA9PiAoeyAuLi5zaGFwZSwgaW5kZXg6IGluZGljZXNbaV0gfSkpXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVvcmRlclRvRnJvbnQobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykge1xuICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gbGVuKSByZXR1cm47XG4gIGxldCBiZWxvdztcbiAgbGV0IGFib3ZlO1xuICBmb3IgKGxldCBpID0gbGVuIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICBjb25zdCBzaGFwZSA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChtb3ZpbmcuaGFzKHNoYXBlKSkge1xuICAgICAgYWJvdmUgPSBzaGFwZS5pbmRleDtcbiAgICAgIG1vdmluZy5kZWxldGUoc2hhcGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiZWxvdyA9IHNoYXBlLmluZGV4O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBpbmRpY2VzID0gZ2V0SW5kaWNlc0JldHdlZW4oYmVsb3csIGFib3ZlLCBtb3Zpbmcuc2l6ZSk7XG4gICAgY2hhbmdlcy5wdXNoKFxuICAgICAgLi4uQXJyYXkuZnJvbShtb3ZpbmcudmFsdWVzKCkpLnNvcnQoc29ydEJ5SW5kZXgpLm1hcCgoc2hhcGUsIGkpID0+ICh7IC4uLnNoYXBlLCBpbmRleDogaW5kaWNlc1tpXSB9KSlcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiByZW9yZGVyRm9yd2FyZChtb3ZpbmcsIGNoaWxkcmVuLCBjaGFuZ2VzKSB7XG4gIGNvbnN0IGxlbiA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgaWYgKG1vdmluZy5zaXplID09PSBsZW4pIHJldHVybjtcbiAgbGV0IHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGlzTW92aW5nID0gbW92aW5nLmhhcyhjaGlsZHJlbltpXSk7XG4gICAgc3dpdGNoIChzdGF0ZS5uYW1lKSB7XG4gICAgICBjYXNlIFwic2tpcHBpbmdcIjoge1xuICAgICAgICBpZiAoIWlzTW92aW5nKSBjb250aW51ZTtcbiAgICAgICAgc3RhdGUgPSB7IG5hbWU6IFwic2VsZWN0aW5nXCIsIHNlbGVjdEluZGV4OiBpIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInNlbGVjdGluZ1wiOiB7XG4gICAgICAgIGlmIChpc01vdmluZykgY29udGludWU7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0SW5kZXggfSA9IHN0YXRlO1xuICAgICAgICBnZXRJbmRpY2VzQmV0d2VlbihjaGlsZHJlbltpXS5pbmRleCwgY2hpbGRyZW5baSArIDFdPy5pbmRleCwgaSAtIHNlbGVjdEluZGV4KS5mb3JFYWNoKFxuICAgICAgICAgIChpbmRleCwgaykgPT4gY2hhbmdlcy5wdXNoKHsgLi4uY2hpbGRyZW5bc2VsZWN0SW5kZXggKyBrXSwgaW5kZXggfSlcbiAgICAgICAgKTtcbiAgICAgICAgc3RhdGUgPSB7IG5hbWU6IFwic2tpcHBpbmdcIiB9O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHJlb3JkZXJCYWNrd2FyZChtb3ZpbmcsIGNoaWxkcmVuLCBjaGFuZ2VzKSB7XG4gIGNvbnN0IGxlbiA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgaWYgKG1vdmluZy5zaXplID09PSBsZW4pIHJldHVybjtcbiAgbGV0IHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgZm9yIChsZXQgaSA9IGxlbiAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgY29uc3QgaXNNb3ZpbmcgPSBtb3ZpbmcuaGFzKGNoaWxkcmVuW2ldKTtcbiAgICBzd2l0Y2ggKHN0YXRlLm5hbWUpIHtcbiAgICAgIGNhc2UgXCJza2lwcGluZ1wiOiB7XG4gICAgICAgIGlmICghaXNNb3ZpbmcpIGNvbnRpbnVlO1xuICAgICAgICBzdGF0ZSA9IHsgbmFtZTogXCJzZWxlY3RpbmdcIiwgc2VsZWN0SW5kZXg6IGkgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwic2VsZWN0aW5nXCI6IHtcbiAgICAgICAgaWYgKGlzTW92aW5nKSBjb250aW51ZTtcbiAgICAgICAgZ2V0SW5kaWNlc0JldHdlZW4oY2hpbGRyZW5baSAtIDFdPy5pbmRleCwgY2hpbGRyZW5baV0uaW5kZXgsIHN0YXRlLnNlbGVjdEluZGV4IC0gaSkuZm9yRWFjaChcbiAgICAgICAgICAoaW5kZXgsIGspID0+IHtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IC4uLmNoaWxkcmVuW2kgKyBrICsgMV0sIGluZGV4IH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgc3RhdGUgPSB7IG5hbWU6IFwic2tpcHBpbmdcIiB9O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVvcmRlclNoYXBlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyRotationToSnapshotShapes: () => (/* binding */ applyRotationToSnapshotShapes),\n/* harmony export */   getRotationSnapshot: () => (/* binding */ getRotationSnapshot)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\n\n\n\nfunction getRotationSnapshot({\n  editor,\n  ids\n}) {\n  const shapes = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.compact)(ids.map((id) => editor.getShape(id)));\n  const rotation = editor.getShapesSharedRotation(ids);\n  const rotatedPageBounds = editor.getShapesRotatedPageBounds(ids);\n  if (!rotatedPageBounds) {\n    return null;\n  }\n  const pageCenter = rotatedPageBounds.center.clone().rotWith(rotatedPageBounds.point, rotation);\n  return {\n    pageCenter,\n    initialCursorAngle: pageCenter.angle(editor.inputs.originPagePoint),\n    initialShapesRotation: rotation,\n    shapeSnapshots: shapes.map((shape) => ({\n      shape,\n      initialPagePoint: editor.getShapePageTransform(shape.id).point()\n    }))\n  };\n}\nfunction applyRotationToSnapshotShapes({\n  delta,\n  editor,\n  snapshot,\n  stage,\n  centerOverride\n}) {\n  const { pageCenter, shapeSnapshots } = snapshot;\n  editor.updateShapes(\n    shapeSnapshots.map(({ shape, initialPagePoint }) => {\n      const parentTransform = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.isShapeId)(shape.parentId) ? editor.getShapePageTransform(shape.parentId) : _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.Identity();\n      const newPagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.RotWith(initialPagePoint, centerOverride ?? pageCenter, delta);\n      const newLocalPoint = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.applyToPoint(\n        // use the current parent transform in case it has moved/resized since the start\n        // (e.g. if rotating a shape at the edge of a group)\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.Inverse(parentTransform),\n        newPagePoint\n      );\n      const newRotation = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.canonicalizeRotation)(shape.rotation + delta);\n      return {\n        id: shape.id,\n        type: shape.type,\n        x: newLocalPoint.x,\n        y: newLocalPoint.y,\n        rotation: newRotation\n      };\n    })\n  );\n  const changes = [];\n  shapeSnapshots.forEach(({ shape }) => {\n    const current = editor.getShape(shape.id);\n    if (!current) return;\n    const util = editor.getShapeUtil(shape);\n    if (stage === \"start\" || stage === \"one-off\") {\n      const changeStart = util.onRotateStart?.(shape);\n      if (changeStart) changes.push(changeStart);\n    }\n    const changeUpdate = util.onRotate?.(shape, current);\n    if (changeUpdate) changes.push(changeUpdate);\n    if (stage === \"end\" || stage === \"one-off\") {\n      const changeEnd = util.onRotateEnd?.(shape, current);\n      if (changeEnd) changes.push(changeEnd);\n    }\n  });\n  if (changes.length > 0) {\n    editor.updateShapes(changes);\n  }\n}\n\n//# sourceMappingURL=rotation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3JvdGF0aW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZDO0FBQ0w7QUFDSTtBQUNtQjtBQUNuQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLHNEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsVUFBVSw2QkFBNkI7QUFDdkM7QUFDQSwwQkFBMEIseUJBQXlCO0FBQ25ELDhCQUE4QiwyREFBUyxrRUFBa0Usb0RBQUc7QUFDNUcsMkJBQTJCLG9EQUFHO0FBQzlCLDRCQUE0QixvREFBRztBQUMvQjtBQUNBO0FBQ0EsUUFBUSxvREFBRztBQUNYO0FBQ0E7QUFDQSwwQkFBMEIsMkVBQW9CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvcm90YXRpb24ubWpzPzYxMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNTaGFwZUlkIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IGNvbXBhY3QgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgY2Fub25pY2FsaXplUm90YXRpb24gfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmZ1bmN0aW9uIGdldFJvdGF0aW9uU25hcHNob3Qoe1xuICBlZGl0b3IsXG4gIGlkc1xufSkge1xuICBjb25zdCBzaGFwZXMgPSBjb21wYWN0KGlkcy5tYXAoKGlkKSA9PiBlZGl0b3IuZ2V0U2hhcGUoaWQpKSk7XG4gIGNvbnN0IHJvdGF0aW9uID0gZWRpdG9yLmdldFNoYXBlc1NoYXJlZFJvdGF0aW9uKGlkcyk7XG4gIGNvbnN0IHJvdGF0ZWRQYWdlQm91bmRzID0gZWRpdG9yLmdldFNoYXBlc1JvdGF0ZWRQYWdlQm91bmRzKGlkcyk7XG4gIGlmICghcm90YXRlZFBhZ2VCb3VuZHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBwYWdlQ2VudGVyID0gcm90YXRlZFBhZ2VCb3VuZHMuY2VudGVyLmNsb25lKCkucm90V2l0aChyb3RhdGVkUGFnZUJvdW5kcy5wb2ludCwgcm90YXRpb24pO1xuICByZXR1cm4ge1xuICAgIHBhZ2VDZW50ZXIsXG4gICAgaW5pdGlhbEN1cnNvckFuZ2xlOiBwYWdlQ2VudGVyLmFuZ2xlKGVkaXRvci5pbnB1dHMub3JpZ2luUGFnZVBvaW50KSxcbiAgICBpbml0aWFsU2hhcGVzUm90YXRpb246IHJvdGF0aW9uLFxuICAgIHNoYXBlU25hcHNob3RzOiBzaGFwZXMubWFwKChzaGFwZSkgPT4gKHtcbiAgICAgIHNoYXBlLFxuICAgICAgaW5pdGlhbFBhZ2VQb2ludDogZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShzaGFwZS5pZCkucG9pbnQoKVxuICAgIH0pKVxuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlSb3RhdGlvblRvU25hcHNob3RTaGFwZXMoe1xuICBkZWx0YSxcbiAgZWRpdG9yLFxuICBzbmFwc2hvdCxcbiAgc3RhZ2UsXG4gIGNlbnRlck92ZXJyaWRlXG59KSB7XG4gIGNvbnN0IHsgcGFnZUNlbnRlciwgc2hhcGVTbmFwc2hvdHMgfSA9IHNuYXBzaG90O1xuICBlZGl0b3IudXBkYXRlU2hhcGVzKFxuICAgIHNoYXBlU25hcHNob3RzLm1hcCgoeyBzaGFwZSwgaW5pdGlhbFBhZ2VQb2ludCB9KSA9PiB7XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSBpc1NoYXBlSWQoc2hhcGUucGFyZW50SWQpID8gZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShzaGFwZS5wYXJlbnRJZCkgOiBNYXQuSWRlbnRpdHkoKTtcbiAgICAgIGNvbnN0IG5ld1BhZ2VQb2ludCA9IFZlYy5Sb3RXaXRoKGluaXRpYWxQYWdlUG9pbnQsIGNlbnRlck92ZXJyaWRlID8/IHBhZ2VDZW50ZXIsIGRlbHRhKTtcbiAgICAgIGNvbnN0IG5ld0xvY2FsUG9pbnQgPSBNYXQuYXBwbHlUb1BvaW50KFxuICAgICAgICAvLyB1c2UgdGhlIGN1cnJlbnQgcGFyZW50IHRyYW5zZm9ybSBpbiBjYXNlIGl0IGhhcyBtb3ZlZC9yZXNpemVkIHNpbmNlIHRoZSBzdGFydFxuICAgICAgICAvLyAoZS5nLiBpZiByb3RhdGluZyBhIHNoYXBlIGF0IHRoZSBlZGdlIG9mIGEgZ3JvdXApXG4gICAgICAgIE1hdC5JbnZlcnNlKHBhcmVudFRyYW5zZm9ybSksXG4gICAgICAgIG5ld1BhZ2VQb2ludFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gY2Fub25pY2FsaXplUm90YXRpb24oc2hhcGUucm90YXRpb24gKyBkZWx0YSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogc2hhcGUuaWQsXG4gICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgIHg6IG5ld0xvY2FsUG9pbnQueCxcbiAgICAgICAgeTogbmV3TG9jYWxQb2ludC55LFxuICAgICAgICByb3RhdGlvbjogbmV3Um90YXRpb25cbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbiAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICBzaGFwZVNuYXBzaG90cy5mb3JFYWNoKCh7IHNoYXBlIH0pID0+IHtcbiAgICBjb25zdCBjdXJyZW50ID0gZWRpdG9yLmdldFNoYXBlKHNoYXBlLmlkKTtcbiAgICBpZiAoIWN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCB1dGlsID0gZWRpdG9yLmdldFNoYXBlVXRpbChzaGFwZSk7XG4gICAgaWYgKHN0YWdlID09PSBcInN0YXJ0XCIgfHwgc3RhZ2UgPT09IFwib25lLW9mZlwiKSB7XG4gICAgICBjb25zdCBjaGFuZ2VTdGFydCA9IHV0aWwub25Sb3RhdGVTdGFydD8uKHNoYXBlKTtcbiAgICAgIGlmIChjaGFuZ2VTdGFydCkgY2hhbmdlcy5wdXNoKGNoYW5nZVN0YXJ0KTtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlVXBkYXRlID0gdXRpbC5vblJvdGF0ZT8uKHNoYXBlLCBjdXJyZW50KTtcbiAgICBpZiAoY2hhbmdlVXBkYXRlKSBjaGFuZ2VzLnB1c2goY2hhbmdlVXBkYXRlKTtcbiAgICBpZiAoc3RhZ2UgPT09IFwiZW5kXCIgfHwgc3RhZ2UgPT09IFwib25lLW9mZlwiKSB7XG4gICAgICBjb25zdCBjaGFuZ2VFbmQgPSB1dGlsLm9uUm90YXRlRW5kPy4oc2hhcGUsIGN1cnJlbnQpO1xuICAgICAgaWYgKGNoYW5nZUVuZCkgY2hhbmdlcy5wdXNoKGNoYW5nZUVuZCk7XG4gICAgfVxuICB9KTtcbiAgaWYgKGNoYW5nZXMubGVuZ3RoID4gMCkge1xuICAgIGVkaXRvci51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIGFwcGx5Um90YXRpb25Ub1NuYXBzaG90U2hhcGVzLFxuICBnZXRSb3RhdGlvblNuYXBzaG90XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb24ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runtime: () => (/* binding */ runtime),\n/* harmony export */   setRuntimeOverrides: () => (/* binding */ setRuntimeOverrides)\n/* harmony export */ });\nconst runtime = {\n  openWindow(url, target) {\n    window.open(url, target, \"noopener noreferrer\");\n  },\n  refreshPage() {\n    window.location.reload();\n  },\n  async hardReset() {\n    return await window.__tldraw__hardReset?.();\n  }\n};\nfunction setRuntimeOverrides(input) {\n  Object.assign(runtime, input);\n}\n\n//# sourceMappingURL=runtime.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3J1bnRpbWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3J1bnRpbWUubWpzP2RkYTciXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcnVudGltZSA9IHtcbiAgb3BlbldpbmRvdyh1cmwsIHRhcmdldCkge1xuICAgIHdpbmRvdy5vcGVuKHVybCwgdGFyZ2V0LCBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIik7XG4gIH0sXG4gIHJlZnJlc2hQYWdlKCkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfSxcbiAgYXN5bmMgaGFyZFJlc2V0KCkge1xuICAgIHJldHVybiBhd2FpdCB3aW5kb3cuX190bGRyYXdfX2hhcmRSZXNldD8uKCk7XG4gIH1cbn07XG5mdW5jdGlvbiBzZXRSdW50aW1lT3ZlcnJpZGVzKGlucHV0KSB7XG4gIE9iamVjdC5hc3NpZ24ocnVudGltZSwgaW5wdXQpO1xufVxuZXhwb3J0IHtcbiAgcnVudGltZSxcbiAgc2V0UnVudGltZU92ZXJyaWRlc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bnRpbWUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/LocalIndexedDb.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/LocalIndexedDb.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalIndexedDb: () => (/* binding */ LocalIndexedDb),\n/* harmony export */   getAllIndexDbNames: () => (/* binding */ getAllIndexDbNames)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! idb */ \"(ssr)/./node_modules/idb/build/index.js\");\n\n\nconst STORE_PREFIX = \"TLDRAW_DOCUMENT_v2\";\nconst LEGACY_ASSET_STORE_PREFIX = \"TLDRAW_ASSET_STORE_v1\";\nconst dbNameIndexKey = \"TLDRAW_DB_NAME_INDEX_v2\";\nconst Table = {\n  Records: \"records\",\n  Schema: \"schema\",\n  SessionState: \"session_state\",\n  Assets: \"assets\"\n};\nasync function openLocalDb(persistenceKey) {\n  const storeId = STORE_PREFIX + persistenceKey;\n  addDbName(storeId);\n  return await (0,idb__WEBPACK_IMPORTED_MODULE_1__.openDB)(storeId, 4, {\n    upgrade(database) {\n      if (!database.objectStoreNames.contains(Table.Records)) {\n        database.createObjectStore(Table.Records);\n      }\n      if (!database.objectStoreNames.contains(Table.Schema)) {\n        database.createObjectStore(Table.Schema);\n      }\n      if (!database.objectStoreNames.contains(Table.SessionState)) {\n        database.createObjectStore(Table.SessionState);\n      }\n      if (!database.objectStoreNames.contains(Table.Assets)) {\n        database.createObjectStore(Table.Assets);\n      }\n    }\n  });\n}\nasync function migrateLegacyAssetDbIfNeeded(persistenceKey) {\n  const databases = window.indexedDB.databases ? (await window.indexedDB.databases()).map((db) => db.name) : getAllIndexDbNames();\n  const oldStoreId = LEGACY_ASSET_STORE_PREFIX + persistenceKey;\n  const existing = databases.find((dbName) => dbName === oldStoreId);\n  if (!existing) return;\n  const oldAssetDb = await (0,idb__WEBPACK_IMPORTED_MODULE_1__.openDB)(oldStoreId, 1, {\n    upgrade(database) {\n      if (!database.objectStoreNames.contains(\"assets\")) {\n        database.createObjectStore(\"assets\");\n      }\n    }\n  });\n  if (!oldAssetDb.objectStoreNames.contains(\"assets\")) return;\n  const oldTx = oldAssetDb.transaction([\"assets\"], \"readonly\");\n  const oldAssetStore = oldTx.objectStore(\"assets\");\n  const oldAssetsKeys = await oldAssetStore.getAllKeys();\n  const oldAssets = await Promise.all(\n    oldAssetsKeys.map(async (key) => [key, await oldAssetStore.get(key)])\n  );\n  await oldTx.done;\n  const newDb = await openLocalDb(persistenceKey);\n  const newTx = newDb.transaction([Table.Assets], \"readwrite\");\n  const newAssetTable = newTx.objectStore(Table.Assets);\n  for (const [key, value] of oldAssets) {\n    newAssetTable.put(value, key);\n  }\n  await newTx.done;\n  oldAssetDb.close();\n  newDb.close();\n  await (0,idb__WEBPACK_IMPORTED_MODULE_1__.deleteDB)(oldStoreId);\n}\nclass LocalIndexedDb {\n  getDbPromise;\n  isClosed = false;\n  pendingTransactionSet = /* @__PURE__ */ new Set();\n  /** @internal */\n  static connectedInstances = /* @__PURE__ */ new Set();\n  constructor(persistenceKey) {\n    LocalIndexedDb.connectedInstances.add(this);\n    this.getDbPromise = (async () => {\n      await migrateLegacyAssetDbIfNeeded(persistenceKey);\n      return await openLocalDb(persistenceKey);\n    })();\n  }\n  getDb() {\n    return this.getDbPromise;\n  }\n  /**\n   * Wait for any pending transactions to be completed. Useful for tests.\n   *\n   * @internal\n   */\n  pending() {\n    return Promise.allSettled([this.getDbPromise, ...this.pendingTransactionSet]).then(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.noop);\n  }\n  async close() {\n    if (this.isClosed) return;\n    this.isClosed = true;\n    await this.pending();\n    (await this.getDb()).close();\n    LocalIndexedDb.connectedInstances.delete(this);\n  }\n  tx(mode, names, cb) {\n    const txPromise = (async () => {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.isClosed, \"db is closed\");\n      const db = await this.getDb();\n      const tx = db.transaction(names, mode);\n      const done = tx.done.catch((e) => {\n        if (!this.isClosed) {\n          throw e;\n        }\n      });\n      try {\n        return await cb(tx);\n      } finally {\n        if (!this.isClosed) {\n          await done;\n        } else {\n          tx.abort();\n        }\n      }\n    })();\n    this.pendingTransactionSet.add(txPromise);\n    txPromise.finally(() => this.pendingTransactionSet.delete(txPromise));\n    return txPromise;\n  }\n  async load({ sessionId } = {}) {\n    return await this.tx(\n      \"readonly\",\n      [Table.Records, Table.Schema, Table.SessionState],\n      async (tx) => {\n        const recordsStore = tx.objectStore(Table.Records);\n        const schemaStore = tx.objectStore(Table.Schema);\n        const sessionStateStore = tx.objectStore(Table.SessionState);\n        let sessionStateSnapshot = sessionId ? (await sessionStateStore.get(sessionId))?.snapshot : null;\n        if (!sessionStateSnapshot) {\n          const all = await sessionStateStore.getAll();\n          sessionStateSnapshot = all.sort((a, b) => a.updatedAt - b.updatedAt).pop()?.snapshot;\n        }\n        const result = {\n          records: await recordsStore.getAll(),\n          schema: await schemaStore.get(Table.Schema),\n          sessionStateSnapshot\n        };\n        return result;\n      }\n    );\n  }\n  async storeChanges({\n    schema,\n    changes,\n    sessionId,\n    sessionStateSnapshot\n  }) {\n    await this.tx(\"readwrite\", [Table.Records, Table.Schema, Table.SessionState], async (tx) => {\n      const recordsStore = tx.objectStore(Table.Records);\n      const schemaStore = tx.objectStore(Table.Schema);\n      const sessionStateStore = tx.objectStore(Table.SessionState);\n      for (const [id, record] of Object.entries(changes.added)) {\n        await recordsStore.put(record, id);\n      }\n      for (const [_prev, updated] of Object.values(changes.updated)) {\n        await recordsStore.put(updated, updated.id);\n      }\n      for (const id of Object.keys(changes.removed)) {\n        await recordsStore.delete(id);\n      }\n      schemaStore.put(schema.serialize(), Table.Schema);\n      if (sessionStateSnapshot && sessionId) {\n        sessionStateStore.put(\n          {\n            snapshot: sessionStateSnapshot,\n            updatedAt: Date.now(),\n            id: sessionId\n          },\n          sessionId\n        );\n      } else if (sessionStateSnapshot || sessionId) {\n        console.error(\"sessionStateSnapshot and instanceId must be provided together\");\n      }\n    });\n  }\n  async storeSnapshot({\n    schema,\n    snapshot,\n    sessionId,\n    sessionStateSnapshot\n  }) {\n    await this.tx(\"readwrite\", [Table.Records, Table.Schema, Table.SessionState], async (tx) => {\n      const recordsStore = tx.objectStore(Table.Records);\n      const schemaStore = tx.objectStore(Table.Schema);\n      const sessionStateStore = tx.objectStore(Table.SessionState);\n      await recordsStore.clear();\n      for (const [id, record] of Object.entries(snapshot)) {\n        await recordsStore.put(record, id);\n      }\n      schemaStore.put(schema.serialize(), Table.Schema);\n      if (sessionStateSnapshot && sessionId) {\n        sessionStateStore.put(\n          {\n            snapshot: sessionStateSnapshot,\n            updatedAt: Date.now(),\n            id: sessionId\n          },\n          sessionId\n        );\n      } else if (sessionStateSnapshot || sessionId) {\n        console.error(\"sessionStateSnapshot and instanceId must be provided together\");\n      }\n    });\n  }\n  async pruneSessions() {\n    await this.tx(\"readwrite\", [Table.SessionState], async (tx) => {\n      const sessionStateStore = tx.objectStore(Table.SessionState);\n      const all = (await sessionStateStore.getAll()).sort((a, b) => a.updatedAt - b.updatedAt);\n      if (all.length < 10) {\n        await tx.done;\n        return;\n      }\n      const toDelete = all.slice(0, all.length - 10);\n      for (const { id } of toDelete) {\n        await sessionStateStore.delete(id);\n      }\n    });\n  }\n  async getAsset(assetId) {\n    return await this.tx(\"readonly\", [Table.Assets], async (tx) => {\n      const assetsStore = tx.objectStore(Table.Assets);\n      return await assetsStore.get(assetId);\n    });\n  }\n  async storeAsset(assetId, blob) {\n    await this.tx(\"readwrite\", [Table.Assets], async (tx) => {\n      const assetsStore = tx.objectStore(Table.Assets);\n      await assetsStore.put(blob, assetId);\n    });\n  }\n}\nfunction getAllIndexDbNames() {\n  const result = JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getFromLocalStorage)(dbNameIndexKey) || \"[]\") ?? [];\n  if (!Array.isArray(result)) {\n    return [];\n  }\n  return result;\n}\nfunction addDbName(name) {\n  const all = new Set(getAllIndexDbNames());\n  all.add(name);\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.setInLocalStorage)(dbNameIndexKey, JSON.stringify([...all]));\n}\n\n//# sourceMappingURL=LocalIndexedDb.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvTG9jYWxJbmRleGVkRGIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUY7QUFDOUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyQ0FBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwyQ0FBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZDQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RiwrQ0FBSTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsWUFBWSxJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsS0FBSztBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGdFQUFpQjtBQUNuQjtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvc3luYy9Mb2NhbEluZGV4ZWREYi5tanM/OWYzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnQsIGdldEZyb21Mb2NhbFN0b3JhZ2UsIG5vb3AsIHNldEluTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfSBmcm9tIFwiaWRiXCI7XG5jb25zdCBTVE9SRV9QUkVGSVggPSBcIlRMRFJBV19ET0NVTUVOVF92MlwiO1xuY29uc3QgTEVHQUNZX0FTU0VUX1NUT1JFX1BSRUZJWCA9IFwiVExEUkFXX0FTU0VUX1NUT1JFX3YxXCI7XG5jb25zdCBkYk5hbWVJbmRleEtleSA9IFwiVExEUkFXX0RCX05BTUVfSU5ERVhfdjJcIjtcbmNvbnN0IFRhYmxlID0ge1xuICBSZWNvcmRzOiBcInJlY29yZHNcIixcbiAgU2NoZW1hOiBcInNjaGVtYVwiLFxuICBTZXNzaW9uU3RhdGU6IFwic2Vzc2lvbl9zdGF0ZVwiLFxuICBBc3NldHM6IFwiYXNzZXRzXCJcbn07XG5hc3luYyBmdW5jdGlvbiBvcGVuTG9jYWxEYihwZXJzaXN0ZW5jZUtleSkge1xuICBjb25zdCBzdG9yZUlkID0gU1RPUkVfUFJFRklYICsgcGVyc2lzdGVuY2VLZXk7XG4gIGFkZERiTmFtZShzdG9yZUlkKTtcbiAgcmV0dXJuIGF3YWl0IG9wZW5EQihzdG9yZUlkLCA0LCB7XG4gICAgdXBncmFkZShkYXRhYmFzZSkge1xuICAgICAgaWYgKCFkYXRhYmFzZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFRhYmxlLlJlY29yZHMpKSB7XG4gICAgICAgIGRhdGFiYXNlLmNyZWF0ZU9iamVjdFN0b3JlKFRhYmxlLlJlY29yZHMpO1xuICAgICAgfVxuICAgICAgaWYgKCFkYXRhYmFzZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFRhYmxlLlNjaGVtYSkpIHtcbiAgICAgICAgZGF0YWJhc2UuY3JlYXRlT2JqZWN0U3RvcmUoVGFibGUuU2NoZW1hKTtcbiAgICAgIH1cbiAgICAgIGlmICghZGF0YWJhc2Uub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhUYWJsZS5TZXNzaW9uU3RhdGUpKSB7XG4gICAgICAgIGRhdGFiYXNlLmNyZWF0ZU9iamVjdFN0b3JlKFRhYmxlLlNlc3Npb25TdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWRhdGFiYXNlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoVGFibGUuQXNzZXRzKSkge1xuICAgICAgICBkYXRhYmFzZS5jcmVhdGVPYmplY3RTdG9yZShUYWJsZS5Bc3NldHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBtaWdyYXRlTGVnYWN5QXNzZXREYklmTmVlZGVkKHBlcnNpc3RlbmNlS2V5KSB7XG4gIGNvbnN0IGRhdGFiYXNlcyA9IHdpbmRvdy5pbmRleGVkREIuZGF0YWJhc2VzID8gKGF3YWl0IHdpbmRvdy5pbmRleGVkREIuZGF0YWJhc2VzKCkpLm1hcCgoZGIpID0+IGRiLm5hbWUpIDogZ2V0QWxsSW5kZXhEYk5hbWVzKCk7XG4gIGNvbnN0IG9sZFN0b3JlSWQgPSBMRUdBQ1lfQVNTRVRfU1RPUkVfUFJFRklYICsgcGVyc2lzdGVuY2VLZXk7XG4gIGNvbnN0IGV4aXN0aW5nID0gZGF0YWJhc2VzLmZpbmQoKGRiTmFtZSkgPT4gZGJOYW1lID09PSBvbGRTdG9yZUlkKTtcbiAgaWYgKCFleGlzdGluZykgcmV0dXJuO1xuICBjb25zdCBvbGRBc3NldERiID0gYXdhaXQgb3BlbkRCKG9sZFN0b3JlSWQsIDEsIHtcbiAgICB1cGdyYWRlKGRhdGFiYXNlKSB7XG4gICAgICBpZiAoIWRhdGFiYXNlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJhc3NldHNcIikpIHtcbiAgICAgICAgZGF0YWJhc2UuY3JlYXRlT2JqZWN0U3RvcmUoXCJhc3NldHNcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKCFvbGRBc3NldERiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJhc3NldHNcIikpIHJldHVybjtcbiAgY29uc3Qgb2xkVHggPSBvbGRBc3NldERiLnRyYW5zYWN0aW9uKFtcImFzc2V0c1wiXSwgXCJyZWFkb25seVwiKTtcbiAgY29uc3Qgb2xkQXNzZXRTdG9yZSA9IG9sZFR4Lm9iamVjdFN0b3JlKFwiYXNzZXRzXCIpO1xuICBjb25zdCBvbGRBc3NldHNLZXlzID0gYXdhaXQgb2xkQXNzZXRTdG9yZS5nZXRBbGxLZXlzKCk7XG4gIGNvbnN0IG9sZEFzc2V0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgIG9sZEFzc2V0c0tleXMubWFwKGFzeW5jIChrZXkpID0+IFtrZXksIGF3YWl0IG9sZEFzc2V0U3RvcmUuZ2V0KGtleSldKVxuICApO1xuICBhd2FpdCBvbGRUeC5kb25lO1xuICBjb25zdCBuZXdEYiA9IGF3YWl0IG9wZW5Mb2NhbERiKHBlcnNpc3RlbmNlS2V5KTtcbiAgY29uc3QgbmV3VHggPSBuZXdEYi50cmFuc2FjdGlvbihbVGFibGUuQXNzZXRzXSwgXCJyZWFkd3JpdGVcIik7XG4gIGNvbnN0IG5ld0Fzc2V0VGFibGUgPSBuZXdUeC5vYmplY3RTdG9yZShUYWJsZS5Bc3NldHMpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBvbGRBc3NldHMpIHtcbiAgICBuZXdBc3NldFRhYmxlLnB1dCh2YWx1ZSwga2V5KTtcbiAgfVxuICBhd2FpdCBuZXdUeC5kb25lO1xuICBvbGRBc3NldERiLmNsb3NlKCk7XG4gIG5ld0RiLmNsb3NlKCk7XG4gIGF3YWl0IGRlbGV0ZURCKG9sZFN0b3JlSWQpO1xufVxuY2xhc3MgTG9jYWxJbmRleGVkRGIge1xuICBnZXREYlByb21pc2U7XG4gIGlzQ2xvc2VkID0gZmFsc2U7XG4gIHBlbmRpbmdUcmFuc2FjdGlvblNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc3RhdGljIGNvbm5lY3RlZEluc3RhbmNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlS2V5KSB7XG4gICAgTG9jYWxJbmRleGVkRGIuY29ubmVjdGVkSW5zdGFuY2VzLmFkZCh0aGlzKTtcbiAgICB0aGlzLmdldERiUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBtaWdyYXRlTGVnYWN5QXNzZXREYklmTmVlZGVkKHBlcnNpc3RlbmNlS2V5KTtcbiAgICAgIHJldHVybiBhd2FpdCBvcGVuTG9jYWxEYihwZXJzaXN0ZW5jZUtleSk7XG4gICAgfSkoKTtcbiAgfVxuICBnZXREYigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXREYlByb21pc2U7XG4gIH1cbiAgLyoqXG4gICAqIFdhaXQgZm9yIGFueSBwZW5kaW5nIHRyYW5zYWN0aW9ucyB0byBiZSBjb21wbGV0ZWQuIFVzZWZ1bCBmb3IgdGVzdHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcGVuZGluZygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGxTZXR0bGVkKFt0aGlzLmdldERiUHJvbWlzZSwgLi4udGhpcy5wZW5kaW5nVHJhbnNhY3Rpb25TZXRdKS50aGVuKG5vb3ApO1xuICB9XG4gIGFzeW5jIGNsb3NlKCkge1xuICAgIGlmICh0aGlzLmlzQ2xvc2VkKSByZXR1cm47XG4gICAgdGhpcy5pc0Nsb3NlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5wZW5kaW5nKCk7XG4gICAgKGF3YWl0IHRoaXMuZ2V0RGIoKSkuY2xvc2UoKTtcbiAgICBMb2NhbEluZGV4ZWREYi5jb25uZWN0ZWRJbnN0YW5jZXMuZGVsZXRlKHRoaXMpO1xuICB9XG4gIHR4KG1vZGUsIG5hbWVzLCBjYikge1xuICAgIGNvbnN0IHR4UHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICBhc3NlcnQoIXRoaXMuaXNDbG9zZWQsIFwiZGIgaXMgY2xvc2VkXCIpO1xuICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmdldERiKCk7XG4gICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKG5hbWVzLCBtb2RlKTtcbiAgICAgIGNvbnN0IGRvbmUgPSB0eC5kb25lLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc0Nsb3NlZCkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNiKHR4KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Nsb3NlZCkge1xuICAgICAgICAgIGF3YWl0IGRvbmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHguYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pKCk7XG4gICAgdGhpcy5wZW5kaW5nVHJhbnNhY3Rpb25TZXQuYWRkKHR4UHJvbWlzZSk7XG4gICAgdHhQcm9taXNlLmZpbmFsbHkoKCkgPT4gdGhpcy5wZW5kaW5nVHJhbnNhY3Rpb25TZXQuZGVsZXRlKHR4UHJvbWlzZSkpO1xuICAgIHJldHVybiB0eFByb21pc2U7XG4gIH1cbiAgYXN5bmMgbG9hZCh7IHNlc3Npb25JZCB9ID0ge30pIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy50eChcbiAgICAgIFwicmVhZG9ubHlcIixcbiAgICAgIFtUYWJsZS5SZWNvcmRzLCBUYWJsZS5TY2hlbWEsIFRhYmxlLlNlc3Npb25TdGF0ZV0sXG4gICAgICBhc3luYyAodHgpID0+IHtcbiAgICAgICAgY29uc3QgcmVjb3Jkc1N0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuUmVjb3Jkcyk7XG4gICAgICAgIGNvbnN0IHNjaGVtYVN0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuU2NoZW1hKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXRlU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgICAgICBsZXQgc2Vzc2lvblN0YXRlU25hcHNob3QgPSBzZXNzaW9uSWQgPyAoYXdhaXQgc2Vzc2lvblN0YXRlU3RvcmUuZ2V0KHNlc3Npb25JZCkpPy5zbmFwc2hvdCA6IG51bGw7XG4gICAgICAgIGlmICghc2Vzc2lvblN0YXRlU25hcHNob3QpIHtcbiAgICAgICAgICBjb25zdCBhbGwgPSBhd2FpdCBzZXNzaW9uU3RhdGVTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdCA9IGFsbC5zb3J0KChhLCBiKSA9PiBhLnVwZGF0ZWRBdCAtIGIudXBkYXRlZEF0KS5wb3AoKT8uc25hcHNob3Q7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIHJlY29yZHM6IGF3YWl0IHJlY29yZHNTdG9yZS5nZXRBbGwoKSxcbiAgICAgICAgICBzY2hlbWE6IGF3YWl0IHNjaGVtYVN0b3JlLmdldChUYWJsZS5TY2hlbWEpLFxuICAgICAgICAgIHNlc3Npb25TdGF0ZVNuYXBzaG90XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuICBhc3luYyBzdG9yZUNoYW5nZXMoe1xuICAgIHNjaGVtYSxcbiAgICBjaGFuZ2VzLFxuICAgIHNlc3Npb25JZCxcbiAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdFxuICB9KSB7XG4gICAgYXdhaXQgdGhpcy50eChcInJlYWR3cml0ZVwiLCBbVGFibGUuUmVjb3JkcywgVGFibGUuU2NoZW1hLCBUYWJsZS5TZXNzaW9uU3RhdGVdLCBhc3luYyAodHgpID0+IHtcbiAgICAgIGNvbnN0IHJlY29yZHNTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFRhYmxlLlJlY29yZHMpO1xuICAgICAgY29uc3Qgc2NoZW1hU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TY2hlbWEpO1xuICAgICAgY29uc3Qgc2Vzc2lvblN0YXRlU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgICAgZm9yIChjb25zdCBbaWQsIHJlY29yZF0gb2YgT2JqZWN0LmVudHJpZXMoY2hhbmdlcy5hZGRlZCkpIHtcbiAgICAgICAgYXdhaXQgcmVjb3Jkc1N0b3JlLnB1dChyZWNvcmQsIGlkKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW19wcmV2LCB1cGRhdGVkXSBvZiBPYmplY3QudmFsdWVzKGNoYW5nZXMudXBkYXRlZCkpIHtcbiAgICAgICAgYXdhaXQgcmVjb3Jkc1N0b3JlLnB1dCh1cGRhdGVkLCB1cGRhdGVkLmlkKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICBhd2FpdCByZWNvcmRzU3RvcmUuZGVsZXRlKGlkKTtcbiAgICAgIH1cbiAgICAgIHNjaGVtYVN0b3JlLnB1dChzY2hlbWEuc2VyaWFsaXplKCksIFRhYmxlLlNjaGVtYSk7XG4gICAgICBpZiAoc2Vzc2lvblN0YXRlU25hcHNob3QgJiYgc2Vzc2lvbklkKSB7XG4gICAgICAgIHNlc3Npb25TdGF0ZVN0b3JlLnB1dChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzbmFwc2hvdDogc2Vzc2lvblN0YXRlU25hcHNob3QsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgICBpZDogc2Vzc2lvbklkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXNzaW9uSWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvblN0YXRlU25hcHNob3QgfHwgc2Vzc2lvbklkKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzZXNzaW9uU3RhdGVTbmFwc2hvdCBhbmQgaW5zdGFuY2VJZCBtdXN0IGJlIHByb3ZpZGVkIHRvZ2V0aGVyXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHN0b3JlU25hcHNob3Qoe1xuICAgIHNjaGVtYSxcbiAgICBzbmFwc2hvdCxcbiAgICBzZXNzaW9uSWQsXG4gICAgc2Vzc2lvblN0YXRlU25hcHNob3RcbiAgfSkge1xuICAgIGF3YWl0IHRoaXMudHgoXCJyZWFkd3JpdGVcIiwgW1RhYmxlLlJlY29yZHMsIFRhYmxlLlNjaGVtYSwgVGFibGUuU2Vzc2lvblN0YXRlXSwgYXN5bmMgKHR4KSA9PiB7XG4gICAgICBjb25zdCByZWNvcmRzU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5SZWNvcmRzKTtcbiAgICAgIGNvbnN0IHNjaGVtYVN0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuU2NoZW1hKTtcbiAgICAgIGNvbnN0IHNlc3Npb25TdGF0ZVN0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuU2Vzc2lvblN0YXRlKTtcbiAgICAgIGF3YWl0IHJlY29yZHNTdG9yZS5jbGVhcigpO1xuICAgICAgZm9yIChjb25zdCBbaWQsIHJlY29yZF0gb2YgT2JqZWN0LmVudHJpZXMoc25hcHNob3QpKSB7XG4gICAgICAgIGF3YWl0IHJlY29yZHNTdG9yZS5wdXQocmVjb3JkLCBpZCk7XG4gICAgICB9XG4gICAgICBzY2hlbWFTdG9yZS5wdXQoc2NoZW1hLnNlcmlhbGl6ZSgpLCBUYWJsZS5TY2hlbWEpO1xuICAgICAgaWYgKHNlc3Npb25TdGF0ZVNuYXBzaG90ICYmIHNlc3Npb25JZCkge1xuICAgICAgICBzZXNzaW9uU3RhdGVTdG9yZS5wdXQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgc25hcHNob3Q6IHNlc3Npb25TdGF0ZVNuYXBzaG90LFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgaWQ6IHNlc3Npb25JZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2Vzc2lvbklkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHNlc3Npb25TdGF0ZVNuYXBzaG90IHx8IHNlc3Npb25JZCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwic2Vzc2lvblN0YXRlU25hcHNob3QgYW5kIGluc3RhbmNlSWQgbXVzdCBiZSBwcm92aWRlZCB0b2dldGhlclwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBhc3luYyBwcnVuZVNlc3Npb25zKCkge1xuICAgIGF3YWl0IHRoaXMudHgoXCJyZWFkd3JpdGVcIiwgW1RhYmxlLlNlc3Npb25TdGF0ZV0sIGFzeW5jICh0eCkgPT4ge1xuICAgICAgY29uc3Qgc2Vzc2lvblN0YXRlU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgICAgY29uc3QgYWxsID0gKGF3YWl0IHNlc3Npb25TdGF0ZVN0b3JlLmdldEFsbCgpKS5zb3J0KChhLCBiKSA9PiBhLnVwZGF0ZWRBdCAtIGIudXBkYXRlZEF0KTtcbiAgICAgIGlmIChhbGwubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9EZWxldGUgPSBhbGwuc2xpY2UoMCwgYWxsLmxlbmd0aCAtIDEwKTtcbiAgICAgIGZvciAoY29uc3QgeyBpZCB9IG9mIHRvRGVsZXRlKSB7XG4gICAgICAgIGF3YWl0IHNlc3Npb25TdGF0ZVN0b3JlLmRlbGV0ZShpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZ2V0QXNzZXQoYXNzZXRJZCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnR4KFwicmVhZG9ubHlcIiwgW1RhYmxlLkFzc2V0c10sIGFzeW5jICh0eCkgPT4ge1xuICAgICAgY29uc3QgYXNzZXRzU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5Bc3NldHMpO1xuICAgICAgcmV0dXJuIGF3YWl0IGFzc2V0c1N0b3JlLmdldChhc3NldElkKTtcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzdG9yZUFzc2V0KGFzc2V0SWQsIGJsb2IpIHtcbiAgICBhd2FpdCB0aGlzLnR4KFwicmVhZHdyaXRlXCIsIFtUYWJsZS5Bc3NldHNdLCBhc3luYyAodHgpID0+IHtcbiAgICAgIGNvbnN0IGFzc2V0c1N0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuQXNzZXRzKTtcbiAgICAgIGF3YWl0IGFzc2V0c1N0b3JlLnB1dChibG9iLCBhc3NldElkKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0QWxsSW5kZXhEYk5hbWVzKCkge1xuICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKGdldEZyb21Mb2NhbFN0b3JhZ2UoZGJOYW1lSW5kZXhLZXkpIHx8IFwiW11cIikgPz8gW107XG4gIGlmICghQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBhZGREYk5hbWUobmFtZSkge1xuICBjb25zdCBhbGwgPSBuZXcgU2V0KGdldEFsbEluZGV4RGJOYW1lcygpKTtcbiAgYWxsLmFkZChuYW1lKTtcbiAgc2V0SW5Mb2NhbFN0b3JhZ2UoZGJOYW1lSW5kZXhLZXksIEpTT04uc3RyaW5naWZ5KFsuLi5hbGxdKSk7XG59XG5leHBvcnQge1xuICBMb2NhbEluZGV4ZWREYixcbiAgZ2V0QWxsSW5kZXhEYk5hbWVzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TG9jYWxJbmRleGVkRGIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/LocalIndexedDb.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BroadcastChannelMock: () => (/* binding */ BroadcastChannelMock),\n/* harmony export */   TLLocalSyncClient: () => (/* binding */ TLLocalSyncClient)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config/TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n/* harmony import */ var _LocalIndexedDb_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LocalIndexedDb.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/LocalIndexedDb.mjs\");\n/* harmony import */ var _alerts_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./alerts.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs\");\n\n\n\n\n\n\nconst PERSIST_THROTTLE_MS = 350;\nconst PERSIST_RETRY_THROTTLE_MS = 1e4;\nconst UPDATE_INSTANCE_STATE = Symbol(\"UPDATE_INSTANCE_STATE\");\nconst msg = (msg2) => msg2;\nclass BroadcastChannelMock {\n  onmessage;\n  constructor(_name) {\n  }\n  postMessage(_msg) {\n  }\n  close() {\n  }\n}\nconst BC = typeof BroadcastChannel === \"undefined\" ? BroadcastChannelMock : BroadcastChannel;\nclass TLLocalSyncClient {\n  constructor(store, {\n    persistenceKey,\n    sessionId = _config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.TAB_ID,\n    onLoad,\n    onLoadError\n  }, channel = new BC(`tldraw-tab-sync-${persistenceKey}`)) {\n    this.store = store;\n    this.channel = channel;\n    if (typeof window !== \"undefined\") {\n      ;\n      window.tlsync = this;\n    }\n    this.persistenceKey = persistenceKey;\n    this.sessionId = sessionId;\n    this.db = new _LocalIndexedDb_mjs__WEBPACK_IMPORTED_MODULE_4__.LocalIndexedDb(persistenceKey);\n    this.disposables.add(() => this.db.close());\n    this.serializedSchema = this.store.schema.serialize();\n    this.$sessionStateSnapshot = (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStateSnapshotSignal)(this.store);\n    this.disposables.add(\n      // Set up a subscription to changes from the store: When\n      // the store changes (and if the change was made by the user)\n      // then immediately send the diff to other tabs via postMessage\n      // and schedule a persist.\n      store.listen(\n        ({ changes }) => {\n          this.diffQueue.push(changes);\n          this.channel.postMessage(\n            msg({\n              type: \"diff\",\n              storeId: this.store.id,\n              changes,\n              schema: this.serializedSchema\n            })\n          );\n          this.schedulePersist();\n        },\n        { source: \"user\", scope: \"document\" }\n      )\n    );\n    this.disposables.add(\n      store.listen(\n        () => {\n          this.diffQueue.push(UPDATE_INSTANCE_STATE);\n          this.schedulePersist();\n        },\n        { scope: \"session\" }\n      )\n    );\n    this.connect(onLoad, onLoadError);\n    this.documentTypes = new Set(\n      Object.values(this.store.schema.types).filter((t) => t.scope === \"document\").map((t) => t.typeName)\n    );\n  }\n  disposables = /* @__PURE__ */ new Set();\n  diffQueue = [];\n  didDispose = false;\n  shouldDoFullDBWrite = true;\n  isReloading = false;\n  persistenceKey;\n  sessionId;\n  serializedSchema;\n  isDebugging = false;\n  documentTypes;\n  $sessionStateSnapshot;\n  /** @internal */\n  db;\n  initTime = Date.now();\n  debug(...args) {\n    if (this.isDebugging) {\n      console.debug(...args);\n    }\n  }\n  async connect(onLoad, onLoadError) {\n    this.debug(\"connecting\");\n    let data;\n    try {\n      data = await this.db.load({ sessionId: this.sessionId });\n    } catch (error) {\n      onLoadError(error);\n      (0,_alerts_mjs__WEBPACK_IMPORTED_MODULE_5__.showCantReadFromIndexDbAlert)();\n      return;\n    }\n    this.debug(\"loaded data from store\", data, \"didDispose\", this.didDispose);\n    if (this.didDispose) return;\n    try {\n      if (data) {\n        const documentSnapshot = Object.fromEntries(data.records.map((r) => [r.id, r]));\n        const sessionStateSnapshot = data.sessionStateSnapshot ?? (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.extractSessionStateFromLegacySnapshot)(documentSnapshot);\n        const migrationResult = this.store.schema.migrateStoreSnapshot({\n          store: documentSnapshot,\n          // eslint-disable-next-line deprecation/deprecation\n          schema: data.schema ?? this.store.schema.serializeEarliestVersion()\n        });\n        if (migrationResult.type === \"error\") {\n          console.error(\"failed to migrate store\", migrationResult);\n          onLoadError(new Error(`Failed to migrate store: ${migrationResult.reason}`));\n          return;\n        }\n        this.store.mergeRemoteChanges(() => {\n          this.store.put(\n            Object.values(migrationResult.value).filter((r) => this.documentTypes.has(r.typeName)),\n            \"initialize\"\n          );\n        });\n        if (sessionStateSnapshot) {\n          (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.loadSessionStateSnapshotIntoStore)(this.store, sessionStateSnapshot);\n        }\n      }\n      this.channel.onmessage = ({ data: data2 }) => {\n        this.debug(\"got message\", data2);\n        const msg2 = data2;\n        const res = this.store.schema.getMigrationsSince(msg2.schema);\n        if (!res.ok) {\n          const timeSinceInit = Date.now() - this.initTime;\n          if (timeSinceInit < 5e3) {\n            onLoadError(new Error(\"Schema mismatch, please close other tabs and reload the page\"));\n            return;\n          }\n          this.debug(\"reloading\");\n          this.isReloading = true;\n          window?.location?.reload?.();\n          return;\n        } else if (res.value.length > 0) {\n          this.debug(\"telling them to reload\");\n          this.channel.postMessage({ type: \"announce\", schema: this.serializedSchema });\n          this.shouldDoFullDBWrite = true;\n          this.persistIfNeeded();\n          return;\n        }\n        if (msg2.type === \"diff\") {\n          this.debug(\"applying diff\");\n          (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n            this.store.mergeRemoteChanges(() => {\n              this.store.applyDiff(msg2.changes);\n              this.store.ensureStoreIsUsable();\n            });\n          });\n        }\n      };\n      this.channel.postMessage({ type: \"announce\", schema: this.serializedSchema });\n      this.disposables.add(() => {\n        this.channel.close();\n      });\n      onLoad(this);\n    } catch (e) {\n      this.debug(\"error loading data from store\", e);\n      if (this.didDispose) return;\n      onLoadError(e);\n      return;\n    }\n  }\n  close() {\n    this.debug(\"closing\");\n    this.didDispose = true;\n    this.disposables.forEach((d) => d());\n  }\n  isPersisting = false;\n  didLastWriteError = false;\n  // eslint-disable-next-line no-restricted-globals\n  scheduledPersistTimeout = null;\n  /**\n   * Schedule a persist. Persists don't happen immediately: they are throttled to avoid writing too\n   * often, and will retry if failed.\n   *\n   * @internal\n   */\n  schedulePersist() {\n    this.debug(\"schedulePersist\", this.scheduledPersistTimeout);\n    if (this.scheduledPersistTimeout) return;\n    this.scheduledPersistTimeout = setTimeout(\n      () => {\n        this.scheduledPersistTimeout = null;\n        this.persistIfNeeded();\n      },\n      this.didLastWriteError ? PERSIST_RETRY_THROTTLE_MS : PERSIST_THROTTLE_MS\n    );\n  }\n  /**\n   * Persist to IndexedDB only under certain circumstances:\n   *\n   * - If we're not already persisting\n   * - If we're not reloading the page\n   * - And we have something to persist (a full db write scheduled or changes in the diff queue)\n   *\n   * @internal\n   */\n  persistIfNeeded() {\n    this.debug(\"persistIfNeeded\", {\n      isPersisting: this.isPersisting,\n      isReloading: this.isReloading,\n      shouldDoFullDBWrite: this.shouldDoFullDBWrite,\n      diffQueueLength: this.diffQueue.length,\n      storeIsPossiblyCorrupt: this.store.isPossiblyCorrupted()\n    });\n    if (this.scheduledPersistTimeout) {\n      clearTimeout(this.scheduledPersistTimeout);\n      this.scheduledPersistTimeout = null;\n    }\n    if (this.isPersisting) return;\n    if (this.isReloading) return;\n    if (this.store.isPossiblyCorrupted()) return;\n    if (this.shouldDoFullDBWrite || this.diffQueue.length > 0) {\n      this.doPersist();\n    }\n  }\n  /**\n   * Actually persist to IndexedDB. If the write fails, then we'll retry with a full db write after\n   * a short delay.\n   */\n  async doPersist() {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.assert)(!this.isPersisting, \"persist already in progress\");\n    if (this.didDispose) return;\n    this.isPersisting = true;\n    this.debug(\"doPersist start\");\n    const diffQueue = this.diffQueue;\n    this.diffQueue = [];\n    try {\n      if (this.shouldDoFullDBWrite) {\n        this.shouldDoFullDBWrite = false;\n        await this.db.storeSnapshot({\n          schema: this.store.schema,\n          snapshot: this.store.serialize(),\n          sessionId: this.sessionId,\n          sessionStateSnapshot: this.$sessionStateSnapshot.get()\n        });\n      } else {\n        const diffs = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffs)(\n          diffQueue.filter((d) => d !== UPDATE_INSTANCE_STATE)\n        );\n        await this.db.storeChanges({\n          changes: diffs,\n          schema: this.store.schema,\n          sessionId: this.sessionId,\n          sessionStateSnapshot: this.$sessionStateSnapshot.get()\n        });\n      }\n      this.didLastWriteError = false;\n    } catch (e) {\n      this.shouldDoFullDBWrite = true;\n      this.didLastWriteError = true;\n      console.error(\"failed to store changes in indexed db\", e);\n      (0,_alerts_mjs__WEBPACK_IMPORTED_MODULE_5__.showCantWriteToIndexDbAlert)();\n      if (typeof window !== \"undefined\") {\n        window.location.reload();\n      }\n    }\n    this.isPersisting = false;\n    this.debug(\"doPersist end\");\n    this.schedulePersist();\n  }\n}\n\n//# sourceMappingURL=TLLocalSyncClient.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvVExMb2NhbFN5bmNDbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ1M7QUFDWDtBQU1VO0FBQ0s7QUFDbUM7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzRUFBTTtBQUN0QjtBQUNBO0FBQ0EsR0FBRyxzQ0FBc0MsZUFBZTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFjO0FBQ2hDO0FBQ0E7QUFDQSxpQ0FBaUMsb0dBQWdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJCQUEyQjtBQUM3RCxNQUFNO0FBQ047QUFDQSxNQUFNLHlFQUE0QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSx5R0FBcUM7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDREQUE0RCx1QkFBdUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxVQUFVLHFHQUFpQztBQUMzQztBQUNBO0FBQ0Esa0NBQWtDLGFBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxxQ0FBcUMsaURBQWlEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdURBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0EsaUNBQWlDLGlEQUFpRDtBQUNsRjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUixzQkFBc0IsZ0VBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTSx3RUFBMkI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9zeW5jL1RMTG9jYWxTeW5jQ2xpZW50Lm1qcz82ZDkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRyYW5zYWN0IH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHNxdWFzaFJlY29yZERpZmZzIH0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQge1xuICBUQUJfSUQsXG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90LFxuICBsb2FkU2Vzc2lvblN0YXRlU25hcHNob3RJbnRvU3RvcmVcbn0gZnJvbSBcIi4uLy4uL2NvbmZpZy9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qc1wiO1xuaW1wb3J0IHsgTG9jYWxJbmRleGVkRGIgfSBmcm9tIFwiLi9Mb2NhbEluZGV4ZWREYi5tanNcIjtcbmltcG9ydCB7IHNob3dDYW50UmVhZEZyb21JbmRleERiQWxlcnQsIHNob3dDYW50V3JpdGVUb0luZGV4RGJBbGVydCB9IGZyb20gXCIuL2FsZXJ0cy5tanNcIjtcbmNvbnN0IFBFUlNJU1RfVEhST1RUTEVfTVMgPSAzNTA7XG5jb25zdCBQRVJTSVNUX1JFVFJZX1RIUk9UVExFX01TID0gMWU0O1xuY29uc3QgVVBEQVRFX0lOU1RBTkNFX1NUQVRFID0gU3ltYm9sKFwiVVBEQVRFX0lOU1RBTkNFX1NUQVRFXCIpO1xuY29uc3QgbXNnID0gKG1zZzIpID0+IG1zZzI7XG5jbGFzcyBCcm9hZGNhc3RDaGFubmVsTW9jayB7XG4gIG9ubWVzc2FnZTtcbiAgY29uc3RydWN0b3IoX25hbWUpIHtcbiAgfVxuICBwb3N0TWVzc2FnZShfbXNnKSB7XG4gIH1cbiAgY2xvc2UoKSB7XG4gIH1cbn1cbmNvbnN0IEJDID0gdHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgPT09IFwidW5kZWZpbmVkXCIgPyBCcm9hZGNhc3RDaGFubmVsTW9jayA6IEJyb2FkY2FzdENoYW5uZWw7XG5jbGFzcyBUTExvY2FsU3luY0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKHN0b3JlLCB7XG4gICAgcGVyc2lzdGVuY2VLZXksXG4gICAgc2Vzc2lvbklkID0gVEFCX0lELFxuICAgIG9uTG9hZCxcbiAgICBvbkxvYWRFcnJvclxuICB9LCBjaGFubmVsID0gbmV3IEJDKGB0bGRyYXctdGFiLXN5bmMtJHtwZXJzaXN0ZW5jZUtleX1gKSkge1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICA7XG4gICAgICB3aW5kb3cudGxzeW5jID0gdGhpcztcbiAgICB9XG4gICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xuICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgIHRoaXMuZGIgPSBuZXcgTG9jYWxJbmRleGVkRGIocGVyc2lzdGVuY2VLZXkpO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKCgpID0+IHRoaXMuZGIuY2xvc2UoKSk7XG4gICAgdGhpcy5zZXJpYWxpemVkU2NoZW1hID0gdGhpcy5zdG9yZS5zY2hlbWEuc2VyaWFsaXplKCk7XG4gICAgdGhpcy4kc2Vzc2lvblN0YXRlU25hcHNob3QgPSBjcmVhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdFNpZ25hbCh0aGlzLnN0b3JlKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcbiAgICAgIC8vIFNldCB1cCBhIHN1YnNjcmlwdGlvbiB0byBjaGFuZ2VzIGZyb20gdGhlIHN0b3JlOiBXaGVuXG4gICAgICAvLyB0aGUgc3RvcmUgY2hhbmdlcyAoYW5kIGlmIHRoZSBjaGFuZ2Ugd2FzIG1hZGUgYnkgdGhlIHVzZXIpXG4gICAgICAvLyB0aGVuIGltbWVkaWF0ZWx5IHNlbmQgdGhlIGRpZmYgdG8gb3RoZXIgdGFicyB2aWEgcG9zdE1lc3NhZ2VcbiAgICAgIC8vIGFuZCBzY2hlZHVsZSBhIHBlcnNpc3QuXG4gICAgICBzdG9yZS5saXN0ZW4oXG4gICAgICAgICh7IGNoYW5nZXMgfSkgPT4ge1xuICAgICAgICAgIHRoaXMuZGlmZlF1ZXVlLnB1c2goY2hhbmdlcyk7XG4gICAgICAgICAgdGhpcy5jaGFubmVsLnBvc3RNZXNzYWdlKFxuICAgICAgICAgICAgbXNnKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJkaWZmXCIsXG4gICAgICAgICAgICAgIHN0b3JlSWQ6IHRoaXMuc3RvcmUuaWQsXG4gICAgICAgICAgICAgIGNoYW5nZXMsXG4gICAgICAgICAgICAgIHNjaGVtYTogdGhpcy5zZXJpYWxpemVkU2NoZW1hXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZVBlcnNpc3QoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBzb3VyY2U6IFwidXNlclwiLCBzY29wZTogXCJkb2N1bWVudFwiIH1cbiAgICAgIClcbiAgICApO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgc3RvcmUubGlzdGVuKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaWZmUXVldWUucHVzaChVUERBVEVfSU5TVEFOQ0VfU1RBVEUpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVQZXJzaXN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgc2NvcGU6IFwic2Vzc2lvblwiIH1cbiAgICAgIClcbiAgICApO1xuICAgIHRoaXMuY29ubmVjdChvbkxvYWQsIG9uTG9hZEVycm9yKTtcbiAgICB0aGlzLmRvY3VtZW50VHlwZXMgPSBuZXcgU2V0KFxuICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnN0b3JlLnNjaGVtYS50eXBlcykuZmlsdGVyKCh0KSA9PiB0LnNjb3BlID09PSBcImRvY3VtZW50XCIpLm1hcCgodCkgPT4gdC50eXBlTmFtZSlcbiAgICApO1xuICB9XG4gIGRpc3Bvc2FibGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZGlmZlF1ZXVlID0gW107XG4gIGRpZERpc3Bvc2UgPSBmYWxzZTtcbiAgc2hvdWxkRG9GdWxsREJXcml0ZSA9IHRydWU7XG4gIGlzUmVsb2FkaW5nID0gZmFsc2U7XG4gIHBlcnNpc3RlbmNlS2V5O1xuICBzZXNzaW9uSWQ7XG4gIHNlcmlhbGl6ZWRTY2hlbWE7XG4gIGlzRGVidWdnaW5nID0gZmFsc2U7XG4gIGRvY3VtZW50VHlwZXM7XG4gICRzZXNzaW9uU3RhdGVTbmFwc2hvdDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBkYjtcbiAgaW5pdFRpbWUgPSBEYXRlLm5vdygpO1xuICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgaWYgKHRoaXMuaXNEZWJ1Z2dpbmcpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGNvbm5lY3Qob25Mb2FkLCBvbkxvYWRFcnJvcikge1xuICAgIHRoaXMuZGVidWcoXCJjb25uZWN0aW5nXCIpO1xuICAgIGxldCBkYXRhO1xuICAgIHRyeSB7XG4gICAgICBkYXRhID0gYXdhaXQgdGhpcy5kYi5sb2FkKHsgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgb25Mb2FkRXJyb3IoZXJyb3IpO1xuICAgICAgc2hvd0NhbnRSZWFkRnJvbUluZGV4RGJBbGVydCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRlYnVnKFwibG9hZGVkIGRhdGEgZnJvbSBzdG9yZVwiLCBkYXRhLCBcImRpZERpc3Bvc2VcIiwgdGhpcy5kaWREaXNwb3NlKTtcbiAgICBpZiAodGhpcy5kaWREaXNwb3NlKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50U25hcHNob3QgPSBPYmplY3QuZnJvbUVudHJpZXMoZGF0YS5yZWNvcmRzLm1hcCgocikgPT4gW3IuaWQsIHJdKSk7XG4gICAgICAgIGNvbnN0IHNlc3Npb25TdGF0ZVNuYXBzaG90ID0gZGF0YS5zZXNzaW9uU3RhdGVTbmFwc2hvdCA/PyBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90KGRvY3VtZW50U25hcHNob3QpO1xuICAgICAgICBjb25zdCBtaWdyYXRpb25SZXN1bHQgPSB0aGlzLnN0b3JlLnNjaGVtYS5taWdyYXRlU3RvcmVTbmFwc2hvdCh7XG4gICAgICAgICAgc3RvcmU6IGRvY3VtZW50U25hcHNob3QsXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgICAgc2NoZW1hOiBkYXRhLnNjaGVtYSA/PyB0aGlzLnN0b3JlLnNjaGVtYS5zZXJpYWxpemVFYXJsaWVzdFZlcnNpb24oKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1pZ3JhdGlvblJlc3VsdC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIG1pZ3JhdGUgc3RvcmVcIiwgbWlncmF0aW9uUmVzdWx0KTtcbiAgICAgICAgICBvbkxvYWRFcnJvcihuZXcgRXJyb3IoYEZhaWxlZCB0byBtaWdyYXRlIHN0b3JlOiAke21pZ3JhdGlvblJlc3VsdC5yZWFzb259YCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JlLm1lcmdlUmVtb3RlQ2hhbmdlcygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdG9yZS5wdXQoXG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKG1pZ3JhdGlvblJlc3VsdC52YWx1ZSkuZmlsdGVyKChyKSA9PiB0aGlzLmRvY3VtZW50VHlwZXMuaGFzKHIudHlwZU5hbWUpKSxcbiAgICAgICAgICAgIFwiaW5pdGlhbGl6ZVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZXNzaW9uU3RhdGVTbmFwc2hvdCkge1xuICAgICAgICAgIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZSh0aGlzLnN0b3JlLCBzZXNzaW9uU3RhdGVTbmFwc2hvdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuY2hhbm5lbC5vbm1lc3NhZ2UgPSAoeyBkYXRhOiBkYXRhMiB9KSA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcoXCJnb3QgbWVzc2FnZVwiLCBkYXRhMik7XG4gICAgICAgIGNvbnN0IG1zZzIgPSBkYXRhMjtcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy5zdG9yZS5zY2hlbWEuZ2V0TWlncmF0aW9uc1NpbmNlKG1zZzIuc2NoZW1hKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICBjb25zdCB0aW1lU2luY2VJbml0ID0gRGF0ZS5ub3coKSAtIHRoaXMuaW5pdFRpbWU7XG4gICAgICAgICAgaWYgKHRpbWVTaW5jZUluaXQgPCA1ZTMpIHtcbiAgICAgICAgICAgIG9uTG9hZEVycm9yKG5ldyBFcnJvcihcIlNjaGVtYSBtaXNtYXRjaCwgcGxlYXNlIGNsb3NlIG90aGVyIHRhYnMgYW5kIHJlbG9hZCB0aGUgcGFnZVwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZGVidWcoXCJyZWxvYWRpbmdcIik7XG4gICAgICAgICAgdGhpcy5pc1JlbG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgd2luZG93Py5sb2NhdGlvbj8ucmVsb2FkPy4oKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAocmVzLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKFwidGVsbGluZyB0aGVtIHRvIHJlbG9hZFwiKTtcbiAgICAgICAgICB0aGlzLmNoYW5uZWwucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImFubm91bmNlXCIsIHNjaGVtYTogdGhpcy5zZXJpYWxpemVkU2NoZW1hIH0pO1xuICAgICAgICAgIHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5wZXJzaXN0SWZOZWVkZWQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZzIudHlwZSA9PT0gXCJkaWZmXCIpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKFwiYXBwbHlpbmcgZGlmZlwiKTtcbiAgICAgICAgICB0cmFuc2FjdCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0b3JlLm1lcmdlUmVtb3RlQ2hhbmdlcygoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUuYXBwbHlEaWZmKG1zZzIuY2hhbmdlcyk7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aGlzLmNoYW5uZWwucG9zdE1lc3NhZ2UoeyB0eXBlOiBcImFubm91bmNlXCIsIHNjaGVtYTogdGhpcy5zZXJpYWxpemVkU2NoZW1hIH0pO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoKCkgPT4ge1xuICAgICAgICB0aGlzLmNoYW5uZWwuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgICAgb25Mb2FkKHRoaXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuZGVidWcoXCJlcnJvciBsb2FkaW5nIGRhdGEgZnJvbSBzdG9yZVwiLCBlKTtcbiAgICAgIGlmICh0aGlzLmRpZERpc3Bvc2UpIHJldHVybjtcbiAgICAgIG9uTG9hZEVycm9yKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLmRlYnVnKFwiY2xvc2luZ1wiKTtcbiAgICB0aGlzLmRpZERpc3Bvc2UgPSB0cnVlO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuZm9yRWFjaCgoZCkgPT4gZCgpKTtcbiAgfVxuICBpc1BlcnNpc3RpbmcgPSBmYWxzZTtcbiAgZGlkTGFzdFdyaXRlRXJyb3IgPSBmYWxzZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICBzY2hlZHVsZWRQZXJzaXN0VGltZW91dCA9IG51bGw7XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIHBlcnNpc3QuIFBlcnNpc3RzIGRvbid0IGhhcHBlbiBpbW1lZGlhdGVseTogdGhleSBhcmUgdGhyb3R0bGVkIHRvIGF2b2lkIHdyaXRpbmcgdG9vXG4gICAqIG9mdGVuLCBhbmQgd2lsbCByZXRyeSBpZiBmYWlsZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2NoZWR1bGVQZXJzaXN0KCkge1xuICAgIHRoaXMuZGVidWcoXCJzY2hlZHVsZVBlcnNpc3RcIiwgdGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCk7XG4gICAgaWYgKHRoaXMuc2NoZWR1bGVkUGVyc2lzdFRpbWVvdXQpIHJldHVybjtcbiAgICB0aGlzLnNjaGVkdWxlZFBlcnNpc3RUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdElmTmVlZGVkKCk7XG4gICAgICB9LFxuICAgICAgdGhpcy5kaWRMYXN0V3JpdGVFcnJvciA/IFBFUlNJU1RfUkVUUllfVEhST1RUTEVfTVMgOiBQRVJTSVNUX1RIUk9UVExFX01TXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogUGVyc2lzdCB0byBJbmRleGVkREIgb25seSB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXM6XG4gICAqXG4gICAqIC0gSWYgd2UncmUgbm90IGFscmVhZHkgcGVyc2lzdGluZ1xuICAgKiAtIElmIHdlJ3JlIG5vdCByZWxvYWRpbmcgdGhlIHBhZ2VcbiAgICogLSBBbmQgd2UgaGF2ZSBzb21ldGhpbmcgdG8gcGVyc2lzdCAoYSBmdWxsIGRiIHdyaXRlIHNjaGVkdWxlZCBvciBjaGFuZ2VzIGluIHRoZSBkaWZmIHF1ZXVlKVxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHBlcnNpc3RJZk5lZWRlZCgpIHtcbiAgICB0aGlzLmRlYnVnKFwicGVyc2lzdElmTmVlZGVkXCIsIHtcbiAgICAgIGlzUGVyc2lzdGluZzogdGhpcy5pc1BlcnNpc3RpbmcsXG4gICAgICBpc1JlbG9hZGluZzogdGhpcy5pc1JlbG9hZGluZyxcbiAgICAgIHNob3VsZERvRnVsbERCV3JpdGU6IHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSxcbiAgICAgIGRpZmZRdWV1ZUxlbmd0aDogdGhpcy5kaWZmUXVldWUubGVuZ3RoLFxuICAgICAgc3RvcmVJc1Bvc3NpYmx5Q29ycnVwdDogdGhpcy5zdG9yZS5pc1Bvc3NpYmx5Q29ycnVwdGVkKClcbiAgICB9KTtcbiAgICBpZiAodGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2NoZWR1bGVkUGVyc2lzdFRpbWVvdXQpO1xuICAgICAgdGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzUGVyc2lzdGluZykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmlzUmVsb2FkaW5nKSByZXR1cm47XG4gICAgaWYgKHRoaXMuc3RvcmUuaXNQb3NzaWJseUNvcnJ1cHRlZCgpKSByZXR1cm47XG4gICAgaWYgKHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSB8fCB0aGlzLmRpZmZRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmRvUGVyc2lzdCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWN0dWFsbHkgcGVyc2lzdCB0byBJbmRleGVkREIuIElmIHRoZSB3cml0ZSBmYWlscywgdGhlbiB3ZSdsbCByZXRyeSB3aXRoIGEgZnVsbCBkYiB3cml0ZSBhZnRlclxuICAgKiBhIHNob3J0IGRlbGF5LlxuICAgKi9cbiAgYXN5bmMgZG9QZXJzaXN0KCkge1xuICAgIGFzc2VydCghdGhpcy5pc1BlcnNpc3RpbmcsIFwicGVyc2lzdCBhbHJlYWR5IGluIHByb2dyZXNzXCIpO1xuICAgIGlmICh0aGlzLmRpZERpc3Bvc2UpIHJldHVybjtcbiAgICB0aGlzLmlzUGVyc2lzdGluZyA9IHRydWU7XG4gICAgdGhpcy5kZWJ1ZyhcImRvUGVyc2lzdCBzdGFydFwiKTtcbiAgICBjb25zdCBkaWZmUXVldWUgPSB0aGlzLmRpZmZRdWV1ZTtcbiAgICB0aGlzLmRpZmZRdWV1ZSA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5zaG91bGREb0Z1bGxEQldyaXRlKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLmRiLnN0b3JlU25hcHNob3Qoe1xuICAgICAgICAgIHNjaGVtYTogdGhpcy5zdG9yZS5zY2hlbWEsXG4gICAgICAgICAgc25hcHNob3Q6IHRoaXMuc3RvcmUuc2VyaWFsaXplKCksXG4gICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdDogdGhpcy4kc2Vzc2lvblN0YXRlU25hcHNob3QuZ2V0KClcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkaWZmcyA9IHNxdWFzaFJlY29yZERpZmZzKFxuICAgICAgICAgIGRpZmZRdWV1ZS5maWx0ZXIoKGQpID0+IGQgIT09IFVQREFURV9JTlNUQU5DRV9TVEFURSlcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5zdG9yZUNoYW5nZXMoe1xuICAgICAgICAgIGNoYW5nZXM6IGRpZmZzLFxuICAgICAgICAgIHNjaGVtYTogdGhpcy5zdG9yZS5zY2hlbWEsXG4gICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdDogdGhpcy4kc2Vzc2lvblN0YXRlU25hcHNob3QuZ2V0KClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpZExhc3RXcml0ZUVycm9yID0gZmFsc2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5zaG91bGREb0Z1bGxEQldyaXRlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGlkTGFzdFdyaXRlRXJyb3IgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBzdG9yZSBjaGFuZ2VzIGluIGluZGV4ZWQgZGJcIiwgZSk7XG4gICAgICBzaG93Q2FudFdyaXRlVG9JbmRleERiQWxlcnQoKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pc1BlcnNpc3RpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmRlYnVnKFwiZG9QZXJzaXN0IGVuZFwiKTtcbiAgICB0aGlzLnNjaGVkdWxlUGVyc2lzdCgpO1xuICB9XG59XG5leHBvcnQge1xuICBCcm9hZGNhc3RDaGFubmVsTW9jayxcbiAgVExMb2NhbFN5bmNDbGllbnRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTExvY2FsU3luY0NsaWVudC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   showCantReadFromIndexDbAlert: () => (/* binding */ showCantReadFromIndexDbAlert),\n/* harmony export */   showCantWriteToIndexDbAlert: () => (/* binding */ showCantWriteToIndexDbAlert)\n/* harmony export */ });\nfunction showCantWriteToIndexDbAlert() {\n  window.alert(\n    `Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\\u2022 If your hard disk is full, try clearing up some space and then reload the page.`\n  );\n}\nfunction showCantReadFromIndexDbAlert() {\n  window.alert(\n    `Oops! We could not access your browser's storage\\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.`\n  );\n}\n\n//# sourceMappingURL=alerts.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvYWxlcnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9zeW5jL2FsZXJ0cy5tanM/YTAyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzaG93Q2FudFdyaXRlVG9JbmRleERiQWxlcnQoKSB7XG4gIHdpbmRvdy5hbGVydChcbiAgICBgT29wcyEgV2UgY291bGQgbm90IHNhdmUgY2hhbmdlcyB0byB5b3VyIGJyb3dzZXIncyBzdG9yYWdlLiBXZSBub3cgbmVlZCB0byByZWxvYWQgdGhlIHBhZ2UgYW5kIHRyeSBhZ2Fpbi5cblxuS2VlcCBzZWVpbmcgdGhpcyBtZXNzYWdlP1xuXFx1MjAyMiBJZiB5b3UncmUgdXNpbmcgdGxkcmF3IGluIGEgcHJpdmF0ZSBvciBcImluY29nbml0b1wiIHdpbmRvdywgdHJ5IGxvYWRpbmcgdGxkcmF3IGluIGEgcmVndWxhciB3aW5kb3cgb3IgaW4gYSBkaWZmZXJlbnQgYnJvd3Nlci5cblxcdTIwMjIgSWYgeW91ciBoYXJkIGRpc2sgaXMgZnVsbCwgdHJ5IGNsZWFyaW5nIHVwIHNvbWUgc3BhY2UgYW5kIHRoZW4gcmVsb2FkIHRoZSBwYWdlLmBcbiAgKTtcbn1cbmZ1bmN0aW9uIHNob3dDYW50UmVhZEZyb21JbmRleERiQWxlcnQoKSB7XG4gIHdpbmRvdy5hbGVydChcbiAgICBgT29wcyEgV2UgY291bGQgbm90IGFjY2VzcyB5b3VyIGJyb3dzZXIncyBzdG9yYWdlXFx1MjAxNGFuZCB0aGUgYXBwIHdvbid0IHdvcmsgY29ycmVjdGx5IHdpdGhvdXQgdGhhdC4gV2Ugbm93IG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uXG5cbktlZXAgc2VlaW5nIHRoaXMgbWVzc2FnZT9cblxcdTIwMjIgSWYgeW91J3JlIHVzaW5nIHRsZHJhdyBpbiBhIHByaXZhdGUgb3IgXCJpbmNvZ25pdG9cIiB3aW5kb3csIHRyeSBsb2FkaW5nIHRsZHJhdyBpbiBhIHJlZ3VsYXIgd2luZG93IG9yIGluIGEgZGlmZmVyZW50IGJyb3dzZXIuYFxuICApO1xufVxuZXhwb3J0IHtcbiAgc2hvd0NhbnRSZWFkRnJvbUluZGV4RGJBbGVydCxcbiAgc2hvd0NhbnRXcml0ZVRvSW5kZXhEYkFsZXJ0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWxlcnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hardReset: () => (/* binding */ hardReset)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! idb */ \"(ssr)/./node_modules/idb/build/index.js\");\n/* harmony import */ var _LocalIndexedDb_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LocalIndexedDb.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/LocalIndexedDb.mjs\");\n\n\n\nasync function hardReset({ shouldReload = true } = {}) {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearSessionStorage)();\n  for (const instance of _LocalIndexedDb_mjs__WEBPACK_IMPORTED_MODULE_2__.LocalIndexedDb.connectedInstances) {\n    await instance.close();\n  }\n  await Promise.all((0,_LocalIndexedDb_mjs__WEBPACK_IMPORTED_MODULE_2__.getAllIndexDbNames)().map((db) => (0,idb__WEBPACK_IMPORTED_MODULE_1__.deleteDB)(db)));\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearLocalStorage)();\n  if (shouldReload) {\n    window.location.reload();\n  }\n}\nif (typeof window !== \"undefined\") {\n  if (true) {\n    ;\n    window.hardReset = hardReset;\n  }\n  ;\n  window.__tldraw__hardReset = hardReset;\n}\n\n//# sourceMappingURL=hardReset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvaGFyZFJlc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVFO0FBQ3hDO0FBQzJDO0FBQzFFLDJCQUEyQixzQkFBc0IsSUFBSTtBQUNyRCxFQUFFLGtFQUFtQjtBQUNyQix5QkFBeUIsK0RBQWM7QUFDdkM7QUFDQTtBQUNBLG9CQUFvQix1RUFBa0IsZUFBZSw2Q0FBUTtBQUM3RCxFQUFFLGdFQUFpQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxJQUFzQztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvaGFyZFJlc2V0Lm1qcz80YTBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsZWFyTG9jYWxTdG9yYWdlLCBjbGVhclNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IGRlbGV0ZURCIH0gZnJvbSBcImlkYlwiO1xuaW1wb3J0IHsgTG9jYWxJbmRleGVkRGIsIGdldEFsbEluZGV4RGJOYW1lcyB9IGZyb20gXCIuL0xvY2FsSW5kZXhlZERiLm1qc1wiO1xuYXN5bmMgZnVuY3Rpb24gaGFyZFJlc2V0KHsgc2hvdWxkUmVsb2FkID0gdHJ1ZSB9ID0ge30pIHtcbiAgY2xlYXJTZXNzaW9uU3RvcmFnZSgpO1xuICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIExvY2FsSW5kZXhlZERiLmNvbm5lY3RlZEluc3RhbmNlcykge1xuICAgIGF3YWl0IGluc3RhbmNlLmNsb3NlKCk7XG4gIH1cbiAgYXdhaXQgUHJvbWlzZS5hbGwoZ2V0QWxsSW5kZXhEYk5hbWVzKCkubWFwKChkYikgPT4gZGVsZXRlREIoZGIpKSk7XG4gIGNsZWFyTG9jYWxTdG9yYWdlKCk7XG4gIGlmIChzaG91bGRSZWxvYWQpIHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH1cbn1cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgO1xuICAgIHdpbmRvdy5oYXJkUmVzZXQgPSBoYXJkUmVzZXQ7XG4gIH1cbiAgO1xuICB3aW5kb3cuX190bGRyYXdfX2hhcmRSZXNldCA9IGhhcmRSZXNldDtcbn1cbmV4cG9ydCB7XG4gIGhhcmRSZXNldFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcmRSZXNldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uniq: () => (/* binding */ uniq)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction uniq(array) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniq)(array);\n}\n\n//# sourceMappingURL=uniq.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3VuaXEubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDO0FBQzlDO0FBQ0EsU0FBUyxtREFBSztBQUNkO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy91bmlxLm1qcz8zZGFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaXEgYXMgX3VuaXEgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuZnVuY3Rpb24gdW5pcShhcnJheSkge1xuICByZXR1cm4gX3VuaXEoYXJyYXkpO1xufVxuZXhwb3J0IHtcbiAgdW5pcVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaXEubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   openWindow: () => (/* binding */ openWindow)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction openWindow(url, target = \"_blank\") {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.openWindow(url, target);\n}\n\n//# sourceMappingURL=window-open.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3dpbmRvdy1vcGVuLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLEVBQUUsaURBQU87QUFDVDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvd2luZG93LW9wZW4ubWpzPzE3NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVudGltZSB9IGZyb20gXCIuL3J1bnRpbWUubWpzXCI7XG5mdW5jdGlvbiBvcGVuV2luZG93KHVybCwgdGFyZ2V0ID0gXCJfYmxhbmtcIikge1xuICBydW50aW1lLm9wZW5XaW5kb3codXJsLCB0YXJnZXQpO1xufVxuZXhwb3J0IHtcbiAgb3BlbldpbmRvd1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvdy1vcGVuLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/watermarks.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/watermarks.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   watermarkDesktopSvg: () => (/* binding */ watermarkDesktopSvg),\n/* harmony export */   watermarkMobileSvg: () => (/* binding */ watermarkMobileSvg),\n/* harmony export */   watermarkTrackSvg: () => (/* binding */ watermarkTrackSvg)\n/* harmony export */ });\nconst watermarkDesktopSvg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"3001\" height=\"1000\" fill=\"none\"><path fill=\"#000\" d=\"M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z\"/></svg>';\nconst watermarkMobileSvg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"1601\" fill=\"none\"><path fill=\"#000\" d=\"M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z\"/><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71\" clip-rule=\"evenodd\"/><path fill=\"#000\" d=\"M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213\"/></svg>';\nconst watermarkTrackSvg = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1\" height=\"1\"/>';\n\n//# sourceMappingURL=watermarks.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3dhdGVybWFya3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvd2F0ZXJtYXJrcy5tanM/ZWZhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3YXRlcm1hcmtEZXNrdG9wU3ZnID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMzAwMVwiIGhlaWdodD1cIjEwMDBcIiBmaWxsPVwibm9uZVwiPjxwYXRoIGZpbGw9XCIjMDAwXCIgZD1cIk01OTAuNjU2IDMwMC40NDljMCA0OS43MDYtNDAuMjk0IDkwLTkwIDkwLTQ5LjcwNSAwLTkwLTQwLjI5NC05MC05MCAwLTQ5LjcwNSA0MC4yOTUtOTAgOTAtOTAgNDkuNzA2IDAgOTAgNDAuMjk1IDkwIDkwTTU2OS40MzEgNzE5LjAxMWMtMTUuMjQ3IDMyLjgyMS01Ni4wMDYgOTEuNTg5LTk4LjMzOCA5MS40MzgtMzIuMDA0LS4xMTUtMzguNjQyLTMwLjkwNC0xNy40MTQtNTAuODU2IDE3LjM4MS0xNi4zMzcgMjguMjQ2LTQ4LjA3NSAzMS45OTUtNzIuNzE5LjQxNS0yLjcyOC0xLjU1Ni01LjE5Ny00LjI3Mi01LjY3OS0zOS42NjYtNy4wNC03MC43NDYtNDAuODc3LTcwLjc0Ni04My40MTcgMC00OC4yMyAzOC45ODMtODcuMzI5IDg3LjA3LTg3LjMyOSAzOS45MzYgMCA3MC4xNzIgMjIuMjM3IDgzLjM2OSA1Mi4zOTcgMTguODM5IDQzLjA1NSA3LjExNyAxMTUuNzMzLTExLjY2NCAxNTYuMTY1TTI2MTMuMjkgMzg1LjY4MVYyMzkuMzE5YzAtMTEuMzYzIDkuMjItMjAuNTY5IDIwLjU5LTIwLjU2OWg4LjI2YzExLjM3IDAgMjAuNTkgOS4yMDYgMjAuNTkgMjAuNTY5djM2LjkxMWMwIDguNjI5IDcgMTUuNjI1IDE1LjYzIDE1LjYyNWgzNS4yNWM4LjYzIDAgMTUuNjMtNi45OTYgMTUuNjMtMTUuNjI1di0zNi45MTFjMC0xMS4zNjMgOS4yMi0yMC41NjkgMjAuNTktMjAuNTY5aDguMTdjMTEuMzcgMCAyMC41OSA5LjIwNiAyMC41OSAyMC41Njl2MTQ2LjM2MmMwIDExLjM2My05LjIyIDIwLjU2OS0yMC41OSAyMC41NjloLTguMTdjLTExLjM3IDAtMjAuNTktOS4yMDYtMjAuNTktMjAuNTY5di0zNi45OTljMC04LjYzLTctMTUuNjI1LTE1LjYzLTE1LjYyNWgtMzUuMjVjLTguNjMgMC0xNS42MyA2Ljk5NS0xNS42MyAxNS42MjV2MzYuOTk5YzAgMTEuMzYzLTkuMjIgMjAuNTY5LTIwLjU5IDIwLjU2OWgtOC4yNmMtMTEuMzcgMC0yMC41OS05LjIwNi0yMC41OS0yMC41NjlNMjM5MS45NyAyMzkuMzE5djE0Ni4zNjJjMCAxMS4zNDgtOS4xNiAyMC41NjktMjAuNDkgMjAuNTY5aC04LjJjLTExLjMzIDAtMjAuNDktOS4yMjEtMjAuNDktMjAuNTY5VjIzOS4zMTljMC0xMS4zNDggOS4xNi0yMC41NjkgMjAuNDktMjAuNTY5aDguMmMxMS4zMyAwIDIwLjQ5IDkuMjIxIDIwLjQ5IDIwLjU2OU0yMDk4LjIzIDM5MS40M2wtNDIuNjktMTQ2LjM2MWMtMy44NS0xMy4xNzEgNi4wNi0yNi4zMTkgMTkuNzktMjYuMzE5aDEwLjZjOS41OSAwIDE3LjkzIDYuNjExIDIwLjA4IDE1Ljk1MmwxNy4wMSA3My4wNDVjMS40OCA2LjM0OCAxMC40NyA2LjQ3OCAxMi4xNC4xNzZsMTkuNDctNzMuODM4YzIuMzgtOS4wNCAxMC41Ny0xNS4zMzUgMTkuOTMtMTUuMzM1aDEyLjFjOS4zNyAwIDE3LjU2IDYuMyAxOS45NCAxNS4zNDZsMTkuNDkgNzQuMDY3YzEuNjYgNi4zMDUgMTAuNjUgNi4xNzggMTIuMTMtLjE3MWwxNy4wOS03My4yOTRjMi4xNS05LjMzOSAxMC40OS0xNS45NDggMjAuMDgtMTUuOTQ4aDEwLjUzYzEzLjcyIDAgMjMuNjMgMTMuMTQxIDE5Ljc5IDI2LjMxbC00Mi42MyAxNDYuMzYxYy0yLjU2IDguNzg5LTEwLjYzIDE0LjgyOS0xOS43OSAxNC44MjloLTE1LjY4Yy05LjEyIDAtMTcuMTYtNS45OC0xOS43Ni0xNC43MDlsLTIxLjE3LTcxLjA1OWMtMS43Ny01Ljk0OC0xMC4xOS01Ljk1Ny0xMS45Ny0uMDEybC0yMS4zMyA3MS4wNzFjLTIuNiA4LjcyOS0xMC42NCAxNC43MDktMTkuNzYgMTQuNzA5aC0xNS41OWMtOS4xNyAwLTE3LjIzLTYuMDM1LTE5LjgtMTQuODJNMjQ0My4yMyAyMTguNzVoMTE4LjU5YzExLjM4IDAgMjAuNjIgOS4xOTUgMjAuNjIgMjAuNTU3cy05LjI0IDIwLjU1Ni0yMC42MiAyMC41NTZoLTI0Ljc5Yy01LjUzIDAtMTAgNC40NzctMTAgMTB2MTE1LjgxOGMwIDExLjM2OC05LjI1IDIwLjU2OS0yMC42MyAyMC41NjloLTcuNjVjLTExLjM5IDAtMjAuNjMtOS4yMDEtMjAuNjMtMjAuNTY5VjI2OS44NjNjMC01LjUyMy00LjQ4LTEwLTEwLTEwaC0yNC44OWMtMTEuMzcgMC0yMC42MS05LjE5NS0yMC42MS0yMC41NTZzOS4yNC0yMC41NTcgMjAuNjEtMjAuNTU3TTExNzQuMTUgMjE4Ljc1aDI0LjY0YzguMzUgMCAxNS44OCA1LjA0MiAxOS4wNCAxMi43NjRsMzQuNjEgODMuOTQyYzIuMTMgNS4xNjEgOS40NCA1LjE1NSAxMS41Ni0uMDFsMzQuNDMtODMuOTMyYTIwLjU4IDIwLjU4IDAgMCAxIDE5LjA0LTEyLjc2NGgyNC42NGMxMS4zNyAwIDIwLjU4IDkuMjA4IDIwLjU4IDIwLjU2OXYxNDYuMzYyYzAgMTEuMzYxLTkuMjEgMjAuNTY5LTIwLjU4IDIwLjU2OWgtNy4wOWMtMTEuMzYgMC0yMC41OC05LjIwOC0yMC41OC0yMC41NjlsLS4xMi01MC42NDVjLS4wMS02Ljg4OC05LjUzLTguNjg4LTEyLjA2LTIuMjgzbC0yMy40NiA1OS4zMzJhMjAuNTcgMjAuNTcgMCAwIDEtMTkuMTQgMTMuMDA5aC0zLjAzYTIwLjU3IDIwLjU3IDAgMCAxLTE5LjE1LTEzLjA0NmwtMjMuNDctNTkuNjhjLTIuNTItNi40MTYtMTIuMDUtNC42MjMtMTIuMDYgMi4yNzFsLS4xMyA1MS4wNDJjMCAxMS4zNjEtOS4yMSAyMC41NjktMjAuNTcgMjAuNTY5aC03LjFjLTExLjM2IDAtMjAuNTctOS4yMDgtMjAuNTctMjAuNTY5VjIzOS4zMTljMC0xMS4zNjEgOS4yMS0yMC41NjkgMjAuNTctMjAuNTY5XCIvPjxwYXRoIGZpbGw9XCIjMDAwXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJtMTQ0OS45NCAzOTEuODM2IDYuMTItMTkuMzkyYTYuMjU1IDYuMjU1IDAgMCAxIDUuOTYtNC4zNjlsNTAuMjItLjA2MWE2LjI0IDYuMjQgMCAwIDEgNS45NiA0LjM0OGw2LjIzIDE5LjQ4NmMyLjcxIDguNTgxIDEwLjcxIDE0LjQwMiAxOS43NCAxNC40MDJoOS4zNGMxNC4xMyAwIDI0LjE1LTEzLjc5MSAxOS42MS0yNy4xNTFsLTQ5Ljc0LTE0Ni4zNjFjLTIuODUtOC4zNy0xMC43NC0xMy45ODgtMTkuNjEtMTMuOTg4aC0zMy4xNmMtOC44NyAwLTE2Ljc3IDUuNjE4LTE5LjYxIDEzLjk4OGwtNDkuNzQgMTQ2LjM2MWMtNC41NCAxMy4zNiA1LjQ4IDI3LjE1MSAxOS42MSAyNy4xNTFoOS4zMmM5LjA0IDAgMTcuMDQtNS44MjcgMTkuNzUtMTQuNDE0bTMxLjEtOTguODU4YzEuODUtNS44MDcgMTAuMDgtNS43OTYgMTEuOTEuMDE2bDguODMgMjcuOTE2YzEuMjggNC4wMjgtMS43MyA4LjEzNC01Ljk2IDguMTM0aC0xNy43NGMtNC4yMyAwLTcuMjQtNC4xMTktNS45NS04LjE1MXpNMTY4MS44MSA0MDYuMjVjMTguOTEgMCAzNS4zOS0zLjY4NiA0OS4zNi0xMS4xNjggMTMuOTctNy41NDQgMjQuNzMtMTguMzk0IDMyLjI0LTMyLjQ4OSA3LjU2LTE0LjEwNSAxMS4yOS0zMC44NjYgMTEuMjktNTAuMTgyIDAtMTkuMjU2LTMuNzMtMzUuOTU3LTExLjI5LTUwLjAwNC03LjU3LTE0LjA5NC0xOC4zNS0yNC45MTItMzIuMzItMzIuMzk3LTEzLjkxLTcuNTQ1LTMwLjQtMTEuMjYtNDkuMzctMTEuMjZoLTQ5LjVjLTExLjM4IDAtMjAuNjMgOS4yMDEtMjAuNjMgMjAuNTY5djE0Ni4zNjJjMCAxMS4zNjggOS4yNSAyMC41NjkgMjAuNjMgMjAuNTY5em0yMy4xMy00Ny43MDFjLTYuNjIgMy4yMTUtMTQuODUgNC44ODYtMjQuNzkgNC44ODYtMTAuNDkgMC0xOS04LjUwNy0xOS0xOXYtNjQuMzRjMC0xMC4xNDkgOC4yMy0xOC4zNzYgMTguMzgtMTguMzc2IDEwLjE4IDAgMTguNTYgMS43MDMgMjUuMjMgNC45NzQgNi41OSAzLjE0OSAxMS42MyA4LjMxNSAxNS4wOCAxNS42MzMgMy40NSA3LjI2OSA1LjI4IDE3LjI2OCA1LjI4IDMwLjE2MiAwIDEyLjg5MS0xLjgyIDIyLjk1MS01LjI4IDMwLjM0Ny0zLjM5IDcuMzE5LTguMzYgMTIuNTA5LTE0LjkgMTUuNzE0XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz48cGF0aCBmaWxsPVwiIzAwMFwiIGQ9XCJNMTgwNC4yMSAzODUuNjgxVjIzOS4zMTljMC0xMS4zNjEgOS4yMS0yMC41NjkgMjAuNTgtMjAuNTY5aDkxLjI4YzExLjM2IDAgMjAuNTcgOS4yMDIgMjAuNTcgMjAuNTU3cy05LjIxIDIwLjU1Ni0yMC41NyAyMC41NTZoLTU0LjY0YTcuODA3IDcuODA3IDAgMCAwLTcuODEgNy44MTN2MTYuMzY2YTcuODA2IDcuODA2IDAgMCAwIDcuODEgNy44MTJoNDguMTNjMTEuMzcgMCAyMC41OCA5LjI0NiAyMC41OCAyMC42MDJzLTkuMjEgMjAuNjAxLTIwLjU4IDIwLjYwMWgtNDguMTNhNy44MDYgNy44MDYgMCAwIDAtNy44MSA3LjgxMnYxNi40NTVhNy44MDcgNy44MDcgMCAwIDAgNy44MSA3LjgxM2g1NC42NGMxMS4zNiAwIDIwLjU3IDkuMjAyIDIwLjU3IDIwLjU1NnMtOS4yMSAyMC41NTctMjAuNTcgMjAuNTU3aC05MS4yOGMtMTEuMzcgMC0yMC41OC05LjIwOC0yMC41OC0yMC41NjlcIi8+PHBhdGggZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0yODc1LjUgNjguNzVoLTI3NTBjLTMxLjA2NiAwLTU2LjI1IDI1LjE4NC01Ni4yNSA1Ni4yNXY3NTBjMCAzMS4wNjYgMjUuMTg0IDU2LjI1IDU2LjI1IDU2LjI1aDI3NTBjMzEuMDcgMCA1Ni4yNS0yNS4xODQgNTYuMjUtNTYuMjVWMTI1YzAtMzEuMDY2LTI1LjE4LTU2LjI1LTU2LjI1LTU2LjI1TTEyNS41IDBDNTYuNDY0IDAgLjUgNTUuOTY0LjUgMTI1djc1MGMwIDY5LjAzNiA1NS45NjUgMTI1IDEyNSAxMjVoMjc1MGM2OS4wNCAwIDEyNS01NS45NjQgMTI1LTEyNVYxMjVjMC02OS4wMzYtNTUuOTYtMTI1LTEyNS0xMjV6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz48cGF0aCBmaWxsPVwiIzAwMFwiIGQ9XCJNMjQ3Ni4wNiA4MDQuODEzYy0xMC41NCAwLTE5LjgyLTYuOTQ3LTIyLjgxLTE3LjA2OEwyMzkwLjc5IDU3NS43Yy00LjQ5LTE1LjI0OCA2LjkyLTMwLjUzNCAyMi44LTMwLjUzNGgyNy43NWMxMS4xIDAgMjAuNzIgNy42ODYgMjMuMTggMTguNTJMMjQ4OSA2NzEuNDAyYzIuMDcgOS4wOTMgMTQuOTMgOS4zMjEgMTcuMzIuMzA4bDI4LjgzLTEwOC44NDRjMi43Ni0xMC40MzUgMTIuMTktMTcuNyAyMi45OC0xNy43aDI1LjE3YzEwLjggMCAyMC4yNSA3LjI5MyAyMi45OSAxNy43NTVsMjguMjcgMTA3LjczOWMyLjM2IDkuMDAxIDE1LjE4IDguODI5IDE3LjMtLjIzMmwyNS4wMS0xMDYuODg4YzIuNTEtMTAuNzYzIDEyLjEtMTguMzc0IDIzLjE0LTE4LjM3NGgyNy44N2MxNS44OCAwIDI3LjI5IDE1LjI4NiAyMi44IDMwLjUzNGwtNjIuNDYgMjEyLjA0NWEyMy43OCAyMy43OCAwIDAgMS0yMi44MSAxNy4wNjhoLTMyLjEyYy0xMC4zOSAwLTE5LjU4LTYuNzYzLTIyLjY5LTE2LjY5NmwtMzIuMDgtMTAyLjY5NGMtMi42Mi04LjM5Ny0xNC41MS04LjMzMS0xNy4wNC4wOTVsLTMwLjc0IDEwMi4zNDZjLTMuMDIgMTAuMDYxLTEyLjI3IDE2Ljk0OS0yMi43NiAxNi45NDl6TTE3NDIuNDQgODA0LjgxM2gtNzUuODFjLTEzLjA5IDAtMjMuNzEtMTAuNjU2LTIzLjcxLTIzLjgwMVY1NjguOTY3YzAtMTMuMTQ1IDEwLjYyLTIzLjgwMSAyMy43MS0yMy44MDFoNzQuOGMyNi42IDAgNDkuNTkgNS4xOTggNjguOTUgMTUuNTk0IDE5LjQ1IDEwLjMxMiAzNC40NCAyNS4xODcgNDQuOTYgNDQuNjI3IDEwLjYxIDE5LjM1NSAxNS45MSA0Mi41NTYgMTUuOTEgNjkuNjAycTAgNDAuNTctMTUuNzggNjkuNzNjLTEwLjUzIDE5LjM1NS0yNS40MyAzNC4yMzEtNDQuNzEgNDQuNjI3LTE5LjI4IDEwLjMxMS00Mi4wNSAxNS40NjctNjguMzIgMTUuNDY3bS0yOS4zLTgzLjY0MmMwIDEzLjE0NSAxMC42MSAyMy44MDEgMjMuNzEgMjMuODAxaDMuMDZjMTIuOCAwIDIzLjctMi4wNyAzMi43MS02LjIxMiA5LjA5LTQuMTQxIDE2LTExLjI4MyAyMC43MS0yMS40MjZxNy4yLTE1LjIxMyA3LjItNDIuMzQ1IDAtMjcuMTMtNy4zMi00Mi4zNDRjLTQuOC0xMC4xNDMtMTEuODctMTcuMjg1LTIxLjIyLTIxLjQyNi05LjI2LTQuMTQyLTIwLjYzLTYuMjEyLTM0LjEtNi4yMTJoLTEuMDRjLTEzLjEgMC0yMy43MSAxMC42NTYtMjMuNzEgMjMuODAxek0xNDYwLjg2IDgwNC44MTNjLTEzLjEyIDAtMjMuNzYtMTAuNjU2LTIzLjc2LTIzLjgwMVY1NjguOTY3YzAtMTMuMTQ1IDEwLjY0LTIzLjgwMSAyMy43Ni0yMy44MDFoMjIuODRjMTMuMTMgMCAyMy43NiAxMC42NTYgMjMuNzYgMjMuODAxdjE1NS4yNDdjMCAxMy4xNDUgMTAuNjQgMjMuODAxIDIzLjc2IDIzLjgwMWg1Ny4yN2MxMy4xMiAwIDIzLjc2IDEwLjY1NiAyMy43NiAyMy44MDF2OS4xOTZjMCAxMy4xNDUtMTAuNjQgMjMuODAxLTIzLjc2IDIzLjgwMXpNMTIwNC40NSA2MDEuOTY0Yy0xMy4xMyAwLTIzLjc3LTEwLjY1Ni0yMy43Ny0yMy44MDF2LTkuMTk2YzAtMTMuMTQ1IDEwLjY0LTIzLjgwMSAyMy43Ny0yMy44MDFoMTc3Ljg5YzEzLjEzIDAgMjMuNzggMTAuNjU2IDIzLjc4IDIzLjgwMXY5LjE5NmMwIDEzLjE0NS0xMC42NSAyMy44MDEtMjMuNzggMjMuODAxaC0zOS4zOGMtOC4yMSAwLTE0Ljg2IDYuNjYtMTQuODYgMTQuODc1djE2NC4xNzNjMCAxMy4xNDUtMTAuNjQgMjMuODAxLTIzLjc4IDIzLjgwMWgtMjEuODVjLTEzLjEzIDAtMjMuNzgtMTAuNjU2LTIzLjc4LTIzLjgwMVY2MTYuODM5YzAtOC4yMTUtNi42NS0xNC44NzUtMTQuODYtMTQuODc1elwiLz48cGF0aCBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTIyMjMuMDUgNzg3Ljg5MWMtMy4wMiAxMC4wNDctMTIuMjcgMTYuOTIyLTIyLjc0IDE2LjkyMmgtMjUuNDNjLTE2LjE5IDAtMjcuNjQtMTUuODYyLTIyLjU3LTMxLjI2MWw2OS44OC0yMTIuMDQ1YzMuMjEtOS43NTMgMTIuMzEtMTYuMzQxIDIyLjU2LTE2LjM0MWg2MS44NGMxMC4yNSAwIDE5LjM1IDYuNTg4IDIyLjU2IDE2LjM0MWw2OS44NyAyMTIuMDQ1YzUuMDggMTUuMzk5LTYuMzcgMzEuMjYxLTIyLjU2IDMxLjI2MWgtMjUuNDNjLTEwLjQ4IDAtMTkuNzItNi44NzUtMjIuNzQtMTYuOTIybC02LjctMjIuMmExNC44NCAxNC44NCAwIDAgMC0xNC4yMS0xMC41NzZoLTYzLjQyYy02LjU1IDAtMTIuMzIgNC4yOTYtMTQuMjIgMTAuNTc2em03Ni4xMy05Ni45NDUtMTQuMTMtNDguNDM2Yy0yLjQ2LTguNDUxLTE0LjM2LTguNjAyLTE3LjA0LS4yMTdsLTE1LjQ2IDQ4LjQzNmMtMS44NCA1Ljc1OSAyLjQ1IDExLjY0NSA4LjQ4IDExLjY0NWgyOS42YzUuOTQgMCAxMC4yMi01LjcxNSA4LjU1LTExLjQyOFwiIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+PHBhdGggZmlsbD1cIiMwMDBcIiBkPVwiTTE5MzkuNiA4MDQuODEzYy0xMy4xMyAwLTIzLjc3LTEwLjY1Ni0yMy43Ny0yMy44MDFWNTY4Ljk2N2MwLTEzLjE0NSAxMC42NC0yMy44MDEgMjMuNzctMjMuODAxaDg4LjEzYzE5LjI0IDAgMzYuMDggMy41MDggNTAuNTEgMTAuNTIzczI1LjY1IDE3LjExNSAzMy42NyAzMC4zcTEyLjAzIDE5Ljc3OSAxMi4wMyA0Ny40MTZjMCAxOC41OTUtNC4xNCAzNC4yNzMtMTIuNDEgNDcuMDM2LTcuNjQgMTEuOTEzLTE4LjE4IDIxLjEwMS0zMS42MyAyNy41NjQtMTYuOTggOC4xNTktMzYgMTEuMTA0LTU0LjcgMTEuMTA0aC00My4wN2MtNzYuNTYgMCA0LjA4LTEzNS44NCA0LjA4LTg0LjcwNnY3Ljk5NmMwIDEyLjExNyA5LjgxIDIxLjk0MSAyMS45MSAyMS45NDEgOC4xMiAwIDE2LjMtLjM0NSAyNC4wNC0zLjA0MyA1LjkxLTIuMTEzIDEwLjQzLTUuNDUxIDEzLjU1LTEwLjAxNSAzLjItNC41NjUgNC44MS0xMC41MjMgNC44MS0xNy44NzcgMC03LjQzNy0xLjYxLTEzLjQ4MS00LjgxLTE4LjEyOS0zLjEyLTQuNzMzLTcuNjQtOC4xOTktMTMuNTUtMTAuMzk2LTcuMDUtMi43NjYtMTQuNjctMy40MjMtMjIuMTgtMy40MjMtMTMuMTMgMC0yMy43NyAxMC42NTYtMjMuNzcgMjMuODAxdjQ3LjcxYzAgMTEuODI1IDExLjE0IDE2LjAwMyAxOS45MSAyMC43NTIgMTIuMzEgNi42NzEgNy41OCAyNS4zODktNi40MiAyNS4zODktNy40NSAwLTEzLjQ5IDYuMDQ4LTEzLjQ5IDEzLjUwOHY0OC4zOTVjMCAxMy4xNDUtMTAuNjMgMjMuODAxLTIzLjc2IDIzLjgwMXptMTM0Ljg5LTEwNi43NTggNS40MSA5Ljk1IDMzLjUxIDYxLjYyMmM4LjYyIDE1Ljg2LTIuODQgMzUuMTg2LTIwLjg3IDM1LjE4NmgtMjIuMjdjLTguNzQgMC0xNi43Ny00Ljc5OC0yMC45Mi0xMi40OTZsLTM1LjA1LTY1LjA0YTE1LjUyIDE1LjUyIDAgMCAwLTEzLjY2LTguMTY4Yy00Mi4yNCAwIDQwLjYyLTgyLjE1NCA3My44NS0yMS4wNTRNOTMxLjY1MiAwaDY4Ljc0OHYxMDAwaC02OC43NDh6XCIvPjwvc3ZnPic7XG5jb25zdCB3YXRlcm1hcmtNb2JpbGVTdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI0MDBcIiBoZWlnaHQ9XCIxNjAxXCIgZmlsbD1cIm5vbmVcIj48cGF0aCBmaWxsPVwiIzAwMFwiIGQ9XCJNNzIgMTMxOS44YzAtMTAuNzMgNy4wNzEtMjAuMTggMTcuMzcyLTIzLjIybDIxNS44MjMtNjMuNjJjMTUuNTE5LTQuNTcgMzEuMDc4IDcuMDUgMzEuMDc4IDIzLjIydjI4LjI2YzAgMTEuMzEtNy44MjQgMjEuMS0xOC44NSAyMy42MWwtMTA5LjYzNiAyNC45NGMtOS4yNTQgMi4xLTkuNDg3IDE1LjItLjMxMyAxNy42M2wxMTAuNzg0IDI5LjM3YTI0LjIxIDI0LjIxIDAgMCAxIDE4LjAxNSAyMy40djI1LjY0YzAgMTEtNy40MjMgMjAuNjItMTguMDcxIDIzLjQxbC0xMDkuNjU5IDI4Ljc5Yy05LjE2MiAyLjQxLTguOTg2IDE1LjQ3LjIzNiAxNy42M2wxMDguNzkyIDI1LjQ2YzEwLjk1NSAyLjU2IDE4LjcwMiAxMi4zMyAxOC43MDIgMjMuNTd2MjguMzljMCAxNi4xNy0xNS41NTkgMjcuNzktMzEuMDc4IDIzLjIybC0yMTUuODIzLTYzLjYyYy0xMC4zLTMuMDQtMTcuMzcyLTEyLjQ5LTE3LjM3Mi0yMy4yMnYtMzIuNzJjMC0xMC41OSA2Ljg4My0xOS45NSAxNi45OTQtMjMuMTFsMTA0LjUyMy0zMi42N2M4LjU0Ny0yLjY3IDguNDc5LTE0Ljc5LS4wOTYtMTcuMzZsLTEwNC4xNy0zMS4zQzc5LjAxIDEzNzIuNDIgNzIgMTM2MyA3MiAxMzUyLjMxek03MiA1NzIuNjM4VjQ5NS40M2MwLTEzLjMzNiAxMC44NDYtMjQuMTQ3IDI0LjIyNS0yNC4xNDdoMjE1LjgyM2MxMy4zNzkgMCAyNC4yMjUgMTAuODExIDI0LjIyNSAyNC4xNDd2NzYuMTc5cTAgNDAuNjQ1LTE1Ljg3MiA3MC4yMjgtMTUuNzQzIDI5LjcxMi00NS40MjIgNDUuNzktMjkuNTUgMTYuMjA2LTcwLjg0MyAxNi4yMDYtNDEuMjkyIDAtNzAuOTcxLTE2LjA3OC0yOS41NS0xNi4wNzctNDUuNDIyLTQ1LjUzMlE3MiA2MTIuNzY3IDcyIDU3Mi42MzhtODUuMTMyLTI5Ljg0Yy0xMy4zNzkgMC0yNC4yMjUgMTAuODEtMjQuMjI1IDI0LjE0NnYzLjEyMnEwIDE5LjU1IDYuMzIzIDMzLjMxMyA2LjMyMyAxMy44OSAyMS44MDcgMjEuMDk0IDE1LjQ4NSA3LjMzMiA0My4wOTkgNy4zMzF0NDMuMS03LjQ2cTE1LjQ4NC03LjMzIDIxLjgwNy0yMS42MDggNi4zMjMtMTQuMTUgNi4zMjMtMzQuNzI4di0xLjA2NGMwLTEzLjMzNi0xMC44NDYtMjQuMTQ2LTI0LjIyNS0yNC4xNDZ6TTcyIDI4NS44NThjMC0xMy4zNjMgMTAuODQ2LTI0LjE5NyAyNC4yMjUtMjQuMTk3aDIxNS44MjNjMTMuMzc5IDAgMjQuMjI1IDEwLjgzNCAyNC4yMjUgMjQuMTk3djIzLjI3YzAgMTMuMzY0LTEwLjg0NiAyNC4xOTctMjQuMjI1IDI0LjE5N0gxNTQuMDM1Yy0xMy4zNzkgMC0yNC4yMjUgMTAuODM0LTI0LjIyNSAyNC4xOTd2NTguMzI4YzAgMTMuMzY0LTEwLjg0NiAyNC4xOTctMjQuMjI1IDI0LjE5N2gtOS4zNkM4Mi44NDUgNDQwLjA0NyA3MiA0MjkuMjE0IDcyIDQxNS44NXpNMjc4LjQ2MyAyNC43MmMwLTEzLjM3NCAxMC44NDYtMjQuMjE2IDI0LjIyNS0yNC4yMTZoOS4zNmMxMy4zNzkgMCAyNC4yMjUgMTAuODQyIDI0LjIyNSAyNC4yMTZ2MTgxLjE3NGMwIDEzLjM3NC0xMC44NDYgMjQuMjE2LTI0LjIyNSAyNC4yMTZoLTkuMzZjLTEzLjM3OSAwLTI0LjIyNS0xMC44NDItMjQuMjI1LTI0LjIxNnYtNDAuMTA4YzAtOC4zNTktNi43NzktMTUuMTM1LTE1LjE0MS0xNS4xMzVIOTYuMjI1Yy0xMy4zOCAwLTI0LjIyNS0xMC44NDItMjQuMjI1LTI0LjIxNnYtMjIuMjU2YzAtMTMuMzc0IDEwLjg0Ni0yNC4yMTYgMjQuMjI1LTI0LjIxNmgxNjcuMDk3YzguMzYyIDAgMTUuMTQxLTYuNzc2IDE1LjE0MS0xNS4xMzV6XCIvPjxwYXRoIGZpbGw9XCIjMDAwXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiIGQ9XCJNODkuMjI0IDEwNjIuMTNDNzguOTk3IDEwNTkuMDQgNzIgMTA0OS42MyA3MiAxMDM4Ljk2di0yNS45YzAtMTYuNDg2IDE2LjE0NS0yOC4xNDcgMzEuODE4LTIyLjk3OWwyMTUuODIzIDcxLjE2OWEyNC4xOSAyNC4xOSAwIDAgMSAxNi42MzIgMjIuOTh2NjIuOTdjMCAxMC40NS02LjcwNiAxOS43MS0xNi42MzIgMjIuOThsLTIxNS44MjMgNzEuMTdDODguMTQ1IDEyNDYuNTEgNzIgMTIzNC44NiA3MiAxMjE4LjM3di0yNS45YzAtMTAuNjcgNi45OTctMjAuMDggMTcuMjI0LTIzLjE3bDIyLjU5NS02LjgxYTE1LjEzIDE1LjEzIDAgMCAwIDEwLjc2NS0xNC40OHYtNjQuNTlhMTUuMTMgMTUuMTMgMCAwIDAtMTAuNzY1LTE0LjQ4em05OC42NzIgNzcuNTMgNDkuMjk5LTE0LjM5YzguNjAxLTIuNTEgOC43NTUtMTQuNjIuMjItMTcuMzVsLTQ5LjI5OS0xNS43NWMtNS44NjEtMS44OC0xMS44NTIgMi40OS0xMS44NTIgOC42NHYzMC4xNGMwIDYuMDUgNS44MTcgMTAuNDEgMTEuNjMyIDguNzFcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIvPjxwYXRoIGZpbGw9XCIjMDAwXCIgZD1cIk03MiA3NzMuNDM5YzAtMTMuMzY3IDEwLjg0Ni0yNC4yMDMgMjQuMjI1LTI0LjIwM2gyMTUuODIzYzEzLjM3OSAwIDI0LjIyNSAxMC44MzYgMjQuMjI1IDI0LjIwM3Y4OS43NjJxMCAyOS4zOTUtMTAuNzExIDUxLjQzOS0xMC43MSAyMi4wNDYtMzAuODQgMzQuMjkzdC00OC4yNjEgMTIuMjQ4cS0yOC4zODggMC00Ny44NzMtMTIuNjM1LTE4LjE4Ny0xMS42NzItMjguMDU2LTMyLjIxOGMtOC4zMDMtMTcuMjg5LTExLjMwMS0zNi42NjEtMTEuMzAxLTU1LjcwNXYtNDMuODY3YzAtNzcuOTc2IDEzOC4yNiA0LjE2IDg2LjIxNSA0LjE2aC04LjEzOGMtMTIuMzM0IDAtMjIuMzMyIDkuOTg5LTIyLjMzMiAyMi4zMTEgMCA4LjI2OS4zNTEgMTYuNiAzLjA5NyAyNC40ODdxMy4yMjUgOS4wMjQgMTAuMTk0IDEzLjc5NCA2Ljk2OCA0Ljg5OSAxOC4xOTQgNC44OTkgMTEuMzU2IDAgMTguNDUzLTQuODk5IDcuMjI2LTQuNzcgMTAuNTgxLTEzLjc5NGMyLjgxNS03LjE4OCAzLjQ4NC0xNC45NDQgMy40ODQtMjIuNTk2IDAtMTMuMzY2LTEwLjg0Ni0yNC4yMDItMjQuMjI1LTI0LjIwMmgtNDguNTZjLTEyLjAzNiAwLTE2LjI4OCAxMS4zNDUtMjEuMTIyIDIwLjI3Mi02Ljc5IDEyLjUzOS0yNS44NDEgNy43Mi0yNS44NDEtNi41MzYgMC03LjU4Ni02LjE1Ni0xMy43MzYtMTMuNzQ5LTEzLjczNkg5Ni4yMjVDODIuODQ1IDgyMC45MTYgNzIgODEwLjA4IDcyIDc5Ni43MTR6bTEwOC42NiAxMzcuMzc4LTEwLjEyOCA1LjUxMS02Mi43MiAzNC4xMzFDOTEuNjcgOTU5LjI0MyA3MiA5NDcuNTY5IDcyIDkyOS4yMDVWOTA2LjUyYTI0LjIgMjQuMiAwIDAgMSAxMi43MTktMjEuMjk5bDY2LjE5OS0zNS42OTZhMTUuODIgMTUuODIgMCAwIDAgOC4zMTMtMTMuOTIxYzAtNDMuMDEyIDgzLjYxOCA0MS4zNzEgMjEuNDI5IDc1LjIxM1wiLz48L3N2Zz4nO1xuY29uc3Qgd2F0ZXJtYXJrVHJhY2tTdmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxXCIgaGVpZ2h0PVwiMVwiLz4nO1xuZXhwb3J0IHtcbiAgd2F0ZXJtYXJrRGVza3RvcFN2ZyxcbiAgd2F0ZXJtYXJrTW9iaWxlU3ZnLFxuICB3YXRlcm1hcmtUcmFja1N2Z1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhdGVybWFya3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/watermarks.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/version.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/version.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   publishDates: () => (/* binding */ publishDates),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nconst version = \"3.3.1\";\nconst publishDates = {\n  major: \"2024-09-13T14:36:29.063Z\",\n  minor: \"2024-10-09T10:22:00.866Z\",\n  patch: \"2024-10-10T14:19:06.977Z\"\n};\n\n//# sourceMappingURL=version.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vdmVyc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vdmVyc2lvbi5tanM/MjZhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB2ZXJzaW9uID0gXCIzLjMuMVwiO1xuY29uc3QgcHVibGlzaERhdGVzID0ge1xuICBtYWpvcjogXCIyMDI0LTA5LTEzVDE0OjM2OjI5LjA2M1pcIixcbiAgbWlub3I6IFwiMjAyNC0xMC0wOVQxMDoyMjowMC44NjZaXCIsXG4gIHBhdGNoOiBcIjIwMjQtMTAtMTBUMTQ6MTk6MDYuOTc3WlwiXG59O1xuZXhwb3J0IHtcbiAgcHVibGlzaERhdGVzLFxuICB2ZXJzaW9uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/version.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   track: () => (/* reexport safe */ _lib_track_mjs__WEBPACK_IMPORTED_MODULE_1__.track),\n/* harmony export */   useAtom: () => (/* reexport safe */ _lib_useAtom_mjs__WEBPACK_IMPORTED_MODULE_2__.useAtom),\n/* harmony export */   useComputed: () => (/* reexport safe */ _lib_useComputed_mjs__WEBPACK_IMPORTED_MODULE_3__.useComputed),\n/* harmony export */   useQuickReactor: () => (/* reexport safe */ _lib_useQuickReactor_mjs__WEBPACK_IMPORTED_MODULE_4__.useQuickReactor),\n/* harmony export */   useReactor: () => (/* reexport safe */ _lib_useReactor_mjs__WEBPACK_IMPORTED_MODULE_5__.useReactor),\n/* harmony export */   useStateTracking: () => (/* reexport safe */ _lib_useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_6__.useStateTracking),\n/* harmony export */   useValue: () => (/* reexport safe */ _lib_useValue_mjs__WEBPACK_IMPORTED_MODULE_7__.useValue)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _lib_track_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/track.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/track.mjs\");\n/* harmony import */ var _lib_useAtom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/useAtom.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useAtom.mjs\");\n/* harmony import */ var _lib_useComputed_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/useComputed.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useComputed.mjs\");\n/* harmony import */ var _lib_useQuickReactor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/useQuickReactor.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useQuickReactor.mjs\");\n/* harmony import */ var _lib_useReactor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/useReactor.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useReactor.mjs\");\n/* harmony import */ var _lib_useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/useStateTracking.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useStateTracking.mjs\");\n/* harmony import */ var _lib_useValue_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/useValue.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useValue.mjs\");\n\n\n\n\n\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/state-react\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ3JCO0FBQ0k7QUFDUTtBQUNRO0FBQ1Y7QUFDWTtBQUNoQjtBQUM5QywyRUFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFTRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9pbmRleC5tanM/ZTY1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHRyYWNrIH0gZnJvbSBcIi4vbGliL3RyYWNrLm1qc1wiO1xuaW1wb3J0IHsgdXNlQXRvbSB9IGZyb20gXCIuL2xpYi91c2VBdG9tLm1qc1wiO1xuaW1wb3J0IHsgdXNlQ29tcHV0ZWQgfSBmcm9tIFwiLi9saWIvdXNlQ29tcHV0ZWQubWpzXCI7XG5pbXBvcnQgeyB1c2VRdWlja1JlYWN0b3IgfSBmcm9tIFwiLi9saWIvdXNlUXVpY2tSZWFjdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlUmVhY3RvciB9IGZyb20gXCIuL2xpYi91c2VSZWFjdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlU3RhdGVUcmFja2luZyB9IGZyb20gXCIuL2xpYi91c2VTdGF0ZVRyYWNraW5nLm1qc1wiO1xuaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiLi9saWIvdXNlVmFsdWUubWpzXCI7XG5yZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKFxuICBcIkB0bGRyYXcvc3RhdGUtcmVhY3RcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgdHJhY2ssXG4gIHVzZUF0b20sXG4gIHVzZUNvbXB1dGVkLFxuICB1c2VRdWlja1JlYWN0b3IsXG4gIHVzZVJlYWN0b3IsXG4gIHVzZVN0YXRlVHJhY2tpbmcsXG4gIHVzZVZhbHVlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/track.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/track.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProxyHandlers: () => (/* binding */ ProxyHandlers),\n/* harmony export */   ReactForwardRefSymbol: () => (/* binding */ ReactForwardRefSymbol),\n/* harmony export */   ReactMemoSymbol: () => (/* binding */ ReactMemoSymbol),\n/* harmony export */   track: () => (/* binding */ track)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useStateTracking.mjs */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useStateTracking.mjs\");\n\n\nconst ProxyHandlers = {\n  /**\n   * This is a function call trap for functional components. When this is called, we know it means\n   * React did run 'Component()', that means we can use any hooks here to setup our effect and\n   * store.\n   *\n   * With the native Proxy, all other calls such as access/setting to/of properties will be\n   * forwarded to the target Component, so we don't need to copy the Component's own or inherited\n   * properties.\n   *\n   * @see https://github.com/facebook/react/blob/2d80a0cd690bb5650b6c8a6c079a87b5dc42bd15/packages/react-reconciler/src/ReactFiberHooks.old.js#L460\n   */\n  apply(Component, thisArg, argumentsList) {\n    return (0,_useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      Component.displayName ?? Component.name ?? \"tracked(???)\",\n      () => Component.apply(thisArg, argumentsList)\n    );\n  }\n};\nconst ReactMemoSymbol = Symbol.for(\"react.memo\");\nconst ReactForwardRefSymbol = Symbol.for(\"react.forward_ref\");\nfunction track(baseComponent) {\n  let compare = null;\n  const $$typeof = baseComponent[\"$$typeof\"];\n  if ($$typeof === ReactMemoSymbol) {\n    baseComponent = baseComponent.type;\n    compare = baseComponent.compare;\n  }\n  if ($$typeof === ReactForwardRefSymbol) {\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(new Proxy(baseComponent.render, ProxyHandlers)));\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(new Proxy(baseComponent, ProxyHandlers), compare);\n}\n\n//# sourceMappingURL=track.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdHJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QztBQUNpQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdUVBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQUksQ0FBQyxpREFBVTtBQUMxQjtBQUNBLFNBQVMsMkNBQUk7QUFDYjtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlLXJlYWN0L2Rpc3QtZXNtL2xpYi90cmFjay5tanM/N2I0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3J3YXJkUmVmLCBtZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdGF0ZVRyYWNraW5nIH0gZnJvbSBcIi4vdXNlU3RhdGVUcmFja2luZy5tanNcIjtcbmNvbnN0IFByb3h5SGFuZGxlcnMgPSB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIGEgZnVuY3Rpb24gY2FsbCB0cmFwIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuIFdoZW4gdGhpcyBpcyBjYWxsZWQsIHdlIGtub3cgaXQgbWVhbnNcbiAgICogUmVhY3QgZGlkIHJ1biAnQ29tcG9uZW50KCknLCB0aGF0IG1lYW5zIHdlIGNhbiB1c2UgYW55IGhvb2tzIGhlcmUgdG8gc2V0dXAgb3VyIGVmZmVjdCBhbmRcbiAgICogc3RvcmUuXG4gICAqXG4gICAqIFdpdGggdGhlIG5hdGl2ZSBQcm94eSwgYWxsIG90aGVyIGNhbGxzIHN1Y2ggYXMgYWNjZXNzL3NldHRpbmcgdG8vb2YgcHJvcGVydGllcyB3aWxsIGJlXG4gICAqIGZvcndhcmRlZCB0byB0aGUgdGFyZ2V0IENvbXBvbmVudCwgc28gd2UgZG9uJ3QgbmVlZCB0byBjb3B5IHRoZSBDb21wb25lbnQncyBvd24gb3IgaW5oZXJpdGVkXG4gICAqIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvMmQ4MGEwY2Q2OTBiYjU2NTBiNmM4YTZjMDc5YTg3YjVkYzQyYmQxNS9wYWNrYWdlcy9yZWFjdC1yZWNvbmNpbGVyL3NyYy9SZWFjdEZpYmVySG9va3Mub2xkLmpzI0w0NjBcbiAgICovXG4gIGFwcGx5KENvbXBvbmVudCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkge1xuICAgIHJldHVybiB1c2VTdGF0ZVRyYWNraW5nKFxuICAgICAgQ29tcG9uZW50LmRpc3BsYXlOYW1lID8/IENvbXBvbmVudC5uYW1lID8/IFwidHJhY2tlZCg/Pz8pXCIsXG4gICAgICAoKSA9PiBDb21wb25lbnQuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzTGlzdClcbiAgICApO1xuICB9XG59O1xuY29uc3QgUmVhY3RNZW1vU3ltYm9sID0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9cIik7XG5jb25zdCBSZWFjdEZvcndhcmRSZWZTeW1ib2wgPSBTeW1ib2wuZm9yKFwicmVhY3QuZm9yd2FyZF9yZWZcIik7XG5mdW5jdGlvbiB0cmFjayhiYXNlQ29tcG9uZW50KSB7XG4gIGxldCBjb21wYXJlID0gbnVsbDtcbiAgY29uc3QgJCR0eXBlb2YgPSBiYXNlQ29tcG9uZW50W1wiJCR0eXBlb2ZcIl07XG4gIGlmICgkJHR5cGVvZiA9PT0gUmVhY3RNZW1vU3ltYm9sKSB7XG4gICAgYmFzZUNvbXBvbmVudCA9IGJhc2VDb21wb25lbnQudHlwZTtcbiAgICBjb21wYXJlID0gYmFzZUNvbXBvbmVudC5jb21wYXJlO1xuICB9XG4gIGlmICgkJHR5cGVvZiA9PT0gUmVhY3RGb3J3YXJkUmVmU3ltYm9sKSB7XG4gICAgcmV0dXJuIG1lbW8oZm9yd2FyZFJlZihuZXcgUHJveHkoYmFzZUNvbXBvbmVudC5yZW5kZXIsIFByb3h5SGFuZGxlcnMpKSk7XG4gIH1cbiAgcmV0dXJuIG1lbW8obmV3IFByb3h5KGJhc2VDb21wb25lbnQsIFByb3h5SGFuZGxlcnMpLCBjb21wYXJlKTtcbn1cbmV4cG9ydCB7XG4gIFByb3h5SGFuZGxlcnMsXG4gIFJlYWN0Rm9yd2FyZFJlZlN5bWJvbCxcbiAgUmVhY3RNZW1vU3ltYm9sLFxuICB0cmFja1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNrLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/track.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useAtom.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useAtom.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAtom: () => (/* binding */ useAtom)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useAtom(name, valueOrInitialiser, options) {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => {\n    const initialValue = typeof valueOrInitialiser === \"function\" ? valueOrInitialiser() : valueOrInitialiser;\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(`useAtom(${name})`, initialValue, options);\n  })[0];\n}\n\n//# sourceMappingURL=useAtom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlQXRvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0o7QUFDakM7QUFDQSxTQUFTLCtDQUFRO0FBQ2pCO0FBQ0EsV0FBVyxtREFBSSxZQUFZLEtBQUs7QUFDaEMsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUtcmVhY3QvZGlzdC1lc20vbGliL3VzZUF0b20ubWpzP2RjZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlQXRvbShuYW1lLCB2YWx1ZU9ySW5pdGlhbGlzZXIsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHVzZVN0YXRlKCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsVmFsdWUgPSB0eXBlb2YgdmFsdWVPckluaXRpYWxpc2VyID09PSBcImZ1bmN0aW9uXCIgPyB2YWx1ZU9ySW5pdGlhbGlzZXIoKSA6IHZhbHVlT3JJbml0aWFsaXNlcjtcbiAgICByZXR1cm4gYXRvbShgdXNlQXRvbSgke25hbWV9KWAsIGluaXRpYWxWYWx1ZSwgb3B0aW9ucyk7XG4gIH0pWzBdO1xufVxuZXhwb3J0IHtcbiAgdXNlQXRvbVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUF0b20ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useAtom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useComputed.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useComputed.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useComputed: () => (/* binding */ useComputed)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useComputed() {\n  const name = arguments[0];\n  const compute = arguments[1];\n  const opts = arguments.length === 3 ? void 0 : arguments[2];\n  const deps = arguments.length === 3 ? arguments[2] : arguments[3];\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(`useComputed(${name})`, compute, opts), deps);\n}\n\n//# sourceMappingURL=useComputed.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlQ29tcHV0ZWQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUNUO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFPLE9BQU8sdURBQVEsZ0JBQWdCLEtBQUs7QUFDcEQ7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlQ29tcHV0ZWQubWpzP2U1YTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlQ29tcHV0ZWQoKSB7XG4gIGNvbnN0IG5hbWUgPSBhcmd1bWVudHNbMF07XG4gIGNvbnN0IGNvbXB1dGUgPSBhcmd1bWVudHNbMV07XG4gIGNvbnN0IG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAzID8gdm9pZCAwIDogYXJndW1lbnRzWzJdO1xuICBjb25zdCBkZXBzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMyA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1szXTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gY29tcHV0ZWQoYHVzZUNvbXB1dGVkKCR7bmFtZX0pYCwgY29tcHV0ZSwgb3B0cyksIGRlcHMpO1xufVxuZXhwb3J0IHtcbiAgdXNlQ29tcHV0ZWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VDb21wdXRlZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useComputed.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useQuickReactor.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useQuickReactor.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQuickReactor: () => (/* binding */ useQuickReactor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useQuickReactor(name, reactFn, deps = _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY) {\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const scheduler = new _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler(name, reactFn);\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n    };\n  }, deps);\n}\n\n//# sourceMappingURL=useQuickReactor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlUXVpY2tSZWFjdG9yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7QUFDM0I7QUFDbEMsK0NBQStDLHNEQUFXO0FBQzFELEVBQUUsZ0RBQVM7QUFDWCwwQkFBMEIsMERBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlLXJlYWN0L2Rpc3QtZXNtL2xpYi91c2VRdWlja1JlYWN0b3IubWpzPzYzMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRU1QVFlfQVJSQVksIEVmZmVjdFNjaGVkdWxlciB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVF1aWNrUmVhY3RvcihuYW1lLCByZWFjdEZuLCBkZXBzID0gRU1QVFlfQVJSQVkpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzY2hlZHVsZXIgPSBuZXcgRWZmZWN0U2NoZWR1bGVyKG5hbWUsIHJlYWN0Rm4pO1xuICAgIHNjaGVkdWxlci5hdHRhY2goKTtcbiAgICBzY2hlZHVsZXIuZXhlY3V0ZSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzY2hlZHVsZXIuZGV0YWNoKCk7XG4gICAgfTtcbiAgfSwgZGVwcyk7XG59XG5leHBvcnQge1xuICB1c2VRdWlja1JlYWN0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VRdWlja1JlYWN0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useQuickReactor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useReactor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useReactor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useReactor: () => (/* binding */ useReactor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useReactor(name, reactFn, deps = []) {\n  const raf = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(-1);\n  const scheduler = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n    () => new _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler(name, reactFn, {\n      scheduleEffect: (cb) => {\n        const rafId = requestAnimationFrame(cb);\n        raf.current = rafId;\n        return rafId;\n      }\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n      cancelAnimationFrame(raf.current);\n    };\n  }, [scheduler]);\n}\n\n//# sourceMappingURL=useReactor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlUmVhY3Rvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEO0FBQ0c7QUFDbkQ7QUFDQSxjQUFjLDZDQUFNO0FBQ3BCLG9CQUFvQiw4Q0FBTztBQUMzQixjQUFjLDBEQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlLXJlYWN0L2Rpc3QtZXNtL2xpYi91c2VSZWFjdG9yLm1qcz9mYjhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVmZmVjdFNjaGVkdWxlciB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlUmVhY3RvcihuYW1lLCByZWFjdEZuLCBkZXBzID0gW10pIHtcbiAgY29uc3QgcmFmID0gdXNlUmVmKC0xKTtcbiAgY29uc3Qgc2NoZWR1bGVyID0gdXNlTWVtbyhcbiAgICAoKSA9PiBuZXcgRWZmZWN0U2NoZWR1bGVyKG5hbWUsIHJlYWN0Rm4sIHtcbiAgICAgIHNjaGVkdWxlRWZmZWN0OiAoY2IpID0+IHtcbiAgICAgICAgY29uc3QgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xuICAgICAgICByYWYuY3VycmVudCA9IHJhZklkO1xuICAgICAgICByZXR1cm4gcmFmSWQ7XG4gICAgICB9XG4gICAgfSksXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIGRlcHNcbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY2hlZHVsZXIuYXR0YWNoKCk7XG4gICAgc2NoZWR1bGVyLmV4ZWN1dGUoKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2NoZWR1bGVyLmRldGFjaCgpO1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtzY2hlZHVsZXJdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZVJlYWN0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VSZWFjdG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useReactor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useStateTracking.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useStateTracking.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStateTracking: () => (/* binding */ useStateTracking)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useStateTracking(name, render) {\n  const renderRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(render);\n  renderRef.current = render;\n  const [scheduler, subscribe, getSnapshot] = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => {\n    let scheduleUpdate = null;\n    const subscribe2 = (cb) => {\n      scheduleUpdate = cb;\n      return () => {\n        scheduleUpdate = null;\n      };\n    };\n    const scheduler2 = new _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler(\n      `useStateTracking(${name})`,\n      // this is what `scheduler.execute()` will call\n      () => renderRef.current?.(),\n      // this is what will be invoked when @tldraw/state detects a change in an upstream reactive value\n      {\n        scheduleEffect() {\n          scheduleUpdate?.();\n        }\n      }\n    );\n    const getSnapshot2 = () => scheduler2.scheduleCount;\n    return [scheduler2, subscribe2, getSnapshot2];\n  }, [name]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    scheduler.attach();\n    scheduler.maybeScheduleEffect();\n    return () => {\n      scheduler.detach();\n    };\n  }, [scheduler]);\n  return scheduler.execute();\n}\n\n//# sourceMappingURL=useStateTracking.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlU3RhdGVUcmFja2luZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEO0FBQ3RCO0FBQzFCO0FBQ0Esb0JBQW9CLHlDQUFZO0FBQ2hDO0FBQ0EsOENBQThDLDBDQUFhO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDBEQUFlO0FBQzFDLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSx1REFBMEI7QUFDNUIsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlU3RhdGVUcmFja2luZy5tanM/NDVlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZmZlY3RTY2hlZHVsZXIgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU3RhdGVUcmFja2luZyhuYW1lLCByZW5kZXIpIHtcbiAgY29uc3QgcmVuZGVyUmVmID0gUmVhY3QudXNlUmVmKHJlbmRlcik7XG4gIHJlbmRlclJlZi5jdXJyZW50ID0gcmVuZGVyO1xuICBjb25zdCBbc2NoZWR1bGVyLCBzdWJzY3JpYmUsIGdldFNuYXBzaG90XSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGxldCBzY2hlZHVsZVVwZGF0ZSA9IG51bGw7XG4gICAgY29uc3Qgc3Vic2NyaWJlMiA9IChjYikgPT4ge1xuICAgICAgc2NoZWR1bGVVcGRhdGUgPSBjYjtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHNjaGVkdWxlVXBkYXRlID0gbnVsbDtcbiAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBzY2hlZHVsZXIyID0gbmV3IEVmZmVjdFNjaGVkdWxlcihcbiAgICAgIGB1c2VTdGF0ZVRyYWNraW5nKCR7bmFtZX0pYCxcbiAgICAgIC8vIHRoaXMgaXMgd2hhdCBgc2NoZWR1bGVyLmV4ZWN1dGUoKWAgd2lsbCBjYWxsXG4gICAgICAoKSA9PiByZW5kZXJSZWYuY3VycmVudD8uKCksXG4gICAgICAvLyB0aGlzIGlzIHdoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gQHRsZHJhdy9zdGF0ZSBkZXRlY3RzIGEgY2hhbmdlIGluIGFuIHVwc3RyZWFtIHJlYWN0aXZlIHZhbHVlXG4gICAgICB7XG4gICAgICAgIHNjaGVkdWxlRWZmZWN0KCkge1xuICAgICAgICAgIHNjaGVkdWxlVXBkYXRlPy4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgZ2V0U25hcHNob3QyID0gKCkgPT4gc2NoZWR1bGVyMi5zY2hlZHVsZUNvdW50O1xuICAgIHJldHVybiBbc2NoZWR1bGVyMiwgc3Vic2NyaWJlMiwgZ2V0U25hcHNob3QyXTtcbiAgfSwgW25hbWVdKTtcbiAgUmVhY3QudXNlU3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U25hcHNob3QpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjaGVkdWxlci5hdHRhY2goKTtcbiAgICBzY2hlZHVsZXIubWF5YmVTY2hlZHVsZUVmZmVjdCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzY2hlZHVsZXIuZGV0YWNoKCk7XG4gICAgfTtcbiAgfSwgW3NjaGVkdWxlcl0pO1xuICByZXR1cm4gc2NoZWR1bGVyLmV4ZWN1dGUoKTtcbn1cbmV4cG9ydCB7XG4gIHVzZVN0YXRlVHJhY2tpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTdGF0ZVRyYWNraW5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useStateTracking.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useValue.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/state-react/dist-esm/lib/useValue.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useValue: () => (/* binding */ useValue)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useValue() {\n  const args = arguments;\n  const deps = args.length === 3 ? args[2] : [args[0]];\n  const name = args.length === 3 ? args[0] : `useValue(${args[0].name})`;\n  const isInRender = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n  isInRender.current = true;\n  const $val = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n    if (args.length === 1) {\n      return args[0];\n    }\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name, () => {\n      if (isInRender.current) {\n        return args[1]();\n      } else {\n        try {\n          return args[1]();\n        } catch {\n          return {};\n        }\n      }\n    });\n  }, deps);\n  try {\n    const { subscribe, getSnapshot } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n      return {\n        subscribe: (listen) => {\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(`useValue(${name})`, () => {\n            $val.get();\n            listen();\n          });\n        },\n        getSnapshot: () => $val.get()\n      };\n    }, [$val]);\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useSyncExternalStore)(subscribe, getSnapshot, getSnapshot);\n  } finally {\n    isInRender.current = false;\n  }\n}\n\n//# sourceMappingURL=useValue.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS1yZWFjdC9kaXN0LWVzbS9saWIvdXNlVmFsdWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNjO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxhQUFhO0FBQ3RFLHFCQUFxQiw2Q0FBTTtBQUMzQjtBQUNBLGVBQWUsOENBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLFlBQVkseUJBQXlCLEVBQUUsOENBQU87QUFDOUM7QUFDQTtBQUNBLGlCQUFpQixvREFBSyxhQUFhLEtBQUs7QUFDeEM7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTCxXQUFXLDJEQUFvQjtBQUMvQixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUtcmVhY3QvZGlzdC1lc20vbGliL3VzZVZhbHVlLm1qcz82ZWEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXB1dGVkLCByZWFjdCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VNZW1vLCB1c2VSZWYsIHVzZVN5bmNFeHRlcm5hbFN0b3JlIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VWYWx1ZSgpIHtcbiAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcbiAgY29uc3QgZGVwcyA9IGFyZ3MubGVuZ3RoID09PSAzID8gYXJnc1syXSA6IFthcmdzWzBdXTtcbiAgY29uc3QgbmFtZSA9IGFyZ3MubGVuZ3RoID09PSAzID8gYXJnc1swXSA6IGB1c2VWYWx1ZSgke2FyZ3NbMF0ubmFtZX0pYDtcbiAgY29uc3QgaXNJblJlbmRlciA9IHVzZVJlZih0cnVlKTtcbiAgaXNJblJlbmRlci5jdXJyZW50ID0gdHJ1ZTtcbiAgY29uc3QgJHZhbCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGFyZ3NbMF07XG4gICAgfVxuICAgIHJldHVybiBjb21wdXRlZChuYW1lLCAoKSA9PiB7XG4gICAgICBpZiAoaXNJblJlbmRlci5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybiBhcmdzWzFdKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhcmdzWzFdKCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LCBkZXBzKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHN1YnNjcmliZSwgZ2V0U25hcHNob3QgfSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3Vic2NyaWJlOiAobGlzdGVuKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlYWN0KGB1c2VWYWx1ZSgke25hbWV9KWAsICgpID0+IHtcbiAgICAgICAgICAgICR2YWwuZ2V0KCk7XG4gICAgICAgICAgICBsaXN0ZW4oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U25hcHNob3Q6ICgpID0+ICR2YWwuZ2V0KClcbiAgICAgIH07XG4gICAgfSwgWyR2YWxdKTtcbiAgICByZXR1cm4gdXNlU3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U25hcHNob3QpO1xuICB9IGZpbmFsbHkge1xuICAgIGlzSW5SZW5kZXIuY3VycmVudCA9IGZhbHNlO1xuICB9XG59XG5leHBvcnQge1xuICB1c2VWYWx1ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVZhbHVlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state-react/dist-esm/lib/useValue.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArraySet: () => (/* reexport safe */ _lib_ArraySet_mjs__WEBPACK_IMPORTED_MODULE_2__.ArraySet),\n/* harmony export */   EMPTY_ARRAY: () => (/* reexport safe */ _lib_helpers_mjs__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARRAY),\n/* harmony export */   EffectScheduler: () => (/* reexport safe */ _lib_EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_5__.EffectScheduler),\n/* harmony export */   RESET_VALUE: () => (/* reexport safe */ _lib_types_mjs__WEBPACK_IMPORTED_MODULE_9__.RESET_VALUE),\n/* harmony export */   UNINITIALIZED: () => (/* reexport safe */ _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__.UNINITIALIZED),\n/* harmony export */   atom: () => (/* reexport safe */ _lib_Atom_mjs__WEBPACK_IMPORTED_MODULE_3__.atom),\n/* harmony export */   computed: () => (/* reexport safe */ _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__.computed),\n/* harmony export */   getComputedInstance: () => (/* reexport safe */ _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__.getComputedInstance),\n/* harmony export */   isAtom: () => (/* reexport safe */ _lib_Atom_mjs__WEBPACK_IMPORTED_MODULE_3__.isAtom),\n/* harmony export */   isSignal: () => (/* reexport safe */ _lib_isSignal_mjs__WEBPACK_IMPORTED_MODULE_7__.isSignal),\n/* harmony export */   isUninitialized: () => (/* reexport safe */ _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__.isUninitialized),\n/* harmony export */   react: () => (/* reexport safe */ _lib_EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_5__.react),\n/* harmony export */   reactor: () => (/* reexport safe */ _lib_EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_5__.reactor),\n/* harmony export */   transact: () => (/* reexport safe */ _lib_transactions_mjs__WEBPACK_IMPORTED_MODULE_8__.transact),\n/* harmony export */   transaction: () => (/* reexport safe */ _lib_transactions_mjs__WEBPACK_IMPORTED_MODULE_8__.transaction),\n/* harmony export */   unsafe__withoutCapture: () => (/* reexport safe */ _lib_capture_mjs__WEBPACK_IMPORTED_MODULE_6__.unsafe__withoutCapture),\n/* harmony export */   whyAmIRunning: () => (/* reexport safe */ _lib_capture_mjs__WEBPACK_IMPORTED_MODULE_6__.whyAmIRunning),\n/* harmony export */   withDiff: () => (/* reexport safe */ _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__.withDiff)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _lib_helpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n/* harmony import */ var _lib_ArraySet_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs\");\n/* harmony import */ var _lib_Atom_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Atom.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Atom.mjs\");\n/* harmony import */ var _lib_Computed_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/Computed.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Computed.mjs\");\n/* harmony import */ var _lib_EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/EffectScheduler.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/EffectScheduler.mjs\");\n/* harmony import */ var _lib_capture_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs\");\n/* harmony import */ var _lib_isSignal_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/isSignal.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/isSignal.mjs\");\n/* harmony import */ var _lib_transactions_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs\");\n/* harmony import */ var _lib_types_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst currentApiVersion = 1;\nconst actualApiVersion = (0,_lib_helpers_mjs__WEBPACK_IMPORTED_MODULE_1__.singleton)(\"apiVersion\", () => currentApiVersion);\nif (actualApiVersion !== currentApiVersion) {\n  throw new Error(\n    `You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.`\n  );\n}\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/state\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNmO0FBQ0E7QUFDQTtBQU9sQjtBQUNnRDtBQUNGO0FBQzFCO0FBQ0Y7QUFDaUI7QUFDakI7QUFDOUM7QUFDQSx5QkFBeUIsMkRBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQW9CRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9pbmRleC5tanM/M2U2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHNpbmdsZXRvbiB9IGZyb20gXCIuL2xpYi9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgQXJyYXlTZXQgfSBmcm9tIFwiLi9saWIvQXJyYXlTZXQubWpzXCI7XG5pbXBvcnQgeyBhdG9tLCBpc0F0b20gfSBmcm9tIFwiLi9saWIvQXRvbS5tanNcIjtcbmltcG9ydCB7XG4gIFVOSU5JVElBTElaRUQsXG4gIGNvbXB1dGVkLFxuICBnZXRDb21wdXRlZEluc3RhbmNlLFxuICBpc1VuaW5pdGlhbGl6ZWQsXG4gIHdpdGhEaWZmXG59IGZyb20gXCIuL2xpYi9Db21wdXRlZC5tanNcIjtcbmltcG9ydCB7IEVmZmVjdFNjaGVkdWxlciwgcmVhY3QsIHJlYWN0b3IgfSBmcm9tIFwiLi9saWIvRWZmZWN0U2NoZWR1bGVyLm1qc1wiO1xuaW1wb3J0IHsgdW5zYWZlX193aXRob3V0Q2FwdHVyZSwgd2h5QW1JUnVubmluZyB9IGZyb20gXCIuL2xpYi9jYXB0dXJlLm1qc1wiO1xuaW1wb3J0IHsgRU1QVFlfQVJSQVkgfSBmcm9tIFwiLi9saWIvaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGlzU2lnbmFsIH0gZnJvbSBcIi4vbGliL2lzU2lnbmFsLm1qc1wiO1xuaW1wb3J0IHsgdHJhbnNhY3QsIHRyYW5zYWN0aW9uIH0gZnJvbSBcIi4vbGliL3RyYW5zYWN0aW9ucy5tanNcIjtcbmltcG9ydCB7IFJFU0VUX1ZBTFVFIH0gZnJvbSBcIi4vbGliL3R5cGVzLm1qc1wiO1xuY29uc3QgY3VycmVudEFwaVZlcnNpb24gPSAxO1xuY29uc3QgYWN0dWFsQXBpVmVyc2lvbiA9IHNpbmdsZXRvbihcImFwaVZlcnNpb25cIiwgKCkgPT4gY3VycmVudEFwaVZlcnNpb24pO1xuaWYgKGFjdHVhbEFwaVZlcnNpb24gIT09IGN1cnJlbnRBcGlWZXJzaW9uKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgWW91IGhhdmUgbXVsdGlwbGUgaW5jb21wYXRpYmxlIHZlcnNpb25zIG9mIEB0bGRyYXcvc3RhdGUgaW4geW91ciBhcHAuIFBsZWFzZSBkZWR1cGxpY2F0ZSB0aGUgcGFja2FnZS5gXG4gICk7XG59XG5yZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKFxuICBcIkB0bGRyYXcvc3RhdGVcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgQXJyYXlTZXQsXG4gIEVNUFRZX0FSUkFZLFxuICBFZmZlY3RTY2hlZHVsZXIsXG4gIFJFU0VUX1ZBTFVFLFxuICBVTklOSVRJQUxJWkVELFxuICBhdG9tLFxuICBjb21wdXRlZCxcbiAgZ2V0Q29tcHV0ZWRJbnN0YW5jZSxcbiAgaXNBdG9tLFxuICBpc1NpZ25hbCxcbiAgaXNVbmluaXRpYWxpemVkLFxuICByZWFjdCxcbiAgcmVhY3RvcixcbiAgdHJhbnNhY3QsXG4gIHRyYW5zYWN0aW9uLFxuICB1bnNhZmVfX3dpdGhvdXRDYXB0dXJlLFxuICB3aHlBbUlSdW5uaW5nLFxuICB3aXRoRGlmZlxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ARRAY_SIZE_THRESHOLD: () => (/* binding */ ARRAY_SIZE_THRESHOLD),\n/* harmony export */   ArraySet: () => (/* binding */ ArraySet)\n/* harmony export */ });\nconst ARRAY_SIZE_THRESHOLD = 8;\nclass ArraySet {\n  arraySize = 0;\n  array = Array(ARRAY_SIZE_THRESHOLD);\n  set = null;\n  /**\n   * Get whether this ArraySet has any elements.\n   *\n   * @returns True if this ArraySet has any elements, false otherwise.\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isEmpty() {\n    if (this.array) {\n      return this.arraySize === 0;\n    }\n    if (this.set) {\n      return this.set.size === 0;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Add an item to the ArraySet if it is not already present.\n   *\n   * @param elem - The element to add.\n   */\n  add(elem) {\n    if (this.array) {\n      const idx = this.array.indexOf(elem);\n      if (idx !== -1) {\n        return false;\n      }\n      if (this.arraySize < ARRAY_SIZE_THRESHOLD) {\n        this.array[this.arraySize] = elem;\n        this.arraySize++;\n        return true;\n      } else {\n        this.set = new Set(this.array);\n        this.array = null;\n        this.set.add(elem);\n        return true;\n      }\n    }\n    if (this.set) {\n      if (this.set.has(elem)) {\n        return false;\n      }\n      this.set.add(elem);\n      return true;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Remove an item from the ArraySet if it is present.\n   *\n   * @param elem - The element to remove\n   */\n  remove(elem) {\n    if (this.array) {\n      const idx = this.array.indexOf(elem);\n      if (idx === -1) {\n        return false;\n      }\n      this.array[idx] = void 0;\n      this.arraySize--;\n      if (idx !== this.arraySize) {\n        this.array[idx] = this.array[this.arraySize];\n        this.array[this.arraySize] = void 0;\n      }\n      return true;\n    }\n    if (this.set) {\n      if (!this.set.has(elem)) {\n        return false;\n      }\n      this.set.delete(elem);\n      return true;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Run a callback for each element in the ArraySet.\n   *\n   * @param visitor - The callback to run for each element.\n   */\n  visit(visitor) {\n    if (this.array) {\n      for (let i = 0; i < this.arraySize; i++) {\n        const elem = this.array[i];\n        if (typeof elem !== \"undefined\") {\n          visitor(elem);\n        }\n      }\n      return;\n    }\n    if (this.set) {\n      this.set.forEach(visitor);\n      return;\n    }\n    throw new Error(\"no set or array\");\n  }\n  has(elem) {\n    if (this.array) {\n      return this.array.indexOf(elem) !== -1;\n    } else {\n      return this.set.has(elem);\n    }\n  }\n  clear() {\n    if (this.set) {\n      this.set.clear();\n    } else {\n      this.arraySize = 0;\n      this.array = [];\n    }\n  }\n  size() {\n    if (this.set) {\n      return this.set.size;\n    } else {\n      return this.arraySize;\n    }\n  }\n}\n\n//# sourceMappingURL=ArraySet.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvQXJyYXlTZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvQXJyYXlTZXQubWpzP2UwOTAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQVJSQVlfU0laRV9USFJFU0hPTEQgPSA4O1xuY2xhc3MgQXJyYXlTZXQge1xuICBhcnJheVNpemUgPSAwO1xuICBhcnJheSA9IEFycmF5KEFSUkFZX1NJWkVfVEhSRVNIT0xEKTtcbiAgc2V0ID0gbnVsbDtcbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoaXMgQXJyYXlTZXQgaGFzIGFueSBlbGVtZW50cy5cbiAgICpcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGlzIEFycmF5U2V0IGhhcyBhbnkgZWxlbWVudHMsIGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgaXNFbXB0eSgpIHtcbiAgICBpZiAodGhpcy5hcnJheSkge1xuICAgICAgcmV0dXJuIHRoaXMuYXJyYXlTaXplID09PSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldC5zaXplID09PSAwO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBzZXQgb3IgYXJyYXlcIik7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhbiBpdGVtIHRvIHRoZSBBcnJheVNldCBpZiBpdCBpcyBub3QgYWxyZWFkeSBwcmVzZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbSAtIFRoZSBlbGVtZW50IHRvIGFkZC5cbiAgICovXG4gIGFkZChlbGVtKSB7XG4gICAgaWYgKHRoaXMuYXJyYXkpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuYXJyYXkuaW5kZXhPZihlbGVtKTtcbiAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFycmF5U2l6ZSA8IEFSUkFZX1NJWkVfVEhSRVNIT0xEKSB7XG4gICAgICAgIHRoaXMuYXJyYXlbdGhpcy5hcnJheVNpemVdID0gZWxlbTtcbiAgICAgICAgdGhpcy5hcnJheVNpemUrKztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldCA9IG5ldyBTZXQodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBudWxsO1xuICAgICAgICB0aGlzLnNldC5hZGQoZWxlbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIGlmICh0aGlzLnNldC5oYXMoZWxlbSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXQuYWRkKGVsZW0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIm5vIHNldCBvciBhcnJheVwiKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgQXJyYXlTZXQgaWYgaXQgaXMgcHJlc2VudC5cbiAgICpcbiAgICogQHBhcmFtIGVsZW0gLSBUaGUgZWxlbWVudCB0byByZW1vdmVcbiAgICovXG4gIHJlbW92ZShlbGVtKSB7XG4gICAgaWYgKHRoaXMuYXJyYXkpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuYXJyYXkuaW5kZXhPZihlbGVtKTtcbiAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYXJyYXlbaWR4XSA9IHZvaWQgMDtcbiAgICAgIHRoaXMuYXJyYXlTaXplLS07XG4gICAgICBpZiAoaWR4ICE9PSB0aGlzLmFycmF5U2l6ZSkge1xuICAgICAgICB0aGlzLmFycmF5W2lkeF0gPSB0aGlzLmFycmF5W3RoaXMuYXJyYXlTaXplXTtcbiAgICAgICAgdGhpcy5hcnJheVt0aGlzLmFycmF5U2l6ZV0gPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0KSB7XG4gICAgICBpZiAoIXRoaXMuc2V0LmhhcyhlbGVtKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLnNldC5kZWxldGUoZWxlbSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm8gc2V0IG9yIGFycmF5XCIpO1xuICB9XG4gIC8qKlxuICAgKiBSdW4gYSBjYWxsYmFjayBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBBcnJheVNldC5cbiAgICpcbiAgICogQHBhcmFtIHZpc2l0b3IgLSBUaGUgY2FsbGJhY2sgdG8gcnVuIGZvciBlYWNoIGVsZW1lbnQuXG4gICAqL1xuICB2aXNpdCh2aXNpdG9yKSB7XG4gICAgaWYgKHRoaXMuYXJyYXkpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcnJheVNpemU7IGkrKykge1xuICAgICAgICBjb25zdCBlbGVtID0gdGhpcy5hcnJheVtpXTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdmlzaXRvcihlbGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIHRoaXMuc2V0LmZvckVhY2godmlzaXRvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIm5vIHNldCBvciBhcnJheVwiKTtcbiAgfVxuICBoYXMoZWxlbSkge1xuICAgIGlmICh0aGlzLmFycmF5KSB7XG4gICAgICByZXR1cm4gdGhpcy5hcnJheS5pbmRleE9mKGVsZW0pICE9PSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0LmhhcyhlbGVtKTtcbiAgICB9XG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgaWYgKHRoaXMuc2V0KSB7XG4gICAgICB0aGlzLnNldC5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFycmF5U2l6ZSA9IDA7XG4gICAgICB0aGlzLmFycmF5ID0gW107XG4gICAgfVxuICB9XG4gIHNpemUoKSB7XG4gICAgaWYgKHRoaXMuc2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQuc2l6ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuYXJyYXlTaXplO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHtcbiAgQVJSQVlfU0laRV9USFJFU0hPTEQsXG4gIEFycmF5U2V0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJyYXlTZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Atom.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/Atom.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _Atom: () => (/* binding */ _Atom),\n/* harmony export */   atom: () => (/* binding */ atom),\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs\");\n/* harmony import */ var _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HistoryBuffer.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/HistoryBuffer.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs\");\n\n\n\n\n\n\nclass __Atom__ {\n  constructor(name, current, options) {\n    this.name = name;\n    this.current = current;\n    this.isEqual = options?.isEqual ?? null;\n    if (!options) return;\n    if (options.historyLength) {\n      this.historyBuffer = new _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__.HistoryBuffer(options.historyLength);\n    }\n    this.computeDiff = options.computeDiff;\n  }\n  isEqual;\n  computeDiff;\n  lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n  children = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  historyBuffer;\n  __unsafe__getWithoutCapture(_ignoreErrors) {\n    return this.current;\n  }\n  get() {\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    return this.current;\n  }\n  set(value, diff) {\n    if (this.isEqual?.(this.current, value) ?? (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.equals)(this.current, value)) {\n      return this.current;\n    }\n    (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.advanceGlobalEpoch)();\n    if (this.historyBuffer) {\n      this.historyBuffer.pushEntry(\n        this.lastChangedEpoch,\n        (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)(),\n        diff ?? this.computeDiff?.(this.current, value, this.lastChangedEpoch, (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)()) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_5__.RESET_VALUE\n      );\n    }\n    this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n    const oldValue = this.current;\n    this.current = value;\n    (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.atomDidChange)(this, oldValue);\n    return value;\n  }\n  update(updater) {\n    return this.set(updater(this.current));\n  }\n  getDiffSince(epoch) {\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    if (epoch >= this.lastChangedEpoch) {\n      return _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY_ARRAY;\n    }\n    return this.historyBuffer?.getChangesSince(epoch) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_5__.RESET_VALUE;\n  }\n}\nconst _Atom = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.singleton)(\"Atom\", () => __Atom__);\nfunction atom(name, initialValue, options) {\n  return new _Atom(name, initialValue, options);\n}\nfunction isAtom(value) {\n  return value instanceof _Atom;\n}\n\n//# sourceMappingURL=Atom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvQXRvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ1U7QUFDRDtBQUNZO0FBQ3dCO0FBQzdDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZEQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQWM7QUFDbkMsaUJBQWlCLG1EQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdFQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0RBQU07QUFDckQ7QUFDQTtBQUNBLElBQUkscUVBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWM7QUFDdEIsK0VBQStFLGlFQUFjLE9BQU8sbURBQVc7QUFDL0c7QUFDQTtBQUNBLDRCQUE0QixpRUFBYztBQUMxQztBQUNBO0FBQ0EsSUFBSSxnRUFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdFQUFrQjtBQUN0QjtBQUNBLGFBQWEscURBQVc7QUFDeEI7QUFDQSx5REFBeUQsbURBQVc7QUFDcEU7QUFDQTtBQUNBLGNBQWMsdURBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL0F0b20ubWpzP2ZiMWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXJyYXlTZXQgfSBmcm9tIFwiLi9BcnJheVNldC5tanNcIjtcbmltcG9ydCB7IEhpc3RvcnlCdWZmZXIgfSBmcm9tIFwiLi9IaXN0b3J5QnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgbWF5YmVDYXB0dXJlUGFyZW50IH0gZnJvbSBcIi4vY2FwdHVyZS5tanNcIjtcbmltcG9ydCB7IEVNUFRZX0FSUkFZLCBlcXVhbHMsIHNpbmdsZXRvbiB9IGZyb20gXCIuL2hlbHBlcnMubWpzXCI7XG5pbXBvcnQgeyBhZHZhbmNlR2xvYmFsRXBvY2gsIGF0b21EaWRDaGFuZ2UsIGdldEdsb2JhbEVwb2NoIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb25zLm1qc1wiO1xuaW1wb3J0IHsgUkVTRVRfVkFMVUUgfSBmcm9tIFwiLi90eXBlcy5tanNcIjtcbmNsYXNzIF9fQXRvbV9fIHtcbiAgY29uc3RydWN0b3IobmFtZSwgY3VycmVudCwgb3B0aW9ucykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5jdXJyZW50ID0gY3VycmVudDtcbiAgICB0aGlzLmlzRXF1YWwgPSBvcHRpb25zPy5pc0VxdWFsID8/IG51bGw7XG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm47XG4gICAgaWYgKG9wdGlvbnMuaGlzdG9yeUxlbmd0aCkge1xuICAgICAgdGhpcy5oaXN0b3J5QnVmZmVyID0gbmV3IEhpc3RvcnlCdWZmZXIob3B0aW9ucy5oaXN0b3J5TGVuZ3RoKTtcbiAgICB9XG4gICAgdGhpcy5jb21wdXRlRGlmZiA9IG9wdGlvbnMuY29tcHV0ZURpZmY7XG4gIH1cbiAgaXNFcXVhbDtcbiAgY29tcHV0ZURpZmY7XG4gIGxhc3RDaGFuZ2VkRXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICBjaGlsZHJlbiA9IG5ldyBBcnJheVNldCgpO1xuICBoaXN0b3J5QnVmZmVyO1xuICBfX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoX2lnbm9yZUVycm9ycykge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH1cbiAgZ2V0KCkge1xuICAgIG1heWJlQ2FwdHVyZVBhcmVudCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICB9XG4gIHNldCh2YWx1ZSwgZGlmZikge1xuICAgIGlmICh0aGlzLmlzRXF1YWw/Lih0aGlzLmN1cnJlbnQsIHZhbHVlKSA/PyBlcXVhbHModGhpcy5jdXJyZW50LCB2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gICAgfVxuICAgIGFkdmFuY2VHbG9iYWxFcG9jaCgpO1xuICAgIGlmICh0aGlzLmhpc3RvcnlCdWZmZXIpIHtcbiAgICAgIHRoaXMuaGlzdG9yeUJ1ZmZlci5wdXNoRW50cnkoXG4gICAgICAgIHRoaXMubGFzdENoYW5nZWRFcG9jaCxcbiAgICAgICAgZ2V0R2xvYmFsRXBvY2goKSxcbiAgICAgICAgZGlmZiA/PyB0aGlzLmNvbXB1dGVEaWZmPy4odGhpcy5jdXJyZW50LCB2YWx1ZSwgdGhpcy5sYXN0Q2hhbmdlZEVwb2NoLCBnZXRHbG9iYWxFcG9jaCgpKSA/PyBSRVNFVF9WQUxVRVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0Q2hhbmdlZEVwb2NoID0gZ2V0R2xvYmFsRXBvY2goKTtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICBhdG9tRGlkQ2hhbmdlKHRoaXMsIG9sZFZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdXBkYXRlKHVwZGF0ZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zZXQodXBkYXRlcih0aGlzLmN1cnJlbnQpKTtcbiAgfVxuICBnZXREaWZmU2luY2UoZXBvY2gpIHtcbiAgICBtYXliZUNhcHR1cmVQYXJlbnQodGhpcyk7XG4gICAgaWYgKGVwb2NoID49IHRoaXMubGFzdENoYW5nZWRFcG9jaCkge1xuICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5QnVmZmVyPy5nZXRDaGFuZ2VzU2luY2UoZXBvY2gpID8/IFJFU0VUX1ZBTFVFO1xuICB9XG59XG5jb25zdCBfQXRvbSA9IHNpbmdsZXRvbihcIkF0b21cIiwgKCkgPT4gX19BdG9tX18pO1xuZnVuY3Rpb24gYXRvbShuYW1lLCBpbml0aWFsVmFsdWUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBfQXRvbShuYW1lLCBpbml0aWFsVmFsdWUsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gaXNBdG9tKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIF9BdG9tO1xufVxuZXhwb3J0IHtcbiAgX0F0b20sXG4gIGF0b20sXG4gIGlzQXRvbVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0b20ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Computed.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/Computed.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UNINITIALIZED: () => (/* binding */ UNINITIALIZED),\n/* harmony export */   WithDiff: () => (/* binding */ WithDiff),\n/* harmony export */   _Computed: () => (/* binding */ _Computed),\n/* harmony export */   computed: () => (/* binding */ computed),\n/* harmony export */   getComputedInstance: () => (/* binding */ getComputedInstance),\n/* harmony export */   isComputed: () => (/* binding */ isComputed),\n/* harmony export */   isUninitialized: () => (/* binding */ isUninitialized),\n/* harmony export */   withDiff: () => (/* binding */ withDiff)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs\");\n/* harmony import */ var _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HistoryBuffer.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/HistoryBuffer.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs\");\n/* harmony import */ var _warnings_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./warnings.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/warnings.mjs\");\n\n\n\n\n\n\n\n\n\nconst UNINITIALIZED = Symbol.for(\"com.tldraw.state/UNINITIALIZED\");\nfunction isUninitialized(value) {\n  return value === UNINITIALIZED;\n}\nconst WithDiff = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_5__.singleton)(\n  \"WithDiff\",\n  () => (class WithDiff {\n    constructor(value, diff) {\n      this.value = value;\n      this.diff = diff;\n    }\n  })\n);\nfunction withDiff(value, diff) {\n  return new WithDiff(value, diff);\n}\nclass __UNSAFE__Computed {\n  constructor(name, derive, options) {\n    this.name = name;\n    this.derive = derive;\n    if (options?.historyLength) {\n      this.historyBuffer = new _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_2__.HistoryBuffer(options.historyLength);\n    }\n    this.computeDiff = options?.computeDiff;\n    this.isEqual = options?.isEqual ?? _helpers_mjs__WEBPACK_IMPORTED_MODULE_5__.equals;\n  }\n  lastChangedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_START_EPOCH;\n  lastTraversedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_START_EPOCH;\n  /**\n   * The epoch when the reactor was last checked.\n   */\n  lastCheckedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_START_EPOCH;\n  parentSet = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_1__.ArraySet();\n  parents = [];\n  parentEpochs = [];\n  children = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_1__.ArraySet();\n  // eslint-disable-next-line no-restricted-syntax\n  get isActivelyListening() {\n    return !this.children.isEmpty;\n  }\n  historyBuffer;\n  // The last-computed value of this signal.\n  state = UNINITIALIZED;\n  // If the signal throws an error we stash it so we can rethrow it on the next get()\n  error = null;\n  computeDiff;\n  isEqual;\n  __unsafe__getWithoutCapture(ignoreErrors) {\n    const isNew = this.lastChangedEpoch === _constants_mjs__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_START_EPOCH;\n    const globalEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)();\n    if (!isNew && (this.lastCheckedEpoch === globalEpoch || this.isActivelyListening && (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getIsReacting)() && this.lastTraversedEpoch < (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getReactionEpoch)() || !(0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_5__.haveParentsChanged)(this))) {\n      this.lastCheckedEpoch = globalEpoch;\n      if (this.error) {\n        if (!ignoreErrors) {\n          throw this.error.thrownValue;\n        } else {\n          return this.state;\n        }\n      } else {\n        return this.state;\n      }\n    }\n    try {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_3__.startCapturingParents)(this);\n      const result = this.derive(this.state, this.lastCheckedEpoch);\n      const newState = result instanceof WithDiff ? result.value : result;\n      const isUninitialized2 = this.state === UNINITIALIZED;\n      if (isUninitialized2 || !this.isEqual(newState, this.state)) {\n        if (this.historyBuffer && !isUninitialized2) {\n          const diff = result instanceof WithDiff ? result.diff : void 0;\n          this.historyBuffer.pushEntry(\n            this.lastChangedEpoch,\n            (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)(),\n            diff ?? this.computeDiff?.(this.state, newState, this.lastCheckedEpoch, (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)()) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_7__.RESET_VALUE\n          );\n        }\n        this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)();\n        this.state = newState;\n      }\n      this.error = null;\n      this.lastCheckedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)();\n      return this.state;\n    } catch (e) {\n      if (this.state !== UNINITIALIZED) {\n        this.state = UNINITIALIZED;\n        this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)();\n      }\n      this.lastCheckedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_6__.getGlobalEpoch)();\n      if (this.historyBuffer) {\n        this.historyBuffer.clear();\n      }\n      this.error = { thrownValue: e };\n      if (!ignoreErrors) throw e;\n      return this.state;\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_3__.stopCapturingParents)();\n    }\n  }\n  get() {\n    try {\n      return this.__unsafe__getWithoutCapture();\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_3__.maybeCaptureParent)(this);\n    }\n  }\n  getDiffSince(epoch) {\n    this.__unsafe__getWithoutCapture(true);\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_3__.maybeCaptureParent)(this);\n    if (epoch >= this.lastChangedEpoch) {\n      return _helpers_mjs__WEBPACK_IMPORTED_MODULE_5__.EMPTY_ARRAY;\n    }\n    return this.historyBuffer?.getChangesSince(epoch) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_7__.RESET_VALUE;\n  }\n}\nconst _Computed = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_5__.singleton)(\"Computed\", () => __UNSAFE__Computed);\nfunction computedMethodLegacyDecorator(options = {}, _target, key, descriptor) {\n  const originalMethod = descriptor.value;\n  const derivationKey = Symbol.for(\"__@tldraw/state__computed__\" + key);\n  descriptor.value = function() {\n    let d = this[derivationKey];\n    if (!d) {\n      d = new _Computed(key, originalMethod.bind(this), options);\n      Object.defineProperty(this, derivationKey, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: d\n      });\n    }\n    return d.get();\n  };\n  descriptor.value[isComputedMethodKey] = true;\n  return descriptor;\n}\nfunction computedGetterLegacyDecorator(options = {}, _target, key, descriptor) {\n  const originalMethod = descriptor.get;\n  const derivationKey = Symbol.for(\"__@tldraw/state__computed__\" + key);\n  descriptor.get = function() {\n    let d = this[derivationKey];\n    if (!d) {\n      d = new _Computed(key, originalMethod.bind(this), options);\n      Object.defineProperty(this, derivationKey, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: d\n      });\n    }\n    return d.get();\n  };\n  return descriptor;\n}\nfunction computedMethodTc39Decorator(options, compute, context) {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(context.kind === \"method\", \"@computed can only be used on methods\");\n  const derivationKey = Symbol.for(\"__@tldraw/state__computed__\" + String(context.name));\n  const fn = function() {\n    let d = this[derivationKey];\n    if (!d) {\n      d = new _Computed(String(context.name), compute.bind(this), options);\n      Object.defineProperty(this, derivationKey, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: d\n      });\n    }\n    return d.get();\n  };\n  fn[isComputedMethodKey] = true;\n  return fn;\n}\nfunction computedDecorator(options = {}, args) {\n  if (args.length === 2) {\n    const [originalMethod, context] = args;\n    return computedMethodTc39Decorator(options, originalMethod, context);\n  } else {\n    const [_target, key, descriptor] = args;\n    if (descriptor.get) {\n      (0,_warnings_mjs__WEBPACK_IMPORTED_MODULE_8__.logComputedGetterWarning)();\n      return computedGetterLegacyDecorator(options, _target, key, descriptor);\n    } else {\n      return computedMethodLegacyDecorator(options, _target, key, descriptor);\n    }\n  }\n}\nconst isComputedMethodKey = \"@@__isComputedMethod__@@\";\nfunction getComputedInstance(obj, propertyName) {\n  const key = Symbol.for(\"__@tldraw/state__computed__\" + propertyName.toString());\n  let inst = obj[key];\n  if (!inst) {\n    const val = obj[propertyName];\n    if (typeof val === \"function\" && val[isComputedMethodKey]) {\n      val.call(obj);\n    }\n    inst = obj[key];\n  }\n  return inst;\n}\nfunction computed() {\n  if (arguments.length === 1) {\n    const options = arguments[0];\n    return (...args) => computedDecorator(options, args);\n  } else if (typeof arguments[0] === \"string\") {\n    return new _Computed(arguments[0], arguments[1], arguments[2]);\n  } else {\n    return computedDecorator(void 0, arguments);\n  }\n}\nfunction isComputed(value) {\n  return value && value instanceof _Computed;\n}\n\n//# sourceMappingURL=Computed.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvQ29tcHV0ZWQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVDO0FBQ0c7QUFDVTtBQUM0QztBQUMzQztBQUM4QjtBQUNFO0FBQzNDO0FBQ2dCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkRBQWE7QUFDNUM7QUFDQTtBQUNBLHVDQUF1QyxnREFBTTtBQUM3QztBQUNBLHFCQUFxQiw4REFBa0I7QUFDdkMsdUJBQXVCLDhEQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOERBQWtCO0FBQ3ZDLGtCQUFrQixtREFBUTtBQUMxQjtBQUNBO0FBQ0EsaUJBQWlCLG1EQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw4REFBa0I7QUFDOUQsd0JBQXdCLGlFQUFjO0FBQ3RDLHdGQUF3RixnRUFBYSxnQ0FBZ0MsbUVBQWdCLE9BQU8sZ0VBQWtCO0FBQzlLO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG1FQUFxQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBYztBQUMxQixvRkFBb0YsaUVBQWMsT0FBTyxtREFBVztBQUNwSDtBQUNBO0FBQ0EsZ0NBQWdDLGlFQUFjO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpRUFBYztBQUM1QztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsZ0NBQWdDLGlFQUFjO0FBQzlDO0FBQ0EsOEJBQThCLGlFQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sa0VBQW9CO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSxnRUFBa0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdFQUFrQjtBQUN0QjtBQUNBLGFBQWEscURBQVc7QUFDeEI7QUFDQSx5REFBeUQsbURBQVc7QUFDcEU7QUFDQTtBQUNBLGtCQUFrQix1REFBUztBQUMzQixtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHFEQUFNO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTSx1RUFBd0I7QUFDOUI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9Db21wdXRlZC5tanM/NmQ0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnQgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgQXJyYXlTZXQgfSBmcm9tIFwiLi9BcnJheVNldC5tanNcIjtcbmltcG9ydCB7IEhpc3RvcnlCdWZmZXIgfSBmcm9tIFwiLi9IaXN0b3J5QnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgbWF5YmVDYXB0dXJlUGFyZW50LCBzdGFydENhcHR1cmluZ1BhcmVudHMsIHN0b3BDYXB0dXJpbmdQYXJlbnRzIH0gZnJvbSBcIi4vY2FwdHVyZS5tanNcIjtcbmltcG9ydCB7IEdMT0JBTF9TVEFSVF9FUE9DSCB9IGZyb20gXCIuL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IEVNUFRZX0FSUkFZLCBlcXVhbHMsIGhhdmVQYXJlbnRzQ2hhbmdlZCwgc2luZ2xldG9uIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbEVwb2NoLCBnZXRJc1JlYWN0aW5nLCBnZXRSZWFjdGlvbkVwb2NoIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb25zLm1qc1wiO1xuaW1wb3J0IHsgUkVTRVRfVkFMVUUgfSBmcm9tIFwiLi90eXBlcy5tanNcIjtcbmltcG9ydCB7IGxvZ0NvbXB1dGVkR2V0dGVyV2FybmluZyB9IGZyb20gXCIuL3dhcm5pbmdzLm1qc1wiO1xuY29uc3QgVU5JTklUSUFMSVpFRCA9IFN5bWJvbC5mb3IoXCJjb20udGxkcmF3LnN0YXRlL1VOSU5JVElBTElaRURcIik7XG5mdW5jdGlvbiBpc1VuaW5pdGlhbGl6ZWQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBVTklOSVRJQUxJWkVEO1xufVxuY29uc3QgV2l0aERpZmYgPSBzaW5nbGV0b24oXG4gIFwiV2l0aERpZmZcIixcbiAgKCkgPT4gKGNsYXNzIFdpdGhEaWZmIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgZGlmZikge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5kaWZmID0gZGlmZjtcbiAgICB9XG4gIH0pXG4pO1xuZnVuY3Rpb24gd2l0aERpZmYodmFsdWUsIGRpZmYpIHtcbiAgcmV0dXJuIG5ldyBXaXRoRGlmZih2YWx1ZSwgZGlmZik7XG59XG5jbGFzcyBfX1VOU0FGRV9fQ29tcHV0ZWQge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBkZXJpdmUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGVyaXZlID0gZGVyaXZlO1xuICAgIGlmIChvcHRpb25zPy5oaXN0b3J5TGVuZ3RoKSB7XG4gICAgICB0aGlzLmhpc3RvcnlCdWZmZXIgPSBuZXcgSGlzdG9yeUJ1ZmZlcihvcHRpb25zLmhpc3RvcnlMZW5ndGgpO1xuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVEaWZmID0gb3B0aW9ucz8uY29tcHV0ZURpZmY7XG4gICAgdGhpcy5pc0VxdWFsID0gb3B0aW9ucz8uaXNFcXVhbCA/PyBlcXVhbHM7XG4gIH1cbiAgbGFzdENoYW5nZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgbGFzdFRyYXZlcnNlZEVwb2NoID0gR0xPQkFMX1NUQVJUX0VQT0NIO1xuICAvKipcbiAgICogVGhlIGVwb2NoIHdoZW4gdGhlIHJlYWN0b3Igd2FzIGxhc3QgY2hlY2tlZC5cbiAgICovXG4gIGxhc3RDaGVja2VkRXBvY2ggPSBHTE9CQUxfU1RBUlRfRVBPQ0g7XG4gIHBhcmVudFNldCA9IG5ldyBBcnJheVNldCgpO1xuICBwYXJlbnRzID0gW107XG4gIHBhcmVudEVwb2NocyA9IFtdO1xuICBjaGlsZHJlbiA9IG5ldyBBcnJheVNldCgpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGlzQWN0aXZlbHlMaXN0ZW5pbmcoKSB7XG4gICAgcmV0dXJuICF0aGlzLmNoaWxkcmVuLmlzRW1wdHk7XG4gIH1cbiAgaGlzdG9yeUJ1ZmZlcjtcbiAgLy8gVGhlIGxhc3QtY29tcHV0ZWQgdmFsdWUgb2YgdGhpcyBzaWduYWwuXG4gIHN0YXRlID0gVU5JTklUSUFMSVpFRDtcbiAgLy8gSWYgdGhlIHNpZ25hbCB0aHJvd3MgYW4gZXJyb3Igd2Ugc3Rhc2ggaXQgc28gd2UgY2FuIHJldGhyb3cgaXQgb24gdGhlIG5leHQgZ2V0KClcbiAgZXJyb3IgPSBudWxsO1xuICBjb21wdXRlRGlmZjtcbiAgaXNFcXVhbDtcbiAgX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKGlnbm9yZUVycm9ycykge1xuICAgIGNvbnN0IGlzTmV3ID0gdGhpcy5sYXN0Q2hhbmdlZEVwb2NoID09PSBHTE9CQUxfU1RBUlRfRVBPQ0g7XG4gICAgY29uc3QgZ2xvYmFsRXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICAgIGlmICghaXNOZXcgJiYgKHRoaXMubGFzdENoZWNrZWRFcG9jaCA9PT0gZ2xvYmFsRXBvY2ggfHwgdGhpcy5pc0FjdGl2ZWx5TGlzdGVuaW5nICYmIGdldElzUmVhY3RpbmcoKSAmJiB0aGlzLmxhc3RUcmF2ZXJzZWRFcG9jaCA8IGdldFJlYWN0aW9uRXBvY2goKSB8fCAhaGF2ZVBhcmVudHNDaGFuZ2VkKHRoaXMpKSkge1xuICAgICAgdGhpcy5sYXN0Q2hlY2tlZEVwb2NoID0gZ2xvYmFsRXBvY2g7XG4gICAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgICBpZiAoIWlnbm9yZUVycm9ycykge1xuICAgICAgICAgIHRocm93IHRoaXMuZXJyb3IudGhyb3duVmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgICAgfVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgc3RhcnRDYXB0dXJpbmdQYXJlbnRzKHRoaXMpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5kZXJpdmUodGhpcy5zdGF0ZSwgdGhpcy5sYXN0Q2hlY2tlZEVwb2NoKTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVzdWx0IGluc3RhbmNlb2YgV2l0aERpZmYgPyByZXN1bHQudmFsdWUgOiByZXN1bHQ7XG4gICAgICBjb25zdCBpc1VuaW5pdGlhbGl6ZWQyID0gdGhpcy5zdGF0ZSA9PT0gVU5JTklUSUFMSVpFRDtcbiAgICAgIGlmIChpc1VuaW5pdGlhbGl6ZWQyIHx8ICF0aGlzLmlzRXF1YWwobmV3U3RhdGUsIHRoaXMuc3RhdGUpKSB7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlCdWZmZXIgJiYgIWlzVW5pbml0aWFsaXplZDIpIHtcbiAgICAgICAgICBjb25zdCBkaWZmID0gcmVzdWx0IGluc3RhbmNlb2YgV2l0aERpZmYgPyByZXN1bHQuZGlmZiA6IHZvaWQgMDtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlCdWZmZXIucHVzaEVudHJ5KFxuICAgICAgICAgICAgdGhpcy5sYXN0Q2hhbmdlZEVwb2NoLFxuICAgICAgICAgICAgZ2V0R2xvYmFsRXBvY2goKSxcbiAgICAgICAgICAgIGRpZmYgPz8gdGhpcy5jb21wdXRlRGlmZj8uKHRoaXMuc3RhdGUsIG5ld1N0YXRlLCB0aGlzLmxhc3RDaGVja2VkRXBvY2gsIGdldEdsb2JhbEVwb2NoKCkpID8/IFJFU0VUX1ZBTFVFXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDaGFuZ2VkRXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgICB9XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdENoZWNrZWRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVU5JTklUSUFMSVpFRCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVU5JTklUSUFMSVpFRDtcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlZEVwb2NoID0gZ2V0R2xvYmFsRXBvY2goKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdENoZWNrZWRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgICBpZiAodGhpcy5oaXN0b3J5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeUJ1ZmZlci5jbGVhcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5lcnJvciA9IHsgdGhyb3duVmFsdWU6IGUgfTtcbiAgICAgIGlmICghaWdub3JlRXJyb3JzKSB0aHJvdyBlO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHN0b3BDYXB0dXJpbmdQYXJlbnRzKCk7XG4gICAgfVxuICB9XG4gIGdldCgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG1heWJlQ2FwdHVyZVBhcmVudCh0aGlzKTtcbiAgICB9XG4gIH1cbiAgZ2V0RGlmZlNpbmNlKGVwb2NoKSB7XG4gICAgdGhpcy5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUodHJ1ZSk7XG4gICAgbWF5YmVDYXB0dXJlUGFyZW50KHRoaXMpO1xuICAgIGlmIChlcG9jaCA+PSB0aGlzLmxhc3RDaGFuZ2VkRXBvY2gpIHtcbiAgICAgIHJldHVybiBFTVBUWV9BUlJBWTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeUJ1ZmZlcj8uZ2V0Q2hhbmdlc1NpbmNlKGVwb2NoKSA/PyBSRVNFVF9WQUxVRTtcbiAgfVxufVxuY29uc3QgX0NvbXB1dGVkID0gc2luZ2xldG9uKFwiQ29tcHV0ZWRcIiwgKCkgPT4gX19VTlNBRkVfX0NvbXB1dGVkKTtcbmZ1bmN0aW9uIGNvbXB1dGVkTWV0aG9kTGVnYWN5RGVjb3JhdG9yKG9wdGlvbnMgPSB7fSwgX3RhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgY29uc3QgZGVyaXZhdGlvbktleSA9IFN5bWJvbC5mb3IoXCJfX0B0bGRyYXcvc3RhdGVfX2NvbXB1dGVkX19cIiArIGtleSk7XG4gIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgZCA9IHRoaXNbZGVyaXZhdGlvbktleV07XG4gICAgaWYgKCFkKSB7XG4gICAgICBkID0gbmV3IF9Db21wdXRlZChrZXksIG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGRlcml2YXRpb25LZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZC5nZXQoKTtcbiAgfTtcbiAgZGVzY3JpcHRvci52YWx1ZVtpc0NvbXB1dGVkTWV0aG9kS2V5XSA9IHRydWU7XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufVxuZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXJMZWdhY3lEZWNvcmF0b3Iob3B0aW9ucyA9IHt9LCBfdGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLmdldDtcbiAgY29uc3QgZGVyaXZhdGlvbktleSA9IFN5bWJvbC5mb3IoXCJfX0B0bGRyYXcvc3RhdGVfX2NvbXB1dGVkX19cIiArIGtleSk7XG4gIGRlc2NyaXB0b3IuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgbGV0IGQgPSB0aGlzW2Rlcml2YXRpb25LZXldO1xuICAgIGlmICghZCkge1xuICAgICAgZCA9IG5ldyBfQ29tcHV0ZWQoa2V5LCBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBkZXJpdmF0aW9uS2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBkXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGQuZ2V0KCk7XG4gIH07XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufVxuZnVuY3Rpb24gY29tcHV0ZWRNZXRob2RUYzM5RGVjb3JhdG9yKG9wdGlvbnMsIGNvbXB1dGUsIGNvbnRleHQpIHtcbiAgYXNzZXJ0KGNvbnRleHQua2luZCA9PT0gXCJtZXRob2RcIiwgXCJAY29tcHV0ZWQgY2FuIG9ubHkgYmUgdXNlZCBvbiBtZXRob2RzXCIpO1xuICBjb25zdCBkZXJpdmF0aW9uS2V5ID0gU3ltYm9sLmZvcihcIl9fQHRsZHJhdy9zdGF0ZV9fY29tcHV0ZWRfX1wiICsgU3RyaW5nKGNvbnRleHQubmFtZSkpO1xuICBjb25zdCBmbiA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBkID0gdGhpc1tkZXJpdmF0aW9uS2V5XTtcbiAgICBpZiAoIWQpIHtcbiAgICAgIGQgPSBuZXcgX0NvbXB1dGVkKFN0cmluZyhjb250ZXh0Lm5hbWUpLCBjb21wdXRlLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGRlcml2YXRpb25LZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZC5nZXQoKTtcbiAgfTtcbiAgZm5baXNDb21wdXRlZE1ldGhvZEtleV0gPSB0cnVlO1xuICByZXR1cm4gZm47XG59XG5mdW5jdGlvbiBjb21wdXRlZERlY29yYXRvcihvcHRpb25zID0ge30sIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgY29uc3QgW29yaWdpbmFsTWV0aG9kLCBjb250ZXh0XSA9IGFyZ3M7XG4gICAgcmV0dXJuIGNvbXB1dGVkTWV0aG9kVGMzOURlY29yYXRvcihvcHRpb25zLCBvcmlnaW5hbE1ldGhvZCwgY29udGV4dCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgW190YXJnZXQsIGtleSwgZGVzY3JpcHRvcl0gPSBhcmdzO1xuICAgIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgICAgbG9nQ29tcHV0ZWRHZXR0ZXJXYXJuaW5nKCk7XG4gICAgICByZXR1cm4gY29tcHV0ZWRHZXR0ZXJMZWdhY3lEZWNvcmF0b3Iob3B0aW9ucywgX3RhcmdldCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbXB1dGVkTWV0aG9kTGVnYWN5RGVjb3JhdG9yKG9wdGlvbnMsIF90YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG59XG5jb25zdCBpc0NvbXB1dGVkTWV0aG9kS2V5ID0gXCJAQF9faXNDb21wdXRlZE1ldGhvZF9fQEBcIjtcbmZ1bmN0aW9uIGdldENvbXB1dGVkSW5zdGFuY2Uob2JqLCBwcm9wZXJ0eU5hbWUpIHtcbiAgY29uc3Qga2V5ID0gU3ltYm9sLmZvcihcIl9fQHRsZHJhdy9zdGF0ZV9fY29tcHV0ZWRfX1wiICsgcHJvcGVydHlOYW1lLnRvU3RyaW5nKCkpO1xuICBsZXQgaW5zdCA9IG9ialtrZXldO1xuICBpZiAoIWluc3QpIHtcbiAgICBjb25zdCB2YWwgPSBvYmpbcHJvcGVydHlOYW1lXTtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiICYmIHZhbFtpc0NvbXB1dGVkTWV0aG9kS2V5XSkge1xuICAgICAgdmFsLmNhbGwob2JqKTtcbiAgICB9XG4gICAgaW5zdCA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiBpbnN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZWQoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IGNvbXB1dGVkRGVjb3JhdG9yKG9wdGlvbnMsIGFyZ3MpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gbmV3IF9Db21wdXRlZChhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29tcHV0ZWREZWNvcmF0b3Iodm9pZCAwLCBhcmd1bWVudHMpO1xuICB9XG59XG5mdW5jdGlvbiBpc0NvbXB1dGVkKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIF9Db21wdXRlZDtcbn1cbmV4cG9ydCB7XG4gIFVOSU5JVElBTElaRUQsXG4gIFdpdGhEaWZmLFxuICBfQ29tcHV0ZWQsXG4gIGNvbXB1dGVkLFxuICBnZXRDb21wdXRlZEluc3RhbmNlLFxuICBpc0NvbXB1dGVkLFxuICBpc1VuaW5pdGlhbGl6ZWQsXG4gIHdpdGhEaWZmXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29tcHV0ZWQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Computed.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/EffectScheduler.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/EffectScheduler.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EffectScheduler: () => (/* binding */ EffectScheduler),\n/* harmony export */   react: () => (/* binding */ react),\n/* harmony export */   reactor: () => (/* binding */ reactor)\n/* harmony export */ });\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/ArraySet.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs\");\n\n\n\n\n\nclass __EffectScheduler__ {\n  constructor(name, runEffect, options) {\n    this.name = name;\n    this.runEffect = runEffect;\n    this._scheduleEffect = options?.scheduleEffect;\n  }\n  _isActivelyListening = false;\n  /**\n   * Whether this scheduler is attached and actively listening to its parents.\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isActivelyListening() {\n    return this._isActivelyListening;\n  }\n  /** @internal */\n  lastTraversedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.GLOBAL_START_EPOCH;\n  lastReactedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.GLOBAL_START_EPOCH;\n  _scheduleCount = 0;\n  /**\n   * The number of times this effect has been scheduled.\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get scheduleCount() {\n    return this._scheduleCount;\n  }\n  /** @internal */\n  parentSet = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  /** @internal */\n  parentEpochs = [];\n  /** @internal */\n  parents = [];\n  _scheduleEffect;\n  /** @internal */\n  maybeScheduleEffect() {\n    if (!this._isActivelyListening) return;\n    if (this.lastReactedEpoch === (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)()) return;\n    if (this.parents.length && !(0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.haveParentsChanged)(this)) {\n      this.lastReactedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n      return;\n    }\n    this.scheduleEffect();\n  }\n  /** @internal */\n  scheduleEffect() {\n    this._scheduleCount++;\n    if (this._scheduleEffect) {\n      this._scheduleEffect(this.maybeExecute);\n    } else {\n      this.execute();\n    }\n  }\n  /** @internal */\n  // eslint-disable-next-line local/prefer-class-methods\n  maybeExecute = () => {\n    if (!this._isActivelyListening) return;\n    this.execute();\n  };\n  /**\n   * Makes this scheduler become 'actively listening' to its parents.\n   * If it has been executed before it will immediately become eligible to receive 'maybeScheduleEffect' calls.\n   * If it has not executed before it will need to be manually executed once to become eligible for scheduling, i.e. by calling [[EffectScheduler.execute]].\n   * @public\n   */\n  attach() {\n    this._isActivelyListening = true;\n    for (let i = 0, n = this.parents.length; i < n; i++) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.attach)(this.parents[i], this);\n    }\n  }\n  /**\n   * Makes this scheduler stop 'actively listening' to its parents.\n   * It will no longer be eligible to receive 'maybeScheduleEffect' calls until [[EffectScheduler.attach]] is called again.\n   */\n  detach() {\n    this._isActivelyListening = false;\n    for (let i = 0, n = this.parents.length; i < n; i++) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.detach)(this.parents[i], this);\n    }\n  }\n  /**\n   * Executes the effect immediately and returns the result.\n   * @returns The result of the effect.\n   */\n  execute() {\n    try {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_1__.startCapturingParents)(this);\n      const currentEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n      const result = this.runEffect(this.lastReactedEpoch);\n      this.lastReactedEpoch = currentEpoch;\n      return result;\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_1__.stopCapturingParents)();\n    }\n  }\n}\nconst EffectScheduler = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.singleton)(\n  \"EffectScheduler\",\n  () => __EffectScheduler__\n);\nfunction react(name, fn, options) {\n  const scheduler = new EffectScheduler(name, fn, options);\n  scheduler.attach();\n  scheduler.scheduleEffect();\n  return () => {\n    scheduler.detach();\n  };\n}\nfunction reactor(name, fn, options) {\n  const scheduler = new EffectScheduler(name, fn, options);\n  return {\n    scheduler,\n    start: (options2) => {\n      const force = options2?.force ?? false;\n      scheduler.attach();\n      if (force) {\n        scheduler.scheduleEffect();\n      } else {\n        scheduler.maybeScheduleEffect();\n      }\n    },\n    stop: () => {\n      scheduler.detach();\n    }\n  };\n}\n\n//# sourceMappingURL=EffectScheduler.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvRWZmZWN0U2NoZWR1bGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEwQztBQUNrQztBQUN2QjtBQUN5QjtBQUMxQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4REFBa0I7QUFDekMscUJBQXFCLDhEQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtREFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFjO0FBQ2hELGdDQUFnQyxnRUFBa0I7QUFDbEQsOEJBQThCLGlFQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLE9BQU87QUFDcEQsTUFBTSxvREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsT0FBTztBQUNwRCxNQUFNLG9EQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sbUVBQXFCO0FBQzNCLDJCQUEyQixpRUFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSxrRUFBb0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL0VmZmVjdFNjaGVkdWxlci5tanM/ZjliZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcnJheVNldCB9IGZyb20gXCIuL0FycmF5U2V0Lm1qc1wiO1xuaW1wb3J0IHsgc3RhcnRDYXB0dXJpbmdQYXJlbnRzLCBzdG9wQ2FwdHVyaW5nUGFyZW50cyB9IGZyb20gXCIuL2NhcHR1cmUubWpzXCI7XG5pbXBvcnQgeyBHTE9CQUxfU1RBUlRfRVBPQ0ggfSBmcm9tIFwiLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBhdHRhY2gsIGRldGFjaCwgaGF2ZVBhcmVudHNDaGFuZ2VkLCBzaW5nbGV0b24gfSBmcm9tIFwiLi9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsRXBvY2ggfSBmcm9tIFwiLi90cmFuc2FjdGlvbnMubWpzXCI7XG5jbGFzcyBfX0VmZmVjdFNjaGVkdWxlcl9fIHtcbiAgY29uc3RydWN0b3IobmFtZSwgcnVuRWZmZWN0LCBvcHRpb25zKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnJ1bkVmZmVjdCA9IHJ1bkVmZmVjdDtcbiAgICB0aGlzLl9zY2hlZHVsZUVmZmVjdCA9IG9wdGlvbnM/LnNjaGVkdWxlRWZmZWN0O1xuICB9XG4gIF9pc0FjdGl2ZWx5TGlzdGVuaW5nID0gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgc2NoZWR1bGVyIGlzIGF0dGFjaGVkIGFuZCBhY3RpdmVseSBsaXN0ZW5pbmcgdG8gaXRzIHBhcmVudHMuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgaXNBY3RpdmVseUxpc3RlbmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBY3RpdmVseUxpc3RlbmluZztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGxhc3RUcmF2ZXJzZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgbGFzdFJlYWN0ZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgX3NjaGVkdWxlQ291bnQgPSAwO1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiB0aW1lcyB0aGlzIGVmZmVjdCBoYXMgYmVlbiBzY2hlZHVsZWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2NoZWR1bGVDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVDb3VudDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudFNldCA9IG5ldyBBcnJheVNldCgpO1xuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudEVwb2NocyA9IFtdO1xuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudHMgPSBbXTtcbiAgX3NjaGVkdWxlRWZmZWN0O1xuICAvKiogQGludGVybmFsICovXG4gIG1heWJlU2NoZWR1bGVFZmZlY3QoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0FjdGl2ZWx5TGlzdGVuaW5nKSByZXR1cm47XG4gICAgaWYgKHRoaXMubGFzdFJlYWN0ZWRFcG9jaCA9PT0gZ2V0R2xvYmFsRXBvY2goKSkgcmV0dXJuO1xuICAgIGlmICh0aGlzLnBhcmVudHMubGVuZ3RoICYmICFoYXZlUGFyZW50c0NoYW5nZWQodGhpcykpIHtcbiAgICAgIHRoaXMubGFzdFJlYWN0ZWRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGVFZmZlY3QoKTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIHNjaGVkdWxlRWZmZWN0KCkge1xuICAgIHRoaXMuX3NjaGVkdWxlQ291bnQrKztcbiAgICBpZiAodGhpcy5fc2NoZWR1bGVFZmZlY3QpIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlRWZmZWN0KHRoaXMubWF5YmVFeGVjdXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leGVjdXRlKCk7XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGxvY2FsL3ByZWZlci1jbGFzcy1tZXRob2RzXG4gIG1heWJlRXhlY3V0ZSA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMuX2lzQWN0aXZlbHlMaXN0ZW5pbmcpIHJldHVybjtcbiAgICB0aGlzLmV4ZWN1dGUoKTtcbiAgfTtcbiAgLyoqXG4gICAqIE1ha2VzIHRoaXMgc2NoZWR1bGVyIGJlY29tZSAnYWN0aXZlbHkgbGlzdGVuaW5nJyB0byBpdHMgcGFyZW50cy5cbiAgICogSWYgaXQgaGFzIGJlZW4gZXhlY3V0ZWQgYmVmb3JlIGl0IHdpbGwgaW1tZWRpYXRlbHkgYmVjb21lIGVsaWdpYmxlIHRvIHJlY2VpdmUgJ21heWJlU2NoZWR1bGVFZmZlY3QnIGNhbGxzLlxuICAgKiBJZiBpdCBoYXMgbm90IGV4ZWN1dGVkIGJlZm9yZSBpdCB3aWxsIG5lZWQgdG8gYmUgbWFudWFsbHkgZXhlY3V0ZWQgb25jZSB0byBiZWNvbWUgZWxpZ2libGUgZm9yIHNjaGVkdWxpbmcsIGkuZS4gYnkgY2FsbGluZyBbW0VmZmVjdFNjaGVkdWxlci5leGVjdXRlXV0uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGF0dGFjaCgpIHtcbiAgICB0aGlzLl9pc0FjdGl2ZWx5TGlzdGVuaW5nID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHRoaXMucGFyZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGF0dGFjaCh0aGlzLnBhcmVudHNbaV0sIHRoaXMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWFrZXMgdGhpcyBzY2hlZHVsZXIgc3RvcCAnYWN0aXZlbHkgbGlzdGVuaW5nJyB0byBpdHMgcGFyZW50cy5cbiAgICogSXQgd2lsbCBubyBsb25nZXIgYmUgZWxpZ2libGUgdG8gcmVjZWl2ZSAnbWF5YmVTY2hlZHVsZUVmZmVjdCcgY2FsbHMgdW50aWwgW1tFZmZlY3RTY2hlZHVsZXIuYXR0YWNoXV0gaXMgY2FsbGVkIGFnYWluLlxuICAgKi9cbiAgZGV0YWNoKCkge1xuICAgIHRoaXMuX2lzQWN0aXZlbHlMaXN0ZW5pbmcgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHRoaXMucGFyZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGRldGFjaCh0aGlzLnBhcmVudHNbaV0sIHRoaXMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGVmZmVjdCBpbW1lZGlhdGVseSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxuICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHRoZSBlZmZlY3QuXG4gICAqL1xuICBleGVjdXRlKCkge1xuICAgIHRyeSB7XG4gICAgICBzdGFydENhcHR1cmluZ1BhcmVudHModGhpcyk7XG4gICAgICBjb25zdCBjdXJyZW50RXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ydW5FZmZlY3QodGhpcy5sYXN0UmVhY3RlZEVwb2NoKTtcbiAgICAgIHRoaXMubGFzdFJlYWN0ZWRFcG9jaCA9IGN1cnJlbnRFcG9jaDtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHN0b3BDYXB0dXJpbmdQYXJlbnRzKCk7XG4gICAgfVxuICB9XG59XG5jb25zdCBFZmZlY3RTY2hlZHVsZXIgPSBzaW5nbGV0b24oXG4gIFwiRWZmZWN0U2NoZWR1bGVyXCIsXG4gICgpID0+IF9fRWZmZWN0U2NoZWR1bGVyX19cbik7XG5mdW5jdGlvbiByZWFjdChuYW1lLCBmbiwgb3B0aW9ucykge1xuICBjb25zdCBzY2hlZHVsZXIgPSBuZXcgRWZmZWN0U2NoZWR1bGVyKG5hbWUsIGZuLCBvcHRpb25zKTtcbiAgc2NoZWR1bGVyLmF0dGFjaCgpO1xuICBzY2hlZHVsZXIuc2NoZWR1bGVFZmZlY3QoKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBzY2hlZHVsZXIuZGV0YWNoKCk7XG4gIH07XG59XG5mdW5jdGlvbiByZWFjdG9yKG5hbWUsIGZuLCBvcHRpb25zKSB7XG4gIGNvbnN0IHNjaGVkdWxlciA9IG5ldyBFZmZlY3RTY2hlZHVsZXIobmFtZSwgZm4sIG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHNjaGVkdWxlcixcbiAgICBzdGFydDogKG9wdGlvbnMyKSA9PiB7XG4gICAgICBjb25zdCBmb3JjZSA9IG9wdGlvbnMyPy5mb3JjZSA/PyBmYWxzZTtcbiAgICAgIHNjaGVkdWxlci5hdHRhY2goKTtcbiAgICAgIGlmIChmb3JjZSkge1xuICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVFZmZlY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjaGVkdWxlci5tYXliZVNjaGVkdWxlRWZmZWN0KCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzdG9wOiAoKSA9PiB7XG4gICAgICBzY2hlZHVsZXIuZGV0YWNoKCk7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IHtcbiAgRWZmZWN0U2NoZWR1bGVyLFxuICByZWFjdCxcbiAgcmVhY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVmZmVjdFNjaGVkdWxlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/EffectScheduler.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/HistoryBuffer.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/HistoryBuffer.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HistoryBuffer: () => (/* binding */ HistoryBuffer)\n/* harmony export */ });\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs\");\n\nclass HistoryBuffer {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.buffer = new Array(capacity);\n  }\n  index = 0;\n  // use a wrap around buffer to store the last N values\n  buffer;\n  /**\n   * Add a diff to the history buffer.\n   *\n   * @param lastComputedEpoch - The epoch when the diff was computed.\n   * @param currentEpoch - The current epoch.\n   * @param diff - The diff to add, or else a reset value.\n   */\n  pushEntry(lastComputedEpoch, currentEpoch, diff) {\n    if (diff === void 0) {\n      return;\n    }\n    if (diff === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      this.clear();\n      return;\n    }\n    this.buffer[this.index] = [lastComputedEpoch, currentEpoch, diff];\n    this.index = (this.index + 1) % this.capacity;\n  }\n  /**\n   * Clear the history buffer.\n   */\n  clear() {\n    this.index = 0;\n    this.buffer.fill(void 0);\n  }\n  /**\n   * Get the diffs since the given epoch.\n   *\n   * @param sinceEpoch - The epoch to get diffs since.\n   * @returns An array of diffs or a flag to reset the history buffer.\n   */\n  getChangesSince(sinceEpoch) {\n    const { index, capacity, buffer } = this;\n    for (let i = 0; i < capacity; i++) {\n      const offset = (index - 1 + capacity - i) % capacity;\n      const elem = buffer[offset];\n      if (!elem) {\n        return _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE;\n      }\n      const [fromEpoch, toEpoch] = elem;\n      if (i === 0 && sinceEpoch >= toEpoch) {\n        return [];\n      }\n      if (fromEpoch <= sinceEpoch && sinceEpoch < toEpoch) {\n        const len = i + 1;\n        const result = new Array(len);\n        for (let j = 0; j < len; j++) {\n          result[j] = buffer[(offset + j) % capacity][2];\n        }\n        return result;\n      }\n    }\n    return _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE;\n  }\n}\n\n//# sourceMappingURL=HistoryBuffer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvSGlzdG9yeUJ1ZmZlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbURBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCO0FBQ3RDLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbURBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFXO0FBQ3RCO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvSGlzdG9yeUJ1ZmZlci5tanM/YTE5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSRVNFVF9WQUxVRSB9IGZyb20gXCIuL3R5cGVzLm1qc1wiO1xuY2xhc3MgSGlzdG9yeUJ1ZmZlciB7XG4gIGNvbnN0cnVjdG9yKGNhcGFjaXR5KSB7XG4gICAgdGhpcy5jYXBhY2l0eSA9IGNhcGFjaXR5O1xuICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5KGNhcGFjaXR5KTtcbiAgfVxuICBpbmRleCA9IDA7XG4gIC8vIHVzZSBhIHdyYXAgYXJvdW5kIGJ1ZmZlciB0byBzdG9yZSB0aGUgbGFzdCBOIHZhbHVlc1xuICBidWZmZXI7XG4gIC8qKlxuICAgKiBBZGQgYSBkaWZmIHRvIHRoZSBoaXN0b3J5IGJ1ZmZlci5cbiAgICpcbiAgICogQHBhcmFtIGxhc3RDb21wdXRlZEVwb2NoIC0gVGhlIGVwb2NoIHdoZW4gdGhlIGRpZmYgd2FzIGNvbXB1dGVkLlxuICAgKiBAcGFyYW0gY3VycmVudEVwb2NoIC0gVGhlIGN1cnJlbnQgZXBvY2guXG4gICAqIEBwYXJhbSBkaWZmIC0gVGhlIGRpZmYgdG8gYWRkLCBvciBlbHNlIGEgcmVzZXQgdmFsdWUuXG4gICAqL1xuICBwdXNoRW50cnkobGFzdENvbXB1dGVkRXBvY2gsIGN1cnJlbnRFcG9jaCwgZGlmZikge1xuICAgIGlmIChkaWZmID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRpZmYgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXhdID0gW2xhc3RDb21wdXRlZEVwb2NoLCBjdXJyZW50RXBvY2gsIGRpZmZdO1xuICAgIHRoaXMuaW5kZXggPSAodGhpcy5pbmRleCArIDEpICUgdGhpcy5jYXBhY2l0eTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgdGhlIGhpc3RvcnkgYnVmZmVyLlxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5pbmRleCA9IDA7XG4gICAgdGhpcy5idWZmZXIuZmlsbCh2b2lkIDApO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGRpZmZzIHNpbmNlIHRoZSBnaXZlbiBlcG9jaC5cbiAgICpcbiAgICogQHBhcmFtIHNpbmNlRXBvY2ggLSBUaGUgZXBvY2ggdG8gZ2V0IGRpZmZzIHNpbmNlLlxuICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBkaWZmcyBvciBhIGZsYWcgdG8gcmVzZXQgdGhlIGhpc3RvcnkgYnVmZmVyLlxuICAgKi9cbiAgZ2V0Q2hhbmdlc1NpbmNlKHNpbmNlRXBvY2gpIHtcbiAgICBjb25zdCB7IGluZGV4LCBjYXBhY2l0eSwgYnVmZmVyIH0gPSB0aGlzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FwYWNpdHk7IGkrKykge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gKGluZGV4IC0gMSArIGNhcGFjaXR5IC0gaSkgJSBjYXBhY2l0eTtcbiAgICAgIGNvbnN0IGVsZW0gPSBidWZmZXJbb2Zmc2V0XTtcbiAgICAgIGlmICghZWxlbSkge1xuICAgICAgICByZXR1cm4gUkVTRVRfVkFMVUU7XG4gICAgICB9XG4gICAgICBjb25zdCBbZnJvbUVwb2NoLCB0b0Vwb2NoXSA9IGVsZW07XG4gICAgICBpZiAoaSA9PT0gMCAmJiBzaW5jZUVwb2NoID49IHRvRXBvY2gpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGZyb21FcG9jaCA8PSBzaW5jZUVwb2NoICYmIHNpbmNlRXBvY2ggPCB0b0Vwb2NoKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IGkgKyAxO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHJlc3VsdFtqXSA9IGJ1ZmZlclsob2Zmc2V0ICsgaikgJSBjYXBhY2l0eV1bMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJFU0VUX1ZBTFVFO1xuICB9XG59XG5leHBvcnQge1xuICBIaXN0b3J5QnVmZmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGlzdG9yeUJ1ZmZlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/HistoryBuffer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/capture.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeCaptureParent: () => (/* binding */ maybeCaptureParent),\n/* harmony export */   startCapturingParents: () => (/* binding */ startCapturingParents),\n/* harmony export */   stopCapturingParents: () => (/* binding */ stopCapturingParents),\n/* harmony export */   unsafe__withoutCapture: () => (/* binding */ unsafe__withoutCapture),\n/* harmony export */   whyAmIRunning: () => (/* binding */ whyAmIRunning)\n/* harmony export */ });\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n\nclass CaptureStackFrame {\n  constructor(below, child) {\n    this.below = below;\n    this.child = child;\n  }\n  offset = 0;\n  maybeRemoved;\n}\nconst inst = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.singleton)(\"capture\", () => ({ stack: null }));\nfunction unsafe__withoutCapture(fn) {\n  const oldStack = inst.stack;\n  inst.stack = null;\n  try {\n    return fn();\n  } finally {\n    inst.stack = oldStack;\n  }\n}\nfunction startCapturingParents(child) {\n  inst.stack = new CaptureStackFrame(inst.stack, child);\n  child.parentSet.clear();\n}\nfunction stopCapturingParents() {\n  const frame = inst.stack;\n  inst.stack = frame.below;\n  if (frame.offset < frame.child.parents.length) {\n    for (let i = frame.offset; i < frame.child.parents.length; i++) {\n      const maybeRemovedParent = frame.child.parents[i];\n      if (!frame.child.parentSet.has(maybeRemovedParent)) {\n        (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.detach)(maybeRemovedParent, frame.child);\n      }\n    }\n    frame.child.parents.length = frame.offset;\n    frame.child.parentEpochs.length = frame.offset;\n  }\n  if (frame.maybeRemoved) {\n    for (let i = 0; i < frame.maybeRemoved.length; i++) {\n      const maybeRemovedParent = frame.maybeRemoved[i];\n      if (!frame.child.parentSet.has(maybeRemovedParent)) {\n        (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.detach)(maybeRemovedParent, frame.child);\n      }\n    }\n  }\n}\nfunction maybeCaptureParent(p) {\n  if (inst.stack) {\n    const wasCapturedAlready = inst.stack.child.parentSet.has(p);\n    if (wasCapturedAlready) {\n      return;\n    }\n    inst.stack.child.parentSet.add(p);\n    if (inst.stack.child.isActivelyListening) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.attach)(p, inst.stack.child);\n    }\n    if (inst.stack.offset < inst.stack.child.parents.length) {\n      const maybeRemovedParent = inst.stack.child.parents[inst.stack.offset];\n      if (maybeRemovedParent !== p) {\n        if (!inst.stack.maybeRemoved) {\n          inst.stack.maybeRemoved = [maybeRemovedParent];\n        } else {\n          inst.stack.maybeRemoved.push(maybeRemovedParent);\n        }\n      }\n    }\n    inst.stack.child.parents[inst.stack.offset] = p;\n    inst.stack.child.parentEpochs[inst.stack.offset] = p.lastChangedEpoch;\n    inst.stack.offset++;\n  }\n}\nfunction whyAmIRunning() {\n  const child = inst.stack?.child;\n  if (!child) {\n    throw new Error(\"whyAmIRunning() called outside of a reactive context\");\n  }\n  const changedParents = [];\n  for (let i = 0; i < child.parents.length; i++) {\n    const parent = child.parents[i];\n    if (parent.lastChangedEpoch > child.parentEpochs[i]) {\n      changedParents.push(parent);\n    }\n  }\n  if (changedParents.length === 0) {\n    console.log(child.name, \"is running but none of the parents changed\");\n  } else {\n    console.log(child.name, \"is running because:\");\n    for (const changedParent of changedParents) {\n      console.log(\n        \"\t\",\n        changedParent.name,\n        \"changed =>\",\n        changedParent.__unsafe__getWithoutCapture(true)\n      );\n    }\n  }\n}\n\n//# sourceMappingURL=capture.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY2FwdHVyZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVEQUFTLHFCQUFxQixhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnQ0FBZ0M7QUFDL0Q7QUFDQTtBQUNBLFFBQVEsb0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0JBQStCO0FBQ25EO0FBQ0E7QUFDQSxRQUFRLG9EQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY2FwdHVyZS5tanM/ZGIzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdHRhY2gsIGRldGFjaCwgc2luZ2xldG9uIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmNsYXNzIENhcHR1cmVTdGFja0ZyYW1lIHtcbiAgY29uc3RydWN0b3IoYmVsb3csIGNoaWxkKSB7XG4gICAgdGhpcy5iZWxvdyA9IGJlbG93O1xuICAgIHRoaXMuY2hpbGQgPSBjaGlsZDtcbiAgfVxuICBvZmZzZXQgPSAwO1xuICBtYXliZVJlbW92ZWQ7XG59XG5jb25zdCBpbnN0ID0gc2luZ2xldG9uKFwiY2FwdHVyZVwiLCAoKSA9PiAoeyBzdGFjazogbnVsbCB9KSk7XG5mdW5jdGlvbiB1bnNhZmVfX3dpdGhvdXRDYXB0dXJlKGZuKSB7XG4gIGNvbnN0IG9sZFN0YWNrID0gaW5zdC5zdGFjaztcbiAgaW5zdC5zdGFjayA9IG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gZmluYWxseSB7XG4gICAgaW5zdC5zdGFjayA9IG9sZFN0YWNrO1xuICB9XG59XG5mdW5jdGlvbiBzdGFydENhcHR1cmluZ1BhcmVudHMoY2hpbGQpIHtcbiAgaW5zdC5zdGFjayA9IG5ldyBDYXB0dXJlU3RhY2tGcmFtZShpbnN0LnN0YWNrLCBjaGlsZCk7XG4gIGNoaWxkLnBhcmVudFNldC5jbGVhcigpO1xufVxuZnVuY3Rpb24gc3RvcENhcHR1cmluZ1BhcmVudHMoKSB7XG4gIGNvbnN0IGZyYW1lID0gaW5zdC5zdGFjaztcbiAgaW5zdC5zdGFjayA9IGZyYW1lLmJlbG93O1xuICBpZiAoZnJhbWUub2Zmc2V0IDwgZnJhbWUuY2hpbGQucGFyZW50cy5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpID0gZnJhbWUub2Zmc2V0OyBpIDwgZnJhbWUuY2hpbGQucGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWF5YmVSZW1vdmVkUGFyZW50ID0gZnJhbWUuY2hpbGQucGFyZW50c1tpXTtcbiAgICAgIGlmICghZnJhbWUuY2hpbGQucGFyZW50U2V0LmhhcyhtYXliZVJlbW92ZWRQYXJlbnQpKSB7XG4gICAgICAgIGRldGFjaChtYXliZVJlbW92ZWRQYXJlbnQsIGZyYW1lLmNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnJhbWUuY2hpbGQucGFyZW50cy5sZW5ndGggPSBmcmFtZS5vZmZzZXQ7XG4gICAgZnJhbWUuY2hpbGQucGFyZW50RXBvY2hzLmxlbmd0aCA9IGZyYW1lLm9mZnNldDtcbiAgfVxuICBpZiAoZnJhbWUubWF5YmVSZW1vdmVkKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZS5tYXliZVJlbW92ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1heWJlUmVtb3ZlZFBhcmVudCA9IGZyYW1lLm1heWJlUmVtb3ZlZFtpXTtcbiAgICAgIGlmICghZnJhbWUuY2hpbGQucGFyZW50U2V0LmhhcyhtYXliZVJlbW92ZWRQYXJlbnQpKSB7XG4gICAgICAgIGRldGFjaChtYXliZVJlbW92ZWRQYXJlbnQsIGZyYW1lLmNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIG1heWJlQ2FwdHVyZVBhcmVudChwKSB7XG4gIGlmIChpbnN0LnN0YWNrKSB7XG4gICAgY29uc3Qgd2FzQ2FwdHVyZWRBbHJlYWR5ID0gaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRTZXQuaGFzKHApO1xuICAgIGlmICh3YXNDYXB0dXJlZEFscmVhZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRTZXQuYWRkKHApO1xuICAgIGlmIChpbnN0LnN0YWNrLmNoaWxkLmlzQWN0aXZlbHlMaXN0ZW5pbmcpIHtcbiAgICAgIGF0dGFjaChwLCBpbnN0LnN0YWNrLmNoaWxkKTtcbiAgICB9XG4gICAgaWYgKGluc3Quc3RhY2sub2Zmc2V0IDwgaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbWF5YmVSZW1vdmVkUGFyZW50ID0gaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRzW2luc3Quc3RhY2sub2Zmc2V0XTtcbiAgICAgIGlmIChtYXliZVJlbW92ZWRQYXJlbnQgIT09IHApIHtcbiAgICAgICAgaWYgKCFpbnN0LnN0YWNrLm1heWJlUmVtb3ZlZCkge1xuICAgICAgICAgIGluc3Quc3RhY2subWF5YmVSZW1vdmVkID0gW21heWJlUmVtb3ZlZFBhcmVudF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5zdC5zdGFjay5tYXliZVJlbW92ZWQucHVzaChtYXliZVJlbW92ZWRQYXJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGluc3Quc3RhY2suY2hpbGQucGFyZW50c1tpbnN0LnN0YWNrLm9mZnNldF0gPSBwO1xuICAgIGluc3Quc3RhY2suY2hpbGQucGFyZW50RXBvY2hzW2luc3Quc3RhY2sub2Zmc2V0XSA9IHAubGFzdENoYW5nZWRFcG9jaDtcbiAgICBpbnN0LnN0YWNrLm9mZnNldCsrO1xuICB9XG59XG5mdW5jdGlvbiB3aHlBbUlSdW5uaW5nKCkge1xuICBjb25zdCBjaGlsZCA9IGluc3Quc3RhY2s/LmNoaWxkO1xuICBpZiAoIWNoaWxkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwid2h5QW1JUnVubmluZygpIGNhbGxlZCBvdXRzaWRlIG9mIGEgcmVhY3RpdmUgY29udGV4dFwiKTtcbiAgfVxuICBjb25zdCBjaGFuZ2VkUGFyZW50cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnRzW2ldO1xuICAgIGlmIChwYXJlbnQubGFzdENoYW5nZWRFcG9jaCA+IGNoaWxkLnBhcmVudEVwb2Noc1tpXSkge1xuICAgICAgY2hhbmdlZFBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBpZiAoY2hhbmdlZFBhcmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5sb2coY2hpbGQubmFtZSwgXCJpcyBydW5uaW5nIGJ1dCBub25lIG9mIHRoZSBwYXJlbnRzIGNoYW5nZWRcIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coY2hpbGQubmFtZSwgXCJpcyBydW5uaW5nIGJlY2F1c2U6XCIpO1xuICAgIGZvciAoY29uc3QgY2hhbmdlZFBhcmVudCBvZiBjaGFuZ2VkUGFyZW50cykge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiXHRcIixcbiAgICAgICAgY2hhbmdlZFBhcmVudC5uYW1lLFxuICAgICAgICBcImNoYW5nZWQgPT5cIixcbiAgICAgICAgY2hhbmdlZFBhcmVudC5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUodHJ1ZSlcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBtYXliZUNhcHR1cmVQYXJlbnQsXG4gIHN0YXJ0Q2FwdHVyaW5nUGFyZW50cyxcbiAgc3RvcENhcHR1cmluZ1BhcmVudHMsXG4gIHVuc2FmZV9fd2l0aG91dENhcHR1cmUsXG4gIHdoeUFtSVJ1bm5pbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXB0dXJlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/capture.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/constants.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/constants.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLOBAL_START_EPOCH: () => (/* binding */ GLOBAL_START_EPOCH)\n/* harmony export */ });\nconst GLOBAL_START_EPOCH = -1;\n\n//# sourceMappingURL=constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29uc3RhbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29uc3RhbnRzLm1qcz80ZDc3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEdMT0JBTF9TVEFSVF9FUE9DSCA9IC0xO1xuZXhwb3J0IHtcbiAgR0xPQkFMX1NUQVJUX0VQT0NIXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EMPTY_ARRAY: () => (/* binding */ EMPTY_ARRAY),\n/* harmony export */   attach: () => (/* binding */ attach),\n/* harmony export */   detach: () => (/* binding */ detach),\n/* harmony export */   equals: () => (/* binding */ equals),\n/* harmony export */   haveParentsChanged: () => (/* binding */ haveParentsChanged),\n/* harmony export */   singleton: () => (/* binding */ singleton)\n/* harmony export */ });\nfunction isChild(x) {\n  return x && typeof x === \"object\" && \"parents\" in x;\n}\nfunction haveParentsChanged(child) {\n  for (let i = 0, n = child.parents.length; i < n; i++) {\n    child.parents[i].__unsafe__getWithoutCapture(true);\n    if (child.parents[i].lastChangedEpoch !== child.parentEpochs[i]) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction detach(parent, child) {\n  if (!parent.children.remove(child)) {\n    return;\n  }\n  if (parent.children.isEmpty && isChild(parent)) {\n    for (let i = 0, n = parent.parents.length; i < n; i++) {\n      detach(parent.parents[i], parent);\n    }\n  }\n}\nfunction attach(parent, child) {\n  if (!parent.children.add(child)) {\n    return;\n  }\n  if (isChild(parent)) {\n    for (let i = 0, n = parent.parents.length; i < n; i++) {\n      attach(parent.parents[i], parent);\n    }\n  }\n}\nfunction equals(a, b) {\n  const shallowEquals = a === b || Object.is(a, b) || Boolean(a && b && typeof a.equals === \"function\" && a.equals(b));\n  return shallowEquals;\n}\nfunction singleton(key, init) {\n  const symbol = Symbol.for(`com.tldraw.state/${key}`);\n  const global = globalThis;\n  global[symbol] ??= init();\n  return global[symbol];\n}\nconst EMPTY_ARRAY = singleton(\"empty_array\", () => Object.freeze([]));\n\n//# sourceMappingURL=helpers.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvaGVscGVycy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsT0FBTztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsSUFBSTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL2hlbHBlcnMubWpzPzJkNGEiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNDaGlsZCh4KSB7XG4gIHJldHVybiB4ICYmIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIFwicGFyZW50c1wiIGluIHg7XG59XG5mdW5jdGlvbiBoYXZlUGFyZW50c0NoYW5nZWQoY2hpbGQpIHtcbiAgZm9yIChsZXQgaSA9IDAsIG4gPSBjaGlsZC5wYXJlbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGNoaWxkLnBhcmVudHNbaV0uX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKHRydWUpO1xuICAgIGlmIChjaGlsZC5wYXJlbnRzW2ldLmxhc3RDaGFuZ2VkRXBvY2ggIT09IGNoaWxkLnBhcmVudEVwb2Noc1tpXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRldGFjaChwYXJlbnQsIGNoaWxkKSB7XG4gIGlmICghcGFyZW50LmNoaWxkcmVuLnJlbW92ZShjaGlsZCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHBhcmVudC5jaGlsZHJlbi5pc0VtcHR5ICYmIGlzQ2hpbGQocGFyZW50KSkge1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gcGFyZW50LnBhcmVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBkZXRhY2gocGFyZW50LnBhcmVudHNbaV0sIHBhcmVudCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBhdHRhY2gocGFyZW50LCBjaGlsZCkge1xuICBpZiAoIXBhcmVudC5jaGlsZHJlbi5hZGQoY2hpbGQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0NoaWxkKHBhcmVudCkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhcmVudC5wYXJlbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgYXR0YWNoKHBhcmVudC5wYXJlbnRzW2ldLCBwYXJlbnQpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgY29uc3Qgc2hhbGxvd0VxdWFscyA9IGEgPT09IGIgfHwgT2JqZWN0LmlzKGEsIGIpIHx8IEJvb2xlYW4oYSAmJiBiICYmIHR5cGVvZiBhLmVxdWFscyA9PT0gXCJmdW5jdGlvblwiICYmIGEuZXF1YWxzKGIpKTtcbiAgcmV0dXJuIHNoYWxsb3dFcXVhbHM7XG59XG5mdW5jdGlvbiBzaW5nbGV0b24oa2V5LCBpbml0KSB7XG4gIGNvbnN0IHN5bWJvbCA9IFN5bWJvbC5mb3IoYGNvbS50bGRyYXcuc3RhdGUvJHtrZXl9YCk7XG4gIGNvbnN0IGdsb2JhbCA9IGdsb2JhbFRoaXM7XG4gIGdsb2JhbFtzeW1ib2xdID8/PSBpbml0KCk7XG4gIHJldHVybiBnbG9iYWxbc3ltYm9sXTtcbn1cbmNvbnN0IEVNUFRZX0FSUkFZID0gc2luZ2xldG9uKFwiZW1wdHlfYXJyYXlcIiwgKCkgPT4gT2JqZWN0LmZyZWV6ZShbXSkpO1xuZXhwb3J0IHtcbiAgRU1QVFlfQVJSQVksXG4gIGF0dGFjaCxcbiAgZGV0YWNoLFxuICBlcXVhbHMsXG4gIGhhdmVQYXJlbnRzQ2hhbmdlZCxcbiAgc2luZ2xldG9uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/isSignal.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/isSignal.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSignal: () => (/* binding */ isSignal)\n/* harmony export */ });\n/* harmony import */ var _Atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Atom.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Atom.mjs\");\n/* harmony import */ var _Computed_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Computed.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/Computed.mjs\");\n\n\nfunction isSignal(value) {\n  return value instanceof _Atom_mjs__WEBPACK_IMPORTED_MODULE_0__._Atom || value instanceof _Computed_mjs__WEBPACK_IMPORTED_MODULE_1__._Computed;\n}\n\n//# sourceMappingURL=isSignal.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvaXNTaWduYWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtQztBQUNRO0FBQzNDO0FBQ0EsMEJBQTBCLDRDQUFLLHFCQUFxQixvREFBUztBQUM3RDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9pc1NpZ25hbC5tanM/MWY5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfQXRvbSB9IGZyb20gXCIuL0F0b20ubWpzXCI7XG5pbXBvcnQgeyBfQ29tcHV0ZWQgfSBmcm9tIFwiLi9Db21wdXRlZC5tanNcIjtcbmZ1bmN0aW9uIGlzU2lnbmFsKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIF9BdG9tIHx8IHZhbHVlIGluc3RhbmNlb2YgX0NvbXB1dGVkO1xufVxuZXhwb3J0IHtcbiAgaXNTaWduYWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc1NpZ25hbC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/isSignal.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   advanceGlobalEpoch: () => (/* binding */ advanceGlobalEpoch),\n/* harmony export */   atomDidChange: () => (/* binding */ atomDidChange),\n/* harmony export */   getGlobalEpoch: () => (/* binding */ getGlobalEpoch),\n/* harmony export */   getIsReacting: () => (/* binding */ getIsReacting),\n/* harmony export */   getReactionEpoch: () => (/* binding */ getReactionEpoch),\n/* harmony export */   transact: () => (/* binding */ transact),\n/* harmony export */   transaction: () => (/* binding */ transaction)\n/* harmony export */ });\n/* harmony import */ var _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EffectScheduler.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/EffectScheduler.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/helpers.mjs\");\n\n\n\nclass Transaction {\n  constructor(parent) {\n    this.parent = parent;\n  }\n  initialAtomValues = /* @__PURE__ */ new Map();\n  /**\n   * Get whether this transaction is a root (no parents).\n   *\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isRoot() {\n    return this.parent === null;\n  }\n  /**\n   * Commit the transaction's changes.\n   *\n   * @public\n   */\n  commit() {\n    if (inst.globalIsReacting) {\n      for (const atom of this.initialAtomValues.keys()) {\n        traverseAtomForCleanup(atom);\n      }\n    } else if (this.isRoot) {\n      flushChanges(this.initialAtomValues.keys());\n    } else {\n      this.initialAtomValues.forEach((value, atom) => {\n        if (!this.parent.initialAtomValues.has(atom)) {\n          this.parent.initialAtomValues.set(atom, value);\n        }\n      });\n    }\n  }\n  /**\n   * Abort the transaction.\n   *\n   * @public\n   */\n  abort() {\n    inst.globalEpoch++;\n    this.initialAtomValues.forEach((value, atom) => {\n      atom.set(value);\n      atom.historyBuffer?.clear();\n    });\n    this.commit();\n  }\n}\nconst inst = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.singleton)(\"transactions\", () => ({\n  // The current epoch (global to all atoms).\n  globalEpoch: _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_START_EPOCH + 1,\n  // Whether any transaction is reacting.\n  globalIsReacting: false,\n  currentTransaction: null,\n  cleanupReactors: null,\n  reactionEpoch: _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_START_EPOCH + 1\n}));\nfunction getReactionEpoch() {\n  return inst.reactionEpoch;\n}\nfunction getGlobalEpoch() {\n  return inst.globalEpoch;\n}\nfunction getIsReacting() {\n  return inst.globalIsReacting;\n}\nfunction traverse(reactors, child) {\n  if (child.lastTraversedEpoch === inst.globalEpoch) {\n    return;\n  }\n  child.lastTraversedEpoch = inst.globalEpoch;\n  if (child instanceof _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler) {\n    reactors.add(child);\n  } else {\n    ;\n    child.children.visit((c) => traverse(reactors, c));\n  }\n}\nfunction flushChanges(atoms) {\n  if (inst.globalIsReacting) {\n    throw new Error(\"flushChanges cannot be called during a reaction\");\n  }\n  const outerTxn = inst.currentTransaction;\n  try {\n    inst.currentTransaction = null;\n    inst.globalIsReacting = true;\n    inst.reactionEpoch = inst.globalEpoch;\n    const reactors = /* @__PURE__ */ new Set();\n    for (const atom of atoms) {\n      atom.children.visit((child) => traverse(reactors, child));\n    }\n    for (const r of reactors) {\n      r.maybeScheduleEffect();\n    }\n    let updateDepth = 0;\n    while (inst.cleanupReactors?.size) {\n      if (updateDepth++ > 1e3) {\n        throw new Error(\"Reaction update depth limit exceeded\");\n      }\n      const reactors2 = inst.cleanupReactors;\n      inst.cleanupReactors = null;\n      for (const r of reactors2) {\n        r.maybeScheduleEffect();\n      }\n    }\n  } finally {\n    inst.cleanupReactors = null;\n    inst.globalIsReacting = false;\n    inst.currentTransaction = outerTxn;\n  }\n}\nfunction atomDidChange(atom, previousValue) {\n  if (inst.currentTransaction) {\n    if (!inst.currentTransaction.initialAtomValues.has(atom)) {\n      inst.currentTransaction.initialAtomValues.set(atom, previousValue);\n    }\n  } else if (inst.globalIsReacting) {\n    traverseAtomForCleanup(atom);\n  } else {\n    flushChanges([atom]);\n  }\n}\nfunction traverseAtomForCleanup(atom) {\n  const rs = inst.cleanupReactors ??= /* @__PURE__ */ new Set();\n  atom.children.visit((child) => traverse(rs, child));\n}\nfunction advanceGlobalEpoch() {\n  inst.globalEpoch++;\n}\nfunction transaction(fn) {\n  const txn = new Transaction(inst.currentTransaction);\n  inst.currentTransaction = txn;\n  try {\n    let result = void 0;\n    let rollback = false;\n    try {\n      result = fn(() => rollback = true);\n    } catch (e) {\n      txn.abort();\n      throw e;\n    }\n    if (rollback) {\n      txn.abort();\n    } else {\n      txn.commit();\n    }\n    return result;\n  } finally {\n    inst.currentTransaction = inst.currentTransaction.parent;\n  }\n}\nfunction transact(fn) {\n  if (inst.currentTransaction) {\n    return fn();\n  }\n  return transaction(fn);\n}\n\n//# sourceMappingURL=transactions.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvdHJhbnNhY3Rpb25zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ0g7QUFDWDtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQSxlQUFlLDhEQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4REFBa0I7QUFDbkMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUVBQWU7QUFDdEM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi90cmFuc2FjdGlvbnMubWpzP2JlNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWZmZWN0U2NoZWR1bGVyIH0gZnJvbSBcIi4vRWZmZWN0U2NoZWR1bGVyLm1qc1wiO1xuaW1wb3J0IHsgR0xPQkFMX1NUQVJUX0VQT0NIIH0gZnJvbSBcIi4vY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmNsYXNzIFRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3IocGFyZW50KSB7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gIH1cbiAgaW5pdGlhbEF0b21WYWx1ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhpcyB0cmFuc2FjdGlvbiBpcyBhIHJvb3QgKG5vIHBhcmVudHMpLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGlzUm9vdCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQgPT09IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIENvbW1pdCB0aGUgdHJhbnNhY3Rpb24ncyBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb21taXQoKSB7XG4gICAgaWYgKGluc3QuZ2xvYmFsSXNSZWFjdGluZykge1xuICAgICAgZm9yIChjb25zdCBhdG9tIG9mIHRoaXMuaW5pdGlhbEF0b21WYWx1ZXMua2V5cygpKSB7XG4gICAgICAgIHRyYXZlcnNlQXRvbUZvckNsZWFudXAoYXRvbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgZmx1c2hDaGFuZ2VzKHRoaXMuaW5pdGlhbEF0b21WYWx1ZXMua2V5cygpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbml0aWFsQXRvbVZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgYXRvbSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50LmluaXRpYWxBdG9tVmFsdWVzLmhhcyhhdG9tKSkge1xuICAgICAgICAgIHRoaXMucGFyZW50LmluaXRpYWxBdG9tVmFsdWVzLnNldChhdG9tLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWJvcnQgdGhlIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhYm9ydCgpIHtcbiAgICBpbnN0Lmdsb2JhbEVwb2NoKys7XG4gICAgdGhpcy5pbml0aWFsQXRvbVZhbHVlcy5mb3JFYWNoKCh2YWx1ZSwgYXRvbSkgPT4ge1xuICAgICAgYXRvbS5zZXQodmFsdWUpO1xuICAgICAgYXRvbS5oaXN0b3J5QnVmZmVyPy5jbGVhcigpO1xuICAgIH0pO1xuICAgIHRoaXMuY29tbWl0KCk7XG4gIH1cbn1cbmNvbnN0IGluc3QgPSBzaW5nbGV0b24oXCJ0cmFuc2FjdGlvbnNcIiwgKCkgPT4gKHtcbiAgLy8gVGhlIGN1cnJlbnQgZXBvY2ggKGdsb2JhbCB0byBhbGwgYXRvbXMpLlxuICBnbG9iYWxFcG9jaDogR0xPQkFMX1NUQVJUX0VQT0NIICsgMSxcbiAgLy8gV2hldGhlciBhbnkgdHJhbnNhY3Rpb24gaXMgcmVhY3RpbmcuXG4gIGdsb2JhbElzUmVhY3Rpbmc6IGZhbHNlLFxuICBjdXJyZW50VHJhbnNhY3Rpb246IG51bGwsXG4gIGNsZWFudXBSZWFjdG9yczogbnVsbCxcbiAgcmVhY3Rpb25FcG9jaDogR0xPQkFMX1NUQVJUX0VQT0NIICsgMVxufSkpO1xuZnVuY3Rpb24gZ2V0UmVhY3Rpb25FcG9jaCgpIHtcbiAgcmV0dXJuIGluc3QucmVhY3Rpb25FcG9jaDtcbn1cbmZ1bmN0aW9uIGdldEdsb2JhbEVwb2NoKCkge1xuICByZXR1cm4gaW5zdC5nbG9iYWxFcG9jaDtcbn1cbmZ1bmN0aW9uIGdldElzUmVhY3RpbmcoKSB7XG4gIHJldHVybiBpbnN0Lmdsb2JhbElzUmVhY3Rpbmc7XG59XG5mdW5jdGlvbiB0cmF2ZXJzZShyZWFjdG9ycywgY2hpbGQpIHtcbiAgaWYgKGNoaWxkLmxhc3RUcmF2ZXJzZWRFcG9jaCA9PT0gaW5zdC5nbG9iYWxFcG9jaCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjaGlsZC5sYXN0VHJhdmVyc2VkRXBvY2ggPSBpbnN0Lmdsb2JhbEVwb2NoO1xuICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBFZmZlY3RTY2hlZHVsZXIpIHtcbiAgICByZWFjdG9ycy5hZGQoY2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIDtcbiAgICBjaGlsZC5jaGlsZHJlbi52aXNpdCgoYykgPT4gdHJhdmVyc2UocmVhY3RvcnMsIGMpKTtcbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hDaGFuZ2VzKGF0b21zKSB7XG4gIGlmIChpbnN0Lmdsb2JhbElzUmVhY3RpbmcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmbHVzaENoYW5nZXMgY2Fubm90IGJlIGNhbGxlZCBkdXJpbmcgYSByZWFjdGlvblwiKTtcbiAgfVxuICBjb25zdCBvdXRlclR4biA9IGluc3QuY3VycmVudFRyYW5zYWN0aW9uO1xuICB0cnkge1xuICAgIGluc3QuY3VycmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICBpbnN0Lmdsb2JhbElzUmVhY3RpbmcgPSB0cnVlO1xuICAgIGluc3QucmVhY3Rpb25FcG9jaCA9IGluc3QuZ2xvYmFsRXBvY2g7XG4gICAgY29uc3QgcmVhY3RvcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgYXRvbSBvZiBhdG9tcykge1xuICAgICAgYXRvbS5jaGlsZHJlbi52aXNpdCgoY2hpbGQpID0+IHRyYXZlcnNlKHJlYWN0b3JzLCBjaGlsZCkpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHIgb2YgcmVhY3RvcnMpIHtcbiAgICAgIHIubWF5YmVTY2hlZHVsZUVmZmVjdCgpO1xuICAgIH1cbiAgICBsZXQgdXBkYXRlRGVwdGggPSAwO1xuICAgIHdoaWxlIChpbnN0LmNsZWFudXBSZWFjdG9ycz8uc2l6ZSkge1xuICAgICAgaWYgKHVwZGF0ZURlcHRoKysgPiAxZTMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVhY3Rpb24gdXBkYXRlIGRlcHRoIGxpbWl0IGV4Y2VlZGVkXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVhY3RvcnMyID0gaW5zdC5jbGVhbnVwUmVhY3RvcnM7XG4gICAgICBpbnN0LmNsZWFudXBSZWFjdG9ycyA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IHIgb2YgcmVhY3RvcnMyKSB7XG4gICAgICAgIHIubWF5YmVTY2hlZHVsZUVmZmVjdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBpbnN0LmNsZWFudXBSZWFjdG9ycyA9IG51bGw7XG4gICAgaW5zdC5nbG9iYWxJc1JlYWN0aW5nID0gZmFsc2U7XG4gICAgaW5zdC5jdXJyZW50VHJhbnNhY3Rpb24gPSBvdXRlclR4bjtcbiAgfVxufVxuZnVuY3Rpb24gYXRvbURpZENoYW5nZShhdG9tLCBwcmV2aW91c1ZhbHVlKSB7XG4gIGlmIChpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbikge1xuICAgIGlmICghaW5zdC5jdXJyZW50VHJhbnNhY3Rpb24uaW5pdGlhbEF0b21WYWx1ZXMuaGFzKGF0b20pKSB7XG4gICAgICBpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbi5pbml0aWFsQXRvbVZhbHVlcy5zZXQoYXRvbSwgcHJldmlvdXNWYWx1ZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGluc3QuZ2xvYmFsSXNSZWFjdGluZykge1xuICAgIHRyYXZlcnNlQXRvbUZvckNsZWFudXAoYXRvbSk7XG4gIH0gZWxzZSB7XG4gICAgZmx1c2hDaGFuZ2VzKFthdG9tXSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyYXZlcnNlQXRvbUZvckNsZWFudXAoYXRvbSkge1xuICBjb25zdCBycyA9IGluc3QuY2xlYW51cFJlYWN0b3JzID8/PSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBhdG9tLmNoaWxkcmVuLnZpc2l0KChjaGlsZCkgPT4gdHJhdmVyc2UocnMsIGNoaWxkKSk7XG59XG5mdW5jdGlvbiBhZHZhbmNlR2xvYmFsRXBvY2goKSB7XG4gIGluc3QuZ2xvYmFsRXBvY2grKztcbn1cbmZ1bmN0aW9uIHRyYW5zYWN0aW9uKGZuKSB7XG4gIGNvbnN0IHR4biA9IG5ldyBUcmFuc2FjdGlvbihpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbik7XG4gIGluc3QuY3VycmVudFRyYW5zYWN0aW9uID0gdHhuO1xuICB0cnkge1xuICAgIGxldCByZXN1bHQgPSB2b2lkIDA7XG4gICAgbGV0IHJvbGxiYWNrID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGZuKCgpID0+IHJvbGxiYWNrID0gdHJ1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHhuLmFib3J0KCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBpZiAocm9sbGJhY2spIHtcbiAgICAgIHR4bi5hYm9ydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eG4uY29tbWl0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZmluYWxseSB7XG4gICAgaW5zdC5jdXJyZW50VHJhbnNhY3Rpb24gPSBpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbi5wYXJlbnQ7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyYW5zYWN0KGZuKSB7XG4gIGlmIChpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbikge1xuICAgIHJldHVybiBmbigpO1xuICB9XG4gIHJldHVybiB0cmFuc2FjdGlvbihmbik7XG59XG5leHBvcnQge1xuICBhZHZhbmNlR2xvYmFsRXBvY2gsXG4gIGF0b21EaWRDaGFuZ2UsXG4gIGdldEdsb2JhbEVwb2NoLFxuICBnZXRJc1JlYWN0aW5nLFxuICBnZXRSZWFjdGlvbkVwb2NoLFxuICB0cmFuc2FjdCxcbiAgdHJhbnNhY3Rpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2FjdGlvbnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/transactions.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/types.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESET_VALUE: () => (/* binding */ RESET_VALUE)\n/* harmony export */ });\nconst RESET_VALUE = Symbol.for(\"com.tldraw.state/RESET_VALUE\");\n\n//# sourceMappingURL=types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvdHlwZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi90eXBlcy5tanM/NWJmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSRVNFVF9WQUxVRSA9IFN5bWJvbC5mb3IoXCJjb20udGxkcmF3LnN0YXRlL1JFU0VUX1ZBTFVFXCIpO1xuZXhwb3J0IHtcbiAgUkVTRVRfVkFMVUVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/warnings.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/warnings.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logComputedGetterWarning: () => (/* binding */ logComputedGetterWarning)\n/* harmony export */ });\nlet didWarnComputedGetter = false;\nfunction logComputedGetterWarning() {\n  if (didWarnComputedGetter) return;\n  didWarnComputedGetter = true;\n  console.warn(\n    `Using \\`@computed\\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \\`@computed\\` as a decorator for methods.\n\n// Before\n@computed\nget foo() {\n\treturn 'foo'\n}\n\n// After\n@computed\ngetFoo() {\n\treturn 'foo'\n}\n`\n  );\n}\n\n//# sourceMappingURL=warnings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvd2FybmluZ3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL3dhcm5pbmdzLm1qcz85Y2MwIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBkaWRXYXJuQ29tcHV0ZWRHZXR0ZXIgPSBmYWxzZTtcbmZ1bmN0aW9uIGxvZ0NvbXB1dGVkR2V0dGVyV2FybmluZygpIHtcbiAgaWYgKGRpZFdhcm5Db21wdXRlZEdldHRlcikgcmV0dXJuO1xuICBkaWRXYXJuQ29tcHV0ZWRHZXR0ZXIgPSB0cnVlO1xuICBjb25zb2xlLndhcm4oXG4gICAgYFVzaW5nIFxcYEBjb21wdXRlZFxcYCBhcyBhIGRlY29yYXRvciBmb3IgZ2V0dGVycyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlLiBQbGVhc2UgcmVmYWN0b3IgdG8gdXNlIFxcYEBjb21wdXRlZFxcYCBhcyBhIGRlY29yYXRvciBmb3IgbWV0aG9kcy5cblxuLy8gQmVmb3JlXG5AY29tcHV0ZWRcbmdldCBmb28oKSB7XG5cdHJldHVybiAnZm9vJ1xufVxuXG4vLyBBZnRlclxuQGNvbXB1dGVkXG5nZXRGb28oKSB7XG5cdHJldHVybiAnZm9vJ1xufVxuYFxuICApO1xufVxuZXhwb3J0IHtcbiAgbG9nQ29tcHV0ZWRHZXR0ZXJXYXJuaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FybmluZ3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/warnings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncrementalSetConstructor: () => (/* reexport safe */ _lib_IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_1__.IncrementalSetConstructor),\n/* harmony export */   MigrationFailureReason: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.MigrationFailureReason),\n/* harmony export */   RecordType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_2__.RecordType),\n/* harmony export */   Store: () => (/* reexport safe */ _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_4__.Store),\n/* harmony export */   StoreQueries: () => (/* reexport safe */ _lib_StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_5__.StoreQueries),\n/* harmony export */   StoreSchema: () => (/* reexport safe */ _lib_StoreSchema_mjs__WEBPACK_IMPORTED_MODULE_6__.StoreSchema),\n/* harmony export */   StoreSideEffects: () => (/* reexport safe */ _lib_StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_7__.StoreSideEffects),\n/* harmony export */   assertIdType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_2__.assertIdType),\n/* harmony export */   createComputedCache: () => (/* reexport safe */ _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_4__.createComputedCache),\n/* harmony export */   createEmptyRecordsDiff: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__.createEmptyRecordsDiff),\n/* harmony export */   createMigrationIds: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.createMigrationSequence),\n/* harmony export */   createRecordMigrationSequence: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.createRecordMigrationSequence),\n/* harmony export */   createRecordType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_2__.createRecordType),\n/* harmony export */   defineMigrations: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.defineMigrations),\n/* harmony export */   devFreeze: () => (/* reexport safe */ _lib_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_8__.devFreeze),\n/* harmony export */   isRecordsDiffEmpty: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__.isRecordsDiffEmpty),\n/* harmony export */   parseMigrationId: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__.parseMigrationId),\n/* harmony export */   reverseRecordsDiff: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__.reverseRecordsDiff),\n/* harmony export */   squashRecordDiffs: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__.squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__.squashRecordDiffsMutable)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _lib_IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/IncrementalSetConstructor.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\");\n/* harmony import */ var _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/RecordType.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs\");\n/* harmony import */ var _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/RecordsDiff.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\");\n/* harmony import */ var _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/Store.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs\");\n/* harmony import */ var _lib_StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/StoreQueries.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\");\n/* harmony import */ var _lib_StoreSchema_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/StoreSchema.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs\");\n/* harmony import */ var _lib_StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/StoreSideEffects.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\");\n/* harmony import */ var _lib_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/devFreeze.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\");\n/* harmony import */ var _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/migrate.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\");\n\n\n\n\n\n\n\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/store\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNtQjtBQUNFO0FBT25EO0FBSU47QUFDNkI7QUFDRjtBQUdoQjtBQUNZO0FBUXJCO0FBQzNCLDJFQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQXVCRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9pbmRleC5tanM/MWU0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IgfSBmcm9tIFwiLi9saWIvSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3Rvci5tanNcIjtcbmltcG9ydCB7IFJlY29yZFR5cGUsIGFzc2VydElkVHlwZSwgY3JlYXRlUmVjb3JkVHlwZSB9IGZyb20gXCIuL2xpYi9SZWNvcmRUeXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlRW1wdHlSZWNvcmRzRGlmZixcbiAgaXNSZWNvcmRzRGlmZkVtcHR5LFxuICByZXZlcnNlUmVjb3Jkc0RpZmYsXG4gIHNxdWFzaFJlY29yZERpZmZzLFxuICBzcXVhc2hSZWNvcmREaWZmc011dGFibGVcbn0gZnJvbSBcIi4vbGliL1JlY29yZHNEaWZmLm1qc1wiO1xuaW1wb3J0IHtcbiAgU3RvcmUsXG4gIGNyZWF0ZUNvbXB1dGVkQ2FjaGVcbn0gZnJvbSBcIi4vbGliL1N0b3JlLm1qc1wiO1xuaW1wb3J0IHsgU3RvcmVRdWVyaWVzIH0gZnJvbSBcIi4vbGliL1N0b3JlUXVlcmllcy5tanNcIjtcbmltcG9ydCB7IFN0b3JlU2NoZW1hIH0gZnJvbSBcIi4vbGliL1N0b3JlU2NoZW1hLm1qc1wiO1xuaW1wb3J0IHtcbiAgU3RvcmVTaWRlRWZmZWN0c1xufSBmcm9tIFwiLi9saWIvU3RvcmVTaWRlRWZmZWN0cy5tanNcIjtcbmltcG9ydCB7IGRldkZyZWV6ZSB9IGZyb20gXCIuL2xpYi9kZXZGcmVlemUubWpzXCI7XG5pbXBvcnQge1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uLFxuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgZGVmaW5lTWlncmF0aW9ucyxcbiAgcGFyc2VNaWdyYXRpb25JZFxufSBmcm9tIFwiLi9saWIvbWlncmF0ZS5tanNcIjtcbnJlZ2lzdGVyVGxkcmF3TGlicmFyeVZlcnNpb24oXG4gIFwiQHRsZHJhdy9zdG9yZVwiLFxuICBcIjMuMy4xXCIsXG4gIFwiZXNtXCJcbik7XG5leHBvcnQge1xuICBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yLFxuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uLFxuICBSZWNvcmRUeXBlLFxuICBTdG9yZSxcbiAgU3RvcmVRdWVyaWVzLFxuICBTdG9yZVNjaGVtYSxcbiAgU3RvcmVTaWRlRWZmZWN0cyxcbiAgYXNzZXJ0SWRUeXBlLFxuICBjcmVhdGVDb21wdXRlZENhY2hlLFxuICBjcmVhdGVFbXB0eVJlY29yZHNEaWZmLFxuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZSxcbiAgZGVmaW5lTWlncmF0aW9ucyxcbiAgZGV2RnJlZXplLFxuICBpc1JlY29yZHNEaWZmRW1wdHksXG4gIHBhcnNlTWlncmF0aW9uSWQsXG4gIHJldmVyc2VSZWNvcmRzRGlmZixcbiAgc3F1YXNoUmVjb3JkRGlmZnMsXG4gIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncrementalSetConstructor: () => (/* binding */ IncrementalSetConstructor)\n/* harmony export */ });\nclass IncrementalSetConstructor {\n  constructor(previousValue) {\n    this.previousValue = previousValue;\n  }\n  /**\n   * The next value of the set.\n   *\n   * @internal\n   */\n  nextValue;\n  /**\n   * The diff of the set.\n   *\n   * @internal\n   */\n  diff;\n  /**\n   * Get the next value of the set.\n   *\n   * @public\n   */\n  get() {\n    const numRemoved = this.diff?.removed?.size ?? 0;\n    const numAdded = this.diff?.added?.size ?? 0;\n    if (numRemoved === 0 && numAdded === 0) {\n      return void 0;\n    }\n    return { value: this.nextValue, diff: this.diff };\n  }\n  /**\n   * Add an item to the set.\n   *\n   * @param item - The item to add.\n   * @param wasAlreadyPresent - Whether the item was already present in the set.\n   * @internal\n   */\n  _add(item, wasAlreadyPresent) {\n    this.nextValue ??= new Set(this.previousValue);\n    this.nextValue.add(item);\n    this.diff ??= {};\n    if (wasAlreadyPresent) {\n      this.diff.removed?.delete(item);\n    } else {\n      this.diff.added ??= /* @__PURE__ */ new Set();\n      this.diff.added.add(item);\n    }\n  }\n  /**\n   * Add an item to the set.\n   *\n   * @param item - The item to add.\n   * @public\n   */\n  add(item) {\n    const wasAlreadyPresent = this.previousValue.has(item);\n    if (wasAlreadyPresent) {\n      const wasRemoved = this.diff?.removed?.has(item);\n      if (!wasRemoved) return;\n      return this._add(item, wasAlreadyPresent);\n    }\n    const isCurrentlyPresent = this.nextValue?.has(item);\n    if (isCurrentlyPresent) return;\n    this._add(item, wasAlreadyPresent);\n  }\n  /**\n   * Remove an item from the set.\n   *\n   * @param item - The item to remove.\n   * @param wasAlreadyPresent - Whether the item was already present in the set.\n   * @internal\n   */\n  _remove(item, wasAlreadyPresent) {\n    this.nextValue ??= new Set(this.previousValue);\n    this.nextValue.delete(item);\n    this.diff ??= {};\n    if (wasAlreadyPresent) {\n      this.diff.removed ??= /* @__PURE__ */ new Set();\n      this.diff.removed.add(item);\n    } else {\n      this.diff.added?.delete(item);\n    }\n  }\n  /**\n   * Remove an item from the set.\n   *\n   * @param item - The item to remove.\n   * @public\n   */\n  remove(item) {\n    const wasAlreadyPresent = this.previousValue.has(item);\n    if (!wasAlreadyPresent) {\n      const wasAdded = this.diff?.added?.has(item);\n      if (!wasAdded) return;\n      return this._remove(item, wasAlreadyPresent);\n    }\n    const hasAlreadyBeenRemoved = this.diff?.removed?.has(item);\n    if (hasAlreadyBeenRemoved) return;\n    this._remove(item, wasAlreadyPresent);\n  }\n}\n\n//# sourceMappingURL=IncrementalSetConstructor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3Rvci5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL0luY3JlbWVudGFsU2V0Q29uc3RydWN0b3IubWpzP2RmZmUiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3RvciB7XG4gIGNvbnN0cnVjdG9yKHByZXZpb3VzVmFsdWUpIHtcbiAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgbmV4dCB2YWx1ZSBvZiB0aGUgc2V0LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5leHRWYWx1ZTtcbiAgLyoqXG4gICAqIFRoZSBkaWZmIG9mIHRoZSBzZXQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGlmZjtcbiAgLyoqXG4gICAqIEdldCB0aGUgbmV4dCB2YWx1ZSBvZiB0aGUgc2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQoKSB7XG4gICAgY29uc3QgbnVtUmVtb3ZlZCA9IHRoaXMuZGlmZj8ucmVtb3ZlZD8uc2l6ZSA/PyAwO1xuICAgIGNvbnN0IG51bUFkZGVkID0gdGhpcy5kaWZmPy5hZGRlZD8uc2l6ZSA/PyAwO1xuICAgIGlmIChudW1SZW1vdmVkID09PSAwICYmIG51bUFkZGVkID09PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4geyB2YWx1ZTogdGhpcy5uZXh0VmFsdWUsIGRpZmY6IHRoaXMuZGlmZiB9O1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYW4gaXRlbSB0byB0aGUgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0gaXRlbSAtIFRoZSBpdGVtIHRvIGFkZC5cbiAgICogQHBhcmFtIHdhc0FscmVhZHlQcmVzZW50IC0gV2hldGhlciB0aGUgaXRlbSB3YXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBzZXQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2FkZChpdGVtLCB3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgIHRoaXMubmV4dFZhbHVlID8/PSBuZXcgU2V0KHRoaXMucHJldmlvdXNWYWx1ZSk7XG4gICAgdGhpcy5uZXh0VmFsdWUuYWRkKGl0ZW0pO1xuICAgIHRoaXMuZGlmZiA/Pz0ge307XG4gICAgaWYgKHdhc0FscmVhZHlQcmVzZW50KSB7XG4gICAgICB0aGlzLmRpZmYucmVtb3ZlZD8uZGVsZXRlKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpZmYuYWRkZWQgPz89IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICB0aGlzLmRpZmYuYWRkZWQuYWRkKGl0ZW0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGl0ZW0gdG8gdGhlIHNldC5cbiAgICpcbiAgICogQHBhcmFtIGl0ZW0gLSBUaGUgaXRlbSB0byBhZGQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZChpdGVtKSB7XG4gICAgY29uc3Qgd2FzQWxyZWFkeVByZXNlbnQgPSB0aGlzLnByZXZpb3VzVmFsdWUuaGFzKGl0ZW0pO1xuICAgIGlmICh3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgICAgY29uc3Qgd2FzUmVtb3ZlZCA9IHRoaXMuZGlmZj8ucmVtb3ZlZD8uaGFzKGl0ZW0pO1xuICAgICAgaWYgKCF3YXNSZW1vdmVkKSByZXR1cm47XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKGl0ZW0sIHdhc0FscmVhZHlQcmVzZW50KTtcbiAgICB9XG4gICAgY29uc3QgaXNDdXJyZW50bHlQcmVzZW50ID0gdGhpcy5uZXh0VmFsdWU/LmhhcyhpdGVtKTtcbiAgICBpZiAoaXNDdXJyZW50bHlQcmVzZW50KSByZXR1cm47XG4gICAgdGhpcy5fYWRkKGl0ZW0sIHdhc0FscmVhZHlQcmVzZW50KTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0gaXRlbSAtIFRoZSBpdGVtIHRvIHJlbW92ZS5cbiAgICogQHBhcmFtIHdhc0FscmVhZHlQcmVzZW50IC0gV2hldGhlciB0aGUgaXRlbSB3YXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBzZXQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3JlbW92ZShpdGVtLCB3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgIHRoaXMubmV4dFZhbHVlID8/PSBuZXcgU2V0KHRoaXMucHJldmlvdXNWYWx1ZSk7XG4gICAgdGhpcy5uZXh0VmFsdWUuZGVsZXRlKGl0ZW0pO1xuICAgIHRoaXMuZGlmZiA/Pz0ge307XG4gICAgaWYgKHdhc0FscmVhZHlQcmVzZW50KSB7XG4gICAgICB0aGlzLmRpZmYucmVtb3ZlZCA/Pz0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIHRoaXMuZGlmZi5yZW1vdmVkLmFkZChpdGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaWZmLmFkZGVkPy5kZWxldGUoaXRlbSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIHRoZSBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSBpdGVtIC0gVGhlIGl0ZW0gdG8gcmVtb3ZlLlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZW1vdmUoaXRlbSkge1xuICAgIGNvbnN0IHdhc0FscmVhZHlQcmVzZW50ID0gdGhpcy5wcmV2aW91c1ZhbHVlLmhhcyhpdGVtKTtcbiAgICBpZiAoIXdhc0FscmVhZHlQcmVzZW50KSB7XG4gICAgICBjb25zdCB3YXNBZGRlZCA9IHRoaXMuZGlmZj8uYWRkZWQ/LmhhcyhpdGVtKTtcbiAgICAgIGlmICghd2FzQWRkZWQpIHJldHVybjtcbiAgICAgIHJldHVybiB0aGlzLl9yZW1vdmUoaXRlbSwgd2FzQWxyZWFkeVByZXNlbnQpO1xuICAgIH1cbiAgICBjb25zdCBoYXNBbHJlYWR5QmVlblJlbW92ZWQgPSB0aGlzLmRpZmY/LnJlbW92ZWQ/LmhhcyhpdGVtKTtcbiAgICBpZiAoaGFzQWxyZWFkeUJlZW5SZW1vdmVkKSByZXR1cm47XG4gICAgdGhpcy5fcmVtb3ZlKGl0ZW0sIHdhc0FscmVhZHlQcmVzZW50KTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordType: () => (/* binding */ RecordType),\n/* harmony export */   assertIdType: () => (/* binding */ assertIdType),\n/* harmony export */   createRecordType: () => (/* binding */ createRecordType)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nclass RecordType {\n  constructor(typeName, config) {\n    this.typeName = typeName;\n    this.createDefaultProperties = config.createDefaultProperties;\n    this.validator = config.validator ?? { validate: (r) => r };\n    this.scope = config.scope ?? \"document\";\n    this.ephemeralKeys = config.ephemeralKeys;\n    const ephemeralKeySet = /* @__PURE__ */ new Set();\n    if (config.ephemeralKeys) {\n      for (const [key, isEphemeral] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(config.ephemeralKeys)) {\n        if (isEphemeral) ephemeralKeySet.add(key);\n      }\n    }\n    this.ephemeralKeySet = ephemeralKeySet;\n  }\n  createDefaultProperties;\n  validator;\n  ephemeralKeys;\n  ephemeralKeySet;\n  scope;\n  /**\n   * Create a new record of this type.\n   *\n   * @param properties - The properties of the record.\n   * @returns The new record.\n   */\n  create(properties) {\n    const result = { ...this.createDefaultProperties(), id: this.createId() };\n    for (const [k, v] of Object.entries(properties)) {\n      if (v !== void 0) {\n        result[k] = v;\n      }\n    }\n    result.typeName = this.typeName;\n    return result;\n  }\n  /**\n   * Clone a record of this type.\n   *\n   * @param record - The record to clone.\n   * @returns The cloned record.\n   * @public\n   */\n  clone(record) {\n    return { ...(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record), id: this.createId() };\n  }\n  /**\n   * Create a new ID for this record type.\n   *\n   * @example\n   *\n   * ```ts\n   * const id = recordType.createId()\n   * ```\n   *\n   * @returns The new ID.\n   * @public\n   */\n  createId(customUniquePart) {\n    return this.typeName + \":\" + (customUniquePart ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.uniqueId)());\n  }\n  /**\n   * Create a new ID for this record type based on the given ID.\n   *\n   * @example\n   *\n   * ```ts\n   * const id = recordType.createCustomId('myId')\n   * ```\n   *\n   * @deprecated - Use `createId` instead.\n   * @param id - The ID to base the new ID on.\n   * @returns The new ID.\n   */\n  createCustomId(id) {\n    return this.typeName + \":\" + id;\n  }\n  /**\n   * Takes an id like `user:123` and returns the part after the colon `123`\n   *\n   * @param id - The id\n   * @returns\n   */\n  parseId(id) {\n    if (!this.isId(id)) {\n      throw new Error(`ID \"${id}\" is not a valid ID for type \"${this.typeName}\"`);\n    }\n    return id.slice(this.typeName.length + 1);\n  }\n  /**\n   * Check whether a record is an instance of this record type.\n   *\n   * @example\n   *\n   * ```ts\n   * const result = recordType.isInstance(someRecord)\n   * ```\n   *\n   * @param record - The record to check.\n   * @returns Whether the record is an instance of this record type.\n   */\n  isInstance(record) {\n    return record?.typeName === this.typeName;\n  }\n  /**\n   * Check whether an id is an id of this type.\n   *\n   * @example\n   *\n   * ```ts\n   * const result = recordType.isIn('someId')\n   * ```\n   *\n   * @param id - The id to check.\n   * @returns Whether the id is an id of this type.\n   */\n  isId(id) {\n    if (!id) return false;\n    for (let i = 0; i < this.typeName.length; i++) {\n      if (id[i] !== this.typeName[i]) return false;\n    }\n    return id[this.typeName.length] === \":\";\n  }\n  /**\n   * Create a new RecordType that has the same type name as this RecordType and includes the given\n   * default properties.\n   *\n   * @example\n   *\n   * ```ts\n   * const authorType = createRecordType('author', () => ({ living: true }))\n   * const deadAuthorType = authorType.withDefaultProperties({ living: false })\n   * ```\n   *\n   * @param createDefaultProperties - A function that returns the default properties of the new RecordType.\n   * @returns The new RecordType.\n   */\n  withDefaultProperties(createDefaultProperties) {\n    return new RecordType(this.typeName, {\n      createDefaultProperties,\n      validator: this.validator,\n      scope: this.scope,\n      ephemeralKeys: this.ephemeralKeys\n    });\n  }\n  /**\n   * Check that the passed in record passes the validations for this type. Returns its input\n   * correctly typed if it does, but throws an error otherwise.\n   */\n  validate(record, recordBefore) {\n    if (recordBefore && this.validator.validateUsingKnownGoodVersion) {\n      return this.validator.validateUsingKnownGoodVersion(recordBefore, record);\n    }\n    return this.validator.validate(record);\n  }\n}\nfunction createRecordType(typeName, config) {\n  return new RecordType(typeName, {\n    createDefaultProperties: () => ({}),\n    validator: config.validator,\n    scope: config.scope,\n    ephemeralKeys: config.ephemeralKeys\n  });\n}\nfunction assertIdType(id, type) {\n  if (!id || !type.isId(id)) {\n    throw new Error(`string ${JSON.stringify(id)} is not a valid ${type.typeName} id`);\n  }\n}\n\n//# sourceMappingURL=RecordType.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3JkVHlwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0RTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywrREFBZ0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsR0FBRyw4REFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHVEQUFRO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEdBQUcsZ0NBQWdDLGNBQWM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxjQUFjO0FBQzFFLCtEQUErRCxlQUFlO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9CQUFvQixpQkFBaUIsZUFBZTtBQUNsRjtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL1JlY29yZFR5cGUubWpzPzBlNWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JqZWN0TWFwRW50cmllcywgc3RydWN0dXJlZENsb25lLCB1bmlxdWVJZCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5jbGFzcyBSZWNvcmRUeXBlIHtcbiAgY29uc3RydWN0b3IodHlwZU5hbWUsIGNvbmZpZykge1xuICAgIHRoaXMudHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICB0aGlzLmNyZWF0ZURlZmF1bHRQcm9wZXJ0aWVzID0gY29uZmlnLmNyZWF0ZURlZmF1bHRQcm9wZXJ0aWVzO1xuICAgIHRoaXMudmFsaWRhdG9yID0gY29uZmlnLnZhbGlkYXRvciA/PyB7IHZhbGlkYXRlOiAocikgPT4gciB9O1xuICAgIHRoaXMuc2NvcGUgPSBjb25maWcuc2NvcGUgPz8gXCJkb2N1bWVudFwiO1xuICAgIHRoaXMuZXBoZW1lcmFsS2V5cyA9IGNvbmZpZy5lcGhlbWVyYWxLZXlzO1xuICAgIGNvbnN0IGVwaGVtZXJhbEtleVNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgaWYgKGNvbmZpZy5lcGhlbWVyYWxLZXlzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGlzRXBoZW1lcmFsXSBvZiBvYmplY3RNYXBFbnRyaWVzKGNvbmZpZy5lcGhlbWVyYWxLZXlzKSkge1xuICAgICAgICBpZiAoaXNFcGhlbWVyYWwpIGVwaGVtZXJhbEtleVNldC5hZGQoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lcGhlbWVyYWxLZXlTZXQgPSBlcGhlbWVyYWxLZXlTZXQ7XG4gIH1cbiAgY3JlYXRlRGVmYXVsdFByb3BlcnRpZXM7XG4gIHZhbGlkYXRvcjtcbiAgZXBoZW1lcmFsS2V5cztcbiAgZXBoZW1lcmFsS2V5U2V0O1xuICBzY29wZTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyByZWNvcmQgb2YgdGhpcyB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvcGVydGllcyAtIFRoZSBwcm9wZXJ0aWVzIG9mIHRoZSByZWNvcmQuXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgcmVjb3JkLlxuICAgKi9cbiAgY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLnRoaXMuY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMoKSwgaWQ6IHRoaXMuY3JlYXRlSWQoKSB9O1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlc3VsdFtrXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC50eXBlTmFtZSA9IHRoaXMudHlwZU5hbWU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgYSByZWNvcmQgb2YgdGhpcyB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gcmVjb3JkIC0gVGhlIHJlY29yZCB0byBjbG9uZS5cbiAgICogQHJldHVybnMgVGhlIGNsb25lZCByZWNvcmQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb25lKHJlY29yZCkge1xuICAgIHJldHVybiB7IC4uLnN0cnVjdHVyZWRDbG9uZShyZWNvcmQpLCBpZDogdGhpcy5jcmVhdGVJZCgpIH07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJRCBmb3IgdGhpcyByZWNvcmQgdHlwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgaWQgPSByZWNvcmRUeXBlLmNyZWF0ZUlkKClcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgSUQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUlkKGN1c3RvbVVuaXF1ZVBhcnQpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlTmFtZSArIFwiOlwiICsgKGN1c3RvbVVuaXF1ZVBhcnQgPz8gdW5pcXVlSWQoKSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJRCBmb3IgdGhpcyByZWNvcmQgdHlwZSBiYXNlZCBvbiB0aGUgZ2l2ZW4gSUQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGlkID0gcmVjb3JkVHlwZS5jcmVhdGVDdXN0b21JZCgnbXlJZCcpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCAtIFVzZSBgY3JlYXRlSWRgIGluc3RlYWQuXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBJRCB0byBiYXNlIHRoZSBuZXcgSUQgb24uXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgSUQuXG4gICAqL1xuICBjcmVhdGVDdXN0b21JZChpZCkge1xuICAgIHJldHVybiB0aGlzLnR5cGVOYW1lICsgXCI6XCIgKyBpZDtcbiAgfVxuICAvKipcbiAgICogVGFrZXMgYW4gaWQgbGlrZSBgdXNlcjoxMjNgIGFuZCByZXR1cm5zIHRoZSBwYXJ0IGFmdGVyIHRoZSBjb2xvbiBgMTIzYFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIHBhcnNlSWQoaWQpIHtcbiAgICBpZiAoIXRoaXMuaXNJZChpZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSUQgXCIke2lkfVwiIGlzIG5vdCBhIHZhbGlkIElEIGZvciB0eXBlIFwiJHt0aGlzLnR5cGVOYW1lfVwiYCk7XG4gICAgfVxuICAgIHJldHVybiBpZC5zbGljZSh0aGlzLnR5cGVOYW1lLmxlbmd0aCArIDEpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIGEgcmVjb3JkIGlzIGFuIGluc3RhbmNlIG9mIHRoaXMgcmVjb3JkIHR5cGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IHJlc3VsdCA9IHJlY29yZFR5cGUuaXNJbnN0YW5jZShzb21lUmVjb3JkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHJlY29yZCAtIFRoZSByZWNvcmQgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHJlY29yZCBpcyBhbiBpbnN0YW5jZSBvZiB0aGlzIHJlY29yZCB0eXBlLlxuICAgKi9cbiAgaXNJbnN0YW5jZShyZWNvcmQpIHtcbiAgICByZXR1cm4gcmVjb3JkPy50eXBlTmFtZSA9PT0gdGhpcy50eXBlTmFtZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciBhbiBpZCBpcyBhbiBpZCBvZiB0aGlzIHR5cGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IHJlc3VsdCA9IHJlY29yZFR5cGUuaXNJbignc29tZUlkJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCB0byBjaGVjay5cbiAgICogQHJldHVybnMgV2hldGhlciB0aGUgaWQgaXMgYW4gaWQgb2YgdGhpcyB0eXBlLlxuICAgKi9cbiAgaXNJZChpZCkge1xuICAgIGlmICghaWQpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHlwZU5hbWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZFtpXSAhPT0gdGhpcy50eXBlTmFtZVtpXSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gaWRbdGhpcy50eXBlTmFtZS5sZW5ndGhdID09PSBcIjpcIjtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFJlY29yZFR5cGUgdGhhdCBoYXMgdGhlIHNhbWUgdHlwZSBuYW1lIGFzIHRoaXMgUmVjb3JkVHlwZSBhbmQgaW5jbHVkZXMgdGhlIGdpdmVuXG4gICAqIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgYXV0aG9yVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoJ2F1dGhvcicsICgpID0+ICh7IGxpdmluZzogdHJ1ZSB9KSlcbiAgICogY29uc3QgZGVhZEF1dGhvclR5cGUgPSBhdXRob3JUeXBlLndpdGhEZWZhdWx0UHJvcGVydGllcyh7IGxpdmluZzogZmFsc2UgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjcmVhdGVEZWZhdWx0UHJvcGVydGllcyAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBkZWZhdWx0IHByb3BlcnRpZXMgb2YgdGhlIG5ldyBSZWNvcmRUeXBlLlxuICAgKiBAcmV0dXJucyBUaGUgbmV3IFJlY29yZFR5cGUuXG4gICAqL1xuICB3aXRoRGVmYXVsdFByb3BlcnRpZXMoY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gbmV3IFJlY29yZFR5cGUodGhpcy50eXBlTmFtZSwge1xuICAgICAgY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMsXG4gICAgICB2YWxpZGF0b3I6IHRoaXMudmFsaWRhdG9yLFxuICAgICAgc2NvcGU6IHRoaXMuc2NvcGUsXG4gICAgICBlcGhlbWVyYWxLZXlzOiB0aGlzLmVwaGVtZXJhbEtleXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgdGhhdCB0aGUgcGFzc2VkIGluIHJlY29yZCBwYXNzZXMgdGhlIHZhbGlkYXRpb25zIGZvciB0aGlzIHR5cGUuIFJldHVybnMgaXRzIGlucHV0XG4gICAqIGNvcnJlY3RseSB0eXBlZCBpZiBpdCBkb2VzLCBidXQgdGhyb3dzIGFuIGVycm9yIG90aGVyd2lzZS5cbiAgICovXG4gIHZhbGlkYXRlKHJlY29yZCwgcmVjb3JkQmVmb3JlKSB7XG4gICAgaWYgKHJlY29yZEJlZm9yZSAmJiB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHJlY29yZEJlZm9yZSwgcmVjb3JkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlKHJlY29yZCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZFR5cGUodHlwZU5hbWUsIGNvbmZpZykge1xuICByZXR1cm4gbmV3IFJlY29yZFR5cGUodHlwZU5hbWUsIHtcbiAgICBjcmVhdGVEZWZhdWx0UHJvcGVydGllczogKCkgPT4gKHt9KSxcbiAgICB2YWxpZGF0b3I6IGNvbmZpZy52YWxpZGF0b3IsXG4gICAgc2NvcGU6IGNvbmZpZy5zY29wZSxcbiAgICBlcGhlbWVyYWxLZXlzOiBjb25maWcuZXBoZW1lcmFsS2V5c1xuICB9KTtcbn1cbmZ1bmN0aW9uIGFzc2VydElkVHlwZShpZCwgdHlwZSkge1xuICBpZiAoIWlkIHx8ICF0eXBlLmlzSWQoaWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBzdHJpbmcgJHtKU09OLnN0cmluZ2lmeShpZCl9IGlzIG5vdCBhIHZhbGlkICR7dHlwZS50eXBlTmFtZX0gaWRgKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUmVjb3JkVHlwZSxcbiAgYXNzZXJ0SWRUeXBlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb3JkVHlwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmptyRecordsDiff: () => (/* binding */ createEmptyRecordsDiff),\n/* harmony export */   isRecordsDiffEmpty: () => (/* binding */ isRecordsDiffEmpty),\n/* harmony export */   reverseRecordsDiff: () => (/* binding */ reverseRecordsDiff),\n/* harmony export */   squashRecordDiffs: () => (/* binding */ squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* binding */ squashRecordDiffsMutable)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction createEmptyRecordsDiff() {\n  return { added: {}, updated: {}, removed: {} };\n}\nfunction reverseRecordsDiff(diff) {\n  const result = { added: diff.removed, removed: diff.added, updated: {} };\n  for (const [from, to] of Object.values(diff.updated)) {\n    result.updated[from.id] = [to, from];\n  }\n  return result;\n}\nfunction isRecordsDiffEmpty(diff) {\n  return Object.keys(diff.added).length === 0 && Object.keys(diff.updated).length === 0 && Object.keys(diff.removed).length === 0;\n}\nfunction squashRecordDiffs(diffs) {\n  const result = { added: {}, removed: {}, updated: {} };\n  squashRecordDiffsMutable(result, diffs);\n  return result;\n}\nfunction squashRecordDiffsMutable(target, diffs) {\n  for (const diff of diffs) {\n    for (const [id, value] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.added)) {\n      if (target.removed[id]) {\n        const original = target.removed[id];\n        delete target.removed[id];\n        if (original !== value) {\n          target.updated[id] = [original, value];\n        }\n      } else {\n        target.added[id] = value;\n      }\n    }\n    for (const [id, [_from, to]] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.updated)) {\n      if (target.added[id]) {\n        target.added[id] = to;\n        delete target.updated[id];\n        delete target.removed[id];\n        continue;\n      }\n      if (target.updated[id]) {\n        target.updated[id] = [target.updated[id][0], to];\n        delete target.removed[id];\n        continue;\n      }\n      target.updated[id] = diff.updated[id];\n      delete target.removed[id];\n    }\n    for (const [id, value] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.removed)) {\n      if (target.added[id]) {\n        delete target.added[id];\n      } else if (target.updated[id]) {\n        target.removed[id] = target.updated[id][0];\n        delete target.updated[id];\n      } else {\n        target.removed[id] = value;\n      }\n    }\n  }\n}\n\n//# sourceMappingURL=RecordsDiff.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3Jkc0RpZmYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRDtBQUNqRDtBQUNBLFdBQVcsU0FBUyxhQUFhO0FBQ2pDO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFNBQVMsYUFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLCtEQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFnQjtBQUM5QztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9SZWNvcmRzRGlmZi5tanM/OTUwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvYmplY3RNYXBFbnRyaWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYoKSB7XG4gIHJldHVybiB7IGFkZGVkOiB7fSwgdXBkYXRlZDoge30sIHJlbW92ZWQ6IHt9IH07XG59XG5mdW5jdGlvbiByZXZlcnNlUmVjb3Jkc0RpZmYoZGlmZikge1xuICBjb25zdCByZXN1bHQgPSB7IGFkZGVkOiBkaWZmLnJlbW92ZWQsIHJlbW92ZWQ6IGRpZmYuYWRkZWQsIHVwZGF0ZWQ6IHt9IH07XG4gIGZvciAoY29uc3QgW2Zyb20sIHRvXSBvZiBPYmplY3QudmFsdWVzKGRpZmYudXBkYXRlZCkpIHtcbiAgICByZXN1bHQudXBkYXRlZFtmcm9tLmlkXSA9IFt0bywgZnJvbV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGlzUmVjb3Jkc0RpZmZFbXB0eShkaWZmKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhkaWZmLmFkZGVkKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoZGlmZi51cGRhdGVkKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoZGlmZi5yZW1vdmVkKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiBzcXVhc2hSZWNvcmREaWZmcyhkaWZmcykge1xuICBjb25zdCByZXN1bHQgPSB7IGFkZGVkOiB7fSwgcmVtb3ZlZDoge30sIHVwZGF0ZWQ6IHt9IH07XG4gIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZShyZXN1bHQsIGRpZmZzKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZSh0YXJnZXQsIGRpZmZzKSB7XG4gIGZvciAoY29uc3QgZGlmZiBvZiBkaWZmcykge1xuICAgIGZvciAoY29uc3QgW2lkLCB2YWx1ZV0gb2Ygb2JqZWN0TWFwRW50cmllcyhkaWZmLmFkZGVkKSkge1xuICAgICAgaWYgKHRhcmdldC5yZW1vdmVkW2lkXSkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHRhcmdldC5yZW1vdmVkW2lkXTtcbiAgICAgICAgZGVsZXRlIHRhcmdldC5yZW1vdmVkW2lkXTtcbiAgICAgICAgaWYgKG9yaWdpbmFsICE9PSB2YWx1ZSkge1xuICAgICAgICAgIHRhcmdldC51cGRhdGVkW2lkXSA9IFtvcmlnaW5hbCwgdmFsdWVdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuYWRkZWRbaWRdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2lkLCBbX2Zyb20sIHRvXV0gb2Ygb2JqZWN0TWFwRW50cmllcyhkaWZmLnVwZGF0ZWQpKSB7XG4gICAgICBpZiAodGFyZ2V0LmFkZGVkW2lkXSkge1xuICAgICAgICB0YXJnZXQuYWRkZWRbaWRdID0gdG87XG4gICAgICAgIGRlbGV0ZSB0YXJnZXQudXBkYXRlZFtpZF07XG4gICAgICAgIGRlbGV0ZSB0YXJnZXQucmVtb3ZlZFtpZF07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRhcmdldC51cGRhdGVkW2lkXSkge1xuICAgICAgICB0YXJnZXQudXBkYXRlZFtpZF0gPSBbdGFyZ2V0LnVwZGF0ZWRbaWRdWzBdLCB0b107XG4gICAgICAgIGRlbGV0ZSB0YXJnZXQucmVtb3ZlZFtpZF07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdGFyZ2V0LnVwZGF0ZWRbaWRdID0gZGlmZi51cGRhdGVkW2lkXTtcbiAgICAgIGRlbGV0ZSB0YXJnZXQucmVtb3ZlZFtpZF07XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2lkLCB2YWx1ZV0gb2Ygb2JqZWN0TWFwRW50cmllcyhkaWZmLnJlbW92ZWQpKSB7XG4gICAgICBpZiAodGFyZ2V0LmFkZGVkW2lkXSkge1xuICAgICAgICBkZWxldGUgdGFyZ2V0LmFkZGVkW2lkXTtcbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnVwZGF0ZWRbaWRdKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVkW2lkXSA9IHRhcmdldC51cGRhdGVkW2lkXVswXTtcbiAgICAgICAgZGVsZXRlIHRhcmdldC51cGRhdGVkW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVkW2lkXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZXhwb3J0IHtcbiAgY3JlYXRlRW1wdHlSZWNvcmRzRGlmZixcbiAgaXNSZWNvcmRzRGlmZkVtcHR5LFxuICByZXZlcnNlUmVjb3Jkc0RpZmYsXG4gIHNxdWFzaFJlY29yZERpZmZzLFxuICBzcXVhc2hSZWNvcmREaWZmc011dGFibGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvcmRzRGlmZi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/Store.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Store: () => (/* binding */ Store),\n/* harmony export */   createComputedCache: () => (/* binding */ createComputedCache)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RecordsDiff.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\");\n/* harmony import */ var _StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StoreQueries.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\");\n/* harmony import */ var _StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StoreSideEffects.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\");\n/* harmony import */ var _devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./devFreeze.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\");\n\n\n\n\n\n\nclass Store {\n  /**\n   * The random id of the store.\n   */\n  id;\n  /**\n   * An atom containing the store's atoms.\n   *\n   * @internal\n   * @readonly\n   */\n  atoms = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"store_atoms\", {});\n  /**\n   * An atom containing the store's history.\n   *\n   * @public\n   * @readonly\n   */\n  history = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"history\", 0, {\n    historyLength: 1e3\n  });\n  /**\n   * A StoreQueries instance for this store.\n   *\n   * @public\n   * @readonly\n   */\n  query = new _StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_3__.StoreQueries(this.atoms, this.history);\n  /**\n   * A set containing listeners that have been added to this store.\n   *\n   * @internal\n   */\n  listeners = /* @__PURE__ */ new Set();\n  /**\n   * An array of history entries that have not yet been flushed.\n   *\n   * @internal\n   */\n  historyAccumulator = new HistoryAccumulator();\n  /**\n   * A reactor that responds to changes to the history by squashing the accumulated history and\n   * notifying listeners of the changes.\n   *\n   * @internal\n   */\n  historyReactor;\n  /**\n   * Function to dispose of any in-flight timeouts.\n   *\n   * @internal\n   */\n  cancelHistoryReactor() {\n  }\n  schema;\n  props;\n  scopedTypes;\n  sideEffects = new _StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_4__.StoreSideEffects(this);\n  constructor(config) {\n    const { initialData, schema, id } = config;\n    this.id = id ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)();\n    this.schema = schema;\n    this.props = config.props;\n    if (initialData) {\n      this.atoms.set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapFromEntries)(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(initialData).map(([id2, record]) => [\n            id2,\n            (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n              \"atom:\" + id2,\n              (0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(this.schema.validateRecord(this, record, \"initialize\", null))\n            )\n          ])\n        )\n      );\n    }\n    this.historyReactor = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.reactor)(\n      \"Store.historyReactor\",\n      () => {\n        this.history.get();\n        this._flushHistory();\n      },\n      { scheduleEffect: (cb) => this.cancelHistoryReactor = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.throttleToNextFrame)(cb) }\n    );\n    this.scopedTypes = {\n      document: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"document\").map((t) => t.typeName)\n      ),\n      session: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"session\").map((t) => t.typeName)\n      ),\n      presence: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"presence\").map((t) => t.typeName)\n      )\n    };\n  }\n  _flushHistory() {\n    if (this.historyAccumulator.hasChanges()) {\n      const entries = this.historyAccumulator.flush();\n      for (const { changes, source } of entries) {\n        let instanceChanges = null;\n        let documentChanges = null;\n        let presenceChanges = null;\n        for (const { onHistory, filters } of this.listeners) {\n          if (filters.source !== \"all\" && filters.source !== source) {\n            continue;\n          }\n          if (filters.scope !== \"all\") {\n            if (filters.scope === \"document\") {\n              documentChanges ??= this.filterChangesByScope(changes, \"document\");\n              if (!documentChanges) continue;\n              onHistory({ changes: documentChanges, source });\n            } else if (filters.scope === \"session\") {\n              instanceChanges ??= this.filterChangesByScope(changes, \"session\");\n              if (!instanceChanges) continue;\n              onHistory({ changes: instanceChanges, source });\n            } else {\n              presenceChanges ??= this.filterChangesByScope(changes, \"presence\");\n              if (!presenceChanges) continue;\n              onHistory({ changes: presenceChanges, source });\n            }\n          } else {\n            onHistory({ changes, source });\n          }\n        }\n      }\n    }\n  }\n  dispose() {\n    this.cancelHistoryReactor();\n  }\n  /**\n   * Filters out non-document changes from a diff. Returns null if there are no changes left.\n   * @param change - the records diff\n   * @param scope - the records scope\n   * @returns\n   */\n  filterChangesByScope(change, scope) {\n    const result = {\n      added: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.added, (_, r) => this.scopedTypes[scope].has(r.typeName)),\n      updated: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.updated, (_, r) => this.scopedTypes[scope].has(r[1].typeName)),\n      removed: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.removed, (_, r) => this.scopedTypes[scope].has(r.typeName))\n    };\n    if (Object.keys(result.added).length === 0 && Object.keys(result.updated).length === 0 && Object.keys(result.removed).length === 0) {\n      return null;\n    }\n    return result;\n  }\n  /**\n   * Update the history with a diff of changes.\n   *\n   * @param changes - The changes to add to the history.\n   */\n  updateHistory(changes) {\n    this.historyAccumulator.add({\n      changes,\n      source: this.isMergingRemoteChanges ? \"remote\" : \"user\"\n    });\n    if (this.listeners.size === 0) {\n      this.historyAccumulator.clear();\n    }\n    this.history.set(this.history.get() + 1, changes);\n  }\n  validate(phase) {\n    this.allRecords().forEach((record) => this.schema.validateRecord(this, record, phase, null));\n  }\n  /**\n   * Add some records to the store. It's an error if they already exist.\n   *\n   * @param records - The records to add.\n   * @param phaseOverride - The phase override.\n   * @public\n   */\n  put(records, phaseOverride) {\n    this.atomic(() => {\n      const updates = {};\n      const additions = {};\n      const currentMap = this.atoms.__unsafe__getWithoutCapture();\n      let map = null;\n      let record;\n      let didChange = false;\n      const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n      for (let i = 0, n = records.length; i < n; i++) {\n        record = records[i];\n        const recordAtom = (map ?? currentMap)[record.id];\n        if (recordAtom) {\n          const initialValue = recordAtom.__unsafe__getWithoutCapture();\n          record = this.sideEffects.handleBeforeChange(initialValue, record, source);\n          const validated = this.schema.validateRecord(\n            this,\n            record,\n            phaseOverride ?? \"updateRecord\",\n            initialValue\n          );\n          if (validated === initialValue) continue;\n          recordAtom.set((0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(record));\n          didChange = true;\n          const updated = recordAtom.__unsafe__getWithoutCapture();\n          updates[record.id] = [initialValue, updated];\n          this.addDiffForAfterEvent(initialValue, updated);\n        } else {\n          record = this.sideEffects.handleBeforeCreate(record, source);\n          didChange = true;\n          record = this.schema.validateRecord(\n            this,\n            record,\n            phaseOverride ?? \"createRecord\",\n            null\n          );\n          additions[record.id] = record;\n          this.addDiffForAfterEvent(null, record);\n          if (!map) {\n            map = { ...currentMap };\n          }\n          map[record.id] = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"atom:\" + record.id, record);\n        }\n      }\n      if (map) {\n        this.atoms.set(map);\n      }\n      if (!didChange) return;\n      this.updateHistory({\n        added: additions,\n        updated: updates,\n        removed: {}\n      });\n    });\n  }\n  /**\n   * Remove some records from the store via their ids.\n   *\n   * @param ids - The ids of the records to remove.\n   * @public\n   */\n  remove(ids) {\n    this.atomic(() => {\n      const cancelled = /* @__PURE__ */ new Set();\n      const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n      if (this.sideEffects.isEnabled()) {\n        for (const id of ids) {\n          const atom2 = this.atoms.__unsafe__getWithoutCapture()[id];\n          if (!atom2) continue;\n          if (this.sideEffects.handleBeforeDelete(atom2.get(), source) === false) {\n            cancelled.add(id);\n          }\n        }\n      }\n      let removed = void 0;\n      this.atoms.update((atoms) => {\n        let result = void 0;\n        for (const id of ids) {\n          if (cancelled.has(id)) continue;\n          if (!(id in atoms)) continue;\n          if (!result) result = { ...atoms };\n          if (!removed) removed = {};\n          delete result[id];\n          const record = atoms[id].get();\n          removed[id] = record;\n          this.addDiffForAfterEvent(record, null);\n        }\n        return result ?? atoms;\n      });\n      if (!removed) return;\n      this.updateHistory({ added: {}, updated: {}, removed });\n    });\n  }\n  /**\n   * Get the value of a store record by its id.\n   *\n   * @param id - The id of the record to get.\n   * @public\n   */\n  get(id) {\n    return this.atoms.get()[id]?.get();\n  }\n  /**\n   * Get the value of a store record by its id without updating its epoch.\n   *\n   * @param id - The id of the record to get.\n   * @public\n   */\n  unsafeGetWithoutCapture(id) {\n    return this.atoms.__unsafe__getWithoutCapture()[id]?.__unsafe__getWithoutCapture();\n  }\n  /**\n   * Creates a JSON payload from the record store.\n   *\n   * @param scope - The scope of records to serialize. Defaults to 'document'.\n   * @returns The record store snapshot as a JSON payload.\n   */\n  serialize(scope = \"document\") {\n    const result = {};\n    for (const [id, atom2] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(this.atoms.get())) {\n      const record = atom2.get();\n      if (scope === \"all\" || this.scopedTypes[scope].has(record.typeName)) {\n        result[id] = record;\n      }\n    }\n    return result;\n  }\n  /**\n   * Get a serialized snapshot of the store and its schema.\n   *\n   * ```ts\n   * const snapshot = store.getStoreSnapshot()\n   * store.loadStoreSnapshot(snapshot)\n   * ```\n   *\n   * @param scope - The scope of records to serialize. Defaults to 'document'.\n   *\n   * @public\n   */\n  getStoreSnapshot(scope = \"document\") {\n    return {\n      store: this.serialize(scope),\n      schema: this.schema.serialize()\n    };\n  }\n  /**\n   * @deprecated use `getSnapshot` from the 'tldraw' package instead.\n   */\n  getSnapshot(scope = \"document\") {\n    console.warn(\n      \"[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead.\"\n    );\n    return this.getStoreSnapshot(scope);\n  }\n  /**\n   * Migrate a serialized snapshot of the store and its schema.\n   *\n   * ```ts\n   * const snapshot = store.getSnapshot()\n   * store.migrateSnapshot(snapshot)\n   * ```\n   *\n   * @param snapshot - The snapshot to load.\n   * @public\n   */\n  migrateSnapshot(snapshot) {\n    const migrationResult = this.schema.migrateStoreSnapshot(snapshot);\n    if (migrationResult.type === \"error\") {\n      throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);\n    }\n    return {\n      store: migrationResult.value,\n      schema: this.schema.serialize()\n    };\n  }\n  /**\n   * Load a serialized snapshot.\n   *\n   * ```ts\n   * const snapshot = store.getStoreSnapshot()\n   * store.loadStoreSnapshot(snapshot)\n   * ```\n   *\n   * @param snapshot - The snapshot to load.\n   * @public\n   */\n  loadStoreSnapshot(snapshot) {\n    const migrationResult = this.schema.migrateStoreSnapshot(snapshot);\n    if (migrationResult.type === \"error\") {\n      throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);\n    }\n    const prevSideEffectsEnabled = this.sideEffects.isEnabled();\n    try {\n      this.sideEffects.setIsEnabled(false);\n      this.atomic(() => {\n        this.clear();\n        this.put(Object.values(migrationResult.value));\n        this.ensureStoreIsUsable();\n      });\n    } finally {\n      this.sideEffects.setIsEnabled(prevSideEffectsEnabled);\n    }\n  }\n  /**\n   * @public\n   * @deprecated use `loadSnapshot` from the 'tldraw' package instead.\n   */\n  loadSnapshot(snapshot) {\n    console.warn(\n      \"[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead.\"\n    );\n    this.loadStoreSnapshot(snapshot);\n  }\n  /**\n   * Get an array of all values in the store.\n   *\n   * @returns An array of all values in the store.\n   * @public\n   */\n  allRecords() {\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get()).map((atom2) => atom2.get());\n  }\n  /**\n   * Removes all records from the store.\n   *\n   * @public\n   */\n  clear() {\n    this.remove((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapKeys)(this.atoms.get()));\n  }\n  /**\n   * Update a record. To update multiple records at once, use the `update` method of the\n   * `TypedStore` class.\n   *\n   * @param id - The id of the record to update.\n   * @param updater - A function that updates the record.\n   */\n  update(id, updater) {\n    const atom2 = this.atoms.get()[id];\n    if (!atom2) {\n      console.error(`Record ${id} not found. This is probably an error`);\n      return;\n    }\n    this.put([updater(atom2.__unsafe__getWithoutCapture())]);\n  }\n  /**\n   * Get whether the record store has a id.\n   *\n   * @param id - The id of the record to check.\n   * @public\n   */\n  has(id) {\n    return !!this.atoms.get()[id];\n  }\n  /**\n   * Add a new listener to the store.\n   *\n   * @param onHistory - The listener to call when the store updates.\n   * @param filters - Filters to apply to the listener.\n   * @returns A function to remove the listener.\n   */\n  listen(onHistory, filters) {\n    this._flushHistory();\n    const listener = {\n      onHistory,\n      filters: {\n        source: filters?.source ?? \"all\",\n        scope: filters?.scope ?? \"all\"\n      }\n    };\n    this.listeners.add(listener);\n    if (!this.historyReactor.scheduler.isActivelyListening) {\n      this.historyReactor.start();\n    }\n    return () => {\n      this.listeners.delete(listener);\n      if (this.listeners.size === 0) {\n        this.historyReactor.stop();\n      }\n    };\n  }\n  isMergingRemoteChanges = false;\n  /**\n   * Merge changes from a remote source without triggering listeners.\n   *\n   * @param fn - A function that merges the external changes.\n   * @public\n   */\n  mergeRemoteChanges(fn) {\n    if (this.isMergingRemoteChanges) {\n      return fn();\n    }\n    if (this._isInAtomicOp) {\n      throw new Error(\"Cannot merge remote changes while in atomic operation\");\n    }\n    try {\n      this.isMergingRemoteChanges = true;\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n    } finally {\n      this.isMergingRemoteChanges = false;\n    }\n  }\n  /**\n   * Run `fn` and return a {@link RecordsDiff} of the changes that occurred as a result.\n   */\n  extractingChanges(fn) {\n    const changes = [];\n    const dispose = this.historyAccumulator.addInterceptor((entry) => changes.push(entry.changes));\n    try {\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n      return (0,_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffs)(changes);\n    } finally {\n      dispose();\n    }\n  }\n  applyDiff(diff, {\n    runCallbacks = true,\n    ignoreEphemeralKeys = false\n  } = {}) {\n    this.atomic(() => {\n      const toPut = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(diff.added);\n      for (const [_from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(diff.updated)) {\n        const type = this.schema.getType(to.typeName);\n        if (ignoreEphemeralKeys && type.ephemeralKeySet.size) {\n          const existing = this.get(to.id);\n          if (!existing) {\n            toPut.push(to);\n            continue;\n          }\n          let changed = null;\n          for (const [key, value] of Object.entries(to)) {\n            if (type.ephemeralKeySet.has(key) || Object.is(value, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnProperty)(existing, key))) {\n              continue;\n            }\n            if (!changed) changed = { ...existing };\n            changed[key] = value;\n          }\n          if (changed) toPut.push(changed);\n        } else {\n          toPut.push(to);\n        }\n      }\n      const toRemove = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapKeys)(diff.removed);\n      if (toPut.length) {\n        this.put(toPut);\n      }\n      if (toRemove.length) {\n        this.remove(toRemove);\n      }\n    }, runCallbacks);\n  }\n  /**\n   * Create a computed cache.\n   *\n   * @param name - The name of the derivation cache.\n   * @param derive - A function used to derive the value of the cache.\n   * @param isEqual - A function that determins equality between two records.\n   * @public\n   */\n  createComputedCache(name, derive, isEqual) {\n    const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n    return {\n      get: (id) => {\n        const atom2 = this.atoms.get()[id];\n        if (!atom2) {\n          return void 0;\n        }\n        return cache.get(atom2, () => {\n          const recordSignal = isEqual ? (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(atom2.name + \":equals\", () => atom2.get(), { isEqual }) : atom2;\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name + \":\" + id, () => {\n            return derive(recordSignal.get());\n          });\n        }).get();\n      }\n    };\n  }\n  /**\n   * Create a computed cache from a selector\n   *\n   * @param name - The name of the derivation cache.\n   * @param selector - A function that returns a subset of the original shape\n   * @param derive - A function used to derive the value of the cache.\n   * @public\n   */\n  createSelectedComputedCache(name, selector, derive) {\n    const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n    return {\n      get: (id) => {\n        const atom2 = this.atoms.get()[id];\n        if (!atom2) {\n          return void 0;\n        }\n        return cache.get(atom2, () => {\n          const d = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n            name + \":\" + id + \":selector\",\n            () => selector(atom2.get())\n          );\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name + \":\" + id, () => derive(d.get()));\n        }).get();\n      }\n    };\n  }\n  _integrityChecker;\n  /** @internal */\n  ensureStoreIsUsable() {\n    this.atomic(() => {\n      this._integrityChecker ??= this.schema.createIntegrityChecker(this);\n      this._integrityChecker?.();\n    });\n  }\n  _isPossiblyCorrupted = false;\n  /** @internal */\n  markAsPossiblyCorrupted() {\n    this._isPossiblyCorrupted = true;\n  }\n  /** @internal */\n  isPossiblyCorrupted() {\n    return this._isPossiblyCorrupted;\n  }\n  pendingAfterEvents = null;\n  addDiffForAfterEvent(before, after) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(this.pendingAfterEvents, \"must be in event operation\");\n    if (before === after) return;\n    if (before && after) (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(before.id === after.id);\n    if (!before && !after) return;\n    const id = (before || after).id;\n    const existing = this.pendingAfterEvents.get(id);\n    if (existing) {\n      existing.after = after;\n    } else {\n      this.pendingAfterEvents.set(id, { before, after });\n    }\n  }\n  flushAtomicCallbacks() {\n    let updateDepth = 0;\n    const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n    while (this.pendingAfterEvents) {\n      const events = this.pendingAfterEvents;\n      this.pendingAfterEvents = null;\n      if (!this.sideEffects.isEnabled()) continue;\n      updateDepth++;\n      if (updateDepth > 100) {\n        throw new Error(\"Maximum store update depth exceeded, bailing out\");\n      }\n      for (const { before, after } of events.values()) {\n        if (before && after) {\n          this.sideEffects.handleAfterChange(before, after, source);\n        } else if (before && !after) {\n          this.sideEffects.handleAfterDelete(before, source);\n        } else if (!before && after) {\n          this.sideEffects.handleAfterCreate(after, source);\n        }\n      }\n      if (!this.pendingAfterEvents) {\n        this.sideEffects.handleOperationComplete(source);\n      }\n    }\n  }\n  _isInAtomicOp = false;\n  /** @internal */\n  atomic(fn, runCallbacks = true) {\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      if (this._isInAtomicOp) {\n        if (!this.pendingAfterEvents) this.pendingAfterEvents = /* @__PURE__ */ new Map();\n        return fn();\n      }\n      this.pendingAfterEvents = /* @__PURE__ */ new Map();\n      const prevSideEffectsEnabled = this.sideEffects.isEnabled();\n      this.sideEffects.setIsEnabled(runCallbacks ?? prevSideEffectsEnabled);\n      this._isInAtomicOp = true;\n      try {\n        const result = fn();\n        this.flushAtomicCallbacks();\n        return result;\n      } finally {\n        this.pendingAfterEvents = null;\n        this.sideEffects.setIsEnabled(prevSideEffectsEnabled);\n        this._isInAtomicOp = false;\n      }\n    });\n  }\n  /** @internal */\n  addHistoryInterceptor(fn) {\n    return this.historyAccumulator.addInterceptor(\n      (entry) => fn(entry, this.isMergingRemoteChanges ? \"remote\" : \"user\")\n    );\n  }\n}\nfunction squashHistoryEntries(entries) {\n  if (entries.length === 0) return [];\n  const chunked = [];\n  let chunk = [entries[0]];\n  let entry;\n  for (let i = 1, n = entries.length; i < n; i++) {\n    entry = entries[i];\n    if (chunk[0].source !== entry.source) {\n      chunked.push(chunk);\n      chunk = [];\n    }\n    chunk.push(entry);\n  }\n  chunked.push(chunk);\n  return (0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(\n    chunked.map((chunk2) => ({\n      source: chunk2[0].source,\n      changes: (0,_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffs)(chunk2.map((e) => e.changes))\n    }))\n  );\n}\nclass HistoryAccumulator {\n  _history = [];\n  _interceptors = /* @__PURE__ */ new Set();\n  addInterceptor(fn) {\n    this._interceptors.add(fn);\n    return () => {\n      this._interceptors.delete(fn);\n    };\n  }\n  add(entry) {\n    this._history.push(entry);\n    for (const interceptor of this._interceptors) {\n      interceptor(entry);\n    }\n  }\n  flush() {\n    const history = squashHistoryEntries(this._history);\n    this._history = [];\n    return history;\n  }\n  clear() {\n    this._history = [];\n  }\n  hasChanges() {\n    return this._history.length > 0;\n  }\n}\nfunction createComputedCache(name, derive, isEqual) {\n  const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n  return {\n    get(context, id) {\n      const computedCache = cache.get(context, () => {\n        const store = context instanceof Store ? context : context.store;\n        return store.createComputedCache(name, (record) => derive(context, record), isEqual);\n      });\n      return computedCache.get(id);\n    }\n  };\n}\n\n//# sourceMappingURL=Store.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWtFO0FBWTNDO0FBQytCO0FBQ0o7QUFDUTtBQUNkO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1EQUFJLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtRUFBZ0I7QUFDcEM7QUFDQSxZQUFZLDBCQUEwQjtBQUN0QyxvQkFBb0IsdURBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1FQUFvQjtBQUM1QixVQUFVLCtEQUFnQjtBQUMxQjtBQUNBLFlBQVksbURBQUk7QUFDaEI7QUFDQSxjQUFjLHlEQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsUUFBUSxvREFBb0Qsa0VBQW1CO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscUJBQXFCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtDQUFrQztBQUM1RCxjQUFjO0FBQ2Q7QUFDQTtBQUNBLDBCQUEwQixrQ0FBa0M7QUFDNUQsY0FBYztBQUNkO0FBQ0E7QUFDQSwwQkFBMEIsa0NBQWtDO0FBQzVEO0FBQ0EsWUFBWTtBQUNaLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDREQUFhO0FBQzFCLGVBQWUsNERBQWE7QUFDNUIsZUFBZSw0REFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLE9BQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQSwyQkFBMkIsbURBQUk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwyQkFBMkIsU0FBUyxhQUFhLFdBQVc7QUFDNUQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrREFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELHVCQUF1QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELHVCQUF1QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0REFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLElBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sdURBQVE7QUFDZCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHVEQUFRO0FBQ2QsYUFBYSxtRUFBaUI7QUFDOUIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0Esb0JBQW9CLDhEQUFlO0FBQ25DLGdDQUFnQyw4REFBZTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsNkRBQWM7QUFDaEY7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDREQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1REFBUSw4Q0FBOEMsU0FBUztBQUN4RyxpQkFBaUIsdURBQVE7QUFDekI7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1REFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVE7QUFDekIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQSx5QkFBeUIscURBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTix3Q0FBd0MsZUFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx5REFBUztBQUNsQjtBQUNBO0FBQ0EsZUFBZSxtRUFBaUI7QUFDaEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvREFBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL1N0b3JlLm1qcz82ZWIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIGNvbXB1dGVkLCByZWFjdG9yLCB0cmFuc2FjdCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQge1xuICBXZWFrQ2FjaGUsXG4gIGFzc2VydCxcbiAgZmlsdGVyRW50cmllcyxcbiAgZ2V0T3duUHJvcGVydHksXG4gIG9iamVjdE1hcEVudHJpZXMsXG4gIG9iamVjdE1hcEZyb21FbnRyaWVzLFxuICBvYmplY3RNYXBLZXlzLFxuICBvYmplY3RNYXBWYWx1ZXMsXG4gIHRocm90dGxlVG9OZXh0RnJhbWUsXG4gIHVuaXF1ZUlkXG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBzcXVhc2hSZWNvcmREaWZmcyB9IGZyb20gXCIuL1JlY29yZHNEaWZmLm1qc1wiO1xuaW1wb3J0IHsgU3RvcmVRdWVyaWVzIH0gZnJvbSBcIi4vU3RvcmVRdWVyaWVzLm1qc1wiO1xuaW1wb3J0IHsgU3RvcmVTaWRlRWZmZWN0cyB9IGZyb20gXCIuL1N0b3JlU2lkZUVmZmVjdHMubWpzXCI7XG5pbXBvcnQgeyBkZXZGcmVlemUgfSBmcm9tIFwiLi9kZXZGcmVlemUubWpzXCI7XG5jbGFzcyBTdG9yZSB7XG4gIC8qKlxuICAgKiBUaGUgcmFuZG9tIGlkIG9mIHRoZSBzdG9yZS5cbiAgICovXG4gIGlkO1xuICAvKipcbiAgICogQW4gYXRvbSBjb250YWluaW5nIHRoZSBzdG9yZSdzIGF0b21zLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBhdG9tcyA9IGF0b20oXCJzdG9yZV9hdG9tc1wiLCB7fSk7XG4gIC8qKlxuICAgKiBBbiBhdG9tIGNvbnRhaW5pbmcgdGhlIHN0b3JlJ3MgaGlzdG9yeS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhpc3RvcnkgPSBhdG9tKFwiaGlzdG9yeVwiLCAwLCB7XG4gICAgaGlzdG9yeUxlbmd0aDogMWUzXG4gIH0pO1xuICAvKipcbiAgICogQSBTdG9yZVF1ZXJpZXMgaW5zdGFuY2UgZm9yIHRoaXMgc3RvcmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBxdWVyeSA9IG5ldyBTdG9yZVF1ZXJpZXModGhpcy5hdG9tcywgdGhpcy5oaXN0b3J5KTtcbiAgLyoqXG4gICAqIEEgc2V0IGNvbnRhaW5pbmcgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoaXMgc3RvcmUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIGhpc3RvcnkgZW50cmllcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGZsdXNoZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGlzdG9yeUFjY3VtdWxhdG9yID0gbmV3IEhpc3RvcnlBY2N1bXVsYXRvcigpO1xuICAvKipcbiAgICogQSByZWFjdG9yIHRoYXQgcmVzcG9uZHMgdG8gY2hhbmdlcyB0byB0aGUgaGlzdG9yeSBieSBzcXVhc2hpbmcgdGhlIGFjY3VtdWxhdGVkIGhpc3RvcnkgYW5kXG4gICAqIG5vdGlmeWluZyBsaXN0ZW5lcnMgb2YgdGhlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGlzdG9yeVJlYWN0b3I7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBkaXNwb3NlIG9mIGFueSBpbi1mbGlnaHQgdGltZW91dHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY2FuY2VsSGlzdG9yeVJlYWN0b3IoKSB7XG4gIH1cbiAgc2NoZW1hO1xuICBwcm9wcztcbiAgc2NvcGVkVHlwZXM7XG4gIHNpZGVFZmZlY3RzID0gbmV3IFN0b3JlU2lkZUVmZmVjdHModGhpcyk7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbnN0IHsgaW5pdGlhbERhdGEsIHNjaGVtYSwgaWQgfSA9IGNvbmZpZztcbiAgICB0aGlzLmlkID0gaWQgPz8gdW5pcXVlSWQoKTtcbiAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICB0aGlzLnByb3BzID0gY29uZmlnLnByb3BzO1xuICAgIGlmIChpbml0aWFsRGF0YSkge1xuICAgICAgdGhpcy5hdG9tcy5zZXQoXG4gICAgICAgIG9iamVjdE1hcEZyb21FbnRyaWVzKFxuICAgICAgICAgIG9iamVjdE1hcEVudHJpZXMoaW5pdGlhbERhdGEpLm1hcCgoW2lkMiwgcmVjb3JkXSkgPT4gW1xuICAgICAgICAgICAgaWQyLFxuICAgICAgICAgICAgYXRvbShcbiAgICAgICAgICAgICAgXCJhdG9tOlwiICsgaWQyLFxuICAgICAgICAgICAgICBkZXZGcmVlemUodGhpcy5zY2hlbWEudmFsaWRhdGVSZWNvcmQodGhpcywgcmVjb3JkLCBcImluaXRpYWxpemVcIiwgbnVsbCkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgXSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5oaXN0b3J5UmVhY3RvciA9IHJlYWN0b3IoXG4gICAgICBcIlN0b3JlLmhpc3RvcnlSZWFjdG9yXCIsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlzdG9yeS5nZXQoKTtcbiAgICAgICAgdGhpcy5fZmx1c2hIaXN0b3J5KCk7XG4gICAgICB9LFxuICAgICAgeyBzY2hlZHVsZUVmZmVjdDogKGNiKSA9PiB0aGlzLmNhbmNlbEhpc3RvcnlSZWFjdG9yID0gdGhyb3R0bGVUb05leHRGcmFtZShjYikgfVxuICAgICk7XG4gICAgdGhpcy5zY29wZWRUeXBlcyA9IHtcbiAgICAgIGRvY3VtZW50OiBuZXcgU2V0KFxuICAgICAgICBvYmplY3RNYXBWYWx1ZXModGhpcy5zY2hlbWEudHlwZXMpLmZpbHRlcigodCkgPT4gdC5zY29wZSA9PT0gXCJkb2N1bWVudFwiKS5tYXAoKHQpID0+IHQudHlwZU5hbWUpXG4gICAgICApLFxuICAgICAgc2Vzc2lvbjogbmV3IFNldChcbiAgICAgICAgb2JqZWN0TWFwVmFsdWVzKHRoaXMuc2NoZW1hLnR5cGVzKS5maWx0ZXIoKHQpID0+IHQuc2NvcGUgPT09IFwic2Vzc2lvblwiKS5tYXAoKHQpID0+IHQudHlwZU5hbWUpXG4gICAgICApLFxuICAgICAgcHJlc2VuY2U6IG5ldyBTZXQoXG4gICAgICAgIG9iamVjdE1hcFZhbHVlcyh0aGlzLnNjaGVtYS50eXBlcykuZmlsdGVyKCh0KSA9PiB0LnNjb3BlID09PSBcInByZXNlbmNlXCIpLm1hcCgodCkgPT4gdC50eXBlTmFtZSlcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIF9mbHVzaEhpc3RvcnkoKSB7XG4gICAgaWYgKHRoaXMuaGlzdG9yeUFjY3VtdWxhdG9yLmhhc0NoYW5nZXMoKSkge1xuICAgICAgY29uc3QgZW50cmllcyA9IHRoaXMuaGlzdG9yeUFjY3VtdWxhdG9yLmZsdXNoKCk7XG4gICAgICBmb3IgKGNvbnN0IHsgY2hhbmdlcywgc291cmNlIH0gb2YgZW50cmllcykge1xuICAgICAgICBsZXQgaW5zdGFuY2VDaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgbGV0IGRvY3VtZW50Q2hhbmdlcyA9IG51bGw7XG4gICAgICAgIGxldCBwcmVzZW5jZUNoYW5nZXMgPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IHsgb25IaXN0b3J5LCBmaWx0ZXJzIH0gb2YgdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgICAgICBpZiAoZmlsdGVycy5zb3VyY2UgIT09IFwiYWxsXCIgJiYgZmlsdGVycy5zb3VyY2UgIT09IHNvdXJjZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmaWx0ZXJzLnNjb3BlICE9PSBcImFsbFwiKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVycy5zY29wZSA9PT0gXCJkb2N1bWVudFwiKSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50Q2hhbmdlcyA/Pz0gdGhpcy5maWx0ZXJDaGFuZ2VzQnlTY29wZShjaGFuZ2VzLCBcImRvY3VtZW50XCIpO1xuICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50Q2hhbmdlcykgY29udGludWU7XG4gICAgICAgICAgICAgIG9uSGlzdG9yeSh7IGNoYW5nZXM6IGRvY3VtZW50Q2hhbmdlcywgc291cmNlIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJzLnNjb3BlID09PSBcInNlc3Npb25cIikge1xuICAgICAgICAgICAgICBpbnN0YW5jZUNoYW5nZXMgPz89IHRoaXMuZmlsdGVyQ2hhbmdlc0J5U2NvcGUoY2hhbmdlcywgXCJzZXNzaW9uXCIpO1xuICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlQ2hhbmdlcykgY29udGludWU7XG4gICAgICAgICAgICAgIG9uSGlzdG9yeSh7IGNoYW5nZXM6IGluc3RhbmNlQ2hhbmdlcywgc291cmNlIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcHJlc2VuY2VDaGFuZ2VzID8/PSB0aGlzLmZpbHRlckNoYW5nZXNCeVNjb3BlKGNoYW5nZXMsIFwicHJlc2VuY2VcIik7XG4gICAgICAgICAgICAgIGlmICghcHJlc2VuY2VDaGFuZ2VzKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgb25IaXN0b3J5KHsgY2hhbmdlczogcHJlc2VuY2VDaGFuZ2VzLCBzb3VyY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uSGlzdG9yeSh7IGNoYW5nZXMsIHNvdXJjZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmNhbmNlbEhpc3RvcnlSZWFjdG9yKCk7XG4gIH1cbiAgLyoqXG4gICAqIEZpbHRlcnMgb3V0IG5vbi1kb2N1bWVudCBjaGFuZ2VzIGZyb20gYSBkaWZmLiBSZXR1cm5zIG51bGwgaWYgdGhlcmUgYXJlIG5vIGNoYW5nZXMgbGVmdC5cbiAgICogQHBhcmFtIGNoYW5nZSAtIHRoZSByZWNvcmRzIGRpZmZcbiAgICogQHBhcmFtIHNjb3BlIC0gdGhlIHJlY29yZHMgc2NvcGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGZpbHRlckNoYW5nZXNCeVNjb3BlKGNoYW5nZSwgc2NvcGUpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBhZGRlZDogZmlsdGVyRW50cmllcyhjaGFuZ2UuYWRkZWQsIChfLCByKSA9PiB0aGlzLnNjb3BlZFR5cGVzW3Njb3BlXS5oYXMoci50eXBlTmFtZSkpLFxuICAgICAgdXBkYXRlZDogZmlsdGVyRW50cmllcyhjaGFuZ2UudXBkYXRlZCwgKF8sIHIpID0+IHRoaXMuc2NvcGVkVHlwZXNbc2NvcGVdLmhhcyhyWzFdLnR5cGVOYW1lKSksXG4gICAgICByZW1vdmVkOiBmaWx0ZXJFbnRyaWVzKGNoYW5nZS5yZW1vdmVkLCAoXywgcikgPT4gdGhpcy5zY29wZWRUeXBlc1tzY29wZV0uaGFzKHIudHlwZU5hbWUpKVxuICAgIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdC5hZGRlZCkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKHJlc3VsdC51cGRhdGVkKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMocmVzdWx0LnJlbW92ZWQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgaGlzdG9yeSB3aXRoIGEgZGlmZiBvZiBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0gY2hhbmdlcyAtIFRoZSBjaGFuZ2VzIHRvIGFkZCB0byB0aGUgaGlzdG9yeS5cbiAgICovXG4gIHVwZGF0ZUhpc3RvcnkoY2hhbmdlcykge1xuICAgIHRoaXMuaGlzdG9yeUFjY3VtdWxhdG9yLmFkZCh7XG4gICAgICBjaGFuZ2VzLFxuICAgICAgc291cmNlOiB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPyBcInJlbW90ZVwiIDogXCJ1c2VyXCJcbiAgICB9KTtcbiAgICBpZiAodGhpcy5saXN0ZW5lcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5oaXN0b3J5QWNjdW11bGF0b3IuY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy5oaXN0b3J5LnNldCh0aGlzLmhpc3RvcnkuZ2V0KCkgKyAxLCBjaGFuZ2VzKTtcbiAgfVxuICB2YWxpZGF0ZShwaGFzZSkge1xuICAgIHRoaXMuYWxsUmVjb3JkcygpLmZvckVhY2goKHJlY29yZCkgPT4gdGhpcy5zY2hlbWEudmFsaWRhdGVSZWNvcmQodGhpcywgcmVjb3JkLCBwaGFzZSwgbnVsbCkpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgc29tZSByZWNvcmRzIHRvIHRoZSBzdG9yZS4gSXQncyBhbiBlcnJvciBpZiB0aGV5IGFscmVhZHkgZXhpc3QuXG4gICAqXG4gICAqIEBwYXJhbSByZWNvcmRzIC0gVGhlIHJlY29yZHMgdG8gYWRkLlxuICAgKiBAcGFyYW0gcGhhc2VPdmVycmlkZSAtIFRoZSBwaGFzZSBvdmVycmlkZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcHV0KHJlY29yZHMsIHBoYXNlT3ZlcnJpZGUpIHtcbiAgICB0aGlzLmF0b21pYygoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XG4gICAgICBjb25zdCBhZGRpdGlvbnMgPSB7fTtcbiAgICAgIGNvbnN0IGN1cnJlbnRNYXAgPSB0aGlzLmF0b21zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpO1xuICAgICAgbGV0IG1hcCA9IG51bGw7XG4gICAgICBsZXQgcmVjb3JkO1xuICAgICAgbGV0IGRpZENoYW5nZSA9IGZhbHNlO1xuICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID8gXCJyZW1vdGVcIiA6IFwidXNlclwiO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSByZWNvcmRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgICBjb25zdCByZWNvcmRBdG9tID0gKG1hcCA/PyBjdXJyZW50TWFwKVtyZWNvcmQuaWRdO1xuICAgICAgICBpZiAocmVjb3JkQXRvbSkge1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHJlY29yZEF0b20uX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgICAgICAgcmVjb3JkID0gdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVCZWZvcmVDaGFuZ2UoaW5pdGlhbFZhbHVlLCByZWNvcmQsIHNvdXJjZSk7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVkID0gdGhpcy5zY2hlbWEudmFsaWRhdGVSZWNvcmQoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgICAgcGhhc2VPdmVycmlkZSA/PyBcInVwZGF0ZVJlY29yZFwiLFxuICAgICAgICAgICAgaW5pdGlhbFZhbHVlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAodmFsaWRhdGVkID09PSBpbml0aWFsVmFsdWUpIGNvbnRpbnVlO1xuICAgICAgICAgIHJlY29yZEF0b20uc2V0KGRldkZyZWV6ZShyZWNvcmQpKTtcbiAgICAgICAgICBkaWRDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSByZWNvcmRBdG9tLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpO1xuICAgICAgICAgIHVwZGF0ZXNbcmVjb3JkLmlkXSA9IFtpbml0aWFsVmFsdWUsIHVwZGF0ZWRdO1xuICAgICAgICAgIHRoaXMuYWRkRGlmZkZvckFmdGVyRXZlbnQoaW5pdGlhbFZhbHVlLCB1cGRhdGVkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWNvcmQgPSB0aGlzLnNpZGVFZmZlY3RzLmhhbmRsZUJlZm9yZUNyZWF0ZShyZWNvcmQsIHNvdXJjZSk7XG4gICAgICAgICAgZGlkQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICByZWNvcmQgPSB0aGlzLnNjaGVtYS52YWxpZGF0ZVJlY29yZChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICByZWNvcmQsXG4gICAgICAgICAgICBwaGFzZU92ZXJyaWRlID8/IFwiY3JlYXRlUmVjb3JkXCIsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRpdGlvbnNbcmVjb3JkLmlkXSA9IHJlY29yZDtcbiAgICAgICAgICB0aGlzLmFkZERpZmZGb3JBZnRlckV2ZW50KG51bGwsIHJlY29yZCk7XG4gICAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgIG1hcCA9IHsgLi4uY3VycmVudE1hcCB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXBbcmVjb3JkLmlkXSA9IGF0b20oXCJhdG9tOlwiICsgcmVjb3JkLmlkLCByZWNvcmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIHRoaXMuYXRvbXMuc2V0KG1hcCk7XG4gICAgICB9XG4gICAgICBpZiAoIWRpZENoYW5nZSkgcmV0dXJuO1xuICAgICAgdGhpcy51cGRhdGVIaXN0b3J5KHtcbiAgICAgICAgYWRkZWQ6IGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlZDogdXBkYXRlcyxcbiAgICAgICAgcmVtb3ZlZDoge31cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgc29tZSByZWNvcmRzIGZyb20gdGhlIHN0b3JlIHZpYSB0aGVpciBpZHMuXG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBUaGUgaWRzIG9mIHRoZSByZWNvcmRzIHRvIHJlbW92ZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlKGlkcykge1xuICAgIHRoaXMuYXRvbWljKCgpID0+IHtcbiAgICAgIGNvbnN0IGNhbmNlbGxlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPyBcInJlbW90ZVwiIDogXCJ1c2VyXCI7XG4gICAgICBpZiAodGhpcy5zaWRlRWZmZWN0cy5pc0VuYWJsZWQoKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgIGNvbnN0IGF0b20yID0gdGhpcy5hdG9tcy5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKVtpZF07XG4gICAgICAgICAgaWYgKCFhdG9tMikgY29udGludWU7XG4gICAgICAgICAgaWYgKHRoaXMuc2lkZUVmZmVjdHMuaGFuZGxlQmVmb3JlRGVsZXRlKGF0b20yLmdldCgpLCBzb3VyY2UpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY2FuY2VsbGVkLmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgcmVtb3ZlZCA9IHZvaWQgMDtcbiAgICAgIHRoaXMuYXRvbXMudXBkYXRlKChhdG9tcykgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgIGlmIChjYW5jZWxsZWQuaGFzKGlkKSkgY29udGludWU7XG4gICAgICAgICAgaWYgKCEoaWQgaW4gYXRvbXMpKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkgcmVzdWx0ID0geyAuLi5hdG9tcyB9O1xuICAgICAgICAgIGlmICghcmVtb3ZlZCkgcmVtb3ZlZCA9IHt9O1xuICAgICAgICAgIGRlbGV0ZSByZXN1bHRbaWRdO1xuICAgICAgICAgIGNvbnN0IHJlY29yZCA9IGF0b21zW2lkXS5nZXQoKTtcbiAgICAgICAgICByZW1vdmVkW2lkXSA9IHJlY29yZDtcbiAgICAgICAgICB0aGlzLmFkZERpZmZGb3JBZnRlckV2ZW50KHJlY29yZCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCA/PyBhdG9tcztcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZW1vdmVkKSByZXR1cm47XG4gICAgICB0aGlzLnVwZGF0ZUhpc3RvcnkoeyBhZGRlZDoge30sIHVwZGF0ZWQ6IHt9LCByZW1vdmVkIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgc3RvcmUgcmVjb3JkIGJ5IGl0cyBpZC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSByZWNvcmQgdG8gZ2V0LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5hdG9tcy5nZXQoKVtpZF0/LmdldCgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgc3RvcmUgcmVjb3JkIGJ5IGl0cyBpZCB3aXRob3V0IHVwZGF0aW5nIGl0cyBlcG9jaC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSByZWNvcmQgdG8gZ2V0LlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShpZCkge1xuICAgIHJldHVybiB0aGlzLmF0b21zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpW2lkXT8uX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBKU09OIHBheWxvYWQgZnJvbSB0aGUgcmVjb3JkIHN0b3JlLlxuICAgKlxuICAgKiBAcGFyYW0gc2NvcGUgLSBUaGUgc2NvcGUgb2YgcmVjb3JkcyB0byBzZXJpYWxpemUuIERlZmF1bHRzIHRvICdkb2N1bWVudCcuXG4gICAqIEByZXR1cm5zIFRoZSByZWNvcmQgc3RvcmUgc25hcHNob3QgYXMgYSBKU09OIHBheWxvYWQuXG4gICAqL1xuICBzZXJpYWxpemUoc2NvcGUgPSBcImRvY3VtZW50XCIpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgYXRvbTJdIG9mIG9iamVjdE1hcEVudHJpZXModGhpcy5hdG9tcy5nZXQoKSkpIHtcbiAgICAgIGNvbnN0IHJlY29yZCA9IGF0b20yLmdldCgpO1xuICAgICAgaWYgKHNjb3BlID09PSBcImFsbFwiIHx8IHRoaXMuc2NvcGVkVHlwZXNbc2NvcGVdLmhhcyhyZWNvcmQudHlwZU5hbWUpKSB7XG4gICAgICAgIHJlc3VsdFtpZF0gPSByZWNvcmQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHNlcmlhbGl6ZWQgc25hcHNob3Qgb2YgdGhlIHN0b3JlIGFuZCBpdHMgc2NoZW1hLlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBzbmFwc2hvdCA9IHN0b3JlLmdldFN0b3JlU25hcHNob3QoKVxuICAgKiBzdG9yZS5sb2FkU3RvcmVTbmFwc2hvdChzbmFwc2hvdClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzY29wZSAtIFRoZSBzY29wZSBvZiByZWNvcmRzIHRvIHNlcmlhbGl6ZS4gRGVmYXVsdHMgdG8gJ2RvY3VtZW50Jy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U3RvcmVTbmFwc2hvdChzY29wZSA9IFwiZG9jdW1lbnRcIikge1xuICAgIHJldHVybiB7XG4gICAgICBzdG9yZTogdGhpcy5zZXJpYWxpemUoc2NvcGUpLFxuICAgICAgc2NoZW1hOiB0aGlzLnNjaGVtYS5zZXJpYWxpemUoKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgZ2V0U25hcHNob3RgIGZyb20gdGhlICd0bGRyYXcnIHBhY2thZ2UgaW5zdGVhZC5cbiAgICovXG4gIGdldFNuYXBzaG90KHNjb3BlID0gXCJkb2N1bWVudFwiKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJbdGxkcmF3XSBgU3RvcmUuZ2V0U25hcHNob3RgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLiBVc2UgYGdldFNuYXBzaG90YCBmcm9tIHRoZSBgdGxkcmF3YCBwYWNrYWdlIGluc3RlYWQuXCJcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmdldFN0b3JlU25hcHNob3Qoc2NvcGUpO1xuICB9XG4gIC8qKlxuICAgKiBNaWdyYXRlIGEgc2VyaWFsaXplZCBzbmFwc2hvdCBvZiB0aGUgc3RvcmUgYW5kIGl0cyBzY2hlbWEuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IHNuYXBzaG90ID0gc3RvcmUuZ2V0U25hcHNob3QoKVxuICAgKiBzdG9yZS5taWdyYXRlU25hcHNob3Qoc25hcHNob3QpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc25hcHNob3QgLSBUaGUgc25hcHNob3QgdG8gbG9hZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgbWlncmF0ZVNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgY29uc3QgbWlncmF0aW9uUmVzdWx0ID0gdGhpcy5zY2hlbWEubWlncmF0ZVN0b3JlU25hcHNob3Qoc25hcHNob3QpO1xuICAgIGlmIChtaWdyYXRpb25SZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBtaWdyYXRlIHNuYXBzaG90OiAke21pZ3JhdGlvblJlc3VsdC5yZWFzb259YCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdG9yZTogbWlncmF0aW9uUmVzdWx0LnZhbHVlLFxuICAgICAgc2NoZW1hOiB0aGlzLnNjaGVtYS5zZXJpYWxpemUoKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIExvYWQgYSBzZXJpYWxpemVkIHNuYXBzaG90LlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBzbmFwc2hvdCA9IHN0b3JlLmdldFN0b3JlU25hcHNob3QoKVxuICAgKiBzdG9yZS5sb2FkU3RvcmVTbmFwc2hvdChzbmFwc2hvdClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzbmFwc2hvdCAtIFRoZSBzbmFwc2hvdCB0byBsb2FkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBsb2FkU3RvcmVTbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIGNvbnN0IG1pZ3JhdGlvblJlc3VsdCA9IHRoaXMuc2NoZW1hLm1pZ3JhdGVTdG9yZVNuYXBzaG90KHNuYXBzaG90KTtcbiAgICBpZiAobWlncmF0aW9uUmVzdWx0LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbWlncmF0ZSBzbmFwc2hvdDogJHttaWdyYXRpb25SZXN1bHQucmVhc29ufWApO1xuICAgIH1cbiAgICBjb25zdCBwcmV2U2lkZUVmZmVjdHNFbmFibGVkID0gdGhpcy5zaWRlRWZmZWN0cy5pc0VuYWJsZWQoKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zaWRlRWZmZWN0cy5zZXRJc0VuYWJsZWQoZmFsc2UpO1xuICAgICAgdGhpcy5hdG9taWMoKCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucHV0KE9iamVjdC52YWx1ZXMobWlncmF0aW9uUmVzdWx0LnZhbHVlKSk7XG4gICAgICAgIHRoaXMuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc2lkZUVmZmVjdHMuc2V0SXNFbmFibGVkKHByZXZTaWRlRWZmZWN0c0VuYWJsZWQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZCB1c2UgYGxvYWRTbmFwc2hvdGAgZnJvbSB0aGUgJ3RsZHJhdycgcGFja2FnZSBpbnN0ZWFkLlxuICAgKi9cbiAgbG9hZFNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJbdGxkcmF3XSBgU3RvcmUubG9hZFNuYXBzaG90YCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gVXNlIGBsb2FkU25hcHNob3RgIGZyb20gdGhlICd0bGRyYXcnIHBhY2thZ2UgaW5zdGVhZC5cIlxuICAgICk7XG4gICAgdGhpcy5sb2FkU3RvcmVTbmFwc2hvdChzbmFwc2hvdCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiBhbGwgdmFsdWVzIGluIHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgYWxsIHZhbHVlcyBpbiB0aGUgc3RvcmUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFsbFJlY29yZHMoKSB7XG4gICAgcmV0dXJuIG9iamVjdE1hcFZhbHVlcyh0aGlzLmF0b21zLmdldCgpKS5tYXAoKGF0b20yKSA9PiBhdG9tMi5nZXQoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHJlY29yZHMgZnJvbSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMucmVtb3ZlKG9iamVjdE1hcEtleXModGhpcy5hdG9tcy5nZXQoKSkpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYSByZWNvcmQuIFRvIHVwZGF0ZSBtdWx0aXBsZSByZWNvcmRzIGF0IG9uY2UsIHVzZSB0aGUgYHVwZGF0ZWAgbWV0aG9kIG9mIHRoZVxuICAgKiBgVHlwZWRTdG9yZWAgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgcmVjb3JkIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHVwZGF0ZXIgLSBBIGZ1bmN0aW9uIHRoYXQgdXBkYXRlcyB0aGUgcmVjb3JkLlxuICAgKi9cbiAgdXBkYXRlKGlkLCB1cGRhdGVyKSB7XG4gICAgY29uc3QgYXRvbTIgPSB0aGlzLmF0b21zLmdldCgpW2lkXTtcbiAgICBpZiAoIWF0b20yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBSZWNvcmQgJHtpZH0gbm90IGZvdW5kLiBUaGlzIGlzIHByb2JhYmx5IGFuIGVycm9yYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucHV0KFt1cGRhdGVyKGF0b20yLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpKV0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciB0aGUgcmVjb3JkIHN0b3JlIGhhcyBhIGlkLlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJlY29yZCB0byBjaGVjay5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaGFzKGlkKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBsaXN0ZW5lciB0byB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSBvbkhpc3RvcnkgLSBUaGUgbGlzdGVuZXIgdG8gY2FsbCB3aGVuIHRoZSBzdG9yZSB1cGRhdGVzLlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIEZpbHRlcnMgdG8gYXBwbHkgdG8gdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqL1xuICBsaXN0ZW4ob25IaXN0b3J5LCBmaWx0ZXJzKSB7XG4gICAgdGhpcy5fZmx1c2hIaXN0b3J5KCk7XG4gICAgY29uc3QgbGlzdGVuZXIgPSB7XG4gICAgICBvbkhpc3RvcnksXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIHNvdXJjZTogZmlsdGVycz8uc291cmNlID8/IFwiYWxsXCIsXG4gICAgICAgIHNjb3BlOiBmaWx0ZXJzPy5zY29wZSA/PyBcImFsbFwiXG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIGlmICghdGhpcy5oaXN0b3J5UmVhY3Rvci5zY2hlZHVsZXIuaXNBY3RpdmVseUxpc3RlbmluZykge1xuICAgICAgdGhpcy5oaXN0b3J5UmVhY3Rvci5zdGFydCgpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgIGlmICh0aGlzLmxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVJlYWN0b3Iuc3RvcCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgaXNNZXJnaW5nUmVtb3RlQ2hhbmdlcyA9IGZhbHNlO1xuICAvKipcbiAgICogTWVyZ2UgY2hhbmdlcyBmcm9tIGEgcmVtb3RlIHNvdXJjZSB3aXRob3V0IHRyaWdnZXJpbmcgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0gZm4gLSBBIGZ1bmN0aW9uIHRoYXQgbWVyZ2VzIHRoZSBleHRlcm5hbCBjaGFuZ2VzLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBtZXJnZVJlbW90ZUNoYW5nZXMoZm4pIHtcbiAgICBpZiAodGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzKSB7XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2lzSW5BdG9taWNPcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IG1lcmdlIHJlbW90ZSBjaGFuZ2VzIHdoaWxlIGluIGF0b21pYyBvcGVyYXRpb25cIik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgdHJhbnNhY3QoZm4pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBgZm5gIGFuZCByZXR1cm4gYSB7QGxpbmsgUmVjb3Jkc0RpZmZ9IG9mIHRoZSBjaGFuZ2VzIHRoYXQgb2NjdXJyZWQgYXMgYSByZXN1bHQuXG4gICAqL1xuICBleHRyYWN0aW5nQ2hhbmdlcyhmbikge1xuICAgIGNvbnN0IGNoYW5nZXMgPSBbXTtcbiAgICBjb25zdCBkaXNwb3NlID0gdGhpcy5oaXN0b3J5QWNjdW11bGF0b3IuYWRkSW50ZXJjZXB0b3IoKGVudHJ5KSA9PiBjaGFuZ2VzLnB1c2goZW50cnkuY2hhbmdlcykpO1xuICAgIHRyeSB7XG4gICAgICB0cmFuc2FjdChmbik7XG4gICAgICByZXR1cm4gc3F1YXNoUmVjb3JkRGlmZnMoY2hhbmdlcyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cbiAgYXBwbHlEaWZmKGRpZmYsIHtcbiAgICBydW5DYWxsYmFja3MgPSB0cnVlLFxuICAgIGlnbm9yZUVwaGVtZXJhbEtleXMgPSBmYWxzZVxuICB9ID0ge30pIHtcbiAgICB0aGlzLmF0b21pYygoKSA9PiB7XG4gICAgICBjb25zdCB0b1B1dCA9IG9iamVjdE1hcFZhbHVlcyhkaWZmLmFkZGVkKTtcbiAgICAgIGZvciAoY29uc3QgW19mcm9tLCB0b10gb2Ygb2JqZWN0TWFwVmFsdWVzKGRpZmYudXBkYXRlZCkpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuc2NoZW1hLmdldFR5cGUodG8udHlwZU5hbWUpO1xuICAgICAgICBpZiAoaWdub3JlRXBoZW1lcmFsS2V5cyAmJiB0eXBlLmVwaGVtZXJhbEtleVNldC5zaXplKSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmdldCh0by5pZCk7XG4gICAgICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICAgICAgdG9QdXQucHVzaCh0byk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGNoYW5nZWQgPSBudWxsO1xuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRvKSkge1xuICAgICAgICAgICAgaWYgKHR5cGUuZXBoZW1lcmFsS2V5U2V0LmhhcyhrZXkpIHx8IE9iamVjdC5pcyh2YWx1ZSwgZ2V0T3duUHJvcGVydHkoZXhpc3RpbmcsIGtleSkpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkKSBjaGFuZ2VkID0geyAuLi5leGlzdGluZyB9O1xuICAgICAgICAgICAgY2hhbmdlZFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFuZ2VkKSB0b1B1dC5wdXNoKGNoYW5nZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvUHV0LnB1c2godG8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB0b1JlbW92ZSA9IG9iamVjdE1hcEtleXMoZGlmZi5yZW1vdmVkKTtcbiAgICAgIGlmICh0b1B1dC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5wdXQodG9QdXQpO1xuICAgICAgfVxuICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnJlbW92ZSh0b1JlbW92ZSk7XG4gICAgICB9XG4gICAgfSwgcnVuQ2FsbGJhY2tzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgY29tcHV0ZWQgY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGRlcml2YXRpb24gY2FjaGUuXG4gICAqIEBwYXJhbSBkZXJpdmUgLSBBIGZ1bmN0aW9uIHVzZWQgdG8gZGVyaXZlIHRoZSB2YWx1ZSBvZiB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSBpc0VxdWFsIC0gQSBmdW5jdGlvbiB0aGF0IGRldGVybWlucyBlcXVhbGl0eSBiZXR3ZWVuIHR3byByZWNvcmRzLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjcmVhdGVDb21wdXRlZENhY2hlKG5hbWUsIGRlcml2ZSwgaXNFcXVhbCkge1xuICAgIGNvbnN0IGNhY2hlID0gbmV3IFdlYWtDYWNoZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBnZXQ6IChpZCkgPT4ge1xuICAgICAgICBjb25zdCBhdG9tMiA9IHRoaXMuYXRvbXMuZ2V0KClbaWRdO1xuICAgICAgICBpZiAoIWF0b20yKSB7XG4gICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KGF0b20yLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkU2lnbmFsID0gaXNFcXVhbCA/IGNvbXB1dGVkKGF0b20yLm5hbWUgKyBcIjplcXVhbHNcIiwgKCkgPT4gYXRvbTIuZ2V0KCksIHsgaXNFcXVhbCB9KSA6IGF0b20yO1xuICAgICAgICAgIHJldHVybiBjb21wdXRlZChuYW1lICsgXCI6XCIgKyBpZCwgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlcml2ZShyZWNvcmRTaWduYWwuZ2V0KCkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KS5nZXQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb21wdXRlZCBjYWNoZSBmcm9tIGEgc2VsZWN0b3JcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZGVyaXZhdGlvbiBjYWNoZS5cbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWJzZXQgb2YgdGhlIG9yaWdpbmFsIHNoYXBlXG4gICAqIEBwYXJhbSBkZXJpdmUgLSBBIGZ1bmN0aW9uIHVzZWQgdG8gZGVyaXZlIHRoZSB2YWx1ZSBvZiB0aGUgY2FjaGUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZVNlbGVjdGVkQ29tcHV0ZWRDYWNoZShuYW1lLCBzZWxlY3RvciwgZGVyaXZlKSB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha0NhY2hlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGF0b20yID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgICAgIGlmICghYXRvbTIpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQoYXRvbTIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkID0gY29tcHV0ZWQoXG4gICAgICAgICAgICBuYW1lICsgXCI6XCIgKyBpZCArIFwiOnNlbGVjdG9yXCIsXG4gICAgICAgICAgICAoKSA9PiBzZWxlY3RvcihhdG9tMi5nZXQoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBjb21wdXRlZChuYW1lICsgXCI6XCIgKyBpZCwgKCkgPT4gZGVyaXZlKGQuZ2V0KCkpKTtcbiAgICAgICAgfSkuZ2V0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBfaW50ZWdyaXR5Q2hlY2tlcjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBlbnN1cmVTdG9yZUlzVXNhYmxlKCkge1xuICAgIHRoaXMuYXRvbWljKCgpID0+IHtcbiAgICAgIHRoaXMuX2ludGVncml0eUNoZWNrZXIgPz89IHRoaXMuc2NoZW1hLmNyZWF0ZUludGVncml0eUNoZWNrZXIodGhpcyk7XG4gICAgICB0aGlzLl9pbnRlZ3JpdHlDaGVja2VyPy4oKTtcbiAgICB9KTtcbiAgfVxuICBfaXNQb3NzaWJseUNvcnJ1cHRlZCA9IGZhbHNlO1xuICAvKiogQGludGVybmFsICovXG4gIG1hcmtBc1Bvc3NpYmx5Q29ycnVwdGVkKCkge1xuICAgIHRoaXMuX2lzUG9zc2libHlDb3JydXB0ZWQgPSB0cnVlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaXNQb3NzaWJseUNvcnJ1cHRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNQb3NzaWJseUNvcnJ1cHRlZDtcbiAgfVxuICBwZW5kaW5nQWZ0ZXJFdmVudHMgPSBudWxsO1xuICBhZGREaWZmRm9yQWZ0ZXJFdmVudChiZWZvcmUsIGFmdGVyKSB7XG4gICAgYXNzZXJ0KHRoaXMucGVuZGluZ0FmdGVyRXZlbnRzLCBcIm11c3QgYmUgaW4gZXZlbnQgb3BlcmF0aW9uXCIpO1xuICAgIGlmIChiZWZvcmUgPT09IGFmdGVyKSByZXR1cm47XG4gICAgaWYgKGJlZm9yZSAmJiBhZnRlcikgYXNzZXJ0KGJlZm9yZS5pZCA9PT0gYWZ0ZXIuaWQpO1xuICAgIGlmICghYmVmb3JlICYmICFhZnRlcikgcmV0dXJuO1xuICAgIGNvbnN0IGlkID0gKGJlZm9yZSB8fCBhZnRlcikuaWQ7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnBlbmRpbmdBZnRlckV2ZW50cy5nZXQoaWQpO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgZXhpc3RpbmcuYWZ0ZXIgPSBhZnRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMuc2V0KGlkLCB7IGJlZm9yZSwgYWZ0ZXIgfSk7XG4gICAgfVxuICB9XG4gIGZsdXNoQXRvbWljQ2FsbGJhY2tzKCkge1xuICAgIGxldCB1cGRhdGVEZXB0aCA9IDA7XG4gICAgY29uc3Qgc291cmNlID0gdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID8gXCJyZW1vdGVcIiA6IFwidXNlclwiO1xuICAgIHdoaWxlICh0aGlzLnBlbmRpbmdBZnRlckV2ZW50cykge1xuICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHM7XG4gICAgICB0aGlzLnBlbmRpbmdBZnRlckV2ZW50cyA9IG51bGw7XG4gICAgICBpZiAoIXRoaXMuc2lkZUVmZmVjdHMuaXNFbmFibGVkKCkpIGNvbnRpbnVlO1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIGlmICh1cGRhdGVEZXB0aCA+IDEwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXhpbXVtIHN0b3JlIHVwZGF0ZSBkZXB0aCBleGNlZWRlZCwgYmFpbGluZyBvdXRcIik7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IHsgYmVmb3JlLCBhZnRlciB9IG9mIGV2ZW50cy52YWx1ZXMoKSkge1xuICAgICAgICBpZiAoYmVmb3JlICYmIGFmdGVyKSB7XG4gICAgICAgICAgdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVBZnRlckNoYW5nZShiZWZvcmUsIGFmdGVyLCBzb3VyY2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZSAmJiAhYWZ0ZXIpIHtcbiAgICAgICAgICB0aGlzLnNpZGVFZmZlY3RzLmhhbmRsZUFmdGVyRGVsZXRlKGJlZm9yZSwgc291cmNlKTtcbiAgICAgICAgfSBlbHNlIGlmICghYmVmb3JlICYmIGFmdGVyKSB7XG4gICAgICAgICAgdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVBZnRlckNyZWF0ZShhZnRlciwgc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdBZnRlckV2ZW50cykge1xuICAgICAgICB0aGlzLnNpZGVFZmZlY3RzLmhhbmRsZU9wZXJhdGlvbkNvbXBsZXRlKHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF9pc0luQXRvbWljT3AgPSBmYWxzZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhdG9taWMoZm4sIHJ1bkNhbGxiYWNrcyA9IHRydWUpIHtcbiAgICByZXR1cm4gdHJhbnNhY3QoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2lzSW5BdG9taWNPcCkge1xuICAgICAgICBpZiAoIXRoaXMucGVuZGluZ0FmdGVyRXZlbnRzKSB0aGlzLnBlbmRpbmdBZnRlckV2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfVxuICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgcHJldlNpZGVFZmZlY3RzRW5hYmxlZCA9IHRoaXMuc2lkZUVmZmVjdHMuaXNFbmFibGVkKCk7XG4gICAgICB0aGlzLnNpZGVFZmZlY3RzLnNldElzRW5hYmxlZChydW5DYWxsYmFja3MgPz8gcHJldlNpZGVFZmZlY3RzRW5hYmxlZCk7XG4gICAgICB0aGlzLl9pc0luQXRvbWljT3AgPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZm4oKTtcbiAgICAgICAgdGhpcy5mbHVzaEF0b21pY0NhbGxiYWNrcygpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnNpZGVFZmZlY3RzLnNldElzRW5hYmxlZChwcmV2U2lkZUVmZmVjdHNFbmFibGVkKTtcbiAgICAgICAgdGhpcy5faXNJbkF0b21pY09wID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhZGRIaXN0b3J5SW50ZXJjZXB0b3IoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5QWNjdW11bGF0b3IuYWRkSW50ZXJjZXB0b3IoXG4gICAgICAoZW50cnkpID0+IGZuKGVudHJ5LCB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPyBcInJlbW90ZVwiIDogXCJ1c2VyXCIpXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gc3F1YXNoSGlzdG9yeUVudHJpZXMoZW50cmllcykge1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3QgY2h1bmtlZCA9IFtdO1xuICBsZXQgY2h1bmsgPSBbZW50cmllc1swXV07XG4gIGxldCBlbnRyeTtcbiAgZm9yIChsZXQgaSA9IDEsIG4gPSBlbnRyaWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGVudHJ5ID0gZW50cmllc1tpXTtcbiAgICBpZiAoY2h1bmtbMF0uc291cmNlICE9PSBlbnRyeS5zb3VyY2UpIHtcbiAgICAgIGNodW5rZWQucHVzaChjaHVuayk7XG4gICAgICBjaHVuayA9IFtdO1xuICAgIH1cbiAgICBjaHVuay5wdXNoKGVudHJ5KTtcbiAgfVxuICBjaHVua2VkLnB1c2goY2h1bmspO1xuICByZXR1cm4gZGV2RnJlZXplKFxuICAgIGNodW5rZWQubWFwKChjaHVuazIpID0+ICh7XG4gICAgICBzb3VyY2U6IGNodW5rMlswXS5zb3VyY2UsXG4gICAgICBjaGFuZ2VzOiBzcXVhc2hSZWNvcmREaWZmcyhjaHVuazIubWFwKChlKSA9PiBlLmNoYW5nZXMpKVxuICAgIH0pKVxuICApO1xufVxuY2xhc3MgSGlzdG9yeUFjY3VtdWxhdG9yIHtcbiAgX2hpc3RvcnkgPSBbXTtcbiAgX2ludGVyY2VwdG9ycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGFkZEludGVyY2VwdG9yKGZuKSB7XG4gICAgdGhpcy5faW50ZXJjZXB0b3JzLmFkZChmbik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuX2ludGVyY2VwdG9ycy5kZWxldGUoZm4pO1xuICAgIH07XG4gIH1cbiAgYWRkKGVudHJ5KSB7XG4gICAgdGhpcy5faGlzdG9yeS5wdXNoKGVudHJ5KTtcbiAgICBmb3IgKGNvbnN0IGludGVyY2VwdG9yIG9mIHRoaXMuX2ludGVyY2VwdG9ycykge1xuICAgICAgaW50ZXJjZXB0b3IoZW50cnkpO1xuICAgIH1cbiAgfVxuICBmbHVzaCgpIHtcbiAgICBjb25zdCBoaXN0b3J5ID0gc3F1YXNoSGlzdG9yeUVudHJpZXModGhpcy5faGlzdG9yeSk7XG4gICAgdGhpcy5faGlzdG9yeSA9IFtdO1xuICAgIHJldHVybiBoaXN0b3J5O1xuICB9XG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2hpc3RvcnkgPSBbXTtcbiAgfVxuICBoYXNDaGFuZ2VzKCkge1xuICAgIHJldHVybiB0aGlzLl9oaXN0b3J5Lmxlbmd0aCA+IDA7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVkQ2FjaGUobmFtZSwgZGVyaXZlLCBpc0VxdWFsKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IFdlYWtDYWNoZSgpO1xuICByZXR1cm4ge1xuICAgIGdldChjb250ZXh0LCBpZCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRDYWNoZSA9IGNhY2hlLmdldChjb250ZXh0LCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gY29udGV4dCBpbnN0YW5jZW9mIFN0b3JlID8gY29udGV4dCA6IGNvbnRleHQuc3RvcmU7XG4gICAgICAgIHJldHVybiBzdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKG5hbWUsIChyZWNvcmQpID0+IGRlcml2ZShjb250ZXh0LCByZWNvcmQpLCBpc0VxdWFsKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvbXB1dGVkQ2FjaGUuZ2V0KGlkKTtcbiAgICB9XG4gIH07XG59XG5leHBvcnQge1xuICBTdG9yZSxcbiAgY3JlYXRlQ29tcHV0ZWRDYWNoZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreQueries: () => (/* binding */ StoreQueries)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.isequal */ \"(ssr)/./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var _executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./executeQuery.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs\");\n/* harmony import */ var _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./IncrementalSetConstructor.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\");\n/* harmony import */ var _setUtils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./setUtils.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\");\n\n\n\n\n\n\nclass StoreQueries {\n  constructor(atoms, history) {\n    this.atoms = atoms;\n    this.history = history;\n  }\n  /**\n   * A cache of derivations (indexes).\n   *\n   * @internal\n   */\n  indexCache = /* @__PURE__ */ new Map();\n  /**\n   * A cache of derivations (filtered histories).\n   *\n   * @internal\n   */\n  historyCache = /* @__PURE__ */ new Map();\n  /**\n   * Create a derivation that contains the history for a given type\n   *\n   * @param typeName - The name of the type to filter by.\n   * @returns A derivation that returns the ids of all records of the given type.\n   * @public\n   */\n  filterHistory(typeName) {\n    if (this.historyCache.has(typeName)) {\n      return this.historyCache.get(typeName);\n    }\n    const filtered = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"filterHistory:\" + typeName,\n      (lastValue, lastComputedEpoch) => {\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(lastValue)) {\n          return this.history.get();\n        }\n        const diff = this.history.getDiffSince(lastComputedEpoch);\n        if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) return this.history.get();\n        const res = { added: {}, removed: {}, updated: {} };\n        let numAdded = 0;\n        let numRemoved = 0;\n        let numUpdated = 0;\n        for (const changes of diff) {\n          for (const added of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (added.typeName === typeName) {\n              if (res.removed[added.id]) {\n                const original = res.removed[added.id];\n                delete res.removed[added.id];\n                numRemoved--;\n                if (original !== added) {\n                  res.updated[added.id] = [original, added];\n                  numUpdated++;\n                }\n              } else {\n                res.added[added.id] = added;\n                numAdded++;\n              }\n            }\n          }\n          for (const [from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (to.typeName === typeName) {\n              if (res.added[to.id]) {\n                res.added[to.id] = to;\n              } else if (res.updated[to.id]) {\n                res.updated[to.id] = [res.updated[to.id][0], to];\n              } else {\n                res.updated[to.id] = [from, to];\n                numUpdated++;\n              }\n            }\n          }\n          for (const removed of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (removed.typeName === typeName) {\n              if (res.added[removed.id]) {\n                delete res.added[removed.id];\n                numAdded--;\n              } else if (res.updated[removed.id]) {\n                res.removed[removed.id] = res.updated[removed.id][0];\n                delete res.updated[removed.id];\n                numUpdated--;\n                numRemoved++;\n              } else {\n                res.removed[removed.id] = removed;\n                numRemoved++;\n              }\n            }\n          }\n        }\n        if (numAdded || numRemoved || numUpdated) {\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(this.history.get(), res);\n        } else {\n          return lastValue;\n        }\n      },\n      { historyLength: 100 }\n    );\n    this.historyCache.set(typeName, filtered);\n    return filtered;\n  }\n  /**\n   * Create a derivation that returns an index on a property for the given type.\n   *\n   * @param typeName - The name of the type.\n   * @param property - The name of the property.\n   * @public\n   */\n  index(typeName, property) {\n    const cacheKey = typeName + \":\" + property;\n    if (this.indexCache.has(cacheKey)) {\n      return this.indexCache.get(cacheKey);\n    }\n    const index = this.__uncached_createIndex(typeName, property);\n    this.indexCache.set(cacheKey, index);\n    return index;\n  }\n  /**\n   * Create a derivation that returns an index on a property for the given type.\n   *\n   * @param typeName - The name of the type?.\n   * @param property - The name of the property?.\n   * @internal\n   */\n  __uncached_createIndex(typeName, property) {\n    const typeHistory = this.filterHistory(typeName);\n    const fromScratch = () => {\n      typeHistory.get();\n      const res = /* @__PURE__ */ new Map();\n      for (const atom of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get())) {\n        const record = atom.get();\n        if (record.typeName === typeName) {\n          const value = record[property];\n          if (!res.has(value)) {\n            res.set(value, /* @__PURE__ */ new Set());\n          }\n          res.get(value).add(record.id);\n        }\n      }\n      return res;\n    };\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"index:\" + typeName + \":\" + property,\n      (prevValue, lastComputedEpoch) => {\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) return fromScratch();\n        const history = typeHistory.getDiffSince(lastComputedEpoch);\n        if (history === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n          return fromScratch();\n        }\n        const setConstructors = /* @__PURE__ */ new Map();\n        const add = (value, id) => {\n          let setConstructor = setConstructors.get(value);\n          if (!setConstructor)\n            setConstructor = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(\n              prevValue.get(value) ?? /* @__PURE__ */ new Set()\n            );\n          setConstructor.add(id);\n          setConstructors.set(value, setConstructor);\n        };\n        const remove = (value, id) => {\n          let set = setConstructors.get(value);\n          if (!set) set = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(prevValue.get(value) ?? /* @__PURE__ */ new Set());\n          set.remove(id);\n          setConstructors.set(value, set);\n        };\n        for (const changes of history) {\n          for (const record of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (record.typeName === typeName) {\n              const value = record[property];\n              add(value, record.id);\n            }\n          }\n          for (const [from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (to.typeName === typeName) {\n              const prev = from[property];\n              const next = to[property];\n              if (prev !== next) {\n                remove(prev, to.id);\n                add(next, to.id);\n              }\n            }\n          }\n          for (const record of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (record.typeName === typeName) {\n              const value = record[property];\n              remove(value, record.id);\n            }\n          }\n        }\n        let nextValue = void 0;\n        let nextDiff = void 0;\n        for (const [value, setConstructor] of setConstructors) {\n          const result = setConstructor.get();\n          if (!result) continue;\n          if (!nextValue) nextValue = new Map(prevValue);\n          if (!nextDiff) nextDiff = /* @__PURE__ */ new Map();\n          if (result.value.size === 0) {\n            nextValue.delete(value);\n          } else {\n            nextValue.set(value, result.value);\n          }\n          nextDiff.set(value, result.diff);\n        }\n        if (nextValue && nextDiff) {\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(nextValue, nextDiff);\n        }\n        return prevValue;\n      },\n      { historyLength: 100 }\n    );\n  }\n  /**\n   * Create a derivation that will return a signle record matching the given query.\n   *\n   * It will return undefined if there is no matching record\n   *\n   * @param typeName - The name of the type?\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  record(typeName, queryCreator = () => ({}), name = \"record:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const ids = this.ids(typeName, queryCreator, name);\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name, () => {\n      for (const id of ids.get()) {\n        return this.atoms.get()[id]?.get();\n      }\n      return void 0;\n    });\n  }\n  /**\n   * Create a derivation that will return an array of records matching the given query\n   *\n   * @param typeName - The name of the type?\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  records(typeName, queryCreator = () => ({}), name = \"records:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const ids = this.ids(typeName, queryCreator, \"ids:\" + name);\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name, () => {\n      return [...ids.get()].map((id) => {\n        const atom = this.atoms.get()[id];\n        if (!atom) {\n          throw new Error(\"no atom found for record id: \" + id);\n        }\n        return atom.get();\n      });\n    });\n  }\n  /**\n   * Create a derivation that will return the ids of all records of the given type.\n   *\n   * @param typeName - The name of the type.\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  ids(typeName, queryCreator = () => ({}), name = \"ids:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const typeHistory = this.filterHistory(typeName);\n    const fromScratch = () => {\n      typeHistory.get();\n      const query = queryCreator();\n      if (Object.keys(query).length === 0) {\n        return new Set(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get()).flatMap((v) => {\n            const r = v.get();\n            if (r.typeName === typeName) {\n              return r.id;\n            } else {\n              return [];\n            }\n          })\n        );\n      }\n      return (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.executeQuery)(this, typeName, query);\n    };\n    const fromScratchWithDiff = (prevValue) => {\n      const nextValue = fromScratch();\n      const diff = (0,_setUtils_mjs__WEBPACK_IMPORTED_MODULE_5__.diffSets)(prevValue, nextValue);\n      if (diff) {\n        return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(nextValue, diff);\n      } else {\n        return prevValue;\n      }\n    };\n    const cachedQuery = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"ids_query:\" + name, queryCreator, {\n      isEqual: lodash_isequal__WEBPACK_IMPORTED_MODULE_2__\n    });\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"query:\" + name,\n      (prevValue, lastComputedEpoch) => {\n        const query = cachedQuery.get();\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n          return fromScratch();\n        }\n        if (lastComputedEpoch < cachedQuery.lastChangedEpoch) {\n          return fromScratchWithDiff(prevValue);\n        }\n        const history = typeHistory.getDiffSince(lastComputedEpoch);\n        if (history === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n          return fromScratchWithDiff(prevValue);\n        }\n        const setConstructor = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(\n          prevValue\n        );\n        for (const changes of history) {\n          for (const added of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (added.typeName === typeName && (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.objectMatchesQuery)(query, added)) {\n              setConstructor.add(added.id);\n            }\n          }\n          for (const [_, updated] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (updated.typeName === typeName) {\n              if ((0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.objectMatchesQuery)(query, updated)) {\n                setConstructor.add(updated.id);\n              } else {\n                setConstructor.remove(updated.id);\n              }\n            }\n          }\n          for (const removed of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (removed.typeName === typeName) {\n              setConstructor.remove(removed.id);\n            }\n          }\n        }\n        const result = setConstructor.get();\n        if (!result) {\n          return prevValue;\n        }\n        return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(result.value, result.diff);\n      },\n      { historyLength: 50 }\n    );\n  }\n  exec(typeName, query) {\n    const ids = (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.executeQuery)(this, typeName, query);\n    if (ids.size === 0) {\n      return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    }\n    const atoms = this.atoms.get();\n    return [...ids].map((id) => atoms[id].get());\n  }\n}\n\n//# sourceMappingURL=StoreQueries.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVRdWVyaWVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBTXVCO0FBQ3lCO0FBQ1g7QUFDaUM7QUFDTTtBQUNsQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1REFBUTtBQUM3QjtBQUNBO0FBQ0EsWUFBWSw4REFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0RBQVc7QUFDaEMsc0JBQXNCLFNBQVMsYUFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4REFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4REFBZTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1REFBUTtBQUN6QixVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0EsWUFBWSw4REFBZTtBQUMzQjtBQUNBLHdCQUF3QixzREFBVztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscUZBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFGQUF5QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDhEQUFlO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1REFBUTtBQUN6QjtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsYUFBYSwrREFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdURBQVE7QUFDM0I7QUFDQSxlQUFlLHVEQUFRO0FBQ3ZCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdURBQVE7QUFDaEMsYUFBYTtBQUNiLEtBQUs7QUFDTCxXQUFXLHVEQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFXO0FBQ25DO0FBQ0E7QUFDQSxtQ0FBbUMscUZBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBZTtBQUM3QywrQ0FBK0MscUVBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4REFBZTtBQUNwRDtBQUNBLGtCQUFrQixxRUFBa0I7QUFDcEM7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsOERBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBUTtBQUN2QixPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrREFBWTtBQUM1QjtBQUNBLGFBQWEsc0RBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9TdG9yZVF1ZXJpZXMubWpzPzFhMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY29tcHV0ZWQsXG4gIEVNUFRZX0FSUkFZLFxuICBpc1VuaW5pdGlhbGl6ZWQsXG4gIFJFU0VUX1ZBTFVFLFxuICB3aXRoRGlmZlxufSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgb2JqZWN0TWFwVmFsdWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJsb2Rhc2guaXNlcXVhbFwiO1xuaW1wb3J0IHsgZXhlY3V0ZVF1ZXJ5LCBvYmplY3RNYXRjaGVzUXVlcnkgfSBmcm9tIFwiLi9leGVjdXRlUXVlcnkubWpzXCI7XG5pbXBvcnQgeyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yIH0gZnJvbSBcIi4vSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3Rvci5tanNcIjtcbmltcG9ydCB7IGRpZmZTZXRzIH0gZnJvbSBcIi4vc2V0VXRpbHMubWpzXCI7XG5jbGFzcyBTdG9yZVF1ZXJpZXMge1xuICBjb25zdHJ1Y3RvcihhdG9tcywgaGlzdG9yeSkge1xuICAgIHRoaXMuYXRvbXMgPSBhdG9tcztcbiAgICB0aGlzLmhpc3RvcnkgPSBoaXN0b3J5O1xuICB9XG4gIC8qKlxuICAgKiBBIGNhY2hlIG9mIGRlcml2YXRpb25zIChpbmRleGVzKS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBpbmRleENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIEEgY2FjaGUgb2YgZGVyaXZhdGlvbnMgKGZpbHRlcmVkIGhpc3RvcmllcykuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGlzdG9yeUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRlcml2YXRpb24gdGhhdCBjb250YWlucyB0aGUgaGlzdG9yeSBmb3IgYSBnaXZlbiB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0eXBlIHRvIGZpbHRlciBieS5cbiAgICogQHJldHVybnMgQSBkZXJpdmF0aW9uIHRoYXQgcmV0dXJucyB0aGUgaWRzIG9mIGFsbCByZWNvcmRzIG9mIHRoZSBnaXZlbiB0eXBlLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBmaWx0ZXJIaXN0b3J5KHR5cGVOYW1lKSB7XG4gICAgaWYgKHRoaXMuaGlzdG9yeUNhY2hlLmhhcyh0eXBlTmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnlDYWNoZS5nZXQodHlwZU5hbWUpO1xuICAgIH1cbiAgICBjb25zdCBmaWx0ZXJlZCA9IGNvbXB1dGVkKFxuICAgICAgXCJmaWx0ZXJIaXN0b3J5OlwiICsgdHlwZU5hbWUsXG4gICAgICAobGFzdFZhbHVlLCBsYXN0Q29tcHV0ZWRFcG9jaCkgPT4ge1xuICAgICAgICBpZiAoaXNVbmluaXRpYWxpemVkKGxhc3RWYWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdldCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICAgICAgaWYgKGRpZmYgPT09IFJFU0VUX1ZBTFVFKSByZXR1cm4gdGhpcy5oaXN0b3J5LmdldCgpO1xuICAgICAgICBjb25zdCByZXMgPSB7IGFkZGVkOiB7fSwgcmVtb3ZlZDoge30sIHVwZGF0ZWQ6IHt9IH07XG4gICAgICAgIGxldCBudW1BZGRlZCA9IDA7XG4gICAgICAgIGxldCBudW1SZW1vdmVkID0gMDtcbiAgICAgICAgbGV0IG51bVVwZGF0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgZGlmZikge1xuICAgICAgICAgIGZvciAoY29uc3QgYWRkZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgICAgICBpZiAoYWRkZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMucmVtb3ZlZFthZGRlZC5pZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHJlcy5yZW1vdmVkW2FkZGVkLmlkXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzLnJlbW92ZWRbYWRkZWQuaWRdO1xuICAgICAgICAgICAgICAgIG51bVJlbW92ZWQtLTtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IGFkZGVkKSB7XG4gICAgICAgICAgICAgICAgICByZXMudXBkYXRlZFthZGRlZC5pZF0gPSBbb3JpZ2luYWwsIGFkZGVkXTtcbiAgICAgICAgICAgICAgICAgIG51bVVwZGF0ZWQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLmFkZGVkW2FkZGVkLmlkXSA9IGFkZGVkO1xuICAgICAgICAgICAgICAgIG51bUFkZGVkKys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBbZnJvbSwgdG9dIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgICAgICBpZiAodG8udHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuYWRkZWRbdG8uaWRdKSB7XG4gICAgICAgICAgICAgICAgcmVzLmFkZGVkW3RvLmlkXSA9IHRvO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy51cGRhdGVkW3RvLmlkXSkge1xuICAgICAgICAgICAgICAgIHJlcy51cGRhdGVkW3RvLmlkXSA9IFtyZXMudXBkYXRlZFt0by5pZF1bMF0sIHRvXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMudXBkYXRlZFt0by5pZF0gPSBbZnJvbSwgdG9dO1xuICAgICAgICAgICAgICAgIG51bVVwZGF0ZWQrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHJlbW92ZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMucmVtb3ZlZCkpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVkLnR5cGVOYW1lID09PSB0eXBlTmFtZSkge1xuICAgICAgICAgICAgICBpZiAocmVzLmFkZGVkW3JlbW92ZWQuaWRdKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlcy5hZGRlZFtyZW1vdmVkLmlkXTtcbiAgICAgICAgICAgICAgICBudW1BZGRlZC0tO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy51cGRhdGVkW3JlbW92ZWQuaWRdKSB7XG4gICAgICAgICAgICAgICAgcmVzLnJlbW92ZWRbcmVtb3ZlZC5pZF0gPSByZXMudXBkYXRlZFtyZW1vdmVkLmlkXVswXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzLnVwZGF0ZWRbcmVtb3ZlZC5pZF07XG4gICAgICAgICAgICAgICAgbnVtVXBkYXRlZC0tO1xuICAgICAgICAgICAgICAgIG51bVJlbW92ZWQrKztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucmVtb3ZlZFtyZW1vdmVkLmlkXSA9IHJlbW92ZWQ7XG4gICAgICAgICAgICAgICAgbnVtUmVtb3ZlZCsrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudW1BZGRlZCB8fCBudW1SZW1vdmVkIHx8IG51bVVwZGF0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gd2l0aERpZmYodGhpcy5oaXN0b3J5LmdldCgpLCByZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IGhpc3RvcnlMZW5ndGg6IDEwMCB9XG4gICAgKTtcbiAgICB0aGlzLmhpc3RvcnlDYWNoZS5zZXQodHlwZU5hbWUsIGZpbHRlcmVkKTtcbiAgICByZXR1cm4gZmlsdGVyZWQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRlcml2YXRpb24gdGhhdCByZXR1cm5zIGFuIGluZGV4IG9uIGEgcHJvcGVydHkgZm9yIHRoZSBnaXZlbiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdHlwZS5cbiAgICogQHBhcmFtIHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpbmRleCh0eXBlTmFtZSwgcHJvcGVydHkpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IHR5cGVOYW1lICsgXCI6XCIgKyBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5pbmRleENhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmluZGV4Q2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLl9fdW5jYWNoZWRfY3JlYXRlSW5kZXgodHlwZU5hbWUsIHByb3BlcnR5KTtcbiAgICB0aGlzLmluZGV4Q2FjaGUuc2V0KGNhY2hlS2V5LCBpbmRleCk7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZXJpdmF0aW9uIHRoYXQgcmV0dXJucyBhbiBpbmRleCBvbiBhIHByb3BlcnR5IGZvciB0aGUgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHR5cGU/LlxuICAgKiBAcGFyYW0gcHJvcGVydHkgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHk/LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9fdW5jYWNoZWRfY3JlYXRlSW5kZXgodHlwZU5hbWUsIHByb3BlcnR5KSB7XG4gICAgY29uc3QgdHlwZUhpc3RvcnkgPSB0aGlzLmZpbHRlckhpc3RvcnkodHlwZU5hbWUpO1xuICAgIGNvbnN0IGZyb21TY3JhdGNoID0gKCkgPT4ge1xuICAgICAgdHlwZUhpc3RvcnkuZ2V0KCk7XG4gICAgICBjb25zdCByZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgZm9yIChjb25zdCBhdG9tIG9mIG9iamVjdE1hcFZhbHVlcyh0aGlzLmF0b21zLmdldCgpKSkge1xuICAgICAgICBjb25zdCByZWNvcmQgPSBhdG9tLmdldCgpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGVOYW1lID09PSB0eXBlTmFtZSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVjb3JkW3Byb3BlcnR5XTtcbiAgICAgICAgICBpZiAoIXJlcy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXMuc2V0KHZhbHVlLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzLmdldCh2YWx1ZSkuYWRkKHJlY29yZC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICByZXR1cm4gY29tcHV0ZWQoXG4gICAgICBcImluZGV4OlwiICsgdHlwZU5hbWUgKyBcIjpcIiArIHByb3BlcnR5LFxuICAgICAgKHByZXZWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICAgICAgaWYgKGlzVW5pbml0aWFsaXplZChwcmV2VmFsdWUpKSByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IHR5cGVIaXN0b3J5LmdldERpZmZTaW5jZShsYXN0Q29tcHV0ZWRFcG9jaCk7XG4gICAgICAgIGlmIChoaXN0b3J5ID09PSBSRVNFVF9WQUxVRSkge1xuICAgICAgICAgIHJldHVybiBmcm9tU2NyYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNldENvbnN0cnVjdG9ycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IGFkZCA9ICh2YWx1ZSwgaWQpID0+IHtcbiAgICAgICAgICBsZXQgc2V0Q29uc3RydWN0b3IgPSBzZXRDb25zdHJ1Y3RvcnMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICBpZiAoIXNldENvbnN0cnVjdG9yKVxuICAgICAgICAgICAgc2V0Q29uc3RydWN0b3IgPSBuZXcgSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3RvcihcbiAgICAgICAgICAgICAgcHJldlZhbHVlLmdldCh2YWx1ZSkgPz8gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBzZXRDb25zdHJ1Y3Rvci5hZGQoaWQpO1xuICAgICAgICAgIHNldENvbnN0cnVjdG9ycy5zZXQodmFsdWUsIHNldENvbnN0cnVjdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gKHZhbHVlLCBpZCkgPT4ge1xuICAgICAgICAgIGxldCBzZXQgPSBzZXRDb25zdHJ1Y3RvcnMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICBpZiAoIXNldCkgc2V0ID0gbmV3IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IocHJldlZhbHVlLmdldCh2YWx1ZSkgPz8gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgICAgICAgc2V0LnJlbW92ZShpZCk7XG4gICAgICAgICAgc2V0Q29uc3RydWN0b3JzLnNldCh2YWx1ZSwgc2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBjaGFuZ2VzIG9mIGhpc3RvcnkpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5hZGRlZCkpIHtcbiAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVjb3JkW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgYWRkKHZhbHVlLCByZWNvcmQuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IFtmcm9tLCB0b10gb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMudXBkYXRlZCkpIHtcbiAgICAgICAgICAgIGlmICh0by50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGZyb21bcHJvcGVydHldO1xuICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdG9bcHJvcGVydHldO1xuICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZShwcmV2LCB0by5pZCk7XG4gICAgICAgICAgICAgICAgYWRkKG5leHQsIHRvLmlkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZWNvcmRbcHJvcGVydHldO1xuICAgICAgICAgICAgICByZW1vdmUodmFsdWUsIHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIGxldCBuZXh0RGlmZiA9IHZvaWQgMDtcbiAgICAgICAgZm9yIChjb25zdCBbdmFsdWUsIHNldENvbnN0cnVjdG9yXSBvZiBzZXRDb25zdHJ1Y3RvcnMpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBzZXRDb25zdHJ1Y3Rvci5nZXQoKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkgY29udGludWU7XG4gICAgICAgICAgaWYgKCFuZXh0VmFsdWUpIG5leHRWYWx1ZSA9IG5ldyBNYXAocHJldlZhbHVlKTtcbiAgICAgICAgICBpZiAoIW5leHREaWZmKSBuZXh0RGlmZiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBuZXh0VmFsdWUuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dFZhbHVlLnNldCh2YWx1ZSwgcmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV4dERpZmYuc2V0KHZhbHVlLCByZXN1bHQuZGlmZik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRWYWx1ZSAmJiBuZXh0RGlmZikge1xuICAgICAgICAgIHJldHVybiB3aXRoRGlmZihuZXh0VmFsdWUsIG5leHREaWZmKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldlZhbHVlO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeUxlbmd0aDogMTAwIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZXJpdmF0aW9uIHRoYXQgd2lsbCByZXR1cm4gYSBzaWdubGUgcmVjb3JkIG1hdGNoaW5nIHRoZSBnaXZlbiBxdWVyeS5cbiAgICpcbiAgICogSXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHJlY29yZFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdHlwZT9cbiAgICogQHBhcmFtIHF1ZXJ5Q3JlYXRvciAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBxdWVyeSBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0gbmFtZSAtIChvcHRpbmFsKSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gICAqL1xuICByZWNvcmQodHlwZU5hbWUsIHF1ZXJ5Q3JlYXRvciA9ICgpID0+ICh7fSksIG5hbWUgPSBcInJlY29yZDpcIiArIHR5cGVOYW1lICsgKHF1ZXJ5Q3JlYXRvciA/IFwiOlwiICsgcXVlcnlDcmVhdG9yLnRvU3RyaW5nKCkgOiBcIlwiKSkge1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuaWRzKHR5cGVOYW1lLCBxdWVyeUNyZWF0b3IsIG5hbWUpO1xuICAgIHJldHVybiBjb21wdXRlZChuYW1lLCAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcy5nZXQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdG9tcy5nZXQoKVtpZF0/LmdldCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgZGVyaXZhdGlvbiB0aGF0IHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIHJlY29yZHMgbWF0Y2hpbmcgdGhlIGdpdmVuIHF1ZXJ5XG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0eXBlP1xuICAgKiBAcGFyYW0gcXVlcnlDcmVhdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHF1ZXJ5IGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSBuYW1lIC0gKG9wdGluYWwpIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICovXG4gIHJlY29yZHModHlwZU5hbWUsIHF1ZXJ5Q3JlYXRvciA9ICgpID0+ICh7fSksIG5hbWUgPSBcInJlY29yZHM6XCIgKyB0eXBlTmFtZSArIChxdWVyeUNyZWF0b3IgPyBcIjpcIiArIHF1ZXJ5Q3JlYXRvci50b1N0cmluZygpIDogXCJcIikpIHtcbiAgICBjb25zdCBpZHMgPSB0aGlzLmlkcyh0eXBlTmFtZSwgcXVlcnlDcmVhdG9yLCBcImlkczpcIiArIG5hbWUpO1xuICAgIHJldHVybiBjb21wdXRlZChuYW1lLCAoKSA9PiB7XG4gICAgICByZXR1cm4gWy4uLmlkcy5nZXQoKV0ubWFwKChpZCkgPT4ge1xuICAgICAgICBjb25zdCBhdG9tID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgICAgIGlmICghYXRvbSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vIGF0b20gZm91bmQgZm9yIHJlY29yZCBpZDogXCIgKyBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0b20uZ2V0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgZGVyaXZhdGlvbiB0aGF0IHdpbGwgcmV0dXJuIHRoZSBpZHMgb2YgYWxsIHJlY29yZHMgb2YgdGhlIGdpdmVuIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0eXBlLlxuICAgKiBAcGFyYW0gcXVlcnlDcmVhdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHF1ZXJ5IGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSBuYW1lIC0gKG9wdGluYWwpIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICovXG4gIGlkcyh0eXBlTmFtZSwgcXVlcnlDcmVhdG9yID0gKCkgPT4gKHt9KSwgbmFtZSA9IFwiaWRzOlwiICsgdHlwZU5hbWUgKyAocXVlcnlDcmVhdG9yID8gXCI6XCIgKyBxdWVyeUNyZWF0b3IudG9TdHJpbmcoKSA6IFwiXCIpKSB7XG4gICAgY29uc3QgdHlwZUhpc3RvcnkgPSB0aGlzLmZpbHRlckhpc3RvcnkodHlwZU5hbWUpO1xuICAgIGNvbnN0IGZyb21TY3JhdGNoID0gKCkgPT4ge1xuICAgICAgdHlwZUhpc3RvcnkuZ2V0KCk7XG4gICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5Q3JlYXRvcigpO1xuICAgICAgaWYgKE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXQoXG4gICAgICAgICAgb2JqZWN0TWFwVmFsdWVzKHRoaXMuYXRvbXMuZ2V0KCkpLmZsYXRNYXAoKHYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB2LmdldCgpO1xuICAgICAgICAgICAgaWYgKHIudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiByLmlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KHRoaXMsIHR5cGVOYW1lLCBxdWVyeSk7XG4gICAgfTtcbiAgICBjb25zdCBmcm9tU2NyYXRjaFdpdGhEaWZmID0gKHByZXZWYWx1ZSkgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gZnJvbVNjcmF0Y2goKTtcbiAgICAgIGNvbnN0IGRpZmYgPSBkaWZmU2V0cyhwcmV2VmFsdWUsIG5leHRWYWx1ZSk7XG4gICAgICBpZiAoZGlmZikge1xuICAgICAgICByZXR1cm4gd2l0aERpZmYobmV4dFZhbHVlLCBkaWZmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwcmV2VmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjYWNoZWRRdWVyeSA9IGNvbXB1dGVkKFwiaWRzX3F1ZXJ5OlwiICsgbmFtZSwgcXVlcnlDcmVhdG9yLCB7XG4gICAgICBpc0VxdWFsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbXB1dGVkKFxuICAgICAgXCJxdWVyeTpcIiArIG5hbWUsXG4gICAgICAocHJldlZhbHVlLCBsYXN0Q29tcHV0ZWRFcG9jaCkgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IGNhY2hlZFF1ZXJ5LmdldCgpO1xuICAgICAgICBpZiAoaXNVbmluaXRpYWxpemVkKHByZXZWYWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdENvbXB1dGVkRXBvY2ggPCBjYWNoZWRRdWVyeS5sYXN0Q2hhbmdlZEVwb2NoKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoV2l0aERpZmYocHJldlZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdHlwZUhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICAgICAgaWYgKGhpc3RvcnkgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoV2l0aERpZmYocHJldlZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXRDb25zdHJ1Y3RvciA9IG5ldyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yKFxuICAgICAgICAgIHByZXZWYWx1ZVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgaGlzdG9yeSkge1xuICAgICAgICAgIGZvciAoY29uc3QgYWRkZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgICAgICBpZiAoYWRkZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lICYmIG9iamVjdE1hdGNoZXNRdWVyeShxdWVyeSwgYWRkZWQpKSB7XG4gICAgICAgICAgICAgIHNldENvbnN0cnVjdG9yLmFkZChhZGRlZC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgW18sIHVwZGF0ZWRdIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlZC50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXNRdWVyeShxdWVyeSwgdXBkYXRlZCkpIHtcbiAgICAgICAgICAgICAgICBzZXRDb25zdHJ1Y3Rvci5hZGQodXBkYXRlZC5pZCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0Q29uc3RydWN0b3IucmVtb3ZlKHVwZGF0ZWQuaWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgcmVtb3ZlZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICAgICAgaWYgKHJlbW92ZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIHNldENvbnN0cnVjdG9yLnJlbW92ZShyZW1vdmVkLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2V0Q29uc3RydWN0b3IuZ2V0KCk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHByZXZWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aERpZmYocmVzdWx0LnZhbHVlLCByZXN1bHQuZGlmZik7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5TGVuZ3RoOiA1MCB9XG4gICAgKTtcbiAgfVxuICBleGVjKHR5cGVOYW1lLCBxdWVyeSkge1xuICAgIGNvbnN0IGlkcyA9IGV4ZWN1dGVRdWVyeSh0aGlzLCB0eXBlTmFtZSwgcXVlcnkpO1xuICAgIGlmIChpZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIH1cbiAgICBjb25zdCBhdG9tcyA9IHRoaXMuYXRvbXMuZ2V0KCk7XG4gICAgcmV0dXJuIFsuLi5pZHNdLm1hcCgoaWQpID0+IGF0b21zW2lkXS5nZXQoKSk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFN0b3JlUXVlcmllc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlUXVlcmllcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreSchema: () => (/* binding */ StoreSchema),\n/* harmony export */   upgradeSchema: () => (/* binding */ upgradeSchema)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\");\n\n\nfunction upgradeSchema(schema) {\n  if (schema.schemaVersion > 2 || schema.schemaVersion < 1) return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.err(\"Bad schema version\");\n  if (schema.schemaVersion === 2) return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(schema);\n  const result = {\n    schemaVersion: 2,\n    sequences: {\n      \"com.tldraw.store\": schema.storeVersion\n    }\n  };\n  for (const [typeName, recordVersion] of Object.entries(schema.recordVersions)) {\n    result.sequences[`com.tldraw.${typeName}`] = recordVersion.version;\n    if (\"subTypeKey\" in recordVersion) {\n      for (const [subType, version] of Object.entries(recordVersion.subTypeVersions)) {\n        result.sequences[`com.tldraw.${typeName}.${subType}`] = version;\n      }\n    }\n  }\n  return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(result);\n}\nclass StoreSchema {\n  constructor(types, options) {\n    this.types = types;\n    this.options = options;\n    for (const m of options.migrations ?? []) {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.migrations[m.sequenceId], `Duplicate migration sequenceId ${m.sequenceId}`);\n      (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.validateMigrations)(m);\n      this.migrations[m.sequenceId] = m;\n    }\n    const allMigrations = Object.values(this.migrations).flatMap((m) => m.sequence);\n    this.sortedMigrations = (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.sortMigrations)(allMigrations);\n    for (const migration of this.sortedMigrations) {\n      if (!migration.dependsOn?.length) continue;\n      for (const dep of migration.dependsOn) {\n        const depMigration = allMigrations.find((m) => m.id === dep);\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(depMigration, `Migration '${migration.id}' depends on missing migration '${dep}'`);\n      }\n    }\n  }\n  static create(types, options) {\n    return new StoreSchema(types, options ?? {});\n  }\n  migrations = {};\n  sortedMigrations;\n  validateRecord(store, record, phase, recordBefore) {\n    try {\n      const recordType = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(this.types, record.typeName);\n      if (!recordType) {\n        throw new Error(`Missing definition for record type ${record.typeName}`);\n      }\n      return recordType.validate(record, recordBefore ?? void 0);\n    } catch (error) {\n      if (this.options.onValidationFailure) {\n        return this.options.onValidationFailure({\n          store,\n          record,\n          phase,\n          recordBefore,\n          error\n        });\n      } else {\n        throw error;\n      }\n    }\n  }\n  // TODO: use a weakmap to store the result of this function\n  getMigrationsSince(persistedSchema) {\n    const upgradeResult = upgradeSchema(persistedSchema);\n    if (!upgradeResult.ok) {\n      return upgradeResult;\n    }\n    const schema = upgradeResult.value;\n    const sequenceIdsToInclude = new Set(\n      // start with any shared sequences\n      Object.keys(schema.sequences).filter((sequenceId) => this.migrations[sequenceId])\n    );\n    for (const sequenceId in this.migrations) {\n      if (schema.sequences[sequenceId] === void 0 && this.migrations[sequenceId].retroactive) {\n        sequenceIdsToInclude.add(sequenceId);\n      }\n    }\n    if (sequenceIdsToInclude.size === 0) {\n      return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok([]);\n    }\n    const allMigrationsToInclude = /* @__PURE__ */ new Set();\n    for (const sequenceId of sequenceIdsToInclude) {\n      const theirVersion = schema.sequences[sequenceId];\n      if (typeof theirVersion !== \"number\" && this.migrations[sequenceId].retroactive || theirVersion === 0) {\n        for (const migration of this.migrations[sequenceId].sequence) {\n          allMigrationsToInclude.add(migration.id);\n        }\n        continue;\n      }\n      const theirVersionId = `${sequenceId}/${theirVersion}`;\n      const idx = this.migrations[sequenceId].sequence.findIndex((m) => m.id === theirVersionId);\n      if (idx === -1) {\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.err(\"Incompatible schema?\");\n      }\n      for (const migration of this.migrations[sequenceId].sequence.slice(idx + 1)) {\n        allMigrationsToInclude.add(migration.id);\n      }\n    }\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(this.sortedMigrations.filter(({ id }) => allMigrationsToInclude.has(id)));\n  }\n  migratePersistedRecord(record, persistedSchema, direction = \"up\") {\n    const migrations = this.getMigrationsSince(persistedSchema);\n    if (!migrations.ok) {\n      console.error(\"Error migrating record\", migrations.error);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    let migrationsToApply = migrations.value;\n    if (migrationsToApply.length === 0) {\n      return { type: \"success\", value: record };\n    }\n    if (migrationsToApply.some((m) => m.scope === \"store\")) {\n      return {\n        type: \"error\",\n        reason: direction === \"down\" ? _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooOld : _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew\n      };\n    }\n    if (direction === \"down\") {\n      if (!migrationsToApply.every((m) => m.down)) {\n        return {\n          type: \"error\",\n          reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooOld\n        };\n      }\n      migrationsToApply = migrationsToApply.slice().reverse();\n    }\n    record = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record);\n    try {\n      for (const migration of migrationsToApply) {\n        if (migration.scope === \"store\") throw new Error(\n          /* won't happen, just for TS */\n        );\n        const shouldApply = migration.filter ? migration.filter(record) : true;\n        if (!shouldApply) continue;\n        const result = migration[direction](record);\n        if (result) {\n          record = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n        }\n      }\n    } catch (e) {\n      console.error(\"Error migrating record\", e);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    return { type: \"success\", value: record };\n  }\n  migrateStoreSnapshot(snapshot) {\n    let { store } = snapshot;\n    const migrations = this.getMigrationsSince(snapshot.schema);\n    if (!migrations.ok) {\n      console.error(\"Error migrating store\", migrations.error);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    const migrationsToApply = migrations.value;\n    if (migrationsToApply.length === 0) {\n      return { type: \"success\", value: store };\n    }\n    store = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(store);\n    try {\n      for (const migration of migrationsToApply) {\n        if (migration.scope === \"record\") {\n          for (const [id, record] of Object.entries(store)) {\n            const shouldApply = migration.filter ? migration.filter(record) : true;\n            if (!shouldApply) continue;\n            const result = migration.up(record);\n            if (result) {\n              store[id] = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n            }\n          }\n        } else if (migration.scope === \"store\") {\n          const result = migration.up(store);\n          if (result) {\n            store = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n          }\n        } else {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(migration);\n        }\n      }\n    } catch (e) {\n      console.error(\"Error migrating store\", e);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    return { type: \"success\", value: store };\n  }\n  /** @internal */\n  createIntegrityChecker(store) {\n    return this.options.createIntegrityChecker?.(store) ?? void 0;\n  }\n  serialize() {\n    return {\n      schemaVersion: 2,\n      sequences: Object.fromEntries(\n        Object.values(this.migrations).map(({ sequenceId, sequence }) => [\n          sequenceId,\n          sequence.length ? (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.parseMigrationId)(sequence.at(-1).id).version : 0\n        ])\n      )\n    };\n  }\n  /**\n   * @deprecated This is only here for legacy reasons, don't use it unless you have david's blessing!\n   */\n  serializeEarliestVersion() {\n    return {\n      schemaVersion: 2,\n      sequences: Object.fromEntries(\n        Object.values(this.migrations).map(({ sequenceId }) => [sequenceId, 0])\n      )\n    };\n  }\n  /** @internal */\n  getType(typeName) {\n    const type = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(this.types, typeName);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(type, \"record type does not exists\");\n    return type;\n  }\n}\n\n//# sourceMappingURL=StoreSchema.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVTY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFNdUI7QUFNQTtBQUN2QjtBQUNBLG1FQUFtRSxpREFBTTtBQUN6RSx5Q0FBeUMsaURBQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsU0FBUztBQUM1QztBQUNBO0FBQ0EsdUNBQXVDLFNBQVMsR0FBRyxRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFNLG1FQUFtRSxhQUFhO0FBQzVGLE1BQU0sZ0VBQWtCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0REFBYztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQU0sNkJBQTZCLGFBQWEsa0NBQWtDLElBQUk7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYztBQUN2QztBQUNBLDhEQUE4RCxnQkFBZ0I7QUFDOUU7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxXQUFXLEdBQUcsYUFBYTtBQUMzRDtBQUNBO0FBQ0EsZUFBZSxpREFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBTSxvQ0FBb0MsSUFBSTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUIsZ0VBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxnRUFBc0IsdUJBQXVCLGdFQUFzQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0VBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOERBQWU7QUFDbEM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGVBQWUsdUJBQXVCLGdFQUFzQjtBQUM1RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBVSxRQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCLGdFQUFzQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxZQUFZLDhEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQWU7QUFDekM7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFlO0FBQ25DO0FBQ0EsVUFBVTtBQUNWLFVBQVUsb0VBQXFCO0FBQy9CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxlQUFlLHVCQUF1QixnRUFBc0I7QUFDNUQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNCQUFzQjtBQUNwRTtBQUNBLDRCQUE0Qiw4REFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxZQUFZO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0IsSUFBSSxxREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9TdG9yZVNjaGVtYS5tanM/YWI0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBSZXN1bHQsXG4gIGFzc2VydCxcbiAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yLFxuICBnZXRPd25Qcm9wZXJ0eSxcbiAgc3RydWN0dXJlZENsb25lXG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQge1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uLFxuICBwYXJzZU1pZ3JhdGlvbklkLFxuICBzb3J0TWlncmF0aW9ucyxcbiAgdmFsaWRhdGVNaWdyYXRpb25zXG59IGZyb20gXCIuL21pZ3JhdGUubWpzXCI7XG5mdW5jdGlvbiB1cGdyYWRlU2NoZW1hKHNjaGVtYSkge1xuICBpZiAoc2NoZW1hLnNjaGVtYVZlcnNpb24gPiAyIHx8IHNjaGVtYS5zY2hlbWFWZXJzaW9uIDwgMSkgcmV0dXJuIFJlc3VsdC5lcnIoXCJCYWQgc2NoZW1hIHZlcnNpb25cIik7XG4gIGlmIChzY2hlbWEuc2NoZW1hVmVyc2lvbiA9PT0gMikgcmV0dXJuIFJlc3VsdC5vayhzY2hlbWEpO1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgc2NoZW1hVmVyc2lvbjogMixcbiAgICBzZXF1ZW5jZXM6IHtcbiAgICAgIFwiY29tLnRsZHJhdy5zdG9yZVwiOiBzY2hlbWEuc3RvcmVWZXJzaW9uXG4gICAgfVxuICB9O1xuICBmb3IgKGNvbnN0IFt0eXBlTmFtZSwgcmVjb3JkVmVyc2lvbl0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hLnJlY29yZFZlcnNpb25zKSkge1xuICAgIHJlc3VsdC5zZXF1ZW5jZXNbYGNvbS50bGRyYXcuJHt0eXBlTmFtZX1gXSA9IHJlY29yZFZlcnNpb24udmVyc2lvbjtcbiAgICBpZiAoXCJzdWJUeXBlS2V5XCIgaW4gcmVjb3JkVmVyc2lvbikge1xuICAgICAgZm9yIChjb25zdCBbc3ViVHlwZSwgdmVyc2lvbl0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkVmVyc2lvbi5zdWJUeXBlVmVyc2lvbnMpKSB7XG4gICAgICAgIHJlc3VsdC5zZXF1ZW5jZXNbYGNvbS50bGRyYXcuJHt0eXBlTmFtZX0uJHtzdWJUeXBlfWBdID0gdmVyc2lvbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFJlc3VsdC5vayhyZXN1bHQpO1xufVxuY2xhc3MgU3RvcmVTY2hlbWEge1xuICBjb25zdHJ1Y3Rvcih0eXBlcywgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZXMgPSB0eXBlcztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGZvciAoY29uc3QgbSBvZiBvcHRpb25zLm1pZ3JhdGlvbnMgPz8gW10pIHtcbiAgICAgIGFzc2VydCghdGhpcy5taWdyYXRpb25zW20uc2VxdWVuY2VJZF0sIGBEdXBsaWNhdGUgbWlncmF0aW9uIHNlcXVlbmNlSWQgJHttLnNlcXVlbmNlSWR9YCk7XG4gICAgICB2YWxpZGF0ZU1pZ3JhdGlvbnMobSk7XG4gICAgICB0aGlzLm1pZ3JhdGlvbnNbbS5zZXF1ZW5jZUlkXSA9IG07XG4gICAgfVxuICAgIGNvbnN0IGFsbE1pZ3JhdGlvbnMgPSBPYmplY3QudmFsdWVzKHRoaXMubWlncmF0aW9ucykuZmxhdE1hcCgobSkgPT4gbS5zZXF1ZW5jZSk7XG4gICAgdGhpcy5zb3J0ZWRNaWdyYXRpb25zID0gc29ydE1pZ3JhdGlvbnMoYWxsTWlncmF0aW9ucyk7XG4gICAgZm9yIChjb25zdCBtaWdyYXRpb24gb2YgdGhpcy5zb3J0ZWRNaWdyYXRpb25zKSB7XG4gICAgICBpZiAoIW1pZ3JhdGlvbi5kZXBlbmRzT24/Lmxlbmd0aCkgY29udGludWU7XG4gICAgICBmb3IgKGNvbnN0IGRlcCBvZiBtaWdyYXRpb24uZGVwZW5kc09uKSB7XG4gICAgICAgIGNvbnN0IGRlcE1pZ3JhdGlvbiA9IGFsbE1pZ3JhdGlvbnMuZmluZCgobSkgPT4gbS5pZCA9PT0gZGVwKTtcbiAgICAgICAgYXNzZXJ0KGRlcE1pZ3JhdGlvbiwgYE1pZ3JhdGlvbiAnJHttaWdyYXRpb24uaWR9JyBkZXBlbmRzIG9uIG1pc3NpbmcgbWlncmF0aW9uICcke2RlcH0nYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN0YXRpYyBjcmVhdGUodHlwZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFN0b3JlU2NoZW1hKHR5cGVzLCBvcHRpb25zID8/IHt9KTtcbiAgfVxuICBtaWdyYXRpb25zID0ge307XG4gIHNvcnRlZE1pZ3JhdGlvbnM7XG4gIHZhbGlkYXRlUmVjb3JkKHN0b3JlLCByZWNvcmQsIHBoYXNlLCByZWNvcmRCZWZvcmUpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVjb3JkVHlwZSA9IGdldE93blByb3BlcnR5KHRoaXMudHlwZXMsIHJlY29yZC50eXBlTmFtZSk7XG4gICAgICBpZiAoIXJlY29yZFR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGRlZmluaXRpb24gZm9yIHJlY29yZCB0eXBlICR7cmVjb3JkLnR5cGVOYW1lfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY29yZFR5cGUudmFsaWRhdGUocmVjb3JkLCByZWNvcmRCZWZvcmUgPz8gdm9pZCAwKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5vblZhbGlkYXRpb25GYWlsdXJlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMub25WYWxpZGF0aW9uRmFpbHVyZSh7XG4gICAgICAgICAgc3RvcmUsXG4gICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgIHBoYXNlLFxuICAgICAgICAgIHJlY29yZEJlZm9yZSxcbiAgICAgICAgICBlcnJvclxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBUT0RPOiB1c2UgYSB3ZWFrbWFwIHRvIHN0b3JlIHRoZSByZXN1bHQgb2YgdGhpcyBmdW5jdGlvblxuICBnZXRNaWdyYXRpb25zU2luY2UocGVyc2lzdGVkU2NoZW1hKSB7XG4gICAgY29uc3QgdXBncmFkZVJlc3VsdCA9IHVwZ3JhZGVTY2hlbWEocGVyc2lzdGVkU2NoZW1hKTtcbiAgICBpZiAoIXVwZ3JhZGVSZXN1bHQub2spIHtcbiAgICAgIHJldHVybiB1cGdyYWRlUmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB1cGdyYWRlUmVzdWx0LnZhbHVlO1xuICAgIGNvbnN0IHNlcXVlbmNlSWRzVG9JbmNsdWRlID0gbmV3IFNldChcbiAgICAgIC8vIHN0YXJ0IHdpdGggYW55IHNoYXJlZCBzZXF1ZW5jZXNcbiAgICAgIE9iamVjdC5rZXlzKHNjaGVtYS5zZXF1ZW5jZXMpLmZpbHRlcigoc2VxdWVuY2VJZCkgPT4gdGhpcy5taWdyYXRpb25zW3NlcXVlbmNlSWRdKVxuICAgICk7XG4gICAgZm9yIChjb25zdCBzZXF1ZW5jZUlkIGluIHRoaXMubWlncmF0aW9ucykge1xuICAgICAgaWYgKHNjaGVtYS5zZXF1ZW5jZXNbc2VxdWVuY2VJZF0gPT09IHZvaWQgMCAmJiB0aGlzLm1pZ3JhdGlvbnNbc2VxdWVuY2VJZF0ucmV0cm9hY3RpdmUpIHtcbiAgICAgICAgc2VxdWVuY2VJZHNUb0luY2x1ZGUuYWRkKHNlcXVlbmNlSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2VxdWVuY2VJZHNUb0luY2x1ZGUuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayhbXSk7XG4gICAgfVxuICAgIGNvbnN0IGFsbE1pZ3JhdGlvbnNUb0luY2x1ZGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2VxdWVuY2VJZCBvZiBzZXF1ZW5jZUlkc1RvSW5jbHVkZSkge1xuICAgICAgY29uc3QgdGhlaXJWZXJzaW9uID0gc2NoZW1hLnNlcXVlbmNlc1tzZXF1ZW5jZUlkXTtcbiAgICAgIGlmICh0eXBlb2YgdGhlaXJWZXJzaW9uICE9PSBcIm51bWJlclwiICYmIHRoaXMubWlncmF0aW9uc1tzZXF1ZW5jZUlkXS5yZXRyb2FjdGl2ZSB8fCB0aGVpclZlcnNpb24gPT09IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBtaWdyYXRpb24gb2YgdGhpcy5taWdyYXRpb25zW3NlcXVlbmNlSWRdLnNlcXVlbmNlKSB7XG4gICAgICAgICAgYWxsTWlncmF0aW9uc1RvSW5jbHVkZS5hZGQobWlncmF0aW9uLmlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRoZWlyVmVyc2lvbklkID0gYCR7c2VxdWVuY2VJZH0vJHt0aGVpclZlcnNpb259YDtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMubWlncmF0aW9uc1tzZXF1ZW5jZUlkXS5zZXF1ZW5jZS5maW5kSW5kZXgoKG0pID0+IG0uaWQgPT09IHRoZWlyVmVyc2lvbklkKTtcbiAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZXJyKFwiSW5jb21wYXRpYmxlIHNjaGVtYT9cIik7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiB0aGlzLm1pZ3JhdGlvbnNbc2VxdWVuY2VJZF0uc2VxdWVuY2Uuc2xpY2UoaWR4ICsgMSkpIHtcbiAgICAgICAgYWxsTWlncmF0aW9uc1RvSW5jbHVkZS5hZGQobWlncmF0aW9uLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vayh0aGlzLnNvcnRlZE1pZ3JhdGlvbnMuZmlsdGVyKCh7IGlkIH0pID0+IGFsbE1pZ3JhdGlvbnNUb0luY2x1ZGUuaGFzKGlkKSkpO1xuICB9XG4gIG1pZ3JhdGVQZXJzaXN0ZWRSZWNvcmQocmVjb3JkLCBwZXJzaXN0ZWRTY2hlbWEsIGRpcmVjdGlvbiA9IFwidXBcIikge1xuICAgIGNvbnN0IG1pZ3JhdGlvbnMgPSB0aGlzLmdldE1pZ3JhdGlvbnNTaW5jZShwZXJzaXN0ZWRTY2hlbWEpO1xuICAgIGlmICghbWlncmF0aW9ucy5vaykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1pZ3JhdGluZyByZWNvcmRcIiwgbWlncmF0aW9ucy5lcnJvcik7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImVycm9yXCIsIHJlYXNvbjogTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5NaWdyYXRpb25FcnJvciB9O1xuICAgIH1cbiAgICBsZXQgbWlncmF0aW9uc1RvQXBwbHkgPSBtaWdyYXRpb25zLnZhbHVlO1xuICAgIGlmIChtaWdyYXRpb25zVG9BcHBseS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwic3VjY2Vzc1wiLCB2YWx1ZTogcmVjb3JkIH07XG4gICAgfVxuICAgIGlmIChtaWdyYXRpb25zVG9BcHBseS5zb21lKChtKSA9PiBtLnNjb3BlID09PSBcInN0b3JlXCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgIHJlYXNvbjogZGlyZWN0aW9uID09PSBcImRvd25cIiA/IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uVGFyZ2V0VmVyc2lvblRvb09sZCA6IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uVGFyZ2V0VmVyc2lvblRvb05ld1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJkb3duXCIpIHtcbiAgICAgIGlmICghbWlncmF0aW9uc1RvQXBwbHkuZXZlcnkoKG0pID0+IG0uZG93bikpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBcImVycm9yXCIsXG4gICAgICAgICAgcmVhc29uOiBNaWdyYXRpb25GYWlsdXJlUmVhc29uLlRhcmdldFZlcnNpb25Ub29PbGRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG1pZ3JhdGlvbnNUb0FwcGx5ID0gbWlncmF0aW9uc1RvQXBwbHkuc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgfVxuICAgIHJlY29yZCA9IHN0cnVjdHVyZWRDbG9uZShyZWNvcmQpO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiBtaWdyYXRpb25zVG9BcHBseSkge1xuICAgICAgICBpZiAobWlncmF0aW9uLnNjb3BlID09PSBcInN0b3JlXCIpIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAvKiB3b24ndCBoYXBwZW4sIGp1c3QgZm9yIFRTICovXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHNob3VsZEFwcGx5ID0gbWlncmF0aW9uLmZpbHRlciA/IG1pZ3JhdGlvbi5maWx0ZXIocmVjb3JkKSA6IHRydWU7XG4gICAgICAgIGlmICghc2hvdWxkQXBwbHkpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBtaWdyYXRpb25bZGlyZWN0aW9uXShyZWNvcmQpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgcmVjb3JkID0gc3RydWN0dXJlZENsb25lKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWlncmF0aW5nIHJlY29yZFwiLCBlKTtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgcmVhc29uOiBNaWdyYXRpb25GYWlsdXJlUmVhc29uLk1pZ3JhdGlvbkVycm9yIH07XG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6IFwic3VjY2Vzc1wiLCB2YWx1ZTogcmVjb3JkIH07XG4gIH1cbiAgbWlncmF0ZVN0b3JlU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICBsZXQgeyBzdG9yZSB9ID0gc25hcHNob3Q7XG4gICAgY29uc3QgbWlncmF0aW9ucyA9IHRoaXMuZ2V0TWlncmF0aW9uc1NpbmNlKHNuYXBzaG90LnNjaGVtYSk7XG4gICAgaWYgKCFtaWdyYXRpb25zLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWlncmF0aW5nIHN0b3JlXCIsIG1pZ3JhdGlvbnMuZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJlcnJvclwiLCByZWFzb246IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uTWlncmF0aW9uRXJyb3IgfTtcbiAgICB9XG4gICAgY29uc3QgbWlncmF0aW9uc1RvQXBwbHkgPSBtaWdyYXRpb25zLnZhbHVlO1xuICAgIGlmIChtaWdyYXRpb25zVG9BcHBseS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwic3VjY2Vzc1wiLCB2YWx1ZTogc3RvcmUgfTtcbiAgICB9XG4gICAgc3RvcmUgPSBzdHJ1Y3R1cmVkQ2xvbmUoc3RvcmUpO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiBtaWdyYXRpb25zVG9BcHBseSkge1xuICAgICAgICBpZiAobWlncmF0aW9uLnNjb3BlID09PSBcInJlY29yZFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbaWQsIHJlY29yZF0gb2YgT2JqZWN0LmVudHJpZXMoc3RvcmUpKSB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRBcHBseSA9IG1pZ3JhdGlvbi5maWx0ZXIgPyBtaWdyYXRpb24uZmlsdGVyKHJlY29yZCkgOiB0cnVlO1xuICAgICAgICAgICAgaWYgKCFzaG91bGRBcHBseSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtaWdyYXRpb24udXAocmVjb3JkKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgc3RvcmVbaWRdID0gc3RydWN0dXJlZENsb25lKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1pZ3JhdGlvbi5zY29wZSA9PT0gXCJzdG9yZVwiKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWlncmF0aW9uLnVwKHN0b3JlKTtcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBzdG9yZSA9IHN0cnVjdHVyZWRDbG9uZShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleGhhdXN0aXZlU3dpdGNoRXJyb3IobWlncmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBtaWdyYXRpbmcgc3RvcmVcIiwgZSk7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImVycm9yXCIsIHJlYXNvbjogTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5NaWdyYXRpb25FcnJvciB9O1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcInN1Y2Nlc3NcIiwgdmFsdWU6IHN0b3JlIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyKHN0b3JlKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcmVhdGVJbnRlZ3JpdHlDaGVja2VyPy4oc3RvcmUpID8/IHZvaWQgMDtcbiAgfVxuICBzZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjaGVtYVZlcnNpb246IDIsXG4gICAgICBzZXF1ZW5jZXM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm1pZ3JhdGlvbnMpLm1hcCgoeyBzZXF1ZW5jZUlkLCBzZXF1ZW5jZSB9KSA9PiBbXG4gICAgICAgICAgc2VxdWVuY2VJZCxcbiAgICAgICAgICBzZXF1ZW5jZS5sZW5ndGggPyBwYXJzZU1pZ3JhdGlvbklkKHNlcXVlbmNlLmF0KC0xKS5pZCkudmVyc2lvbiA6IDBcbiAgICAgICAgXSlcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIG9ubHkgaGVyZSBmb3IgbGVnYWN5IHJlYXNvbnMsIGRvbid0IHVzZSBpdCB1bmxlc3MgeW91IGhhdmUgZGF2aWQncyBibGVzc2luZyFcbiAgICovXG4gIHNlcmlhbGl6ZUVhcmxpZXN0VmVyc2lvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NoZW1hVmVyc2lvbjogMixcbiAgICAgIHNlcXVlbmNlczogT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubWlncmF0aW9ucykubWFwKCh7IHNlcXVlbmNlSWQgfSkgPT4gW3NlcXVlbmNlSWQsIDBdKVxuICAgICAgKVxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXRUeXBlKHR5cGVOYW1lKSB7XG4gICAgY29uc3QgdHlwZSA9IGdldE93blByb3BlcnR5KHRoaXMudHlwZXMsIHR5cGVOYW1lKTtcbiAgICBhc3NlcnQodHlwZSwgXCJyZWNvcmQgdHlwZSBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFN0b3JlU2NoZW1hLFxuICB1cGdyYWRlU2NoZW1hXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RvcmVTY2hlbWEubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreSideEffects: () => (/* binding */ StoreSideEffects)\n/* harmony export */ });\nclass StoreSideEffects {\n  constructor(store) {\n    this.store = store;\n  }\n  _beforeCreateHandlers = {};\n  _afterCreateHandlers = {};\n  _beforeChangeHandlers = {};\n  _afterChangeHandlers = {};\n  _beforeDeleteHandlers = {};\n  _afterDeleteHandlers = {};\n  _operationCompleteHandlers = [];\n  _isEnabled = true;\n  /** @internal */\n  isEnabled() {\n    return this._isEnabled;\n  }\n  /** @internal */\n  setIsEnabled(enabled) {\n    this._isEnabled = enabled;\n  }\n  /** @internal */\n  handleBeforeCreate(record, source) {\n    if (!this._isEnabled) return record;\n    const handlers = this._beforeCreateHandlers[record.typeName];\n    if (handlers) {\n      let r = record;\n      for (const handler of handlers) {\n        r = handler(r, source);\n      }\n      return r;\n    }\n    return record;\n  }\n  /** @internal */\n  handleAfterCreate(record, source) {\n    if (!this._isEnabled) return;\n    const handlers = this._afterCreateHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(record, source);\n      }\n    }\n  }\n  /** @internal */\n  handleBeforeChange(prev, next, source) {\n    if (!this._isEnabled) return next;\n    const handlers = this._beforeChangeHandlers[next.typeName];\n    if (handlers) {\n      let r = next;\n      for (const handler of handlers) {\n        r = handler(prev, r, source);\n      }\n      return r;\n    }\n    return next;\n  }\n  /** @internal */\n  handleAfterChange(prev, next, source) {\n    if (!this._isEnabled) return;\n    const handlers = this._afterChangeHandlers[next.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(prev, next, source);\n      }\n    }\n  }\n  /** @internal */\n  handleBeforeDelete(record, source) {\n    if (!this._isEnabled) return true;\n    const handlers = this._beforeDeleteHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        if (handler(record, source) === false) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  /** @internal */\n  handleAfterDelete(record, source) {\n    if (!this._isEnabled) return;\n    const handlers = this._afterDeleteHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(record, source);\n      }\n    }\n  }\n  /** @internal */\n  handleOperationComplete(source) {\n    if (!this._isEnabled) return;\n    for (const handler of this._operationCompleteHandlers) {\n      handler(source);\n    }\n  }\n  /**\n   * Internal helper for registering a bunch of side effects at once and keeping them organized.\n   * @internal\n   */\n  register(handlersByType) {\n    const disposes = [];\n    for (const [type, handlers] of Object.entries(handlersByType)) {\n      if (handlers?.beforeCreate) {\n        disposes.push(this.registerBeforeCreateHandler(type, handlers.beforeCreate));\n      }\n      if (handlers?.afterCreate) {\n        disposes.push(this.registerAfterCreateHandler(type, handlers.afterCreate));\n      }\n      if (handlers?.beforeChange) {\n        disposes.push(this.registerBeforeChangeHandler(type, handlers.beforeChange));\n      }\n      if (handlers?.afterChange) {\n        disposes.push(this.registerAfterChangeHandler(type, handlers.afterChange));\n      }\n      if (handlers?.beforeDelete) {\n        disposes.push(this.registerBeforeDeleteHandler(type, handlers.beforeDelete));\n      }\n      if (handlers?.afterDelete) {\n        disposes.push(this.registerAfterDeleteHandler(type, handlers.afterDelete));\n      }\n    }\n    return () => {\n      for (const dispose of disposes) dispose();\n    };\n  }\n  /**\n   * Register a handler to be called before a record of a certain type is created. Return a\n   * modified record from the handler to change the record that will be created.\n   *\n   * Use this handle only to modify the creation of the record itself. If you want to trigger a\n   * side-effect on a different record (for example, moving one shape when another is created),\n   * use {@link StoreSideEffects.registerAfterCreateHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeCreateHandler('shape', (shape, source) => {\n   *     // only modify shapes created by the user\n   *     if (source !== 'user') return shape\n   *\n   *     //by default, arrow shapes have no label. Let's make sure they always have a label.\n   *     if (shape.type === 'arrow') {\n   *         return {...shape, props: {...shape.props, text: 'an arrow'}}\n   *     }\n   *\n   *     // other shapes get returned unmodified\n   *     return shape\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeCreateHandler(typeName, handler) {\n    const handlers = this._beforeCreateHandlers[typeName];\n    if (!handlers) this._beforeCreateHandlers[typeName] = [];\n    this._beforeCreateHandlers[typeName].push(handler);\n    return () => remove(this._beforeCreateHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is created. This is useful for side-effects\n   * that would update _other_ records. If you want to modify the record being created use\n   * {@link StoreSideEffects.registerBeforeCreateHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterCreateHandler('page', (page, source) => {\n   *     // Automatically create a shape when a page is created\n   *     editor.createShape({\n   *         id: createShapeId(),\n   *         type: 'text',\n   *         props: { text: page.name },\n   *     })\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterCreateHandler(typeName, handler) {\n    const handlers = this._afterCreateHandlers[typeName];\n    if (!handlers) this._afterCreateHandlers[typeName] = [];\n    this._afterCreateHandlers[typeName].push(handler);\n    return () => remove(this._afterCreateHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called before a record is changed. The handler is given the old and\n   * new record - you can return a modified record to apply a different update, or the old record\n   * to block the update entirely.\n   *\n   * Use this handler only for intercepting updates to the record itself. If you want to update\n   * other records in response to a change, use\n   * {@link StoreSideEffects.registerAfterChangeHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeChangeHandler('shape', (prev, next, source) => {\n   *     if (next.isLocked && !prev.isLocked) {\n   *         // prevent shapes from ever being locked:\n   *         return prev\n   *     }\n   *     // other types of change are allowed\n   *     return next\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeChangeHandler(typeName, handler) {\n    const handlers = this._beforeChangeHandlers[typeName];\n    if (!handlers) this._beforeChangeHandlers[typeName] = [];\n    this._beforeChangeHandlers[typeName].push(handler);\n    return () => remove(this._beforeChangeHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is changed. This is useful for side-effects\n   * that would update _other_ records - if you want to modify the record being changed, use\n   * {@link StoreSideEffects.registerBeforeChangeHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterChangeHandler('shape', (prev, next, source) => {\n   *     if (next.props.color === 'red') {\n   *         // there can only be one red shape at a time:\n   *         const otherRedShapes = editor.getCurrentPageShapes().filter(s => s.props.color === 'red' && s.id !== next.id)\n   *         editor.updateShapes(otherRedShapes.map(s => ({...s, props: {...s.props, color: 'blue'}})))\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterChangeHandler(typeName, handler) {\n    const handlers = this._afterChangeHandlers[typeName];\n    if (!handlers) this._afterChangeHandlers[typeName] = [];\n    this._afterChangeHandlers[typeName].push(handler);\n    return () => remove(this._afterChangeHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called before a record is deleted. The handler can return `false` to\n   * prevent the deletion.\n   *\n   * Use this handler only for intercepting deletions of the record itself. If you want to do\n   * something to other records in response to a deletion, use\n   * {@link StoreSideEffects.registerAfterDeleteHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeDeleteHandler('shape', (shape, source) => {\n   *     if (shape.props.color === 'red') {\n   *         // prevent red shapes from being deleted\n   * \t       return false\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeDeleteHandler(typeName, handler) {\n    const handlers = this._beforeDeleteHandlers[typeName];\n    if (!handlers) this._beforeDeleteHandlers[typeName] = [];\n    this._beforeDeleteHandlers[typeName].push(handler);\n    return () => remove(this._beforeDeleteHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is deleted. This is useful for side-effects\n   * that would update _other_ records - if you want to block the deletion of the record itself,\n   * use {@link StoreSideEffects.registerBeforeDeleteHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterDeleteHandler('shape', (shape, source) => {\n   *     // if the last shape in a frame is deleted, delete the frame too:\n   *     const parentFrame = editor.getShape(shape.parentId)\n   *     if (!parentFrame || parentFrame.type !== 'frame') return\n   *\n   *     const siblings = editor.getSortedChildIdsForParent(parentFrame)\n   *     if (siblings.length === 0) {\n   *         editor.deleteShape(parentFrame.id)\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterDeleteHandler(typeName, handler) {\n    const handlers = this._afterDeleteHandlers[typeName];\n    if (!handlers) this._afterDeleteHandlers[typeName] = [];\n    this._afterDeleteHandlers[typeName].push(handler);\n    return () => remove(this._afterDeleteHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called when a store completes an atomic operation.\n   *\n   * @example\n   * ```ts\n   * let count = 0\n   *\n   * editor.sideEffects.registerOperationCompleteHandler(() => count++)\n   *\n   * editor.selectAll()\n   * expect(count).toBe(1)\n   *\n   * editor.store.atomic(() => {\n   *\teditor.selectNone()\n   * \teditor.selectAll()\n   * })\n   *\n   * expect(count).toBe(2)\n   * ```\n   *\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   *\n   * @public\n   */\n  registerOperationCompleteHandler(handler) {\n    this._operationCompleteHandlers.push(handler);\n    return () => remove(this._operationCompleteHandlers, handler);\n  }\n}\nfunction remove(array, item) {\n  const index = array.indexOf(item);\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n}\n\n//# sourceMappingURL=StoreSideEffects.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVTaWRlRWZmZWN0cy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbURBQW1EO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrQkFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFvRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQjtBQUN2QyxVQUFVO0FBQ1YsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG1EQUFtRDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0RBQW9EO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGNBQWMsMkJBQTJCO0FBQ3BHO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtREFBbUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0RBQW9EO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVTaWRlRWZmZWN0cy5tanM/OWQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTdG9yZVNpZGVFZmZlY3RzIHtcbiAgY29uc3RydWN0b3Ioc3RvcmUpIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gIH1cbiAgX2JlZm9yZUNyZWF0ZUhhbmRsZXJzID0ge307XG4gIF9hZnRlckNyZWF0ZUhhbmRsZXJzID0ge307XG4gIF9iZWZvcmVDaGFuZ2VIYW5kbGVycyA9IHt9O1xuICBfYWZ0ZXJDaGFuZ2VIYW5kbGVycyA9IHt9O1xuICBfYmVmb3JlRGVsZXRlSGFuZGxlcnMgPSB7fTtcbiAgX2FmdGVyRGVsZXRlSGFuZGxlcnMgPSB7fTtcbiAgX29wZXJhdGlvbkNvbXBsZXRlSGFuZGxlcnMgPSBbXTtcbiAgX2lzRW5hYmxlZCA9IHRydWU7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaXNFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0VuYWJsZWQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzZXRJc0VuYWJsZWQoZW5hYmxlZCkge1xuICAgIHRoaXMuX2lzRW5hYmxlZCA9IGVuYWJsZWQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBoYW5kbGVCZWZvcmVDcmVhdGUocmVjb3JkLCBzb3VyY2UpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkgcmV0dXJuIHJlY29yZDtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2JlZm9yZUNyZWF0ZUhhbmRsZXJzW3JlY29yZC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBsZXQgciA9IHJlY29yZDtcbiAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICByID0gaGFuZGxlcihyLCBzb3VyY2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIHJldHVybiByZWNvcmQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBoYW5kbGVBZnRlckNyZWF0ZShyZWNvcmQsIHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9hZnRlckNyZWF0ZUhhbmRsZXJzW3JlY29yZC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgaGFuZGxlcihyZWNvcmQsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaGFuZGxlQmVmb3JlQ2hhbmdlKHByZXYsIG5leHQsIHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSByZXR1cm4gbmV4dDtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2JlZm9yZUNoYW5nZUhhbmRsZXJzW25leHQudHlwZU5hbWVdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgbGV0IHIgPSBuZXh0O1xuICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgIHIgPSBoYW5kbGVyKHByZXYsIHIsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBoYW5kbGVBZnRlckNoYW5nZShwcmV2LCBuZXh0LCBzb3VyY2UpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1tuZXh0LnR5cGVOYW1lXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICBoYW5kbGVyKHByZXYsIG5leHQsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaGFuZGxlQmVmb3JlRGVsZXRlKHJlY29yZCwgc291cmNlKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlRGVsZXRlSGFuZGxlcnNbcmVjb3JkLnR5cGVOYW1lXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICBpZiAoaGFuZGxlcihyZWNvcmQsIHNvdXJjZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaGFuZGxlQWZ0ZXJEZWxldGUocmVjb3JkLCBzb3VyY2UpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZCkgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJEZWxldGVIYW5kbGVyc1tyZWNvcmQudHlwZU5hbWVdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgIGhhbmRsZXIocmVjb3JkLCBzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGhhbmRsZU9wZXJhdGlvbkNvbXBsZXRlKHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuX29wZXJhdGlvbkNvbXBsZXRlSGFuZGxlcnMpIHtcbiAgICAgIGhhbmRsZXIoc291cmNlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEludGVybmFsIGhlbHBlciBmb3IgcmVnaXN0ZXJpbmcgYSBidW5jaCBvZiBzaWRlIGVmZmVjdHMgYXQgb25jZSBhbmQga2VlcGluZyB0aGVtIG9yZ2FuaXplZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICByZWdpc3RlcihoYW5kbGVyc0J5VHlwZSkge1xuICAgIGNvbnN0IGRpc3Bvc2VzID0gW107XG4gICAgZm9yIChjb25zdCBbdHlwZSwgaGFuZGxlcnNdIG9mIE9iamVjdC5lbnRyaWVzKGhhbmRsZXJzQnlUeXBlKSkge1xuICAgICAgaWYgKGhhbmRsZXJzPy5iZWZvcmVDcmVhdGUpIHtcbiAgICAgICAgZGlzcG9zZXMucHVzaCh0aGlzLnJlZ2lzdGVyQmVmb3JlQ3JlYXRlSGFuZGxlcih0eXBlLCBoYW5kbGVycy5iZWZvcmVDcmVhdGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycz8uYWZ0ZXJDcmVhdGUpIHtcbiAgICAgICAgZGlzcG9zZXMucHVzaCh0aGlzLnJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyKHR5cGUsIGhhbmRsZXJzLmFmdGVyQ3JlYXRlKSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFuZGxlcnM/LmJlZm9yZUNoYW5nZSkge1xuICAgICAgICBkaXNwb3Nlcy5wdXNoKHRoaXMucmVnaXN0ZXJCZWZvcmVDaGFuZ2VIYW5kbGVyKHR5cGUsIGhhbmRsZXJzLmJlZm9yZUNoYW5nZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGhhbmRsZXJzPy5hZnRlckNoYW5nZSkge1xuICAgICAgICBkaXNwb3Nlcy5wdXNoKHRoaXMucmVnaXN0ZXJBZnRlckNoYW5nZUhhbmRsZXIodHlwZSwgaGFuZGxlcnMuYWZ0ZXJDaGFuZ2UpKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycz8uYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgIGRpc3Bvc2VzLnB1c2godGhpcy5yZWdpc3RlckJlZm9yZURlbGV0ZUhhbmRsZXIodHlwZSwgaGFuZGxlcnMuYmVmb3JlRGVsZXRlKSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFuZGxlcnM/LmFmdGVyRGVsZXRlKSB7XG4gICAgICAgIGRpc3Bvc2VzLnB1c2godGhpcy5yZWdpc3RlckFmdGVyRGVsZXRlSGFuZGxlcih0eXBlLCBoYW5kbGVycy5hZnRlckRlbGV0ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIGRpc3Bvc2VzKSBkaXNwb3NlKCk7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBiZWZvcmUgYSByZWNvcmQgb2YgYSBjZXJ0YWluIHR5cGUgaXMgY3JlYXRlZC4gUmV0dXJuIGFcbiAgICogbW9kaWZpZWQgcmVjb3JkIGZyb20gdGhlIGhhbmRsZXIgdG8gY2hhbmdlIHRoZSByZWNvcmQgdGhhdCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGhhbmRsZSBvbmx5IHRvIG1vZGlmeSB0aGUgY3JlYXRpb24gb2YgdGhlIHJlY29yZCBpdHNlbGYuIElmIHlvdSB3YW50IHRvIHRyaWdnZXIgYVxuICAgKiBzaWRlLWVmZmVjdCBvbiBhIGRpZmZlcmVudCByZWNvcmQgKGZvciBleGFtcGxlLCBtb3Zpbmcgb25lIHNoYXBlIHdoZW4gYW5vdGhlciBpcyBjcmVhdGVkKSxcbiAgICogdXNlIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVDcmVhdGVIYW5kbGVyKCdzaGFwZScsIChzaGFwZSwgc291cmNlKSA9PiB7XG4gICAqICAgICAvLyBvbmx5IG1vZGlmeSBzaGFwZXMgY3JlYXRlZCBieSB0aGUgdXNlclxuICAgKiAgICAgaWYgKHNvdXJjZSAhPT0gJ3VzZXInKSByZXR1cm4gc2hhcGVcbiAgICpcbiAgICogICAgIC8vYnkgZGVmYXVsdCwgYXJyb3cgc2hhcGVzIGhhdmUgbm8gbGFiZWwuIExldCdzIG1ha2Ugc3VyZSB0aGV5IGFsd2F5cyBoYXZlIGEgbGFiZWwuXG4gICAqICAgICBpZiAoc2hhcGUudHlwZSA9PT0gJ2Fycm93Jykge1xuICAgKiAgICAgICAgIHJldHVybiB7Li4uc2hhcGUsIHByb3BzOiB7Li4uc2hhcGUucHJvcHMsIHRleHQ6ICdhbiBhcnJvdyd9fVxuICAgKiAgICAgfVxuICAgKlxuICAgKiAgICAgLy8gb3RoZXIgc2hhcGVzIGdldCByZXR1cm5lZCB1bm1vZGlmaWVkXG4gICAqICAgICByZXR1cm4gc2hhcGVcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSB0eXBlIG9mIHJlY29yZCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJucyBBIGNhbGxiYWNrIHRoYXQgcmVtb3ZlcyB0aGUgaGFuZGxlci5cbiAgICovXG4gIHJlZ2lzdGVyQmVmb3JlQ3JlYXRlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpIHRoaXMuX2JlZm9yZUNyZWF0ZUhhbmRsZXJzW3R5cGVOYW1lXSA9IFtdO1xuICAgIHRoaXMuX2JlZm9yZUNyZWF0ZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYmVmb3JlQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBhZnRlciBhIHJlY29yZCBpcyBjcmVhdGVkLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2lkZS1lZmZlY3RzXG4gICAqIHRoYXQgd291bGQgdXBkYXRlIF9vdGhlcl8gcmVjb3Jkcy4gSWYgeW91IHdhbnQgdG8gbW9kaWZ5IHRoZSByZWNvcmQgYmVpbmcgY3JlYXRlZCB1c2VcbiAgICoge0BsaW5rIFN0b3JlU2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVDcmVhdGVIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJBZnRlckNyZWF0ZUhhbmRsZXIoJ3BhZ2UnLCAocGFnZSwgc291cmNlKSA9PiB7XG4gICAqICAgICAvLyBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIHNoYXBlIHdoZW4gYSBwYWdlIGlzIGNyZWF0ZWRcbiAgICogICAgIGVkaXRvci5jcmVhdGVTaGFwZSh7XG4gICAqICAgICAgICAgaWQ6IGNyZWF0ZVNoYXBlSWQoKSxcbiAgICogICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAqICAgICAgICAgcHJvcHM6IHsgdGV4dDogcGFnZS5uYW1lIH0sXG4gICAqICAgICB9KVxuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHR5cGVOYW1lIC0gVGhlIHR5cGUgb2YgcmVjb3JkIHRvIGxpc3RlbiBmb3JcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm5zIEEgY2FsbGJhY2sgdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLlxuICAgKi9cbiAgcmVnaXN0ZXJBZnRlckNyZWF0ZUhhbmRsZXIodHlwZU5hbWUsIGhhbmRsZXIpIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2FmdGVyQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpIHRoaXMuX2FmdGVyQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdID0gW107XG4gICAgdGhpcy5fYWZ0ZXJDcmVhdGVIYW5kbGVyc1t0eXBlTmFtZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlKHRoaXMuX2FmdGVyQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBiZWZvcmUgYSByZWNvcmQgaXMgY2hhbmdlZC4gVGhlIGhhbmRsZXIgaXMgZ2l2ZW4gdGhlIG9sZCBhbmRcbiAgICogbmV3IHJlY29yZCAtIHlvdSBjYW4gcmV0dXJuIGEgbW9kaWZpZWQgcmVjb3JkIHRvIGFwcGx5IGEgZGlmZmVyZW50IHVwZGF0ZSwgb3IgdGhlIG9sZCByZWNvcmRcbiAgICogdG8gYmxvY2sgdGhlIHVwZGF0ZSBlbnRpcmVseS5cbiAgICpcbiAgICogVXNlIHRoaXMgaGFuZGxlciBvbmx5IGZvciBpbnRlcmNlcHRpbmcgdXBkYXRlcyB0byB0aGUgcmVjb3JkIGl0c2VsZi4gSWYgeW91IHdhbnQgdG8gdXBkYXRlXG4gICAqIG90aGVyIHJlY29yZHMgaW4gcmVzcG9uc2UgdG8gYSBjaGFuZ2UsIHVzZVxuICAgKiB7QGxpbmsgU3RvcmVTaWRlRWZmZWN0cy5yZWdpc3RlckFmdGVyQ2hhbmdlSGFuZGxlcn0gaW5zdGVhZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyQmVmb3JlQ2hhbmdlSGFuZGxlcignc2hhcGUnLCAocHJldiwgbmV4dCwgc291cmNlKSA9PiB7XG4gICAqICAgICBpZiAobmV4dC5pc0xvY2tlZCAmJiAhcHJldi5pc0xvY2tlZCkge1xuICAgKiAgICAgICAgIC8vIHByZXZlbnQgc2hhcGVzIGZyb20gZXZlciBiZWluZyBsb2NrZWQ6XG4gICAqICAgICAgICAgcmV0dXJuIHByZXZcbiAgICogICAgIH1cbiAgICogICAgIC8vIG90aGVyIHR5cGVzIG9mIGNoYW5nZSBhcmUgYWxsb3dlZFxuICAgKiAgICAgcmV0dXJuIG5leHRcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSB0eXBlIG9mIHJlY29yZCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJucyBBIGNhbGxiYWNrIHRoYXQgcmVtb3ZlcyB0aGUgaGFuZGxlci5cbiAgICovXG4gIHJlZ2lzdGVyQmVmb3JlQ2hhbmdlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlQ2hhbmdlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpIHRoaXMuX2JlZm9yZUNoYW5nZUhhbmRsZXJzW3R5cGVOYW1lXSA9IFtdO1xuICAgIHRoaXMuX2JlZm9yZUNoYW5nZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYmVmb3JlQ2hhbmdlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBhZnRlciBhIHJlY29yZCBpcyBjaGFuZ2VkLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2lkZS1lZmZlY3RzXG4gICAqIHRoYXQgd291bGQgdXBkYXRlIF9vdGhlcl8gcmVjb3JkcyAtIGlmIHlvdSB3YW50IHRvIG1vZGlmeSB0aGUgcmVjb3JkIGJlaW5nIGNoYW5nZWQsIHVzZVxuICAgKiB7QGxpbmsgU3RvcmVTaWRlRWZmZWN0cy5yZWdpc3RlckJlZm9yZUNoYW5nZUhhbmRsZXJ9IGluc3RlYWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zaWRlRWZmZWN0cy5yZWdpc3RlckFmdGVyQ2hhbmdlSGFuZGxlcignc2hhcGUnLCAocHJldiwgbmV4dCwgc291cmNlKSA9PiB7XG4gICAqICAgICBpZiAobmV4dC5wcm9wcy5jb2xvciA9PT0gJ3JlZCcpIHtcbiAgICogICAgICAgICAvLyB0aGVyZSBjYW4gb25seSBiZSBvbmUgcmVkIHNoYXBlIGF0IGEgdGltZTpcbiAgICogICAgICAgICBjb25zdCBvdGhlclJlZFNoYXBlcyA9IGVkaXRvci5nZXRDdXJyZW50UGFnZVNoYXBlcygpLmZpbHRlcihzID0+IHMucHJvcHMuY29sb3IgPT09ICdyZWQnICYmIHMuaWQgIT09IG5leHQuaWQpXG4gICAqICAgICAgICAgZWRpdG9yLnVwZGF0ZVNoYXBlcyhvdGhlclJlZFNoYXBlcy5tYXAocyA9PiAoey4uLnMsIHByb3BzOiB7Li4ucy5wcm9wcywgY29sb3I6ICdibHVlJ319KSkpXG4gICAqICAgICB9XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgdHlwZSBvZiByZWNvcmQgdG8gbGlzdGVuIGZvclxuICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIGNhbGxcbiAgICpcbiAgICogQHJldHVybnMgQSBjYWxsYmFjayB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gICAqL1xuICByZWdpc3RlckFmdGVyQ2hhbmdlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV07XG4gICAgaWYgKCFoYW5kbGVycykgdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV0gPSBbXTtcbiAgICB0aGlzLl9hZnRlckNoYW5nZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV0sIGhhbmRsZXIpO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGhhbmRsZXIgdG8gYmUgY2FsbGVkIGJlZm9yZSBhIHJlY29yZCBpcyBkZWxldGVkLiBUaGUgaGFuZGxlciBjYW4gcmV0dXJuIGBmYWxzZWAgdG9cbiAgICogcHJldmVudCB0aGUgZGVsZXRpb24uXG4gICAqXG4gICAqIFVzZSB0aGlzIGhhbmRsZXIgb25seSBmb3IgaW50ZXJjZXB0aW5nIGRlbGV0aW9ucyBvZiB0aGUgcmVjb3JkIGl0c2VsZi4gSWYgeW91IHdhbnQgdG8gZG9cbiAgICogc29tZXRoaW5nIHRvIG90aGVyIHJlY29yZHMgaW4gcmVzcG9uc2UgdG8gYSBkZWxldGlvbiwgdXNlXG4gICAqIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJEZWxldGVIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVEZWxldGVIYW5kbGVyKCdzaGFwZScsIChzaGFwZSwgc291cmNlKSA9PiB7XG4gICAqICAgICBpZiAoc2hhcGUucHJvcHMuY29sb3IgPT09ICdyZWQnKSB7XG4gICAqICAgICAgICAgLy8gcHJldmVudCByZWQgc2hhcGVzIGZyb20gYmVpbmcgZGVsZXRlZFxuICAgKiBcdCAgICAgICByZXR1cm4gZmFsc2VcbiAgICogICAgIH1cbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSB0eXBlIG9mIHJlY29yZCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJucyBBIGNhbGxiYWNrIHRoYXQgcmVtb3ZlcyB0aGUgaGFuZGxlci5cbiAgICovXG4gIHJlZ2lzdGVyQmVmb3JlRGVsZXRlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpIHRoaXMuX2JlZm9yZURlbGV0ZUhhbmRsZXJzW3R5cGVOYW1lXSA9IFtdO1xuICAgIHRoaXMuX2JlZm9yZURlbGV0ZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYmVmb3JlRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBhZnRlciBhIHJlY29yZCBpcyBkZWxldGVkLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2lkZS1lZmZlY3RzXG4gICAqIHRoYXQgd291bGQgdXBkYXRlIF9vdGhlcl8gcmVjb3JkcyAtIGlmIHlvdSB3YW50IHRvIGJsb2NrIHRoZSBkZWxldGlvbiBvZiB0aGUgcmVjb3JkIGl0c2VsZixcbiAgICogdXNlIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQmVmb3JlRGVsZXRlSGFuZGxlcn0gaW5zdGVhZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJEZWxldGVIYW5kbGVyKCdzaGFwZScsIChzaGFwZSwgc291cmNlKSA9PiB7XG4gICAqICAgICAvLyBpZiB0aGUgbGFzdCBzaGFwZSBpbiBhIGZyYW1lIGlzIGRlbGV0ZWQsIGRlbGV0ZSB0aGUgZnJhbWUgdG9vOlxuICAgKiAgICAgY29uc3QgcGFyZW50RnJhbWUgPSBlZGl0b3IuZ2V0U2hhcGUoc2hhcGUucGFyZW50SWQpXG4gICAqICAgICBpZiAoIXBhcmVudEZyYW1lIHx8IHBhcmVudEZyYW1lLnR5cGUgIT09ICdmcmFtZScpIHJldHVyblxuICAgKlxuICAgKiAgICAgY29uc3Qgc2libGluZ3MgPSBlZGl0b3IuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50RnJhbWUpXG4gICAqICAgICBpZiAoc2libGluZ3MubGVuZ3RoID09PSAwKSB7XG4gICAqICAgICAgICAgZWRpdG9yLmRlbGV0ZVNoYXBlKHBhcmVudEZyYW1lLmlkKVxuICAgKiAgICAgfVxuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHR5cGVOYW1lIC0gVGhlIHR5cGUgb2YgcmVjb3JkIHRvIGxpc3RlbiBmb3JcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm5zIEEgY2FsbGJhY2sgdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLlxuICAgKi9cbiAgcmVnaXN0ZXJBZnRlckRlbGV0ZUhhbmRsZXIodHlwZU5hbWUsIGhhbmRsZXIpIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2FmdGVyRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpIHRoaXMuX2FmdGVyRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdID0gW107XG4gICAgdGhpcy5fYWZ0ZXJEZWxldGVIYW5kbGVyc1t0eXBlTmFtZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlKHRoaXMuX2FmdGVyRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIGEgc3RvcmUgY29tcGxldGVzIGFuIGF0b21pYyBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGxldCBjb3VudCA9IDBcbiAgICpcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyT3BlcmF0aW9uQ29tcGxldGVIYW5kbGVyKCgpID0+IGNvdW50KyspXG4gICAqXG4gICAqIGVkaXRvci5zZWxlY3RBbGwoKVxuICAgKiBleHBlY3QoY291bnQpLnRvQmUoMSlcbiAgICpcbiAgICogZWRpdG9yLnN0b3JlLmF0b21pYygoKSA9PiB7XG4gICAqXHRlZGl0b3Iuc2VsZWN0Tm9uZSgpXG4gICAqIFx0ZWRpdG9yLnNlbGVjdEFsbCgpXG4gICAqIH0pXG4gICAqXG4gICAqIGV4cGVjdChjb3VudCkudG9CZSgyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm5zIEEgY2FsbGJhY2sgdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3Rlck9wZXJhdGlvbkNvbXBsZXRlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uQ29tcGxldGVIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fb3BlcmF0aW9uQ29tcGxldGVIYW5kbGVycywgaGFuZGxlcik7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZShhcnJheSwgaXRlbSkge1xuICBjb25zdCBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XG4gIGlmIChpbmRleCA+PSAwKSB7XG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU3RvcmVTaWRlRWZmZWN0c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlU2lkZUVmZmVjdHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   devFreeze: () => (/* binding */ devFreeze)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction devFreeze(object) {\n  if (false) {}\n  const proto = Object.getPrototypeOf(object);\n  if (proto && !(Array.isArray(object) || proto === Object.prototype || proto === null || proto === _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.STRUCTURED_CLONE_OBJECT_PROTOTYPE)) {\n    console.error(\"cannot include non-js data in a record\", object);\n    throw new Error(\"cannot include non-js data in a record\");\n  }\n  const propNames = Object.getOwnPropertyNames(object);\n  for (const name of propNames) {\n    const value = object[name];\n    if (value && typeof value === \"object\") {\n      devFreeze(value);\n    }\n  }\n  return Object.freeze(object);\n}\n\n//# sourceMappingURL=devFreeze.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvZGV2RnJlZXplLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRTtBQUNsRTtBQUNBLE1BQU0sS0FBcUMsRUFBRSxFQUUxQztBQUNIO0FBQ0Esb0dBQW9HLDRFQUFpQztBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvZGV2RnJlZXplLm1qcz8yNjRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5mdW5jdGlvbiBkZXZGcmVlemUob2JqZWN0KSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG4gIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gIGlmIChwcm90byAmJiAhKEFycmF5LmlzQXJyYXkob2JqZWN0KSB8fCBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBwcm90byA9PT0gbnVsbCB8fCBwcm90byA9PT0gU1RSVUNUVVJFRF9DTE9ORV9PQkpFQ1RfUFJPVE9UWVBFKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJjYW5ub3QgaW5jbHVkZSBub24tanMgZGF0YSBpbiBhIHJlY29yZFwiLCBvYmplY3QpO1xuICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBpbmNsdWRlIG5vbi1qcyBkYXRhIGluIGEgcmVjb3JkXCIpO1xuICB9XG4gIGNvbnN0IHByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iamVjdCk7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBwcm9wTmFtZXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG9iamVjdFtuYW1lXTtcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBkZXZGcmVlemUodmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvYmplY3QpO1xufVxuZXhwb3J0IHtcbiAgZGV2RnJlZXplXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGV2RnJlZXplLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery),\n/* harmony export */   objectMatchesQuery: () => (/* binding */ objectMatchesQuery)\n/* harmony export */ });\n/* harmony import */ var _setUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setUtils.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\");\n\nfunction objectMatchesQuery(query, object) {\n  for (const [key, _matcher] of Object.entries(query)) {\n    const matcher = _matcher;\n    const value = object[key];\n    if (\"eq\" in matcher && value !== matcher.eq) return false;\n    if (\"neq\" in matcher && value === matcher.neq) return false;\n    if (\"gt\" in matcher && (typeof value !== \"number\" || value <= matcher.gt)) return false;\n  }\n  return true;\n}\nfunction executeQuery(store, typeName, query) {\n  const matchIds = Object.fromEntries(Object.keys(query).map((key) => [key, /* @__PURE__ */ new Set()]));\n  for (const [k, matcher] of Object.entries(query)) {\n    if (\"eq\" in matcher) {\n      const index = store.index(typeName, k);\n      const ids = index.get().get(matcher.eq);\n      if (ids) {\n        for (const id of ids) {\n          matchIds[k].add(id);\n        }\n      }\n    } else if (\"neq\" in matcher) {\n      const index = store.index(typeName, k);\n      for (const [value, ids] of index.get()) {\n        if (value !== matcher.neq) {\n          for (const id of ids) {\n            matchIds[k].add(id);\n          }\n        }\n      }\n    } else if (\"gt\" in matcher) {\n      const index = store.index(typeName, k);\n      for (const [value, ids] of index.get()) {\n        if (value > matcher.gt) {\n          for (const id of ids) {\n            matchIds[k].add(id);\n          }\n        }\n      }\n    }\n  }\n  return (0,_setUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.intersectSets)(Object.values(matchIds));\n}\n\n//# sourceMappingURL=executeQuery.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvZXhlY3V0ZVF1ZXJ5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFhO0FBQ3RCO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL2V4ZWN1dGVRdWVyeS5tanM/OTBkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnRlcnNlY3RTZXRzIH0gZnJvbSBcIi4vc2V0VXRpbHMubWpzXCI7XG5mdW5jdGlvbiBvYmplY3RNYXRjaGVzUXVlcnkocXVlcnksIG9iamVjdCkge1xuICBmb3IgKGNvbnN0IFtrZXksIF9tYXRjaGVyXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeSkpIHtcbiAgICBjb25zdCBtYXRjaGVyID0gX21hdGNoZXI7XG4gICAgY29uc3QgdmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgICBpZiAoXCJlcVwiIGluIG1hdGNoZXIgJiYgdmFsdWUgIT09IG1hdGNoZXIuZXEpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoXCJuZXFcIiBpbiBtYXRjaGVyICYmIHZhbHVlID09PSBtYXRjaGVyLm5lcSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChcImd0XCIgaW4gbWF0Y2hlciAmJiAodHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiIHx8IHZhbHVlIDw9IG1hdGNoZXIuZ3QpKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBleGVjdXRlUXVlcnkoc3RvcmUsIHR5cGVOYW1lLCBxdWVyeSkge1xuICBjb25zdCBtYXRjaElkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhxdWVyeSkubWFwKChrZXkpID0+IFtrZXksIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCldKSk7XG4gIGZvciAoY29uc3QgW2ssIG1hdGNoZXJdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KSkge1xuICAgIGlmIChcImVxXCIgaW4gbWF0Y2hlcikge1xuICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleCh0eXBlTmFtZSwgayk7XG4gICAgICBjb25zdCBpZHMgPSBpbmRleC5nZXQoKS5nZXQobWF0Y2hlci5lcSk7XG4gICAgICBpZiAoaWRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICAgICAgbWF0Y2hJZHNba10uYWRkKGlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXCJuZXFcIiBpbiBtYXRjaGVyKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmluZGV4KHR5cGVOYW1lLCBrKTtcbiAgICAgIGZvciAoY29uc3QgW3ZhbHVlLCBpZHNdIG9mIGluZGV4LmdldCgpKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbWF0Y2hlci5uZXEpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgICAgbWF0Y2hJZHNba10uYWRkKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFwiZ3RcIiBpbiBtYXRjaGVyKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmluZGV4KHR5cGVOYW1lLCBrKTtcbiAgICAgIGZvciAoY29uc3QgW3ZhbHVlLCBpZHNdIG9mIGluZGV4LmdldCgpKSB7XG4gICAgICAgIGlmICh2YWx1ZSA+IG1hdGNoZXIuZ3QpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgICAgbWF0Y2hJZHNba10uYWRkKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdFNldHMoT2JqZWN0LnZhbHVlcyhtYXRjaElkcykpO1xufVxuZXhwb3J0IHtcbiAgZXhlY3V0ZVF1ZXJ5LFxuICBvYmplY3RNYXRjaGVzUXVlcnlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leGVjdXRlUXVlcnkubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MigrationFailureReason: () => (/* binding */ MigrationFailureReason),\n/* harmony export */   createMigrationIds: () => (/* binding */ createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* binding */ createMigrationSequence),\n/* harmony export */   createRecordMigrationSequence: () => (/* binding */ createRecordMigrationSequence),\n/* harmony export */   defineMigrations: () => (/* binding */ defineMigrations),\n/* harmony export */   parseMigrationId: () => (/* binding */ parseMigrationId),\n/* harmony export */   sortMigrations: () => (/* binding */ sortMigrations),\n/* harmony export */   validateMigrations: () => (/* binding */ validateMigrations)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nlet didWarn = false;\nfunction defineMigrations(opts) {\n  const { currentVersion, firstVersion, migrators = {}, subTypeKey, subTypeMigrations } = opts;\n  if (!didWarn) {\n    console.warn(\n      `The 'defineMigrations' function is deprecated and will be removed in a future release. Use the new migrations API instead. See the migration guide for more info: https://tldraw.dev/docs/persistence#Updating-legacy-shape-migrations-defineMigrations`\n    );\n    didWarn = true;\n  }\n  if (typeof currentVersion === \"number\" && typeof firstVersion === \"number\") {\n    if (currentVersion === firstVersion) {\n      throw Error(`Current version is equal to initial version.`);\n    } else if (currentVersion < firstVersion) {\n      throw Error(`Current version is lower than initial version.`);\n    }\n  }\n  return {\n    firstVersion: firstVersion ?? 0,\n    // defaults\n    currentVersion: currentVersion ?? 0,\n    // defaults\n    migrators,\n    subTypeKey,\n    subTypeMigrations\n  };\n}\nfunction squashDependsOn(sequence) {\n  const result = [];\n  for (let i = sequence.length - 1; i >= 0; i--) {\n    const elem = sequence[i];\n    if (!(\"id\" in elem)) {\n      const dependsOn = elem.dependsOn;\n      const prev = result[0];\n      if (prev) {\n        result[0] = {\n          ...prev,\n          dependsOn: dependsOn.concat(prev.dependsOn ?? [])\n        };\n      }\n    } else {\n      result.unshift(elem);\n    }\n  }\n  return result;\n}\nfunction createMigrationSequence({\n  sequence,\n  sequenceId,\n  retroactive = true\n}) {\n  const migrations = {\n    sequenceId,\n    retroactive,\n    sequence: squashDependsOn(sequence)\n  };\n  validateMigrations(migrations);\n  return migrations;\n}\nfunction createMigrationIds(sequenceId, versions) {\n  return Object.fromEntries(\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(versions).map(([key, version]) => [key, `${sequenceId}/${version}`])\n  );\n}\nfunction createRecordMigrationSequence(opts) {\n  const sequenceId = opts.sequenceId;\n  return createMigrationSequence({\n    sequenceId,\n    retroactive: opts.retroactive ?? true,\n    sequence: opts.sequence.map(\n      (m) => \"id\" in m ? {\n        ...m,\n        scope: \"record\",\n        filter: (r) => r.typeName === opts.recordType && (m.filter?.(r) ?? true) && (opts.filter?.(r) ?? true)\n      } : m\n    )\n  });\n}\nfunction sortMigrations(migrations) {\n  const byId = new Map(migrations.map((m) => [m.id, m]));\n  const isProcessing = /* @__PURE__ */ new Set();\n  const result = [];\n  function process(m) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!isProcessing.has(m.id), `Circular dependency in migrations: ${m.id}`);\n    isProcessing.add(m.id);\n    const { version, sequenceId } = parseMigrationId(m.id);\n    const parent = byId.get(`${sequenceId}/${version - 1}`);\n    if (parent) {\n      process(parent);\n    }\n    if (m.dependsOn) {\n      for (const dep of m.dependsOn) {\n        const depMigration = byId.get(dep);\n        if (depMigration) {\n          process(depMigration);\n        }\n      }\n    }\n    byId.delete(m.id);\n    result.push(m);\n  }\n  for (const m of byId.values()) {\n    process(m);\n  }\n  return result;\n}\nfunction parseMigrationId(id) {\n  const [sequenceId, version] = id.split(\"/\");\n  return { sequenceId, version: parseInt(version) };\n}\nfunction validateMigrationId(id, expectedSequenceId) {\n  if (expectedSequenceId) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n      id.startsWith(expectedSequenceId + \"/\"),\n      `Every migration in sequence '${expectedSequenceId}' must have an id starting with '${expectedSequenceId}/'. Got invalid id: '${id}'`\n    );\n  }\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(id.match(/^(.*?)\\/(0|[1-9]\\d*)$/), `Invalid migration id: '${id}'`);\n}\nfunction validateMigrations(migrations) {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n    !migrations.sequenceId.includes(\"/\"),\n    `sequenceId cannot contain a '/', got ${migrations.sequenceId}`\n  );\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(migrations.sequenceId.length, \"sequenceId must be a non-empty string\");\n  if (migrations.sequence.length === 0) {\n    return;\n  }\n  validateMigrationId(migrations.sequence[0].id, migrations.sequenceId);\n  let n = parseMigrationId(migrations.sequence[0].id).version;\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n    n === 1,\n    `Expected the first migrationId to be '${migrations.sequenceId}/1' but got '${migrations.sequence[0].id}'`\n  );\n  for (let i = 1; i < migrations.sequence.length; i++) {\n    const id = migrations.sequence[i].id;\n    validateMigrationId(id, migrations.sequenceId);\n    const m = parseMigrationId(id).version;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n      m === n + 1,\n      `Migration id numbers must increase in increments of 1, expected ${migrations.sequenceId}/${n + 1} but got '${migrations.sequence[i].id}'`\n    );\n    n = m;\n  }\n}\nvar MigrationFailureReason = /* @__PURE__ */ ((MigrationFailureReason2) => {\n  MigrationFailureReason2[\"IncompatibleSubtype\"] = \"incompatible-subtype\";\n  MigrationFailureReason2[\"UnknownType\"] = \"unknown-type\";\n  MigrationFailureReason2[\"TargetVersionTooNew\"] = \"target-version-too-new\";\n  MigrationFailureReason2[\"TargetVersionTooOld\"] = \"target-version-too-old\";\n  MigrationFailureReason2[\"MigrationError\"] = \"migration-error\";\n  MigrationFailureReason2[\"UnrecognizedSubtype\"] = \"unrecognized-subtype\";\n  return MigrationFailureReason2;\n})(MigrationFailureReason || {});\n\n//# sourceMappingURL=migrate.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvbWlncmF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ3pEO0FBQ0E7QUFDQSxVQUFVLDRDQUE0QyxrQ0FBa0M7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksK0RBQWdCLDRDQUE0QyxXQUFXLEdBQUcsUUFBUTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTSxnRUFBZ0UsS0FBSztBQUMvRTtBQUNBLFlBQVksc0JBQXNCO0FBQ2xDLCtCQUErQixXQUFXLEdBQUcsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0Esc0NBQXNDLG1CQUFtQixtQ0FBbUMsbUJBQW1CLHVCQUF1QixHQUFHO0FBQ3pJO0FBQ0E7QUFDQSxFQUFFLHFEQUFNLDhEQUE4RCxHQUFHO0FBQ3pFO0FBQ0E7QUFDQSxFQUFFLHFEQUFNO0FBQ1I7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0EsRUFBRSxxREFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHFEQUFNO0FBQ1I7QUFDQSw2Q0FBNkMsc0JBQXNCLGVBQWUsMEJBQTBCO0FBQzVHO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQSx5RUFBeUUsc0JBQXNCLEdBQUcsT0FBTyxXQUFXLDBCQUEwQjtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQVU3QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvbWlncmF0ZS5tanM/MGIzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnQsIG9iamVjdE1hcEVudHJpZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xubGV0IGRpZFdhcm4gPSBmYWxzZTtcbmZ1bmN0aW9uIGRlZmluZU1pZ3JhdGlvbnMob3B0cykge1xuICBjb25zdCB7IGN1cnJlbnRWZXJzaW9uLCBmaXJzdFZlcnNpb24sIG1pZ3JhdG9ycyA9IHt9LCBzdWJUeXBlS2V5LCBzdWJUeXBlTWlncmF0aW9ucyB9ID0gb3B0cztcbiAgaWYgKCFkaWRXYXJuKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFRoZSAnZGVmaW5lTWlncmF0aW9ucycgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHJlbGVhc2UuIFVzZSB0aGUgbmV3IG1pZ3JhdGlvbnMgQVBJIGluc3RlYWQuIFNlZSB0aGUgbWlncmF0aW9uIGd1aWRlIGZvciBtb3JlIGluZm86IGh0dHBzOi8vdGxkcmF3LmRldi9kb2NzL3BlcnNpc3RlbmNlI1VwZGF0aW5nLWxlZ2FjeS1zaGFwZS1taWdyYXRpb25zLWRlZmluZU1pZ3JhdGlvbnNgXG4gICAgKTtcbiAgICBkaWRXYXJuID0gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGN1cnJlbnRWZXJzaW9uID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBmaXJzdFZlcnNpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICBpZiAoY3VycmVudFZlcnNpb24gPT09IGZpcnN0VmVyc2lvbikge1xuICAgICAgdGhyb3cgRXJyb3IoYEN1cnJlbnQgdmVyc2lvbiBpcyBlcXVhbCB0byBpbml0aWFsIHZlcnNpb24uYCk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50VmVyc2lvbiA8IGZpcnN0VmVyc2lvbikge1xuICAgICAgdGhyb3cgRXJyb3IoYEN1cnJlbnQgdmVyc2lvbiBpcyBsb3dlciB0aGFuIGluaXRpYWwgdmVyc2lvbi5gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmaXJzdFZlcnNpb246IGZpcnN0VmVyc2lvbiA/PyAwLFxuICAgIC8vIGRlZmF1bHRzXG4gICAgY3VycmVudFZlcnNpb246IGN1cnJlbnRWZXJzaW9uID8/IDAsXG4gICAgLy8gZGVmYXVsdHNcbiAgICBtaWdyYXRvcnMsXG4gICAgc3ViVHlwZUtleSxcbiAgICBzdWJUeXBlTWlncmF0aW9uc1xuICB9O1xufVxuZnVuY3Rpb24gc3F1YXNoRGVwZW5kc09uKHNlcXVlbmNlKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKGxldCBpID0gc2VxdWVuY2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBlbGVtID0gc2VxdWVuY2VbaV07XG4gICAgaWYgKCEoXCJpZFwiIGluIGVsZW0pKSB7XG4gICAgICBjb25zdCBkZXBlbmRzT24gPSBlbGVtLmRlcGVuZHNPbjtcbiAgICAgIGNvbnN0IHByZXYgPSByZXN1bHRbMF07XG4gICAgICBpZiAocHJldikge1xuICAgICAgICByZXN1bHRbMF0gPSB7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBkZXBlbmRzT246IGRlcGVuZHNPbi5jb25jYXQocHJldi5kZXBlbmRzT24gPz8gW10pXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC51bnNoaWZ0KGVsZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY3JlYXRlTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZSxcbiAgc2VxdWVuY2VJZCxcbiAgcmV0cm9hY3RpdmUgPSB0cnVlXG59KSB7XG4gIGNvbnN0IG1pZ3JhdGlvbnMgPSB7XG4gICAgc2VxdWVuY2VJZCxcbiAgICByZXRyb2FjdGl2ZSxcbiAgICBzZXF1ZW5jZTogc3F1YXNoRGVwZW5kc09uKHNlcXVlbmNlKVxuICB9O1xuICB2YWxpZGF0ZU1pZ3JhdGlvbnMobWlncmF0aW9ucyk7XG4gIHJldHVybiBtaWdyYXRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlTWlncmF0aW9uSWRzKHNlcXVlbmNlSWQsIHZlcnNpb25zKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgb2JqZWN0TWFwRW50cmllcyh2ZXJzaW9ucykubWFwKChba2V5LCB2ZXJzaW9uXSkgPT4gW2tleSwgYCR7c2VxdWVuY2VJZH0vJHt2ZXJzaW9ufWBdKVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uob3B0cykge1xuICBjb25zdCBzZXF1ZW5jZUlkID0gb3B0cy5zZXF1ZW5jZUlkO1xuICByZXR1cm4gY3JlYXRlTWlncmF0aW9uU2VxdWVuY2Uoe1xuICAgIHNlcXVlbmNlSWQsXG4gICAgcmV0cm9hY3RpdmU6IG9wdHMucmV0cm9hY3RpdmUgPz8gdHJ1ZSxcbiAgICBzZXF1ZW5jZTogb3B0cy5zZXF1ZW5jZS5tYXAoXG4gICAgICAobSkgPT4gXCJpZFwiIGluIG0gPyB7XG4gICAgICAgIC4uLm0sXG4gICAgICAgIHNjb3BlOiBcInJlY29yZFwiLFxuICAgICAgICBmaWx0ZXI6IChyKSA9PiByLnR5cGVOYW1lID09PSBvcHRzLnJlY29yZFR5cGUgJiYgKG0uZmlsdGVyPy4ocikgPz8gdHJ1ZSkgJiYgKG9wdHMuZmlsdGVyPy4ocikgPz8gdHJ1ZSlcbiAgICAgIH0gOiBtXG4gICAgKVxuICB9KTtcbn1cbmZ1bmN0aW9uIHNvcnRNaWdyYXRpb25zKG1pZ3JhdGlvbnMpIHtcbiAgY29uc3QgYnlJZCA9IG5ldyBNYXAobWlncmF0aW9ucy5tYXAoKG0pID0+IFttLmlkLCBtXSkpO1xuICBjb25zdCBpc1Byb2Nlc3NpbmcgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZnVuY3Rpb24gcHJvY2VzcyhtKSB7XG4gICAgYXNzZXJ0KCFpc1Byb2Nlc3NpbmcuaGFzKG0uaWQpLCBgQ2lyY3VsYXIgZGVwZW5kZW5jeSBpbiBtaWdyYXRpb25zOiAke20uaWR9YCk7XG4gICAgaXNQcm9jZXNzaW5nLmFkZChtLmlkKTtcbiAgICBjb25zdCB7IHZlcnNpb24sIHNlcXVlbmNlSWQgfSA9IHBhcnNlTWlncmF0aW9uSWQobS5pZCk7XG4gICAgY29uc3QgcGFyZW50ID0gYnlJZC5nZXQoYCR7c2VxdWVuY2VJZH0vJHt2ZXJzaW9uIC0gMX1gKTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwcm9jZXNzKHBhcmVudCk7XG4gICAgfVxuICAgIGlmIChtLmRlcGVuZHNPbikge1xuICAgICAgZm9yIChjb25zdCBkZXAgb2YgbS5kZXBlbmRzT24pIHtcbiAgICAgICAgY29uc3QgZGVwTWlncmF0aW9uID0gYnlJZC5nZXQoZGVwKTtcbiAgICAgICAgaWYgKGRlcE1pZ3JhdGlvbikge1xuICAgICAgICAgIHByb2Nlc3MoZGVwTWlncmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBieUlkLmRlbGV0ZShtLmlkKTtcbiAgICByZXN1bHQucHVzaChtKTtcbiAgfVxuICBmb3IgKGNvbnN0IG0gb2YgYnlJZC52YWx1ZXMoKSkge1xuICAgIHByb2Nlc3MobSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBhcnNlTWlncmF0aW9uSWQoaWQpIHtcbiAgY29uc3QgW3NlcXVlbmNlSWQsIHZlcnNpb25dID0gaWQuc3BsaXQoXCIvXCIpO1xuICByZXR1cm4geyBzZXF1ZW5jZUlkLCB2ZXJzaW9uOiBwYXJzZUludCh2ZXJzaW9uKSB9O1xufVxuZnVuY3Rpb24gdmFsaWRhdGVNaWdyYXRpb25JZChpZCwgZXhwZWN0ZWRTZXF1ZW5jZUlkKSB7XG4gIGlmIChleHBlY3RlZFNlcXVlbmNlSWQpIHtcbiAgICBhc3NlcnQoXG4gICAgICBpZC5zdGFydHNXaXRoKGV4cGVjdGVkU2VxdWVuY2VJZCArIFwiL1wiKSxcbiAgICAgIGBFdmVyeSBtaWdyYXRpb24gaW4gc2VxdWVuY2UgJyR7ZXhwZWN0ZWRTZXF1ZW5jZUlkfScgbXVzdCBoYXZlIGFuIGlkIHN0YXJ0aW5nIHdpdGggJyR7ZXhwZWN0ZWRTZXF1ZW5jZUlkfS8nLiBHb3QgaW52YWxpZCBpZDogJyR7aWR9J2BcbiAgICApO1xuICB9XG4gIGFzc2VydChpZC5tYXRjaCgvXiguKj8pXFwvKDB8WzEtOV1cXGQqKSQvKSwgYEludmFsaWQgbWlncmF0aW9uIGlkOiAnJHtpZH0nYCk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZU1pZ3JhdGlvbnMobWlncmF0aW9ucykge1xuICBhc3NlcnQoXG4gICAgIW1pZ3JhdGlvbnMuc2VxdWVuY2VJZC5pbmNsdWRlcyhcIi9cIiksXG4gICAgYHNlcXVlbmNlSWQgY2Fubm90IGNvbnRhaW4gYSAnLycsIGdvdCAke21pZ3JhdGlvbnMuc2VxdWVuY2VJZH1gXG4gICk7XG4gIGFzc2VydChtaWdyYXRpb25zLnNlcXVlbmNlSWQubGVuZ3RoLCBcInNlcXVlbmNlSWQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmdcIik7XG4gIGlmIChtaWdyYXRpb25zLnNlcXVlbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YWxpZGF0ZU1pZ3JhdGlvbklkKG1pZ3JhdGlvbnMuc2VxdWVuY2VbMF0uaWQsIG1pZ3JhdGlvbnMuc2VxdWVuY2VJZCk7XG4gIGxldCBuID0gcGFyc2VNaWdyYXRpb25JZChtaWdyYXRpb25zLnNlcXVlbmNlWzBdLmlkKS52ZXJzaW9uO1xuICBhc3NlcnQoXG4gICAgbiA9PT0gMSxcbiAgICBgRXhwZWN0ZWQgdGhlIGZpcnN0IG1pZ3JhdGlvbklkIHRvIGJlICcke21pZ3JhdGlvbnMuc2VxdWVuY2VJZH0vMScgYnV0IGdvdCAnJHttaWdyYXRpb25zLnNlcXVlbmNlWzBdLmlkfSdgXG4gICk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgbWlncmF0aW9ucy5zZXF1ZW5jZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGlkID0gbWlncmF0aW9ucy5zZXF1ZW5jZVtpXS5pZDtcbiAgICB2YWxpZGF0ZU1pZ3JhdGlvbklkKGlkLCBtaWdyYXRpb25zLnNlcXVlbmNlSWQpO1xuICAgIGNvbnN0IG0gPSBwYXJzZU1pZ3JhdGlvbklkKGlkKS52ZXJzaW9uO1xuICAgIGFzc2VydChcbiAgICAgIG0gPT09IG4gKyAxLFxuICAgICAgYE1pZ3JhdGlvbiBpZCBudW1iZXJzIG11c3QgaW5jcmVhc2UgaW4gaW5jcmVtZW50cyBvZiAxLCBleHBlY3RlZCAke21pZ3JhdGlvbnMuc2VxdWVuY2VJZH0vJHtuICsgMX0gYnV0IGdvdCAnJHttaWdyYXRpb25zLnNlcXVlbmNlW2ldLmlkfSdgXG4gICAgKTtcbiAgICBuID0gbTtcbiAgfVxufVxudmFyIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24gPSAvKiBAX19QVVJFX18gKi8gKChNaWdyYXRpb25GYWlsdXJlUmVhc29uMikgPT4ge1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uMltcIkluY29tcGF0aWJsZVN1YnR5cGVcIl0gPSBcImluY29tcGF0aWJsZS1zdWJ0eXBlXCI7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24yW1wiVW5rbm93blR5cGVcIl0gPSBcInVua25vd24tdHlwZVwiO1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uMltcIlRhcmdldFZlcnNpb25Ub29OZXdcIl0gPSBcInRhcmdldC12ZXJzaW9uLXRvby1uZXdcIjtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbjJbXCJUYXJnZXRWZXJzaW9uVG9vT2xkXCJdID0gXCJ0YXJnZXQtdmVyc2lvbi10b28tb2xkXCI7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24yW1wiTWlncmF0aW9uRXJyb3JcIl0gPSBcIm1pZ3JhdGlvbi1lcnJvclwiO1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uMltcIlVucmVjb2duaXplZFN1YnR5cGVcIl0gPSBcInVucmVjb2duaXplZC1zdWJ0eXBlXCI7XG4gIHJldHVybiBNaWdyYXRpb25GYWlsdXJlUmVhc29uMjtcbn0pKE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24gfHwge30pO1xuZXhwb3J0IHtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbixcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UsXG4gIGRlZmluZU1pZ3JhdGlvbnMsXG4gIHBhcnNlTWlncmF0aW9uSWQsXG4gIHNvcnRNaWdyYXRpb25zLFxuICB2YWxpZGF0ZU1pZ3JhdGlvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diffSets: () => (/* binding */ diffSets),\n/* harmony export */   intersectSets: () => (/* binding */ intersectSets)\n/* harmony export */ });\nfunction intersectSets(sets) {\n  if (sets.length === 0) return /* @__PURE__ */ new Set();\n  const first = sets[0];\n  const rest = sets.slice(1);\n  const result = /* @__PURE__ */ new Set();\n  for (const val of first) {\n    if (rest.every((set) => set.has(val))) {\n      result.add(val);\n    }\n  }\n  return result;\n}\nfunction diffSets(prev, next) {\n  const result = {};\n  for (const val of next) {\n    if (!prev.has(val)) {\n      result.added ??= /* @__PURE__ */ new Set();\n      result.added.add(val);\n    }\n  }\n  for (const val of prev) {\n    if (!next.has(val)) {\n      result.removed ??= /* @__PURE__ */ new Set();\n      result.removed.add(val);\n    }\n  }\n  return result.added || result.removed ? result : void 0;\n}\n\n//# sourceMappingURL=setUtils.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvc2V0VXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvc2V0VXRpbHMubWpzPzY2OTAiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaW50ZXJzZWN0U2V0cyhzZXRzKSB7XG4gIGlmIChzZXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IGZpcnN0ID0gc2V0c1swXTtcbiAgY29uc3QgcmVzdCA9IHNldHMuc2xpY2UoMSk7XG4gIGNvbnN0IHJlc3VsdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGZvciAoY29uc3QgdmFsIG9mIGZpcnN0KSB7XG4gICAgaWYgKHJlc3QuZXZlcnkoKHNldCkgPT4gc2V0Lmhhcyh2YWwpKSkge1xuICAgICAgcmVzdWx0LmFkZCh2YWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZGlmZlNldHMocHJldiwgbmV4dCkge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgZm9yIChjb25zdCB2YWwgb2YgbmV4dCkge1xuICAgIGlmICghcHJldi5oYXModmFsKSkge1xuICAgICAgcmVzdWx0LmFkZGVkID8/PSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgcmVzdWx0LmFkZGVkLmFkZCh2YWwpO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IHZhbCBvZiBwcmV2KSB7XG4gICAgaWYgKCFuZXh0Lmhhcyh2YWwpKSB7XG4gICAgICByZXN1bHQucmVtb3ZlZCA/Pz0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIHJlc3VsdC5yZW1vdmVkLmFkZCh2YWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0LmFkZGVkIHx8IHJlc3VsdC5yZW1vdmVkID8gcmVzdWx0IDogdm9pZCAwO1xufVxuZXhwb3J0IHtcbiAgZGlmZlNldHMsXG4gIGludGVyc2VjdFNldHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXRVdGlscy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientWebSocketAdapter: () => (/* reexport safe */ _lib_ClientWebSocketAdapter_mjs__WEBPACK_IMPORTED_MODULE_1__.ClientWebSocketAdapter),\n/* harmony export */   DocumentState: () => (/* reexport safe */ _lib_TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_6__.DocumentState),\n/* harmony export */   ReconnectManager: () => (/* reexport safe */ _lib_ClientWebSocketAdapter_mjs__WEBPACK_IMPORTED_MODULE_1__.ReconnectManager),\n/* harmony export */   RecordOpType: () => (/* reexport safe */ _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__.RecordOpType),\n/* harmony export */   RoomSessionState: () => (/* reexport safe */ _lib_RoomSession_mjs__WEBPACK_IMPORTED_MODULE_2__.RoomSessionState),\n/* harmony export */   TLIncompatibilityReason: () => (/* reexport safe */ _lib_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.TLIncompatibilityReason),\n/* harmony export */   TLRemoteSyncError: () => (/* reexport safe */ _lib_TLRemoteSyncError_mjs__WEBPACK_IMPORTED_MODULE_3__.TLRemoteSyncError),\n/* harmony export */   TLSocketRoom: () => (/* reexport safe */ _lib_TLSocketRoom_mjs__WEBPACK_IMPORTED_MODULE_4__.TLSocketRoom),\n/* harmony export */   TLSyncClient: () => (/* reexport safe */ _lib_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_5__.TLSyncClient),\n/* harmony export */   TLSyncErrorCloseEventCode: () => (/* reexport safe */ _lib_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_5__.TLSyncErrorCloseEventCode),\n/* harmony export */   TLSyncErrorCloseEventReason: () => (/* reexport safe */ _lib_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_5__.TLSyncErrorCloseEventReason),\n/* harmony export */   TLSyncRoom: () => (/* reexport safe */ _lib_TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncRoom),\n/* harmony export */   ValueOpType: () => (/* reexport safe */ _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__.ValueOpType),\n/* harmony export */   applyObjectDiff: () => (/* reexport safe */ _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__.applyObjectDiff),\n/* harmony export */   chunk: () => (/* reexport safe */ _lib_chunk_mjs__WEBPACK_IMPORTED_MODULE_7__.chunk),\n/* harmony export */   diffRecord: () => (/* reexport safe */ _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__.diffRecord),\n/* harmony export */   getNetworkDiff: () => (/* reexport safe */ _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__.getNetworkDiff),\n/* harmony export */   getTlsyncProtocolVersion: () => (/* reexport safe */ _lib_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.getTlsyncProtocolVersion)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _lib_ClientWebSocketAdapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/ClientWebSocketAdapter.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ClientWebSocketAdapter.mjs\");\n/* harmony import */ var _lib_RoomSession_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/RoomSession.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs\");\n/* harmony import */ var _lib_TLRemoteSyncError_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/TLRemoteSyncError.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLRemoteSyncError.mjs\");\n/* harmony import */ var _lib_TLSocketRoom_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/TLSocketRoom.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSocketRoom.mjs\");\n/* harmony import */ var _lib_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/TLSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs\");\n/* harmony import */ var _lib_TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/TLSyncRoom.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncRoom.mjs\");\n/* harmony import */ var _lib_chunk_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/chunk.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs\");\n/* harmony import */ var _lib_diff_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/diff.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs\");\n/* harmony import */ var _lib_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/protocol.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs\");\n\n\n\n\n\n\n\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/sync-core\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkQ7QUFDK0I7QUFDbkM7QUFDTztBQUNWO0FBS3RCO0FBSUY7QUFDVTtBQU9oQjtBQUlJO0FBQzVCLDJFQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQW9CRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vaW5kZXgubWpzPzc4OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbiB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBDbGllbnRXZWJTb2NrZXRBZGFwdGVyLCBSZWNvbm5lY3RNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL0NsaWVudFdlYlNvY2tldEFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBSb29tU2Vzc2lvblN0YXRlIH0gZnJvbSBcIi4vbGliL1Jvb21TZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgVExSZW1vdGVTeW5jRXJyb3IgfSBmcm9tIFwiLi9saWIvVExSZW1vdGVTeW5jRXJyb3IubWpzXCI7XG5pbXBvcnQgeyBUTFNvY2tldFJvb20gfSBmcm9tIFwiLi9saWIvVExTb2NrZXRSb29tLm1qc1wiO1xuaW1wb3J0IHtcbiAgVExTeW5jQ2xpZW50LFxuICBUTFN5bmNFcnJvckNsb3NlRXZlbnRDb2RlLFxuICBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb25cbn0gZnJvbSBcIi4vbGliL1RMU3luY0NsaWVudC5tanNcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50U3RhdGUsXG4gIFRMU3luY1Jvb21cbn0gZnJvbSBcIi4vbGliL1RMU3luY1Jvb20ubWpzXCI7XG5pbXBvcnQgeyBjaHVuayB9IGZyb20gXCIuL2xpYi9jaHVuay5tanNcIjtcbmltcG9ydCB7XG4gIFJlY29yZE9wVHlwZSxcbiAgVmFsdWVPcFR5cGUsXG4gIGFwcGx5T2JqZWN0RGlmZixcbiAgZGlmZlJlY29yZCxcbiAgZ2V0TmV0d29ya0RpZmZcbn0gZnJvbSBcIi4vbGliL2RpZmYubWpzXCI7XG5pbXBvcnQge1xuICBUTEluY29tcGF0aWJpbGl0eVJlYXNvbixcbiAgZ2V0VGxzeW5jUHJvdG9jb2xWZXJzaW9uXG59IGZyb20gXCIuL2xpYi9wcm90b2NvbC5tanNcIjtcbnJlZ2lzdGVyVGxkcmF3TGlicmFyeVZlcnNpb24oXG4gIFwiQHRsZHJhdy9zeW5jLWNvcmVcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgQ2xpZW50V2ViU29ja2V0QWRhcHRlcixcbiAgRG9jdW1lbnRTdGF0ZSxcbiAgUmVjb25uZWN0TWFuYWdlcixcbiAgUmVjb3JkT3BUeXBlLFxuICBSb29tU2Vzc2lvblN0YXRlLFxuICBUTEluY29tcGF0aWJpbGl0eVJlYXNvbixcbiAgVExSZW1vdGVTeW5jRXJyb3IsXG4gIFRMU29ja2V0Um9vbSxcbiAgVExTeW5jQ2xpZW50LFxuICBUTFN5bmNFcnJvckNsb3NlRXZlbnRDb2RlLFxuICBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24sXG4gIFRMU3luY1Jvb20sXG4gIFZhbHVlT3BUeXBlLFxuICBhcHBseU9iamVjdERpZmYsXG4gIGNodW5rLFxuICBkaWZmUmVjb3JkLFxuICBnZXROZXR3b3JrRGlmZixcbiAgZ2V0VGxzeW5jUHJvdG9jb2xWZXJzaW9uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ClientWebSocketAdapter.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/ClientWebSocketAdapter.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACTIVE_MAX_DELAY: () => (/* binding */ ACTIVE_MAX_DELAY),\n/* harmony export */   ACTIVE_MIN_DELAY: () => (/* binding */ ACTIVE_MIN_DELAY),\n/* harmony export */   ATTEMPT_TIMEOUT: () => (/* binding */ ATTEMPT_TIMEOUT),\n/* harmony export */   ClientWebSocketAdapter: () => (/* binding */ ClientWebSocketAdapter),\n/* harmony export */   DELAY_EXPONENT: () => (/* binding */ DELAY_EXPONENT),\n/* harmony export */   INACTIVE_MAX_DELAY: () => (/* binding */ INACTIVE_MAX_DELAY),\n/* harmony export */   INACTIVE_MIN_DELAY: () => (/* binding */ INACTIVE_MIN_DELAY),\n/* harmony export */   ReconnectManager: () => (/* binding */ ReconnectManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _chunk_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs\");\n/* harmony import */ var _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TLSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs\");\n\n\n\n\nfunction listenTo(target, event, handler) {\n  target.addEventListener(event, handler);\n  return () => {\n    target.removeEventListener(event, handler);\n  };\n}\nfunction debug(...args) {\n  if (typeof window !== \"undefined\" && window.__tldraw_socket_debug) {\n    const now = /* @__PURE__ */ new Date();\n    console.log(\n      `${now.getHours()}:${now.getMinutes()}:${now.getSeconds()}.${now.getMilliseconds()}`,\n      ...args\n      //, new Error().stack\n    );\n  }\n}\nclass ClientWebSocketAdapter {\n  _ws = null;\n  isDisposed = false;\n  /** @internal */\n  _reconnectManager;\n  // TODO: .close should be a project-wide interface with a common contract (.close()d thing\n  //       can only be garbage collected, and can't be used anymore)\n  close() {\n    this.isDisposed = true;\n    this._reconnectManager.close();\n    this._ws?.close();\n  }\n  constructor(getUri) {\n    this._reconnectManager = new ReconnectManager(this, getUri);\n  }\n  _handleConnect() {\n    debug(\"handleConnect\");\n    this._connectionStatus.set(\"online\");\n    this.statusListeners.forEach((cb) => cb({ status: \"online\" }));\n    this._reconnectManager.connected();\n  }\n  _handleDisconnect(reason, closeCode, didOpen, closeReason) {\n    closeReason = closeReason || _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_3__.TLSyncErrorCloseEventReason.UNKNOWN_ERROR;\n    debug(\"handleDisconnect\", {\n      currentStatus: this.connectionStatus,\n      closeCode,\n      reason\n    });\n    let newStatus;\n    switch (reason) {\n      case \"closed\":\n        if (closeCode === _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_3__.TLSyncErrorCloseEventCode) {\n          newStatus = \"error\";\n        } else {\n          newStatus = \"offline\";\n        }\n        break;\n      case \"error\":\n        newStatus = \"error\";\n        break;\n      case \"manual\":\n        newStatus = \"offline\";\n        break;\n    }\n    if (closeCode === 1006 && !didOpen) {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.warnOnce)(\n        \"Could not open WebSocket connection. This might be because you're trying to load a URL that doesn't support websockets. Check the URL you're trying to connect to.\"\n      );\n    }\n    if (\n      // it the status changed\n      this.connectionStatus !== newStatus && // ignore errors if we're already in the offline state\n      !(newStatus === \"error\" && this.connectionStatus === \"offline\")\n    ) {\n      this._connectionStatus.set(newStatus);\n      this.statusListeners.forEach(\n        (cb) => cb(newStatus === \"error\" ? { status: \"error\", reason: closeReason } : { status: newStatus })\n      );\n    }\n    this._reconnectManager.disconnected();\n  }\n  _setNewSocket(ws) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(!this.isDisposed, \"Tried to set a new websocket on a disposed socket\");\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n      this._ws === null || this._ws.readyState === WebSocket.CLOSED || this._ws.readyState === WebSocket.CLOSING,\n      `Tried to set a new websocket in when the existing one was ${this._ws?.readyState}`\n    );\n    let didOpen = false;\n    ws.onopen = () => {\n      debug(\"ws.onopen\");\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        this._ws === ws,\n        \"sockets must only be orphaned when they are CLOSING or CLOSED, so they can't open\"\n      );\n      didOpen = true;\n      this._handleConnect();\n    };\n    ws.onclose = (event) => {\n      debug(\"ws.onclose\", event);\n      if (this._ws === ws) {\n        this._handleDisconnect(\"closed\", event.code, didOpen, event.reason);\n      } else {\n        debug(\"ignoring onclose for an orphaned socket\");\n      }\n    };\n    ws.onerror = (event) => {\n      debug(\"ws.onerror\", event);\n      if (this._ws === ws) {\n        this._handleDisconnect(\"error\");\n      } else {\n        debug(\"ignoring onerror for an orphaned socket\");\n      }\n    };\n    ws.onmessage = (ev) => {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        this._ws === ws,\n        \"sockets must only be orphaned when they are CLOSING or CLOSED, so they can't receive messages\"\n      );\n      const parsed = JSON.parse(ev.data.toString());\n      this.messageListeners.forEach((cb) => cb(parsed));\n    };\n    this._ws = ws;\n  }\n  _closeSocket() {\n    if (this._ws === null) return;\n    this._ws.close();\n    this._ws = null;\n    this._handleDisconnect(\"manual\");\n  }\n  // TLPersistentClientSocket stuff\n  _connectionStatus = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    \"websocket connection status\",\n    \"initial\"\n  );\n  // eslint-disable-next-line no-restricted-syntax\n  get connectionStatus() {\n    const status = this._connectionStatus.get();\n    return status === \"initial\" ? \"offline\" : status;\n  }\n  sendMessage(msg) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(!this.isDisposed, \"Tried to send message on a disposed socket\");\n    if (!this._ws) return;\n    if (this.connectionStatus === \"online\") {\n      const chunks = (0,_chunk_mjs__WEBPACK_IMPORTED_MODULE_2__.chunk)(JSON.stringify(msg));\n      for (const part of chunks) {\n        this._ws.send(part);\n      }\n    } else {\n      console.warn(\"Tried to send message while \" + this.connectionStatus);\n    }\n  }\n  messageListeners = /* @__PURE__ */ new Set();\n  onReceiveMessage(cb) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(!this.isDisposed, \"Tried to add message listener on a disposed socket\");\n    this.messageListeners.add(cb);\n    return () => {\n      this.messageListeners.delete(cb);\n    };\n  }\n  statusListeners = /* @__PURE__ */ new Set();\n  onStatusChange(cb) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(!this.isDisposed, \"Tried to add status listener on a disposed socket\");\n    this.statusListeners.add(cb);\n    return () => {\n      this.statusListeners.delete(cb);\n    };\n  }\n  restart() {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(!this.isDisposed, \"Tried to restart a disposed socket\");\n    debug(\"restarting\");\n    this._closeSocket();\n    this._reconnectManager.maybeReconnected();\n  }\n}\nconst ACTIVE_MIN_DELAY = 500;\nconst ACTIVE_MAX_DELAY = 2e3;\nconst INACTIVE_MIN_DELAY = 1e3;\nconst INACTIVE_MAX_DELAY = 1e3 * 60 * 5;\nconst DELAY_EXPONENT = 1.5;\nconst ATTEMPT_TIMEOUT = 1e3;\nclass ReconnectManager {\n  constructor(socketAdapter, getUri) {\n    this.socketAdapter = socketAdapter;\n    this.getUri = getUri;\n    this.subscribeToReconnectHints();\n    this.disposables.push(\n      listenTo(window, \"offline\", () => {\n        debug(\"window went offline\");\n        this.socketAdapter._closeSocket();\n      })\n    );\n    this.state = \"pendingAttempt\";\n    this.intendedDelay = ACTIVE_MIN_DELAY;\n    this.scheduleAttempt();\n  }\n  isDisposed = false;\n  disposables = [\n    () => {\n      if (this.reconnectTimeout) clearTimeout(this.reconnectTimeout);\n      if (this.recheckConnectingTimeout) clearTimeout(this.recheckConnectingTimeout);\n    }\n  ];\n  reconnectTimeout = null;\n  recheckConnectingTimeout = null;\n  lastAttemptStart = null;\n  intendedDelay = ACTIVE_MIN_DELAY;\n  state;\n  subscribeToReconnectHints() {\n    this.disposables.push(\n      listenTo(window, \"online\", () => {\n        debug(\"window went online\");\n        this.maybeReconnected();\n      }),\n      listenTo(document, \"visibilitychange\", () => {\n        if (!document.hidden) {\n          debug(\"document became visible\");\n          this.maybeReconnected();\n        }\n      })\n    );\n    if (Object.prototype.hasOwnProperty.call(navigator, \"connection\")) {\n      const connection = navigator[\"connection\"];\n      this.disposables.push(\n        listenTo(connection, \"change\", () => {\n          debug(\"navigator.connection change\");\n          this.maybeReconnected();\n        })\n      );\n    }\n  }\n  scheduleAttempt() {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(this.state === \"pendingAttempt\");\n    debug(\"scheduling a connection attempt\");\n    Promise.resolve(this.getUri()).then((uri) => {\n      if (this.state !== \"pendingAttempt\" || this.isDisposed) return;\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        this.socketAdapter._ws?.readyState !== WebSocket.OPEN,\n        \"There should be no connection attempts while already connected\"\n      );\n      this.lastAttemptStart = Date.now();\n      this.socketAdapter._setNewSocket(new WebSocket(httpToWs(uri)));\n      this.state = \"pendingAttemptResult\";\n    });\n  }\n  getMaxDelay() {\n    return document.hidden ? INACTIVE_MAX_DELAY : ACTIVE_MAX_DELAY;\n  }\n  getMinDelay() {\n    return document.hidden ? INACTIVE_MIN_DELAY : ACTIVE_MIN_DELAY;\n  }\n  clearReconnectTimeout() {\n    if (this.reconnectTimeout) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n  }\n  clearRecheckConnectingTimeout() {\n    if (this.recheckConnectingTimeout) {\n      clearTimeout(this.recheckConnectingTimeout);\n      this.recheckConnectingTimeout = null;\n    }\n  }\n  maybeReconnected() {\n    debug(\"ReconnectManager.maybeReconnected\");\n    this.clearRecheckConnectingTimeout();\n    if (this.socketAdapter._ws?.readyState === WebSocket.OPEN) {\n      debug(\"ReconnectManager.maybeReconnected: already connected\");\n      return;\n    }\n    if (this.socketAdapter._ws?.readyState === WebSocket.CONNECTING) {\n      debug(\"ReconnectManager.maybeReconnected: connecting\");\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        this.lastAttemptStart,\n        \"ReadyState=CONNECTING without lastAttemptStart should be impossible\"\n      );\n      const sinceLastStart = Date.now() - this.lastAttemptStart;\n      if (sinceLastStart < ATTEMPT_TIMEOUT) {\n        debug(\"ReconnectManager.maybeReconnected: connecting, rechecking later\");\n        this.recheckConnectingTimeout = setTimeout(\n          () => this.maybeReconnected(),\n          ATTEMPT_TIMEOUT - sinceLastStart\n        );\n      } else {\n        debug(\"ReconnectManager.maybeReconnected: connecting, but for too long, retry now\");\n        this.clearRecheckConnectingTimeout();\n        this.socketAdapter._closeSocket();\n      }\n      return;\n    }\n    debug(\"ReconnectManager.maybeReconnected: closing/closed/null, retry now\");\n    this.intendedDelay = ACTIVE_MIN_DELAY;\n    this.disconnected();\n  }\n  disconnected() {\n    debug(\"ReconnectManager.disconnected\");\n    if (this.socketAdapter._ws?.readyState !== WebSocket.OPEN && this.socketAdapter._ws?.readyState !== WebSocket.CONNECTING) {\n      debug(\"ReconnectManager.disconnected: websocket is not OPEN or CONNECTING\");\n      this.clearReconnectTimeout();\n      let delayLeft;\n      if (this.state === \"connected\") {\n        this.intendedDelay = this.getMinDelay();\n        delayLeft = this.intendedDelay;\n      } else {\n        delayLeft = this.lastAttemptStart !== null ? this.lastAttemptStart + this.intendedDelay - Date.now() : 0;\n      }\n      if (delayLeft > 0) {\n        debug(\"ReconnectManager.disconnected: delaying, delayLeft\", delayLeft);\n        this.state = \"delay\";\n        this.reconnectTimeout = setTimeout(() => this.disconnected(), delayLeft);\n      } else {\n        this.state = \"pendingAttempt\";\n        this.intendedDelay = Math.min(\n          this.getMaxDelay(),\n          Math.max(this.getMinDelay(), this.intendedDelay) * DELAY_EXPONENT\n        );\n        debug(\n          \"ReconnectManager.disconnected: attempting a connection, next delay\",\n          this.intendedDelay\n        );\n        this.scheduleAttempt();\n      }\n    }\n  }\n  connected() {\n    debug(\"ReconnectManager.connected\");\n    if (this.socketAdapter._ws?.readyState === WebSocket.OPEN) {\n      debug(\"ReconnectManager.connected: websocket is OPEN\");\n      this.state = \"connected\";\n      this.clearReconnectTimeout();\n      this.intendedDelay = ACTIVE_MIN_DELAY;\n    }\n  }\n  close() {\n    this.disposables.forEach((d) => d());\n    this.isDisposed = true;\n  }\n}\nfunction httpToWs(url) {\n  return url.replace(/^http(s)?:/, \"ws$1:\");\n}\n\n//# sourceMappingURL=ClientWebSocketAdapter.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL0NsaWVudFdlYlNvY2tldEFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNZO0FBQ2I7QUFJUjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZUFBZSxHQUFHLGlCQUFpQixHQUFHLGlCQUFpQixHQUFHLHNCQUFzQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGtCQUFrQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMEVBQTJCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3RUFBeUI7QUFDbkQ7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sdURBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx1Q0FBdUMsSUFBSSxtQkFBbUI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQU07QUFDVixJQUFJLHFEQUFNO0FBQ1Y7QUFDQSxtRUFBbUUscUJBQXFCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtREFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQTtBQUNBLHFCQUFxQixpREFBSztBQUMxQjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMtY29yZS9kaXN0LWVzbS9saWIvQ2xpZW50V2ViU29ja2V0QWRhcHRlci5tanM/ZTdjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGFzc2VydCwgd2Fybk9uY2UgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgY2h1bmsgfSBmcm9tIFwiLi9jaHVuay5tanNcIjtcbmltcG9ydCB7XG4gIFRMU3luY0Vycm9yQ2xvc2VFdmVudENvZGUsXG4gIFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvblxufSBmcm9tIFwiLi9UTFN5bmNDbGllbnQubWpzXCI7XG5mdW5jdGlvbiBsaXN0ZW5Ubyh0YXJnZXQsIGV2ZW50LCBoYW5kbGVyKSB7XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcik7XG4gIH07XG59XG5mdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5fX3RsZHJhd19zb2NrZXRfZGVidWcpIHtcbiAgICBjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGAke25vdy5nZXRIb3VycygpfToke25vdy5nZXRNaW51dGVzKCl9OiR7bm93LmdldFNlY29uZHMoKX0uJHtub3cuZ2V0TWlsbGlzZWNvbmRzKCl9YCxcbiAgICAgIC4uLmFyZ3NcbiAgICAgIC8vLCBuZXcgRXJyb3IoKS5zdGFja1xuICAgICk7XG4gIH1cbn1cbmNsYXNzIENsaWVudFdlYlNvY2tldEFkYXB0ZXIge1xuICBfd3MgPSBudWxsO1xuICBpc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlY29ubmVjdE1hbmFnZXI7XG4gIC8vIFRPRE86IC5jbG9zZSBzaG91bGQgYmUgYSBwcm9qZWN0LXdpZGUgaW50ZXJmYWNlIHdpdGggYSBjb21tb24gY29udHJhY3QgKC5jbG9zZSgpZCB0aGluZ1xuICAvLyAgICAgICBjYW4gb25seSBiZSBnYXJiYWdlIGNvbGxlY3RlZCwgYW5kIGNhbid0IGJlIHVzZWQgYW55bW9yZSlcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl9yZWNvbm5lY3RNYW5hZ2VyLmNsb3NlKCk7XG4gICAgdGhpcy5fd3M/LmNsb3NlKCk7XG4gIH1cbiAgY29uc3RydWN0b3IoZ2V0VXJpKSB7XG4gICAgdGhpcy5fcmVjb25uZWN0TWFuYWdlciA9IG5ldyBSZWNvbm5lY3RNYW5hZ2VyKHRoaXMsIGdldFVyaSk7XG4gIH1cbiAgX2hhbmRsZUNvbm5lY3QoKSB7XG4gICAgZGVidWcoXCJoYW5kbGVDb25uZWN0XCIpO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXMuc2V0KFwib25saW5lXCIpO1xuICAgIHRoaXMuc3RhdHVzTGlzdGVuZXJzLmZvckVhY2goKGNiKSA9PiBjYih7IHN0YXR1czogXCJvbmxpbmVcIiB9KSk7XG4gICAgdGhpcy5fcmVjb25uZWN0TWFuYWdlci5jb25uZWN0ZWQoKTtcbiAgfVxuICBfaGFuZGxlRGlzY29ubmVjdChyZWFzb24sIGNsb3NlQ29kZSwgZGlkT3BlbiwgY2xvc2VSZWFzb24pIHtcbiAgICBjbG9zZVJlYXNvbiA9IGNsb3NlUmVhc29uIHx8IFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5VTktOT1dOX0VSUk9SO1xuICAgIGRlYnVnKFwiaGFuZGxlRGlzY29ubmVjdFwiLCB7XG4gICAgICBjdXJyZW50U3RhdHVzOiB0aGlzLmNvbm5lY3Rpb25TdGF0dXMsXG4gICAgICBjbG9zZUNvZGUsXG4gICAgICByZWFzb25cbiAgICB9KTtcbiAgICBsZXQgbmV3U3RhdHVzO1xuICAgIHN3aXRjaCAocmVhc29uKSB7XG4gICAgICBjYXNlIFwiY2xvc2VkXCI6XG4gICAgICAgIGlmIChjbG9zZUNvZGUgPT09IFRMU3luY0Vycm9yQ2xvc2VFdmVudENvZGUpIHtcbiAgICAgICAgICBuZXdTdGF0dXMgPSBcImVycm9yXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3U3RhdHVzID0gXCJvZmZsaW5lXCI7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgbmV3U3RhdHVzID0gXCJlcnJvclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtYW51YWxcIjpcbiAgICAgICAgbmV3U3RhdHVzID0gXCJvZmZsaW5lXCI7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoY2xvc2VDb2RlID09PSAxMDA2ICYmICFkaWRPcGVuKSB7XG4gICAgICB3YXJuT25jZShcbiAgICAgICAgXCJDb3VsZCBub3Qgb3BlbiBXZWJTb2NrZXQgY29ubmVjdGlvbi4gVGhpcyBtaWdodCBiZSBiZWNhdXNlIHlvdSdyZSB0cnlpbmcgdG8gbG9hZCBhIFVSTCB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCB3ZWJzb2NrZXRzLiBDaGVjayB0aGUgVVJMIHlvdSdyZSB0cnlpbmcgdG8gY29ubmVjdCB0by5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgLy8gaXQgdGhlIHN0YXR1cyBjaGFuZ2VkXG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0dXMgIT09IG5ld1N0YXR1cyAmJiAvLyBpZ25vcmUgZXJyb3JzIGlmIHdlJ3JlIGFscmVhZHkgaW4gdGhlIG9mZmxpbmUgc3RhdGVcbiAgICAgICEobmV3U3RhdHVzID09PSBcImVycm9yXCIgJiYgdGhpcy5jb25uZWN0aW9uU3RhdHVzID09PSBcIm9mZmxpbmVcIilcbiAgICApIHtcbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXMuc2V0KG5ld1N0YXR1cyk7XG4gICAgICB0aGlzLnN0YXR1c0xpc3RlbmVycy5mb3JFYWNoKFxuICAgICAgICAoY2IpID0+IGNiKG5ld1N0YXR1cyA9PT0gXCJlcnJvclwiID8geyBzdGF0dXM6IFwiZXJyb3JcIiwgcmVhc29uOiBjbG9zZVJlYXNvbiB9IDogeyBzdGF0dXM6IG5ld1N0YXR1cyB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fcmVjb25uZWN0TWFuYWdlci5kaXNjb25uZWN0ZWQoKTtcbiAgfVxuICBfc2V0TmV3U29ja2V0KHdzKSB7XG4gICAgYXNzZXJ0KCF0aGlzLmlzRGlzcG9zZWQsIFwiVHJpZWQgdG8gc2V0IGEgbmV3IHdlYnNvY2tldCBvbiBhIGRpc3Bvc2VkIHNvY2tldFwiKTtcbiAgICBhc3NlcnQoXG4gICAgICB0aGlzLl93cyA9PT0gbnVsbCB8fCB0aGlzLl93cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEIHx8IHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TSU5HLFxuICAgICAgYFRyaWVkIHRvIHNldCBhIG5ldyB3ZWJzb2NrZXQgaW4gd2hlbiB0aGUgZXhpc3Rpbmcgb25lIHdhcyAke3RoaXMuX3dzPy5yZWFkeVN0YXRlfWBcbiAgICApO1xuICAgIGxldCBkaWRPcGVuID0gZmFsc2U7XG4gICAgd3Mub25vcGVuID0gKCkgPT4ge1xuICAgICAgZGVidWcoXCJ3cy5vbm9wZW5cIik7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuX3dzID09PSB3cyxcbiAgICAgICAgXCJzb2NrZXRzIG11c3Qgb25seSBiZSBvcnBoYW5lZCB3aGVuIHRoZXkgYXJlIENMT1NJTkcgb3IgQ0xPU0VELCBzbyB0aGV5IGNhbid0IG9wZW5cIlxuICAgICAgKTtcbiAgICAgIGRpZE9wZW4gPSB0cnVlO1xuICAgICAgdGhpcy5faGFuZGxlQ29ubmVjdCgpO1xuICAgIH07XG4gICAgd3Mub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgZGVidWcoXCJ3cy5vbmNsb3NlXCIsIGV2ZW50KTtcbiAgICAgIGlmICh0aGlzLl93cyA9PT0gd3MpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGlzY29ubmVjdChcImNsb3NlZFwiLCBldmVudC5jb2RlLCBkaWRPcGVuLCBldmVudC5yZWFzb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWcoXCJpZ25vcmluZyBvbmNsb3NlIGZvciBhbiBvcnBoYW5lZCBzb2NrZXRcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICB3cy5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICBkZWJ1ZyhcIndzLm9uZXJyb3JcIiwgZXZlbnQpO1xuICAgICAgaWYgKHRoaXMuX3dzID09PSB3cykge1xuICAgICAgICB0aGlzLl9oYW5kbGVEaXNjb25uZWN0KFwiZXJyb3JcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1ZyhcImlnbm9yaW5nIG9uZXJyb3IgZm9yIGFuIG9ycGhhbmVkIHNvY2tldFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdzLm9ubWVzc2FnZSA9IChldikgPT4ge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0aGlzLl93cyA9PT0gd3MsXG4gICAgICAgIFwic29ja2V0cyBtdXN0IG9ubHkgYmUgb3JwaGFuZWQgd2hlbiB0aGV5IGFyZSBDTE9TSU5HIG9yIENMT1NFRCwgc28gdGhleSBjYW4ndCByZWNlaXZlIG1lc3NhZ2VzXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGV2LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgICB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMuZm9yRWFjaCgoY2IpID0+IGNiKHBhcnNlZCkpO1xuICAgIH07XG4gICAgdGhpcy5fd3MgPSB3cztcbiAgfVxuICBfY2xvc2VTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMuX3dzID09PSBudWxsKSByZXR1cm47XG4gICAgdGhpcy5fd3MuY2xvc2UoKTtcbiAgICB0aGlzLl93cyA9IG51bGw7XG4gICAgdGhpcy5faGFuZGxlRGlzY29ubmVjdChcIm1hbnVhbFwiKTtcbiAgfVxuICAvLyBUTFBlcnNpc3RlbnRDbGllbnRTb2NrZXQgc3R1ZmZcbiAgX2Nvbm5lY3Rpb25TdGF0dXMgPSBhdG9tKFxuICAgIFwid2Vic29ja2V0IGNvbm5lY3Rpb24gc3RhdHVzXCIsXG4gICAgXCJpbml0aWFsXCJcbiAgKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjb25uZWN0aW9uU3RhdHVzKCkge1xuICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXMuZ2V0KCk7XG4gICAgcmV0dXJuIHN0YXR1cyA9PT0gXCJpbml0aWFsXCIgPyBcIm9mZmxpbmVcIiA6IHN0YXR1cztcbiAgfVxuICBzZW5kTWVzc2FnZShtc2cpIHtcbiAgICBhc3NlcnQoIXRoaXMuaXNEaXNwb3NlZCwgXCJUcmllZCB0byBzZW5kIG1lc3NhZ2Ugb24gYSBkaXNwb3NlZCBzb2NrZXRcIik7XG4gICAgaWYgKCF0aGlzLl93cykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0dXMgPT09IFwib25saW5lXCIpIHtcbiAgICAgIGNvbnN0IGNodW5rcyA9IGNodW5rKEpTT04uc3RyaW5naWZ5KG1zZykpO1xuICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNodW5rcykge1xuICAgICAgICB0aGlzLl93cy5zZW5kKHBhcnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJUcmllZCB0byBzZW5kIG1lc3NhZ2Ugd2hpbGUgXCIgKyB0aGlzLmNvbm5lY3Rpb25TdGF0dXMpO1xuICAgIH1cbiAgfVxuICBtZXNzYWdlTGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgb25SZWNlaXZlTWVzc2FnZShjYikge1xuICAgIGFzc2VydCghdGhpcy5pc0Rpc3Bvc2VkLCBcIlRyaWVkIHRvIGFkZCBtZXNzYWdlIGxpc3RlbmVyIG9uIGEgZGlzcG9zZWQgc29ja2V0XCIpO1xuICAgIHRoaXMubWVzc2FnZUxpc3RlbmVycy5hZGQoY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMuZGVsZXRlKGNiKTtcbiAgICB9O1xuICB9XG4gIHN0YXR1c0xpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIG9uU3RhdHVzQ2hhbmdlKGNiKSB7XG4gICAgYXNzZXJ0KCF0aGlzLmlzRGlzcG9zZWQsIFwiVHJpZWQgdG8gYWRkIHN0YXR1cyBsaXN0ZW5lciBvbiBhIGRpc3Bvc2VkIHNvY2tldFwiKTtcbiAgICB0aGlzLnN0YXR1c0xpc3RlbmVycy5hZGQoY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXR1c0xpc3RlbmVycy5kZWxldGUoY2IpO1xuICAgIH07XG4gIH1cbiAgcmVzdGFydCgpIHtcbiAgICBhc3NlcnQoIXRoaXMuaXNEaXNwb3NlZCwgXCJUcmllZCB0byByZXN0YXJ0IGEgZGlzcG9zZWQgc29ja2V0XCIpO1xuICAgIGRlYnVnKFwicmVzdGFydGluZ1wiKTtcbiAgICB0aGlzLl9jbG9zZVNvY2tldCgpO1xuICAgIHRoaXMuX3JlY29ubmVjdE1hbmFnZXIubWF5YmVSZWNvbm5lY3RlZCgpO1xuICB9XG59XG5jb25zdCBBQ1RJVkVfTUlOX0RFTEFZID0gNTAwO1xuY29uc3QgQUNUSVZFX01BWF9ERUxBWSA9IDJlMztcbmNvbnN0IElOQUNUSVZFX01JTl9ERUxBWSA9IDFlMztcbmNvbnN0IElOQUNUSVZFX01BWF9ERUxBWSA9IDFlMyAqIDYwICogNTtcbmNvbnN0IERFTEFZX0VYUE9ORU5UID0gMS41O1xuY29uc3QgQVRURU1QVF9USU1FT1VUID0gMWUzO1xuY2xhc3MgUmVjb25uZWN0TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHNvY2tldEFkYXB0ZXIsIGdldFVyaSkge1xuICAgIHRoaXMuc29ja2V0QWRhcHRlciA9IHNvY2tldEFkYXB0ZXI7XG4gICAgdGhpcy5nZXRVcmkgPSBnZXRVcmk7XG4gICAgdGhpcy5zdWJzY3JpYmVUb1JlY29ubmVjdEhpbnRzKCk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgbGlzdGVuVG8od2luZG93LCBcIm9mZmxpbmVcIiwgKCkgPT4ge1xuICAgICAgICBkZWJ1ZyhcIndpbmRvdyB3ZW50IG9mZmxpbmVcIik7XG4gICAgICAgIHRoaXMuc29ja2V0QWRhcHRlci5fY2xvc2VTb2NrZXQoKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLnN0YXRlID0gXCJwZW5kaW5nQXR0ZW1wdFwiO1xuICAgIHRoaXMuaW50ZW5kZWREZWxheSA9IEFDVElWRV9NSU5fREVMQVk7XG4gICAgdGhpcy5zY2hlZHVsZUF0dGVtcHQoKTtcbiAgfVxuICBpc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIGRpc3Bvc2FibGVzID0gW1xuICAgICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnJlY29ubmVjdFRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVvdXQpO1xuICAgICAgaWYgKHRoaXMucmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy5yZWNoZWNrQ29ubmVjdGluZ1RpbWVvdXQpO1xuICAgIH1cbiAgXTtcbiAgcmVjb25uZWN0VGltZW91dCA9IG51bGw7XG4gIHJlY2hlY2tDb25uZWN0aW5nVGltZW91dCA9IG51bGw7XG4gIGxhc3RBdHRlbXB0U3RhcnQgPSBudWxsO1xuICBpbnRlbmRlZERlbGF5ID0gQUNUSVZFX01JTl9ERUxBWTtcbiAgc3RhdGU7XG4gIHN1YnNjcmliZVRvUmVjb25uZWN0SGludHMoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgbGlzdGVuVG8od2luZG93LCBcIm9ubGluZVwiLCAoKSA9PiB7XG4gICAgICAgIGRlYnVnKFwid2luZG93IHdlbnQgb25saW5lXCIpO1xuICAgICAgICB0aGlzLm1heWJlUmVjb25uZWN0ZWQoKTtcbiAgICAgIH0pLFxuICAgICAgbGlzdGVuVG8oZG9jdW1lbnQsIFwidmlzaWJpbGl0eWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgICAgZGVidWcoXCJkb2N1bWVudCBiZWNhbWUgdmlzaWJsZVwiKTtcbiAgICAgICAgICB0aGlzLm1heWJlUmVjb25uZWN0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmF2aWdhdG9yLCBcImNvbm5lY3Rpb25cIikpIHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuYXZpZ2F0b3JbXCJjb25uZWN0aW9uXCJdO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgICBsaXN0ZW5Ubyhjb25uZWN0aW9uLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgICAgZGVidWcoXCJuYXZpZ2F0b3IuY29ubmVjdGlvbiBjaGFuZ2VcIik7XG4gICAgICAgICAgdGhpcy5tYXliZVJlY29ubmVjdGVkKCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBzY2hlZHVsZUF0dGVtcHQoKSB7XG4gICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFwicGVuZGluZ0F0dGVtcHRcIik7XG4gICAgZGVidWcoXCJzY2hlZHVsaW5nIGEgY29ubmVjdGlvbiBhdHRlbXB0XCIpO1xuICAgIFByb21pc2UucmVzb2x2ZSh0aGlzLmdldFVyaSgpKS50aGVuKCh1cmkpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBcInBlbmRpbmdBdHRlbXB0XCIgfHwgdGhpcy5pc0Rpc3Bvc2VkKSByZXR1cm47XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMuc29ja2V0QWRhcHRlci5fd3M/LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOLFxuICAgICAgICBcIlRoZXJlIHNob3VsZCBiZSBubyBjb25uZWN0aW9uIGF0dGVtcHRzIHdoaWxlIGFscmVhZHkgY29ubmVjdGVkXCJcbiAgICAgICk7XG4gICAgICB0aGlzLmxhc3RBdHRlbXB0U3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zb2NrZXRBZGFwdGVyLl9zZXROZXdTb2NrZXQobmV3IFdlYlNvY2tldChodHRwVG9Xcyh1cmkpKSk7XG4gICAgICB0aGlzLnN0YXRlID0gXCJwZW5kaW5nQXR0ZW1wdFJlc3VsdFwiO1xuICAgIH0pO1xuICB9XG4gIGdldE1heERlbGF5KCkge1xuICAgIHJldHVybiBkb2N1bWVudC5oaWRkZW4gPyBJTkFDVElWRV9NQVhfREVMQVkgOiBBQ1RJVkVfTUFYX0RFTEFZO1xuICB9XG4gIGdldE1pbkRlbGF5KCkge1xuICAgIHJldHVybiBkb2N1bWVudC5oaWRkZW4gPyBJTkFDVElWRV9NSU5fREVMQVkgOiBBQ1RJVkVfTUlOX0RFTEFZO1xuICB9XG4gIGNsZWFyUmVjb25uZWN0VGltZW91dCgpIHtcbiAgICBpZiAodGhpcy5yZWNvbm5lY3RUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lb3V0KTtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICB9XG4gIGNsZWFyUmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0KCkge1xuICAgIGlmICh0aGlzLnJlY2hlY2tDb25uZWN0aW5nVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0KTtcbiAgICAgIHRoaXMucmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgbWF5YmVSZWNvbm5lY3RlZCgpIHtcbiAgICBkZWJ1ZyhcIlJlY29ubmVjdE1hbmFnZXIubWF5YmVSZWNvbm5lY3RlZFwiKTtcbiAgICB0aGlzLmNsZWFyUmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0KCk7XG4gICAgaWYgKHRoaXMuc29ja2V0QWRhcHRlci5fd3M/LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBkZWJ1ZyhcIlJlY29ubmVjdE1hbmFnZXIubWF5YmVSZWNvbm5lY3RlZDogYWxyZWFkeSBjb25uZWN0ZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnNvY2tldEFkYXB0ZXIuX3dzPy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgZGVidWcoXCJSZWNvbm5lY3RNYW5hZ2VyLm1heWJlUmVjb25uZWN0ZWQ6IGNvbm5lY3RpbmdcIik7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHRoaXMubGFzdEF0dGVtcHRTdGFydCxcbiAgICAgICAgXCJSZWFkeVN0YXRlPUNPTk5FQ1RJTkcgd2l0aG91dCBsYXN0QXR0ZW1wdFN0YXJ0IHNob3VsZCBiZSBpbXBvc3NpYmxlXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBzaW5jZUxhc3RTdGFydCA9IERhdGUubm93KCkgLSB0aGlzLmxhc3RBdHRlbXB0U3RhcnQ7XG4gICAgICBpZiAoc2luY2VMYXN0U3RhcnQgPCBBVFRFTVBUX1RJTUVPVVQpIHtcbiAgICAgICAgZGVidWcoXCJSZWNvbm5lY3RNYW5hZ2VyLm1heWJlUmVjb25uZWN0ZWQ6IGNvbm5lY3RpbmcsIHJlY2hlY2tpbmcgbGF0ZXJcIik7XG4gICAgICAgIHRoaXMucmVjaGVja0Nvbm5lY3RpbmdUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgICAoKSA9PiB0aGlzLm1heWJlUmVjb25uZWN0ZWQoKSxcbiAgICAgICAgICBBVFRFTVBUX1RJTUVPVVQgLSBzaW5jZUxhc3RTdGFydFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVidWcoXCJSZWNvbm5lY3RNYW5hZ2VyLm1heWJlUmVjb25uZWN0ZWQ6IGNvbm5lY3RpbmcsIGJ1dCBmb3IgdG9vIGxvbmcsIHJldHJ5IG5vd1wiKTtcbiAgICAgICAgdGhpcy5jbGVhclJlY2hlY2tDb25uZWN0aW5nVGltZW91dCgpO1xuICAgICAgICB0aGlzLnNvY2tldEFkYXB0ZXIuX2Nsb3NlU29ja2V0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlYnVnKFwiUmVjb25uZWN0TWFuYWdlci5tYXliZVJlY29ubmVjdGVkOiBjbG9zaW5nL2Nsb3NlZC9udWxsLCByZXRyeSBub3dcIik7XG4gICAgdGhpcy5pbnRlbmRlZERlbGF5ID0gQUNUSVZFX01JTl9ERUxBWTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCgpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZCgpIHtcbiAgICBkZWJ1ZyhcIlJlY29ubmVjdE1hbmFnZXIuZGlzY29ubmVjdGVkXCIpO1xuICAgIGlmICh0aGlzLnNvY2tldEFkYXB0ZXIuX3dzPy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTiAmJiB0aGlzLnNvY2tldEFkYXB0ZXIuX3dzPy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgZGVidWcoXCJSZWNvbm5lY3RNYW5hZ2VyLmRpc2Nvbm5lY3RlZDogd2Vic29ja2V0IGlzIG5vdCBPUEVOIG9yIENPTk5FQ1RJTkdcIik7XG4gICAgICB0aGlzLmNsZWFyUmVjb25uZWN0VGltZW91dCgpO1xuICAgICAgbGV0IGRlbGF5TGVmdDtcbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgIHRoaXMuaW50ZW5kZWREZWxheSA9IHRoaXMuZ2V0TWluRGVsYXkoKTtcbiAgICAgICAgZGVsYXlMZWZ0ID0gdGhpcy5pbnRlbmRlZERlbGF5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsYXlMZWZ0ID0gdGhpcy5sYXN0QXR0ZW1wdFN0YXJ0ICE9PSBudWxsID8gdGhpcy5sYXN0QXR0ZW1wdFN0YXJ0ICsgdGhpcy5pbnRlbmRlZERlbGF5IC0gRGF0ZS5ub3coKSA6IDA7XG4gICAgICB9XG4gICAgICBpZiAoZGVsYXlMZWZ0ID4gMCkge1xuICAgICAgICBkZWJ1ZyhcIlJlY29ubmVjdE1hbmFnZXIuZGlzY29ubmVjdGVkOiBkZWxheWluZywgZGVsYXlMZWZ0XCIsIGRlbGF5TGVmdCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBcImRlbGF5XCI7XG4gICAgICAgIHRoaXMucmVjb25uZWN0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaXNjb25uZWN0ZWQoKSwgZGVsYXlMZWZ0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBcInBlbmRpbmdBdHRlbXB0XCI7XG4gICAgICAgIHRoaXMuaW50ZW5kZWREZWxheSA9IE1hdGgubWluKFxuICAgICAgICAgIHRoaXMuZ2V0TWF4RGVsYXkoKSxcbiAgICAgICAgICBNYXRoLm1heCh0aGlzLmdldE1pbkRlbGF5KCksIHRoaXMuaW50ZW5kZWREZWxheSkgKiBERUxBWV9FWFBPTkVOVFxuICAgICAgICApO1xuICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICBcIlJlY29ubmVjdE1hbmFnZXIuZGlzY29ubmVjdGVkOiBhdHRlbXB0aW5nIGEgY29ubmVjdGlvbiwgbmV4dCBkZWxheVwiLFxuICAgICAgICAgIHRoaXMuaW50ZW5kZWREZWxheVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnNjaGVkdWxlQXR0ZW1wdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25uZWN0ZWQoKSB7XG4gICAgZGVidWcoXCJSZWNvbm5lY3RNYW5hZ2VyLmNvbm5lY3RlZFwiKTtcbiAgICBpZiAodGhpcy5zb2NrZXRBZGFwdGVyLl93cz8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIGRlYnVnKFwiUmVjb25uZWN0TWFuYWdlci5jb25uZWN0ZWQ6IHdlYnNvY2tldCBpcyBPUEVOXCIpO1xuICAgICAgdGhpcy5zdGF0ZSA9IFwiY29ubmVjdGVkXCI7XG4gICAgICB0aGlzLmNsZWFyUmVjb25uZWN0VGltZW91dCgpO1xuICAgICAgdGhpcy5pbnRlbmRlZERlbGF5ID0gQUNUSVZFX01JTl9ERUxBWTtcbiAgICB9XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5mb3JFYWNoKChkKSA9PiBkKCkpO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGh0dHBUb1dzKHVybCkge1xuICByZXR1cm4gdXJsLnJlcGxhY2UoL15odHRwKHMpPzovLCBcIndzJDE6XCIpO1xufVxuZXhwb3J0IHtcbiAgQUNUSVZFX01BWF9ERUxBWSxcbiAgQUNUSVZFX01JTl9ERUxBWSxcbiAgQVRURU1QVF9USU1FT1VULFxuICBDbGllbnRXZWJTb2NrZXRBZGFwdGVyLFxuICBERUxBWV9FWFBPTkVOVCxcbiAgSU5BQ1RJVkVfTUFYX0RFTEFZLFxuICBJTkFDVElWRV9NSU5fREVMQVksXG4gIFJlY29ubmVjdE1hbmFnZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DbGllbnRXZWJTb2NrZXRBZGFwdGVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ClientWebSocketAdapter.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoomSessionState: () => (/* binding */ RoomSessionState),\n/* harmony export */   SESSION_IDLE_TIMEOUT: () => (/* binding */ SESSION_IDLE_TIMEOUT),\n/* harmony export */   SESSION_REMOVAL_WAIT_TIME: () => (/* binding */ SESSION_REMOVAL_WAIT_TIME),\n/* harmony export */   SESSION_START_WAIT_TIME: () => (/* binding */ SESSION_START_WAIT_TIME)\n/* harmony export */ });\nconst RoomSessionState = {\n  AwaitingConnectMessage: \"awaiting-connect-message\",\n  AwaitingRemoval: \"awaiting-removal\",\n  Connected: \"connected\"\n};\nconst SESSION_START_WAIT_TIME = 1e4;\nconst SESSION_REMOVAL_WAIT_TIME = 1e4;\nconst SESSION_IDLE_TIMEOUT = 2e4;\n\n//# sourceMappingURL=RoomSession.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1Jvb21TZXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMtY29yZS9kaXN0LWVzbS9saWIvUm9vbVNlc3Npb24ubWpzP2NlODIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUm9vbVNlc3Npb25TdGF0ZSA9IHtcbiAgQXdhaXRpbmdDb25uZWN0TWVzc2FnZTogXCJhd2FpdGluZy1jb25uZWN0LW1lc3NhZ2VcIixcbiAgQXdhaXRpbmdSZW1vdmFsOiBcImF3YWl0aW5nLXJlbW92YWxcIixcbiAgQ29ubmVjdGVkOiBcImNvbm5lY3RlZFwiXG59O1xuY29uc3QgU0VTU0lPTl9TVEFSVF9XQUlUX1RJTUUgPSAxZTQ7XG5jb25zdCBTRVNTSU9OX1JFTU9WQUxfV0FJVF9USU1FID0gMWU0O1xuY29uc3QgU0VTU0lPTl9JRExFX1RJTUVPVVQgPSAyZTQ7XG5leHBvcnQge1xuICBSb29tU2Vzc2lvblN0YXRlLFxuICBTRVNTSU9OX0lETEVfVElNRU9VVCxcbiAgU0VTU0lPTl9SRU1PVkFMX1dBSVRfVElNRSxcbiAgU0VTU0lPTl9TVEFSVF9XQUlUX1RJTUVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Sb29tU2Vzc2lvbi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ServerSocketAdapter.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/ServerSocketAdapter.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ServerSocketAdapter: () => (/* binding */ ServerSocketAdapter)\n/* harmony export */ });\nclass ServerSocketAdapter {\n  constructor(opts) {\n    this.opts = opts;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get isOpen() {\n    return this.opts.ws.readyState === 1;\n  }\n  // see TLRoomSocket for details on why this accepts a union and not just arrays\n  sendMessage(msg) {\n    const message = JSON.stringify(msg);\n    this.opts.onBeforeSendMessage?.(msg, message);\n    this.opts.ws.send(message);\n  }\n  close(code, reason) {\n    this.opts.ws.close(code, reason);\n  }\n}\n\n//# sourceMappingURL=ServerSocketAdapter.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1NlcnZlclNvY2tldEFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1NlcnZlclNvY2tldEFkYXB0ZXIubWpzPzgxNGMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU2VydmVyU29ja2V0QWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgaXNPcGVuKCkge1xuICAgIHJldHVybiB0aGlzLm9wdHMud3MucmVhZHlTdGF0ZSA9PT0gMTtcbiAgfVxuICAvLyBzZWUgVExSb29tU29ja2V0IGZvciBkZXRhaWxzIG9uIHdoeSB0aGlzIGFjY2VwdHMgYSB1bmlvbiBhbmQgbm90IGp1c3QgYXJyYXlzXG4gIHNlbmRNZXNzYWdlKG1zZykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtc2cpO1xuICAgIHRoaXMub3B0cy5vbkJlZm9yZVNlbmRNZXNzYWdlPy4obXNnLCBtZXNzYWdlKTtcbiAgICB0aGlzLm9wdHMud3Muc2VuZChtZXNzYWdlKTtcbiAgfVxuICBjbG9zZShjb2RlLCByZWFzb24pIHtcbiAgICB0aGlzLm9wdHMud3MuY2xvc2UoY29kZSwgcmVhc29uKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU2VydmVyU29ja2V0QWRhcHRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZlclNvY2tldEFkYXB0ZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ServerSocketAdapter.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLRemoteSyncError.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/TLRemoteSyncError.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLRemoteSyncError: () => (/* binding */ TLRemoteSyncError)\n/* harmony export */ });\nclass TLRemoteSyncError extends Error {\n  constructor(reason) {\n    super(`sync error: ${reason}`);\n    this.reason = reason;\n  }\n  name = \"RemoteSyncError\";\n}\n\n//# sourceMappingURL=TLRemoteSyncError.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1RMUmVtb3RlU3luY0Vycm9yLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLHlCQUF5QixPQUFPO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3luYy1jb3JlL2Rpc3QtZXNtL2xpYi9UTFJlbW90ZVN5bmNFcnJvci5tanM/MjM0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUTFJlbW90ZVN5bmNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgc3VwZXIoYHN5bmMgZXJyb3I6ICR7cmVhc29ufWApO1xuICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICB9XG4gIG5hbWUgPSBcIlJlbW90ZVN5bmNFcnJvclwiO1xufVxuZXhwb3J0IHtcbiAgVExSZW1vdGVTeW5jRXJyb3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFJlbW90ZVN5bmNFcnJvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLRemoteSyncError.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSocketRoom.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/TLSocketRoom.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLSocketRoom: () => (/* binding */ TLSocketRoom)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RoomSession.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs\");\n/* harmony import */ var _ServerSocketAdapter_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ServerSocketAdapter.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/ServerSocketAdapter.mjs\");\n/* harmony import */ var _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs\");\n/* harmony import */ var _TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TLSyncRoom.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncRoom.mjs\");\n/* harmony import */ var _chunk_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs\");\n\n\n\n\n\n\n\nclass TLSocketRoom {\n  constructor(opts) {\n    this.opts = opts;\n    const initialSnapshot = opts.initialSnapshot && \"store\" in opts.initialSnapshot ? convertStoreSnapshotToRoomSnapshot(opts.initialSnapshot) : opts.initialSnapshot;\n    this.room = new _TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_5__.TLSyncRoom({\n      schema: opts.schema ?? (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createTLSchema)(),\n      snapshot: initialSnapshot,\n      onDataChange: opts.onDataChange,\n      log: opts.log\n    });\n    this.room.events.on(\"session_removed\", (args) => {\n      this.sessions.delete(args.sessionId);\n      if (this.opts.onSessionRemoved) {\n        this.opts.onSessionRemoved(this, {\n          sessionId: args.sessionId,\n          numSessionsRemaining: this.room.sessions.size,\n          meta: args.meta\n        });\n      }\n    });\n    this.log = \"log\" in opts ? opts.log : { error: console.error };\n  }\n  room;\n  sessions = /* @__PURE__ */ new Map();\n  log;\n  /**\n   * Returns the number of active sessions.\n   * Note that this is not the same as the number of connected sockets!\n   * Sessions time out a few moments after sockets close, to smooth over network hiccups.\n   *\n   * @returns the number of active sessions\n   */\n  getNumActiveSessions() {\n    return this.room.sessions.size;\n  }\n  /**\n   * Call this when a client establishes a new socket connection.\n   *\n   * - `sessionId` is a unique ID for a browser tab. This is passed as a query param by the useSync hook.\n   * - `socket` is a WebSocket-like object that the server uses to communicate with the client.\n   * - `isReadonly` is an optional boolean that can be set to true if the client should not be able to make changes to the document. They will still be able to send presence updates.\n   * - `meta` is an optional object that can be used to store additional information about the session.\n   *\n   * @param opts - The options object\n   */\n  handleSocketConnect(opts) {\n    const { sessionId, socket, isReadonly = false } = opts;\n    const handleSocketMessage = (event) => this.handleSocketMessage(sessionId, event.data);\n    const handleSocketError = this.handleSocketError.bind(this, sessionId);\n    const handleSocketClose = this.handleSocketClose.bind(this, sessionId);\n    this.sessions.set(sessionId, {\n      assembler: new _chunk_mjs__WEBPACK_IMPORTED_MODULE_6__.JsonChunkAssembler(),\n      socket,\n      unlisten: () => {\n        socket.removeEventListener?.(\"message\", handleSocketMessage);\n        socket.removeEventListener?.(\"close\", handleSocketClose);\n        socket.removeEventListener?.(\"error\", handleSocketError);\n      }\n    });\n    this.room.handleNewSession({\n      sessionId,\n      isReadonly,\n      socket: new _ServerSocketAdapter_mjs__WEBPACK_IMPORTED_MODULE_3__.ServerSocketAdapter({\n        ws: socket,\n        onBeforeSendMessage: this.opts.onBeforeSendMessage ? (message, stringified) => this.opts.onBeforeSendMessage({\n          sessionId,\n          message,\n          stringified,\n          meta: this.room.sessions.get(sessionId)?.meta\n        }) : void 0\n      }),\n      meta: \"meta\" in opts ? opts.meta : void 0\n    });\n    socket.addEventListener?.(\"message\", handleSocketMessage);\n    socket.addEventListener?.(\"close\", handleSocketClose);\n    socket.addEventListener?.(\"error\", handleSocketError);\n  }\n  /**\n   * If executing in a server environment where sockets do not have instance-level listeners\n   * (e.g. Bun.serve, Cloudflare Worker with WebSocket hibernation), you should call this\n   * method when messages are received. See our self-hosting example for Bun.serve for an example.\n   *\n   * @param sessionId - The id of the session. (should match the one used when calling handleSocketConnect)\n   * @param message - The message received from the client.\n   */\n  handleSocketMessage(sessionId, message) {\n    const assembler = this.sessions.get(sessionId)?.assembler;\n    if (!assembler) {\n      this.log?.warn?.(\"Received message from unknown session\", sessionId);\n      return;\n    }\n    try {\n      const messageString = typeof message === \"string\" ? message : new TextDecoder().decode(message);\n      const res = assembler.handleMessage(messageString);\n      if (!res) {\n        return;\n      }\n      if (\"data\" in res) {\n        if (this.opts.onAfterReceiveMessage) {\n          const session = this.room.sessions.get(sessionId);\n          if (session) {\n            this.opts.onAfterReceiveMessage({\n              sessionId,\n              message: res.data,\n              stringified: res.stringified,\n              meta: session.meta\n            });\n          }\n        }\n        this.room.handleMessage(sessionId, res.data);\n      } else {\n        this.log?.error?.(\"Error assembling message\", res.error);\n        this.handleSocketError(sessionId);\n      }\n    } catch (e) {\n      this.log?.error?.(e);\n      this.room.rejectSession(sessionId, _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_4__.TLSyncErrorCloseEventReason.UNKNOWN_ERROR);\n    }\n  }\n  /**\n   * If executing in a server environment where sockets do not have instance-level listeners,\n   * call this when a socket error occurs.\n   * @param sessionId - The id of the session. (should match the one used when calling handleSocketConnect)\n   */\n  handleSocketError(sessionId) {\n    this.room.handleClose(sessionId);\n  }\n  /**\n   * If executing in a server environment where sockets do not have instance-level listeners,\n   * call this when a socket is closed.\n   * @param sessionId - The id of the session. (should match the one used when calling handleSocketConnect)\n   */\n  handleSocketClose(sessionId) {\n    this.room.handleClose(sessionId);\n  }\n  /**\n   * Returns the current 'clock' of the document.\n   * The clock is an integer that increments every time the document changes.\n   * The clock is stored as part of the snapshot of the document for consistency purposes.\n   *\n   * @returns The clock\n   */\n  getCurrentDocumentClock() {\n    return this.room.documentClock;\n  }\n  /**\n   * Returns a deeply cloned record from the store, if available.\n   * @param id - The id of the record\n   * @returns the cloned record\n   */\n  getRecord(id) {\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.structuredClone)(this.room.state.get().documents[id]?.state);\n  }\n  /**\n   * Returns a list of the sessions in the room.\n   */\n  getSessions() {\n    return [...this.room.sessions.values()].map((session) => {\n      return {\n        sessionId: session.sessionId,\n        isConnected: session.state === _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_2__.RoomSessionState.Connected,\n        isReadonly: session.isReadonly,\n        meta: session.meta\n      };\n    });\n  }\n  /**\n   * Return a snapshot of the document state, including clock-related bookkeeping.\n   * You can store this and load it later on when initializing a TLSocketRoom.\n   * You can also pass a snapshot to {@link TLSocketRoom#loadSnapshot} if you need to revert to a previous state.\n   * @returns The snapshot\n   */\n  getCurrentSnapshot() {\n    return this.room.getSnapshot();\n  }\n  /**\n   * Load a snapshot of the document state, overwriting the current state.\n   * @param snapshot - The snapshot to load\n   */\n  loadSnapshot(snapshot) {\n    if (\"store\" in snapshot) {\n      snapshot = convertStoreSnapshotToRoomSnapshot(snapshot);\n    }\n    const oldRoom = this.room;\n    const oldIds = oldRoom.getSnapshot().documents.map((d) => d.state.id);\n    const newIds = new Set(snapshot.documents.map((d) => d.state.id));\n    const removedIds = oldIds.filter((id) => !newIds.has(id));\n    const tombstones = { ...snapshot.tombstones };\n    removedIds.forEach((id) => {\n      tombstones[id] = oldRoom.clock + 1;\n    });\n    newIds.forEach((id) => {\n      delete tombstones[id];\n    });\n    const newRoom = new _TLSyncRoom_mjs__WEBPACK_IMPORTED_MODULE_5__.TLSyncRoom({\n      schema: oldRoom.schema,\n      snapshot: {\n        clock: oldRoom.clock + 1,\n        documents: snapshot.documents.map((d) => ({\n          lastChangedClock: oldRoom.clock + 1,\n          state: d.state\n        })),\n        schema: snapshot.schema,\n        tombstones\n      },\n      log: this.log\n    });\n    this.room = newRoom;\n    oldRoom.close();\n  }\n  /**\n   * Allow applying changes to the store inside of a transaction.\n   *\n   * You can get values from the store by id with `store.get(id)`.\n   * These values are safe to mutate, but to commit the changes you must call `store.put(...)` with the updated value.\n   * You can get all values in the store with `store.getAll()`.\n   * You can also delete values with `store.delete(id)`.\n   *\n   * @example\n   * ```ts\n   * room.updateStore(store => {\n   *   const shape = store.get('shape:abc123')\n   *   shape.meta.approved = true\n   *   store.put(shape)\n   * })\n   * ```\n   *\n   * Changes to the store inside the callback are isolated from changes made by other clients until the transaction commits.\n   *\n   * @param updater - A function that will be called with a store object that can be used to make changes.\n   * @returns A promise that resolves when the transaction is complete.\n   */\n  async updateStore(updater) {\n    return this.room.updateStore(updater);\n  }\n  /**\n   * Immediately remove a session from the room, and close its socket if not already closed.\n   *\n   * The client will attempt to reconnect unless you provide a `fatalReason` parameter.\n   *\n   * The `fatalReason` parameter will be available in the return value of the `useSync` hook as `useSync().error.reason`.\n   *\n   * @param sessionId - The id of the session to remove\n   * @param fatalReason - The reason message to use when calling .close on the underlying websocket\n   */\n  closeSession(sessionId, fatalReason) {\n    this.room.rejectSession(sessionId, fatalReason);\n  }\n  /**\n   * Close the room and disconnect all clients. Call this before discarding the room instance or shutting down the server.\n   */\n  close() {\n    this.room.close();\n  }\n  /**\n   * @returns true if the room is closed\n   */\n  isClosed() {\n    return this.room.isClosed();\n  }\n}\nfunction convertStoreSnapshotToRoomSnapshot(snapshot) {\n  return {\n    clock: 0,\n    documents: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(snapshot.store).map((state) => ({\n      state,\n      lastChangedClock: 0\n    })),\n    schema: snapshot.schema,\n    tombstones: {}\n  };\n}\n\n//# sourceMappingURL=TLSocketRoom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1RMU29ja2V0Um9vbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDZTtBQUNaO0FBQ1c7QUFDQztBQUNuQjtBQUNHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVEQUFVO0FBQzlCLDZCQUE2QixnRUFBYztBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0wsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMERBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUVBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSx5Q0FBeUMsMEVBQTJCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDhEQUFnQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaUNBQWlDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLHdCQUF3Qix1REFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOERBQWU7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMtY29yZS9kaXN0LWVzbS9saWIvVExTb2NrZXRSb29tLm1qcz8yMjRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVRMU2NoZW1hIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IG9iamVjdE1hcFZhbHVlcywgc3RydWN0dXJlZENsb25lIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFJvb21TZXNzaW9uU3RhdGUgfSBmcm9tIFwiLi9Sb29tU2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IFNlcnZlclNvY2tldEFkYXB0ZXIgfSBmcm9tIFwiLi9TZXJ2ZXJTb2NrZXRBZGFwdGVyLm1qc1wiO1xuaW1wb3J0IHsgVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uIH0gZnJvbSBcIi4vVExTeW5jQ2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgVExTeW5jUm9vbSB9IGZyb20gXCIuL1RMU3luY1Jvb20ubWpzXCI7XG5pbXBvcnQgeyBKc29uQ2h1bmtBc3NlbWJsZXIgfSBmcm9tIFwiLi9jaHVuay5tanNcIjtcbmNsYXNzIFRMU29ja2V0Um9vbSB7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIGNvbnN0IGluaXRpYWxTbmFwc2hvdCA9IG9wdHMuaW5pdGlhbFNuYXBzaG90ICYmIFwic3RvcmVcIiBpbiBvcHRzLmluaXRpYWxTbmFwc2hvdCA/IGNvbnZlcnRTdG9yZVNuYXBzaG90VG9Sb29tU25hcHNob3Qob3B0cy5pbml0aWFsU25hcHNob3QpIDogb3B0cy5pbml0aWFsU25hcHNob3Q7XG4gICAgdGhpcy5yb29tID0gbmV3IFRMU3luY1Jvb20oe1xuICAgICAgc2NoZW1hOiBvcHRzLnNjaGVtYSA/PyBjcmVhdGVUTFNjaGVtYSgpLFxuICAgICAgc25hcHNob3Q6IGluaXRpYWxTbmFwc2hvdCxcbiAgICAgIG9uRGF0YUNoYW5nZTogb3B0cy5vbkRhdGFDaGFuZ2UsXG4gICAgICBsb2c6IG9wdHMubG9nXG4gICAgfSk7XG4gICAgdGhpcy5yb29tLmV2ZW50cy5vbihcInNlc3Npb25fcmVtb3ZlZFwiLCAoYXJncykgPT4ge1xuICAgICAgdGhpcy5zZXNzaW9ucy5kZWxldGUoYXJncy5zZXNzaW9uSWQpO1xuICAgICAgaWYgKHRoaXMub3B0cy5vblNlc3Npb25SZW1vdmVkKSB7XG4gICAgICAgIHRoaXMub3B0cy5vblNlc3Npb25SZW1vdmVkKHRoaXMsIHtcbiAgICAgICAgICBzZXNzaW9uSWQ6IGFyZ3Muc2Vzc2lvbklkLFxuICAgICAgICAgIG51bVNlc3Npb25zUmVtYWluaW5nOiB0aGlzLnJvb20uc2Vzc2lvbnMuc2l6ZSxcbiAgICAgICAgICBtZXRhOiBhcmdzLm1ldGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5sb2cgPSBcImxvZ1wiIGluIG9wdHMgPyBvcHRzLmxvZyA6IHsgZXJyb3I6IGNvbnNvbGUuZXJyb3IgfTtcbiAgfVxuICByb29tO1xuICBzZXNzaW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGxvZztcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBhY3RpdmUgc2Vzc2lvbnMuXG4gICAqIE5vdGUgdGhhdCB0aGlzIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgbnVtYmVyIG9mIGNvbm5lY3RlZCBzb2NrZXRzIVxuICAgKiBTZXNzaW9ucyB0aW1lIG91dCBhIGZldyBtb21lbnRzIGFmdGVyIHNvY2tldHMgY2xvc2UsIHRvIHNtb290aCBvdmVyIG5ldHdvcmsgaGljY3Vwcy5cbiAgICpcbiAgICogQHJldHVybnMgdGhlIG51bWJlciBvZiBhY3RpdmUgc2Vzc2lvbnNcbiAgICovXG4gIGdldE51bUFjdGl2ZVNlc3Npb25zKCkge1xuICAgIHJldHVybiB0aGlzLnJvb20uc2Vzc2lvbnMuc2l6ZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbCB0aGlzIHdoZW4gYSBjbGllbnQgZXN0YWJsaXNoZXMgYSBuZXcgc29ja2V0IGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIC0gYHNlc3Npb25JZGAgaXMgYSB1bmlxdWUgSUQgZm9yIGEgYnJvd3NlciB0YWIuIFRoaXMgaXMgcGFzc2VkIGFzIGEgcXVlcnkgcGFyYW0gYnkgdGhlIHVzZVN5bmMgaG9vay5cbiAgICogLSBgc29ja2V0YCBpcyBhIFdlYlNvY2tldC1saWtlIG9iamVjdCB0aGF0IHRoZSBzZXJ2ZXIgdXNlcyB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBjbGllbnQuXG4gICAqIC0gYGlzUmVhZG9ubHlgIGlzIGFuIG9wdGlvbmFsIGJvb2xlYW4gdGhhdCBjYW4gYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IGJlIGFibGUgdG8gbWFrZSBjaGFuZ2VzIHRvIHRoZSBkb2N1bWVudC4gVGhleSB3aWxsIHN0aWxsIGJlIGFibGUgdG8gc2VuZCBwcmVzZW5jZSB1cGRhdGVzLlxuICAgKiAtIGBtZXRhYCBpcyBhbiBvcHRpb25hbCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBzdG9yZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzZXNzaW9uLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyAtIFRoZSBvcHRpb25zIG9iamVjdFxuICAgKi9cbiAgaGFuZGxlU29ja2V0Q29ubmVjdChvcHRzKSB7XG4gICAgY29uc3QgeyBzZXNzaW9uSWQsIHNvY2tldCwgaXNSZWFkb25seSA9IGZhbHNlIH0gPSBvcHRzO1xuICAgIGNvbnN0IGhhbmRsZVNvY2tldE1lc3NhZ2UgPSAoZXZlbnQpID0+IHRoaXMuaGFuZGxlU29ja2V0TWVzc2FnZShzZXNzaW9uSWQsIGV2ZW50LmRhdGEpO1xuICAgIGNvbnN0IGhhbmRsZVNvY2tldEVycm9yID0gdGhpcy5oYW5kbGVTb2NrZXRFcnJvci5iaW5kKHRoaXMsIHNlc3Npb25JZCk7XG4gICAgY29uc3QgaGFuZGxlU29ja2V0Q2xvc2UgPSB0aGlzLmhhbmRsZVNvY2tldENsb3NlLmJpbmQodGhpcywgc2Vzc2lvbklkKTtcbiAgICB0aGlzLnNlc3Npb25zLnNldChzZXNzaW9uSWQsIHtcbiAgICAgIGFzc2VtYmxlcjogbmV3IEpzb25DaHVua0Fzc2VtYmxlcigpLFxuICAgICAgc29ja2V0LFxuICAgICAgdW5saXN0ZW46ICgpID0+IHtcbiAgICAgICAgc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcIm1lc3NhZ2VcIiwgaGFuZGxlU29ja2V0TWVzc2FnZSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjbG9zZVwiLCBoYW5kbGVTb2NrZXRDbG9zZSk7XG4gICAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJlcnJvclwiLCBoYW5kbGVTb2NrZXRFcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yb29tLmhhbmRsZU5ld1Nlc3Npb24oe1xuICAgICAgc2Vzc2lvbklkLFxuICAgICAgaXNSZWFkb25seSxcbiAgICAgIHNvY2tldDogbmV3IFNlcnZlclNvY2tldEFkYXB0ZXIoe1xuICAgICAgICB3czogc29ja2V0LFxuICAgICAgICBvbkJlZm9yZVNlbmRNZXNzYWdlOiB0aGlzLm9wdHMub25CZWZvcmVTZW5kTWVzc2FnZSA/IChtZXNzYWdlLCBzdHJpbmdpZmllZCkgPT4gdGhpcy5vcHRzLm9uQmVmb3JlU2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgIHN0cmluZ2lmaWVkLFxuICAgICAgICAgIG1ldGE6IHRoaXMucm9vbS5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKT8ubWV0YVxuICAgICAgICB9KSA6IHZvaWQgMFxuICAgICAgfSksXG4gICAgICBtZXRhOiBcIm1ldGFcIiBpbiBvcHRzID8gb3B0cy5tZXRhIDogdm9pZCAwXG4gICAgfSk7XG4gICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXI/LihcIm1lc3NhZ2VcIiwgaGFuZGxlU29ja2V0TWVzc2FnZSk7XG4gICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXI/LihcImNsb3NlXCIsIGhhbmRsZVNvY2tldENsb3NlKTtcbiAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiZXJyb3JcIiwgaGFuZGxlU29ja2V0RXJyb3IpO1xuICB9XG4gIC8qKlxuICAgKiBJZiBleGVjdXRpbmcgaW4gYSBzZXJ2ZXIgZW52aXJvbm1lbnQgd2hlcmUgc29ja2V0cyBkbyBub3QgaGF2ZSBpbnN0YW5jZS1sZXZlbCBsaXN0ZW5lcnNcbiAgICogKGUuZy4gQnVuLnNlcnZlLCBDbG91ZGZsYXJlIFdvcmtlciB3aXRoIFdlYlNvY2tldCBoaWJlcm5hdGlvbiksIHlvdSBzaG91bGQgY2FsbCB0aGlzXG4gICAqIG1ldGhvZCB3aGVuIG1lc3NhZ2VzIGFyZSByZWNlaXZlZC4gU2VlIG91ciBzZWxmLWhvc3RpbmcgZXhhbXBsZSBmb3IgQnVuLnNlcnZlIGZvciBhbiBleGFtcGxlLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIGlkIG9mIHRoZSBzZXNzaW9uLiAoc2hvdWxkIG1hdGNoIHRoZSBvbmUgdXNlZCB3aGVuIGNhbGxpbmcgaGFuZGxlU29ja2V0Q29ubmVjdClcbiAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoZSBjbGllbnQuXG4gICAqL1xuICBoYW5kbGVTb2NrZXRNZXNzYWdlKHNlc3Npb25JZCwgbWVzc2FnZSkge1xuICAgIGNvbnN0IGFzc2VtYmxlciA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk/LmFzc2VtYmxlcjtcbiAgICBpZiAoIWFzc2VtYmxlcikge1xuICAgICAgdGhpcy5sb2c/Lndhcm4/LihcIlJlY2VpdmVkIG1lc3NhZ2UgZnJvbSB1bmtub3duIHNlc3Npb25cIiwgc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VTdHJpbmcgPSB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUobWVzc2FnZSk7XG4gICAgICBjb25zdCByZXMgPSBhc3NlbWJsZXIuaGFuZGxlTWVzc2FnZShtZXNzYWdlU3RyaW5nKTtcbiAgICAgIGlmICghcmVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChcImRhdGFcIiBpbiByZXMpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0cy5vbkFmdGVyUmVjZWl2ZU1lc3NhZ2UpIHtcbiAgICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5yb29tLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLm9wdHMub25BZnRlclJlY2VpdmVNZXNzYWdlKHtcbiAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YSxcbiAgICAgICAgICAgICAgc3RyaW5naWZpZWQ6IHJlcy5zdHJpbmdpZmllZCxcbiAgICAgICAgICAgICAgbWV0YTogc2Vzc2lvbi5tZXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb29tLmhhbmRsZU1lc3NhZ2Uoc2Vzc2lvbklkLCByZXMuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvZz8uZXJyb3I/LihcIkVycm9yIGFzc2VtYmxpbmcgbWVzc2FnZVwiLCByZXMuZXJyb3IpO1xuICAgICAgICB0aGlzLmhhbmRsZVNvY2tldEVycm9yKHNlc3Npb25JZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5sb2c/LmVycm9yPy4oZSk7XG4gICAgICB0aGlzLnJvb20ucmVqZWN0U2Vzc2lvbihzZXNzaW9uSWQsIFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5VTktOT1dOX0VSUk9SKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIElmIGV4ZWN1dGluZyBpbiBhIHNlcnZlciBlbnZpcm9ubWVudCB3aGVyZSBzb2NrZXRzIGRvIG5vdCBoYXZlIGluc3RhbmNlLWxldmVsIGxpc3RlbmVycyxcbiAgICogY2FsbCB0aGlzIHdoZW4gYSBzb2NrZXQgZXJyb3Igb2NjdXJzLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIGlkIG9mIHRoZSBzZXNzaW9uLiAoc2hvdWxkIG1hdGNoIHRoZSBvbmUgdXNlZCB3aGVuIGNhbGxpbmcgaGFuZGxlU29ja2V0Q29ubmVjdClcbiAgICovXG4gIGhhbmRsZVNvY2tldEVycm9yKHNlc3Npb25JZCkge1xuICAgIHRoaXMucm9vbS5oYW5kbGVDbG9zZShzZXNzaW9uSWQpO1xuICB9XG4gIC8qKlxuICAgKiBJZiBleGVjdXRpbmcgaW4gYSBzZXJ2ZXIgZW52aXJvbm1lbnQgd2hlcmUgc29ja2V0cyBkbyBub3QgaGF2ZSBpbnN0YW5jZS1sZXZlbCBsaXN0ZW5lcnMsXG4gICAqIGNhbGwgdGhpcyB3aGVuIGEgc29ja2V0IGlzIGNsb3NlZC5cbiAgICogQHBhcmFtIHNlc3Npb25JZCAtIFRoZSBpZCBvZiB0aGUgc2Vzc2lvbi4gKHNob3VsZCBtYXRjaCB0aGUgb25lIHVzZWQgd2hlbiBjYWxsaW5nIGhhbmRsZVNvY2tldENvbm5lY3QpXG4gICAqL1xuICBoYW5kbGVTb2NrZXRDbG9zZShzZXNzaW9uSWQpIHtcbiAgICB0aGlzLnJvb20uaGFuZGxlQ2xvc2Uoc2Vzc2lvbklkKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCAnY2xvY2snIG9mIHRoZSBkb2N1bWVudC5cbiAgICogVGhlIGNsb2NrIGlzIGFuIGludGVnZXIgdGhhdCBpbmNyZW1lbnRzIGV2ZXJ5IHRpbWUgdGhlIGRvY3VtZW50IGNoYW5nZXMuXG4gICAqIFRoZSBjbG9jayBpcyBzdG9yZWQgYXMgcGFydCBvZiB0aGUgc25hcHNob3Qgb2YgdGhlIGRvY3VtZW50IGZvciBjb25zaXN0ZW5jeSBwdXJwb3Nlcy5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGNsb2NrXG4gICAqL1xuICBnZXRDdXJyZW50RG9jdW1lbnRDbG9jaygpIHtcbiAgICByZXR1cm4gdGhpcy5yb29tLmRvY3VtZW50Q2xvY2s7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBkZWVwbHkgY2xvbmVkIHJlY29yZCBmcm9tIHRoZSBzdG9yZSwgaWYgYXZhaWxhYmxlLlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJlY29yZFxuICAgKiBAcmV0dXJucyB0aGUgY2xvbmVkIHJlY29yZFxuICAgKi9cbiAgZ2V0UmVjb3JkKGlkKSB7XG4gICAgcmV0dXJuIHN0cnVjdHVyZWRDbG9uZSh0aGlzLnJvb20uc3RhdGUuZ2V0KCkuZG9jdW1lbnRzW2lkXT8uc3RhdGUpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiB0aGUgc2Vzc2lvbnMgaW4gdGhlIHJvb20uXG4gICAqL1xuICBnZXRTZXNzaW9ucygpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMucm9vbS5zZXNzaW9ucy52YWx1ZXMoKV0ubWFwKChzZXNzaW9uKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb24uc2Vzc2lvbklkLFxuICAgICAgICBpc0Nvbm5lY3RlZDogc2Vzc2lvbi5zdGF0ZSA9PT0gUm9vbVNlc3Npb25TdGF0ZS5Db25uZWN0ZWQsXG4gICAgICAgIGlzUmVhZG9ubHk6IHNlc3Npb24uaXNSZWFkb25seSxcbiAgICAgICAgbWV0YTogc2Vzc2lvbi5tZXRhXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBzbmFwc2hvdCBvZiB0aGUgZG9jdW1lbnQgc3RhdGUsIGluY2x1ZGluZyBjbG9jay1yZWxhdGVkIGJvb2trZWVwaW5nLlxuICAgKiBZb3UgY2FuIHN0b3JlIHRoaXMgYW5kIGxvYWQgaXQgbGF0ZXIgb24gd2hlbiBpbml0aWFsaXppbmcgYSBUTFNvY2tldFJvb20uXG4gICAqIFlvdSBjYW4gYWxzbyBwYXNzIGEgc25hcHNob3QgdG8ge0BsaW5rIFRMU29ja2V0Um9vbSNsb2FkU25hcHNob3R9IGlmIHlvdSBuZWVkIHRvIHJldmVydCB0byBhIHByZXZpb3VzIHN0YXRlLlxuICAgKiBAcmV0dXJucyBUaGUgc25hcHNob3RcbiAgICovXG4gIGdldEN1cnJlbnRTbmFwc2hvdCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb29tLmdldFNuYXBzaG90KCk7XG4gIH1cbiAgLyoqXG4gICAqIExvYWQgYSBzbmFwc2hvdCBvZiB0aGUgZG9jdW1lbnQgc3RhdGUsIG92ZXJ3cml0aW5nIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgKiBAcGFyYW0gc25hcHNob3QgLSBUaGUgc25hcHNob3QgdG8gbG9hZFxuICAgKi9cbiAgbG9hZFNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgaWYgKFwic3RvcmVcIiBpbiBzbmFwc2hvdCkge1xuICAgICAgc25hcHNob3QgPSBjb252ZXJ0U3RvcmVTbmFwc2hvdFRvUm9vbVNuYXBzaG90KHNuYXBzaG90KTtcbiAgICB9XG4gICAgY29uc3Qgb2xkUm9vbSA9IHRoaXMucm9vbTtcbiAgICBjb25zdCBvbGRJZHMgPSBvbGRSb29tLmdldFNuYXBzaG90KCkuZG9jdW1lbnRzLm1hcCgoZCkgPT4gZC5zdGF0ZS5pZCk7XG4gICAgY29uc3QgbmV3SWRzID0gbmV3IFNldChzbmFwc2hvdC5kb2N1bWVudHMubWFwKChkKSA9PiBkLnN0YXRlLmlkKSk7XG4gICAgY29uc3QgcmVtb3ZlZElkcyA9IG9sZElkcy5maWx0ZXIoKGlkKSA9PiAhbmV3SWRzLmhhcyhpZCkpO1xuICAgIGNvbnN0IHRvbWJzdG9uZXMgPSB7IC4uLnNuYXBzaG90LnRvbWJzdG9uZXMgfTtcbiAgICByZW1vdmVkSWRzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICB0b21ic3RvbmVzW2lkXSA9IG9sZFJvb20uY2xvY2sgKyAxO1xuICAgIH0pO1xuICAgIG5ld0lkcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgZGVsZXRlIHRvbWJzdG9uZXNbaWRdO1xuICAgIH0pO1xuICAgIGNvbnN0IG5ld1Jvb20gPSBuZXcgVExTeW5jUm9vbSh7XG4gICAgICBzY2hlbWE6IG9sZFJvb20uc2NoZW1hLFxuICAgICAgc25hcHNob3Q6IHtcbiAgICAgICAgY2xvY2s6IG9sZFJvb20uY2xvY2sgKyAxLFxuICAgICAgICBkb2N1bWVudHM6IHNuYXBzaG90LmRvY3VtZW50cy5tYXAoKGQpID0+ICh7XG4gICAgICAgICAgbGFzdENoYW5nZWRDbG9jazogb2xkUm9vbS5jbG9jayArIDEsXG4gICAgICAgICAgc3RhdGU6IGQuc3RhdGVcbiAgICAgICAgfSkpLFxuICAgICAgICBzY2hlbWE6IHNuYXBzaG90LnNjaGVtYSxcbiAgICAgICAgdG9tYnN0b25lc1xuICAgICAgfSxcbiAgICAgIGxvZzogdGhpcy5sb2dcbiAgICB9KTtcbiAgICB0aGlzLnJvb20gPSBuZXdSb29tO1xuICAgIG9sZFJvb20uY2xvc2UoKTtcbiAgfVxuICAvKipcbiAgICogQWxsb3cgYXBwbHlpbmcgY2hhbmdlcyB0byB0aGUgc3RvcmUgaW5zaWRlIG9mIGEgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIFlvdSBjYW4gZ2V0IHZhbHVlcyBmcm9tIHRoZSBzdG9yZSBieSBpZCB3aXRoIGBzdG9yZS5nZXQoaWQpYC5cbiAgICogVGhlc2UgdmFsdWVzIGFyZSBzYWZlIHRvIG11dGF0ZSwgYnV0IHRvIGNvbW1pdCB0aGUgY2hhbmdlcyB5b3UgbXVzdCBjYWxsIGBzdG9yZS5wdXQoLi4uKWAgd2l0aCB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICogWW91IGNhbiBnZXQgYWxsIHZhbHVlcyBpbiB0aGUgc3RvcmUgd2l0aCBgc3RvcmUuZ2V0QWxsKClgLlxuICAgKiBZb3UgY2FuIGFsc28gZGVsZXRlIHZhbHVlcyB3aXRoIGBzdG9yZS5kZWxldGUoaWQpYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogcm9vbS51cGRhdGVTdG9yZShzdG9yZSA9PiB7XG4gICAqICAgY29uc3Qgc2hhcGUgPSBzdG9yZS5nZXQoJ3NoYXBlOmFiYzEyMycpXG4gICAqICAgc2hhcGUubWV0YS5hcHByb3ZlZCA9IHRydWVcbiAgICogICBzdG9yZS5wdXQoc2hhcGUpXG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBDaGFuZ2VzIHRvIHRoZSBzdG9yZSBpbnNpZGUgdGhlIGNhbGxiYWNrIGFyZSBpc29sYXRlZCBmcm9tIGNoYW5nZXMgbWFkZSBieSBvdGhlciBjbGllbnRzIHVudGlsIHRoZSB0cmFuc2FjdGlvbiBjb21taXRzLlxuICAgKlxuICAgKiBAcGFyYW0gdXBkYXRlciAtIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgc3RvcmUgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB0cmFuc2FjdGlvbiBpcyBjb21wbGV0ZS5cbiAgICovXG4gIGFzeW5jIHVwZGF0ZVN0b3JlKHVwZGF0ZXIpIHtcbiAgICByZXR1cm4gdGhpcy5yb29tLnVwZGF0ZVN0b3JlKHVwZGF0ZXIpO1xuICB9XG4gIC8qKlxuICAgKiBJbW1lZGlhdGVseSByZW1vdmUgYSBzZXNzaW9uIGZyb20gdGhlIHJvb20sIGFuZCBjbG9zZSBpdHMgc29ja2V0IGlmIG5vdCBhbHJlYWR5IGNsb3NlZC5cbiAgICpcbiAgICogVGhlIGNsaWVudCB3aWxsIGF0dGVtcHQgdG8gcmVjb25uZWN0IHVubGVzcyB5b3UgcHJvdmlkZSBhIGBmYXRhbFJlYXNvbmAgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBUaGUgYGZhdGFsUmVhc29uYCBwYXJhbWV0ZXIgd2lsbCBiZSBhdmFpbGFibGUgaW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYHVzZVN5bmNgIGhvb2sgYXMgYHVzZVN5bmMoKS5lcnJvci5yZWFzb25gLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIGlkIG9mIHRoZSBzZXNzaW9uIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0gZmF0YWxSZWFzb24gLSBUaGUgcmVhc29uIG1lc3NhZ2UgdG8gdXNlIHdoZW4gY2FsbGluZyAuY2xvc2Ugb24gdGhlIHVuZGVybHlpbmcgd2Vic29ja2V0XG4gICAqL1xuICBjbG9zZVNlc3Npb24oc2Vzc2lvbklkLCBmYXRhbFJlYXNvbikge1xuICAgIHRoaXMucm9vbS5yZWplY3RTZXNzaW9uKHNlc3Npb25JZCwgZmF0YWxSZWFzb24pO1xuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgcm9vbSBhbmQgZGlzY29ubmVjdCBhbGwgY2xpZW50cy4gQ2FsbCB0aGlzIGJlZm9yZSBkaXNjYXJkaW5nIHRoZSByb29tIGluc3RhbmNlIG9yIHNodXR0aW5nIGRvd24gdGhlIHNlcnZlci5cbiAgICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMucm9vbS5jbG9zZSgpO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByb29tIGlzIGNsb3NlZFxuICAgKi9cbiAgaXNDbG9zZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9vbS5pc0Nsb3NlZCgpO1xuICB9XG59XG5mdW5jdGlvbiBjb252ZXJ0U3RvcmVTbmFwc2hvdFRvUm9vbVNuYXBzaG90KHNuYXBzaG90KSB7XG4gIHJldHVybiB7XG4gICAgY2xvY2s6IDAsXG4gICAgZG9jdW1lbnRzOiBvYmplY3RNYXBWYWx1ZXMoc25hcHNob3Quc3RvcmUpLm1hcCgoc3RhdGUpID0+ICh7XG4gICAgICBzdGF0ZSxcbiAgICAgIGxhc3RDaGFuZ2VkQ2xvY2s6IDBcbiAgICB9KSksXG4gICAgc2NoZW1hOiBzbmFwc2hvdC5zY2hlbWEsXG4gICAgdG9tYnN0b25lczoge31cbiAgfTtcbn1cbmV4cG9ydCB7XG4gIFRMU29ja2V0Um9vbVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMU29ja2V0Um9vbS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSocketRoom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLSyncClient: () => (/* binding */ TLSyncClient),\n/* harmony export */   TLSyncErrorCloseEventCode: () => (/* binding */ TLSyncErrorCloseEventCode),\n/* harmony export */   TLSyncErrorCloseEventReason: () => (/* binding */ TLSyncErrorCloseEventReason)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash.isequal */ \"(ssr)/./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var _diff_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./diff.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs\");\n/* harmony import */ var _interval_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interval.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/interval.mjs\");\n/* harmony import */ var _protocol_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./protocol.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs\");\n\n\n\n\n\n\n\nconst TLSyncErrorCloseEventCode = 4099;\nconst TLSyncErrorCloseEventReason = {\n  NOT_FOUND: \"NOT_FOUND\",\n  FORBIDDEN: \"FORBIDDEN\",\n  NOT_AUTHENTICATED: \"NOT_AUTHENTICATED\",\n  UNKNOWN_ERROR: \"UNKNOWN_ERROR\",\n  CLIENT_TOO_OLD: \"CLIENT_TOO_OLD\",\n  SERVER_TOO_OLD: \"SERVER_TOO_OLD\",\n  INVALID_RECORD: \"INVALID_RECORD\"\n};\nconst PING_INTERVAL = 5e3;\nconst MAX_TIME_TO_WAIT_FOR_SERVER_INTERACTION_BEFORE_RESETTING_CONNECTION = PING_INTERVAL * 2;\nclass TLSyncClient {\n  /** The last clock time from the most recent server update */\n  lastServerClock = 0;\n  lastServerInteractionTimestamp = Date.now();\n  /** The queue of in-flight push requests that have not yet been acknowledged by the server */\n  pendingPushRequests = [];\n  /**\n   * The diff of 'unconfirmed', 'optimistic' changes that have been made locally by the user if we\n   * take this diff, reverse it, and apply that to the store, our store will match exactly the most\n   * recent state of the server that we know about\n   */\n  speculativeChanges = {\n    added: {},\n    updated: {},\n    removed: {}\n  };\n  disposables = [];\n  store;\n  socket;\n  presenceState;\n  // isOnline is true when we have an open socket connection and we have\n  // established a connection with the server room (i.e. we have received a 'connect' message)\n  isConnectedToRoom = false;\n  /**\n   * The client clock is essentially a counter for push requests Each time a push request is created\n   * the clock is incremented. This clock is sent with the push request to the server, and the\n   * server returns it with the response so that we can match up the response with the request.\n   *\n   * The clock may also be used at one point in the future to allow the client to re-send push\n   * requests idempotently (i.e. the server will keep track of each client's clock and not execute\n   * requests it has already handled), but at the time of writing this is neither needed nor\n   * implemented.\n   */\n  clientClock = 0;\n  /**\n   * Called immediately after a connect acceptance has been received and processed Use this to make\n   * any changes to the store that are required to keep it operational\n   */\n  onAfterConnect;\n  isDebugging = false;\n  debug(...args) {\n    if (this.isDebugging) {\n      console.debug(...args);\n    }\n  }\n  presenceType;\n  didCancel;\n  constructor(config) {\n    this.didCancel = config.didCancel;\n    this.presenceType = config.store.scopedTypes.presence.values().next().value;\n    if (typeof window !== \"undefined\") {\n      ;\n      window.tlsync = this;\n    }\n    this.store = config.store;\n    this.socket = config.socket;\n    this.onAfterConnect = config.onAfterConnect;\n    let didLoad = false;\n    this.presenceState = config.presence;\n    this.disposables.push(\n      // when local 'user' changes are made, send them to the server\n      // or stash them locally in offline mode\n      this.store.listen(\n        ({ changes }) => {\n          if (this.didCancel?.()) return this.close();\n          this.debug(\"received store changes\", { changes });\n          this.push(changes);\n        },\n        { source: \"user\", scope: \"document\" }\n      ),\n      // when the server sends us events, handle them\n      this.socket.onReceiveMessage((msg) => {\n        if (this.didCancel?.()) return this.close();\n        this.debug(\"received message from server\", msg);\n        this.handleServerEvent(msg);\n        if (!didLoad) {\n          didLoad = true;\n          config.onLoad(this);\n        }\n      }),\n      // handle switching between online and offline\n      this.socket.onStatusChange((ev) => {\n        if (this.didCancel?.()) return this.close();\n        this.debug(\"socket status changed\", ev.status);\n        if (ev.status === \"online\") {\n          this.sendConnectMessage();\n        } else {\n          this.resetConnection();\n          if (ev.status === \"error\") {\n            didLoad = true;\n            config.onSyncError(ev.reason);\n            this.close();\n          }\n        }\n      }),\n      // Send a ping every PING_INTERVAL ms while online\n      (0,_interval_mjs__WEBPACK_IMPORTED_MODULE_5__.interval)(() => {\n        if (this.didCancel?.()) return this.close();\n        this.debug(\"ping loop\", { isConnectedToRoom: this.isConnectedToRoom });\n        if (!this.isConnectedToRoom) return;\n        try {\n          this.socket.sendMessage({ type: \"ping\" });\n        } catch (error) {\n          console.warn(\"ping failed, resetting\", error);\n          this.resetConnection();\n        }\n      }, PING_INTERVAL),\n      // Check the server connection health, reset the connection if needed\n      (0,_interval_mjs__WEBPACK_IMPORTED_MODULE_5__.interval)(() => {\n        if (this.didCancel?.()) return this.close();\n        this.debug(\"health check loop\", { isConnectedToRoom: this.isConnectedToRoom });\n        if (!this.isConnectedToRoom) return;\n        const timeSinceLastServerInteraction = Date.now() - this.lastServerInteractionTimestamp;\n        if (timeSinceLastServerInteraction < MAX_TIME_TO_WAIT_FOR_SERVER_INTERACTION_BEFORE_RESETTING_CONNECTION) {\n          this.debug(\"health check passed\", { timeSinceLastServerInteraction });\n          return;\n        }\n        console.warn(`Haven't heard from the server in a while, resetting connection...`);\n        this.resetConnection();\n      }, PING_INTERVAL * 2)\n    );\n    if (this.presenceState) {\n      this.disposables.push(\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"pushPresence\", () => {\n          if (this.didCancel?.()) return this.close();\n          this.pushPresence(this.presenceState.get());\n        })\n      );\n    }\n    if (this.socket.connectionStatus === \"online\") {\n      this.sendConnectMessage();\n    }\n  }\n  latestConnectRequestId = null;\n  /**\n   * This is the first message that is sent over a newly established socket connection. And we need\n   * to wait for the response before this client can be used.\n   */\n  sendConnectMessage() {\n    if (this.isConnectedToRoom) {\n      console.error(\"sendConnectMessage called while already connected\");\n      return;\n    }\n    this.debug(\"sending connect message\");\n    this.latestConnectRequestId = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.uniqueId)();\n    this.socket.sendMessage({\n      type: \"connect\",\n      connectRequestId: this.latestConnectRequestId,\n      schema: this.store.schema.serialize(),\n      protocolVersion: (0,_protocol_mjs__WEBPACK_IMPORTED_MODULE_6__.getTlsyncProtocolVersion)(),\n      lastServerClock: this.lastServerClock\n    });\n  }\n  /** Switch to offline mode */\n  resetConnection(hard = false) {\n    this.debug(\"resetting connection\");\n    if (hard) {\n      this.lastServerClock = 0;\n    }\n    this.store.mergeRemoteChanges(() => {\n      this.store.remove(Object.keys(this.store.serialize(\"presence\")));\n    });\n    this.lastPushedPresenceState = null;\n    this.isConnectedToRoom = false;\n    this.pendingPushRequests = [];\n    this.incomingDiffBuffer = [];\n    if (this.socket.connectionStatus === \"online\") {\n      this.socket.restart();\n    }\n  }\n  /**\n   * Invoked when the socket connection comes online, either for the first time or as the result of\n   * a reconnect. The goal is to rebase on the server's state and fire off a new push request for\n   * any local changes that were made while offline.\n   */\n  didReconnect(event) {\n    this.debug(\"did reconnect\", event);\n    if (event.connectRequestId !== this.latestConnectRequestId) {\n      return;\n    }\n    this.latestConnectRequestId = null;\n    if (this.isConnectedToRoom) {\n      console.error(\"didReconnect called while already connected\");\n      this.resetConnection(true);\n      return;\n    }\n    if (this.pendingPushRequests.length > 0) {\n      console.error(\"pendingPushRequests should already be empty when we reconnect\");\n      this.resetConnection(true);\n      return;\n    }\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      const stashedChanges = this.speculativeChanges;\n      this.speculativeChanges = { added: {}, updated: {}, removed: {} };\n      this.store.mergeRemoteChanges(() => {\n        const wipeDiff = {};\n        const wipeAll = event.hydrationType === \"wipe_all\";\n        if (!wipeAll) {\n          this.store.applyDiff((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(stashedChanges), { runCallbacks: false });\n        }\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.objectMapEntries)(this.store.serialize(\"all\"))) {\n          if (wipeAll && this.store.scopedTypes.document.has(record.typeName) || record.typeName === this.presenceType) {\n            wipeDiff[id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Remove];\n          }\n        }\n        this.applyNetworkDiff({ ...wipeDiff, ...event.diff }, true);\n        this.isConnectedToRoom = true;\n        const speculativeChanges = this.store.filterChangesByScope(\n          this.store.extractingChanges(() => {\n            this.store.applyDiff(stashedChanges);\n          }),\n          \"document\"\n        );\n        if (speculativeChanges) this.push(speculativeChanges);\n      });\n      this.store.ensureStoreIsUsable();\n      this.onAfterConnect?.(this, { isReadonly: event.isReadonly });\n    });\n    this.lastServerClock = event.serverClock;\n  }\n  incomingDiffBuffer = [];\n  /** Handle events received from the server */\n  handleServerEvent(event) {\n    this.debug(\"received server event\", event);\n    this.lastServerInteractionTimestamp = Date.now();\n    switch (event.type) {\n      case \"connect\":\n        this.didReconnect(event);\n        break;\n      case \"patch\":\n      case \"push_result\":\n        if (!this.isConnectedToRoom) break;\n        this.incomingDiffBuffer.push(event);\n        this.scheduleRebase();\n        break;\n      case \"data\":\n        if (!this.isConnectedToRoom) break;\n        this.incomingDiffBuffer.push(...event.data);\n        this.scheduleRebase();\n        break;\n      case \"incompatibility_error\":\n        console.error(\"incompatibility error is legacy and should no longer be sent by the server\");\n        break;\n      case \"pong\":\n        break;\n      default:\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.exhaustiveSwitchError)(event);\n    }\n  }\n  close() {\n    this.debug(\"closing\");\n    this.disposables.forEach((dispose) => dispose());\n    this.flushPendingPushRequests.cancel?.();\n    this.scheduleRebase.cancel?.();\n  }\n  lastPushedPresenceState = null;\n  pushPresence(nextPresence) {\n    this.store._flushHistory();\n    if (!this.isConnectedToRoom) {\n      return;\n    }\n    let presence = void 0;\n    if (!this.lastPushedPresenceState && nextPresence) {\n      presence = [_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Put, nextPresence];\n    } else if (this.lastPushedPresenceState && nextPresence) {\n      const diff = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.diffRecord)(this.lastPushedPresenceState, nextPresence);\n      if (diff) {\n        presence = [_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Patch, diff];\n      }\n    }\n    if (!presence) return;\n    this.lastPushedPresenceState = nextPresence;\n    const lastPush = this.pendingPushRequests.at(-1);\n    if (lastPush && !lastPush.sent && !lastPush.request.presence) {\n      lastPush.request.presence = presence;\n      return;\n    }\n    const req = {\n      type: \"push\",\n      clientClock: this.clientClock++,\n      presence\n    };\n    if (req) {\n      this.pendingPushRequests.push({ request: req, sent: false });\n      this.flushPendingPushRequests();\n    }\n  }\n  /** Push a change to the server, or stash it locally if we're offline */\n  push(change) {\n    this.debug(\"push\", change);\n    const diff = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.getNetworkDiff)(change);\n    if (!diff) return;\n    this.speculativeChanges = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffs)([this.speculativeChanges, change]);\n    if (!this.isConnectedToRoom) {\n      return;\n    }\n    const pushRequest = {\n      type: \"push\",\n      diff,\n      clientClock: this.clientClock++\n    };\n    this.pendingPushRequests.push({ request: pushRequest, sent: false });\n    this.flushPendingPushRequests();\n  }\n  /** Send any unsent push requests to the server */\n  flushPendingPushRequests = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.fpsThrottle)(() => {\n    this.debug(\"flushing pending push requests\", {\n      isConnectedToRoom: this.isConnectedToRoom,\n      pendingPushRequests: this.pendingPushRequests\n    });\n    if (!this.isConnectedToRoom || this.store.isPossiblyCorrupted()) {\n      return;\n    }\n    for (const pendingPushRequest of this.pendingPushRequests) {\n      if (!pendingPushRequest.sent) {\n        if (this.socket.connectionStatus !== \"online\") {\n          return;\n        }\n        this.socket.sendMessage(pendingPushRequest.request);\n        pendingPushRequest.sent = true;\n      }\n    }\n  });\n  /**\n   * Applies a 'network' diff to the store this does value-based equality checking so that if the\n   * data is the same (as opposed to merely identical with ===), then no change is made and no\n   * changes will be propagated back to store listeners\n   */\n  applyNetworkDiff(diff, runCallbacks) {\n    this.debug(\"applyNetworkDiff\", diff);\n    const changes = { added: {}, updated: {}, removed: {} };\n    let hasChanges = false;\n    for (const [id, op] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.objectMapEntries)(diff)) {\n      if (op[0] === _diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Put) {\n        const existing = this.store.get(id);\n        if (existing && !lodash_isequal__WEBPACK_IMPORTED_MODULE_3__(existing, op[1])) {\n          hasChanges = true;\n          changes.updated[id] = [existing, op[1]];\n        } else {\n          hasChanges = true;\n          changes.added[id] = op[1];\n        }\n      } else if (op[0] === _diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Patch) {\n        const record = this.store.get(id);\n        if (!record) {\n          continue;\n        }\n        const patched = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_4__.applyObjectDiff)(record, op[1]);\n        hasChanges = true;\n        changes.updated[id] = [record, patched];\n      } else if (op[0] === _diff_mjs__WEBPACK_IMPORTED_MODULE_4__.RecordOpType.Remove) {\n        if (this.store.has(id)) {\n          hasChanges = true;\n          changes.removed[id] = this.store.get(id);\n        }\n      }\n    }\n    if (hasChanges) {\n      this.store.applyDiff(changes, { runCallbacks });\n    }\n  }\n  // eslint-disable-next-line local/prefer-class-methods\n  rebase = () => {\n    this.store._flushHistory();\n    if (this.incomingDiffBuffer.length === 0) return;\n    const diffs = this.incomingDiffBuffer;\n    this.incomingDiffBuffer = [];\n    try {\n      this.store.mergeRemoteChanges(() => {\n        this.store.applyDiff((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(this.speculativeChanges), { runCallbacks: false });\n        for (const diff of diffs) {\n          if (diff.type === \"patch\") {\n            this.applyNetworkDiff(diff.diff, true);\n            continue;\n          }\n          if (this.pendingPushRequests.length === 0) {\n            throw new Error(\"Received push_result but there are no pending push requests\");\n          }\n          if (this.pendingPushRequests[0].request.clientClock !== diff.clientClock) {\n            throw new Error(\n              \"Received push_result for a push request that is not at the front of the queue\"\n            );\n          }\n          if (diff.action === \"discard\") {\n            this.pendingPushRequests.shift();\n          } else if (diff.action === \"commit\") {\n            const { request } = this.pendingPushRequests.shift();\n            if (\"diff\" in request && request.diff) {\n              this.applyNetworkDiff(request.diff, true);\n            }\n          } else {\n            this.applyNetworkDiff(diff.action.rebaseWithDiff, true);\n            this.pendingPushRequests.shift();\n          }\n        }\n        try {\n          this.speculativeChanges = this.store.extractingChanges(() => {\n            for (const { request } of this.pendingPushRequests) {\n              if (!(\"diff\" in request) || !request.diff) continue;\n              this.applyNetworkDiff(request.diff, true);\n            }\n          });\n        } catch (e) {\n          console.error(e);\n          this.speculativeChanges = { added: {}, updated: {}, removed: {} };\n          this.resetConnection();\n        }\n      });\n      this.store.ensureStoreIsUsable();\n      this.lastServerClock = diffs.at(-1)?.serverClock ?? this.lastServerClock;\n    } catch (e) {\n      console.error(e);\n      this.store.ensureStoreIsUsable();\n      this.resetConnection();\n    }\n  };\n  scheduleRebase = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.fpsThrottle)(this.rebase);\n}\n\n//# sourceMappingURL=TLSyncClient.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1RMU3luY0NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUl6QjtBQUN3RTtBQUMxRDtBQUNrRDtBQUM3QztBQUdsQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsaURBQWlELFNBQVM7QUFDMUQ7QUFDQSxTQUFTO0FBQ1QsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU0sdURBQVE7QUFDZDtBQUNBLGtDQUFrQywyQ0FBMkM7QUFDN0U7QUFDQTtBQUNBLG9DQUFvQyxjQUFjO0FBQ2xELFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNLHVEQUFRO0FBQ2Q7QUFDQSwwQ0FBMEMsMkNBQTJDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnQ0FBZ0M7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBSztBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1REFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1RUFBd0I7QUFDL0M7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVEQUFRO0FBQ1o7QUFDQSxrQ0FBa0MsU0FBUyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFrQixvQkFBb0IscUJBQXFCO0FBQzFGO0FBQ0EsbUNBQW1DLCtEQUFnQjtBQUNuRDtBQUNBLDRCQUE0QixtREFBWTtBQUN4QztBQUNBO0FBQ0EsZ0NBQWdDLDRCQUE0QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxvQ0FBb0MsOEJBQThCO0FBQ2xFLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFZO0FBQzlCLE1BQU07QUFDTixtQkFBbUIscURBQVU7QUFDN0I7QUFDQSxvQkFBb0IsbURBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDJCQUEyQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIseURBQWM7QUFDL0I7QUFDQSw4QkFBOEIsZ0VBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsbUNBQW1DO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFNBQVMsYUFBYTtBQUM1QztBQUNBLDJCQUEyQiwrREFBZ0I7QUFDM0Msb0JBQW9CLG1EQUFZO0FBQ2hDO0FBQ0EseUJBQXlCLDJDQUFPO0FBQ2hDO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtQkFBbUIsbURBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMERBQWU7QUFDdkM7QUFDQTtBQUNBLFFBQVEsbUJBQW1CLG1EQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGNBQWM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQWtCLDZCQUE2QixxQkFBcUI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsVUFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsVUFBVTtBQUNWO0FBQ0Esc0NBQXNDLFNBQVMsYUFBYTtBQUM1RDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwREFBVztBQUM5QjtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMtY29yZS9kaXN0LWVzbS9saWIvVExTeW5jQ2xpZW50Lm1qcz8xMzcwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWN0LCB0cmFuc2FjdCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQge1xuICByZXZlcnNlUmVjb3Jkc0RpZmYsXG4gIHNxdWFzaFJlY29yZERpZmZzXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBleGhhdXN0aXZlU3dpdGNoRXJyb3IsIGZwc1Rocm90dGxlLCBvYmplY3RNYXBFbnRyaWVzLCB1bmlxdWVJZCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwibG9kYXNoLmlzZXF1YWxcIjtcbmltcG9ydCB7IFJlY29yZE9wVHlwZSwgYXBwbHlPYmplY3REaWZmLCBkaWZmUmVjb3JkLCBnZXROZXR3b3JrRGlmZiB9IGZyb20gXCIuL2RpZmYubWpzXCI7XG5pbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL2ludGVydmFsLm1qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0VGxzeW5jUHJvdG9jb2xWZXJzaW9uXG59IGZyb20gXCIuL3Byb3RvY29sLm1qc1wiO1xuY29uc3QgVExTeW5jRXJyb3JDbG9zZUV2ZW50Q29kZSA9IDQwOTk7XG5jb25zdCBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24gPSB7XG4gIE5PVF9GT1VORDogXCJOT1RfRk9VTkRcIixcbiAgRk9SQklEREVOOiBcIkZPUkJJRERFTlwiLFxuICBOT1RfQVVUSEVOVElDQVRFRDogXCJOT1RfQVVUSEVOVElDQVRFRFwiLFxuICBVTktOT1dOX0VSUk9SOiBcIlVOS05PV05fRVJST1JcIixcbiAgQ0xJRU5UX1RPT19PTEQ6IFwiQ0xJRU5UX1RPT19PTERcIixcbiAgU0VSVkVSX1RPT19PTEQ6IFwiU0VSVkVSX1RPT19PTERcIixcbiAgSU5WQUxJRF9SRUNPUkQ6IFwiSU5WQUxJRF9SRUNPUkRcIlxufTtcbmNvbnN0IFBJTkdfSU5URVJWQUwgPSA1ZTM7XG5jb25zdCBNQVhfVElNRV9UT19XQUlUX0ZPUl9TRVJWRVJfSU5URVJBQ1RJT05fQkVGT1JFX1JFU0VUVElOR19DT05ORUNUSU9OID0gUElOR19JTlRFUlZBTCAqIDI7XG5jbGFzcyBUTFN5bmNDbGllbnQge1xuICAvKiogVGhlIGxhc3QgY2xvY2sgdGltZSBmcm9tIHRoZSBtb3N0IHJlY2VudCBzZXJ2ZXIgdXBkYXRlICovXG4gIGxhc3RTZXJ2ZXJDbG9jayA9IDA7XG4gIGxhc3RTZXJ2ZXJJbnRlcmFjdGlvblRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIC8qKiBUaGUgcXVldWUgb2YgaW4tZmxpZ2h0IHB1c2ggcmVxdWVzdHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlciAqL1xuICBwZW5kaW5nUHVzaFJlcXVlc3RzID0gW107XG4gIC8qKlxuICAgKiBUaGUgZGlmZiBvZiAndW5jb25maXJtZWQnLCAnb3B0aW1pc3RpYycgY2hhbmdlcyB0aGF0IGhhdmUgYmVlbiBtYWRlIGxvY2FsbHkgYnkgdGhlIHVzZXIgaWYgd2VcbiAgICogdGFrZSB0aGlzIGRpZmYsIHJldmVyc2UgaXQsIGFuZCBhcHBseSB0aGF0IHRvIHRoZSBzdG9yZSwgb3VyIHN0b3JlIHdpbGwgbWF0Y2ggZXhhY3RseSB0aGUgbW9zdFxuICAgKiByZWNlbnQgc3RhdGUgb2YgdGhlIHNlcnZlciB0aGF0IHdlIGtub3cgYWJvdXRcbiAgICovXG4gIHNwZWN1bGF0aXZlQ2hhbmdlcyA9IHtcbiAgICBhZGRlZDoge30sXG4gICAgdXBkYXRlZDoge30sXG4gICAgcmVtb3ZlZDoge31cbiAgfTtcbiAgZGlzcG9zYWJsZXMgPSBbXTtcbiAgc3RvcmU7XG4gIHNvY2tldDtcbiAgcHJlc2VuY2VTdGF0ZTtcbiAgLy8gaXNPbmxpbmUgaXMgdHJ1ZSB3aGVuIHdlIGhhdmUgYW4gb3BlbiBzb2NrZXQgY29ubmVjdGlvbiBhbmQgd2UgaGF2ZVxuICAvLyBlc3RhYmxpc2hlZCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyIHJvb20gKGkuZS4gd2UgaGF2ZSByZWNlaXZlZCBhICdjb25uZWN0JyBtZXNzYWdlKVxuICBpc0Nvbm5lY3RlZFRvUm9vbSA9IGZhbHNlO1xuICAvKipcbiAgICogVGhlIGNsaWVudCBjbG9jayBpcyBlc3NlbnRpYWxseSBhIGNvdW50ZXIgZm9yIHB1c2ggcmVxdWVzdHMgRWFjaCB0aW1lIGEgcHVzaCByZXF1ZXN0IGlzIGNyZWF0ZWRcbiAgICogdGhlIGNsb2NrIGlzIGluY3JlbWVudGVkLiBUaGlzIGNsb2NrIGlzIHNlbnQgd2l0aCB0aGUgcHVzaCByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIsIGFuZCB0aGVcbiAgICogc2VydmVyIHJldHVybnMgaXQgd2l0aCB0aGUgcmVzcG9uc2Ugc28gdGhhdCB3ZSBjYW4gbWF0Y2ggdXAgdGhlIHJlc3BvbnNlIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIFRoZSBjbG9jayBtYXkgYWxzbyBiZSB1c2VkIGF0IG9uZSBwb2ludCBpbiB0aGUgZnV0dXJlIHRvIGFsbG93IHRoZSBjbGllbnQgdG8gcmUtc2VuZCBwdXNoXG4gICAqIHJlcXVlc3RzIGlkZW1wb3RlbnRseSAoaS5lLiB0aGUgc2VydmVyIHdpbGwga2VlcCB0cmFjayBvZiBlYWNoIGNsaWVudCdzIGNsb2NrIGFuZCBub3QgZXhlY3V0ZVxuICAgKiByZXF1ZXN0cyBpdCBoYXMgYWxyZWFkeSBoYW5kbGVkKSwgYnV0IGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcgdGhpcyBpcyBuZWl0aGVyIG5lZWRlZCBub3JcbiAgICogaW1wbGVtZW50ZWQuXG4gICAqL1xuICBjbGllbnRDbG9jayA9IDA7XG4gIC8qKlxuICAgKiBDYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgYSBjb25uZWN0IGFjY2VwdGFuY2UgaGFzIGJlZW4gcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZCBVc2UgdGhpcyB0byBtYWtlXG4gICAqIGFueSBjaGFuZ2VzIHRvIHRoZSBzdG9yZSB0aGF0IGFyZSByZXF1aXJlZCB0byBrZWVwIGl0IG9wZXJhdGlvbmFsXG4gICAqL1xuICBvbkFmdGVyQ29ubmVjdDtcbiAgaXNEZWJ1Z2dpbmcgPSBmYWxzZTtcbiAgZGVidWcoLi4uYXJncykge1xuICAgIGlmICh0aGlzLmlzRGVidWdnaW5nKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuICBwcmVzZW5jZVR5cGU7XG4gIGRpZENhbmNlbDtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5kaWRDYW5jZWwgPSBjb25maWcuZGlkQ2FuY2VsO1xuICAgIHRoaXMucHJlc2VuY2VUeXBlID0gY29uZmlnLnN0b3JlLnNjb3BlZFR5cGVzLnByZXNlbmNlLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgO1xuICAgICAgd2luZG93LnRsc3luYyA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuc3RvcmUgPSBjb25maWcuc3RvcmU7XG4gICAgdGhpcy5zb2NrZXQgPSBjb25maWcuc29ja2V0O1xuICAgIHRoaXMub25BZnRlckNvbm5lY3QgPSBjb25maWcub25BZnRlckNvbm5lY3Q7XG4gICAgbGV0IGRpZExvYWQgPSBmYWxzZTtcbiAgICB0aGlzLnByZXNlbmNlU3RhdGUgPSBjb25maWcucHJlc2VuY2U7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgLy8gd2hlbiBsb2NhbCAndXNlcicgY2hhbmdlcyBhcmUgbWFkZSwgc2VuZCB0aGVtIHRvIHRoZSBzZXJ2ZXJcbiAgICAgIC8vIG9yIHN0YXNoIHRoZW0gbG9jYWxseSBpbiBvZmZsaW5lIG1vZGVcbiAgICAgIHRoaXMuc3RvcmUubGlzdGVuKFxuICAgICAgICAoeyBjaGFuZ2VzIH0pID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5kaWRDYW5jZWw/LigpKSByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuZGVidWcoXCJyZWNlaXZlZCBzdG9yZSBjaGFuZ2VzXCIsIHsgY2hhbmdlcyB9KTtcbiAgICAgICAgICB0aGlzLnB1c2goY2hhbmdlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgc291cmNlOiBcInVzZXJcIiwgc2NvcGU6IFwiZG9jdW1lbnRcIiB9XG4gICAgICApLFxuICAgICAgLy8gd2hlbiB0aGUgc2VydmVyIHNlbmRzIHVzIGV2ZW50cywgaGFuZGxlIHRoZW1cbiAgICAgIHRoaXMuc29ja2V0Lm9uUmVjZWl2ZU1lc3NhZ2UoKG1zZykgPT4ge1xuICAgICAgICBpZiAodGhpcy5kaWRDYW5jZWw/LigpKSByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmRlYnVnKFwicmVjZWl2ZWQgbWVzc2FnZSBmcm9tIHNlcnZlclwiLCBtc2cpO1xuICAgICAgICB0aGlzLmhhbmRsZVNlcnZlckV2ZW50KG1zZyk7XG4gICAgICAgIGlmICghZGlkTG9hZCkge1xuICAgICAgICAgIGRpZExvYWQgPSB0cnVlO1xuICAgICAgICAgIGNvbmZpZy5vbkxvYWQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgLy8gaGFuZGxlIHN3aXRjaGluZyBiZXR3ZWVuIG9ubGluZSBhbmQgb2ZmbGluZVxuICAgICAgdGhpcy5zb2NrZXQub25TdGF0dXNDaGFuZ2UoKGV2KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmRpZENhbmNlbD8uKCkpIHJldHVybiB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuZGVidWcoXCJzb2NrZXQgc3RhdHVzIGNoYW5nZWRcIiwgZXYuc3RhdHVzKTtcbiAgICAgICAgaWYgKGV2LnN0YXR1cyA9PT0gXCJvbmxpbmVcIikge1xuICAgICAgICAgIHRoaXMuc2VuZENvbm5lY3RNZXNzYWdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXNldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBpZiAoZXYuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIGRpZExvYWQgPSB0cnVlO1xuICAgICAgICAgICAgY29uZmlnLm9uU3luY0Vycm9yKGV2LnJlYXNvbik7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIC8vIFNlbmQgYSBwaW5nIGV2ZXJ5IFBJTkdfSU5URVJWQUwgbXMgd2hpbGUgb25saW5lXG4gICAgICBpbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmRpZENhbmNlbD8uKCkpIHJldHVybiB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuZGVidWcoXCJwaW5nIGxvb3BcIiwgeyBpc0Nvbm5lY3RlZFRvUm9vbTogdGhpcy5pc0Nvbm5lY3RlZFRvUm9vbSB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkVG9Sb29tKSByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5zb2NrZXQuc2VuZE1lc3NhZ2UoeyB0eXBlOiBcInBpbmdcIiB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJwaW5nIGZhaWxlZCwgcmVzZXR0aW5nXCIsIGVycm9yKTtcbiAgICAgICAgICB0aGlzLnJlc2V0Q29ubmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9LCBQSU5HX0lOVEVSVkFMKSxcbiAgICAgIC8vIENoZWNrIHRoZSBzZXJ2ZXIgY29ubmVjdGlvbiBoZWFsdGgsIHJlc2V0IHRoZSBjb25uZWN0aW9uIGlmIG5lZWRlZFxuICAgICAgaW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5kaWRDYW5jZWw/LigpKSByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmRlYnVnKFwiaGVhbHRoIGNoZWNrIGxvb3BcIiwgeyBpc0Nvbm5lY3RlZFRvUm9vbTogdGhpcy5pc0Nvbm5lY3RlZFRvUm9vbSB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkVG9Sb29tKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RTZXJ2ZXJJbnRlcmFjdGlvbiA9IERhdGUubm93KCkgLSB0aGlzLmxhc3RTZXJ2ZXJJbnRlcmFjdGlvblRpbWVzdGFtcDtcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RTZXJ2ZXJJbnRlcmFjdGlvbiA8IE1BWF9USU1FX1RPX1dBSVRfRk9SX1NFUlZFUl9JTlRFUkFDVElPTl9CRUZPUkVfUkVTRVRUSU5HX0NPTk5FQ1RJT04pIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKFwiaGVhbHRoIGNoZWNrIHBhc3NlZFwiLCB7IHRpbWVTaW5jZUxhc3RTZXJ2ZXJJbnRlcmFjdGlvbiB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuKGBIYXZlbid0IGhlYXJkIGZyb20gdGhlIHNlcnZlciBpbiBhIHdoaWxlLCByZXNldHRpbmcgY29ubmVjdGlvbi4uLmApO1xuICAgICAgICB0aGlzLnJlc2V0Q29ubmVjdGlvbigpO1xuICAgICAgfSwgUElOR19JTlRFUlZBTCAqIDIpXG4gICAgKTtcbiAgICBpZiAodGhpcy5wcmVzZW5jZVN0YXRlKSB7XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2goXG4gICAgICAgIHJlYWN0KFwicHVzaFByZXNlbmNlXCIsICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5kaWRDYW5jZWw/LigpKSByZXR1cm4gdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMucHVzaFByZXNlbmNlKHRoaXMucHJlc2VuY2VTdGF0ZS5nZXQoKSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQuY29ubmVjdGlvblN0YXR1cyA9PT0gXCJvbmxpbmVcIikge1xuICAgICAgdGhpcy5zZW5kQ29ubmVjdE1lc3NhZ2UoKTtcbiAgICB9XG4gIH1cbiAgbGF0ZXN0Q29ubmVjdFJlcXVlc3RJZCA9IG51bGw7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBmaXJzdCBtZXNzYWdlIHRoYXQgaXMgc2VudCBvdmVyIGEgbmV3bHkgZXN0YWJsaXNoZWQgc29ja2V0IGNvbm5lY3Rpb24uIEFuZCB3ZSBuZWVkXG4gICAqIHRvIHdhaXQgZm9yIHRoZSByZXNwb25zZSBiZWZvcmUgdGhpcyBjbGllbnQgY2FuIGJlIHVzZWQuXG4gICAqL1xuICBzZW5kQ29ubmVjdE1lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuaXNDb25uZWN0ZWRUb1Jvb20pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJzZW5kQ29ubmVjdE1lc3NhZ2UgY2FsbGVkIHdoaWxlIGFscmVhZHkgY29ubmVjdGVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRlYnVnKFwic2VuZGluZyBjb25uZWN0IG1lc3NhZ2VcIik7XG4gICAgdGhpcy5sYXRlc3RDb25uZWN0UmVxdWVzdElkID0gdW5pcXVlSWQoKTtcbiAgICB0aGlzLnNvY2tldC5zZW5kTWVzc2FnZSh7XG4gICAgICB0eXBlOiBcImNvbm5lY3RcIixcbiAgICAgIGNvbm5lY3RSZXF1ZXN0SWQ6IHRoaXMubGF0ZXN0Q29ubmVjdFJlcXVlc3RJZCxcbiAgICAgIHNjaGVtYTogdGhpcy5zdG9yZS5zY2hlbWEuc2VyaWFsaXplKCksXG4gICAgICBwcm90b2NvbFZlcnNpb246IGdldFRsc3luY1Byb3RvY29sVmVyc2lvbigpLFxuICAgICAgbGFzdFNlcnZlckNsb2NrOiB0aGlzLmxhc3RTZXJ2ZXJDbG9ja1xuICAgIH0pO1xuICB9XG4gIC8qKiBTd2l0Y2ggdG8gb2ZmbGluZSBtb2RlICovXG4gIHJlc2V0Q29ubmVjdGlvbihoYXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmRlYnVnKFwicmVzZXR0aW5nIGNvbm5lY3Rpb25cIik7XG4gICAgaWYgKGhhcmQpIHtcbiAgICAgIHRoaXMubGFzdFNlcnZlckNsb2NrID0gMDtcbiAgICB9XG4gICAgdGhpcy5zdG9yZS5tZXJnZVJlbW90ZUNoYW5nZXMoKCkgPT4ge1xuICAgICAgdGhpcy5zdG9yZS5yZW1vdmUoT2JqZWN0LmtleXModGhpcy5zdG9yZS5zZXJpYWxpemUoXCJwcmVzZW5jZVwiKSkpO1xuICAgIH0pO1xuICAgIHRoaXMubGFzdFB1c2hlZFByZXNlbmNlU3RhdGUgPSBudWxsO1xuICAgIHRoaXMuaXNDb25uZWN0ZWRUb1Jvb20gPSBmYWxzZTtcbiAgICB0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHMgPSBbXTtcbiAgICB0aGlzLmluY29taW5nRGlmZkJ1ZmZlciA9IFtdO1xuICAgIGlmICh0aGlzLnNvY2tldC5jb25uZWN0aW9uU3RhdHVzID09PSBcIm9ubGluZVwiKSB7XG4gICAgICB0aGlzLnNvY2tldC5yZXN0YXJ0KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIHNvY2tldCBjb25uZWN0aW9uIGNvbWVzIG9ubGluZSwgZWl0aGVyIGZvciB0aGUgZmlyc3QgdGltZSBvciBhcyB0aGUgcmVzdWx0IG9mXG4gICAqIGEgcmVjb25uZWN0LiBUaGUgZ29hbCBpcyB0byByZWJhc2Ugb24gdGhlIHNlcnZlcidzIHN0YXRlIGFuZCBmaXJlIG9mZiBhIG5ldyBwdXNoIHJlcXVlc3QgZm9yXG4gICAqIGFueSBsb2NhbCBjaGFuZ2VzIHRoYXQgd2VyZSBtYWRlIHdoaWxlIG9mZmxpbmUuXG4gICAqL1xuICBkaWRSZWNvbm5lY3QoZXZlbnQpIHtcbiAgICB0aGlzLmRlYnVnKFwiZGlkIHJlY29ubmVjdFwiLCBldmVudCk7XG4gICAgaWYgKGV2ZW50LmNvbm5lY3RSZXF1ZXN0SWQgIT09IHRoaXMubGF0ZXN0Q29ubmVjdFJlcXVlc3RJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhdGVzdENvbm5lY3RSZXF1ZXN0SWQgPSBudWxsO1xuICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkVG9Sb29tKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiZGlkUmVjb25uZWN0IGNhbGxlZCB3aGlsZSBhbHJlYWR5IGNvbm5lY3RlZFwiKTtcbiAgICAgIHRoaXMucmVzZXRDb25uZWN0aW9uKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5wZW5kaW5nUHVzaFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJwZW5kaW5nUHVzaFJlcXVlc3RzIHNob3VsZCBhbHJlYWR5IGJlIGVtcHR5IHdoZW4gd2UgcmVjb25uZWN0XCIpO1xuICAgICAgdGhpcy5yZXNldENvbm5lY3Rpb24odHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXNoZWRDaGFuZ2VzID0gdGhpcy5zcGVjdWxhdGl2ZUNoYW5nZXM7XG4gICAgICB0aGlzLnNwZWN1bGF0aXZlQ2hhbmdlcyA9IHsgYWRkZWQ6IHt9LCB1cGRhdGVkOiB7fSwgcmVtb3ZlZDoge30gfTtcbiAgICAgIHRoaXMuc3RvcmUubWVyZ2VSZW1vdGVDaGFuZ2VzKCgpID0+IHtcbiAgICAgICAgY29uc3Qgd2lwZURpZmYgPSB7fTtcbiAgICAgICAgY29uc3Qgd2lwZUFsbCA9IGV2ZW50Lmh5ZHJhdGlvblR5cGUgPT09IFwid2lwZV9hbGxcIjtcbiAgICAgICAgaWYgKCF3aXBlQWxsKSB7XG4gICAgICAgICAgdGhpcy5zdG9yZS5hcHBseURpZmYocmV2ZXJzZVJlY29yZHNEaWZmKHN0YXNoZWRDaGFuZ2VzKSwgeyBydW5DYWxsYmFja3M6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIG9iamVjdE1hcEVudHJpZXModGhpcy5zdG9yZS5zZXJpYWxpemUoXCJhbGxcIikpKSB7XG4gICAgICAgICAgaWYgKHdpcGVBbGwgJiYgdGhpcy5zdG9yZS5zY29wZWRUeXBlcy5kb2N1bWVudC5oYXMocmVjb3JkLnR5cGVOYW1lKSB8fCByZWNvcmQudHlwZU5hbWUgPT09IHRoaXMucHJlc2VuY2VUeXBlKSB7XG4gICAgICAgICAgICB3aXBlRGlmZltpZF0gPSBbUmVjb3JkT3BUeXBlLlJlbW92ZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBwbHlOZXR3b3JrRGlmZih7IC4uLndpcGVEaWZmLCAuLi5ldmVudC5kaWZmIH0sIHRydWUpO1xuICAgICAgICB0aGlzLmlzQ29ubmVjdGVkVG9Sb29tID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc3BlY3VsYXRpdmVDaGFuZ2VzID0gdGhpcy5zdG9yZS5maWx0ZXJDaGFuZ2VzQnlTY29wZShcbiAgICAgICAgICB0aGlzLnN0b3JlLmV4dHJhY3RpbmdDaGFuZ2VzKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUuYXBwbHlEaWZmKHN0YXNoZWRDaGFuZ2VzKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBcImRvY3VtZW50XCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHNwZWN1bGF0aXZlQ2hhbmdlcykgdGhpcy5wdXNoKHNwZWN1bGF0aXZlQ2hhbmdlcyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RvcmUuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgdGhpcy5vbkFmdGVyQ29ubmVjdD8uKHRoaXMsIHsgaXNSZWFkb25seTogZXZlbnQuaXNSZWFkb25seSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLmxhc3RTZXJ2ZXJDbG9jayA9IGV2ZW50LnNlcnZlckNsb2NrO1xuICB9XG4gIGluY29taW5nRGlmZkJ1ZmZlciA9IFtdO1xuICAvKiogSGFuZGxlIGV2ZW50cyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgKi9cbiAgaGFuZGxlU2VydmVyRXZlbnQoZXZlbnQpIHtcbiAgICB0aGlzLmRlYnVnKFwicmVjZWl2ZWQgc2VydmVyIGV2ZW50XCIsIGV2ZW50KTtcbiAgICB0aGlzLmxhc3RTZXJ2ZXJJbnRlcmFjdGlvblRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlIFwiY29ubmVjdFwiOlxuICAgICAgICB0aGlzLmRpZFJlY29ubmVjdChldmVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBhdGNoXCI6XG4gICAgICBjYXNlIFwicHVzaF9yZXN1bHRcIjpcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkVG9Sb29tKSBicmVhaztcbiAgICAgICAgdGhpcy5pbmNvbWluZ0RpZmZCdWZmZXIucHVzaChldmVudCk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVSZWJhc2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGF0YVwiOlxuICAgICAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWRUb1Jvb20pIGJyZWFrO1xuICAgICAgICB0aGlzLmluY29taW5nRGlmZkJ1ZmZlci5wdXNoKC4uLmV2ZW50LmRhdGEpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlUmViYXNlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImluY29tcGF0aWJpbGl0eV9lcnJvclwiOlxuICAgICAgICBjb25zb2xlLmVycm9yKFwiaW5jb21wYXRpYmlsaXR5IGVycm9yIGlzIGxlZ2FjeSBhbmQgc2hvdWxkIG5vIGxvbmdlciBiZSBzZW50IGJ5IHRoZSBzZXJ2ZXJcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBvbmdcIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBleGhhdXN0aXZlU3dpdGNoRXJyb3IoZXZlbnQpO1xuICAgIH1cbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLmRlYnVnKFwiY2xvc2luZ1wiKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmZvckVhY2goKGRpc3Bvc2UpID0+IGRpc3Bvc2UoKSk7XG4gICAgdGhpcy5mbHVzaFBlbmRpbmdQdXNoUmVxdWVzdHMuY2FuY2VsPy4oKTtcbiAgICB0aGlzLnNjaGVkdWxlUmViYXNlLmNhbmNlbD8uKCk7XG4gIH1cbiAgbGFzdFB1c2hlZFByZXNlbmNlU3RhdGUgPSBudWxsO1xuICBwdXNoUHJlc2VuY2UobmV4dFByZXNlbmNlKSB7XG4gICAgdGhpcy5zdG9yZS5fZmx1c2hIaXN0b3J5KCk7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkVG9Sb29tKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBwcmVzZW5jZSA9IHZvaWQgMDtcbiAgICBpZiAoIXRoaXMubGFzdFB1c2hlZFByZXNlbmNlU3RhdGUgJiYgbmV4dFByZXNlbmNlKSB7XG4gICAgICBwcmVzZW5jZSA9IFtSZWNvcmRPcFR5cGUuUHV0LCBuZXh0UHJlc2VuY2VdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5sYXN0UHVzaGVkUHJlc2VuY2VTdGF0ZSAmJiBuZXh0UHJlc2VuY2UpIHtcbiAgICAgIGNvbnN0IGRpZmYgPSBkaWZmUmVjb3JkKHRoaXMubGFzdFB1c2hlZFByZXNlbmNlU3RhdGUsIG5leHRQcmVzZW5jZSk7XG4gICAgICBpZiAoZGlmZikge1xuICAgICAgICBwcmVzZW5jZSA9IFtSZWNvcmRPcFR5cGUuUGF0Y2gsIGRpZmZdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXByZXNlbmNlKSByZXR1cm47XG4gICAgdGhpcy5sYXN0UHVzaGVkUHJlc2VuY2VTdGF0ZSA9IG5leHRQcmVzZW5jZTtcbiAgICBjb25zdCBsYXN0UHVzaCA9IHRoaXMucGVuZGluZ1B1c2hSZXF1ZXN0cy5hdCgtMSk7XG4gICAgaWYgKGxhc3RQdXNoICYmICFsYXN0UHVzaC5zZW50ICYmICFsYXN0UHVzaC5yZXF1ZXN0LnByZXNlbmNlKSB7XG4gICAgICBsYXN0UHVzaC5yZXF1ZXN0LnByZXNlbmNlID0gcHJlc2VuY2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgIHR5cGU6IFwicHVzaFwiLFxuICAgICAgY2xpZW50Q2xvY2s6IHRoaXMuY2xpZW50Q2xvY2srKyxcbiAgICAgIHByZXNlbmNlXG4gICAgfTtcbiAgICBpZiAocmVxKSB7XG4gICAgICB0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHMucHVzaCh7IHJlcXVlc3Q6IHJlcSwgc2VudDogZmFsc2UgfSk7XG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ1B1c2hSZXF1ZXN0cygpO1xuICAgIH1cbiAgfVxuICAvKiogUHVzaCBhIGNoYW5nZSB0byB0aGUgc2VydmVyLCBvciBzdGFzaCBpdCBsb2NhbGx5IGlmIHdlJ3JlIG9mZmxpbmUgKi9cbiAgcHVzaChjaGFuZ2UpIHtcbiAgICB0aGlzLmRlYnVnKFwicHVzaFwiLCBjaGFuZ2UpO1xuICAgIGNvbnN0IGRpZmYgPSBnZXROZXR3b3JrRGlmZihjaGFuZ2UpO1xuICAgIGlmICghZGlmZikgcmV0dXJuO1xuICAgIHRoaXMuc3BlY3VsYXRpdmVDaGFuZ2VzID0gc3F1YXNoUmVjb3JkRGlmZnMoW3RoaXMuc3BlY3VsYXRpdmVDaGFuZ2VzLCBjaGFuZ2VdKTtcbiAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWRUb1Jvb20pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcHVzaFJlcXVlc3QgPSB7XG4gICAgICB0eXBlOiBcInB1c2hcIixcbiAgICAgIGRpZmYsXG4gICAgICBjbGllbnRDbG9jazogdGhpcy5jbGllbnRDbG9jaysrXG4gICAgfTtcbiAgICB0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHMucHVzaCh7IHJlcXVlc3Q6IHB1c2hSZXF1ZXN0LCBzZW50OiBmYWxzZSB9KTtcbiAgICB0aGlzLmZsdXNoUGVuZGluZ1B1c2hSZXF1ZXN0cygpO1xuICB9XG4gIC8qKiBTZW5kIGFueSB1bnNlbnQgcHVzaCByZXF1ZXN0cyB0byB0aGUgc2VydmVyICovXG4gIGZsdXNoUGVuZGluZ1B1c2hSZXF1ZXN0cyA9IGZwc1Rocm90dGxlKCgpID0+IHtcbiAgICB0aGlzLmRlYnVnKFwiZmx1c2hpbmcgcGVuZGluZyBwdXNoIHJlcXVlc3RzXCIsIHtcbiAgICAgIGlzQ29ubmVjdGVkVG9Sb29tOiB0aGlzLmlzQ29ubmVjdGVkVG9Sb29tLFxuICAgICAgcGVuZGluZ1B1c2hSZXF1ZXN0czogdGhpcy5wZW5kaW5nUHVzaFJlcXVlc3RzXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkVG9Sb29tIHx8IHRoaXMuc3RvcmUuaXNQb3NzaWJseUNvcnJ1cHRlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgcGVuZGluZ1B1c2hSZXF1ZXN0IG9mIHRoaXMucGVuZGluZ1B1c2hSZXF1ZXN0cykge1xuICAgICAgaWYgKCFwZW5kaW5nUHVzaFJlcXVlc3Quc2VudCkge1xuICAgICAgICBpZiAodGhpcy5zb2NrZXQuY29ubmVjdGlvblN0YXR1cyAhPT0gXCJvbmxpbmVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvY2tldC5zZW5kTWVzc2FnZShwZW5kaW5nUHVzaFJlcXVlc3QucmVxdWVzdCk7XG4gICAgICAgIHBlbmRpbmdQdXNoUmVxdWVzdC5zZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogQXBwbGllcyBhICduZXR3b3JrJyBkaWZmIHRvIHRoZSBzdG9yZSB0aGlzIGRvZXMgdmFsdWUtYmFzZWQgZXF1YWxpdHkgY2hlY2tpbmcgc28gdGhhdCBpZiB0aGVcbiAgICogZGF0YSBpcyB0aGUgc2FtZSAoYXMgb3Bwb3NlZCB0byBtZXJlbHkgaWRlbnRpY2FsIHdpdGggPT09KSwgdGhlbiBubyBjaGFuZ2UgaXMgbWFkZSBhbmQgbm9cbiAgICogY2hhbmdlcyB3aWxsIGJlIHByb3BhZ2F0ZWQgYmFjayB0byBzdG9yZSBsaXN0ZW5lcnNcbiAgICovXG4gIGFwcGx5TmV0d29ya0RpZmYoZGlmZiwgcnVuQ2FsbGJhY2tzKSB7XG4gICAgdGhpcy5kZWJ1ZyhcImFwcGx5TmV0d29ya0RpZmZcIiwgZGlmZik7XG4gICAgY29uc3QgY2hhbmdlcyA9IHsgYWRkZWQ6IHt9LCB1cGRhdGVkOiB7fSwgcmVtb3ZlZDoge30gfTtcbiAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgW2lkLCBvcF0gb2Ygb2JqZWN0TWFwRW50cmllcyhkaWZmKSkge1xuICAgICAgaWYgKG9wWzBdID09PSBSZWNvcmRPcFR5cGUuUHV0KSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5zdG9yZS5nZXQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgJiYgIWlzRXF1YWwoZXhpc3RpbmcsIG9wWzFdKSkge1xuICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgIGNoYW5nZXMudXBkYXRlZFtpZF0gPSBbZXhpc3RpbmcsIG9wWzFdXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBjaGFuZ2VzLmFkZGVkW2lkXSA9IG9wWzFdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9wWzBdID09PSBSZWNvcmRPcFR5cGUuUGF0Y2gpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkID0gdGhpcy5zdG9yZS5nZXQoaWQpO1xuICAgICAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGNoZWQgPSBhcHBseU9iamVjdERpZmYocmVjb3JkLCBvcFsxXSk7XG4gICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjaGFuZ2VzLnVwZGF0ZWRbaWRdID0gW3JlY29yZCwgcGF0Y2hlZF07XG4gICAgICB9IGVsc2UgaWYgKG9wWzBdID09PSBSZWNvcmRPcFR5cGUuUmVtb3ZlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3JlLmhhcyhpZCkpIHtcbiAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBjaGFuZ2VzLnJlbW92ZWRbaWRdID0gdGhpcy5zdG9yZS5nZXQoaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNDaGFuZ2VzKSB7XG4gICAgICB0aGlzLnN0b3JlLmFwcGx5RGlmZihjaGFuZ2VzLCB7IHJ1bkNhbGxiYWNrcyB9KTtcbiAgICB9XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGxvY2FsL3ByZWZlci1jbGFzcy1tZXRob2RzXG4gIHJlYmFzZSA9ICgpID0+IHtcbiAgICB0aGlzLnN0b3JlLl9mbHVzaEhpc3RvcnkoKTtcbiAgICBpZiAodGhpcy5pbmNvbWluZ0RpZmZCdWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgY29uc3QgZGlmZnMgPSB0aGlzLmluY29taW5nRGlmZkJ1ZmZlcjtcbiAgICB0aGlzLmluY29taW5nRGlmZkJ1ZmZlciA9IFtdO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnN0b3JlLm1lcmdlUmVtb3RlQ2hhbmdlcygoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RvcmUuYXBwbHlEaWZmKHJldmVyc2VSZWNvcmRzRGlmZih0aGlzLnNwZWN1bGF0aXZlQ2hhbmdlcyksIHsgcnVuQ2FsbGJhY2tzOiBmYWxzZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBkaWZmIG9mIGRpZmZzKSB7XG4gICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gXCJwYXRjaFwiKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5TmV0d29ya0RpZmYoZGlmZi5kaWZmLCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nUHVzaFJlcXVlc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjZWl2ZWQgcHVzaF9yZXN1bHQgYnV0IHRoZXJlIGFyZSBubyBwZW5kaW5nIHB1c2ggcmVxdWVzdHNcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHNbMF0ucmVxdWVzdC5jbGllbnRDbG9jayAhPT0gZGlmZi5jbGllbnRDbG9jaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIlJlY2VpdmVkIHB1c2hfcmVzdWx0IGZvciBhIHB1c2ggcmVxdWVzdCB0aGF0IGlzIG5vdCBhdCB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkaWZmLmFjdGlvbiA9PT0gXCJkaXNjYXJkXCIpIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1B1c2hSZXF1ZXN0cy5zaGlmdCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi5hY3Rpb24gPT09IFwiY29tbWl0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVxdWVzdCB9ID0gdGhpcy5wZW5kaW5nUHVzaFJlcXVlc3RzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoXCJkaWZmXCIgaW4gcmVxdWVzdCAmJiByZXF1ZXN0LmRpZmYpIHtcbiAgICAgICAgICAgICAgdGhpcy5hcHBseU5ldHdvcmtEaWZmKHJlcXVlc3QuZGlmZiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlOZXR3b3JrRGlmZihkaWZmLmFjdGlvbi5yZWJhc2VXaXRoRGlmZiwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHMuc2hpZnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnNwZWN1bGF0aXZlQ2hhbmdlcyA9IHRoaXMuc3RvcmUuZXh0cmFjdGluZ0NoYW5nZXMoKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB7IHJlcXVlc3QgfSBvZiB0aGlzLnBlbmRpbmdQdXNoUmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoXCJkaWZmXCIgaW4gcmVxdWVzdCkgfHwgIXJlcXVlc3QuZGlmZikgY29udGludWU7XG4gICAgICAgICAgICAgIHRoaXMuYXBwbHlOZXR3b3JrRGlmZihyZXF1ZXN0LmRpZmYsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICB0aGlzLnNwZWN1bGF0aXZlQ2hhbmdlcyA9IHsgYWRkZWQ6IHt9LCB1cGRhdGVkOiB7fSwgcmVtb3ZlZDoge30gfTtcbiAgICAgICAgICB0aGlzLnJlc2V0Q29ubmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RvcmUuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgdGhpcy5sYXN0U2VydmVyQ2xvY2sgPSBkaWZmcy5hdCgtMSk/LnNlcnZlckNsb2NrID8/IHRoaXMubGFzdFNlcnZlckNsb2NrO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB0aGlzLnN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgIHRoaXMucmVzZXRDb25uZWN0aW9uKCk7XG4gICAgfVxuICB9O1xuICBzY2hlZHVsZVJlYmFzZSA9IGZwc1Rocm90dGxlKHRoaXMucmViYXNlKTtcbn1cbmV4cG9ydCB7XG4gIFRMU3luY0NsaWVudCxcbiAgVExTeW5jRXJyb3JDbG9zZUV2ZW50Q29kZSxcbiAgVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExTeW5jQ2xpZW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncRoom.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncRoom.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DATA_MESSAGE_DEBOUNCE_INTERVAL: () => (/* binding */ DATA_MESSAGE_DEBOUNCE_INTERVAL),\n/* harmony export */   DocumentState: () => (/* binding */ DocumentState),\n/* harmony export */   MAX_TOMBSTONES: () => (/* binding */ MAX_TOMBSTONES),\n/* harmony export */   TLSyncRoom: () => (/* binding */ TLSyncRoom),\n/* harmony export */   TOMBSTONE_PRUNE_BUFFER_SIZE: () => (/* binding */ TOMBSTONE_PRUNE_BUFFER_SIZE)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash.isequal */ \"(ssr)/./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var nanoevents__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! nanoevents */ \"(ssr)/./node_modules/nanoevents/index.js\");\n/* harmony import */ var _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RoomSession.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/RoomSession.mjs\");\n/* harmony import */ var _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TLSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncClient.mjs\");\n/* harmony import */ var _diff_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./diff.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs\");\n/* harmony import */ var _interval_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interval.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/interval.mjs\");\n/* harmony import */ var _protocol_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./protocol.mjs */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst MAX_TOMBSTONES = 3e3;\nconst TOMBSTONE_PRUNE_BUFFER_SIZE = 300;\nconst DATA_MESSAGE_DEBOUNCE_INTERVAL = 1e3 / 60;\nconst timeSince = (time) => Date.now() - time;\nclass DocumentState {\n  constructor(state, lastChangedClock, recordType) {\n    this.recordType = recordType;\n    this._atom = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"document:\" + state.id, { state, lastChangedClock });\n  }\n  _atom;\n  static createWithoutValidating(state, lastChangedClock, recordType) {\n    return new DocumentState(state, lastChangedClock, recordType);\n  }\n  static createAndValidate(state, lastChangedClock, recordType) {\n    try {\n      recordType.validate(state);\n    } catch (error) {\n      return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(error);\n    }\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(new DocumentState(state, lastChangedClock, recordType));\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get state() {\n    return this._atom.get().state;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get lastChangedClock() {\n    return this._atom.get().lastChangedClock;\n  }\n  replaceState(state, clock) {\n    const diff = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.diffRecord)(this.state, state);\n    if (!diff) return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(null);\n    try {\n      this.recordType.validate(state);\n    } catch (error) {\n      return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(error);\n    }\n    this._atom.set({ state, lastChangedClock: clock });\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(diff);\n  }\n  mergeDiff(diff, clock) {\n    const newState = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.applyObjectDiff)(this.state, diff);\n    return this.replaceState(newState, clock);\n  }\n}\nclass TLSyncRoom {\n  // A table of connected clients\n  sessions = /* @__PURE__ */ new Map();\n  // eslint-disable-next-line local/prefer-class-methods\n  pruneSessions = () => {\n    for (const client of this.sessions.values()) {\n      switch (client.state) {\n        case _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected: {\n          const hasTimedOut = timeSince(client.lastInteractionTime) > _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.SESSION_IDLE_TIMEOUT;\n          if (hasTimedOut || !client.socket.isOpen) {\n            this.cancelSession(client.sessionId);\n          }\n          break;\n        }\n        case _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.AwaitingConnectMessage: {\n          const hasTimedOut = timeSince(client.sessionStartTime) > _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.SESSION_START_WAIT_TIME;\n          if (hasTimedOut || !client.socket.isOpen) {\n            this.removeSession(client.sessionId);\n          }\n          break;\n        }\n        case _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.AwaitingRemoval: {\n          const hasTimedOut = timeSince(client.cancellationTime) > _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.SESSION_REMOVAL_WAIT_TIME;\n          if (hasTimedOut) {\n            this.removeSession(client.sessionId);\n          }\n          break;\n        }\n        default: {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(client);\n        }\n      }\n    }\n  };\n  disposables = [(0,_interval_mjs__WEBPACK_IMPORTED_MODULE_8__.interval)(this.pruneSessions, 2e3)];\n  _isClosed = false;\n  close() {\n    this.disposables.forEach((d) => d());\n    this.sessions.forEach((session) => {\n      session.socket.close();\n    });\n    this._isClosed = true;\n  }\n  isClosed() {\n    return this._isClosed;\n  }\n  events = (0,nanoevents__WEBPACK_IMPORTED_MODULE_10__.createNanoEvents)();\n  // Values associated with each uid (must be serializable).\n  /** @internal */\n  state = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"room state\", {\n    documents: {},\n    tombstones: {}\n  });\n  // this clock should start higher than the client, to make sure that clients who sync with their\n  // initial lastServerClock value get the full state\n  // in this case clients will start with 0, and the server will start with 1\n  clock = 1;\n  documentClock = 1;\n  tombstoneHistoryStartsAtClock = this.clock;\n  // map from record id to clock upon deletion\n  serializedSchema;\n  documentTypes;\n  presenceType;\n  log;\n  schema;\n  constructor(opts) {\n    this.schema = opts.schema;\n    let snapshot = opts.snapshot;\n    this.log = opts.log;\n    this.onDataChange = opts.onDataChange;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(\n      _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.isNativeStructuredClone,\n      \"TLSyncRoom is supposed to run either on Cloudflare Workersor on a 18+ version of Node.js, which both support the native structuredClone API\"\n    );\n    this.serializedSchema = JSON.parse(JSON.stringify(this.schema.serialize()));\n    this.documentTypes = new Set(\n      Object.values(this.schema.types).filter((t) => t.scope === \"document\").map((t) => t.typeName)\n    );\n    const presenceTypes = new Set(\n      Object.values(this.schema.types).filter((t) => t.scope === \"presence\")\n    );\n    if (presenceTypes.size > 1) {\n      throw new Error(\n        `TLSyncRoom: exactly zero or one presence type is expected, but found ${presenceTypes.size}`\n      );\n    }\n    this.presenceType = presenceTypes.values().next()?.value;\n    if (!snapshot) {\n      snapshot = {\n        clock: 0,\n        documents: [\n          {\n            state: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.DocumentRecordType.create({ id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID }),\n            lastChangedClock: 0\n          },\n          {\n            state: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.PageRecordType.create({ name: \"Page 1\", index: \"a1\" }),\n            lastChangedClock: 0\n          }\n        ]\n      };\n    }\n    this.clock = snapshot.clock;\n    let didIncrementClock = false;\n    const ensureClockDidIncrement = (_reason) => {\n      if (!didIncrementClock) {\n        didIncrementClock = true;\n        this.clock++;\n      }\n    };\n    const tombstones = { ...snapshot.tombstones };\n    const filteredDocuments = [];\n    for (const doc of snapshot.documents) {\n      if (this.documentTypes.has(doc.state.typeName)) {\n        filteredDocuments.push(doc);\n      } else {\n        ensureClockDidIncrement(\"doc type was not doc type\");\n        tombstones[doc.state.id] = this.clock;\n      }\n    }\n    const documents = Object.fromEntries(\n      filteredDocuments.map((r) => [\n        r.state.id,\n        DocumentState.createWithoutValidating(\n          r.state,\n          r.lastChangedClock,\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.schema.types, r.state.typeName))\n        )\n      ])\n    );\n    const migrationResult = this.schema.migrateStoreSnapshot({\n      store: Object.fromEntries(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.objectMapEntries)(documents).map(([id, { state }]) => [id, state])\n      ),\n      // eslint-disable-next-line deprecation/deprecation\n      schema: snapshot.schema ?? this.schema.serializeEarliestVersion()\n    });\n    if (migrationResult.type === \"error\") {\n      throw new Error(\"Failed to migrate: \" + migrationResult.reason);\n    }\n    for (const [id, r] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.objectMapEntries)(migrationResult.value)) {\n      const existing = documents[id];\n      if (!existing) {\n        ensureClockDidIncrement(\"record was added during migration\");\n        documents[id] = DocumentState.createWithoutValidating(\n          r,\n          this.clock,\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.schema.types, r.typeName))\n        );\n      } else if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_4__(existing.state, r)) {\n        ensureClockDidIncrement(\"record was maybe updated during migration\");\n        existing.replaceState(r, this.clock);\n      }\n    }\n    for (const id of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.objectMapKeys)(documents)) {\n      if (!migrationResult.value[id]) {\n        ensureClockDidIncrement(\"record was removed during migration\");\n        tombstones[id] = this.clock;\n        delete documents[id];\n      }\n    }\n    this.state.set({ documents, tombstones });\n    this.pruneTombstones();\n    this.documentClock = this.clock;\n    if (didIncrementClock) {\n      opts.onDataChange?.();\n    }\n  }\n  // eslint-disable-next-line local/prefer-class-methods\n  pruneTombstones = () => {\n    this.state.update(({ tombstones, documents }) => {\n      const entries = Object.entries(this.state.get().tombstones);\n      if (entries.length > MAX_TOMBSTONES) {\n        entries.sort((a, b) => a[1] - b[1]);\n        const excessQuantity = entries.length - MAX_TOMBSTONES;\n        tombstones = Object.fromEntries(entries.slice(excessQuantity + TOMBSTONE_PRUNE_BUFFER_SIZE));\n      }\n      return {\n        documents,\n        tombstones\n      };\n    });\n  };\n  getDocument(id) {\n    return this.state.get().documents[id];\n  }\n  addDocument(id, state, clock) {\n    let { documents, tombstones } = this.state.get();\n    if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty)(tombstones, id)) {\n      tombstones = { ...tombstones };\n      delete tombstones[id];\n    }\n    const createResult = DocumentState.createAndValidate(\n      state,\n      clock,\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.schema.types, state.typeName))\n    );\n    if (!createResult.ok) return createResult;\n    documents = { ...documents, [id]: createResult.value };\n    this.state.set({ documents, tombstones });\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(void 0);\n  }\n  removeDocument(id, clock) {\n    this.state.update(({ documents, tombstones }) => {\n      documents = { ...documents };\n      delete documents[id];\n      tombstones = { ...tombstones, [id]: clock };\n      return { documents, tombstones };\n    });\n  }\n  getSnapshot() {\n    const { documents, tombstones } = this.state.get();\n    return {\n      clock: this.clock,\n      tombstones,\n      schema: this.serializedSchema,\n      documents: Object.values(documents).filter((d) => this.documentTypes.has(d.state.typeName)).map((doc) => ({\n        state: doc.state,\n        lastChangedClock: doc.lastChangedClock\n      }))\n    };\n  }\n  /**\n   * Send a message to a particular client. Debounces data events\n   *\n   * @param sessionId - The id of the session to send the message to.\n   * @param message - The message to send.\n   */\n  sendMessage(sessionId, message) {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      this.log?.warn?.(\"Tried to send message to unknown session\", message.type);\n      return;\n    }\n    if (session.state !== _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected) {\n      this.log?.warn?.(\"Tried to send message to disconnected client\", message.type);\n      return;\n    }\n    if (session.socket.isOpen) {\n      if (message.type !== \"patch\" && message.type !== \"push_result\") {\n        if (message.type !== \"pong\") {\n          this._flushDataMessages(sessionId);\n        }\n        session.socket.sendMessage(message);\n      } else {\n        if (session.debounceTimer === null) {\n          session.socket.sendMessage({ type: \"data\", data: [message] });\n          session.debounceTimer = setTimeout(\n            () => this._flushDataMessages(sessionId),\n            DATA_MESSAGE_DEBOUNCE_INTERVAL\n          );\n        } else {\n          session.outstandingDataMessages.push(message);\n        }\n      }\n    } else {\n      this.cancelSession(session.sessionId);\n    }\n  }\n  // needs to accept sessionId and not a session because the session might be dead by the time\n  // the timer fires\n  _flushDataMessages(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (!session || session.state !== _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected) {\n      return;\n    }\n    session.debounceTimer = null;\n    if (session.outstandingDataMessages.length > 0) {\n      session.socket.sendMessage({ type: \"data\", data: session.outstandingDataMessages });\n      session.outstandingDataMessages.length = 0;\n    }\n  }\n  /** @internal */\n  removeSession(sessionId, fatalReason) {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      this.log?.warn?.(\"Tried to remove unknown session\");\n      return;\n    }\n    this.sessions.delete(sessionId);\n    const presence = this.getDocument(session.presenceId ?? \"\");\n    try {\n      if (session.socket.isOpen) {\n        if (fatalReason) {\n          session.socket.close(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventCode, fatalReason);\n        } else {\n          session.socket.close();\n        }\n      }\n    } catch (_e) {\n    }\n    if (presence) {\n      this.state.update(({ tombstones, documents }) => {\n        documents = { ...documents };\n        delete documents[session.presenceId];\n        return { documents, tombstones };\n      });\n      this.broadcastPatch({\n        diff: { [session.presenceId]: [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Remove] },\n        sourceSessionId: sessionId\n      });\n    }\n    this.events.emit(\"session_removed\", { sessionId, meta: session.meta });\n    if (this.sessions.size === 0) {\n      this.events.emit(\"room_became_empty\");\n    }\n  }\n  cancelSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      return;\n    }\n    if (session.state === _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.AwaitingRemoval) {\n      this.log?.warn?.(\"Tried to cancel session that is already awaiting removal\");\n      return;\n    }\n    this.sessions.set(sessionId, {\n      state: _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.AwaitingRemoval,\n      sessionId,\n      presenceId: session.presenceId,\n      socket: session.socket,\n      cancellationTime: Date.now(),\n      meta: session.meta,\n      isReadonly: session.isReadonly,\n      requiresLegacyRejection: session.requiresLegacyRejection\n    });\n  }\n  /**\n   * Broadcast a message to all connected clients except the one with the sessionId provided.\n   *\n   * @param message - The message to broadcast.\n   */\n  broadcastPatch(message) {\n    const { diff, sourceSessionId } = message;\n    this.sessions.forEach((session) => {\n      if (session.state !== _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected) return;\n      if (sourceSessionId === session.sessionId) return;\n      if (!session.socket.isOpen) {\n        this.cancelSession(session.sessionId);\n        return;\n      }\n      const res = this.migrateDiffForSession(session.serializedSchema, diff);\n      if (!res.ok) {\n        this.rejectSession(\n          session.sessionId,\n          res.error === _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew ? _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD : _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD\n        );\n        return;\n      }\n      this.sendMessage(session.sessionId, {\n        type: \"patch\",\n        diff: res.value,\n        serverClock: this.clock\n      });\n    });\n    return this;\n  }\n  /**\n   * When a client connects to the room, add them to the list of clients and then merge the history\n   * down into the snapshots.\n   *\n   * @internal\n   */\n  handleNewSession(opts) {\n    const { sessionId, socket, meta, isReadonly } = opts;\n    const existing = this.sessions.get(sessionId);\n    this.sessions.set(sessionId, {\n      state: _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.AwaitingConnectMessage,\n      sessionId,\n      socket,\n      presenceId: existing?.presenceId ?? this.presenceType?.createId() ?? null,\n      sessionStartTime: Date.now(),\n      meta,\n      isReadonly: isReadonly ?? false,\n      // this gets set later during handleConnectMessage\n      requiresLegacyRejection: false\n    });\n    return this;\n  }\n  /**\n   * When we send a diff to a client, if that client is on a lower version than us, we need to make\n   * the diff compatible with their version. At the moment this means migrating each affected record\n   * to the client's version and sending the whole record again. We can optimize this later by\n   * keeping the previous versions of records around long enough to recalculate these diffs for\n   * older client versions.\n   */\n  migrateDiffForSession(serializedSchema, diff) {\n    if (serializedSchema === this.serializedSchema) {\n      return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(diff);\n    }\n    const result = {};\n    for (const [id, op] of Object.entries(diff)) {\n      if (op[0] === _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Remove) {\n        result[id] = op;\n        continue;\n      }\n      const migrationResult = this.schema.migratePersistedRecord(\n        this.getDocument(id).state,\n        serializedSchema,\n        \"down\"\n      );\n      if (migrationResult.type === \"error\") {\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(migrationResult.reason);\n      }\n      result[id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, migrationResult.value];\n    }\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(result);\n  }\n  /**\n   * When the server receives a message from the clients Currently, supports connect and patches.\n   * Invalid messages types throws an error. Currently, doesn't validate data.\n   *\n   * @param sessionId - The session that sent the message\n   * @param message - The message that was sent\n   */\n  async handleMessage(sessionId, message) {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      this.log?.warn?.(\"Received message from unknown session\");\n      return;\n    }\n    switch (message.type) {\n      case \"connect\": {\n        return this.handleConnectRequest(session, message);\n      }\n      case \"push\": {\n        return this.handlePushRequest(session, message);\n      }\n      case \"ping\": {\n        if (session.state === _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected) {\n          session.lastInteractionTime = Date.now();\n        }\n        return this.sendMessage(session.sessionId, { type: \"pong\" });\n      }\n      default: {\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(message);\n      }\n    }\n  }\n  /** If the client is out of date, or we are out of date, we need to let them know */\n  rejectSession(sessionId, fatalReason) {\n    const session = this.sessions.get(sessionId);\n    if (!session) return;\n    if (!fatalReason) {\n      this.removeSession(sessionId);\n      return;\n    }\n    if (session.requiresLegacyRejection) {\n      try {\n        if (session.socket.isOpen) {\n          let legacyReason;\n          switch (fatalReason) {\n            case _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD:\n              legacyReason = _protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.TLIncompatibilityReason.ClientTooOld;\n              break;\n            case _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD:\n              legacyReason = _protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.TLIncompatibilityReason.ServerTooOld;\n              break;\n            case _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD:\n              legacyReason = _protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.TLIncompatibilityReason.InvalidRecord;\n              break;\n            default:\n              legacyReason = _protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.TLIncompatibilityReason.InvalidOperation;\n              break;\n          }\n          session.socket.sendMessage({\n            type: \"incompatibility_error\",\n            reason: legacyReason\n          });\n        }\n      } catch (e) {\n      } finally {\n        this.removeSession(sessionId);\n      }\n    } else {\n      this.removeSession(sessionId, fatalReason);\n    }\n  }\n  handleConnectRequest(session, message) {\n    let theirProtocolVersion = message.protocolVersion;\n    if (theirProtocolVersion === 5) {\n      theirProtocolVersion = 6;\n    }\n    session.requiresLegacyRejection = theirProtocolVersion === 6;\n    if (theirProtocolVersion === 6) {\n      theirProtocolVersion++;\n    }\n    if (theirProtocolVersion == null || theirProtocolVersion < (0,_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.getTlsyncProtocolVersion)()) {\n      this.rejectSession(session.sessionId, _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD);\n      return;\n    } else if (theirProtocolVersion > (0,_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.getTlsyncProtocolVersion)()) {\n      this.rejectSession(session.sessionId, _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD);\n      return;\n    }\n    if (message.schema == null) {\n      this.rejectSession(session.sessionId, _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD);\n      return;\n    }\n    const migrations = this.schema.getMigrationsSince(message.schema);\n    if (!migrations.ok || migrations.value.some((m) => m.scope === \"store\" || !m.down)) {\n      this.rejectSession(session.sessionId, _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD);\n      return;\n    }\n    const sessionSchema = lodash_isequal__WEBPACK_IMPORTED_MODULE_4__(message.schema, this.serializedSchema) ? this.serializedSchema : message.schema;\n    const connect = (msg) => {\n      this.sessions.set(session.sessionId, {\n        state: _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected,\n        sessionId: session.sessionId,\n        presenceId: session.presenceId,\n        socket: session.socket,\n        serializedSchema: sessionSchema,\n        lastInteractionTime: Date.now(),\n        debounceTimer: null,\n        outstandingDataMessages: [],\n        meta: session.meta,\n        isReadonly: session.isReadonly,\n        requiresLegacyRejection: session.requiresLegacyRejection\n      });\n      this.sendMessage(session.sessionId, msg);\n    };\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transaction)((rollback) => {\n      if (\n        // if the client requests changes since a time before we have tombstone history, send them the full state\n        message.lastServerClock < this.tombstoneHistoryStartsAtClock || // similarly, if they ask for a time we haven't reached yet, send them the full state\n        // this will only happen if the DB is reset (or there is no db) and the server restarts\n        // or if the server exits/crashes with unpersisted changes\n        message.lastServerClock > this.clock\n      ) {\n        const diff = {};\n        for (const [id, doc] of Object.entries(this.state.get().documents)) {\n          if (id !== session.presenceId) {\n            diff[id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, doc.state];\n          }\n        }\n        const migrated = this.migrateDiffForSession(sessionSchema, diff);\n        if (!migrated.ok) {\n          rollback();\n          this.rejectSession(\n            session.sessionId,\n            migrated.error === _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew ? _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD : _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD\n          );\n          return;\n        }\n        connect({\n          type: \"connect\",\n          connectRequestId: message.connectRequestId,\n          hydrationType: \"wipe_all\",\n          protocolVersion: (0,_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.getTlsyncProtocolVersion)(),\n          schema: this.schema.serialize(),\n          serverClock: this.clock,\n          diff: migrated.value,\n          isReadonly: session.isReadonly\n        });\n      } else {\n        const diff = {};\n        const updatedDocs = Object.values(this.state.get().documents).filter(\n          (doc) => doc.lastChangedClock > message.lastServerClock\n        );\n        const presenceDocs = this.presenceType ? Object.values(this.state.get().documents).filter(\n          (doc) => this.presenceType.typeName === doc.state.typeName && doc.state.id !== session.presenceId\n        ) : [];\n        const deletedDocsIds = Object.entries(this.state.get().tombstones).filter(([_id, deletedAtClock]) => deletedAtClock > message.lastServerClock).map(([id]) => id);\n        for (const doc of updatedDocs) {\n          diff[doc.state.id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, doc.state];\n        }\n        for (const doc of presenceDocs) {\n          diff[doc.state.id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, doc.state];\n        }\n        for (const docId of deletedDocsIds) {\n          diff[docId] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Remove];\n        }\n        const migrated = this.migrateDiffForSession(sessionSchema, diff);\n        if (!migrated.ok) {\n          rollback();\n          this.rejectSession(\n            session.sessionId,\n            migrated.error === _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew ? _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD : _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD\n          );\n          return;\n        }\n        connect({\n          type: \"connect\",\n          connectRequestId: message.connectRequestId,\n          hydrationType: \"wipe_presence\",\n          schema: this.schema.serialize(),\n          protocolVersion: (0,_protocol_mjs__WEBPACK_IMPORTED_MODULE_9__.getTlsyncProtocolVersion)(),\n          serverClock: this.clock,\n          diff: migrated.value,\n          isReadonly: session.isReadonly\n        });\n      }\n    });\n  }\n  handlePushRequest(session, message) {\n    if (session && session.state !== _RoomSession_mjs__WEBPACK_IMPORTED_MODULE_5__.RoomSessionState.Connected) {\n      return;\n    }\n    if (session) {\n      session.lastInteractionTime = Date.now();\n    }\n    this.clock++;\n    const initialDocumentClock = this.documentClock;\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transaction)((rollback) => {\n      const docChanges = { diff: null };\n      const presenceChanges = { diff: null };\n      const propagateOp = (changes, id, op) => {\n        if (!changes.diff) changes.diff = {};\n        changes.diff[id] = op;\n      };\n      const fail = (reason, underlyingError) => {\n        rollback();\n        if (session) {\n          this.rejectSession(session.sessionId, reason);\n        } else {\n          throw new Error(\"failed to apply changes: \" + reason, underlyingError);\n        }\n        if (typeof process !== \"undefined\" && \"development\" !== \"test\") {\n          this.log?.error?.(\"failed to apply push\", reason, message, underlyingError);\n        }\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(void 0);\n      };\n      const addDocument = (changes, id, _state) => {\n        const res = session ? this.schema.migratePersistedRecord(_state, session.serializedSchema, \"up\") : { type: \"success\", value: _state };\n        if (res.type === \"error\") {\n          return fail(\n            res.reason === _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooOld ? _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD : _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD\n          );\n        }\n        const { value: state } = res;\n        const doc = this.getDocument(id);\n        if (doc) {\n          const diff = doc.replaceState(state, this.clock);\n          if (!diff.ok) {\n            return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD);\n          }\n          if (diff.value) {\n            propagateOp(changes, id, [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Patch, diff.value]);\n          }\n        } else {\n          const result = this.addDocument(id, state, this.clock);\n          if (!result.ok) {\n            return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD);\n          }\n          propagateOp(changes, id, [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, state]);\n        }\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(void 0);\n      };\n      const patchDocument = (changes, id, patch) => {\n        const doc = this.getDocument(id);\n        if (!doc) return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(void 0);\n        const downgraded = session ? this.schema.migratePersistedRecord(doc.state, session.serializedSchema, \"down\") : { type: \"success\", value: doc.state };\n        if (downgraded.type === \"error\") {\n          return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD);\n        }\n        if (downgraded.value === doc.state) {\n          const diff = doc.mergeDiff(patch, this.clock);\n          if (!diff.ok) {\n            return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD);\n          }\n          if (diff.value) {\n            propagateOp(changes, id, [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Patch, diff.value]);\n          }\n        } else {\n          const patched = (0,_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.applyObjectDiff)(downgraded.value, patch);\n          const upgraded = session ? this.schema.migratePersistedRecord(patched, session.serializedSchema, \"up\") : { type: \"success\", value: patched };\n          if (upgraded.type === \"error\") {\n            return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD);\n          }\n          const diff = doc.replaceState(upgraded.value, this.clock);\n          if (!diff.ok) {\n            return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD);\n          }\n          if (diff.value) {\n            propagateOp(changes, id, [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Patch, diff.value]);\n          }\n        }\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(void 0);\n      };\n      const { clientClock } = message;\n      if (this.presenceType && session?.presenceId && \"presence\" in message && message.presence) {\n        if (!session) throw new Error(\"session is required for presence pushes\");\n        const id = session.presenceId;\n        const [type, val] = message.presence;\n        const { typeName } = this.presenceType;\n        switch (type) {\n          case _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put: {\n            const res = addDocument(presenceChanges, id, { ...val, id, typeName });\n            if (!res.ok) return;\n            break;\n          }\n          case _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Patch: {\n            const res = patchDocument(presenceChanges, id, {\n              ...val,\n              id: [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.ValueOpType.Put, id],\n              typeName: [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.ValueOpType.Put, typeName]\n            });\n            if (!res.ok) return;\n            break;\n          }\n        }\n      }\n      if (message.diff && !session?.isReadonly) {\n        for (const [id, op] of Object.entries(message.diff)) {\n          switch (op[0]) {\n            case _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put: {\n              if (!this.documentTypes.has(op[1].typeName)) {\n                return fail(_TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.INVALID_RECORD);\n              }\n              const res = addDocument(docChanges, id, op[1]);\n              if (!res.ok) return;\n              break;\n            }\n            case _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Patch: {\n              const res = patchDocument(docChanges, id, op[1]);\n              if (!res.ok) return;\n              break;\n            }\n            case _diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Remove: {\n              const doc = this.getDocument(id);\n              if (!doc) {\n                continue;\n              }\n              this.removeDocument(id, this.clock);\n              setTimeout(this.pruneTombstones, 0);\n              propagateOp(docChanges, id, op);\n              break;\n            }\n          }\n        }\n      }\n      if (\n        // if there was only a presence push, the client doesn't need to do anything aside from\n        // shift the push request.\n        !message.diff || lodash_isequal__WEBPACK_IMPORTED_MODULE_4__(docChanges.diff, message.diff)\n      ) {\n        if (session) {\n          this.sendMessage(session.sessionId, {\n            type: \"push_result\",\n            serverClock: this.clock,\n            clientClock,\n            action: \"commit\"\n          });\n        }\n      } else if (!docChanges.diff) {\n        if (session) {\n          this.sendMessage(session.sessionId, {\n            type: \"push_result\",\n            serverClock: this.clock,\n            clientClock,\n            action: \"discard\"\n          });\n        }\n      } else {\n        if (session) {\n          const migrateResult = this.migrateDiffForSession(\n            session.serializedSchema,\n            docChanges.diff\n          );\n          if (!migrateResult.ok) {\n            return fail(\n              migrateResult.error === _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew ? _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.SERVER_TOO_OLD : _TLSyncClient_mjs__WEBPACK_IMPORTED_MODULE_6__.TLSyncErrorCloseEventReason.CLIENT_TOO_OLD\n            );\n          }\n          this.sendMessage(session.sessionId, {\n            type: \"push_result\",\n            serverClock: this.clock,\n            clientClock,\n            action: { rebaseWithDiff: migrateResult.value }\n          });\n        }\n      }\n      if (docChanges.diff || presenceChanges.diff) {\n        this.broadcastPatch({\n          sourceSessionId: session?.sessionId,\n          diff: {\n            ...docChanges.diff,\n            ...presenceChanges.diff\n          }\n        });\n      }\n      if (docChanges.diff) {\n        this.documentClock = this.clock;\n      }\n      return;\n    });\n    if (this.documentClock !== initialDocumentClock) {\n      this.onDataChange?.();\n    }\n  }\n  /**\n   * Handle the event when a client disconnects.\n   *\n   * @param sessionId - The session that disconnected.\n   */\n  handleClose(sessionId) {\n    this.cancelSession(sessionId);\n  }\n  /**\n   * Allow applying changes to the store in a transactional way.\n   * @param updater - A function that will be called with a store object that can be used to make changes.\n   * @returns A promise that resolves when the transaction is complete.\n   */\n  async updateStore(updater) {\n    if (this._isClosed) {\n      throw new Error(\"Cannot update store on a closed room\");\n    }\n    const context = new StoreUpdateContext(\n      Object.fromEntries(this.getSnapshot().documents.map((d) => [d.state.id, d.state]))\n    );\n    try {\n      await updater(context);\n    } finally {\n      context.close();\n    }\n    const diff = context.toDiff();\n    if (Object.keys(diff).length === 0) {\n      return;\n    }\n    this.handlePushRequest(null, { type: \"push\", diff, clientClock: 0 });\n  }\n}\nclass StoreUpdateContext {\n  constructor(snapshot) {\n    this.snapshot = snapshot;\n  }\n  updates = {\n    puts: {},\n    deletes: /* @__PURE__ */ new Set()\n  };\n  put(record) {\n    if (this._isClosed) throw new Error(\"StoreUpdateContext is closed\");\n    if (record.id in this.snapshot && lodash_isequal__WEBPACK_IMPORTED_MODULE_4__(this.snapshot[record.id], record)) {\n      delete this.updates.puts[record.id];\n    } else {\n      this.updates.puts[record.id] = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(record);\n    }\n    this.updates.deletes.delete(record.id);\n  }\n  delete(recordOrId) {\n    if (this._isClosed) throw new Error(\"StoreUpdateContext is closed\");\n    const id = typeof recordOrId === \"string\" ? recordOrId : recordOrId.id;\n    delete this.updates.puts[id];\n    if (this.snapshot[id]) {\n      this.updates.deletes.add(id);\n    }\n  }\n  get(id) {\n    if (this._isClosed) throw new Error(\"StoreUpdateContext is closed\");\n    if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty)(this.updates.puts, id)) {\n      return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(this.updates.puts[id]);\n    }\n    if (this.updates.deletes.has(id)) {\n      return null;\n    }\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(this.snapshot[id] ?? null);\n  }\n  getAll() {\n    if (this._isClosed) throw new Error(\"StoreUpdateContext is closed\");\n    const result = Object.values(this.updates.puts);\n    for (const [id, record] of Object.entries(this.snapshot)) {\n      if (!this.updates.deletes.has(id) && !(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty)(this.updates.puts, id)) {\n        result.push(record);\n      }\n    }\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(result);\n  }\n  toDiff() {\n    const diff = {};\n    for (const [id, record] of Object.entries(this.updates.puts)) {\n      diff[id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Put, record];\n    }\n    for (const id of this.updates.deletes) {\n      diff[id] = [_diff_mjs__WEBPACK_IMPORTED_MODULE_7__.RecordOpType.Remove];\n    }\n    return diff;\n  }\n  _isClosed = false;\n  close() {\n    this._isClosed = true;\n  }\n}\n\n//# sourceMappingURL=TLSyncRoom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL1RMU3luY1Jvb20ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0Q7QUFHM0I7QUFDOEQ7QUFZOUQ7QUFDYztBQUNTO0FBTW5CO0FBQ2lFO0FBTXhFO0FBQ3NCO0FBSWxCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1EQUFJLDJCQUEyQix5QkFBeUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixhQUFhLGlEQUFNO0FBQ25CO0FBQ0EsV0FBVyxpREFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxREFBVTtBQUMzQixzQkFBc0IsaURBQU07QUFDNUI7QUFDQTtBQUNBLE1BQU07QUFDTixhQUFhLGlEQUFNO0FBQ25CO0FBQ0EscUJBQXFCLGdDQUFnQztBQUNyRCxXQUFXLGlEQUFNO0FBQ2pCO0FBQ0E7QUFDQSxxQkFBcUIsMERBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFnQjtBQUM3QixzRUFBc0Usa0VBQW9CO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFnQjtBQUM3QixtRUFBbUUscUVBQXVCO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFnQjtBQUM3QixtRUFBbUUsdUVBQXlCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0VBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQWdCO0FBQzNCO0FBQ0E7QUFDQSxVQUFVLG1EQUFJO0FBQ2QsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1YsTUFBTSxrRUFBdUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRixtQkFBbUI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBa0IsVUFBVSxJQUFJLDJEQUFhLEVBQUU7QUFDbEU7QUFDQSxXQUFXO0FBQ1g7QUFDQSxtQkFBbUIsNERBQWMsVUFBVSw2QkFBNkI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDJEQUFZLENBQUMsNkRBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQWdCLHdCQUF3QixPQUFPO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsK0RBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMkRBQVksQ0FBQyw2REFBYztBQUNyQztBQUNBLFFBQVEsVUFBVSwyQ0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0REFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdCQUF3QjtBQUNsQyxRQUFRLDZEQUFjO0FBQ3RCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyREFBWSxDQUFDLDZEQUFjO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIscUJBQXFCLHVCQUF1QjtBQUM1QyxXQUFXLGlEQUFNO0FBQ2pCO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hELG9CQUFvQjtBQUNwQjtBQUNBLHFCQUFxQjtBQUNyQixlQUFlO0FBQ2YsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhEQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSx1Q0FBdUMsK0JBQStCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw4REFBZ0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscURBQXFEO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3RUFBeUI7QUFDeEQsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkJBQTJCLHVCQUF1QjtBQUNsRCxzQkFBc0I7QUFDdEI7QUFDQSxpQkFBaUI7QUFDakIsT0FBTztBQUNQO0FBQ0EsZ0JBQWdCLHVCQUF1QixtREFBWSxVQUFVO0FBQzdEO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMENBQTBDLCtCQUErQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBLDRCQUE0Qiw4REFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlFQUFzQix1QkFBdUIsMEVBQTJCLGtCQUFrQiwwRUFBMkI7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0NBQXNDO0FBQ2xEO0FBQ0E7QUFDQSxhQUFhLDhEQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlEQUFNO0FBQ3JCO0FBQ0Esb0JBQW9CLG1EQUFZO0FBQ2hDO0FBQ0EsV0FBVyxpREFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBZ0I7QUFDOUM7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQSxRQUFRLG9FQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwRUFBMkI7QUFDNUMsNkJBQTZCLGtFQUF1QjtBQUNwRDtBQUNBLGlCQUFpQiwwRUFBMkI7QUFDNUMsNkJBQTZCLGtFQUF1QjtBQUNwRDtBQUNBLGlCQUFpQiwwRUFBMkI7QUFDNUMsNkJBQTZCLGtFQUF1QjtBQUNwRDtBQUNBO0FBQ0EsNkJBQTZCLGtFQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsUUFBUTtBQUNSLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCx1RUFBd0I7QUFDdkYsNENBQTRDLDBFQUEyQjtBQUN2RTtBQUNBLE1BQU0sZ0NBQWdDLHVFQUF3QjtBQUM5RCw0Q0FBNEMsMEVBQTJCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwRUFBMkI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMEVBQTJCO0FBQ3ZFO0FBQ0E7QUFDQSwwQkFBMEIsMkNBQU87QUFDakM7QUFDQTtBQUNBLGVBQWUsOERBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxJQUFJLDBEQUFXO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbURBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQXNCLHVCQUF1QiwwRUFBMkIsa0JBQWtCLDBFQUEyQjtBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1RUFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtREFBWTtBQUM1QztBQUNBO0FBQ0EsZ0NBQWdDLG1EQUFZO0FBQzVDO0FBQ0E7QUFDQSx5QkFBeUIsbURBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFzQix1QkFBdUIsMEVBQTJCLGtCQUFrQiwwRUFBMkI7QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1RUFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxxQ0FBcUMsOERBQWdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwwREFBVztBQUNmLDJCQUEyQjtBQUMzQixnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsOENBQThDLGFBQW9CO0FBQ2xFO0FBQ0E7QUFDQSxlQUFlLGlEQUFNO0FBQ3JCO0FBQ0E7QUFDQSw2R0FBNkc7QUFDN0c7QUFDQTtBQUNBLDJCQUEyQixpRUFBc0IsdUJBQXVCLDBFQUEyQixrQkFBa0IsMEVBQTJCO0FBQ2hKO0FBQ0E7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwRUFBMkI7QUFDbkQ7QUFDQTtBQUNBLHNDQUFzQyxtREFBWTtBQUNsRDtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0Esd0JBQXdCLDBFQUEyQjtBQUNuRDtBQUNBLG9DQUFvQyxtREFBWTtBQUNoRDtBQUNBLGVBQWUsaURBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFNO0FBQy9CLHlIQUF5SDtBQUN6SDtBQUNBLHNCQUFzQiwwRUFBMkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEVBQTJCO0FBQ25EO0FBQ0E7QUFDQSxzQ0FBc0MsbURBQVk7QUFDbEQ7QUFDQSxVQUFVO0FBQ1YsMEJBQTBCLDBEQUFlO0FBQ3pDLHFIQUFxSDtBQUNySDtBQUNBLHdCQUF3QiwwRUFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBFQUEyQjtBQUNuRDtBQUNBO0FBQ0Esc0NBQXNDLG1EQUFZO0FBQ2xEO0FBQ0E7QUFDQSxlQUFlLGlEQUFNO0FBQ3JCO0FBQ0EsY0FBYyxjQUFjO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQSxlQUFlLG1EQUFZO0FBQzNCLDJEQUEyRCxzQkFBc0I7QUFDakY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtREFBWTtBQUMzQjtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCLHlCQUF5QixrREFBVztBQUNwQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtREFBWTtBQUM3QjtBQUNBLDRCQUE0QiwwRUFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtREFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtREFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkNBQU87QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGlFQUFzQix1QkFBdUIsMEVBQTJCLGtCQUFrQiwwRUFBMkI7QUFDM0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQ0FBb0M7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMkNBQU87QUFDN0M7QUFDQSxNQUFNO0FBQ04scUNBQXFDLDhEQUFlO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2REFBYztBQUN0QixhQUFhLDhEQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZEQUFjO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbURBQVk7QUFDOUI7QUFDQTtBQUNBLGtCQUFrQixtREFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3luYy1jb3JlL2Rpc3QtZXNtL2xpYi9UTFN5bmNSb29tLm1qcz85OGEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIHRyYW5zYWN0aW9uIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb25cbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IERvY3VtZW50UmVjb3JkVHlwZSwgUGFnZVJlY29yZFR5cGUsIFRMRE9DVU1FTlRfSUQgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHtcbiAgUmVzdWx0LFxuICBhc3NlcnQsXG4gIGFzc2VydEV4aXN0cyxcbiAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yLFxuICBnZXRPd25Qcm9wZXJ0eSxcbiAgaGFzT3duUHJvcGVydHksXG4gIGlzTmF0aXZlU3RydWN0dXJlZENsb25lLFxuICBvYmplY3RNYXBFbnRyaWVzLFxuICBvYmplY3RNYXBLZXlzLFxuICBzdHJ1Y3R1cmVkQ2xvbmVcbn0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJsb2Rhc2guaXNlcXVhbFwiO1xuaW1wb3J0IHsgY3JlYXRlTmFub0V2ZW50cyB9IGZyb20gXCJuYW5vZXZlbnRzXCI7XG5pbXBvcnQge1xuICBSb29tU2Vzc2lvblN0YXRlLFxuICBTRVNTSU9OX0lETEVfVElNRU9VVCxcbiAgU0VTU0lPTl9SRU1PVkFMX1dBSVRfVElNRSxcbiAgU0VTU0lPTl9TVEFSVF9XQUlUX1RJTUVcbn0gZnJvbSBcIi4vUm9vbVNlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBUTFN5bmNFcnJvckNsb3NlRXZlbnRDb2RlLCBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24gfSBmcm9tIFwiLi9UTFN5bmNDbGllbnQubWpzXCI7XG5pbXBvcnQge1xuICBSZWNvcmRPcFR5cGUsXG4gIFZhbHVlT3BUeXBlLFxuICBhcHBseU9iamVjdERpZmYsXG4gIGRpZmZSZWNvcmRcbn0gZnJvbSBcIi4vZGlmZi5tanNcIjtcbmltcG9ydCB7IGludGVydmFsIH0gZnJvbSBcIi4vaW50ZXJ2YWwubWpzXCI7XG5pbXBvcnQge1xuICBUTEluY29tcGF0aWJpbGl0eVJlYXNvbixcbiAgZ2V0VGxzeW5jUHJvdG9jb2xWZXJzaW9uXG59IGZyb20gXCIuL3Byb3RvY29sLm1qc1wiO1xuY29uc3QgTUFYX1RPTUJTVE9ORVMgPSAzZTM7XG5jb25zdCBUT01CU1RPTkVfUFJVTkVfQlVGRkVSX1NJWkUgPSAzMDA7XG5jb25zdCBEQVRBX01FU1NBR0VfREVCT1VOQ0VfSU5URVJWQUwgPSAxZTMgLyA2MDtcbmNvbnN0IHRpbWVTaW5jZSA9ICh0aW1lKSA9PiBEYXRlLm5vdygpIC0gdGltZTtcbmNsYXNzIERvY3VtZW50U3RhdGUge1xuICBjb25zdHJ1Y3RvcihzdGF0ZSwgbGFzdENoYW5nZWRDbG9jaywgcmVjb3JkVHlwZSkge1xuICAgIHRoaXMucmVjb3JkVHlwZSA9IHJlY29yZFR5cGU7XG4gICAgdGhpcy5fYXRvbSA9IGF0b20oXCJkb2N1bWVudDpcIiArIHN0YXRlLmlkLCB7IHN0YXRlLCBsYXN0Q2hhbmdlZENsb2NrIH0pO1xuICB9XG4gIF9hdG9tO1xuICBzdGF0aWMgY3JlYXRlV2l0aG91dFZhbGlkYXRpbmcoc3RhdGUsIGxhc3RDaGFuZ2VkQ2xvY2ssIHJlY29yZFR5cGUpIHtcbiAgICByZXR1cm4gbmV3IERvY3VtZW50U3RhdGUoc3RhdGUsIGxhc3RDaGFuZ2VkQ2xvY2ssIHJlY29yZFR5cGUpO1xuICB9XG4gIHN0YXRpYyBjcmVhdGVBbmRWYWxpZGF0ZShzdGF0ZSwgbGFzdENoYW5nZWRDbG9jaywgcmVjb3JkVHlwZSkge1xuICAgIHRyeSB7XG4gICAgICByZWNvcmRUeXBlLnZhbGlkYXRlKHN0YXRlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnIoZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKG5ldyBEb2N1bWVudFN0YXRlKHN0YXRlLCBsYXN0Q2hhbmdlZENsb2NrLCByZWNvcmRUeXBlKSk7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBzdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fYXRvbS5nZXQoKS5zdGF0ZTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGxhc3RDaGFuZ2VkQ2xvY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX2F0b20uZ2V0KCkubGFzdENoYW5nZWRDbG9jaztcbiAgfVxuICByZXBsYWNlU3RhdGUoc3RhdGUsIGNsb2NrKSB7XG4gICAgY29uc3QgZGlmZiA9IGRpZmZSZWNvcmQodGhpcy5zdGF0ZSwgc3RhdGUpO1xuICAgIGlmICghZGlmZikgcmV0dXJuIFJlc3VsdC5vayhudWxsKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5yZWNvcmRUeXBlLnZhbGlkYXRlKHN0YXRlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnIoZXJyb3IpO1xuICAgIH1cbiAgICB0aGlzLl9hdG9tLnNldCh7IHN0YXRlLCBsYXN0Q2hhbmdlZENsb2NrOiBjbG9jayB9KTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKGRpZmYpO1xuICB9XG4gIG1lcmdlRGlmZihkaWZmLCBjbG9jaykge1xuICAgIGNvbnN0IG5ld1N0YXRlID0gYXBwbHlPYmplY3REaWZmKHRoaXMuc3RhdGUsIGRpZmYpO1xuICAgIHJldHVybiB0aGlzLnJlcGxhY2VTdGF0ZShuZXdTdGF0ZSwgY2xvY2spO1xuICB9XG59XG5jbGFzcyBUTFN5bmNSb29tIHtcbiAgLy8gQSB0YWJsZSBvZiBjb25uZWN0ZWQgY2xpZW50c1xuICBzZXNzaW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBsb2NhbC9wcmVmZXItY2xhc3MtbWV0aG9kc1xuICBwcnVuZVNlc3Npb25zID0gKCkgPT4ge1xuICAgIGZvciAoY29uc3QgY2xpZW50IG9mIHRoaXMuc2Vzc2lvbnMudmFsdWVzKCkpIHtcbiAgICAgIHN3aXRjaCAoY2xpZW50LnN0YXRlKSB7XG4gICAgICAgIGNhc2UgUm9vbVNlc3Npb25TdGF0ZS5Db25uZWN0ZWQ6IHtcbiAgICAgICAgICBjb25zdCBoYXNUaW1lZE91dCA9IHRpbWVTaW5jZShjbGllbnQubGFzdEludGVyYWN0aW9uVGltZSkgPiBTRVNTSU9OX0lETEVfVElNRU9VVDtcbiAgICAgICAgICBpZiAoaGFzVGltZWRPdXQgfHwgIWNsaWVudC5zb2NrZXQuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbFNlc3Npb24oY2xpZW50LnNlc3Npb25JZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgUm9vbVNlc3Npb25TdGF0ZS5Bd2FpdGluZ0Nvbm5lY3RNZXNzYWdlOiB7XG4gICAgICAgICAgY29uc3QgaGFzVGltZWRPdXQgPSB0aW1lU2luY2UoY2xpZW50LnNlc3Npb25TdGFydFRpbWUpID4gU0VTU0lPTl9TVEFSVF9XQUlUX1RJTUU7XG4gICAgICAgICAgaWYgKGhhc1RpbWVkT3V0IHx8ICFjbGllbnQuc29ja2V0LmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTZXNzaW9uKGNsaWVudC5zZXNzaW9uSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFJvb21TZXNzaW9uU3RhdGUuQXdhaXRpbmdSZW1vdmFsOiB7XG4gICAgICAgICAgY29uc3QgaGFzVGltZWRPdXQgPSB0aW1lU2luY2UoY2xpZW50LmNhbmNlbGxhdGlvblRpbWUpID4gU0VTU0lPTl9SRU1PVkFMX1dBSVRfVElNRTtcbiAgICAgICAgICBpZiAoaGFzVGltZWRPdXQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2Vzc2lvbihjbGllbnQuc2Vzc2lvbklkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcihjbGllbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBkaXNwb3NhYmxlcyA9IFtpbnRlcnZhbCh0aGlzLnBydW5lU2Vzc2lvbnMsIDJlMyldO1xuICBfaXNDbG9zZWQgPSBmYWxzZTtcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5mb3JFYWNoKChkKSA9PiBkKCkpO1xuICAgIHRoaXMuc2Vzc2lvbnMuZm9yRWFjaCgoc2Vzc2lvbikgPT4ge1xuICAgICAgc2Vzc2lvbi5zb2NrZXQuY2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9pc0Nsb3NlZCA9IHRydWU7XG4gIH1cbiAgaXNDbG9zZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQ2xvc2VkO1xuICB9XG4gIGV2ZW50cyA9IGNyZWF0ZU5hbm9FdmVudHMoKTtcbiAgLy8gVmFsdWVzIGFzc29jaWF0ZWQgd2l0aCBlYWNoIHVpZCAobXVzdCBiZSBzZXJpYWxpemFibGUpLlxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRlID0gYXRvbShcInJvb20gc3RhdGVcIiwge1xuICAgIGRvY3VtZW50czoge30sXG4gICAgdG9tYnN0b25lczoge31cbiAgfSk7XG4gIC8vIHRoaXMgY2xvY2sgc2hvdWxkIHN0YXJ0IGhpZ2hlciB0aGFuIHRoZSBjbGllbnQsIHRvIG1ha2Ugc3VyZSB0aGF0IGNsaWVudHMgd2hvIHN5bmMgd2l0aCB0aGVpclxuICAvLyBpbml0aWFsIGxhc3RTZXJ2ZXJDbG9jayB2YWx1ZSBnZXQgdGhlIGZ1bGwgc3RhdGVcbiAgLy8gaW4gdGhpcyBjYXNlIGNsaWVudHMgd2lsbCBzdGFydCB3aXRoIDAsIGFuZCB0aGUgc2VydmVyIHdpbGwgc3RhcnQgd2l0aCAxXG4gIGNsb2NrID0gMTtcbiAgZG9jdW1lbnRDbG9jayA9IDE7XG4gIHRvbWJzdG9uZUhpc3RvcnlTdGFydHNBdENsb2NrID0gdGhpcy5jbG9jaztcbiAgLy8gbWFwIGZyb20gcmVjb3JkIGlkIHRvIGNsb2NrIHVwb24gZGVsZXRpb25cbiAgc2VyaWFsaXplZFNjaGVtYTtcbiAgZG9jdW1lbnRUeXBlcztcbiAgcHJlc2VuY2VUeXBlO1xuICBsb2c7XG4gIHNjaGVtYTtcbiAgY29uc3RydWN0b3Iob3B0cykge1xuICAgIHRoaXMuc2NoZW1hID0gb3B0cy5zY2hlbWE7XG4gICAgbGV0IHNuYXBzaG90ID0gb3B0cy5zbmFwc2hvdDtcbiAgICB0aGlzLmxvZyA9IG9wdHMubG9nO1xuICAgIHRoaXMub25EYXRhQ2hhbmdlID0gb3B0cy5vbkRhdGFDaGFuZ2U7XG4gICAgYXNzZXJ0KFxuICAgICAgaXNOYXRpdmVTdHJ1Y3R1cmVkQ2xvbmUsXG4gICAgICBcIlRMU3luY1Jvb20gaXMgc3VwcG9zZWQgdG8gcnVuIGVpdGhlciBvbiBDbG91ZGZsYXJlIFdvcmtlcnNvciBvbiBhIDE4KyB2ZXJzaW9uIG9mIE5vZGUuanMsIHdoaWNoIGJvdGggc3VwcG9ydCB0aGUgbmF0aXZlIHN0cnVjdHVyZWRDbG9uZSBBUElcIlxuICAgICk7XG4gICAgdGhpcy5zZXJpYWxpemVkU2NoZW1hID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNjaGVtYS5zZXJpYWxpemUoKSkpO1xuICAgIHRoaXMuZG9jdW1lbnRUeXBlcyA9IG5ldyBTZXQoXG4gICAgICBPYmplY3QudmFsdWVzKHRoaXMuc2NoZW1hLnR5cGVzKS5maWx0ZXIoKHQpID0+IHQuc2NvcGUgPT09IFwiZG9jdW1lbnRcIikubWFwKCh0KSA9PiB0LnR5cGVOYW1lKVxuICAgICk7XG4gICAgY29uc3QgcHJlc2VuY2VUeXBlcyA9IG5ldyBTZXQoXG4gICAgICBPYmplY3QudmFsdWVzKHRoaXMuc2NoZW1hLnR5cGVzKS5maWx0ZXIoKHQpID0+IHQuc2NvcGUgPT09IFwicHJlc2VuY2VcIilcbiAgICApO1xuICAgIGlmIChwcmVzZW5jZVR5cGVzLnNpemUgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUTFN5bmNSb29tOiBleGFjdGx5IHplcm8gb3Igb25lIHByZXNlbmNlIHR5cGUgaXMgZXhwZWN0ZWQsIGJ1dCBmb3VuZCAke3ByZXNlbmNlVHlwZXMuc2l6ZX1gXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnByZXNlbmNlVHlwZSA9IHByZXNlbmNlVHlwZXMudmFsdWVzKCkubmV4dCgpPy52YWx1ZTtcbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICBzbmFwc2hvdCA9IHtcbiAgICAgICAgY2xvY2s6IDAsXG4gICAgICAgIGRvY3VtZW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN0YXRlOiBEb2N1bWVudFJlY29yZFR5cGUuY3JlYXRlKHsgaWQ6IFRMRE9DVU1FTlRfSUQgfSksXG4gICAgICAgICAgICBsYXN0Q2hhbmdlZENsb2NrOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGF0ZTogUGFnZVJlY29yZFR5cGUuY3JlYXRlKHsgbmFtZTogXCJQYWdlIDFcIiwgaW5kZXg6IFwiYTFcIiB9KSxcbiAgICAgICAgICAgIGxhc3RDaGFuZ2VkQ2xvY2s6IDBcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuY2xvY2sgPSBzbmFwc2hvdC5jbG9jaztcbiAgICBsZXQgZGlkSW5jcmVtZW50Q2xvY2sgPSBmYWxzZTtcbiAgICBjb25zdCBlbnN1cmVDbG9ja0RpZEluY3JlbWVudCA9IChfcmVhc29uKSA9PiB7XG4gICAgICBpZiAoIWRpZEluY3JlbWVudENsb2NrKSB7XG4gICAgICAgIGRpZEluY3JlbWVudENsb2NrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbG9jaysrO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdG9tYnN0b25lcyA9IHsgLi4uc25hcHNob3QudG9tYnN0b25lcyB9O1xuICAgIGNvbnN0IGZpbHRlcmVkRG9jdW1lbnRzID0gW107XG4gICAgZm9yIChjb25zdCBkb2Mgb2Ygc25hcHNob3QuZG9jdW1lbnRzKSB7XG4gICAgICBpZiAodGhpcy5kb2N1bWVudFR5cGVzLmhhcyhkb2Muc3RhdGUudHlwZU5hbWUpKSB7XG4gICAgICAgIGZpbHRlcmVkRG9jdW1lbnRzLnB1c2goZG9jKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuc3VyZUNsb2NrRGlkSW5jcmVtZW50KFwiZG9jIHR5cGUgd2FzIG5vdCBkb2MgdHlwZVwiKTtcbiAgICAgICAgdG9tYnN0b25lc1tkb2Muc3RhdGUuaWRdID0gdGhpcy5jbG9jaztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZG9jdW1lbnRzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgZmlsdGVyZWREb2N1bWVudHMubWFwKChyKSA9PiBbXG4gICAgICAgIHIuc3RhdGUuaWQsXG4gICAgICAgIERvY3VtZW50U3RhdGUuY3JlYXRlV2l0aG91dFZhbGlkYXRpbmcoXG4gICAgICAgICAgci5zdGF0ZSxcbiAgICAgICAgICByLmxhc3RDaGFuZ2VkQ2xvY2ssXG4gICAgICAgICAgYXNzZXJ0RXhpc3RzKGdldE93blByb3BlcnR5KHRoaXMuc2NoZW1hLnR5cGVzLCByLnN0YXRlLnR5cGVOYW1lKSlcbiAgICAgICAgKVxuICAgICAgXSlcbiAgICApO1xuICAgIGNvbnN0IG1pZ3JhdGlvblJlc3VsdCA9IHRoaXMuc2NoZW1hLm1pZ3JhdGVTdG9yZVNuYXBzaG90KHtcbiAgICAgIHN0b3JlOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIG9iamVjdE1hcEVudHJpZXMoZG9jdW1lbnRzKS5tYXAoKFtpZCwgeyBzdGF0ZSB9XSkgPT4gW2lkLCBzdGF0ZV0pXG4gICAgICApLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICBzY2hlbWE6IHNuYXBzaG90LnNjaGVtYSA/PyB0aGlzLnNjaGVtYS5zZXJpYWxpemVFYXJsaWVzdFZlcnNpb24oKVxuICAgIH0pO1xuICAgIGlmIChtaWdyYXRpb25SZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbWlncmF0ZTogXCIgKyBtaWdyYXRpb25SZXN1bHQucmVhc29uKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbaWQsIHJdIG9mIG9iamVjdE1hcEVudHJpZXMobWlncmF0aW9uUmVzdWx0LnZhbHVlKSkge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBkb2N1bWVudHNbaWRdO1xuICAgICAgaWYgKCFleGlzdGluZykge1xuICAgICAgICBlbnN1cmVDbG9ja0RpZEluY3JlbWVudChcInJlY29yZCB3YXMgYWRkZWQgZHVyaW5nIG1pZ3JhdGlvblwiKTtcbiAgICAgICAgZG9jdW1lbnRzW2lkXSA9IERvY3VtZW50U3RhdGUuY3JlYXRlV2l0aG91dFZhbGlkYXRpbmcoXG4gICAgICAgICAgcixcbiAgICAgICAgICB0aGlzLmNsb2NrLFxuICAgICAgICAgIGFzc2VydEV4aXN0cyhnZXRPd25Qcm9wZXJ0eSh0aGlzLnNjaGVtYS50eXBlcywgci50eXBlTmFtZSkpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKCFpc0VxdWFsKGV4aXN0aW5nLnN0YXRlLCByKSkge1xuICAgICAgICBlbnN1cmVDbG9ja0RpZEluY3JlbWVudChcInJlY29yZCB3YXMgbWF5YmUgdXBkYXRlZCBkdXJpbmcgbWlncmF0aW9uXCIpO1xuICAgICAgICBleGlzdGluZy5yZXBsYWNlU3RhdGUociwgdGhpcy5jbG9jayk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgaWQgb2Ygb2JqZWN0TWFwS2V5cyhkb2N1bWVudHMpKSB7XG4gICAgICBpZiAoIW1pZ3JhdGlvblJlc3VsdC52YWx1ZVtpZF0pIHtcbiAgICAgICAgZW5zdXJlQ2xvY2tEaWRJbmNyZW1lbnQoXCJyZWNvcmQgd2FzIHJlbW92ZWQgZHVyaW5nIG1pZ3JhdGlvblwiKTtcbiAgICAgICAgdG9tYnN0b25lc1tpZF0gPSB0aGlzLmNsb2NrO1xuICAgICAgICBkZWxldGUgZG9jdW1lbnRzW2lkXTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyBkb2N1bWVudHMsIHRvbWJzdG9uZXMgfSk7XG4gICAgdGhpcy5wcnVuZVRvbWJzdG9uZXMoKTtcbiAgICB0aGlzLmRvY3VtZW50Q2xvY2sgPSB0aGlzLmNsb2NrO1xuICAgIGlmIChkaWRJbmNyZW1lbnRDbG9jaykge1xuICAgICAgb3B0cy5vbkRhdGFDaGFuZ2U/LigpO1xuICAgIH1cbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbG9jYWwvcHJlZmVyLWNsYXNzLW1ldGhvZHNcbiAgcHJ1bmVUb21ic3RvbmVzID0gKCkgPT4ge1xuICAgIHRoaXMuc3RhdGUudXBkYXRlKCh7IHRvbWJzdG9uZXMsIGRvY3VtZW50cyB9KSA9PiB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5zdGF0ZS5nZXQoKS50b21ic3RvbmVzKTtcbiAgICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IE1BWF9UT01CU1RPTkVTKSB7XG4gICAgICAgIGVudHJpZXMuc29ydCgoYSwgYikgPT4gYVsxXSAtIGJbMV0pO1xuICAgICAgICBjb25zdCBleGNlc3NRdWFudGl0eSA9IGVudHJpZXMubGVuZ3RoIC0gTUFYX1RPTUJTVE9ORVM7XG4gICAgICAgIHRvbWJzdG9uZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcy5zbGljZShleGNlc3NRdWFudGl0eSArIFRPTUJTVE9ORV9QUlVORV9CVUZGRVJfU0laRSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzLFxuICAgICAgICB0b21ic3RvbmVzXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuICBnZXREb2N1bWVudChpZCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmdldCgpLmRvY3VtZW50c1tpZF07XG4gIH1cbiAgYWRkRG9jdW1lbnQoaWQsIHN0YXRlLCBjbG9jaykge1xuICAgIGxldCB7IGRvY3VtZW50cywgdG9tYnN0b25lcyB9ID0gdGhpcy5zdGF0ZS5nZXQoKTtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodG9tYnN0b25lcywgaWQpKSB7XG4gICAgICB0b21ic3RvbmVzID0geyAuLi50b21ic3RvbmVzIH07XG4gICAgICBkZWxldGUgdG9tYnN0b25lc1tpZF07XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IERvY3VtZW50U3RhdGUuY3JlYXRlQW5kVmFsaWRhdGUoXG4gICAgICBzdGF0ZSxcbiAgICAgIGNsb2NrLFxuICAgICAgYXNzZXJ0RXhpc3RzKGdldE93blByb3BlcnR5KHRoaXMuc2NoZW1hLnR5cGVzLCBzdGF0ZS50eXBlTmFtZSkpXG4gICAgKTtcbiAgICBpZiAoIWNyZWF0ZVJlc3VsdC5vaykgcmV0dXJuIGNyZWF0ZVJlc3VsdDtcbiAgICBkb2N1bWVudHMgPSB7IC4uLmRvY3VtZW50cywgW2lkXTogY3JlYXRlUmVzdWx0LnZhbHVlIH07XG4gICAgdGhpcy5zdGF0ZS5zZXQoeyBkb2N1bWVudHMsIHRvbWJzdG9uZXMgfSk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB9XG4gIHJlbW92ZURvY3VtZW50KGlkLCBjbG9jaykge1xuICAgIHRoaXMuc3RhdGUudXBkYXRlKCh7IGRvY3VtZW50cywgdG9tYnN0b25lcyB9KSA9PiB7XG4gICAgICBkb2N1bWVudHMgPSB7IC4uLmRvY3VtZW50cyB9O1xuICAgICAgZGVsZXRlIGRvY3VtZW50c1tpZF07XG4gICAgICB0b21ic3RvbmVzID0geyAuLi50b21ic3RvbmVzLCBbaWRdOiBjbG9jayB9O1xuICAgICAgcmV0dXJuIHsgZG9jdW1lbnRzLCB0b21ic3RvbmVzIH07XG4gICAgfSk7XG4gIH1cbiAgZ2V0U25hcHNob3QoKSB7XG4gICAgY29uc3QgeyBkb2N1bWVudHMsIHRvbWJzdG9uZXMgfSA9IHRoaXMuc3RhdGUuZ2V0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsb2NrOiB0aGlzLmNsb2NrLFxuICAgICAgdG9tYnN0b25lcyxcbiAgICAgIHNjaGVtYTogdGhpcy5zZXJpYWxpemVkU2NoZW1hLFxuICAgICAgZG9jdW1lbnRzOiBPYmplY3QudmFsdWVzKGRvY3VtZW50cykuZmlsdGVyKChkKSA9PiB0aGlzLmRvY3VtZW50VHlwZXMuaGFzKGQuc3RhdGUudHlwZU5hbWUpKS5tYXAoKGRvYykgPT4gKHtcbiAgICAgICAgc3RhdGU6IGRvYy5zdGF0ZSxcbiAgICAgICAgbGFzdENoYW5nZWRDbG9jazogZG9jLmxhc3RDaGFuZ2VkQ2xvY2tcbiAgICAgIH0pKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNlbmQgYSBtZXNzYWdlIHRvIGEgcGFydGljdWxhciBjbGllbnQuIERlYm91bmNlcyBkYXRhIGV2ZW50c1xuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIGlkIG9mIHRoZSBzZXNzaW9uIHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8uXG4gICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICovXG4gIHNlbmRNZXNzYWdlKHNlc3Npb25JZCwgbWVzc2FnZSkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgdGhpcy5sb2c/Lndhcm4/LihcIlRyaWVkIHRvIHNlbmQgbWVzc2FnZSB0byB1bmtub3duIHNlc3Npb25cIiwgbWVzc2FnZS50eXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24uc3RhdGUgIT09IFJvb21TZXNzaW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmxvZz8ud2Fybj8uKFwiVHJpZWQgdG8gc2VuZCBtZXNzYWdlIHRvIGRpc2Nvbm5lY3RlZCBjbGllbnRcIiwgbWVzc2FnZS50eXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24uc29ja2V0LmlzT3Blbikge1xuICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gXCJwYXRjaFwiICYmIG1lc3NhZ2UudHlwZSAhPT0gXCJwdXNoX3Jlc3VsdFwiKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IFwicG9uZ1wiKSB7XG4gICAgICAgICAgdGhpcy5fZmx1c2hEYXRhTWVzc2FnZXMoc2Vzc2lvbklkKTtcbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uLnNvY2tldC5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzZXNzaW9uLmRlYm91bmNlVGltZXIgPT09IG51bGwpIHtcbiAgICAgICAgICBzZXNzaW9uLnNvY2tldC5zZW5kTWVzc2FnZSh7IHR5cGU6IFwiZGF0YVwiLCBkYXRhOiBbbWVzc2FnZV0gfSk7XG4gICAgICAgICAgc2Vzc2lvbi5kZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICgpID0+IHRoaXMuX2ZsdXNoRGF0YU1lc3NhZ2VzKHNlc3Npb25JZCksXG4gICAgICAgICAgICBEQVRBX01FU1NBR0VfREVCT1VOQ0VfSU5URVJWQUxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlc3Npb24ub3V0c3RhbmRpbmdEYXRhTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhbmNlbFNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgIH1cbiAgfVxuICAvLyBuZWVkcyB0byBhY2NlcHQgc2Vzc2lvbklkIGFuZCBub3QgYSBzZXNzaW9uIGJlY2F1c2UgdGhlIHNlc3Npb24gbWlnaHQgYmUgZGVhZCBieSB0aGUgdGltZVxuICAvLyB0aGUgdGltZXIgZmlyZXNcbiAgX2ZsdXNoRGF0YU1lc3NhZ2VzKHNlc3Npb25JZCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGlmICghc2Vzc2lvbiB8fCBzZXNzaW9uLnN0YXRlICE9PSBSb29tU2Vzc2lvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXNzaW9uLmRlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIGlmIChzZXNzaW9uLm91dHN0YW5kaW5nRGF0YU1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlc3Npb24uc29ja2V0LnNlbmRNZXNzYWdlKHsgdHlwZTogXCJkYXRhXCIsIGRhdGE6IHNlc3Npb24ub3V0c3RhbmRpbmdEYXRhTWVzc2FnZXMgfSk7XG4gICAgICBzZXNzaW9uLm91dHN0YW5kaW5nRGF0YU1lc3NhZ2VzLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcmVtb3ZlU2Vzc2lvbihzZXNzaW9uSWQsIGZhdGFsUmVhc29uKSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICB0aGlzLmxvZz8ud2Fybj8uKFwiVHJpZWQgdG8gcmVtb3ZlIHVua25vd24gc2Vzc2lvblwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9ucy5kZWxldGUoc2Vzc2lvbklkKTtcbiAgICBjb25zdCBwcmVzZW5jZSA9IHRoaXMuZ2V0RG9jdW1lbnQoc2Vzc2lvbi5wcmVzZW5jZUlkID8/IFwiXCIpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoc2Vzc2lvbi5zb2NrZXQuaXNPcGVuKSB7XG4gICAgICAgIGlmIChmYXRhbFJlYXNvbikge1xuICAgICAgICAgIHNlc3Npb24uc29ja2V0LmNsb3NlKFRMU3luY0Vycm9yQ2xvc2VFdmVudENvZGUsIGZhdGFsUmVhc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXNzaW9uLnNvY2tldC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoX2UpIHtcbiAgICB9XG4gICAgaWYgKHByZXNlbmNlKSB7XG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZSgoeyB0b21ic3RvbmVzLCBkb2N1bWVudHMgfSkgPT4ge1xuICAgICAgICBkb2N1bWVudHMgPSB7IC4uLmRvY3VtZW50cyB9O1xuICAgICAgICBkZWxldGUgZG9jdW1lbnRzW3Nlc3Npb24ucHJlc2VuY2VJZF07XG4gICAgICAgIHJldHVybiB7IGRvY3VtZW50cywgdG9tYnN0b25lcyB9O1xuICAgICAgfSk7XG4gICAgICB0aGlzLmJyb2FkY2FzdFBhdGNoKHtcbiAgICAgICAgZGlmZjogeyBbc2Vzc2lvbi5wcmVzZW5jZUlkXTogW1JlY29yZE9wVHlwZS5SZW1vdmVdIH0sXG4gICAgICAgIHNvdXJjZVNlc3Npb25JZDogc2Vzc2lvbklkXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fcmVtb3ZlZFwiLCB7IHNlc3Npb25JZCwgbWV0YTogc2Vzc2lvbi5tZXRhIH0pO1xuICAgIGlmICh0aGlzLnNlc3Npb25zLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJyb29tX2JlY2FtZV9lbXB0eVwiKTtcbiAgICB9XG4gIH1cbiAgY2FuY2VsU2Vzc2lvbihzZXNzaW9uSWQpIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24uc3RhdGUgPT09IFJvb21TZXNzaW9uU3RhdGUuQXdhaXRpbmdSZW1vdmFsKSB7XG4gICAgICB0aGlzLmxvZz8ud2Fybj8uKFwiVHJpZWQgdG8gY2FuY2VsIHNlc3Npb24gdGhhdCBpcyBhbHJlYWR5IGF3YWl0aW5nIHJlbW92YWxcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbnMuc2V0KHNlc3Npb25JZCwge1xuICAgICAgc3RhdGU6IFJvb21TZXNzaW9uU3RhdGUuQXdhaXRpbmdSZW1vdmFsLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgcHJlc2VuY2VJZDogc2Vzc2lvbi5wcmVzZW5jZUlkLFxuICAgICAgc29ja2V0OiBzZXNzaW9uLnNvY2tldCxcbiAgICAgIGNhbmNlbGxhdGlvblRpbWU6IERhdGUubm93KCksXG4gICAgICBtZXRhOiBzZXNzaW9uLm1ldGEsXG4gICAgICBpc1JlYWRvbmx5OiBzZXNzaW9uLmlzUmVhZG9ubHksXG4gICAgICByZXF1aXJlc0xlZ2FjeVJlamVjdGlvbjogc2Vzc2lvbi5yZXF1aXJlc0xlZ2FjeVJlamVjdGlvblxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBCcm9hZGNhc3QgYSBtZXNzYWdlIHRvIGFsbCBjb25uZWN0ZWQgY2xpZW50cyBleGNlcHQgdGhlIG9uZSB3aXRoIHRoZSBzZXNzaW9uSWQgcHJvdmlkZWQuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gYnJvYWRjYXN0LlxuICAgKi9cbiAgYnJvYWRjYXN0UGF0Y2gobWVzc2FnZSkge1xuICAgIGNvbnN0IHsgZGlmZiwgc291cmNlU2Vzc2lvbklkIH0gPSBtZXNzYWdlO1xuICAgIHRoaXMuc2Vzc2lvbnMuZm9yRWFjaCgoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKHNlc3Npb24uc3RhdGUgIT09IFJvb21TZXNzaW9uU3RhdGUuQ29ubmVjdGVkKSByZXR1cm47XG4gICAgICBpZiAoc291cmNlU2Vzc2lvbklkID09PSBzZXNzaW9uLnNlc3Npb25JZCkgcmV0dXJuO1xuICAgICAgaWYgKCFzZXNzaW9uLnNvY2tldC5pc09wZW4pIHtcbiAgICAgICAgdGhpcy5jYW5jZWxTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzID0gdGhpcy5taWdyYXRlRGlmZkZvclNlc3Npb24oc2Vzc2lvbi5zZXJpYWxpemVkU2NoZW1hLCBkaWZmKTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRoaXMucmVqZWN0U2Vzc2lvbihcbiAgICAgICAgICBzZXNzaW9uLnNlc3Npb25JZCxcbiAgICAgICAgICByZXMuZXJyb3IgPT09IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uVGFyZ2V0VmVyc2lvblRvb05ldyA/IFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5TRVJWRVJfVE9PX09MRCA6IFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5DTElFTlRfVE9PX09MRFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHNlc3Npb24uc2Vzc2lvbklkLCB7XG4gICAgICAgIHR5cGU6IFwicGF0Y2hcIixcbiAgICAgICAgZGlmZjogcmVzLnZhbHVlLFxuICAgICAgICBzZXJ2ZXJDbG9jazogdGhpcy5jbG9ja1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFdoZW4gYSBjbGllbnQgY29ubmVjdHMgdG8gdGhlIHJvb20sIGFkZCB0aGVtIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMgYW5kIHRoZW4gbWVyZ2UgdGhlIGhpc3RvcnlcbiAgICogZG93biBpbnRvIHRoZSBzbmFwc2hvdHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGFuZGxlTmV3U2Vzc2lvbihvcHRzKSB7XG4gICAgY29uc3QgeyBzZXNzaW9uSWQsIHNvY2tldCwgbWV0YSwgaXNSZWFkb25seSB9ID0gb3B0cztcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk7XG4gICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbklkLCB7XG4gICAgICBzdGF0ZTogUm9vbVNlc3Npb25TdGF0ZS5Bd2FpdGluZ0Nvbm5lY3RNZXNzYWdlLFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgc29ja2V0LFxuICAgICAgcHJlc2VuY2VJZDogZXhpc3Rpbmc/LnByZXNlbmNlSWQgPz8gdGhpcy5wcmVzZW5jZVR5cGU/LmNyZWF0ZUlkKCkgPz8gbnVsbCxcbiAgICAgIHNlc3Npb25TdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICBtZXRhLFxuICAgICAgaXNSZWFkb25seTogaXNSZWFkb25seSA/PyBmYWxzZSxcbiAgICAgIC8vIHRoaXMgZ2V0cyBzZXQgbGF0ZXIgZHVyaW5nIGhhbmRsZUNvbm5lY3RNZXNzYWdlXG4gICAgICByZXF1aXJlc0xlZ2FjeVJlamVjdGlvbjogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogV2hlbiB3ZSBzZW5kIGEgZGlmZiB0byBhIGNsaWVudCwgaWYgdGhhdCBjbGllbnQgaXMgb24gYSBsb3dlciB2ZXJzaW9uIHRoYW4gdXMsIHdlIG5lZWQgdG8gbWFrZVxuICAgKiB0aGUgZGlmZiBjb21wYXRpYmxlIHdpdGggdGhlaXIgdmVyc2lvbi4gQXQgdGhlIG1vbWVudCB0aGlzIG1lYW5zIG1pZ3JhdGluZyBlYWNoIGFmZmVjdGVkIHJlY29yZFxuICAgKiB0byB0aGUgY2xpZW50J3MgdmVyc2lvbiBhbmQgc2VuZGluZyB0aGUgd2hvbGUgcmVjb3JkIGFnYWluLiBXZSBjYW4gb3B0aW1pemUgdGhpcyBsYXRlciBieVxuICAgKiBrZWVwaW5nIHRoZSBwcmV2aW91cyB2ZXJzaW9ucyBvZiByZWNvcmRzIGFyb3VuZCBsb25nIGVub3VnaCB0byByZWNhbGN1bGF0ZSB0aGVzZSBkaWZmcyBmb3JcbiAgICogb2xkZXIgY2xpZW50IHZlcnNpb25zLlxuICAgKi9cbiAgbWlncmF0ZURpZmZGb3JTZXNzaW9uKHNlcmlhbGl6ZWRTY2hlbWEsIGRpZmYpIHtcbiAgICBpZiAoc2VyaWFsaXplZFNjaGVtYSA9PT0gdGhpcy5zZXJpYWxpemVkU2NoZW1hKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGRpZmYpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgb3BdIG9mIE9iamVjdC5lbnRyaWVzKGRpZmYpKSB7XG4gICAgICBpZiAob3BbMF0gPT09IFJlY29yZE9wVHlwZS5SZW1vdmUpIHtcbiAgICAgICAgcmVzdWx0W2lkXSA9IG9wO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1pZ3JhdGlvblJlc3VsdCA9IHRoaXMuc2NoZW1hLm1pZ3JhdGVQZXJzaXN0ZWRSZWNvcmQoXG4gICAgICAgIHRoaXMuZ2V0RG9jdW1lbnQoaWQpLnN0YXRlLFxuICAgICAgICBzZXJpYWxpemVkU2NoZW1hLFxuICAgICAgICBcImRvd25cIlxuICAgICAgKTtcbiAgICAgIGlmIChtaWdyYXRpb25SZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuZXJyKG1pZ3JhdGlvblJlc3VsdC5yZWFzb24pO1xuICAgICAgfVxuICAgICAgcmVzdWx0W2lkXSA9IFtSZWNvcmRPcFR5cGUuUHV0LCBtaWdyYXRpb25SZXN1bHQudmFsdWVdO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHNlcnZlciByZWNlaXZlcyBhIG1lc3NhZ2UgZnJvbSB0aGUgY2xpZW50cyBDdXJyZW50bHksIHN1cHBvcnRzIGNvbm5lY3QgYW5kIHBhdGNoZXMuXG4gICAqIEludmFsaWQgbWVzc2FnZXMgdHlwZXMgdGhyb3dzIGFuIGVycm9yLiBDdXJyZW50bHksIGRvZXNuJ3QgdmFsaWRhdGUgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIHRoYXQgc2VudCB0aGUgbWVzc2FnZVxuICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRoYXQgd2FzIHNlbnRcbiAgICovXG4gIGFzeW5jIGhhbmRsZU1lc3NhZ2Uoc2Vzc2lvbklkLCBtZXNzYWdlKSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICB0aGlzLmxvZz8ud2Fybj8uKFwiUmVjZWl2ZWQgbWVzc2FnZSBmcm9tIHVua25vd24gc2Vzc2lvblwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJjb25uZWN0XCI6IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ29ubmVjdFJlcXVlc3Qoc2Vzc2lvbiwgbWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwicHVzaFwiOiB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVB1c2hSZXF1ZXN0KHNlc3Npb24sIG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgY2FzZSBcInBpbmdcIjoge1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0ZSA9PT0gUm9vbVNlc3Npb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICBzZXNzaW9uLmxhc3RJbnRlcmFjdGlvblRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRNZXNzYWdlKHNlc3Npb24uc2Vzc2lvbklkLCB7IHR5cGU6IFwicG9uZ1wiIH0pO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBleGhhdXN0aXZlU3dpdGNoRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBJZiB0aGUgY2xpZW50IGlzIG91dCBvZiBkYXRlLCBvciB3ZSBhcmUgb3V0IG9mIGRhdGUsIHdlIG5lZWQgdG8gbGV0IHRoZW0ga25vdyAqL1xuICByZWplY3RTZXNzaW9uKHNlc3Npb25JZCwgZmF0YWxSZWFzb24pIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHJldHVybjtcbiAgICBpZiAoIWZhdGFsUmVhc29uKSB7XG4gICAgICB0aGlzLnJlbW92ZVNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24ucmVxdWlyZXNMZWdhY3lSZWplY3Rpb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzZXNzaW9uLnNvY2tldC5pc09wZW4pIHtcbiAgICAgICAgICBsZXQgbGVnYWN5UmVhc29uO1xuICAgICAgICAgIHN3aXRjaCAoZmF0YWxSZWFzb24pIHtcbiAgICAgICAgICAgIGNhc2UgVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLkNMSUVOVF9UT09fT0xEOlxuICAgICAgICAgICAgICBsZWdhY3lSZWFzb24gPSBUTEluY29tcGF0aWJpbGl0eVJlYXNvbi5DbGllbnRUb29PbGQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uU0VSVkVSX1RPT19PTEQ6XG4gICAgICAgICAgICAgIGxlZ2FjeVJlYXNvbiA9IFRMSW5jb21wYXRpYmlsaXR5UmVhc29uLlNlcnZlclRvb09sZDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5JTlZBTElEX1JFQ09SRDpcbiAgICAgICAgICAgICAgbGVnYWN5UmVhc29uID0gVExJbmNvbXBhdGliaWxpdHlSZWFzb24uSW52YWxpZFJlY29yZDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBsZWdhY3lSZWFzb24gPSBUTEluY29tcGF0aWJpbGl0eVJlYXNvbi5JbnZhbGlkT3BlcmF0aW9uO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgc2Vzc2lvbi5zb2NrZXQuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogXCJpbmNvbXBhdGliaWxpdHlfZXJyb3JcIixcbiAgICAgICAgICAgIHJlYXNvbjogbGVnYWN5UmVhc29uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMucmVtb3ZlU2Vzc2lvbihzZXNzaW9uSWQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZVNlc3Npb24oc2Vzc2lvbklkLCBmYXRhbFJlYXNvbik7XG4gICAgfVxuICB9XG4gIGhhbmRsZUNvbm5lY3RSZXF1ZXN0KHNlc3Npb24sIG1lc3NhZ2UpIHtcbiAgICBsZXQgdGhlaXJQcm90b2NvbFZlcnNpb24gPSBtZXNzYWdlLnByb3RvY29sVmVyc2lvbjtcbiAgICBpZiAodGhlaXJQcm90b2NvbFZlcnNpb24gPT09IDUpIHtcbiAgICAgIHRoZWlyUHJvdG9jb2xWZXJzaW9uID0gNjtcbiAgICB9XG4gICAgc2Vzc2lvbi5yZXF1aXJlc0xlZ2FjeVJlamVjdGlvbiA9IHRoZWlyUHJvdG9jb2xWZXJzaW9uID09PSA2O1xuICAgIGlmICh0aGVpclByb3RvY29sVmVyc2lvbiA9PT0gNikge1xuICAgICAgdGhlaXJQcm90b2NvbFZlcnNpb24rKztcbiAgICB9XG4gICAgaWYgKHRoZWlyUHJvdG9jb2xWZXJzaW9uID09IG51bGwgfHwgdGhlaXJQcm90b2NvbFZlcnNpb24gPCBnZXRUbHN5bmNQcm90b2NvbFZlcnNpb24oKSkge1xuICAgICAgdGhpcy5yZWplY3RTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkLCBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uQ0xJRU5UX1RPT19PTEQpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAodGhlaXJQcm90b2NvbFZlcnNpb24gPiBnZXRUbHN5bmNQcm90b2NvbFZlcnNpb24oKSkge1xuICAgICAgdGhpcy5yZWplY3RTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkLCBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uU0VSVkVSX1RPT19PTEQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zY2hlbWEgPT0gbnVsbCkge1xuICAgICAgdGhpcy5yZWplY3RTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkLCBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uQ0xJRU5UX1RPT19PTEQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtaWdyYXRpb25zID0gdGhpcy5zY2hlbWEuZ2V0TWlncmF0aW9uc1NpbmNlKG1lc3NhZ2Uuc2NoZW1hKTtcbiAgICBpZiAoIW1pZ3JhdGlvbnMub2sgfHwgbWlncmF0aW9ucy52YWx1ZS5zb21lKChtKSA9PiBtLnNjb3BlID09PSBcInN0b3JlXCIgfHwgIW0uZG93bikpIHtcbiAgICAgIHRoaXMucmVqZWN0U2Vzc2lvbihzZXNzaW9uLnNlc3Npb25JZCwgVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLkNMSUVOVF9UT09fT0xEKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvblNjaGVtYSA9IGlzRXF1YWwobWVzc2FnZS5zY2hlbWEsIHRoaXMuc2VyaWFsaXplZFNjaGVtYSkgPyB0aGlzLnNlcmlhbGl6ZWRTY2hlbWEgOiBtZXNzYWdlLnNjaGVtYTtcbiAgICBjb25zdCBjb25uZWN0ID0gKG1zZykgPT4ge1xuICAgICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbi5zZXNzaW9uSWQsIHtcbiAgICAgICAgc3RhdGU6IFJvb21TZXNzaW9uU3RhdGUuQ29ubmVjdGVkLFxuICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb24uc2Vzc2lvbklkLFxuICAgICAgICBwcmVzZW5jZUlkOiBzZXNzaW9uLnByZXNlbmNlSWQsXG4gICAgICAgIHNvY2tldDogc2Vzc2lvbi5zb2NrZXQsXG4gICAgICAgIHNlcmlhbGl6ZWRTY2hlbWE6IHNlc3Npb25TY2hlbWEsXG4gICAgICAgIGxhc3RJbnRlcmFjdGlvblRpbWU6IERhdGUubm93KCksXG4gICAgICAgIGRlYm91bmNlVGltZXI6IG51bGwsXG4gICAgICAgIG91dHN0YW5kaW5nRGF0YU1lc3NhZ2VzOiBbXSxcbiAgICAgICAgbWV0YTogc2Vzc2lvbi5tZXRhLFxuICAgICAgICBpc1JlYWRvbmx5OiBzZXNzaW9uLmlzUmVhZG9ubHksXG4gICAgICAgIHJlcXVpcmVzTGVnYWN5UmVqZWN0aW9uOiBzZXNzaW9uLnJlcXVpcmVzTGVnYWN5UmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoc2Vzc2lvbi5zZXNzaW9uSWQsIG1zZyk7XG4gICAgfTtcbiAgICB0cmFuc2FjdGlvbigocm9sbGJhY2spID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgLy8gaWYgdGhlIGNsaWVudCByZXF1ZXN0cyBjaGFuZ2VzIHNpbmNlIGEgdGltZSBiZWZvcmUgd2UgaGF2ZSB0b21ic3RvbmUgaGlzdG9yeSwgc2VuZCB0aGVtIHRoZSBmdWxsIHN0YXRlXG4gICAgICAgIG1lc3NhZ2UubGFzdFNlcnZlckNsb2NrIDwgdGhpcy50b21ic3RvbmVIaXN0b3J5U3RhcnRzQXRDbG9jayB8fCAvLyBzaW1pbGFybHksIGlmIHRoZXkgYXNrIGZvciBhIHRpbWUgd2UgaGF2ZW4ndCByZWFjaGVkIHlldCwgc2VuZCB0aGVtIHRoZSBmdWxsIHN0YXRlXG4gICAgICAgIC8vIHRoaXMgd2lsbCBvbmx5IGhhcHBlbiBpZiB0aGUgREIgaXMgcmVzZXQgKG9yIHRoZXJlIGlzIG5vIGRiKSBhbmQgdGhlIHNlcnZlciByZXN0YXJ0c1xuICAgICAgICAvLyBvciBpZiB0aGUgc2VydmVyIGV4aXRzL2NyYXNoZXMgd2l0aCB1bnBlcnNpc3RlZCBjaGFuZ2VzXG4gICAgICAgIG1lc3NhZ2UubGFzdFNlcnZlckNsb2NrID4gdGhpcy5jbG9ja1xuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBbaWQsIGRvY10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zdGF0ZS5nZXQoKS5kb2N1bWVudHMpKSB7XG4gICAgICAgICAgaWYgKGlkICE9PSBzZXNzaW9uLnByZXNlbmNlSWQpIHtcbiAgICAgICAgICAgIGRpZmZbaWRdID0gW1JlY29yZE9wVHlwZS5QdXQsIGRvYy5zdGF0ZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pZ3JhdGVkID0gdGhpcy5taWdyYXRlRGlmZkZvclNlc3Npb24oc2Vzc2lvblNjaGVtYSwgZGlmZik7XG4gICAgICAgIGlmICghbWlncmF0ZWQub2spIHtcbiAgICAgICAgICByb2xsYmFjaygpO1xuICAgICAgICAgIHRoaXMucmVqZWN0U2Vzc2lvbihcbiAgICAgICAgICAgIHNlc3Npb24uc2Vzc2lvbklkLFxuICAgICAgICAgICAgbWlncmF0ZWQuZXJyb3IgPT09IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uVGFyZ2V0VmVyc2lvblRvb05ldyA/IFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5TRVJWRVJfVE9PX09MRCA6IFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5DTElFTlRfVE9PX09MRFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Qoe1xuICAgICAgICAgIHR5cGU6IFwiY29ubmVjdFwiLFxuICAgICAgICAgIGNvbm5lY3RSZXF1ZXN0SWQ6IG1lc3NhZ2UuY29ubmVjdFJlcXVlc3RJZCxcbiAgICAgICAgICBoeWRyYXRpb25UeXBlOiBcIndpcGVfYWxsXCIsXG4gICAgICAgICAgcHJvdG9jb2xWZXJzaW9uOiBnZXRUbHN5bmNQcm90b2NvbFZlcnNpb24oKSxcbiAgICAgICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgIHNlcnZlckNsb2NrOiB0aGlzLmNsb2NrLFxuICAgICAgICAgIGRpZmY6IG1pZ3JhdGVkLnZhbHVlLFxuICAgICAgICAgIGlzUmVhZG9ubHk6IHNlc3Npb24uaXNSZWFkb25seVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSB7fTtcbiAgICAgICAgY29uc3QgdXBkYXRlZERvY3MgPSBPYmplY3QudmFsdWVzKHRoaXMuc3RhdGUuZ2V0KCkuZG9jdW1lbnRzKS5maWx0ZXIoXG4gICAgICAgICAgKGRvYykgPT4gZG9jLmxhc3RDaGFuZ2VkQ2xvY2sgPiBtZXNzYWdlLmxhc3RTZXJ2ZXJDbG9ja1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBwcmVzZW5jZURvY3MgPSB0aGlzLnByZXNlbmNlVHlwZSA/IE9iamVjdC52YWx1ZXModGhpcy5zdGF0ZS5nZXQoKS5kb2N1bWVudHMpLmZpbHRlcihcbiAgICAgICAgICAoZG9jKSA9PiB0aGlzLnByZXNlbmNlVHlwZS50eXBlTmFtZSA9PT0gZG9jLnN0YXRlLnR5cGVOYW1lICYmIGRvYy5zdGF0ZS5pZCAhPT0gc2Vzc2lvbi5wcmVzZW5jZUlkXG4gICAgICAgICkgOiBbXTtcbiAgICAgICAgY29uc3QgZGVsZXRlZERvY3NJZHMgPSBPYmplY3QuZW50cmllcyh0aGlzLnN0YXRlLmdldCgpLnRvbWJzdG9uZXMpLmZpbHRlcigoW19pZCwgZGVsZXRlZEF0Q2xvY2tdKSA9PiBkZWxldGVkQXRDbG9jayA+IG1lc3NhZ2UubGFzdFNlcnZlckNsb2NrKS5tYXAoKFtpZF0pID0+IGlkKTtcbiAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgdXBkYXRlZERvY3MpIHtcbiAgICAgICAgICBkaWZmW2RvYy5zdGF0ZS5pZF0gPSBbUmVjb3JkT3BUeXBlLlB1dCwgZG9jLnN0YXRlXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBwcmVzZW5jZURvY3MpIHtcbiAgICAgICAgICBkaWZmW2RvYy5zdGF0ZS5pZF0gPSBbUmVjb3JkT3BUeXBlLlB1dCwgZG9jLnN0YXRlXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGRvY0lkIG9mIGRlbGV0ZWREb2NzSWRzKSB7XG4gICAgICAgICAgZGlmZltkb2NJZF0gPSBbUmVjb3JkT3BUeXBlLlJlbW92ZV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWlncmF0ZWQgPSB0aGlzLm1pZ3JhdGVEaWZmRm9yU2Vzc2lvbihzZXNzaW9uU2NoZW1hLCBkaWZmKTtcbiAgICAgICAgaWYgKCFtaWdyYXRlZC5vaykge1xuICAgICAgICAgIHJvbGxiYWNrKCk7XG4gICAgICAgICAgdGhpcy5yZWplY3RTZXNzaW9uKFxuICAgICAgICAgICAgc2Vzc2lvbi5zZXNzaW9uSWQsXG4gICAgICAgICAgICBtaWdyYXRlZC5lcnJvciA9PT0gTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5UYXJnZXRWZXJzaW9uVG9vTmV3ID8gVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLlNFUlZFUl9UT09fT0xEIDogVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLkNMSUVOVF9UT09fT0xEXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdCh7XG4gICAgICAgICAgdHlwZTogXCJjb25uZWN0XCIsXG4gICAgICAgICAgY29ubmVjdFJlcXVlc3RJZDogbWVzc2FnZS5jb25uZWN0UmVxdWVzdElkLFxuICAgICAgICAgIGh5ZHJhdGlvblR5cGU6IFwid2lwZV9wcmVzZW5jZVwiLFxuICAgICAgICAgIHNjaGVtYTogdGhpcy5zY2hlbWEuc2VyaWFsaXplKCksXG4gICAgICAgICAgcHJvdG9jb2xWZXJzaW9uOiBnZXRUbHN5bmNQcm90b2NvbFZlcnNpb24oKSxcbiAgICAgICAgICBzZXJ2ZXJDbG9jazogdGhpcy5jbG9jayxcbiAgICAgICAgICBkaWZmOiBtaWdyYXRlZC52YWx1ZSxcbiAgICAgICAgICBpc1JlYWRvbmx5OiBzZXNzaW9uLmlzUmVhZG9ubHlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlUHVzaFJlcXVlc3Qoc2Vzc2lvbiwgbWVzc2FnZSkge1xuICAgIGlmIChzZXNzaW9uICYmIHNlc3Npb24uc3RhdGUgIT09IFJvb21TZXNzaW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICBzZXNzaW9uLmxhc3RJbnRlcmFjdGlvblRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICB0aGlzLmNsb2NrKys7XG4gICAgY29uc3QgaW5pdGlhbERvY3VtZW50Q2xvY2sgPSB0aGlzLmRvY3VtZW50Q2xvY2s7XG4gICAgdHJhbnNhY3Rpb24oKHJvbGxiYWNrKSA9PiB7XG4gICAgICBjb25zdCBkb2NDaGFuZ2VzID0geyBkaWZmOiBudWxsIH07XG4gICAgICBjb25zdCBwcmVzZW5jZUNoYW5nZXMgPSB7IGRpZmY6IG51bGwgfTtcbiAgICAgIGNvbnN0IHByb3BhZ2F0ZU9wID0gKGNoYW5nZXMsIGlkLCBvcCkgPT4ge1xuICAgICAgICBpZiAoIWNoYW5nZXMuZGlmZikgY2hhbmdlcy5kaWZmID0ge307XG4gICAgICAgIGNoYW5nZXMuZGlmZltpZF0gPSBvcDtcbiAgICAgIH07XG4gICAgICBjb25zdCBmYWlsID0gKHJlYXNvbiwgdW5kZXJseWluZ0Vycm9yKSA9PiB7XG4gICAgICAgIHJvbGxiYWNrKCk7XG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgdGhpcy5yZWplY3RTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkLCByZWFzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImZhaWxlZCB0byBhcHBseSBjaGFuZ2VzOiBcIiArIHJlYXNvbiwgdW5kZXJseWluZ0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwidGVzdFwiKSB7XG4gICAgICAgICAgdGhpcy5sb2c/LmVycm9yPy4oXCJmYWlsZWQgdG8gYXBwbHkgcHVzaFwiLCByZWFzb24sIG1lc3NhZ2UsIHVuZGVybHlpbmdFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnIodm9pZCAwKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBhZGREb2N1bWVudCA9IChjaGFuZ2VzLCBpZCwgX3N0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHNlc3Npb24gPyB0aGlzLnNjaGVtYS5taWdyYXRlUGVyc2lzdGVkUmVjb3JkKF9zdGF0ZSwgc2Vzc2lvbi5zZXJpYWxpemVkU2NoZW1hLCBcInVwXCIpIDogeyB0eXBlOiBcInN1Y2Nlc3NcIiwgdmFsdWU6IF9zdGF0ZSB9O1xuICAgICAgICBpZiAocmVzLnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgIHJldHVybiBmYWlsKFxuICAgICAgICAgICAgcmVzLnJlYXNvbiA9PT0gTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5UYXJnZXRWZXJzaW9uVG9vT2xkID8gVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLlNFUlZFUl9UT09fT0xEIDogVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLkNMSUVOVF9UT09fT0xEXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZhbHVlOiBzdGF0ZSB9ID0gcmVzO1xuICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmdldERvY3VtZW50KGlkKTtcbiAgICAgICAgaWYgKGRvYykge1xuICAgICAgICAgIGNvbnN0IGRpZmYgPSBkb2MucmVwbGFjZVN0YXRlKHN0YXRlLCB0aGlzLmNsb2NrKTtcbiAgICAgICAgICBpZiAoIWRpZmYub2spIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5JTlZBTElEX1JFQ09SRCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkaWZmLnZhbHVlKSB7XG4gICAgICAgICAgICBwcm9wYWdhdGVPcChjaGFuZ2VzLCBpZCwgW1JlY29yZE9wVHlwZS5QYXRjaCwgZGlmZi52YWx1ZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFkZERvY3VtZW50KGlkLCBzdGF0ZSwgdGhpcy5jbG9jayk7XG4gICAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5JTlZBTElEX1JFQ09SRCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHByb3BhZ2F0ZU9wKGNoYW5nZXMsIGlkLCBbUmVjb3JkT3BUeXBlLlB1dCwgc3RhdGVdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgICB9O1xuICAgICAgY29uc3QgcGF0Y2hEb2N1bWVudCA9IChjaGFuZ2VzLCBpZCwgcGF0Y2gpID0+IHtcbiAgICAgICAgY29uc3QgZG9jID0gdGhpcy5nZXREb2N1bWVudChpZCk7XG4gICAgICAgIGlmICghZG9jKSByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgICAgIGNvbnN0IGRvd25ncmFkZWQgPSBzZXNzaW9uID8gdGhpcy5zY2hlbWEubWlncmF0ZVBlcnNpc3RlZFJlY29yZChkb2Muc3RhdGUsIHNlc3Npb24uc2VyaWFsaXplZFNjaGVtYSwgXCJkb3duXCIpIDogeyB0eXBlOiBcInN1Y2Nlc3NcIiwgdmFsdWU6IGRvYy5zdGF0ZSB9O1xuICAgICAgICBpZiAoZG93bmdyYWRlZC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFpbChUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uQ0xJRU5UX1RPT19PTEQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb3duZ3JhZGVkLnZhbHVlID09PSBkb2Muc3RhdGUpIHtcbiAgICAgICAgICBjb25zdCBkaWZmID0gZG9jLm1lcmdlRGlmZihwYXRjaCwgdGhpcy5jbG9jayk7XG4gICAgICAgICAgaWYgKCFkaWZmLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFpbChUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uSU5WQUxJRF9SRUNPUkQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGlmZi52YWx1ZSkge1xuICAgICAgICAgICAgcHJvcGFnYXRlT3AoY2hhbmdlcywgaWQsIFtSZWNvcmRPcFR5cGUuUGF0Y2gsIGRpZmYudmFsdWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcGF0Y2hlZCA9IGFwcGx5T2JqZWN0RGlmZihkb3duZ3JhZGVkLnZhbHVlLCBwYXRjaCk7XG4gICAgICAgICAgY29uc3QgdXBncmFkZWQgPSBzZXNzaW9uID8gdGhpcy5zY2hlbWEubWlncmF0ZVBlcnNpc3RlZFJlY29yZChwYXRjaGVkLCBzZXNzaW9uLnNlcmlhbGl6ZWRTY2hlbWEsIFwidXBcIikgOiB7IHR5cGU6IFwic3VjY2Vzc1wiLCB2YWx1ZTogcGF0Y2hlZCB9O1xuICAgICAgICAgIGlmICh1cGdyYWRlZC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5DTElFTlRfVE9PX09MRCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGRpZmYgPSBkb2MucmVwbGFjZVN0YXRlKHVwZ3JhZGVkLnZhbHVlLCB0aGlzLmNsb2NrKTtcbiAgICAgICAgICBpZiAoIWRpZmYub2spIHtcbiAgICAgICAgICAgIHJldHVybiBmYWlsKFRMU3luY0Vycm9yQ2xvc2VFdmVudFJlYXNvbi5JTlZBTElEX1JFQ09SRCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkaWZmLnZhbHVlKSB7XG4gICAgICAgICAgICBwcm9wYWdhdGVPcChjaGFuZ2VzLCBpZCwgW1JlY29yZE9wVHlwZS5QYXRjaCwgZGlmZi52YWx1ZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgICB9O1xuICAgICAgY29uc3QgeyBjbGllbnRDbG9jayB9ID0gbWVzc2FnZTtcbiAgICAgIGlmICh0aGlzLnByZXNlbmNlVHlwZSAmJiBzZXNzaW9uPy5wcmVzZW5jZUlkICYmIFwicHJlc2VuY2VcIiBpbiBtZXNzYWdlICYmIG1lc3NhZ2UucHJlc2VuY2UpIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJzZXNzaW9uIGlzIHJlcXVpcmVkIGZvciBwcmVzZW5jZSBwdXNoZXNcIik7XG4gICAgICAgIGNvbnN0IGlkID0gc2Vzc2lvbi5wcmVzZW5jZUlkO1xuICAgICAgICBjb25zdCBbdHlwZSwgdmFsXSA9IG1lc3NhZ2UucHJlc2VuY2U7XG4gICAgICAgIGNvbnN0IHsgdHlwZU5hbWUgfSA9IHRoaXMucHJlc2VuY2VUeXBlO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlIFJlY29yZE9wVHlwZS5QdXQ6IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFkZERvY3VtZW50KHByZXNlbmNlQ2hhbmdlcywgaWQsIHsgLi4udmFsLCBpZCwgdHlwZU5hbWUgfSk7XG4gICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgUmVjb3JkT3BUeXBlLlBhdGNoOiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBwYXRjaERvY3VtZW50KHByZXNlbmNlQ2hhbmdlcywgaWQsIHtcbiAgICAgICAgICAgICAgLi4udmFsLFxuICAgICAgICAgICAgICBpZDogW1ZhbHVlT3BUeXBlLlB1dCwgaWRdLFxuICAgICAgICAgICAgICB0eXBlTmFtZTogW1ZhbHVlT3BUeXBlLlB1dCwgdHlwZU5hbWVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZXNzYWdlLmRpZmYgJiYgIXNlc3Npb24/LmlzUmVhZG9ubHkpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaWQsIG9wXSBvZiBPYmplY3QuZW50cmllcyhtZXNzYWdlLmRpZmYpKSB7XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgY2FzZSBSZWNvcmRPcFR5cGUuUHV0OiB7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5kb2N1bWVudFR5cGVzLmhhcyhvcFsxXS50eXBlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbChUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uSU5WQUxJRF9SRUNPUkQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFkZERvY3VtZW50KGRvY0NoYW5nZXMsIGlkLCBvcFsxXSk7XG4gICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBSZWNvcmRPcFR5cGUuUGF0Y2g6IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzID0gcGF0Y2hEb2N1bWVudChkb2NDaGFuZ2VzLCBpZCwgb3BbMV0pO1xuICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgUmVjb3JkT3BUeXBlLlJlbW92ZToge1xuICAgICAgICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmdldERvY3VtZW50KGlkKTtcbiAgICAgICAgICAgICAgaWYgKCFkb2MpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLnJlbW92ZURvY3VtZW50KGlkLCB0aGlzLmNsb2NrKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnBydW5lVG9tYnN0b25lcywgMCk7XG4gICAgICAgICAgICAgIHByb3BhZ2F0ZU9wKGRvY0NoYW5nZXMsIGlkLCBvcCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICAvLyBpZiB0aGVyZSB3YXMgb25seSBhIHByZXNlbmNlIHB1c2gsIHRoZSBjbGllbnQgZG9lc24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIGFzaWRlIGZyb21cbiAgICAgICAgLy8gc2hpZnQgdGhlIHB1c2ggcmVxdWVzdC5cbiAgICAgICAgIW1lc3NhZ2UuZGlmZiB8fCBpc0VxdWFsKGRvY0NoYW5nZXMuZGlmZiwgbWVzc2FnZS5kaWZmKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShzZXNzaW9uLnNlc3Npb25JZCwge1xuICAgICAgICAgICAgdHlwZTogXCJwdXNoX3Jlc3VsdFwiLFxuICAgICAgICAgICAgc2VydmVyQ2xvY2s6IHRoaXMuY2xvY2ssXG4gICAgICAgICAgICBjbGllbnRDbG9jayxcbiAgICAgICAgICAgIGFjdGlvbjogXCJjb21taXRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFkb2NDaGFuZ2VzLmRpZmYpIHtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHNlc3Npb24uc2Vzc2lvbklkLCB7XG4gICAgICAgICAgICB0eXBlOiBcInB1c2hfcmVzdWx0XCIsXG4gICAgICAgICAgICBzZXJ2ZXJDbG9jazogdGhpcy5jbG9jayxcbiAgICAgICAgICAgIGNsaWVudENsb2NrLFxuICAgICAgICAgICAgYWN0aW9uOiBcImRpc2NhcmRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgIGNvbnN0IG1pZ3JhdGVSZXN1bHQgPSB0aGlzLm1pZ3JhdGVEaWZmRm9yU2Vzc2lvbihcbiAgICAgICAgICAgIHNlc3Npb24uc2VyaWFsaXplZFNjaGVtYSxcbiAgICAgICAgICAgIGRvY0NoYW5nZXMuZGlmZlxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFtaWdyYXRlUmVzdWx0Lm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFpbChcbiAgICAgICAgICAgICAgbWlncmF0ZVJlc3VsdC5lcnJvciA9PT0gTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5UYXJnZXRWZXJzaW9uVG9vTmV3ID8gVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLlNFUlZFUl9UT09fT0xEIDogVExTeW5jRXJyb3JDbG9zZUV2ZW50UmVhc29uLkNMSUVOVF9UT09fT0xEXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHNlc3Npb24uc2Vzc2lvbklkLCB7XG4gICAgICAgICAgICB0eXBlOiBcInB1c2hfcmVzdWx0XCIsXG4gICAgICAgICAgICBzZXJ2ZXJDbG9jazogdGhpcy5jbG9jayxcbiAgICAgICAgICAgIGNsaWVudENsb2NrLFxuICAgICAgICAgICAgYWN0aW9uOiB7IHJlYmFzZVdpdGhEaWZmOiBtaWdyYXRlUmVzdWx0LnZhbHVlIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRvY0NoYW5nZXMuZGlmZiB8fCBwcmVzZW5jZUNoYW5nZXMuZGlmZikge1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFBhdGNoKHtcbiAgICAgICAgICBzb3VyY2VTZXNzaW9uSWQ6IHNlc3Npb24/LnNlc3Npb25JZCxcbiAgICAgICAgICBkaWZmOiB7XG4gICAgICAgICAgICAuLi5kb2NDaGFuZ2VzLmRpZmYsXG4gICAgICAgICAgICAuLi5wcmVzZW5jZUNoYW5nZXMuZGlmZlxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9jQ2hhbmdlcy5kaWZmKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRDbG9jayA9IHRoaXMuY2xvY2s7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSk7XG4gICAgaWYgKHRoaXMuZG9jdW1lbnRDbG9jayAhPT0gaW5pdGlhbERvY3VtZW50Q2xvY2spIHtcbiAgICAgIHRoaXMub25EYXRhQ2hhbmdlPy4oKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgZXZlbnQgd2hlbiBhIGNsaWVudCBkaXNjb25uZWN0cy5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIHRoYXQgZGlzY29ubmVjdGVkLlxuICAgKi9cbiAgaGFuZGxlQ2xvc2Uoc2Vzc2lvbklkKSB7XG4gICAgdGhpcy5jYW5jZWxTZXNzaW9uKHNlc3Npb25JZCk7XG4gIH1cbiAgLyoqXG4gICAqIEFsbG93IGFwcGx5aW5nIGNoYW5nZXMgdG8gdGhlIHN0b3JlIGluIGEgdHJhbnNhY3Rpb25hbCB3YXkuXG4gICAqIEBwYXJhbSB1cGRhdGVyIC0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYSBzdG9yZSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGNoYW5nZXMuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHRyYW5zYWN0aW9uIGlzIGNvbXBsZXRlLlxuICAgKi9cbiAgYXN5bmMgdXBkYXRlU3RvcmUodXBkYXRlcikge1xuICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHVwZGF0ZSBzdG9yZSBvbiBhIGNsb3NlZCByb29tXCIpO1xuICAgIH1cbiAgICBjb25zdCBjb250ZXh0ID0gbmV3IFN0b3JlVXBkYXRlQ29udGV4dChcbiAgICAgIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmdldFNuYXBzaG90KCkuZG9jdW1lbnRzLm1hcCgoZCkgPT4gW2Quc3RhdGUuaWQsIGQuc3RhdGVdKSlcbiAgICApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1cGRhdGVyKGNvbnRleHQpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjb250ZXh0LmNsb3NlKCk7XG4gICAgfVxuICAgIGNvbnN0IGRpZmYgPSBjb250ZXh0LnRvRGlmZigpO1xuICAgIGlmIChPYmplY3Qua2V5cyhkaWZmKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVQdXNoUmVxdWVzdChudWxsLCB7IHR5cGU6IFwicHVzaFwiLCBkaWZmLCBjbGllbnRDbG9jazogMCB9KTtcbiAgfVxufVxuY2xhc3MgU3RvcmVVcGRhdGVDb250ZXh0IHtcbiAgY29uc3RydWN0b3Ioc25hcHNob3QpIHtcbiAgICB0aGlzLnNuYXBzaG90ID0gc25hcHNob3Q7XG4gIH1cbiAgdXBkYXRlcyA9IHtcbiAgICBwdXRzOiB7fSxcbiAgICBkZWxldGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gIH07XG4gIHB1dChyZWNvcmQpIHtcbiAgICBpZiAodGhpcy5faXNDbG9zZWQpIHRocm93IG5ldyBFcnJvcihcIlN0b3JlVXBkYXRlQ29udGV4dCBpcyBjbG9zZWRcIik7XG4gICAgaWYgKHJlY29yZC5pZCBpbiB0aGlzLnNuYXBzaG90ICYmIGlzRXF1YWwodGhpcy5zbmFwc2hvdFtyZWNvcmQuaWRdLCByZWNvcmQpKSB7XG4gICAgICBkZWxldGUgdGhpcy51cGRhdGVzLnB1dHNbcmVjb3JkLmlkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVzLnB1dHNbcmVjb3JkLmlkXSA9IHN0cnVjdHVyZWRDbG9uZShyZWNvcmQpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXMuZGVsZXRlcy5kZWxldGUocmVjb3JkLmlkKTtcbiAgfVxuICBkZWxldGUocmVjb3JkT3JJZCkge1xuICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkgdGhyb3cgbmV3IEVycm9yKFwiU3RvcmVVcGRhdGVDb250ZXh0IGlzIGNsb3NlZFwiKTtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiByZWNvcmRPcklkID09PSBcInN0cmluZ1wiID8gcmVjb3JkT3JJZCA6IHJlY29yZE9ySWQuaWQ7XG4gICAgZGVsZXRlIHRoaXMudXBkYXRlcy5wdXRzW2lkXTtcbiAgICBpZiAodGhpcy5zbmFwc2hvdFtpZF0pIHtcbiAgICAgIHRoaXMudXBkYXRlcy5kZWxldGVzLmFkZChpZCk7XG4gICAgfVxuICB9XG4gIGdldChpZCkge1xuICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkgdGhyb3cgbmV3IEVycm9yKFwiU3RvcmVVcGRhdGVDb250ZXh0IGlzIGNsb3NlZFwiKTtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodGhpcy51cGRhdGVzLnB1dHMsIGlkKSkge1xuICAgICAgcmV0dXJuIHN0cnVjdHVyZWRDbG9uZSh0aGlzLnVwZGF0ZXMucHV0c1tpZF0pO1xuICAgIH1cbiAgICBpZiAodGhpcy51cGRhdGVzLmRlbGV0ZXMuaGFzKGlkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUodGhpcy5zbmFwc2hvdFtpZF0gPz8gbnVsbCk7XG4gIH1cbiAgZ2V0QWxsKCkge1xuICAgIGlmICh0aGlzLl9pc0Nsb3NlZCkgdGhyb3cgbmV3IEVycm9yKFwiU3RvcmVVcGRhdGVDb250ZXh0IGlzIGNsb3NlZFwiKTtcbiAgICBjb25zdCByZXN1bHQgPSBPYmplY3QudmFsdWVzKHRoaXMudXBkYXRlcy5wdXRzKTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgcmVjb3JkXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnNuYXBzaG90KSkge1xuICAgICAgaWYgKCF0aGlzLnVwZGF0ZXMuZGVsZXRlcy5oYXMoaWQpICYmICFoYXNPd25Qcm9wZXJ0eSh0aGlzLnVwZGF0ZXMucHV0cywgaWQpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHJlY29yZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUocmVzdWx0KTtcbiAgfVxuICB0b0RpZmYoKSB7XG4gICAgY29uc3QgZGlmZiA9IHt9O1xuICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMudXBkYXRlcy5wdXRzKSkge1xuICAgICAgZGlmZltpZF0gPSBbUmVjb3JkT3BUeXBlLlB1dCwgcmVjb3JkXTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpZCBvZiB0aGlzLnVwZGF0ZXMuZGVsZXRlcykge1xuICAgICAgZGlmZltpZF0gPSBbUmVjb3JkT3BUeXBlLlJlbW92ZV07XG4gICAgfVxuICAgIHJldHVybiBkaWZmO1xuICB9XG4gIF9pc0Nsb3NlZCA9IGZhbHNlO1xuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9pc0Nsb3NlZCA9IHRydWU7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIERBVEFfTUVTU0FHRV9ERUJPVU5DRV9JTlRFUlZBTCxcbiAgRG9jdW1lbnRTdGF0ZSxcbiAgTUFYX1RPTUJTVE9ORVMsXG4gIFRMU3luY1Jvb20sXG4gIFRPTUJTVE9ORV9QUlVORV9CVUZGRVJfU0laRVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMU3luY1Jvb20ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/TLSyncRoom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonChunkAssembler: () => (/* binding */ JsonChunkAssembler),\n/* harmony export */   chunk: () => (/* binding */ chunk)\n/* harmony export */ });\nconst MAX_CLIENT_SENT_MESSAGE_SIZE_BYTES = 1024 * 1024;\nconst MAX_BYTES_PER_CHAR = 4;\nconst MAX_SAFE_MESSAGE_SIZE = MAX_CLIENT_SENT_MESSAGE_SIZE_BYTES / MAX_BYTES_PER_CHAR;\nfunction chunk(msg, maxSafeMessageSize = MAX_SAFE_MESSAGE_SIZE) {\n  if (msg.length < maxSafeMessageSize) {\n    return [msg];\n  } else {\n    const chunks = [];\n    let chunkNumber = 0;\n    let offset = msg.length;\n    while (offset > 0) {\n      const prefix = `${chunkNumber}_`;\n      const chunkSize = Math.max(Math.min(maxSafeMessageSize - prefix.length, offset), 1);\n      chunks.unshift(prefix + msg.slice(offset - chunkSize, offset));\n      offset -= chunkSize;\n      chunkNumber++;\n    }\n    return chunks;\n  }\n}\nconst chunkRe = /^(\\d+)_(.*)$/;\nclass JsonChunkAssembler {\n  state = \"idle\";\n  handleMessage(msg) {\n    if (msg.startsWith(\"{\")) {\n      const error = this.state === \"idle\" ? void 0 : new Error(\"Unexpected non-chunk message\");\n      this.state = \"idle\";\n      return error ? { error } : { data: JSON.parse(msg), stringified: msg };\n    } else {\n      const match = chunkRe.exec(msg);\n      if (!match) {\n        this.state = \"idle\";\n        return { error: new Error(\"Invalid chunk: \" + JSON.stringify(msg.slice(0, 20) + \"...\")) };\n      }\n      const numChunksRemaining = Number(match[1]);\n      const data = match[2];\n      if (this.state === \"idle\") {\n        this.state = {\n          chunksReceived: [data],\n          totalChunks: numChunksRemaining + 1\n        };\n      } else {\n        this.state.chunksReceived.push(data);\n        if (numChunksRemaining !== this.state.totalChunks - this.state.chunksReceived.length) {\n          this.state = \"idle\";\n          return { error: new Error(`Chunks received in wrong order`) };\n        }\n      }\n      if (this.state.chunksReceived.length === this.state.totalChunks) {\n        try {\n          const stringified = this.state.chunksReceived.join(\"\");\n          const data2 = JSON.parse(stringified);\n          return { data: data2, stringified };\n        } catch (e) {\n          return { error: e };\n        } finally {\n          this.state = \"idle\";\n        }\n      }\n      return null;\n    }\n  }\n}\n\n//# sourceMappingURL=chunk.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL2NodW5rLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsdUJBQXVCLFFBQVEsSUFBSTtBQUNuQyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixVQUFVO0FBQ1YsbUJBQW1CO0FBQ25CLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMtY29yZS9kaXN0LWVzbS9saWIvY2h1bmsubWpzPzE0ZTQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTUFYX0NMSUVOVF9TRU5UX01FU1NBR0VfU0laRV9CWVRFUyA9IDEwMjQgKiAxMDI0O1xuY29uc3QgTUFYX0JZVEVTX1BFUl9DSEFSID0gNDtcbmNvbnN0IE1BWF9TQUZFX01FU1NBR0VfU0laRSA9IE1BWF9DTElFTlRfU0VOVF9NRVNTQUdFX1NJWkVfQllURVMgLyBNQVhfQllURVNfUEVSX0NIQVI7XG5mdW5jdGlvbiBjaHVuayhtc2csIG1heFNhZmVNZXNzYWdlU2l6ZSA9IE1BWF9TQUZFX01FU1NBR0VfU0laRSkge1xuICBpZiAobXNnLmxlbmd0aCA8IG1heFNhZmVNZXNzYWdlU2l6ZSkge1xuICAgIHJldHVybiBbbXNnXTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICBsZXQgY2h1bmtOdW1iZXIgPSAwO1xuICAgIGxldCBvZmZzZXQgPSBtc2cubGVuZ3RoO1xuICAgIHdoaWxlIChvZmZzZXQgPiAwKSB7XG4gICAgICBjb25zdCBwcmVmaXggPSBgJHtjaHVua051bWJlcn1fYDtcbiAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IE1hdGgubWF4KE1hdGgubWluKG1heFNhZmVNZXNzYWdlU2l6ZSAtIHByZWZpeC5sZW5ndGgsIG9mZnNldCksIDEpO1xuICAgICAgY2h1bmtzLnVuc2hpZnQocHJlZml4ICsgbXNnLnNsaWNlKG9mZnNldCAtIGNodW5rU2l6ZSwgb2Zmc2V0KSk7XG4gICAgICBvZmZzZXQgLT0gY2h1bmtTaXplO1xuICAgICAgY2h1bmtOdW1iZXIrKztcbiAgICB9XG4gICAgcmV0dXJuIGNodW5rcztcbiAgfVxufVxuY29uc3QgY2h1bmtSZSA9IC9eKFxcZCspXyguKikkLztcbmNsYXNzIEpzb25DaHVua0Fzc2VtYmxlciB7XG4gIHN0YXRlID0gXCJpZGxlXCI7XG4gIGhhbmRsZU1lc3NhZ2UobXNnKSB7XG4gICAgaWYgKG1zZy5zdGFydHNXaXRoKFwie1wiKSkge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLnN0YXRlID09PSBcImlkbGVcIiA/IHZvaWQgMCA6IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgbm9uLWNodW5rIG1lc3NhZ2VcIik7XG4gICAgICB0aGlzLnN0YXRlID0gXCJpZGxlXCI7XG4gICAgICByZXR1cm4gZXJyb3IgPyB7IGVycm9yIH0gOiB7IGRhdGE6IEpTT04ucGFyc2UobXNnKSwgc3RyaW5naWZpZWQ6IG1zZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGNodW5rUmUuZXhlYyhtc2cpO1xuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJpZGxlXCI7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiBuZXcgRXJyb3IoXCJJbnZhbGlkIGNodW5rOiBcIiArIEpTT04uc3RyaW5naWZ5KG1zZy5zbGljZSgwLCAyMCkgKyBcIi4uLlwiKSkgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG51bUNodW5rc1JlbWFpbmluZyA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICBjb25zdCBkYXRhID0gbWF0Y2hbMl07XG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gXCJpZGxlXCIpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICBjaHVua3NSZWNlaXZlZDogW2RhdGFdLFxuICAgICAgICAgIHRvdGFsQ2h1bmtzOiBudW1DaHVua3NSZW1haW5pbmcgKyAxXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmNodW5rc1JlY2VpdmVkLnB1c2goZGF0YSk7XG4gICAgICAgIGlmIChudW1DaHVua3NSZW1haW5pbmcgIT09IHRoaXMuc3RhdGUudG90YWxDaHVua3MgLSB0aGlzLnN0YXRlLmNodW5rc1JlY2VpdmVkLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuc3RhdGUgPSBcImlkbGVcIjtcbiAgICAgICAgICByZXR1cm4geyBlcnJvcjogbmV3IEVycm9yKGBDaHVua3MgcmVjZWl2ZWQgaW4gd3Jvbmcgb3JkZXJgKSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGF0ZS5jaHVua3NSZWNlaXZlZC5sZW5ndGggPT09IHRoaXMuc3RhdGUudG90YWxDaHVua3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZCA9IHRoaXMuc3RhdGUuY2h1bmtzUmVjZWl2ZWQuam9pbihcIlwiKTtcbiAgICAgICAgICBjb25zdCBkYXRhMiA9IEpTT04ucGFyc2Uoc3RyaW5naWZpZWQpO1xuICAgICAgICAgIHJldHVybiB7IGRhdGE6IGRhdGEyLCBzdHJpbmdpZmllZCB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHsgZXJyb3I6IGUgfTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0aGlzLnN0YXRlID0gXCJpZGxlXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHtcbiAgSnNvbkNodW5rQXNzZW1ibGVyLFxuICBjaHVua1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/chunk.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordOpType: () => (/* binding */ RecordOpType),\n/* harmony export */   ValueOpType: () => (/* binding */ ValueOpType),\n/* harmony export */   applyObjectDiff: () => (/* binding */ applyObjectDiff),\n/* harmony export */   diffRecord: () => (/* binding */ diffRecord),\n/* harmony export */   getNetworkDiff: () => (/* binding */ getNetworkDiff)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.isequal */ \"(ssr)/./node_modules/lodash.isequal/index.js\");\n\n\nconst RecordOpType = {\n  Put: \"put\",\n  Patch: \"patch\",\n  Remove: \"remove\"\n};\nfunction getNetworkDiff(diff) {\n  let res = null;\n  for (const [k, v] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.added)) {\n    if (!res) res = {};\n    res[k] = [RecordOpType.Put, v];\n  }\n  for (const [from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapValues)(diff.updated)) {\n    const diff2 = diffRecord(from, to);\n    if (diff2) {\n      if (!res) res = {};\n      res[to.id] = [RecordOpType.Patch, diff2];\n    }\n  }\n  for (const removed of Object.keys(diff.removed)) {\n    if (!res) res = {};\n    res[removed] = [RecordOpType.Remove];\n  }\n  return res;\n}\nconst ValueOpType = {\n  Put: \"put\",\n  Delete: \"delete\",\n  Append: \"append\",\n  Patch: \"patch\"\n};\nfunction diffRecord(prev, next) {\n  return diffObject(prev, next, /* @__PURE__ */ new Set([\"props\"]));\n}\nfunction diffObject(prev, next, nestedKeys) {\n  if (prev === next) {\n    return null;\n  }\n  let result = null;\n  for (const key of Object.keys(prev)) {\n    if (!(key in next)) {\n      if (!result) result = {};\n      result[key] = [ValueOpType.Delete];\n      continue;\n    }\n    const prevVal = prev[key];\n    const nextVal = next[key];\n    if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_1__(prevVal, nextVal)) {\n      if (nestedKeys?.has(key) && prevVal && nextVal) {\n        const diff = diffObject(prevVal, nextVal);\n        if (diff) {\n          if (!result) result = {};\n          result[key] = [ValueOpType.Patch, diff];\n        }\n      } else if (Array.isArray(nextVal) && Array.isArray(prevVal)) {\n        const op = diffArray(prevVal, nextVal);\n        if (op) {\n          if (!result) result = {};\n          result[key] = op;\n        }\n      } else {\n        if (!result) result = {};\n        result[key] = [ValueOpType.Put, nextVal];\n      }\n    }\n  }\n  for (const key of Object.keys(next)) {\n    if (!(key in prev)) {\n      if (!result) result = {};\n      result[key] = [ValueOpType.Put, next[key]];\n    }\n  }\n  return result;\n}\nfunction diffValue(valueA, valueB) {\n  if (Object.is(valueA, valueB)) return null;\n  if (Array.isArray(valueA) && Array.isArray(valueB)) {\n    return diffArray(valueA, valueB);\n  } else if (!valueA || !valueB || typeof valueA !== \"object\" || typeof valueB !== \"object\") {\n    return lodash_isequal__WEBPACK_IMPORTED_MODULE_1__(valueA, valueB) ? null : [ValueOpType.Put, valueB];\n  } else {\n    const diff = diffObject(valueA, valueB);\n    return diff ? [ValueOpType.Patch, diff] : null;\n  }\n}\nfunction diffArray(prevArray, nextArray) {\n  if (Object.is(prevArray, nextArray)) return null;\n  if (prevArray.length === nextArray.length) {\n    const maxPatchIndexes = Math.max(prevArray.length / 5, 1);\n    const toPatchIndexes = [];\n    for (let i = 0; i < prevArray.length; i++) {\n      if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_1__(prevArray[i], nextArray[i])) {\n        toPatchIndexes.push(i);\n        if (toPatchIndexes.length > maxPatchIndexes) {\n          return [ValueOpType.Put, nextArray];\n        }\n      }\n    }\n    if (toPatchIndexes.length === 0) {\n      return null;\n    }\n    const diff = {};\n    for (const i of toPatchIndexes) {\n      const prevItem = prevArray[i];\n      const nextItem = nextArray[i];\n      if (!prevItem || !nextItem) {\n        diff[i] = [ValueOpType.Put, nextItem];\n      } else if (typeof prevItem === \"object\" && typeof nextItem === \"object\") {\n        const op = diffValue(prevItem, nextItem);\n        if (op) {\n          diff[i] = op;\n        }\n      } else {\n        diff[i] = [ValueOpType.Put, nextItem];\n      }\n    }\n    return [ValueOpType.Patch, diff];\n  }\n  for (let i = 0; i < prevArray.length; i++) {\n    if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_1__(prevArray[i], nextArray[i])) {\n      return [ValueOpType.Put, nextArray];\n    }\n  }\n  return [ValueOpType.Append, nextArray.slice(prevArray.length), prevArray.length];\n}\nfunction applyObjectDiff(object, objectDiff) {\n  if (!object || typeof object !== \"object\") return object;\n  const isArray = Array.isArray(object);\n  let newObject = void 0;\n  const set = (k, v) => {\n    if (!newObject) {\n      if (isArray) {\n        newObject = [...object];\n      } else {\n        newObject = { ...object };\n      }\n    }\n    if (isArray) {\n      newObject[Number(k)] = v;\n    } else {\n      newObject[k] = v;\n    }\n  };\n  for (const [key, op] of Object.entries(objectDiff)) {\n    switch (op[0]) {\n      case ValueOpType.Put: {\n        const value = op[1];\n        if (!lodash_isequal__WEBPACK_IMPORTED_MODULE_1__(object[key], value)) {\n          set(key, value);\n        }\n        break;\n      }\n      case ValueOpType.Append: {\n        const values = op[1];\n        const offset = op[2];\n        const arr = object[key];\n        if (Array.isArray(arr) && arr.length === offset) {\n          set(key, [...arr, ...values]);\n        }\n        break;\n      }\n      case ValueOpType.Patch: {\n        if (object[key] && typeof object[key] === \"object\") {\n          const diff = op[1];\n          const patched = applyObjectDiff(object[key], diff);\n          if (patched !== object[key]) {\n            set(key, patched);\n          }\n        }\n        break;\n      }\n      case ValueOpType.Delete: {\n        if (key in object) {\n          if (!newObject) {\n            if (isArray) {\n              console.error(\"Can't delete array item yet (this should never happen)\");\n              newObject = [...object];\n            } else {\n              newObject = { ...object };\n            }\n          }\n          delete newObject[key];\n        }\n      }\n    }\n  }\n  return newObject ?? object;\n}\n\n//# sourceMappingURL=diff.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL2RpZmYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBa0U7QUFDN0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw4REFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkNBQU87QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixXQUFXLDJDQUFPO0FBQ2xCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDLFdBQVcsMkNBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDLFNBQVMsMkNBQU87QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1Isc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQ0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL2RpZmYubWpzPzY0MWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JqZWN0TWFwRW50cmllcywgb2JqZWN0TWFwVmFsdWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gXCJsb2Rhc2guaXNlcXVhbFwiO1xuY29uc3QgUmVjb3JkT3BUeXBlID0ge1xuICBQdXQ6IFwicHV0XCIsXG4gIFBhdGNoOiBcInBhdGNoXCIsXG4gIFJlbW92ZTogXCJyZW1vdmVcIlxufTtcbmZ1bmN0aW9uIGdldE5ldHdvcmtEaWZmKGRpZmYpIHtcbiAgbGV0IHJlcyA9IG51bGw7XG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIG9iamVjdE1hcEVudHJpZXMoZGlmZi5hZGRlZCkpIHtcbiAgICBpZiAoIXJlcykgcmVzID0ge307XG4gICAgcmVzW2tdID0gW1JlY29yZE9wVHlwZS5QdXQsIHZdO1xuICB9XG4gIGZvciAoY29uc3QgW2Zyb20sIHRvXSBvZiBvYmplY3RNYXBWYWx1ZXMoZGlmZi51cGRhdGVkKSkge1xuICAgIGNvbnN0IGRpZmYyID0gZGlmZlJlY29yZChmcm9tLCB0byk7XG4gICAgaWYgKGRpZmYyKSB7XG4gICAgICBpZiAoIXJlcykgcmVzID0ge307XG4gICAgICByZXNbdG8uaWRdID0gW1JlY29yZE9wVHlwZS5QYXRjaCwgZGlmZjJdO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IHJlbW92ZWQgb2YgT2JqZWN0LmtleXMoZGlmZi5yZW1vdmVkKSkge1xuICAgIGlmICghcmVzKSByZXMgPSB7fTtcbiAgICByZXNbcmVtb3ZlZF0gPSBbUmVjb3JkT3BUeXBlLlJlbW92ZV07XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmNvbnN0IFZhbHVlT3BUeXBlID0ge1xuICBQdXQ6IFwicHV0XCIsXG4gIERlbGV0ZTogXCJkZWxldGVcIixcbiAgQXBwZW5kOiBcImFwcGVuZFwiLFxuICBQYXRjaDogXCJwYXRjaFwiXG59O1xuZnVuY3Rpb24gZGlmZlJlY29yZChwcmV2LCBuZXh0KSB7XG4gIHJldHVybiBkaWZmT2JqZWN0KHByZXYsIG5leHQsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInByb3BzXCJdKSk7XG59XG5mdW5jdGlvbiBkaWZmT2JqZWN0KHByZXYsIG5leHQsIG5lc3RlZEtleXMpIHtcbiAgaWYgKHByZXYgPT09IG5leHQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocHJldikpIHtcbiAgICBpZiAoIShrZXkgaW4gbmV4dCkpIHtcbiAgICAgIGlmICghcmVzdWx0KSByZXN1bHQgPSB7fTtcbiAgICAgIHJlc3VsdFtrZXldID0gW1ZhbHVlT3BUeXBlLkRlbGV0ZV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgcHJldlZhbCA9IHByZXZba2V5XTtcbiAgICBjb25zdCBuZXh0VmFsID0gbmV4dFtrZXldO1xuICAgIGlmICghaXNFcXVhbChwcmV2VmFsLCBuZXh0VmFsKSkge1xuICAgICAgaWYgKG5lc3RlZEtleXM/LmhhcyhrZXkpICYmIHByZXZWYWwgJiYgbmV4dFZhbCkge1xuICAgICAgICBjb25zdCBkaWZmID0gZGlmZk9iamVjdChwcmV2VmFsLCBuZXh0VmFsKTtcbiAgICAgICAgaWYgKGRpZmYpIHtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkgcmVzdWx0ID0ge307XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBbVmFsdWVPcFR5cGUuUGF0Y2gsIGRpZmZdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmV4dFZhbCkgJiYgQXJyYXkuaXNBcnJheShwcmV2VmFsKSkge1xuICAgICAgICBjb25zdCBvcCA9IGRpZmZBcnJheShwcmV2VmFsLCBuZXh0VmFsKTtcbiAgICAgICAgaWYgKG9wKSB7XG4gICAgICAgICAgaWYgKCFyZXN1bHQpIHJlc3VsdCA9IHt9O1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gb3A7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghcmVzdWx0KSByZXN1bHQgPSB7fTtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBbVmFsdWVPcFR5cGUuUHV0LCBuZXh0VmFsXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobmV4dCkpIHtcbiAgICBpZiAoIShrZXkgaW4gcHJldikpIHtcbiAgICAgIGlmICghcmVzdWx0KSByZXN1bHQgPSB7fTtcbiAgICAgIHJlc3VsdFtrZXldID0gW1ZhbHVlT3BUeXBlLlB1dCwgbmV4dFtrZXldXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGRpZmZWYWx1ZSh2YWx1ZUEsIHZhbHVlQikge1xuICBpZiAoT2JqZWN0LmlzKHZhbHVlQSwgdmFsdWVCKSkgcmV0dXJuIG51bGw7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlQSkgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZUIpKSB7XG4gICAgcmV0dXJuIGRpZmZBcnJheSh2YWx1ZUEsIHZhbHVlQik7XG4gIH0gZWxzZSBpZiAoIXZhbHVlQSB8fCAhdmFsdWVCIHx8IHR5cGVvZiB2YWx1ZUEgIT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHZhbHVlQiAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBpc0VxdWFsKHZhbHVlQSwgdmFsdWVCKSA/IG51bGwgOiBbVmFsdWVPcFR5cGUuUHV0LCB2YWx1ZUJdO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGRpZmYgPSBkaWZmT2JqZWN0KHZhbHVlQSwgdmFsdWVCKTtcbiAgICByZXR1cm4gZGlmZiA/IFtWYWx1ZU9wVHlwZS5QYXRjaCwgZGlmZl0gOiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBkaWZmQXJyYXkocHJldkFycmF5LCBuZXh0QXJyYXkpIHtcbiAgaWYgKE9iamVjdC5pcyhwcmV2QXJyYXksIG5leHRBcnJheSkpIHJldHVybiBudWxsO1xuICBpZiAocHJldkFycmF5Lmxlbmd0aCA9PT0gbmV4dEFycmF5Lmxlbmd0aCkge1xuICAgIGNvbnN0IG1heFBhdGNoSW5kZXhlcyA9IE1hdGgubWF4KHByZXZBcnJheS5sZW5ndGggLyA1LCAxKTtcbiAgICBjb25zdCB0b1BhdGNoSW5kZXhlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWlzRXF1YWwocHJldkFycmF5W2ldLCBuZXh0QXJyYXlbaV0pKSB7XG4gICAgICAgIHRvUGF0Y2hJbmRleGVzLnB1c2goaSk7XG4gICAgICAgIGlmICh0b1BhdGNoSW5kZXhlcy5sZW5ndGggPiBtYXhQYXRjaEluZGV4ZXMpIHtcbiAgICAgICAgICByZXR1cm4gW1ZhbHVlT3BUeXBlLlB1dCwgbmV4dEFycmF5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodG9QYXRjaEluZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZGlmZiA9IHt9O1xuICAgIGZvciAoY29uc3QgaSBvZiB0b1BhdGNoSW5kZXhlcykge1xuICAgICAgY29uc3QgcHJldkl0ZW0gPSBwcmV2QXJyYXlbaV07XG4gICAgICBjb25zdCBuZXh0SXRlbSA9IG5leHRBcnJheVtpXTtcbiAgICAgIGlmICghcHJldkl0ZW0gfHwgIW5leHRJdGVtKSB7XG4gICAgICAgIGRpZmZbaV0gPSBbVmFsdWVPcFR5cGUuUHV0LCBuZXh0SXRlbV07XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2SXRlbSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbmV4dEl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3Qgb3AgPSBkaWZmVmFsdWUocHJldkl0ZW0sIG5leHRJdGVtKTtcbiAgICAgICAgaWYgKG9wKSB7XG4gICAgICAgICAgZGlmZltpXSA9IG9wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWZmW2ldID0gW1ZhbHVlT3BUeXBlLlB1dCwgbmV4dEl0ZW1dO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW1ZhbHVlT3BUeXBlLlBhdGNoLCBkaWZmXTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmICghaXNFcXVhbChwcmV2QXJyYXlbaV0sIG5leHRBcnJheVtpXSkpIHtcbiAgICAgIHJldHVybiBbVmFsdWVPcFR5cGUuUHV0LCBuZXh0QXJyYXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW1ZhbHVlT3BUeXBlLkFwcGVuZCwgbmV4dEFycmF5LnNsaWNlKHByZXZBcnJheS5sZW5ndGgpLCBwcmV2QXJyYXkubGVuZ3RoXTtcbn1cbmZ1bmN0aW9uIGFwcGx5T2JqZWN0RGlmZihvYmplY3QsIG9iamVjdERpZmYpIHtcbiAgaWYgKCFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIG9iamVjdDtcbiAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkob2JqZWN0KTtcbiAgbGV0IG5ld09iamVjdCA9IHZvaWQgMDtcbiAgY29uc3Qgc2V0ID0gKGssIHYpID0+IHtcbiAgICBpZiAoIW5ld09iamVjdCkge1xuICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgbmV3T2JqZWN0ID0gWy4uLm9iamVjdF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdPYmplY3QgPSB7IC4uLm9iamVjdCB9O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBcnJheSkge1xuICAgICAgbmV3T2JqZWN0W051bWJlcihrKV0gPSB2O1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdPYmplY3Rba10gPSB2O1xuICAgIH1cbiAgfTtcbiAgZm9yIChjb25zdCBba2V5LCBvcF0gb2YgT2JqZWN0LmVudHJpZXMob2JqZWN0RGlmZikpIHtcbiAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICBjYXNlIFZhbHVlT3BUeXBlLlB1dDoge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG9wWzFdO1xuICAgICAgICBpZiAoIWlzRXF1YWwob2JqZWN0W2tleV0sIHZhbHVlKSkge1xuICAgICAgICAgIHNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgVmFsdWVPcFR5cGUuQXBwZW5kOiB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IG9wWzFdO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBvcFsyXTtcbiAgICAgICAgY29uc3QgYXJyID0gb2JqZWN0W2tleV07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikgJiYgYXJyLmxlbmd0aCA9PT0gb2Zmc2V0KSB7XG4gICAgICAgICAgc2V0KGtleSwgWy4uLmFyciwgLi4udmFsdWVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFZhbHVlT3BUeXBlLlBhdGNoOiB7XG4gICAgICAgIGlmIChvYmplY3Rba2V5XSAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCBkaWZmID0gb3BbMV07XG4gICAgICAgICAgY29uc3QgcGF0Y2hlZCA9IGFwcGx5T2JqZWN0RGlmZihvYmplY3Rba2V5XSwgZGlmZik7XG4gICAgICAgICAgaWYgKHBhdGNoZWQgIT09IG9iamVjdFtrZXldKSB7XG4gICAgICAgICAgICBzZXQoa2V5LCBwYXRjaGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFZhbHVlT3BUeXBlLkRlbGV0ZToge1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIGlmICghbmV3T2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2FuJ3QgZGVsZXRlIGFycmF5IGl0ZW0geWV0ICh0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4pXCIpO1xuICAgICAgICAgICAgICBuZXdPYmplY3QgPSBbLi4ub2JqZWN0XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld09iamVjdCA9IHsgLi4ub2JqZWN0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSBuZXdPYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3T2JqZWN0ID8/IG9iamVjdDtcbn1cbmV4cG9ydCB7XG4gIFJlY29yZE9wVHlwZSxcbiAgVmFsdWVPcFR5cGUsXG4gIGFwcGx5T2JqZWN0RGlmZixcbiAgZGlmZlJlY29yZCxcbiAgZ2V0TmV0d29ya0RpZmZcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaWZmLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/diff.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/interval.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/interval.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   interval: () => (/* binding */ interval)\n/* harmony export */ });\nfunction interval(cb, timeout) {\n  const i = setInterval(cb, timeout);\n  return () => clearInterval(i);\n}\n\n//# sourceMappingURL=interval.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL2ludGVydmFsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL2ludGVydmFsLm1qcz9lOGNjIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGludGVydmFsKGNiLCB0aW1lb3V0KSB7XG4gIGNvbnN0IGkgPSBzZXRJbnRlcnZhbChjYiwgdGltZW91dCk7XG4gIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGkpO1xufVxuZXhwb3J0IHtcbiAgaW50ZXJ2YWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/interval.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLIncompatibilityReason: () => (/* binding */ TLIncompatibilityReason),\n/* harmony export */   getTlsyncProtocolVersion: () => (/* binding */ getTlsyncProtocolVersion)\n/* harmony export */ });\nconst TLSYNC_PROTOCOL_VERSION = 7;\nfunction getTlsyncProtocolVersion() {\n  return TLSYNC_PROTOCOL_VERSION;\n}\nconst TLIncompatibilityReason = {\n  ClientTooOld: \"clientTooOld\",\n  ServerTooOld: \"serverTooOld\",\n  InvalidRecord: \"invalidRecord\",\n  InvalidOperation: \"invalidOperation\"\n};\n\n//# sourceMappingURL=protocol.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jLWNvcmUvZGlzdC1lc20vbGliL3Byb3RvY29sLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3luYy1jb3JlL2Rpc3QtZXNtL2xpYi9wcm90b2NvbC5tanM/YTVkMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUTFNZTkNfUFJPVE9DT0xfVkVSU0lPTiA9IDc7XG5mdW5jdGlvbiBnZXRUbHN5bmNQcm90b2NvbFZlcnNpb24oKSB7XG4gIHJldHVybiBUTFNZTkNfUFJPVE9DT0xfVkVSU0lPTjtcbn1cbmNvbnN0IFRMSW5jb21wYXRpYmlsaXR5UmVhc29uID0ge1xuICBDbGllbnRUb29PbGQ6IFwiY2xpZW50VG9vT2xkXCIsXG4gIFNlcnZlclRvb09sZDogXCJzZXJ2ZXJUb29PbGRcIixcbiAgSW52YWxpZFJlY29yZDogXCJpbnZhbGlkUmVjb3JkXCIsXG4gIEludmFsaWRPcGVyYXRpb246IFwiaW52YWxpZE9wZXJhdGlvblwiXG59O1xuZXhwb3J0IHtcbiAgVExJbmNvbXBhdGliaWxpdHlSZWFzb24sXG4gIGdldFRsc3luY1Byb3RvY29sVmVyc2lvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync-core/dist-esm/lib/protocol.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync/dist-esm/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@tldraw/sync/dist-esm/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientWebSocketAdapter: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.ClientWebSocketAdapter),\n/* harmony export */   DocumentState: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.DocumentState),\n/* harmony export */   ReconnectManager: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.ReconnectManager),\n/* harmony export */   RecordOpType: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.RecordOpType),\n/* harmony export */   RoomSessionState: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.RoomSessionState),\n/* harmony export */   TLIncompatibilityReason: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLIncompatibilityReason),\n/* harmony export */   TLRemoteSyncError: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLRemoteSyncError),\n/* harmony export */   TLSocketRoom: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLSocketRoom),\n/* harmony export */   TLSyncClient: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLSyncClient),\n/* harmony export */   TLSyncErrorCloseEventCode: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLSyncErrorCloseEventCode),\n/* harmony export */   TLSyncErrorCloseEventReason: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLSyncErrorCloseEventReason),\n/* harmony export */   TLSyncRoom: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.TLSyncRoom),\n/* harmony export */   ValueOpType: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.ValueOpType),\n/* harmony export */   applyObjectDiff: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.applyObjectDiff),\n/* harmony export */   chunk: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.chunk),\n/* harmony export */   diffRecord: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.diffRecord),\n/* harmony export */   getNetworkDiff: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.getNetworkDiff),\n/* harmony export */   getTlsyncProtocolVersion: () => (/* reexport safe */ _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__.getTlsyncProtocolVersion),\n/* harmony export */   useSync: () => (/* reexport safe */ _useSync_mjs__WEBPACK_IMPORTED_MODULE_2__.useSync),\n/* harmony export */   useSyncDemo: () => (/* reexport safe */ _useSyncDemo_mjs__WEBPACK_IMPORTED_MODULE_3__.useSyncDemo)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/sync-core */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/index.mjs\");\n/* harmony import */ var _useSync_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useSync.mjs */ \"(ssr)/./node_modules/@tldraw/sync/dist-esm/useSync.mjs\");\n/* harmony import */ var _useSyncDemo_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useSyncDemo.mjs */ \"(ssr)/./node_modules/@tldraw/sync/dist-esm/useSyncDemo.mjs\");\n\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/sync\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jL2Rpc3QtZXNtL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkQ7QUFDM0I7QUFHWDtBQUN5QjtBQUNoRCwyRUFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jL2Rpc3QtZXNtL2luZGV4Lm1qcz9jNzQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZ2lzdGVyVGxkcmF3TGlicmFyeVZlcnNpb24gfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuZXhwb3J0ICogZnJvbSBcIkB0bGRyYXcvc3luYy1jb3JlXCI7XG5pbXBvcnQge1xuICB1c2VTeW5jXG59IGZyb20gXCIuL3VzZVN5bmMubWpzXCI7XG5pbXBvcnQgeyB1c2VTeW5jRGVtbyB9IGZyb20gXCIuL3VzZVN5bmNEZW1vLm1qc1wiO1xucmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbihcbiAgXCJAdGxkcmF3L3N5bmNcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgdXNlU3luYyxcbiAgdXNlU3luY0RlbW9cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync/dist-esm/useSync.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@tldraw/sync/dist-esm/useSync.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSync: () => (/* binding */ useSync)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state-react */ \"(ssr)/./node_modules/@tldraw/state-react/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/sync-core */ \"(ssr)/./node_modules/@tldraw/sync-core/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var tldraw__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tldraw */ \"(ssr)/./node_modules/tldraw/dist-esm/index.mjs\");\n\n\n\n\n\nconst MULTIPLAYER_EVENT_NAME = \"multiplayer.client\";\nfunction useSync(opts) {\n  const [state, setState] = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.useRefState)(null);\n  const {\n    uri,\n    roomId = \"default\",\n    assets,\n    onMount,\n    trackAnalyticsEvent: track,\n    userInfo,\n    ...schemaOpts\n  } = opts;\n  const __never__ = 0;\n  const schema = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.useTLSchemaFromUtils)(schemaOpts);\n  const prefs = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.useShallowObjectIdentity)(userInfo);\n  const userAtom = (0,_tldraw_state_react__WEBPACK_IMPORTED_MODULE_1__.useAtom)(\"userAtom\", prefs);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    userAtom.set(prefs);\n  }, [prefs, userAtom]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const storeId = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.uniqueId)();\n    const userPreferences = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.computed)(\n      \"userPreferences\",\n      () => {\n        const userStuff = userAtom.get();\n        const user = ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isSignal)(userStuff) ? userStuff.get() : userStuff) ?? (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.getUserPreferences)();\n        return {\n          id: user.id,\n          color: user.color ?? tldraw__WEBPACK_IMPORTED_MODULE_4__.defaultUserPreferences.color,\n          name: user.name ?? tldraw__WEBPACK_IMPORTED_MODULE_4__.defaultUserPreferences.name\n        };\n      }\n    );\n    const socket = new _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.ClientWebSocketAdapter(async () => {\n      const uriString = typeof uri === \"string\" ? uri : await uri();\n      const withParams = new URL(uriString);\n      if (withParams.searchParams.has(\"sessionId\")) {\n        throw new Error(\n          'useSync. \"sessionId\" is a reserved query param name. Please use a different name'\n        );\n      }\n      if (withParams.searchParams.has(\"storeId\")) {\n        throw new Error(\n          'useSync. \"storeId\" is a reserved query param name. Please use a different name'\n        );\n      }\n      withParams.searchParams.set(\"sessionId\", tldraw__WEBPACK_IMPORTED_MODULE_4__.TAB_ID);\n      withParams.searchParams.set(\"storeId\", storeId);\n      return withParams.toString();\n    });\n    let didCancel = false;\n    const collaborationStatusSignal = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.computed)(\n      \"collaboration status\",\n      () => socket.connectionStatus === \"error\" ? \"offline\" : socket.connectionStatus\n    );\n    const syncMode = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"sync mode\", \"readwrite\");\n    const store = (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.createTLStore)({\n      id: storeId,\n      schema,\n      assets,\n      onMount,\n      collaboration: {\n        status: collaborationStatusSignal,\n        mode: syncMode\n      }\n    });\n    const client = new _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.TLSyncClient({\n      store,\n      socket,\n      didCancel: () => didCancel,\n      onLoad(client2) {\n        track?.(MULTIPLAYER_EVENT_NAME, { name: \"load\", roomId });\n        setState({ readyClient: client2 });\n      },\n      onSyncError(reason) {\n        console.error(\"sync error\", reason);\n        switch (reason) {\n          case _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.TLSyncErrorCloseEventReason.NOT_FOUND:\n            track?.(MULTIPLAYER_EVENT_NAME, { name: \"room-not-found\", roomId });\n            break;\n          case _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.TLSyncErrorCloseEventReason.FORBIDDEN:\n            track?.(MULTIPLAYER_EVENT_NAME, { name: \"not-authorized\", roomId });\n            break;\n          case _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.TLSyncErrorCloseEventReason.NOT_AUTHENTICATED:\n            track?.(MULTIPLAYER_EVENT_NAME, { name: \"not-authenticated\", roomId });\n            break;\n          default:\n            track?.(MULTIPLAYER_EVENT_NAME, { name: \"sync-error:\" + reason, roomId });\n            break;\n        }\n        setState({ error: new _tldraw_sync_core__WEBPACK_IMPORTED_MODULE_2__.TLRemoteSyncError(reason) });\n        socket.close();\n      },\n      onAfterConnect(_, { isReadonly }) {\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n          syncMode.set(isReadonly ? \"readonly\" : \"readwrite\");\n          store.ensureStoreIsUsable();\n        });\n      },\n      presence: (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.createPresenceStateDerivation)(userPreferences)(store)\n    });\n    return () => {\n      didCancel = true;\n      client.close();\n      socket.close();\n      setState(null);\n    };\n  }, [assets, onMount, userAtom, roomId, schema, setState, track, uri]);\n  return (0,tldraw__WEBPACK_IMPORTED_MODULE_4__.useValue)(\n    \"remote synced store\",\n    () => {\n      if (!state) return { status: \"loading\" };\n      if (state.error) return { status: \"error\", error: state.error };\n      if (!state.readyClient) return { status: \"loading\" };\n      const connectionStatus = state.readyClient.socket.connectionStatus;\n      return {\n        status: \"synced-remote\",\n        connectionStatus: connectionStatus === \"error\" ? \"offline\" : connectionStatus,\n        store: state.readyClient.store\n      };\n    },\n    [state]\n  );\n}\n\n//# sourceMappingURL=useSync.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jL2Rpc3QtZXNtL3VzZVN5bmMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5RDtBQUNYO0FBTW5CO0FBQ087QUFhbEI7QUFDaEI7QUFDQTtBQUNBLDRCQUE0QixtREFBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsaUJBQWlCLDREQUFvQjtBQUNyQyxnQkFBZ0IsZ0VBQXdCO0FBQ3hDLG1CQUFtQiw0REFBTztBQUMxQixFQUFFLGdEQUFTO0FBQ1g7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYLG9CQUFvQixnREFBUTtBQUM1Qiw0QkFBNEIsZ0RBQVE7QUFDcEM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFRLDhDQUE4QywwREFBa0I7QUFDOUY7QUFDQTtBQUNBLCtCQUErQiwwREFBc0I7QUFDckQsNkJBQTZCLDBEQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUVBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywwQ0FBTTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0NBQXNDLGdEQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtREFBSTtBQUN6QixrQkFBa0IscURBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsMkRBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsc0JBQXNCO0FBQ2hFLG1CQUFtQixzQkFBc0I7QUFDekMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEVBQTJCO0FBQzFDLDhDQUE4QyxnQ0FBZ0M7QUFDOUU7QUFDQSxlQUFlLDBFQUEyQjtBQUMxQyw4Q0FBOEMsZ0NBQWdDO0FBQzlFO0FBQ0EsZUFBZSwwRUFBMkI7QUFDMUMsOENBQThDLG1DQUFtQztBQUNqRjtBQUNBO0FBQ0EsOENBQThDLHNDQUFzQztBQUNwRjtBQUNBO0FBQ0EsbUJBQW1CLFdBQVcsZ0VBQWlCLFVBQVU7QUFDekQ7QUFDQSxPQUFPO0FBQ1AsMEJBQTBCLFlBQVk7QUFDdEMsUUFBUSx1REFBUTtBQUNoQjtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxnQkFBZ0IscUVBQTZCO0FBQzdDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyxnREFBUTtBQUNqQjtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLGdDQUFnQztBQUNoQyx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMvZGlzdC1lc20vdXNlU3luYy5tanM/Y2Y4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tLCBpc1NpZ25hbCwgdHJhbnNhY3QgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgdXNlQXRvbSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlLXJlYWN0XCI7XG5pbXBvcnQge1xuICBDbGllbnRXZWJTb2NrZXRBZGFwdGVyLFxuICBUTFJlbW90ZVN5bmNFcnJvcixcbiAgVExTeW5jQ2xpZW50LFxuICBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb25cbn0gZnJvbSBcIkB0bGRyYXcvc3luYy1jb3JlXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIFRBQl9JRCxcbiAgY29tcHV0ZWQsXG4gIGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uLFxuICBjcmVhdGVUTFN0b3JlLFxuICBkZWZhdWx0VXNlclByZWZlcmVuY2VzLFxuICBnZXRVc2VyUHJlZmVyZW5jZXMsXG4gIHVuaXF1ZUlkLFxuICB1c2VSZWZTdGF0ZSxcbiAgdXNlU2hhbGxvd09iamVjdElkZW50aXR5LFxuICB1c2VUTFNjaGVtYUZyb21VdGlscyxcbiAgdXNlVmFsdWVcbn0gZnJvbSBcInRsZHJhd1wiO1xuY29uc3QgTVVMVElQTEFZRVJfRVZFTlRfTkFNRSA9IFwibXVsdGlwbGF5ZXIuY2xpZW50XCI7XG5mdW5jdGlvbiB1c2VTeW5jKG9wdHMpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VSZWZTdGF0ZShudWxsKTtcbiAgY29uc3Qge1xuICAgIHVyaSxcbiAgICByb29tSWQgPSBcImRlZmF1bHRcIixcbiAgICBhc3NldHMsXG4gICAgb25Nb3VudCxcbiAgICB0cmFja0FuYWx5dGljc0V2ZW50OiB0cmFjayxcbiAgICB1c2VySW5mbyxcbiAgICAuLi5zY2hlbWFPcHRzXG4gIH0gPSBvcHRzO1xuICBjb25zdCBfX25ldmVyX18gPSAwO1xuICBjb25zdCBzY2hlbWEgPSB1c2VUTFNjaGVtYUZyb21VdGlscyhzY2hlbWFPcHRzKTtcbiAgY29uc3QgcHJlZnMgPSB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkodXNlckluZm8pO1xuICBjb25zdCB1c2VyQXRvbSA9IHVzZUF0b20oXCJ1c2VyQXRvbVwiLCBwcmVmcyk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdXNlckF0b20uc2V0KHByZWZzKTtcbiAgfSwgW3ByZWZzLCB1c2VyQXRvbV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlSWQgPSB1bmlxdWVJZCgpO1xuICAgIGNvbnN0IHVzZXJQcmVmZXJlbmNlcyA9IGNvbXB1dGVkKFxuICAgICAgXCJ1c2VyUHJlZmVyZW5jZXNcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlclN0dWZmID0gdXNlckF0b20uZ2V0KCk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSAoaXNTaWduYWwodXNlclN0dWZmKSA/IHVzZXJTdHVmZi5nZXQoKSA6IHVzZXJTdHVmZikgPz8gZ2V0VXNlclByZWZlcmVuY2VzKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgY29sb3I6IHVzZXIuY29sb3IgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5jb2xvcixcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5uYW1lXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBzb2NrZXQgPSBuZXcgQ2xpZW50V2ViU29ja2V0QWRhcHRlcihhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmlTdHJpbmcgPSB0eXBlb2YgdXJpID09PSBcInN0cmluZ1wiID8gdXJpIDogYXdhaXQgdXJpKCk7XG4gICAgICBjb25zdCB3aXRoUGFyYW1zID0gbmV3IFVSTCh1cmlTdHJpbmcpO1xuICAgICAgaWYgKHdpdGhQYXJhbXMuc2VhcmNoUGFyYW1zLmhhcyhcInNlc3Npb25JZFwiKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ3VzZVN5bmMuIFwic2Vzc2lvbklkXCIgaXMgYSByZXNlcnZlZCBxdWVyeSBwYXJhbSBuYW1lLiBQbGVhc2UgdXNlIGEgZGlmZmVyZW50IG5hbWUnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAod2l0aFBhcmFtcy5zZWFyY2hQYXJhbXMuaGFzKFwic3RvcmVJZFwiKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ3VzZVN5bmMuIFwic3RvcmVJZFwiIGlzIGEgcmVzZXJ2ZWQgcXVlcnkgcGFyYW0gbmFtZS4gUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBuYW1lJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgd2l0aFBhcmFtcy5zZWFyY2hQYXJhbXMuc2V0KFwic2Vzc2lvbklkXCIsIFRBQl9JRCk7XG4gICAgICB3aXRoUGFyYW1zLnNlYXJjaFBhcmFtcy5zZXQoXCJzdG9yZUlkXCIsIHN0b3JlSWQpO1xuICAgICAgcmV0dXJuIHdpdGhQYXJhbXMudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgICBsZXQgZGlkQ2FuY2VsID0gZmFsc2U7XG4gICAgY29uc3QgY29sbGFib3JhdGlvblN0YXR1c1NpZ25hbCA9IGNvbXB1dGVkKFxuICAgICAgXCJjb2xsYWJvcmF0aW9uIHN0YXR1c1wiLFxuICAgICAgKCkgPT4gc29ja2V0LmNvbm5lY3Rpb25TdGF0dXMgPT09IFwiZXJyb3JcIiA/IFwib2ZmbGluZVwiIDogc29ja2V0LmNvbm5lY3Rpb25TdGF0dXNcbiAgICApO1xuICAgIGNvbnN0IHN5bmNNb2RlID0gYXRvbShcInN5bmMgbW9kZVwiLCBcInJlYWR3cml0ZVwiKTtcbiAgICBjb25zdCBzdG9yZSA9IGNyZWF0ZVRMU3RvcmUoe1xuICAgICAgaWQ6IHN0b3JlSWQsXG4gICAgICBzY2hlbWEsXG4gICAgICBhc3NldHMsXG4gICAgICBvbk1vdW50LFxuICAgICAgY29sbGFib3JhdGlvbjoge1xuICAgICAgICBzdGF0dXM6IGNvbGxhYm9yYXRpb25TdGF0dXNTaWduYWwsXG4gICAgICAgIG1vZGU6IHN5bmNNb2RlXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IFRMU3luY0NsaWVudCh7XG4gICAgICBzdG9yZSxcbiAgICAgIHNvY2tldCxcbiAgICAgIGRpZENhbmNlbDogKCkgPT4gZGlkQ2FuY2VsLFxuICAgICAgb25Mb2FkKGNsaWVudDIpIHtcbiAgICAgICAgdHJhY2s/LihNVUxUSVBMQVlFUl9FVkVOVF9OQU1FLCB7IG5hbWU6IFwibG9hZFwiLCByb29tSWQgfSk7XG4gICAgICAgIHNldFN0YXRlKHsgcmVhZHlDbGllbnQ6IGNsaWVudDIgfSk7XG4gICAgICB9LFxuICAgICAgb25TeW5jRXJyb3IocmVhc29uKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzeW5jIGVycm9yXCIsIHJlYXNvbik7XG4gICAgICAgIHN3aXRjaCAocmVhc29uKSB7XG4gICAgICAgICAgY2FzZSBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uTk9UX0ZPVU5EOlxuICAgICAgICAgICAgdHJhY2s/LihNVUxUSVBMQVlFUl9FVkVOVF9OQU1FLCB7IG5hbWU6IFwicm9vbS1ub3QtZm91bmRcIiwgcm9vbUlkIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uRk9SQklEREVOOlxuICAgICAgICAgICAgdHJhY2s/LihNVUxUSVBMQVlFUl9FVkVOVF9OQU1FLCB7IG5hbWU6IFwibm90LWF1dGhvcml6ZWRcIiwgcm9vbUlkIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBUTFN5bmNFcnJvckNsb3NlRXZlbnRSZWFzb24uTk9UX0FVVEhFTlRJQ0FURUQ6XG4gICAgICAgICAgICB0cmFjaz8uKE1VTFRJUExBWUVSX0VWRU5UX05BTUUsIHsgbmFtZTogXCJub3QtYXV0aGVudGljYXRlZFwiLCByb29tSWQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdHJhY2s/LihNVUxUSVBMQVlFUl9FVkVOVF9OQU1FLCB7IG5hbWU6IFwic3luYy1lcnJvcjpcIiArIHJlYXNvbiwgcm9vbUlkIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3RhdGUoeyBlcnJvcjogbmV3IFRMUmVtb3RlU3luY0Vycm9yKHJlYXNvbikgfSk7XG4gICAgICAgIHNvY2tldC5jbG9zZSgpO1xuICAgICAgfSxcbiAgICAgIG9uQWZ0ZXJDb25uZWN0KF8sIHsgaXNSZWFkb25seSB9KSB7XG4gICAgICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgICAgICBzeW5jTW9kZS5zZXQoaXNSZWFkb25seSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIpO1xuICAgICAgICAgIHN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcHJlc2VuY2U6IGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uKHVzZXJQcmVmZXJlbmNlcykoc3RvcmUpXG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRpZENhbmNlbCA9IHRydWU7XG4gICAgICBjbGllbnQuY2xvc2UoKTtcbiAgICAgIHNvY2tldC5jbG9zZSgpO1xuICAgICAgc2V0U3RhdGUobnVsbCk7XG4gICAgfTtcbiAgfSwgW2Fzc2V0cywgb25Nb3VudCwgdXNlckF0b20sIHJvb21JZCwgc2NoZW1hLCBzZXRTdGF0ZSwgdHJhY2ssIHVyaV0pO1xuICByZXR1cm4gdXNlVmFsdWUoXG4gICAgXCJyZW1vdGUgc3luY2VkIHN0b3JlXCIsXG4gICAgKCkgPT4ge1xuICAgICAgaWYgKCFzdGF0ZSkgcmV0dXJuIHsgc3RhdHVzOiBcImxvYWRpbmdcIiB9O1xuICAgICAgaWYgKHN0YXRlLmVycm9yKSByZXR1cm4geyBzdGF0dXM6IFwiZXJyb3JcIiwgZXJyb3I6IHN0YXRlLmVycm9yIH07XG4gICAgICBpZiAoIXN0YXRlLnJlYWR5Q2xpZW50KSByZXR1cm4geyBzdGF0dXM6IFwibG9hZGluZ1wiIH07XG4gICAgICBjb25zdCBjb25uZWN0aW9uU3RhdHVzID0gc3RhdGUucmVhZHlDbGllbnQuc29ja2V0LmNvbm5lY3Rpb25TdGF0dXM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IFwic3luY2VkLXJlbW90ZVwiLFxuICAgICAgICBjb25uZWN0aW9uU3RhdHVzOiBjb25uZWN0aW9uU3RhdHVzID09PSBcImVycm9yXCIgPyBcIm9mZmxpbmVcIiA6IGNvbm5lY3Rpb25TdGF0dXMsXG4gICAgICAgIHN0b3JlOiBzdGF0ZS5yZWFkeUNsaWVudC5zdG9yZVxuICAgICAgfTtcbiAgICB9LFxuICAgIFtzdGF0ZV1cbiAgKTtcbn1cbmV4cG9ydCB7XG4gIHVzZVN5bmNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTeW5jLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync/dist-esm/useSync.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/sync/dist-esm/useSyncDemo.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/sync/dist-esm/useSyncDemo.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSyncDemo: () => (/* binding */ useSyncDemo)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var tldraw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tldraw */ \"(ssr)/./node_modules/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var _useSync_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useSync.mjs */ \"(ssr)/./node_modules/@tldraw/sync/dist-esm/useSync.mjs\");\n\n\n\nfunction getEnv(cb) {\n  try {\n    return cb();\n  } catch {\n    return void 0;\n  }\n}\nconst DEMO_WORKER = getEnv(() => \"https://demo.tldraw.xyz\") ?? \"https://demo.tldraw.xyz\";\nconst IMAGE_WORKER = getEnv(() => process.env.TLDRAW_IMAGE_URL) ?? \"https://images.tldraw.xyz\";\nfunction useSyncDemo(options) {\n  const { roomId, userInfo, host = DEMO_WORKER, ..._schemaOpts } = options;\n  const assets = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => createDemoAssetStore(host), [host]);\n  const schemaOpts = (0,tldraw__WEBPACK_IMPORTED_MODULE_1__.useShallowObjectIdentity)(_schemaOpts);\n  const schemaOptsWithDefaults = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (\"schema\" in schemaOpts && schemaOpts.schema) return schemaOpts;\n    return {\n      ...schemaOpts,\n      shapeUtils: \"shapeUtils\" in schemaOpts ? [...tldraw__WEBPACK_IMPORTED_MODULE_1__.defaultShapeUtils, ...(schemaOpts.shapeUtils ?? [])] : tldraw__WEBPACK_IMPORTED_MODULE_1__.defaultShapeUtils,\n      bindingUtils: \"bindingUtils\" in schemaOpts ? [...tldraw__WEBPACK_IMPORTED_MODULE_1__.defaultBindingUtils, ...(schemaOpts.bindingUtils ?? [])] : tldraw__WEBPACK_IMPORTED_MODULE_1__.defaultBindingUtils\n    };\n  }, [schemaOpts]);\n  return (0,_useSync_mjs__WEBPACK_IMPORTED_MODULE_2__.useSync)({\n    uri: `${host}/connect/${encodeURIComponent(roomId)}`,\n    roomId,\n    userInfo,\n    assets,\n    onMount: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n      (editor) => {\n        editor.registerExternalAssetHandler(\"url\", async ({ url }) => {\n          return await createAssetFromUrlUsingDemoServer(host, url);\n        });\n      },\n      [host]\n    ),\n    ...schemaOptsWithDefaults\n  });\n}\nfunction createDemoAssetStore(host) {\n  return {\n    upload: async (asset, file) => {\n      const id = (0,tldraw__WEBPACK_IMPORTED_MODULE_1__.uniqueId)();\n      const objectName = `${id}-${file.name}`.replace(/\\W/g, \"-\");\n      const url = `${host}/uploads/${objectName}`;\n      await fetch(url, {\n        method: \"POST\",\n        body: file\n      });\n      return url;\n    },\n    resolve(asset, context) {\n      if (!asset.props.src) return null;\n      if (asset.type === \"video\") return asset.props.src;\n      if (asset.type !== \"image\") return null;\n      if (!asset.props.src.startsWith(\"http:\") && !asset.props.src.startsWith(\"https:\"))\n        return asset.props.src;\n      if (context.shouldResolveToOriginal) return asset.props.src;\n      if (tldraw__WEBPACK_IMPORTED_MODULE_1__.MediaHelpers.isAnimatedImageType(asset?.props.mimeType) || asset.props.isAnimated)\n        return asset.props.src;\n      if (tldraw__WEBPACK_IMPORTED_MODULE_1__.MediaHelpers.isVectorImageType(asset?.props.mimeType)) return asset.props.src;\n      const url = new URL(asset.props.src);\n      const isTldrawImage = url.origin === host || /\\.tldraw\\.(?:com|xyz|dev|workers\\.dev)$/.test(url.host);\n      if (!isTldrawImage) return asset.props.src;\n      const { fileSize = 0 } = asset.props;\n      const isWorthResizing = fileSize >= 1024 * 1024 * 1.5;\n      if (isWorthResizing) {\n        const networkCompensation = !context.networkEffectiveType || context.networkEffectiveType === \"4g\" ? 1 : 0.5;\n        const width = Math.ceil(\n          Math.min(\n            asset.props.w * context.steppedScreenScale * networkCompensation * context.dpr,\n            asset.props.w\n          )\n        );\n        url.searchParams.set(\"w\", width.toString());\n      }\n      const newUrl = `${IMAGE_WORKER}/${url.host}/${url.toString().slice(url.origin.length + 1)}`;\n      return newUrl;\n    }\n  };\n}\nasync function createAssetFromUrlUsingDemoServer(host, url) {\n  const urlHash = (0,tldraw__WEBPACK_IMPORTED_MODULE_1__.getHashForString)(url);\n  try {\n    const fetchUrl = new URL(`${host}/bookmarks/unfurl`);\n    fetchUrl.searchParams.set(\"url\", url);\n    const meta = await (await fetch(fetchUrl, { method: \"POST\" })).json();\n    return {\n      id: tldraw__WEBPACK_IMPORTED_MODULE_1__.AssetRecordType.createId(urlHash),\n      typeName: \"asset\",\n      type: \"bookmark\",\n      props: {\n        src: url,\n        description: meta?.description ?? \"\",\n        image: meta?.image ?? \"\",\n        favicon: meta?.favicon ?? \"\",\n        title: meta?.title ?? \"\"\n      },\n      meta: {}\n    };\n  } catch (error) {\n    console.error(error);\n    return {\n      id: tldraw__WEBPACK_IMPORTED_MODULE_1__.AssetRecordType.createId(urlHash),\n      typeName: \"asset\",\n      type: \"bookmark\",\n      props: {\n        src: url,\n        description: \"\",\n        image: \"\",\n        favicon: \"\",\n        title: \"\"\n      },\n      meta: {}\n    };\n  }\n}\n\n//# sourceMappingURL=useSyncDemo.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zeW5jL2Rpc3QtZXNtL3VzZVN5bmNEZW1vLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZDO0FBUzdCO0FBQ3dCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVEQUF1RDtBQUNqRSxpQkFBaUIsOENBQU87QUFDeEIscUJBQXFCLGdFQUF3QjtBQUM3QyxpQ0FBaUMsOENBQU87QUFDeEM7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHFEQUFpQixzQ0FBc0MscURBQWlCO0FBQzNILHVEQUF1RCx1REFBbUIsd0NBQXdDLHVEQUFtQjtBQUNySTtBQUNBLEdBQUc7QUFDSCxTQUFTLHFEQUFPO0FBQ2hCLFlBQVksS0FBSyxXQUFXLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtEQUFXO0FBQ3hCO0FBQ0EsNERBQTRELEtBQUs7QUFDakU7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnREFBUTtBQUN6Qiw0QkFBNEIsR0FBRyxHQUFHLFVBQVU7QUFDNUMscUJBQXFCLEtBQUssV0FBVyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0RBQVk7QUFDdEI7QUFDQSxVQUFVLGdEQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWEsR0FBRyxTQUFTLEdBQUcsNENBQTRDO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQWdCO0FBQ2xDO0FBQ0EsZ0NBQWdDLEtBQUs7QUFDckM7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0EsVUFBVSxtREFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFVBQVUsbURBQWU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N5bmMvZGlzdC1lc20vdXNlU3luY0RlbW8ubWpzPzk2OTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIEFzc2V0UmVjb3JkVHlwZSxcbiAgTWVkaWFIZWxwZXJzLFxuICBkZWZhdWx0QmluZGluZ1V0aWxzLFxuICBkZWZhdWx0U2hhcGVVdGlscyxcbiAgZ2V0SGFzaEZvclN0cmluZyxcbiAgdW5pcXVlSWQsXG4gIHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eVxufSBmcm9tIFwidGxkcmF3XCI7XG5pbXBvcnQgeyB1c2VTeW5jIH0gZnJvbSBcIi4vdXNlU3luYy5tanNcIjtcbmZ1bmN0aW9uIGdldEVudihjYikge1xuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59XG5jb25zdCBERU1PX1dPUktFUiA9IGdldEVudigoKSA9PiBcImh0dHBzOi8vZGVtby50bGRyYXcueHl6XCIpID8/IFwiaHR0cHM6Ly9kZW1vLnRsZHJhdy54eXpcIjtcbmNvbnN0IElNQUdFX1dPUktFUiA9IGdldEVudigoKSA9PiBwcm9jZXNzLmVudi5UTERSQVdfSU1BR0VfVVJMKSA/PyBcImh0dHBzOi8vaW1hZ2VzLnRsZHJhdy54eXpcIjtcbmZ1bmN0aW9uIHVzZVN5bmNEZW1vKG9wdGlvbnMpIHtcbiAgY29uc3QgeyByb29tSWQsIHVzZXJJbmZvLCBob3N0ID0gREVNT19XT1JLRVIsIC4uLl9zY2hlbWFPcHRzIH0gPSBvcHRpb25zO1xuICBjb25zdCBhc3NldHMgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZURlbW9Bc3NldFN0b3JlKGhvc3QpLCBbaG9zdF0pO1xuICBjb25zdCBzY2hlbWFPcHRzID0gdXNlU2hhbGxvd09iamVjdElkZW50aXR5KF9zY2hlbWFPcHRzKTtcbiAgY29uc3Qgc2NoZW1hT3B0c1dpdGhEZWZhdWx0cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChcInNjaGVtYVwiIGluIHNjaGVtYU9wdHMgJiYgc2NoZW1hT3B0cy5zY2hlbWEpIHJldHVybiBzY2hlbWFPcHRzO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zY2hlbWFPcHRzLFxuICAgICAgc2hhcGVVdGlsczogXCJzaGFwZVV0aWxzXCIgaW4gc2NoZW1hT3B0cyA/IFsuLi5kZWZhdWx0U2hhcGVVdGlscywgLi4uKHNjaGVtYU9wdHMuc2hhcGVVdGlscyA/PyBbXSldIDogZGVmYXVsdFNoYXBlVXRpbHMsXG4gICAgICBiaW5kaW5nVXRpbHM6IFwiYmluZGluZ1V0aWxzXCIgaW4gc2NoZW1hT3B0cyA/IFsuLi5kZWZhdWx0QmluZGluZ1V0aWxzLCAuLi4oc2NoZW1hT3B0cy5iaW5kaW5nVXRpbHMgPz8gW10pXSA6IGRlZmF1bHRCaW5kaW5nVXRpbHNcbiAgICB9O1xuICB9LCBbc2NoZW1hT3B0c10pO1xuICByZXR1cm4gdXNlU3luYyh7XG4gICAgdXJpOiBgJHtob3N0fS9jb25uZWN0LyR7ZW5jb2RlVVJJQ29tcG9uZW50KHJvb21JZCl9YCxcbiAgICByb29tSWQsXG4gICAgdXNlckluZm8sXG4gICAgYXNzZXRzLFxuICAgIG9uTW91bnQ6IHVzZUNhbGxiYWNrKFxuICAgICAgKGVkaXRvcikgPT4ge1xuICAgICAgICBlZGl0b3IucmVnaXN0ZXJFeHRlcm5hbEFzc2V0SGFuZGxlcihcInVybFwiLCBhc3luYyAoeyB1cmwgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVBc3NldEZyb21VcmxVc2luZ0RlbW9TZXJ2ZXIoaG9zdCwgdXJsKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgW2hvc3RdXG4gICAgKSxcbiAgICAuLi5zY2hlbWFPcHRzV2l0aERlZmF1bHRzXG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRGVtb0Fzc2V0U3RvcmUoaG9zdCkge1xuICByZXR1cm4ge1xuICAgIHVwbG9hZDogYXN5bmMgKGFzc2V0LCBmaWxlKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHVuaXF1ZUlkKCk7XG4gICAgICBjb25zdCBvYmplY3ROYW1lID0gYCR7aWR9LSR7ZmlsZS5uYW1lfWAucmVwbGFjZSgvXFxXL2csIFwiLVwiKTtcbiAgICAgIGNvbnN0IHVybCA9IGAke2hvc3R9L3VwbG9hZHMvJHtvYmplY3ROYW1lfWA7XG4gICAgICBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogZmlsZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgcmVzb2x2ZShhc3NldCwgY29udGV4dCkge1xuICAgICAgaWYgKCFhc3NldC5wcm9wcy5zcmMpIHJldHVybiBudWxsO1xuICAgICAgaWYgKGFzc2V0LnR5cGUgPT09IFwidmlkZW9cIikgcmV0dXJuIGFzc2V0LnByb3BzLnNyYztcbiAgICAgIGlmIChhc3NldC50eXBlICE9PSBcImltYWdlXCIpIHJldHVybiBudWxsO1xuICAgICAgaWYgKCFhc3NldC5wcm9wcy5zcmMuc3RhcnRzV2l0aChcImh0dHA6XCIpICYmICFhc3NldC5wcm9wcy5zcmMuc3RhcnRzV2l0aChcImh0dHBzOlwiKSlcbiAgICAgICAgcmV0dXJuIGFzc2V0LnByb3BzLnNyYztcbiAgICAgIGlmIChjb250ZXh0LnNob3VsZFJlc29sdmVUb09yaWdpbmFsKSByZXR1cm4gYXNzZXQucHJvcHMuc3JjO1xuICAgICAgaWYgKE1lZGlhSGVscGVycy5pc0FuaW1hdGVkSW1hZ2VUeXBlKGFzc2V0Py5wcm9wcy5taW1lVHlwZSkgfHwgYXNzZXQucHJvcHMuaXNBbmltYXRlZClcbiAgICAgICAgcmV0dXJuIGFzc2V0LnByb3BzLnNyYztcbiAgICAgIGlmIChNZWRpYUhlbHBlcnMuaXNWZWN0b3JJbWFnZVR5cGUoYXNzZXQ/LnByb3BzLm1pbWVUeXBlKSkgcmV0dXJuIGFzc2V0LnByb3BzLnNyYztcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYXNzZXQucHJvcHMuc3JjKTtcbiAgICAgIGNvbnN0IGlzVGxkcmF3SW1hZ2UgPSB1cmwub3JpZ2luID09PSBob3N0IHx8IC9cXC50bGRyYXdcXC4oPzpjb218eHl6fGRldnx3b3JrZXJzXFwuZGV2KSQvLnRlc3QodXJsLmhvc3QpO1xuICAgICAgaWYgKCFpc1RsZHJhd0ltYWdlKSByZXR1cm4gYXNzZXQucHJvcHMuc3JjO1xuICAgICAgY29uc3QgeyBmaWxlU2l6ZSA9IDAgfSA9IGFzc2V0LnByb3BzO1xuICAgICAgY29uc3QgaXNXb3J0aFJlc2l6aW5nID0gZmlsZVNpemUgPj0gMTAyNCAqIDEwMjQgKiAxLjU7XG4gICAgICBpZiAoaXNXb3J0aFJlc2l6aW5nKSB7XG4gICAgICAgIGNvbnN0IG5ldHdvcmtDb21wZW5zYXRpb24gPSAhY29udGV4dC5uZXR3b3JrRWZmZWN0aXZlVHlwZSB8fCBjb250ZXh0Lm5ldHdvcmtFZmZlY3RpdmVUeXBlID09PSBcIjRnXCIgPyAxIDogMC41O1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguY2VpbChcbiAgICAgICAgICBNYXRoLm1pbihcbiAgICAgICAgICAgIGFzc2V0LnByb3BzLncgKiBjb250ZXh0LnN0ZXBwZWRTY3JlZW5TY2FsZSAqIG5ldHdvcmtDb21wZW5zYXRpb24gKiBjb250ZXh0LmRwcixcbiAgICAgICAgICAgIGFzc2V0LnByb3BzLndcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwid1wiLCB3aWR0aC50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5ld1VybCA9IGAke0lNQUdFX1dPUktFUn0vJHt1cmwuaG9zdH0vJHt1cmwudG9TdHJpbmcoKS5zbGljZSh1cmwub3JpZ2luLmxlbmd0aCArIDEpfWA7XG4gICAgICByZXR1cm4gbmV3VXJsO1xuICAgIH1cbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFzc2V0RnJvbVVybFVzaW5nRGVtb1NlcnZlcihob3N0LCB1cmwpIHtcbiAgY29uc3QgdXJsSGFzaCA9IGdldEhhc2hGb3JTdHJpbmcodXJsKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBmZXRjaFVybCA9IG5ldyBVUkwoYCR7aG9zdH0vYm9va21hcmtzL3VuZnVybGApO1xuICAgIGZldGNoVXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ1cmxcIiwgdXJsKTtcbiAgICBjb25zdCBtZXRhID0gYXdhaXQgKGF3YWl0IGZldGNoKGZldGNoVXJsLCB7IG1ldGhvZDogXCJQT1NUXCIgfSkpLmpzb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IEFzc2V0UmVjb3JkVHlwZS5jcmVhdGVJZCh1cmxIYXNoKSxcbiAgICAgIHR5cGVOYW1lOiBcImFzc2V0XCIsXG4gICAgICB0eXBlOiBcImJvb2ttYXJrXCIsXG4gICAgICBwcm9wczoge1xuICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgZGVzY3JpcHRpb246IG1ldGE/LmRlc2NyaXB0aW9uID8/IFwiXCIsXG4gICAgICAgIGltYWdlOiBtZXRhPy5pbWFnZSA/PyBcIlwiLFxuICAgICAgICBmYXZpY29uOiBtZXRhPy5mYXZpY29uID8/IFwiXCIsXG4gICAgICAgIHRpdGxlOiBtZXRhPy50aXRsZSA/PyBcIlwiXG4gICAgICB9LFxuICAgICAgbWV0YToge31cbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogQXNzZXRSZWNvcmRUeXBlLmNyZWF0ZUlkKHVybEhhc2gpLFxuICAgICAgdHlwZU5hbWU6IFwiYXNzZXRcIixcbiAgICAgIHR5cGU6IFwiYm9va21hcmtcIixcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIHNyYzogdXJsLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgaW1hZ2U6IFwiXCIsXG4gICAgICAgIGZhdmljb246IFwiXCIsXG4gICAgICAgIHRpdGxlOiBcIlwiXG4gICAgICB9LFxuICAgICAgbWV0YToge31cbiAgICB9O1xuICB9XG59XG5leHBvcnQge1xuICB1c2VTeW5jRGVtb1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVN5bmNEZW1vLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/sync/dist-esm/useSyncDemo.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createIntegrityChecker: () => (/* binding */ createIntegrityChecker),\n/* harmony export */   onValidationFailure: () => (/* binding */ onValidationFailure)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n\n\n\n\n\n\n\nfunction sortByIndex(a, b) {\n  if (a.index < b.index) {\n    return -1;\n  } else if (a.index > b.index) {\n    return 1;\n  }\n  return 0;\n}\nfunction redactRecordForErrorReporting(record) {\n  if (record.typeName === \"asset\") {\n    if (\"src\" in record) {\n      record.src = \"<redacted>\";\n    }\n    if (\"src\" in record.props) {\n      record.props.src = \"<redacted>\";\n    }\n  }\n}\nfunction onValidationFailure({\n  error,\n  phase,\n  record,\n  recordBefore\n}) {\n  const isExistingValidationIssue = (\n    // if we're initializing the store for the first time, we should\n    // allow invalid records so people can load old buggy data:\n    (phase === \"initialize\")\n  );\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.annotateError)(error, {\n    tags: {\n      origin: \"store.validateRecord\",\n      storePhase: phase,\n      isExistingValidationIssue\n    },\n    extras: {\n      recordBefore: recordBefore ? redactRecordForErrorReporting((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(recordBefore)) : void 0,\n      recordAfter: redactRecordForErrorReporting((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record))\n    }\n  });\n  throw error;\n}\nfunction getDefaultPages() {\n  return [\n    _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__.PageRecordType.create({\n      id: \"page:page\",\n      name: \"Page 1\",\n      index: \"a1\",\n      meta: {}\n    })\n  ];\n}\nfunction createIntegrityChecker(store) {\n  const $pageIds = store.query.ids(\"page\");\n  const $pageStates = store.query.records(\"instance_page_state\");\n  const ensureStoreIsUsable = () => {\n    if (!store.has(_records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID)) {\n      store.put([_records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.DocumentRecordType.create({ id: _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID, name: store.props.defaultName })]);\n      return ensureStoreIsUsable();\n    }\n    if (!store.has(_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.TLPOINTER_ID)) {\n      store.put([_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.PointerRecordType.create({ id: _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.TLPOINTER_ID })]);\n      return ensureStoreIsUsable();\n    }\n    const pageIds = $pageIds.get();\n    if (pageIds.size === 0) {\n      store.put(getDefaultPages());\n      return ensureStoreIsUsable();\n    }\n    const getFirstPageId = () => [...pageIds].map((id) => store.get(id)).sort(sortByIndex)[0].id;\n    const instanceState = store.get(_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__.TLINSTANCE_ID);\n    if (!instanceState) {\n      store.put([\n        store.schema.types.instance.create({\n          id: _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__.TLINSTANCE_ID,\n          currentPageId: getFirstPageId(),\n          exportBackground: true\n        })\n      ]);\n      return ensureStoreIsUsable();\n    } else if (!pageIds.has(instanceState.currentPageId)) {\n      store.put([{ ...instanceState, currentPageId: getFirstPageId() }]);\n      return ensureStoreIsUsable();\n    }\n    const missingPageStateIds = /* @__PURE__ */ new Set();\n    const missingCameraIds = /* @__PURE__ */ new Set();\n    for (const id of pageIds) {\n      const pageStateId = _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.createId(id);\n      const pageState = store.get(pageStateId);\n      if (!pageState) {\n        missingPageStateIds.add(pageStateId);\n      }\n      const cameraId = _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(id);\n      if (!store.has(cameraId)) {\n        missingCameraIds.add(cameraId);\n      }\n    }\n    if (missingPageStateIds.size > 0) {\n      store.put(\n        [...missingPageStateIds].map(\n          (id) => _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.create({\n            id,\n            pageId: _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.parseId(id)\n          })\n        )\n      );\n    }\n    if (missingCameraIds.size > 0) {\n      store.put([...missingCameraIds].map((id) => _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.create({ id })));\n    }\n    const pageStates = $pageStates.get();\n    for (const pageState of pageStates) {\n      if (!pageIds.has(pageState.pageId)) {\n        store.remove([pageState.id]);\n        continue;\n      }\n      if (pageState.croppingShapeId && !store.has(pageState.croppingShapeId)) {\n        store.put([{ ...pageState, croppingShapeId: null }]);\n        return ensureStoreIsUsable();\n      }\n      if (pageState.focusedGroupId && !store.has(pageState.focusedGroupId)) {\n        store.put([{ ...pageState, focusedGroupId: null }]);\n        return ensureStoreIsUsable();\n      }\n      if (pageState.hoveredShapeId && !store.has(pageState.hoveredShapeId)) {\n        store.put([{ ...pageState, hoveredShapeId: null }]);\n        return ensureStoreIsUsable();\n      }\n      const filteredSelectedIds = pageState.selectedShapeIds.filter((id) => store.has(id));\n      if (filteredSelectedIds.length !== pageState.selectedShapeIds.length) {\n        store.put([{ ...pageState, selectedShapeIds: filteredSelectedIds }]);\n        return ensureStoreIsUsable();\n      }\n      const filteredHintingIds = pageState.hintingShapeIds.filter((id) => store.has(id));\n      if (filteredHintingIds.length !== pageState.hintingShapeIds.length) {\n        store.put([{ ...pageState, hintingShapeIds: filteredHintingIds }]);\n        return ensureStoreIsUsable();\n      }\n      const filteredErasingIds = pageState.erasingShapeIds.filter((id) => store.has(id));\n      if (filteredErasingIds.length !== pageState.erasingShapeIds.length) {\n        store.put([{ ...pageState, erasingShapeIds: filteredErasingIds }]);\n        return ensureStoreIsUsable();\n      }\n    }\n  };\n  return ensureStoreIsUsable;\n}\n\n//# sourceMappingURL=TLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9UTFN0b3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDTDtBQUNtQjtBQUNwQjtBQUNIO0FBQ2tCO0FBQ0U7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDREQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpRUFBaUUsOERBQWU7QUFDaEYsaURBQWlELDhEQUFlO0FBQ2hFO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0VBQWE7QUFDaEMsaUJBQWlCLHVFQUFrQixVQUFVLElBQUksa0VBQWEsaUNBQWlDO0FBQy9GO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQVk7QUFDL0IsaUJBQWlCLHFFQUFpQixVQUFVLElBQUksZ0VBQVksRUFBRTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGtFQUFhO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0VBQWE7QUFDM0I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBTTtBQUNOLG1CQUFtQixtREFBbUQ7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRkFBMkI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUVBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlGQUEyQjtBQUM3QztBQUNBLG9CQUFvQixpRkFBMkI7QUFDL0MsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG1FQUFnQixVQUFVLElBQUk7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxQ0FBcUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9DQUFvQztBQUN6RDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0NBQW9DO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHFEQUFxRDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtREFBbUQ7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbURBQW1EO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL1RMU3RvcmUubWpzP2YzOTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYW5ub3RhdGVFcnJvciwgc3RydWN0dXJlZENsb25lIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IENhbWVyYVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMQ2FtZXJhLm1qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWNvcmRUeXBlLCBUTERPQ1VNRU5UX0lEIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTERvY3VtZW50Lm1qc1wiO1xuaW1wb3J0IHsgVExJTlNUQU5DRV9JRCB9IGZyb20gXCIuL3JlY29yZHMvVExJbnN0YW5jZS5tanNcIjtcbmltcG9ydCB7IFBhZ2VSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBhZ2UubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgUG9pbnRlclJlY29yZFR5cGUsIFRMUE9JTlRFUl9JRCB9IGZyb20gXCIuL3JlY29yZHMvVExQb2ludGVyLm1qc1wiO1xuZnVuY3Rpb24gc29ydEJ5SW5kZXgoYSwgYikge1xuICBpZiAoYS5pbmRleCA8IGIuaW5kZXgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSBpZiAoYS5pbmRleCA+IGIuaW5kZXgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIHJlZGFjdFJlY29yZEZvckVycm9yUmVwb3J0aW5nKHJlY29yZCkge1xuICBpZiAocmVjb3JkLnR5cGVOYW1lID09PSBcImFzc2V0XCIpIHtcbiAgICBpZiAoXCJzcmNcIiBpbiByZWNvcmQpIHtcbiAgICAgIHJlY29yZC5zcmMgPSBcIjxyZWRhY3RlZD5cIjtcbiAgICB9XG4gICAgaWYgKFwic3JjXCIgaW4gcmVjb3JkLnByb3BzKSB7XG4gICAgICByZWNvcmQucHJvcHMuc3JjID0gXCI8cmVkYWN0ZWQ+XCI7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBvblZhbGlkYXRpb25GYWlsdXJlKHtcbiAgZXJyb3IsXG4gIHBoYXNlLFxuICByZWNvcmQsXG4gIHJlY29yZEJlZm9yZVxufSkge1xuICBjb25zdCBpc0V4aXN0aW5nVmFsaWRhdGlvbklzc3VlID0gKFxuICAgIC8vIGlmIHdlJ3JlIGluaXRpYWxpemluZyB0aGUgc3RvcmUgZm9yIHRoZSBmaXJzdCB0aW1lLCB3ZSBzaG91bGRcbiAgICAvLyBhbGxvdyBpbnZhbGlkIHJlY29yZHMgc28gcGVvcGxlIGNhbiBsb2FkIG9sZCBidWdneSBkYXRhOlxuICAgIChwaGFzZSA9PT0gXCJpbml0aWFsaXplXCIpXG4gICk7XG4gIGFubm90YXRlRXJyb3IoZXJyb3IsIHtcbiAgICB0YWdzOiB7XG4gICAgICBvcmlnaW46IFwic3RvcmUudmFsaWRhdGVSZWNvcmRcIixcbiAgICAgIHN0b3JlUGhhc2U6IHBoYXNlLFxuICAgICAgaXNFeGlzdGluZ1ZhbGlkYXRpb25Jc3N1ZVxuICAgIH0sXG4gICAgZXh0cmFzOiB7XG4gICAgICByZWNvcmRCZWZvcmU6IHJlY29yZEJlZm9yZSA/IHJlZGFjdFJlY29yZEZvckVycm9yUmVwb3J0aW5nKHN0cnVjdHVyZWRDbG9uZShyZWNvcmRCZWZvcmUpKSA6IHZvaWQgMCxcbiAgICAgIHJlY29yZEFmdGVyOiByZWRhY3RSZWNvcmRGb3JFcnJvclJlcG9ydGluZyhzdHJ1Y3R1cmVkQ2xvbmUocmVjb3JkKSlcbiAgICB9XG4gIH0pO1xuICB0aHJvdyBlcnJvcjtcbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRQYWdlcygpIHtcbiAgcmV0dXJuIFtcbiAgICBQYWdlUmVjb3JkVHlwZS5jcmVhdGUoe1xuICAgICAgaWQ6IFwicGFnZTpwYWdlXCIsXG4gICAgICBuYW1lOiBcIlBhZ2UgMVwiLFxuICAgICAgaW5kZXg6IFwiYTFcIixcbiAgICAgIG1ldGE6IHt9XG4gICAgfSlcbiAgXTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUludGVncml0eUNoZWNrZXIoc3RvcmUpIHtcbiAgY29uc3QgJHBhZ2VJZHMgPSBzdG9yZS5xdWVyeS5pZHMoXCJwYWdlXCIpO1xuICBjb25zdCAkcGFnZVN0YXRlcyA9IHN0b3JlLnF1ZXJ5LnJlY29yZHMoXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIpO1xuICBjb25zdCBlbnN1cmVTdG9yZUlzVXNhYmxlID0gKCkgPT4ge1xuICAgIGlmICghc3RvcmUuaGFzKFRMRE9DVU1FTlRfSUQpKSB7XG4gICAgICBzdG9yZS5wdXQoW0RvY3VtZW50UmVjb3JkVHlwZS5jcmVhdGUoeyBpZDogVExET0NVTUVOVF9JRCwgbmFtZTogc3RvcmUucHJvcHMuZGVmYXVsdE5hbWUgfSldKTtcbiAgICAgIHJldHVybiBlbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgfVxuICAgIGlmICghc3RvcmUuaGFzKFRMUE9JTlRFUl9JRCkpIHtcbiAgICAgIHN0b3JlLnB1dChbUG9pbnRlclJlY29yZFR5cGUuY3JlYXRlKHsgaWQ6IFRMUE9JTlRFUl9JRCB9KV0pO1xuICAgICAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICB9XG4gICAgY29uc3QgcGFnZUlkcyA9ICRwYWdlSWRzLmdldCgpO1xuICAgIGlmIChwYWdlSWRzLnNpemUgPT09IDApIHtcbiAgICAgIHN0b3JlLnB1dChnZXREZWZhdWx0UGFnZXMoKSk7XG4gICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgIH1cbiAgICBjb25zdCBnZXRGaXJzdFBhZ2VJZCA9ICgpID0+IFsuLi5wYWdlSWRzXS5tYXAoKGlkKSA9PiBzdG9yZS5nZXQoaWQpKS5zb3J0KHNvcnRCeUluZGV4KVswXS5pZDtcbiAgICBjb25zdCBpbnN0YW5jZVN0YXRlID0gc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpO1xuICAgIGlmICghaW5zdGFuY2VTdGF0ZSkge1xuICAgICAgc3RvcmUucHV0KFtcbiAgICAgICAgc3RvcmUuc2NoZW1hLnR5cGVzLmluc3RhbmNlLmNyZWF0ZSh7XG4gICAgICAgICAgaWQ6IFRMSU5TVEFOQ0VfSUQsXG4gICAgICAgICAgY3VycmVudFBhZ2VJZDogZ2V0Rmlyc3RQYWdlSWQoKSxcbiAgICAgICAgICBleHBvcnRCYWNrZ3JvdW5kOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICBdKTtcbiAgICAgIHJldHVybiBlbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgfSBlbHNlIGlmICghcGFnZUlkcy5oYXMoaW5zdGFuY2VTdGF0ZS5jdXJyZW50UGFnZUlkKSkge1xuICAgICAgc3RvcmUucHV0KFt7IC4uLmluc3RhbmNlU3RhdGUsIGN1cnJlbnRQYWdlSWQ6IGdldEZpcnN0UGFnZUlkKCkgfV0pO1xuICAgICAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICB9XG4gICAgY29uc3QgbWlzc2luZ1BhZ2VTdGF0ZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgbWlzc2luZ0NhbWVyYUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBpZCBvZiBwYWdlSWRzKSB7XG4gICAgICBjb25zdCBwYWdlU3RhdGVJZCA9IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChpZCk7XG4gICAgICBjb25zdCBwYWdlU3RhdGUgPSBzdG9yZS5nZXQocGFnZVN0YXRlSWQpO1xuICAgICAgaWYgKCFwYWdlU3RhdGUpIHtcbiAgICAgICAgbWlzc2luZ1BhZ2VTdGF0ZUlkcy5hZGQocGFnZVN0YXRlSWQpO1xuICAgICAgfVxuICAgICAgY29uc3QgY2FtZXJhSWQgPSBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZUlkKGlkKTtcbiAgICAgIGlmICghc3RvcmUuaGFzKGNhbWVyYUlkKSkge1xuICAgICAgICBtaXNzaW5nQ2FtZXJhSWRzLmFkZChjYW1lcmFJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtaXNzaW5nUGFnZVN0YXRlSWRzLnNpemUgPiAwKSB7XG4gICAgICBzdG9yZS5wdXQoXG4gICAgICAgIFsuLi5taXNzaW5nUGFnZVN0YXRlSWRzXS5tYXAoXG4gICAgICAgICAgKGlkKSA9PiBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlKHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgcGFnZUlkOiBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUucGFyc2VJZChpZClcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAobWlzc2luZ0NhbWVyYUlkcy5zaXplID4gMCkge1xuICAgICAgc3RvcmUucHV0KFsuLi5taXNzaW5nQ2FtZXJhSWRzXS5tYXAoKGlkKSA9PiBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZSh7IGlkIH0pKSk7XG4gICAgfVxuICAgIGNvbnN0IHBhZ2VTdGF0ZXMgPSAkcGFnZVN0YXRlcy5nZXQoKTtcbiAgICBmb3IgKGNvbnN0IHBhZ2VTdGF0ZSBvZiBwYWdlU3RhdGVzKSB7XG4gICAgICBpZiAoIXBhZ2VJZHMuaGFzKHBhZ2VTdGF0ZS5wYWdlSWQpKSB7XG4gICAgICAgIHN0b3JlLnJlbW92ZShbcGFnZVN0YXRlLmlkXSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2VTdGF0ZS5jcm9wcGluZ1NoYXBlSWQgJiYgIXN0b3JlLmhhcyhwYWdlU3RhdGUuY3JvcHBpbmdTaGFwZUlkKSkge1xuICAgICAgICBzdG9yZS5wdXQoW3sgLi4ucGFnZVN0YXRlLCBjcm9wcGluZ1NoYXBlSWQ6IG51bGwgfV0pO1xuICAgICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCAmJiAhc3RvcmUuaGFzKHBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCkpIHtcbiAgICAgICAgc3RvcmUucHV0KFt7IC4uLnBhZ2VTdGF0ZSwgZm9jdXNlZEdyb3VwSWQ6IG51bGwgfV0pO1xuICAgICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgfVxuICAgICAgaWYgKHBhZ2VTdGF0ZS5ob3ZlcmVkU2hhcGVJZCAmJiAhc3RvcmUuaGFzKHBhZ2VTdGF0ZS5ob3ZlcmVkU2hhcGVJZCkpIHtcbiAgICAgICAgc3RvcmUucHV0KFt7IC4uLnBhZ2VTdGF0ZSwgaG92ZXJlZFNoYXBlSWQ6IG51bGwgfV0pO1xuICAgICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsdGVyZWRTZWxlY3RlZElkcyA9IHBhZ2VTdGF0ZS5zZWxlY3RlZFNoYXBlSWRzLmZpbHRlcigoaWQpID0+IHN0b3JlLmhhcyhpZCkpO1xuICAgICAgaWYgKGZpbHRlcmVkU2VsZWN0ZWRJZHMubGVuZ3RoICE9PSBwYWdlU3RhdGUuc2VsZWN0ZWRTaGFwZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgc3RvcmUucHV0KFt7IC4uLnBhZ2VTdGF0ZSwgc2VsZWN0ZWRTaGFwZUlkczogZmlsdGVyZWRTZWxlY3RlZElkcyB9XSk7XG4gICAgICAgIHJldHVybiBlbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBmaWx0ZXJlZEhpbnRpbmdJZHMgPSBwYWdlU3RhdGUuaGludGluZ1NoYXBlSWRzLmZpbHRlcigoaWQpID0+IHN0b3JlLmhhcyhpZCkpO1xuICAgICAgaWYgKGZpbHRlcmVkSGludGluZ0lkcy5sZW5ndGggIT09IHBhZ2VTdGF0ZS5oaW50aW5nU2hhcGVJZHMubGVuZ3RoKSB7XG4gICAgICAgIHN0b3JlLnB1dChbeyAuLi5wYWdlU3RhdGUsIGhpbnRpbmdTaGFwZUlkczogZmlsdGVyZWRIaW50aW5nSWRzIH1dKTtcbiAgICAgICAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbHRlcmVkRXJhc2luZ0lkcyA9IHBhZ2VTdGF0ZS5lcmFzaW5nU2hhcGVJZHMuZmlsdGVyKChpZCkgPT4gc3RvcmUuaGFzKGlkKSk7XG4gICAgICBpZiAoZmlsdGVyZWRFcmFzaW5nSWRzLmxlbmd0aCAhPT0gcGFnZVN0YXRlLmVyYXNpbmdTaGFwZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgc3RvcmUucHV0KFt7IC4uLnBhZ2VTdGF0ZSwgZXJhc2luZ1NoYXBlSWRzOiBmaWx0ZXJlZEVyYXNpbmdJZHMgfV0pO1xuICAgICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGU7XG59XG5leHBvcnQge1xuICBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyLFxuICBvblZhbGlkYXRpb25GYWlsdXJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExTdG9yZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assetIdValidator: () => (/* binding */ assetIdValidator),\n/* harmony export */   createAssetValidator: () => (/* binding */ createAssetValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\nconst assetIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__.idValidator)(\"asset\");\nfunction createAssetValidator(type, props) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: assetIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"asset\"),\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    props,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExCYXNlQXNzZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUM7QUFDa0I7QUFDdkQseUJBQXlCLG1FQUFXO0FBQ3BDO0FBQ0EsU0FBUyxzREFBUTtBQUNqQjtBQUNBLGNBQWMsdURBQVM7QUFDdkIsVUFBVSx1REFBUztBQUNuQjtBQUNBLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vYXNzZXRzL1RMQmFzZUFzc2V0Lm1qcz84MzUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9pZC12YWxpZGF0b3IubWpzXCI7XG5jb25zdCBhc3NldElkVmFsaWRhdG9yID0gaWRWYWxpZGF0b3IoXCJhc3NldFwiKTtcbmZ1bmN0aW9uIGNyZWF0ZUFzc2V0VmFsaWRhdG9yKHR5cGUsIHByb3BzKSB7XG4gIHJldHVybiBULm9iamVjdCh7XG4gICAgaWQ6IGFzc2V0SWRWYWxpZGF0b3IsXG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImFzc2V0XCIpLFxuICAgIHR5cGU6IFQubGl0ZXJhbCh0eXBlKSxcbiAgICBwcm9wcyxcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KTtcbn1cbmV4cG9ydCB7XG4gIGFzc2V0SWRWYWxpZGF0b3IsXG4gIGNyZWF0ZUFzc2V0VmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExCYXNlQXNzZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bookmarkAssetMigrations: () => (/* binding */ bookmarkAssetMigrations),\n/* harmony export */   bookmarkAssetValidator: () => (/* binding */ bookmarkAssetValidator),\n/* harmony export */   bookmarkAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst bookmarkAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"bookmark\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    title: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    description: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    image: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    favicon: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.bookmark\", {\n  MakeUrlsValid: 1,\n  AddFavicon: 2\n});\nconst bookmarkAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.bookmark\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"bookmark\",\n  sequence: [\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    },\n    {\n      id: Versions.AddFavicon,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.favicon)) {\n          asset.props.favicon = \"\";\n        }\n      },\n      down: (asset) => {\n        delete asset.props.favicon;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLBookmarkAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExCb29rbWFya0Fzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsK0JBQStCLHNFQUFvQjtBQUNuRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixXQUFXLHNEQUFRO0FBQ25CLGlCQUFpQixzREFBUTtBQUN6QixXQUFXLHNEQUFRO0FBQ25CLGFBQWEsc0RBQVE7QUFDckIsU0FBUyxzREFBUTtBQUNqQixHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsaUVBQWtCO0FBQ25DO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZ0NBQWdDLDRFQUE2QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVE7QUFDckI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVE7QUFDckI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUtDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTEJvb2ttYXJrQXNzZXQubWpzPzU5YmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4vVExCYXNlQXNzZXQubWpzXCI7XG5jb25zdCBib29rbWFya0Fzc2V0VmFsaWRhdG9yID0gY3JlYXRlQXNzZXRWYWxpZGF0b3IoXG4gIFwiYm9va21hcmtcIixcbiAgVC5vYmplY3Qoe1xuICAgIHRpdGxlOiBULnN0cmluZyxcbiAgICBkZXNjcmlwdGlvbjogVC5zdHJpbmcsXG4gICAgaW1hZ2U6IFQuc3RyaW5nLFxuICAgIGZhdmljb246IFQuc3RyaW5nLFxuICAgIHNyYzogVC5zcmNVcmwubnVsbGFibGUoKVxuICB9KVxuKTtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5hc3NldC5ib29rbWFya1wiLCB7XG4gIE1ha2VVcmxzVmFsaWQ6IDEsXG4gIEFkZEZhdmljb246IDJcbn0pO1xuY29uc3QgYm9va21hcmtBc3NldE1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5hc3NldC5ib29rbWFya1wiLFxuICByZWNvcmRUeXBlOiBcImFzc2V0XCIsXG4gIGZpbHRlcjogKGFzc2V0KSA9PiBhc3NldC50eXBlID09PSBcImJvb2ttYXJrXCIsXG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1ha2VVcmxzVmFsaWQsXG4gICAgICB1cDogKGFzc2V0KSA9PiB7XG4gICAgICAgIGlmICghVC5zcmNVcmwuaXNWYWxpZChhc3NldC5wcm9wcy5zcmMpKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuc3JjID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfYXNzZXQpID0+IHtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRGYXZpY29uLFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBpZiAoIVQuc3JjVXJsLmlzVmFsaWQoYXNzZXQucHJvcHMuZmF2aWNvbikpIHtcbiAgICAgICAgICBhc3NldC5wcm9wcy5mYXZpY29uID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMuZmF2aWNvbjtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgYm9va21hcmtBc3NldE1pZ3JhdGlvbnMsXG4gIGJvb2ttYXJrQXNzZXRWYWxpZGF0b3IsXG4gIFZlcnNpb25zIGFzIGJvb2ttYXJrQXNzZXRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQm9va21hcmtBc3NldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   imageAssetMigrations: () => (/* binding */ imageAssetMigrations),\n/* harmony export */   imageAssetValidator: () => (/* binding */ imageAssetValidator),\n/* harmony export */   imageAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst imageAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"image\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    isAnimated: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.boolean,\n    mimeType: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable(),\n    fileSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.nonZeroNumber.optional()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.image\", {\n  AddIsAnimated: 1,\n  RenameWidthHeight: 2,\n  MakeUrlsValid: 3,\n  AddFileSize: 4,\n  MakeFileSizeOptional: 5\n});\nconst imageAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.image\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"image\",\n  sequence: [\n    {\n      id: Versions.AddIsAnimated,\n      up: (asset) => {\n        asset.props.isAnimated = false;\n      },\n      down: (asset) => {\n        delete asset.props.isAnimated;\n      }\n    },\n    {\n      id: Versions.RenameWidthHeight,\n      up: (asset) => {\n        asset.props.w = asset.props.width;\n        asset.props.h = asset.props.height;\n        delete asset.props.width;\n        delete asset.props.height;\n      },\n      down: (asset) => {\n        asset.props.width = asset.props.w;\n        asset.props.height = asset.props.h;\n        delete asset.props.w;\n        delete asset.props.h;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    },\n    {\n      id: Versions.AddFileSize,\n      up: (asset) => {\n        asset.props.fileSize = -1;\n      },\n      down: (asset) => {\n        delete asset.props.fileSize;\n      }\n    },\n    {\n      id: Versions.MakeFileSizeOptional,\n      up: (asset) => {\n        if (asset.props.fileSize === -1) {\n          asset.props.fileSize = void 0;\n        }\n      },\n      down: (asset) => {\n        if (asset.props.fileSize === void 0) {\n          asset.props.fileSize = -1;\n        }\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLImageAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExJbWFnZUFzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsNEJBQTRCLHNFQUFvQjtBQUNoRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLFVBQVUsc0RBQVE7QUFDbEIsZ0JBQWdCLHVEQUFTO0FBQ3pCLGNBQWMsc0RBQVE7QUFDdEIsU0FBUyxzREFBUTtBQUNqQixjQUFjLDZEQUFlO0FBQzdCLEdBQUc7QUFDSDtBQUNBLGlCQUFpQixpRUFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsNEVBQTZCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFRO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUtDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTEltYWdlQXNzZXQubWpzP2E0OWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4vVExCYXNlQXNzZXQubWpzXCI7XG5jb25zdCBpbWFnZUFzc2V0VmFsaWRhdG9yID0gY3JlYXRlQXNzZXRWYWxpZGF0b3IoXG4gIFwiaW1hZ2VcIixcbiAgVC5vYmplY3Qoe1xuICAgIHc6IFQubnVtYmVyLFxuICAgIGg6IFQubnVtYmVyLFxuICAgIG5hbWU6IFQuc3RyaW5nLFxuICAgIGlzQW5pbWF0ZWQ6IFQuYm9vbGVhbixcbiAgICBtaW1lVHlwZTogVC5zdHJpbmcubnVsbGFibGUoKSxcbiAgICBzcmM6IFQuc3JjVXJsLm51bGxhYmxlKCksXG4gICAgZmlsZVNpemU6IFQubm9uWmVyb051bWJlci5vcHRpb25hbCgpXG4gIH0pXG4pO1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3LmFzc2V0LmltYWdlXCIsIHtcbiAgQWRkSXNBbmltYXRlZDogMSxcbiAgUmVuYW1lV2lkdGhIZWlnaHQ6IDIsXG4gIE1ha2VVcmxzVmFsaWQ6IDMsXG4gIEFkZEZpbGVTaXplOiA0LFxuICBNYWtlRmlsZVNpemVPcHRpb25hbDogNVxufSk7XG5jb25zdCBpbWFnZUFzc2V0TWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmFzc2V0LmltYWdlXCIsXG4gIHJlY29yZFR5cGU6IFwiYXNzZXRcIixcbiAgZmlsdGVyOiAoYXNzZXQpID0+IGFzc2V0LnR5cGUgPT09IFwiaW1hZ2VcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkSXNBbmltYXRlZCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMuaXNBbmltYXRlZCA9IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMuaXNBbmltYXRlZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW5hbWVXaWR0aEhlaWdodCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMudyA9IGFzc2V0LnByb3BzLndpZHRoO1xuICAgICAgICBhc3NldC5wcm9wcy5oID0gYXNzZXQucHJvcHMuaGVpZ2h0O1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMud2lkdGg7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oZWlnaHQ7XG4gICAgICB9LFxuICAgICAgZG93bjogKGFzc2V0KSA9PiB7XG4gICAgICAgIGFzc2V0LnByb3BzLndpZHRoID0gYXNzZXQucHJvcHMudztcbiAgICAgICAgYXNzZXQucHJvcHMuaGVpZ2h0ID0gYXNzZXQucHJvcHMuaDtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLnc7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1ha2VVcmxzVmFsaWQsXG4gICAgICB1cDogKGFzc2V0KSA9PiB7XG4gICAgICAgIGlmICghVC5zcmNVcmwuaXNWYWxpZChhc3NldC5wcm9wcy5zcmMpKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuc3JjID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfYXNzZXQpID0+IHtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRGaWxlU2l6ZSxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMuZmlsZVNpemUgPSAtMTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoYXNzZXQpID0+IHtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLmZpbGVTaXplO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1ha2VGaWxlU2l6ZU9wdGlvbmFsLFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBpZiAoYXNzZXQucHJvcHMuZmlsZVNpemUgPT09IC0xKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuZmlsZVNpemUgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiAoYXNzZXQpID0+IHtcbiAgICAgICAgaWYgKGFzc2V0LnByb3BzLmZpbGVTaXplID09PSB2b2lkIDApIHtcbiAgICAgICAgICBhc3NldC5wcm9wcy5maWxlU2l6ZSA9IC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIGltYWdlQXNzZXRNaWdyYXRpb25zLFxuICBpbWFnZUFzc2V0VmFsaWRhdG9yLFxuICBWZXJzaW9ucyBhcyBpbWFnZUFzc2V0VmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEltYWdlQXNzZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   videoAssetMigrations: () => (/* binding */ videoAssetMigrations),\n/* harmony export */   videoAssetValidator: () => (/* binding */ videoAssetValidator),\n/* harmony export */   videoAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst videoAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"video\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    isAnimated: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.boolean,\n    mimeType: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable(),\n    fileSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number.optional()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.video\", {\n  AddIsAnimated: 1,\n  RenameWidthHeight: 2,\n  MakeUrlsValid: 3,\n  AddFileSize: 4,\n  MakeFileSizeOptional: 5\n});\nconst videoAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.video\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"video\",\n  sequence: [\n    {\n      id: Versions.AddIsAnimated,\n      up: (asset) => {\n        asset.props.isAnimated = false;\n      },\n      down: (asset) => {\n        delete asset.props.isAnimated;\n      }\n    },\n    {\n      id: Versions.RenameWidthHeight,\n      up: (asset) => {\n        asset.props.w = asset.props.width;\n        asset.props.h = asset.props.height;\n        delete asset.props.width;\n        delete asset.props.height;\n      },\n      down: (asset) => {\n        asset.props.width = asset.props.w;\n        asset.props.height = asset.props.h;\n        delete asset.props.w;\n        delete asset.props.h;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    },\n    {\n      id: Versions.AddFileSize,\n      up: (asset) => {\n        asset.props.fileSize = -1;\n      },\n      down: (asset) => {\n        delete asset.props.fileSize;\n      }\n    },\n    {\n      id: Versions.MakeFileSizeOptional,\n      up: (asset) => {\n        if (asset.props.fileSize === -1) {\n          asset.props.fileSize = void 0;\n        }\n      },\n      down: (asset) => {\n        if (asset.props.fileSize === void 0) {\n          asset.props.fileSize = -1;\n        }\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLVideoAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExWaWRlb0Fzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsNEJBQTRCLHNFQUFvQjtBQUNoRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLFVBQVUsc0RBQVE7QUFDbEIsZ0JBQWdCLHVEQUFTO0FBQ3pCLGNBQWMsc0RBQVE7QUFDdEIsU0FBUyxzREFBUTtBQUNqQixjQUFjLHNEQUFRO0FBQ3RCLEdBQUc7QUFDSDtBQUNBLGlCQUFpQixpRUFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsNEVBQTZCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFRO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUtDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTFZpZGVvQXNzZXQubWpzP2RjMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4vVExCYXNlQXNzZXQubWpzXCI7XG5jb25zdCB2aWRlb0Fzc2V0VmFsaWRhdG9yID0gY3JlYXRlQXNzZXRWYWxpZGF0b3IoXG4gIFwidmlkZW9cIixcbiAgVC5vYmplY3Qoe1xuICAgIHc6IFQubnVtYmVyLFxuICAgIGg6IFQubnVtYmVyLFxuICAgIG5hbWU6IFQuc3RyaW5nLFxuICAgIGlzQW5pbWF0ZWQ6IFQuYm9vbGVhbixcbiAgICBtaW1lVHlwZTogVC5zdHJpbmcubnVsbGFibGUoKSxcbiAgICBzcmM6IFQuc3JjVXJsLm51bGxhYmxlKCksXG4gICAgZmlsZVNpemU6IFQubnVtYmVyLm9wdGlvbmFsKClcbiAgfSlcbik7XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYXNzZXQudmlkZW9cIiwge1xuICBBZGRJc0FuaW1hdGVkOiAxLFxuICBSZW5hbWVXaWR0aEhlaWdodDogMixcbiAgTWFrZVVybHNWYWxpZDogMyxcbiAgQWRkRmlsZVNpemU6IDQsXG4gIE1ha2VGaWxlU2l6ZU9wdGlvbmFsOiA1XG59KTtcbmNvbnN0IHZpZGVvQXNzZXRNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuYXNzZXQudmlkZW9cIixcbiAgcmVjb3JkVHlwZTogXCJhc3NldFwiLFxuICBmaWx0ZXI6IChhc3NldCkgPT4gYXNzZXQudHlwZSA9PT0gXCJ2aWRlb1wiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRJc0FuaW1hdGVkLFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBhc3NldC5wcm9wcy5pc0FuaW1hdGVkID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgZG93bjogKGFzc2V0KSA9PiB7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5pc0FuaW1hdGVkO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbmFtZVdpZHRoSGVpZ2h0LFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBhc3NldC5wcm9wcy53ID0gYXNzZXQucHJvcHMud2lkdGg7XG4gICAgICAgIGFzc2V0LnByb3BzLmggPSBhc3NldC5wcm9wcy5oZWlnaHQ7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy53aWR0aDtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLmhlaWdodDtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMud2lkdGggPSBhc3NldC5wcm9wcy53O1xuICAgICAgICBhc3NldC5wcm9wcy5oZWlnaHQgPSBhc3NldC5wcm9wcy5oO1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMudztcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLmg7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgaWYgKCFULnNyY1VybC5pc1ZhbGlkKGFzc2V0LnByb3BzLnNyYykpIHtcbiAgICAgICAgICBhc3NldC5wcm9wcy5zcmMgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogKF9hc3NldCkgPT4ge1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZEZpbGVTaXplLFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBhc3NldC5wcm9wcy5maWxlU2l6ZSA9IC0xO1xuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMuZmlsZVNpemU7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZUZpbGVTaXplT3B0aW9uYWwsXG4gICAgICB1cDogKGFzc2V0KSA9PiB7XG4gICAgICAgIGlmIChhc3NldC5wcm9wcy5maWxlU2l6ZSA9PT0gLTEpIHtcbiAgICAgICAgICBhc3NldC5wcm9wcy5maWxlU2l6ZSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBpZiAoYXNzZXQucHJvcHMuZmlsZVNpemUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGFzc2V0LnByb3BzLmZpbGVTaXplID0gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgdmlkZW9Bc3NldE1pZ3JhdGlvbnMsXG4gIHZpZGVvQXNzZXRWYWxpZGF0b3IsXG4gIFZlcnNpb25zIGFzIHZpZGVvQXNzZXRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVmlkZW9Bc3NldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrowBindingMigrations: () => (/* binding */ arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* binding */ arrowBindingProps),\n/* harmony export */   arrowBindingVersions: () => (/* binding */ arrowBindingVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n\n\n\n\nconst arrowBindingProps = {\n  terminal: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(\"start\", \"end\"),\n  normalizedAnchor: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__.vecModelValidator,\n  isExact: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPrecise: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst arrowBindingVersions = {};\nconst arrowBindingMigrations = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.createBindingPropsMigrationSequence)({\n  sequence: [{ dependsOn: [_shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_3__.arrowShapeVersions.ExtractBindings] }]\n});\n\n//# sourceMappingURL=TLArrowBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9iaW5kaW5ncy9UTEFycm93QmluZGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUMwQjtBQUNnQjtBQUNmO0FBQ2hFO0FBQ0EsWUFBWSwyREFBYTtBQUN6QixvQkFBb0IsdUVBQWlCO0FBQ3JDLFdBQVcsdURBQVM7QUFDcEIsYUFBYSx1REFBUztBQUN0QjtBQUNBO0FBQ0EsK0JBQStCLDJGQUFtQztBQUNsRSxlQUFlLFlBQVksd0VBQWtCLG1CQUFtQjtBQUNoRSxDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vYmluZGluZ3MvVExBcnJvd0JpbmRpbmcubWpzPzc0NjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyB2ZWNNb2RlbFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTEJpbmRpbmcubWpzXCI7XG5pbXBvcnQgeyBhcnJvd1NoYXBlVmVyc2lvbnMgfSBmcm9tIFwiLi4vc2hhcGVzL1RMQXJyb3dTaGFwZS5tanNcIjtcbmNvbnN0IGFycm93QmluZGluZ1Byb3BzID0ge1xuICB0ZXJtaW5hbDogVC5saXRlcmFsRW51bShcInN0YXJ0XCIsIFwiZW5kXCIpLFxuICBub3JtYWxpemVkQW5jaG9yOiB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgaXNFeGFjdDogVC5ib29sZWFuLFxuICBpc1ByZWNpc2U6IFQuYm9vbGVhblxufTtcbmNvbnN0IGFycm93QmluZGluZ1ZlcnNpb25zID0ge307XG5jb25zdCBhcnJvd0JpbmRpbmdNaWdyYXRpb25zID0gY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW3sgZGVwZW5kc09uOiBbYXJyb3dTaGFwZVZlcnNpb25zLkV4dHJhY3RCaW5kaW5nc10gfV1cbn0pO1xuZXhwb3J0IHtcbiAgYXJyb3dCaW5kaW5nTWlncmF0aW9ucyxcbiAgYXJyb3dCaW5kaW5nUHJvcHMsXG4gIGFycm93QmluZGluZ1ZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExBcnJvd0JpbmRpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindingIdValidator: () => (/* binding */ bindingIdValidator),\n/* harmony export */   createBindingValidator: () => (/* binding */ createBindingValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n\n\n\nconst bindingIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__.idValidator)(\"binding\");\nfunction createBindingValidator(type, props, meta) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: bindingIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"binding\"),\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    fromId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__.shapeIdValidator,\n    toId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__.shapeIdValidator,\n    props: props ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(props) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue,\n    meta: meta ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(meta) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9iaW5kaW5ncy9UTEJhc2VCaW5kaW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxQztBQUNrQjtBQUNNO0FBQzdELDJCQUEyQixtRUFBVztBQUN0QztBQUNBLFNBQVMsc0RBQVE7QUFDakI7QUFDQSxjQUFjLHVEQUFTO0FBQ3ZCLFVBQVUsdURBQVM7QUFDbkIsWUFBWSxxRUFBZ0I7QUFDNUIsVUFBVSxxRUFBZ0I7QUFDMUIsbUJBQW1CLHNEQUFRLFVBQVUseURBQVc7QUFDaEQsaUJBQWlCLHNEQUFRLFNBQVMseURBQVc7QUFDN0MsR0FBRztBQUNIO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vYmluZGluZ3MvVExCYXNlQmluZGluZy5tanM/YTg3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuaW1wb3J0IHsgc2hhcGVJZFZhbGlkYXRvciB9IGZyb20gXCIuLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5jb25zdCBiaW5kaW5nSWRWYWxpZGF0b3IgPSBpZFZhbGlkYXRvcihcImJpbmRpbmdcIik7XG5mdW5jdGlvbiBjcmVhdGVCaW5kaW5nVmFsaWRhdG9yKHR5cGUsIHByb3BzLCBtZXRhKSB7XG4gIHJldHVybiBULm9iamVjdCh7XG4gICAgaWQ6IGJpbmRpbmdJZFZhbGlkYXRvcixcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwiYmluZGluZ1wiKSxcbiAgICB0eXBlOiBULmxpdGVyYWwodHlwZSksXG4gICAgZnJvbUlkOiBzaGFwZUlkVmFsaWRhdG9yLFxuICAgIHRvSWQ6IHNoYXBlSWRWYWxpZGF0b3IsXG4gICAgcHJvcHM6IHByb3BzID8gVC5vYmplY3QocHJvcHMpIDogVC5qc29uVmFsdWUsXG4gICAgbWV0YTogbWV0YSA/IFQub2JqZWN0KG1ldGEpIDogVC5qc29uVmFsdWVcbiAgfSk7XG59XG5leHBvcnQge1xuICBiaW5kaW5nSWRWYWxpZGF0b3IsXG4gIGNyZWF0ZUJpbmRpbmdWYWxpZGF0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEJhc2VCaW5kaW5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPresenceStateDerivation: () => (/* binding */ createPresenceStateDerivation)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n\n\n\n\n\n\nfunction createPresenceStateDerivation($user, instanceId) {\n  return (store) => {\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"instancePresence\", () => {\n      const instance = store.get(_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n      const pageState = store.get(_records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_3__.InstancePageStateRecordType.createId(instance?.currentPageId));\n      const camera = store.get(_records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(instance?.currentPageId));\n      const pointer = store.get(_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_4__.TLPOINTER_ID);\n      const user = $user.get();\n      if (!pageState || !instance || !camera || !pointer || !user) {\n        return null;\n      }\n      return _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePresenceRecordType.create({\n        id: instanceId ?? _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePresenceRecordType.createId(store.id),\n        selectedShapeIds: pageState.selectedShapeIds,\n        brush: instance.brush,\n        scribbles: instance.scribbles,\n        userId: user.id,\n        userName: user.name,\n        followingUserId: instance.followingUserId,\n        camera: {\n          x: camera.x,\n          y: camera.y,\n          z: camera.z\n        },\n        color: user.color,\n        currentPageId: instance.currentPageId,\n        cursor: {\n          x: pointer.x,\n          y: pointer.y,\n          rotation: instance.cursor.rotation,\n          type: instance.cursor.type\n        },\n        lastActivityTimestamp: pointer.lastActivityTimestamp,\n        screenBounds: instance.screenBounds,\n        chatMessage: instance.chatMessage,\n        meta: {}\n      });\n    });\n  };\n}\n\n//# sourceMappingURL=createPresenceStateDerivation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QztBQUNpQjtBQUNEO0FBQ2U7QUFDakI7QUFDZTtBQUN0RTtBQUNBO0FBQ0EsV0FBVyx1REFBUTtBQUNuQixpQ0FBaUMsa0VBQWE7QUFDOUMsa0NBQWtDLGlGQUEyQjtBQUM3RCwrQkFBK0IsbUVBQWdCO0FBQy9DLGdDQUFnQyxnRUFBWTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0VBQTBCO0FBQ3ZDLDBCQUEwQiwrRUFBMEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanM/N2ExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBDYW1lcmFSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTENhbWVyYS5tanNcIjtcbmltcG9ydCB7IFRMSU5TVEFOQ0VfSUQgfSBmcm9tIFwiLi9yZWNvcmRzL1RMSW5zdGFuY2UubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgVExQT0lOVEVSX0lEIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBvaW50ZXIubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSB9IGZyb20gXCIuL3JlY29yZHMvVExQcmVzZW5jZS5tanNcIjtcbmZ1bmN0aW9uIGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uKCR1c2VyLCBpbnN0YW5jZUlkKSB7XG4gIHJldHVybiAoc3RvcmUpID0+IHtcbiAgICByZXR1cm4gY29tcHV0ZWQoXCJpbnN0YW5jZVByZXNlbmNlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpO1xuICAgICAgY29uc3QgcGFnZVN0YXRlID0gc3RvcmUuZ2V0KEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChpbnN0YW5jZT8uY3VycmVudFBhZ2VJZCkpO1xuICAgICAgY29uc3QgY2FtZXJhID0gc3RvcmUuZ2V0KENhbWVyYVJlY29yZFR5cGUuY3JlYXRlSWQoaW5zdGFuY2U/LmN1cnJlbnRQYWdlSWQpKTtcbiAgICAgIGNvbnN0IHBvaW50ZXIgPSBzdG9yZS5nZXQoVExQT0lOVEVSX0lEKTtcbiAgICAgIGNvbnN0IHVzZXIgPSAkdXNlci5nZXQoKTtcbiAgICAgIGlmICghcGFnZVN0YXRlIHx8ICFpbnN0YW5jZSB8fCAhY2FtZXJhIHx8ICFwb2ludGVyIHx8ICF1c2VyKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEluc3RhbmNlUHJlc2VuY2VSZWNvcmRUeXBlLmNyZWF0ZSh7XG4gICAgICAgIGlkOiBpbnN0YW5jZUlkID8/IEluc3RhbmNlUHJlc2VuY2VSZWNvcmRUeXBlLmNyZWF0ZUlkKHN0b3JlLmlkKSxcbiAgICAgICAgc2VsZWN0ZWRTaGFwZUlkczogcGFnZVN0YXRlLnNlbGVjdGVkU2hhcGVJZHMsXG4gICAgICAgIGJydXNoOiBpbnN0YW5jZS5icnVzaCxcbiAgICAgICAgc2NyaWJibGVzOiBpbnN0YW5jZS5zY3JpYmJsZXMsXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgdXNlck5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgZm9sbG93aW5nVXNlcklkOiBpbnN0YW5jZS5mb2xsb3dpbmdVc2VySWQsXG4gICAgICAgIGNhbWVyYToge1xuICAgICAgICAgIHg6IGNhbWVyYS54LFxuICAgICAgICAgIHk6IGNhbWVyYS55LFxuICAgICAgICAgIHo6IGNhbWVyYS56XG4gICAgICAgIH0sXG4gICAgICAgIGNvbG9yOiB1c2VyLmNvbG9yLFxuICAgICAgICBjdXJyZW50UGFnZUlkOiBpbnN0YW5jZS5jdXJyZW50UGFnZUlkLFxuICAgICAgICBjdXJzb3I6IHtcbiAgICAgICAgICB4OiBwb2ludGVyLngsXG4gICAgICAgICAgeTogcG9pbnRlci55LFxuICAgICAgICAgIHJvdGF0aW9uOiBpbnN0YW5jZS5jdXJzb3Iucm90YXRpb24sXG4gICAgICAgICAgdHlwZTogaW5zdGFuY2UuY3Vyc29yLnR5cGVcbiAgICAgICAgfSxcbiAgICAgICAgbGFzdEFjdGl2aXR5VGltZXN0YW1wOiBwb2ludGVyLmxhc3RBY3Rpdml0eVRpbWVzdGFtcCxcbiAgICAgICAgc2NyZWVuQm91bmRzOiBpbnN0YW5jZS5zY3JlZW5Cb3VuZHMsXG4gICAgICAgIGNoYXRNZXNzYWdlOiBpbnN0YW5jZS5jaGF0TWVzc2FnZSxcbiAgICAgICAgbWV0YToge31cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlUHJlc2VuY2VTdGF0ZURlcml2YXRpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLSchema: () => (/* binding */ createTLSchema),\n/* harmony export */   defaultBindingSchemas: () => (/* binding */ defaultBindingSchemas),\n/* harmony export */   defaultShapeSchemas: () => (/* binding */ defaultShapeSchemas)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLStore.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs\");\n/* harmony import */ var _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assets/TLBookmarkAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\");\n/* harmony import */ var _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assets/TLImageAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\");\n/* harmony import */ var _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./assets/TLVideoAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\");\n/* harmony import */ var _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bindings/TLArrowBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\");\n/* harmony import */ var _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./records/TLAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./recordsWithProps.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n/* harmony import */ var _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./shapes/TLBookmarkShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\");\n/* harmony import */ var _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./shapes/TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n/* harmony import */ var _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./shapes/TLEmbedShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\");\n/* harmony import */ var _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./shapes/TLFrameShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\");\n/* harmony import */ var _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./shapes/TLGeoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\");\n/* harmony import */ var _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shapes/TLGroupShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\");\n/* harmony import */ var _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./shapes/TLHighlightShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\");\n/* harmony import */ var _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./shapes/TLImageShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\");\n/* harmony import */ var _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./shapes/TLLineShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\");\n/* harmony import */ var _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./shapes/TLNoteShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\");\n/* harmony import */ var _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./shapes/TLTextShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\");\n/* harmony import */ var _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./shapes/TLVideoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\");\n/* harmony import */ var _store_migrations_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./store-migrations.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultShapeSchemas = {\n  arrow: { migrations: _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__.arrowShapeMigrations, props: _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__.arrowShapeProps },\n  bookmark: { migrations: _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__.bookmarkShapeMigrations, props: _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__.bookmarkShapeProps },\n  draw: { migrations: _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__.drawShapeMigrations, props: _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__.drawShapeProps },\n  embed: { migrations: _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__.embedShapeMigrations, props: _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__.embedShapeProps },\n  frame: { migrations: _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__.frameShapeMigrations, props: _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__.frameShapeProps },\n  geo: { migrations: _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__.geoShapeMigrations, props: _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__.geoShapeProps },\n  group: { migrations: _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__.groupShapeMigrations, props: _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__.groupShapeProps },\n  highlight: { migrations: _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__.highlightShapeMigrations, props: _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__.highlightShapeProps },\n  image: { migrations: _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__.imageShapeMigrations, props: _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__.imageShapeProps },\n  line: { migrations: _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__.lineShapeMigrations, props: _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__.lineShapeProps },\n  note: { migrations: _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__.noteShapeMigrations, props: _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__.noteShapeProps },\n  text: { migrations: _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__.textShapeMigrations, props: _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__.textShapeProps },\n  video: { migrations: _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__.videoShapeMigrations, props: _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__.videoShapeProps }\n};\nconst defaultBindingSchemas = {\n  arrow: { migrations: _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__.arrowBindingMigrations, props: _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__.arrowBindingProps }\n};\nfunction createTLSchema({\n  shapes = defaultShapeSchemas,\n  bindings = defaultBindingSchemas,\n  migrations\n} = {}) {\n  const stylesById = /* @__PURE__ */ new Map();\n  for (const shape of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(shapes)) {\n    for (const style of (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.getShapePropKeysByStyle)(shape.props ?? {}).keys()) {\n      if (stylesById.has(style.id) && stylesById.get(style.id) !== style) {\n        throw new Error(`Multiple StyleProp instances with the same id: ${style.id}`);\n      }\n      stylesById.set(style.id, style);\n    }\n  }\n  const ShapeRecordType = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.createShapeRecordType)(shapes);\n  const BindingRecordType = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_8__.createBindingRecordType)(bindings);\n  const InstanceRecordType = (0,_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__.createInstanceRecordType)(stylesById);\n  return _tldraw_store__WEBPACK_IMPORTED_MODULE_0__.StoreSchema.create(\n    {\n      asset: _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__.AssetRecordType,\n      binding: BindingRecordType,\n      camera: _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__.CameraRecordType,\n      document: _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__.DocumentRecordType,\n      instance: InstanceRecordType,\n      instance_page_state: _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__.InstancePageStateRecordType,\n      page: _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__.PageRecordType,\n      instance_presence: _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__.InstancePresenceRecordType,\n      pointer: _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__.PointerRecordType,\n      shape: ShapeRecordType\n    },\n    {\n      migrations: [\n        _store_migrations_mjs__WEBPACK_IMPORTED_MODULE_31__.storeMigrations,\n        _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__.assetMigrations,\n        _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__.cameraMigrations,\n        _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__.documentMigrations,\n        _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__.instanceMigrations,\n        _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__.instancePageStateMigrations,\n        _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__.pageMigrations,\n        _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__.instancePresenceMigrations,\n        _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__.pointerMigrations,\n        _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.rootShapeMigrations,\n        _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_3__.bookmarkAssetMigrations,\n        _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_4__.imageAssetMigrations,\n        _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_5__.videoAssetMigrations,\n        ...(0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__.processPropsMigrations)(\"shape\", shapes),\n        ...(0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__.processPropsMigrations)(\"binding\", bindings),\n        ...(migrations ?? [])\n      ],\n      onValidationFailure: _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.onValidationFailure,\n      createIntegrityChecker: _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createIntegrityChecker\n    }\n  );\n}\n\n//# sourceMappingURL=createTLSchema.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVUTFNjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSTtBQUM0QjtBQUNMO0FBQ047QUFDQTtBQUN5QjtBQUNqQjtBQUNQO0FBQ1U7QUFDTTtBQUNNO0FBQ2xCO0FBQytCO0FBQ3RCO0FBQ21CO0FBS25FO0FBQ2lDO0FBQ2tCO0FBQ1M7QUFDWjtBQUNHO0FBQ0E7QUFDTjtBQUNNO0FBQ1k7QUFDWjtBQUNIO0FBQ0E7QUFDQTtBQUNHO0FBQ3pCO0FBQ3pEO0FBQ0EsV0FBVyxZQUFZLDJFQUFvQixTQUFTLHNFQUFlLEVBQUU7QUFDckUsY0FBYyxZQUFZLGlGQUF1QixTQUFTLDRFQUFrQixFQUFFO0FBQzlFLFVBQVUsWUFBWSx5RUFBbUIsU0FBUyxvRUFBYyxFQUFFO0FBQ2xFLFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLFNBQVMsWUFBWSx1RUFBa0IsU0FBUyxrRUFBYSxFQUFFO0FBQy9ELFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLGVBQWUsWUFBWSxtRkFBd0IsU0FBUyw4RUFBbUIsRUFBRTtBQUNqRixXQUFXLFlBQVksMkVBQW9CLFNBQVMsc0VBQWUsRUFBRTtBQUNyRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxXQUFXLFlBQVksMkVBQW9CLFNBQVMsc0VBQWU7QUFDbkU7QUFDQTtBQUNBLFdBQVcsWUFBWSxnRkFBc0IsU0FBUywyRUFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0Esc0JBQXNCLDhEQUFlO0FBQ3JDLHdCQUF3Qiw4RUFBdUIsa0JBQWtCO0FBQ2pFO0FBQ0EsMEVBQTBFLFNBQVM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNEVBQXFCO0FBQy9DLDRCQUE0QiwrRUFBdUI7QUFDbkQsNkJBQTZCLGtGQUF3QjtBQUNyRCxTQUFTLHNEQUFXO0FBQ3BCO0FBQ0EsYUFBYSxpRUFBZTtBQUM1QjtBQUNBLGNBQWMsbUVBQWdCO0FBQzlCLGdCQUFnQix3RUFBa0I7QUFDbEM7QUFDQSwyQkFBMkIsa0ZBQTJCO0FBQ3RELFlBQVksZ0VBQWM7QUFDMUIseUJBQXlCLGdGQUEwQjtBQUNuRCxlQUFlLHNFQUFpQjtBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSxtRUFBZTtBQUN2QixRQUFRLGlFQUFlO0FBQ3ZCLFFBQVEsbUVBQWdCO0FBQ3hCLFFBQVEsd0VBQWtCO0FBQzFCLFFBQVEsd0VBQWtCO0FBQzFCLFFBQVEsa0ZBQTJCO0FBQ25DLFFBQVEsZ0VBQWM7QUFDdEIsUUFBUSxnRkFBMEI7QUFDbEMsUUFBUSxzRUFBaUI7QUFDekIsUUFBUSxzRUFBbUI7QUFDM0IsUUFBUSxnRkFBdUI7QUFDL0IsUUFBUSwwRUFBb0I7QUFDNUIsUUFBUSwwRUFBb0I7QUFDNUIsV0FBVyw4RUFBc0I7QUFDakMsV0FBVyw4RUFBc0I7QUFDakM7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vY3JlYXRlVExTY2hlbWEubWpzPzI5ZjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RvcmVTY2hlbWEgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgb2JqZWN0TWFwVmFsdWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVncml0eUNoZWNrZXIsIG9uVmFsaWRhdGlvbkZhaWx1cmUgfSBmcm9tIFwiLi9UTFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgYm9va21hcmtBc3NldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9hc3NldHMvVExCb29rbWFya0Fzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgaW1hZ2VBc3NldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9hc3NldHMvVExJbWFnZUFzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgdmlkZW9Bc3NldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9hc3NldHMvVExWaWRlb0Fzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgYXJyb3dCaW5kaW5nTWlncmF0aW9ucywgYXJyb3dCaW5kaW5nUHJvcHMgfSBmcm9tIFwiLi9iaW5kaW5ncy9UTEFycm93QmluZGluZy5tanNcIjtcbmltcG9ydCB7IEFzc2V0UmVjb3JkVHlwZSwgYXNzZXRNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTEFzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQmluZGluZ1JlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMQmluZGluZy5tanNcIjtcbmltcG9ydCB7IENhbWVyYVJlY29yZFR5cGUsIGNhbWVyYU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMQ2FtZXJhLm1qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWNvcmRUeXBlLCBkb2N1bWVudE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMRG9jdW1lbnQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVJbnN0YW5jZVJlY29yZFR5cGUsIGluc3RhbmNlTWlncmF0aW9ucyB9IGZyb20gXCIuL3JlY29yZHMvVExJbnN0YW5jZS5tanNcIjtcbmltcG9ydCB7IFBhZ2VSZWNvcmRUeXBlLCBwYWdlTWlncmF0aW9ucyB9IGZyb20gXCIuL3JlY29yZHMvVExQYWdlLm1qc1wiO1xuaW1wb3J0IHsgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLCBpbnN0YW5jZVBhZ2VTdGF0ZU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgUG9pbnRlclJlY29yZFR5cGUsIHBvaW50ZXJNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBvaW50ZXIubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSwgaW5zdGFuY2VQcmVzZW5jZU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUHJlc2VuY2UubWpzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVTaGFwZVJlY29yZFR5cGUsXG4gIGdldFNoYXBlUHJvcEtleXNCeVN0eWxlLFxuICByb290U2hhcGVNaWdyYXRpb25zXG59IGZyb20gXCIuL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IHByb2Nlc3NQcm9wc01pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzV2l0aFByb3BzLm1qc1wiO1xuaW1wb3J0IHsgYXJyb3dTaGFwZU1pZ3JhdGlvbnMsIGFycm93U2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEFycm93U2hhcGUubWpzXCI7XG5pbXBvcnQgeyBib29rbWFya1NoYXBlTWlncmF0aW9ucywgYm9va21hcmtTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMQm9va21hcmtTaGFwZS5tanNcIjtcbmltcG9ydCB7IGRyYXdTaGFwZU1pZ3JhdGlvbnMsIGRyYXdTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMRHJhd1NoYXBlLm1qc1wiO1xuaW1wb3J0IHsgZW1iZWRTaGFwZU1pZ3JhdGlvbnMsIGVtYmVkU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEVtYmVkU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBmcmFtZVNoYXBlTWlncmF0aW9ucywgZnJhbWVTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMRnJhbWVTaGFwZS5tanNcIjtcbmltcG9ydCB7IGdlb1NoYXBlTWlncmF0aW9ucywgZ2VvU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEdlb1NoYXBlLm1qc1wiO1xuaW1wb3J0IHsgZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsIGdyb3VwU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEdyb3VwU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBoaWdobGlnaHRTaGFwZU1pZ3JhdGlvbnMsIGhpZ2hsaWdodFNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExIaWdobGlnaHRTaGFwZS5tanNcIjtcbmltcG9ydCB7IGltYWdlU2hhcGVNaWdyYXRpb25zLCBpbWFnZVNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExJbWFnZVNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgbGluZVNoYXBlTWlncmF0aW9ucywgbGluZVNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExMaW5lU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBub3RlU2hhcGVNaWdyYXRpb25zLCBub3RlU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTE5vdGVTaGFwZS5tanNcIjtcbmltcG9ydCB7IHRleHRTaGFwZU1pZ3JhdGlvbnMsIHRleHRTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMVGV4dFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgdmlkZW9TaGFwZU1pZ3JhdGlvbnMsIHZpZGVvU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTFZpZGVvU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBzdG9yZU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9zdG9yZS1taWdyYXRpb25zLm1qc1wiO1xuY29uc3QgZGVmYXVsdFNoYXBlU2NoZW1hcyA9IHtcbiAgYXJyb3c6IHsgbWlncmF0aW9uczogYXJyb3dTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBhcnJvd1NoYXBlUHJvcHMgfSxcbiAgYm9va21hcms6IHsgbWlncmF0aW9uczogYm9va21hcmtTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBib29rbWFya1NoYXBlUHJvcHMgfSxcbiAgZHJhdzogeyBtaWdyYXRpb25zOiBkcmF3U2hhcGVNaWdyYXRpb25zLCBwcm9wczogZHJhd1NoYXBlUHJvcHMgfSxcbiAgZW1iZWQ6IHsgbWlncmF0aW9uczogZW1iZWRTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBlbWJlZFNoYXBlUHJvcHMgfSxcbiAgZnJhbWU6IHsgbWlncmF0aW9uczogZnJhbWVTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBmcmFtZVNoYXBlUHJvcHMgfSxcbiAgZ2VvOiB7IG1pZ3JhdGlvbnM6IGdlb1NoYXBlTWlncmF0aW9ucywgcHJvcHM6IGdlb1NoYXBlUHJvcHMgfSxcbiAgZ3JvdXA6IHsgbWlncmF0aW9uczogZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBncm91cFNoYXBlUHJvcHMgfSxcbiAgaGlnaGxpZ2h0OiB7IG1pZ3JhdGlvbnM6IGhpZ2hsaWdodFNoYXBlTWlncmF0aW9ucywgcHJvcHM6IGhpZ2hsaWdodFNoYXBlUHJvcHMgfSxcbiAgaW1hZ2U6IHsgbWlncmF0aW9uczogaW1hZ2VTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBpbWFnZVNoYXBlUHJvcHMgfSxcbiAgbGluZTogeyBtaWdyYXRpb25zOiBsaW5lU2hhcGVNaWdyYXRpb25zLCBwcm9wczogbGluZVNoYXBlUHJvcHMgfSxcbiAgbm90ZTogeyBtaWdyYXRpb25zOiBub3RlU2hhcGVNaWdyYXRpb25zLCBwcm9wczogbm90ZVNoYXBlUHJvcHMgfSxcbiAgdGV4dDogeyBtaWdyYXRpb25zOiB0ZXh0U2hhcGVNaWdyYXRpb25zLCBwcm9wczogdGV4dFNoYXBlUHJvcHMgfSxcbiAgdmlkZW86IHsgbWlncmF0aW9uczogdmlkZW9TaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiB2aWRlb1NoYXBlUHJvcHMgfVxufTtcbmNvbnN0IGRlZmF1bHRCaW5kaW5nU2NoZW1hcyA9IHtcbiAgYXJyb3c6IHsgbWlncmF0aW9uczogYXJyb3dCaW5kaW5nTWlncmF0aW9ucywgcHJvcHM6IGFycm93QmluZGluZ1Byb3BzIH1cbn07XG5mdW5jdGlvbiBjcmVhdGVUTFNjaGVtYSh7XG4gIHNoYXBlcyA9IGRlZmF1bHRTaGFwZVNjaGVtYXMsXG4gIGJpbmRpbmdzID0gZGVmYXVsdEJpbmRpbmdTY2hlbWFzLFxuICBtaWdyYXRpb25zXG59ID0ge30pIHtcbiAgY29uc3Qgc3R5bGVzQnlJZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3Qgc2hhcGUgb2Ygb2JqZWN0TWFwVmFsdWVzKHNoYXBlcykpIHtcbiAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIGdldFNoYXBlUHJvcEtleXNCeVN0eWxlKHNoYXBlLnByb3BzID8/IHt9KS5rZXlzKCkpIHtcbiAgICAgIGlmIChzdHlsZXNCeUlkLmhhcyhzdHlsZS5pZCkgJiYgc3R5bGVzQnlJZC5nZXQoc3R5bGUuaWQpICE9PSBzdHlsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE11bHRpcGxlIFN0eWxlUHJvcCBpbnN0YW5jZXMgd2l0aCB0aGUgc2FtZSBpZDogJHtzdHlsZS5pZH1gKTtcbiAgICAgIH1cbiAgICAgIHN0eWxlc0J5SWQuc2V0KHN0eWxlLmlkLCBzdHlsZSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IFNoYXBlUmVjb3JkVHlwZSA9IGNyZWF0ZVNoYXBlUmVjb3JkVHlwZShzaGFwZXMpO1xuICBjb25zdCBCaW5kaW5nUmVjb3JkVHlwZSA9IGNyZWF0ZUJpbmRpbmdSZWNvcmRUeXBlKGJpbmRpbmdzKTtcbiAgY29uc3QgSW5zdGFuY2VSZWNvcmRUeXBlID0gY3JlYXRlSW5zdGFuY2VSZWNvcmRUeXBlKHN0eWxlc0J5SWQpO1xuICByZXR1cm4gU3RvcmVTY2hlbWEuY3JlYXRlKFxuICAgIHtcbiAgICAgIGFzc2V0OiBBc3NldFJlY29yZFR5cGUsXG4gICAgICBiaW5kaW5nOiBCaW5kaW5nUmVjb3JkVHlwZSxcbiAgICAgIGNhbWVyYTogQ2FtZXJhUmVjb3JkVHlwZSxcbiAgICAgIGRvY3VtZW50OiBEb2N1bWVudFJlY29yZFR5cGUsXG4gICAgICBpbnN0YW5jZTogSW5zdGFuY2VSZWNvcmRUeXBlLFxuICAgICAgaW5zdGFuY2VfcGFnZV9zdGF0ZTogSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLFxuICAgICAgcGFnZTogUGFnZVJlY29yZFR5cGUsXG4gICAgICBpbnN0YW5jZV9wcmVzZW5jZTogSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUsXG4gICAgICBwb2ludGVyOiBQb2ludGVyUmVjb3JkVHlwZSxcbiAgICAgIHNoYXBlOiBTaGFwZVJlY29yZFR5cGVcbiAgICB9LFxuICAgIHtcbiAgICAgIG1pZ3JhdGlvbnM6IFtcbiAgICAgICAgc3RvcmVNaWdyYXRpb25zLFxuICAgICAgICBhc3NldE1pZ3JhdGlvbnMsXG4gICAgICAgIGNhbWVyYU1pZ3JhdGlvbnMsXG4gICAgICAgIGRvY3VtZW50TWlncmF0aW9ucyxcbiAgICAgICAgaW5zdGFuY2VNaWdyYXRpb25zLFxuICAgICAgICBpbnN0YW5jZVBhZ2VTdGF0ZU1pZ3JhdGlvbnMsXG4gICAgICAgIHBhZ2VNaWdyYXRpb25zLFxuICAgICAgICBpbnN0YW5jZVByZXNlbmNlTWlncmF0aW9ucyxcbiAgICAgICAgcG9pbnRlck1pZ3JhdGlvbnMsXG4gICAgICAgIHJvb3RTaGFwZU1pZ3JhdGlvbnMsXG4gICAgICAgIGJvb2ttYXJrQXNzZXRNaWdyYXRpb25zLFxuICAgICAgICBpbWFnZUFzc2V0TWlncmF0aW9ucyxcbiAgICAgICAgdmlkZW9Bc3NldE1pZ3JhdGlvbnMsXG4gICAgICAgIC4uLnByb2Nlc3NQcm9wc01pZ3JhdGlvbnMoXCJzaGFwZVwiLCBzaGFwZXMpLFxuICAgICAgICAuLi5wcm9jZXNzUHJvcHNNaWdyYXRpb25zKFwiYmluZGluZ1wiLCBiaW5kaW5ncyksXG4gICAgICAgIC4uLihtaWdyYXRpb25zID8/IFtdKVxuICAgICAgXSxcbiAgICAgIG9uVmFsaWRhdGlvbkZhaWx1cmUsXG4gICAgICBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyXG4gICAgfVxuICApO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlVExTY2hlbWEsXG4gIGRlZmF1bHRCaW5kaW5nU2NoZW1hcyxcbiAgZGVmYXVsdFNoYXBlU2NoZW1hc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVRMU2NoZW1hLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_23__.ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_23__.ArrowShapeArrowheadStartStyle),\n/* harmony export */   AssetRecordType: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_13__.AssetRecordType),\n/* harmony export */   CameraRecordType: () => (/* reexport safe */ _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_15__.CameraRecordType),\n/* harmony export */   DefaultColorStyle: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_38__.DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_38__.DefaultColorThemePalette),\n/* harmony export */   DefaultDashStyle: () => (/* reexport safe */ _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_39__.DefaultDashStyle),\n/* harmony export */   DefaultFillStyle: () => (/* reexport safe */ _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_40__.DefaultFillStyle),\n/* harmony export */   DefaultFontFamilies: () => (/* reexport safe */ _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_41__.DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* reexport safe */ _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_41__.DefaultFontStyle),\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* reexport safe */ _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_42__.DefaultHorizontalAlignStyle),\n/* harmony export */   DefaultSizeStyle: () => (/* reexport safe */ _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_43__.DefaultSizeStyle),\n/* harmony export */   DefaultTextAlignStyle: () => (/* reexport safe */ _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_44__.DefaultTextAlignStyle),\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* reexport safe */ _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_45__.DefaultVerticalAlignStyle),\n/* harmony export */   DocumentRecordType: () => (/* reexport safe */ _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_16__.DocumentRecordType),\n/* harmony export */   EnumStyleProp: () => (/* reexport safe */ _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_37__.EnumStyleProp),\n/* harmony export */   GeoShapeGeoStyle: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_29__.GeoShapeGeoStyle),\n/* harmony export */   ImageShapeCrop: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_32__.ImageShapeCrop),\n/* harmony export */   InstancePageStateRecordType: () => (/* reexport safe */ _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_19__.InstancePageStateRecordType),\n/* harmony export */   InstancePresenceRecordType: () => (/* reexport safe */ _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_21__.InstancePresenceRecordType),\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_46__.LANGUAGES),\n/* harmony export */   LineShapeSplineStyle: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_33__.LineShapeSplineStyle),\n/* harmony export */   PageRecordType: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_18__.PageRecordType),\n/* harmony export */   PointerRecordType: () => (/* reexport safe */ _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_20__.PointerRecordType),\n/* harmony export */   StyleProp: () => (/* reexport safe */ _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_37__.StyleProp),\n/* harmony export */   TLDOCUMENT_ID: () => (/* reexport safe */ _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_16__.TLDOCUMENT_ID),\n/* harmony export */   TLINSTANCE_ID: () => (/* reexport safe */ _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_17__.TLINSTANCE_ID),\n/* harmony export */   TLPOINTER_ID: () => (/* reexport safe */ _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_20__.TLPOINTER_ID),\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* reexport safe */ _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_6__.TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   TL_CURSOR_TYPES: () => (/* reexport safe */ _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_7__.TL_CURSOR_TYPES),\n/* harmony export */   TL_HANDLE_TYPES: () => (/* reexport safe */ _misc_TLHandle_mjs__WEBPACK_IMPORTED_MODULE_8__.TL_HANDLE_TYPES),\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* reexport safe */ _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_10__.TL_SCRIBBLE_STATES),\n/* harmony export */   arrowBindingMigrations: () => (/* reexport safe */ _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* reexport safe */ _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.arrowBindingProps),\n/* harmony export */   arrowShapeMigrations: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_23__.arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_23__.arrowShapeProps),\n/* harmony export */   assetIdValidator: () => (/* reexport safe */ _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator),\n/* harmony export */   assetMigrations: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_13__.assetMigrations),\n/* harmony export */   assetValidator: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_13__.assetValidator),\n/* harmony export */   bindingIdValidator: () => (/* reexport safe */ _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.bindingIdValidator),\n/* harmony export */   bookmarkShapeMigrations: () => (/* reexport safe */ _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_25__.bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* reexport safe */ _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_25__.bookmarkShapeProps),\n/* harmony export */   boxModelValidator: () => (/* reexport safe */ _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_11__.boxModelValidator),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* reexport safe */ _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_6__.canvasUiColorTypeValidator),\n/* harmony export */   createAssetValidator: () => (/* reexport safe */ _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.createAssetValidator),\n/* harmony export */   createBindingId: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.createBindingPropsMigrationSequence),\n/* harmony export */   createBindingValidator: () => (/* reexport safe */ _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingValidator),\n/* harmony export */   createPresenceStateDerivation: () => (/* reexport safe */ _createPresenceStateDerivation_mjs__WEBPACK_IMPORTED_MODULE_4__.createPresenceStateDerivation),\n/* harmony export */   createShapeId: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.createShapePropsMigrationSequence),\n/* harmony export */   createShapeValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_24__.createShapeValidator),\n/* harmony export */   createTLSchema: () => (/* reexport safe */ _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_5__.createTLSchema),\n/* harmony export */   defaultBindingSchemas: () => (/* reexport safe */ _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultBindingSchemas),\n/* harmony export */   defaultColorNames: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_38__.defaultColorNames),\n/* harmony export */   defaultShapeSchemas: () => (/* reexport safe */ _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultShapeSchemas),\n/* harmony export */   drawShapeMigrations: () => (/* reexport safe */ _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_26__.drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* reexport safe */ _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_26__.drawShapeProps),\n/* harmony export */   embedShapeMigrations: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_27__.embedShapeMigrations),\n/* harmony export */   embedShapeProps: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_27__.embedShapeProps),\n/* harmony export */   frameShapeMigrations: () => (/* reexport safe */ _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_28__.frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* reexport safe */ _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_28__.frameShapeProps),\n/* harmony export */   geoShapeMigrations: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_29__.geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_29__.geoShapeProps),\n/* harmony export */   getDefaultColorTheme: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_38__.getDefaultColorTheme),\n/* harmony export */   getDefaultTranslationLocale: () => (/* reexport safe */ _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_46__.getDefaultTranslationLocale),\n/* harmony export */   getShapePropKeysByStyle: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.getShapePropKeysByStyle),\n/* harmony export */   groupShapeMigrations: () => (/* reexport safe */ _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_30__.groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* reexport safe */ _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_30__.groupShapeProps),\n/* harmony export */   highlightShapeMigrations: () => (/* reexport safe */ _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_31__.highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* reexport safe */ _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_31__.highlightShapeProps),\n/* harmony export */   idValidator: () => (/* reexport safe */ _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_12__.idValidator),\n/* harmony export */   imageShapeMigrations: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_32__.imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_32__.imageShapeProps),\n/* harmony export */   isBinding: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.isBinding),\n/* harmony export */   isBindingId: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.isBindingId),\n/* harmony export */   isPageId: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_18__.isPageId),\n/* harmony export */   isShape: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.isShape),\n/* harmony export */   isShapeId: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.isShapeId),\n/* harmony export */   lineShapeMigrations: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_33__.lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_33__.lineShapeProps),\n/* harmony export */   noteShapeMigrations: () => (/* reexport safe */ _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_34__.noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* reexport safe */ _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_34__.noteShapeProps),\n/* harmony export */   opacityValidator: () => (/* reexport safe */ _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_9__.opacityValidator),\n/* harmony export */   pageIdValidator: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_18__.pageIdValidator),\n/* harmony export */   parentIdValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_24__.parentIdValidator),\n/* harmony export */   pluckPreservingValues: () => (/* reexport safe */ _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_17__.pluckPreservingValues),\n/* harmony export */   rootBindingMigrations: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__.rootBindingMigrations),\n/* harmony export */   rootShapeMigrations: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__.rootShapeMigrations),\n/* harmony export */   scribbleValidator: () => (/* reexport safe */ _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_10__.scribbleValidator),\n/* harmony export */   shapeIdValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_24__.shapeIdValidator),\n/* harmony export */   textShapeMigrations: () => (/* reexport safe */ _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_35__.textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* reexport safe */ _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_35__.textShapeProps),\n/* harmony export */   vecModelValidator: () => (/* reexport safe */ _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_11__.vecModelValidator),\n/* harmony export */   videoShapeMigrations: () => (/* reexport safe */ _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_36__.videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* reexport safe */ _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_36__.videoShapeProps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bindings/TLArrowBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\");\n/* harmony import */ var _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bindings/TLBaseBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\");\n/* harmony import */ var _createPresenceStateDerivation_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createPresenceStateDerivation.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs\");\n/* harmony import */ var _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./createTLSchema.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs\");\n/* harmony import */ var _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./misc/TLColor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLHandle_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./misc/TLHandle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./records/TLAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./shapes/TLBookmarkShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\");\n/* harmony import */ var _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./shapes/TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n/* harmony import */ var _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./shapes/TLEmbedShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\");\n/* harmony import */ var _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./shapes/TLFrameShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\");\n/* harmony import */ var _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./shapes/TLGeoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\");\n/* harmony import */ var _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./shapes/TLGroupShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\");\n/* harmony import */ var _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./shapes/TLHighlightShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\");\n/* harmony import */ var _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./shapes/TLImageShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\");\n/* harmony import */ var _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./shapes/TLLineShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\");\n/* harmony import */ var _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./shapes/TLNoteShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\");\n/* harmony import */ var _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./shapes/TLTextShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\");\n/* harmony import */ var _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./shapes/TLVideoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./styles/TLTextAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n/* harmony import */ var _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./translations/translations.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/tlschema\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNxQjtBQUkzQztBQUlEO0FBQzhDO0FBS3REO0FBSUY7QUFDMEI7QUFDQTtBQUNFO0FBQ3NCO0FBSTNDO0FBQ21CO0FBS3ZCO0FBUUU7QUFDeUI7QUFDbUI7QUFJM0M7QUFLSjtBQUdLO0FBSUY7QUFHQztBQVNIO0FBTUk7QUFLRDtBQUlJO0FBSUo7QUFJQztBQUlBO0FBS0Y7QUFJRTtBQUlJO0FBS0o7QUFLRDtBQUlBO0FBSUE7QUFJQztBQUMrQjtBQU0vQjtBQUN5QjtBQUNBO0FBSTFCO0FBR1c7QUFDZTtBQUNVO0FBRzNCO0FBSUY7QUFDekMsMkVBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBb0dFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2luZGV4Lm1qcz82NTA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZ2lzdGVyVGxkcmF3TGlicmFyeVZlcnNpb24gfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgYXNzZXRJZFZhbGlkYXRvciwgY3JlYXRlQXNzZXRWYWxpZGF0b3IgfSBmcm9tIFwiLi9hc3NldHMvVExCYXNlQXNzZXQubWpzXCI7XG5pbXBvcnQge1xuICBhcnJvd0JpbmRpbmdNaWdyYXRpb25zLFxuICBhcnJvd0JpbmRpbmdQcm9wc1xufSBmcm9tIFwiLi9iaW5kaW5ncy9UTEFycm93QmluZGluZy5tanNcIjtcbmltcG9ydCB7XG4gIGJpbmRpbmdJZFZhbGlkYXRvcixcbiAgY3JlYXRlQmluZGluZ1ZhbGlkYXRvclxufSBmcm9tIFwiLi9iaW5kaW5ncy9UTEJhc2VCaW5kaW5nLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUHJlc2VuY2VTdGF0ZURlcml2YXRpb24gfSBmcm9tIFwiLi9jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRMU2NoZW1hLFxuICBkZWZhdWx0QmluZGluZ1NjaGVtYXMsXG4gIGRlZmF1bHRTaGFwZVNjaGVtYXNcbn0gZnJvbSBcIi4vY3JlYXRlVExTY2hlbWEubWpzXCI7XG5pbXBvcnQge1xuICBUTF9DQU5WQVNfVUlfQ09MT1JfVFlQRVMsXG4gIGNhbnZhc1VpQ29sb3JUeXBlVmFsaWRhdG9yXG59IGZyb20gXCIuL21pc2MvVExDb2xvci5tanNcIjtcbmltcG9ydCB7IFRMX0NVUlNPUl9UWVBFUyB9IGZyb20gXCIuL21pc2MvVExDdXJzb3IubWpzXCI7XG5pbXBvcnQgeyBUTF9IQU5ETEVfVFlQRVMgfSBmcm9tIFwiLi9taXNjL1RMSGFuZGxlLm1qc1wiO1xuaW1wb3J0IHsgb3BhY2l0eVZhbGlkYXRvciB9IGZyb20gXCIuL21pc2MvVExPcGFjaXR5Lm1qc1wiO1xuaW1wb3J0IHsgVExfU0NSSUJCTEVfU1RBVEVTLCBzY3JpYmJsZVZhbGlkYXRvciB9IGZyb20gXCIuL21pc2MvVExTY3JpYmJsZS5tanNcIjtcbmltcG9ydCB7XG4gIGJveE1vZGVsVmFsaWRhdG9yLFxuICB2ZWNNb2RlbFZhbGlkYXRvclxufSBmcm9tIFwiLi9taXNjL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmltcG9ydCB7XG4gIEFzc2V0UmVjb3JkVHlwZSxcbiAgYXNzZXRNaWdyYXRpb25zLFxuICBhc3NldFZhbGlkYXRvclxufSBmcm9tIFwiLi9yZWNvcmRzL1RMQXNzZXQubWpzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVCaW5kaW5nSWQsXG4gIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uU2VxdWVuY2UsXG4gIGlzQmluZGluZyxcbiAgaXNCaW5kaW5nSWQsXG4gIHJvb3RCaW5kaW5nTWlncmF0aW9uc1xufSBmcm9tIFwiLi9yZWNvcmRzL1RMQmluZGluZy5tanNcIjtcbmltcG9ydCB7IENhbWVyYVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMQ2FtZXJhLm1qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWNvcmRUeXBlLCBUTERPQ1VNRU5UX0lEIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTERvY3VtZW50Lm1qc1wiO1xuaW1wb3J0IHtcbiAgVExJTlNUQU5DRV9JRCxcbiAgcGx1Y2tQcmVzZXJ2aW5nVmFsdWVzXG59IGZyb20gXCIuL3JlY29yZHMvVExJbnN0YW5jZS5tanNcIjtcbmltcG9ydCB7XG4gIFBhZ2VSZWNvcmRUeXBlLFxuICBpc1BhZ2VJZCxcbiAgcGFnZUlkVmFsaWRhdG9yXG59IGZyb20gXCIuL3JlY29yZHMvVExQYWdlLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlXG59IGZyb20gXCIuL3JlY29yZHMvVExQYWdlU3RhdGUubWpzXCI7XG5pbXBvcnQge1xuICBQb2ludGVyUmVjb3JkVHlwZSxcbiAgVExQT0lOVEVSX0lEXG59IGZyb20gXCIuL3JlY29yZHMvVExQb2ludGVyLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGVcbn0gZnJvbSBcIi4vcmVjb3Jkcy9UTFByZXNlbmNlLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2hhcGVJZCxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgaXNTaGFwZSxcbiAgaXNTaGFwZUlkLFxuICByb290U2hhcGVNaWdyYXRpb25zXG59IGZyb20gXCIuL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIEFycm93U2hhcGVBcnJvd2hlYWRFbmRTdHlsZSxcbiAgQXJyb3dTaGFwZUFycm93aGVhZFN0YXJ0U3R5bGUsXG4gIGFycm93U2hhcGVNaWdyYXRpb25zLFxuICBhcnJvd1NoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMQXJyb3dTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVNoYXBlVmFsaWRhdG9yLFxuICBwYXJlbnRJZFZhbGlkYXRvcixcbiAgc2hhcGVJZFZhbGlkYXRvclxufSBmcm9tIFwiLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBib29rbWFya1NoYXBlTWlncmF0aW9ucyxcbiAgYm9va21hcmtTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEJvb2ttYXJrU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBkcmF3U2hhcGVNaWdyYXRpb25zLFxuICBkcmF3U2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExEcmF3U2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBlbWJlZFNoYXBlTWlncmF0aW9ucyxcbiAgZW1iZWRTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEVtYmVkU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBmcmFtZVNoYXBlTWlncmF0aW9ucyxcbiAgZnJhbWVTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEZyYW1lU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBHZW9TaGFwZUdlb1N0eWxlLFxuICBnZW9TaGFwZU1pZ3JhdGlvbnMsXG4gIGdlb1NoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMR2VvU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBncm91cFNoYXBlTWlncmF0aW9ucyxcbiAgZ3JvdXBTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEdyb3VwU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBoaWdobGlnaHRTaGFwZU1pZ3JhdGlvbnMsXG4gIGhpZ2hsaWdodFNoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMSGlnaGxpZ2h0U2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBJbWFnZVNoYXBlQ3JvcCxcbiAgaW1hZ2VTaGFwZU1pZ3JhdGlvbnMsXG4gIGltYWdlU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExJbWFnZVNoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgTGluZVNoYXBlU3BsaW5lU3R5bGUsXG4gIGxpbmVTaGFwZU1pZ3JhdGlvbnMsXG4gIGxpbmVTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTExpbmVTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIG5vdGVTaGFwZU1pZ3JhdGlvbnMsXG4gIG5vdGVTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTE5vdGVTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIHRleHRTaGFwZU1pZ3JhdGlvbnMsXG4gIHRleHRTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTFRleHRTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIHZpZGVvU2hhcGVNaWdyYXRpb25zLFxuICB2aWRlb1NoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMVmlkZW9TaGFwZS5tanNcIjtcbmltcG9ydCB7IEVudW1TdHlsZVByb3AsIFN0eWxlUHJvcCB9IGZyb20gXCIuL3N0eWxlcy9TdHlsZVByb3AubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgRGVmYXVsdENvbG9yVGhlbWVQYWxldHRlLFxuICBkZWZhdWx0Q29sb3JOYW1lcyxcbiAgZ2V0RGVmYXVsdENvbG9yVGhlbWVcbn0gZnJvbSBcIi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHREYXNoU3R5bGUgfSBmcm9tIFwiLi9zdHlsZXMvVExEYXNoU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RmlsbFN0eWxlIH0gZnJvbSBcIi4vc3R5bGVzL1RMRmlsbFN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEZvbnRGYW1pbGllcyxcbiAgRGVmYXVsdEZvbnRTdHlsZVxufSBmcm9tIFwiLi9zdHlsZXMvVExGb250U3R5bGUubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0SG9yaXpvbnRhbEFsaWduU3R5bGVcbn0gZnJvbSBcIi4vc3R5bGVzL1RMSG9yaXpvbnRhbEFsaWduU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFRleHRBbGlnblN0eWxlIH0gZnJvbSBcIi4vc3R5bGVzL1RMVGV4dEFsaWduU3R5bGUubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0VmVydGljYWxBbGlnblN0eWxlXG59IGZyb20gXCIuL3N0eWxlcy9UTFZlcnRpY2FsQWxpZ25TdHlsZS5tanNcIjtcbmltcG9ydCB7XG4gIExBTkdVQUdFUyxcbiAgZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlXG59IGZyb20gXCIuL3RyYW5zbGF0aW9ucy90cmFuc2xhdGlvbnMubWpzXCI7XG5yZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKFxuICBcIkB0bGRyYXcvdGxzY2hlbWFcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgQXJyb3dTaGFwZUFycm93aGVhZEVuZFN0eWxlLFxuICBBcnJvd1NoYXBlQXJyb3doZWFkU3RhcnRTdHlsZSxcbiAgQXNzZXRSZWNvcmRUeXBlLFxuICBDYW1lcmFSZWNvcmRUeXBlLFxuICBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgRGVmYXVsdENvbG9yVGhlbWVQYWxldHRlLFxuICBEZWZhdWx0RGFzaFN0eWxlLFxuICBEZWZhdWx0RmlsbFN0eWxlLFxuICBEZWZhdWx0Rm9udEZhbWlsaWVzLFxuICBEZWZhdWx0Rm9udFN0eWxlLFxuICBEZWZhdWx0SG9yaXpvbnRhbEFsaWduU3R5bGUsXG4gIERlZmF1bHRTaXplU3R5bGUsXG4gIERlZmF1bHRUZXh0QWxpZ25TdHlsZSxcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSxcbiAgRG9jdW1lbnRSZWNvcmRUeXBlLFxuICBFbnVtU3R5bGVQcm9wLFxuICBHZW9TaGFwZUdlb1N0eWxlLFxuICBJbWFnZVNoYXBlQ3JvcCxcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLFxuICBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSxcbiAgTEFOR1VBR0VTLFxuICBMaW5lU2hhcGVTcGxpbmVTdHlsZSxcbiAgUGFnZVJlY29yZFR5cGUsXG4gIFBvaW50ZXJSZWNvcmRUeXBlLFxuICBTdHlsZVByb3AsXG4gIFRMRE9DVU1FTlRfSUQsXG4gIFRMSU5TVEFOQ0VfSUQsXG4gIFRMUE9JTlRFUl9JRCxcbiAgVExfQ0FOVkFTX1VJX0NPTE9SX1RZUEVTLFxuICBUTF9DVVJTT1JfVFlQRVMsXG4gIFRMX0hBTkRMRV9UWVBFUyxcbiAgVExfU0NSSUJCTEVfU1RBVEVTLFxuICBhcnJvd0JpbmRpbmdNaWdyYXRpb25zLFxuICBhcnJvd0JpbmRpbmdQcm9wcyxcbiAgYXJyb3dTaGFwZU1pZ3JhdGlvbnMsXG4gIGFycm93U2hhcGVQcm9wcyxcbiAgYXNzZXRJZFZhbGlkYXRvcixcbiAgYXNzZXRNaWdyYXRpb25zLFxuICBhc3NldFZhbGlkYXRvcixcbiAgYmluZGluZ0lkVmFsaWRhdG9yLFxuICBib29rbWFya1NoYXBlTWlncmF0aW9ucyxcbiAgYm9va21hcmtTaGFwZVByb3BzLFxuICBib3hNb2RlbFZhbGlkYXRvcixcbiAgY2FudmFzVWlDb2xvclR5cGVWYWxpZGF0b3IsXG4gIGNyZWF0ZUFzc2V0VmFsaWRhdG9yLFxuICBjcmVhdGVCaW5kaW5nSWQsXG4gIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZUJpbmRpbmdWYWxpZGF0b3IsXG4gIGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uLFxuICBjcmVhdGVTaGFwZUlkLFxuICBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLFxuICBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZVNoYXBlVmFsaWRhdG9yLFxuICBjcmVhdGVUTFNjaGVtYSxcbiAgZGVmYXVsdEJpbmRpbmdTY2hlbWFzLFxuICBkZWZhdWx0Q29sb3JOYW1lcyxcbiAgZGVmYXVsdFNoYXBlU2NoZW1hcyxcbiAgZHJhd1NoYXBlTWlncmF0aW9ucyxcbiAgZHJhd1NoYXBlUHJvcHMsXG4gIGVtYmVkU2hhcGVNaWdyYXRpb25zLFxuICBlbWJlZFNoYXBlUHJvcHMsXG4gIGZyYW1lU2hhcGVNaWdyYXRpb25zLFxuICBmcmFtZVNoYXBlUHJvcHMsXG4gIGdlb1NoYXBlTWlncmF0aW9ucyxcbiAgZ2VvU2hhcGVQcm9wcyxcbiAgZ2V0RGVmYXVsdENvbG9yVGhlbWUsXG4gIGdldERlZmF1bHRUcmFuc2xhdGlvbkxvY2FsZSxcbiAgZ2V0U2hhcGVQcm9wS2V5c0J5U3R5bGUsXG4gIGdyb3VwU2hhcGVNaWdyYXRpb25zLFxuICBncm91cFNoYXBlUHJvcHMsXG4gIGhpZ2hsaWdodFNoYXBlTWlncmF0aW9ucyxcbiAgaGlnaGxpZ2h0U2hhcGVQcm9wcyxcbiAgaWRWYWxpZGF0b3IsXG4gIGltYWdlU2hhcGVNaWdyYXRpb25zLFxuICBpbWFnZVNoYXBlUHJvcHMsXG4gIGlzQmluZGluZyxcbiAgaXNCaW5kaW5nSWQsXG4gIGlzUGFnZUlkLFxuICBpc1NoYXBlLFxuICBpc1NoYXBlSWQsXG4gIGxpbmVTaGFwZU1pZ3JhdGlvbnMsXG4gIGxpbmVTaGFwZVByb3BzLFxuICBub3RlU2hhcGVNaWdyYXRpb25zLFxuICBub3RlU2hhcGVQcm9wcyxcbiAgb3BhY2l0eVZhbGlkYXRvcixcbiAgcGFnZUlkVmFsaWRhdG9yLFxuICBwYXJlbnRJZFZhbGlkYXRvcixcbiAgcGx1Y2tQcmVzZXJ2aW5nVmFsdWVzLFxuICByb290QmluZGluZ01pZ3JhdGlvbnMsXG4gIHJvb3RTaGFwZU1pZ3JhdGlvbnMsXG4gIHNjcmliYmxlVmFsaWRhdG9yLFxuICBzaGFwZUlkVmFsaWRhdG9yLFxuICB0ZXh0U2hhcGVNaWdyYXRpb25zLFxuICB0ZXh0U2hhcGVQcm9wcyxcbiAgdmVjTW9kZWxWYWxpZGF0b3IsXG4gIHZpZGVvU2hhcGVNaWdyYXRpb25zLFxuICB2aWRlb1NoYXBlUHJvcHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* binding */ TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* binding */ canvasUiColorTypeValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst TL_CANVAS_UI_COLOR_TYPES = /* @__PURE__ */ new Set([\n  \"accent\",\n  \"white\",\n  \"black\",\n  \"selection-stroke\",\n  \"selection-fill\",\n  \"laser\",\n  \"muted-1\"\n]);\nconst canvasUiColorTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_CANVAS_UI_COLOR_TYPES);\n\n//# sourceMappingURL=TLColor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMQ29sb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdURBQVM7QUFJMUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9UTENvbG9yLm1qcz8yNzYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuY29uc3QgVExfQ0FOVkFTX1VJX0NPTE9SX1RZUEVTID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcImFjY2VudFwiLFxuICBcIndoaXRlXCIsXG4gIFwiYmxhY2tcIixcbiAgXCJzZWxlY3Rpb24tc3Ryb2tlXCIsXG4gIFwic2VsZWN0aW9uLWZpbGxcIixcbiAgXCJsYXNlclwiLFxuICBcIm11dGVkLTFcIlxuXSk7XG5jb25zdCBjYW52YXNVaUNvbG9yVHlwZVZhbGlkYXRvciA9IFQuc2V0RW51bShUTF9DQU5WQVNfVUlfQ09MT1JfVFlQRVMpO1xuZXhwb3J0IHtcbiAgVExfQ0FOVkFTX1VJX0NPTE9SX1RZUEVTLFxuICBjYW52YXNVaUNvbG9yVHlwZVZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQ29sb3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_CURSOR_TYPES: () => (/* binding */ TL_CURSOR_TYPES),\n/* harmony export */   cursorTypeValidator: () => (/* binding */ cursorTypeValidator),\n/* harmony export */   cursorValidator: () => (/* binding */ cursorValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst TL_CURSOR_TYPES = /* @__PURE__ */ new Set([\n  \"none\",\n  \"default\",\n  \"pointer\",\n  \"cross\",\n  \"grab\",\n  \"rotate\",\n  \"grabbing\",\n  \"resize-edge\",\n  \"resize-corner\",\n  \"text\",\n  \"move\",\n  \"ew-resize\",\n  \"ns-resize\",\n  \"nesw-resize\",\n  \"nwse-resize\",\n  \"nesw-rotate\",\n  \"nwse-rotate\",\n  \"swne-rotate\",\n  \"senw-rotate\",\n  \"zoom-in\",\n  \"zoom-out\"\n]);\nconst cursorTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_CURSOR_TYPES);\nconst cursorValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  type: cursorTypeValidator,\n  rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number\n});\n\n//# sourceMappingURL=TLCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMQ3Vyc29yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdURBQVM7QUFDckMsd0JBQXdCLHNEQUFRO0FBQ2hDO0FBQ0EsWUFBWSxzREFBUTtBQUNwQixDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9UTEN1cnNvci5tanM/NGM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmNvbnN0IFRMX0NVUlNPUl9UWVBFUyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJub25lXCIsXG4gIFwiZGVmYXVsdFwiLFxuICBcInBvaW50ZXJcIixcbiAgXCJjcm9zc1wiLFxuICBcImdyYWJcIixcbiAgXCJyb3RhdGVcIixcbiAgXCJncmFiYmluZ1wiLFxuICBcInJlc2l6ZS1lZGdlXCIsXG4gIFwicmVzaXplLWNvcm5lclwiLFxuICBcInRleHRcIixcbiAgXCJtb3ZlXCIsXG4gIFwiZXctcmVzaXplXCIsXG4gIFwibnMtcmVzaXplXCIsXG4gIFwibmVzdy1yZXNpemVcIixcbiAgXCJud3NlLXJlc2l6ZVwiLFxuICBcIm5lc3ctcm90YXRlXCIsXG4gIFwibndzZS1yb3RhdGVcIixcbiAgXCJzd25lLXJvdGF0ZVwiLFxuICBcInNlbnctcm90YXRlXCIsXG4gIFwiem9vbS1pblwiLFxuICBcInpvb20tb3V0XCJcbl0pO1xuY29uc3QgY3Vyc29yVHlwZVZhbGlkYXRvciA9IFQuc2V0RW51bShUTF9DVVJTT1JfVFlQRVMpO1xuY29uc3QgY3Vyc29yVmFsaWRhdG9yID0gVC5vYmplY3Qoe1xuICB0eXBlOiBjdXJzb3JUeXBlVmFsaWRhdG9yLFxuICByb3RhdGlvbjogVC5udW1iZXJcbn0pO1xuZXhwb3J0IHtcbiAgVExfQ1VSU09SX1RZUEVTLFxuICBjdXJzb3JUeXBlVmFsaWRhdG9yLFxuICBjdXJzb3JWYWxpZGF0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEN1cnNvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_HANDLE_TYPES: () => (/* binding */ TL_HANDLE_TYPES)\n/* harmony export */ });\nconst TL_HANDLE_TYPES = /* @__PURE__ */ new Set([\"vertex\", \"virtual\", \"create\", \"clone\"]);\n\n//# sourceMappingURL=TLHandle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMSGFuZGxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMSGFuZGxlLm1qcz82YTk0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRMX0hBTkRMRV9UWVBFUyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInZlcnRleFwiLCBcInZpcnR1YWxcIiwgXCJjcmVhdGVcIiwgXCJjbG9uZVwiXSk7XG5leHBvcnQge1xuICBUTF9IQU5ETEVfVFlQRVNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEhhbmRsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   opacityValidator: () => (/* binding */ opacityValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst opacityValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number.check((n) => {\n  if (n < 0 || n > 1) {\n    throw new _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.ValidationError(\"Opacity must be between 0 and 1\");\n  }\n});\n\n//# sourceMappingURL=TLOpacity.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMT3BhY2l0eS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDckMseUJBQXlCLHNEQUFRO0FBQ2pDO0FBQ0EsY0FBYywrREFBaUI7QUFDL0I7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9UTE9wYWNpdHkubWpzP2JmYjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5jb25zdCBvcGFjaXR5VmFsaWRhdG9yID0gVC5udW1iZXIuY2hlY2soKG4pID0+IHtcbiAgaWYgKG4gPCAwIHx8IG4gPiAxKSB7XG4gICAgdGhyb3cgbmV3IFQuVmFsaWRhdGlvbkVycm9yKFwiT3BhY2l0eSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMVwiKTtcbiAgfVxufSk7XG5leHBvcnQge1xuICBvcGFjaXR5VmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExPcGFjaXR5Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* binding */ TL_SCRIBBLE_STATES),\n/* harmony export */   scribbleValidator: () => (/* binding */ scribbleValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLColor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TLColor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\");\n/* harmony import */ var _geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n\n\n\nconst TL_SCRIBBLE_STATES = /* @__PURE__ */ new Set([\"starting\", \"paused\", \"active\", \"stopping\"]);\nconst scribbleValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator),\n  size: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  color: _TLColor_mjs__WEBPACK_IMPORTED_MODULE_1__.canvasUiColorTypeValidator,\n  opacity: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  state: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_SCRIBBLE_STATES),\n  delay: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  shrink: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  taper: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n});\n\n//# sourceMappingURL=TLScribble.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMU2NyaWJibGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFDO0FBQ3NCO0FBQ0Y7QUFDekQ7QUFDQSwwQkFBMEIsc0RBQVE7QUFDbEMsTUFBTSxzREFBUTtBQUNkLFVBQVUsdURBQVMsQ0FBQyxrRUFBaUI7QUFDckMsUUFBUSw4REFBZ0I7QUFDeEIsU0FBUyxvRUFBMEI7QUFDbkMsV0FBVyxzREFBUTtBQUNuQixTQUFTLHVEQUFTO0FBQ2xCLFNBQVMsc0RBQVE7QUFDakIsVUFBVSxzREFBUTtBQUNsQixTQUFTLHVEQUFTO0FBQ2xCLENBQUM7QUFJQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMU2NyaWJibGUubWpzP2ZhZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjYW52YXNVaUNvbG9yVHlwZVZhbGlkYXRvciB9IGZyb20gXCIuL1RMQ29sb3IubWpzXCI7XG5pbXBvcnQgeyB2ZWNNb2RlbFZhbGlkYXRvciB9IGZyb20gXCIuL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuY29uc3QgVExfU0NSSUJCTEVfU1RBVEVTID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wic3RhcnRpbmdcIiwgXCJwYXVzZWRcIiwgXCJhY3RpdmVcIiwgXCJzdG9wcGluZ1wiXSk7XG5jb25zdCBzY3JpYmJsZVZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgaWQ6IFQuc3RyaW5nLFxuICBwb2ludHM6IFQuYXJyYXlPZih2ZWNNb2RlbFZhbGlkYXRvciksXG4gIHNpemU6IFQucG9zaXRpdmVOdW1iZXIsXG4gIGNvbG9yOiBjYW52YXNVaUNvbG9yVHlwZVZhbGlkYXRvcixcbiAgb3BhY2l0eTogVC5udW1iZXIsXG4gIHN0YXRlOiBULnNldEVudW0oVExfU0NSSUJCTEVfU1RBVEVTKSxcbiAgZGVsYXk6IFQubnVtYmVyLFxuICBzaHJpbms6IFQubnVtYmVyLFxuICB0YXBlcjogVC5ib29sZWFuXG59KTtcbmV4cG9ydCB7XG4gIFRMX1NDUklCQkxFX1NUQVRFUyxcbiAgc2NyaWJibGVWYWxpZGF0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFNjcmliYmxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boxModelValidator: () => (/* binding */ boxModelValidator),\n/* harmony export */   vecModelValidator: () => (/* binding */ vecModelValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst vecModelValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number.optional()\n});\nconst boxModelValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number\n});\n\n//# sourceMappingURL=geometry-types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2dlb21ldHJ5LXR5cGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDckMsMEJBQTBCLHNEQUFRO0FBQ2xDLEtBQUssc0RBQVE7QUFDYixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFDRCwwQkFBMEIsc0RBQVE7QUFDbEMsS0FBSyxzREFBUTtBQUNiLEtBQUssc0RBQVE7QUFDYixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFJQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2dlb21ldHJ5LXR5cGVzLm1qcz9mYjFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuY29uc3QgdmVjTW9kZWxWYWxpZGF0b3IgPSBULm9iamVjdCh7XG4gIHg6IFQubnVtYmVyLFxuICB5OiBULm51bWJlcixcbiAgejogVC5udW1iZXIub3B0aW9uYWwoKVxufSk7XG5jb25zdCBib3hNb2RlbFZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgeDogVC5udW1iZXIsXG4gIHk6IFQubnVtYmVyLFxuICB3OiBULm51bWJlcixcbiAgaDogVC5udW1iZXJcbn0pO1xuZXhwb3J0IHtcbiAgYm94TW9kZWxWYWxpZGF0b3IsXG4gIHZlY01vZGVsVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VvbWV0cnktdHlwZXMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   idValidator: () => (/* binding */ idValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nfunction idValidator(prefix) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string.refine((id) => {\n    if (!id.startsWith(`${prefix}:`)) {\n      throw new Error(`${prefix} ID must start with \"${prefix}:\"`);\n    }\n    return id;\n  });\n}\n\n//# sourceMappingURL=id-validator.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2lkLXZhbGlkYXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDckM7QUFDQSxTQUFTLHNEQUFRO0FBQ2pCLDBCQUEwQixPQUFPO0FBQ2pDLHlCQUF5QixRQUFRLHNCQUFzQixPQUFPO0FBQzlEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2lkLXZhbGlkYXRvci5tanM/ZDg0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmZ1bmN0aW9uIGlkVmFsaWRhdG9yKHByZWZpeCkge1xuICByZXR1cm4gVC5zdHJpbmcucmVmaW5lKChpZCkgPT4ge1xuICAgIGlmICghaWQuc3RhcnRzV2l0aChgJHtwcmVmaXh9OmApKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJlZml4fSBJRCBtdXN0IHN0YXJ0IHdpdGggXCIke3ByZWZpeH06XCJgKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9KTtcbn1cbmV4cG9ydCB7XG4gIGlkVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aWQtdmFsaWRhdG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPropsMigration: () => (/* binding */ createPropsMigration),\n/* harmony export */   processPropsMigrations: () => (/* binding */ processPropsMigrations)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nfunction processPropsMigrations(typeName, records) {\n  const result = [];\n  for (const [subType, { migrations }] of Object.entries(records)) {\n    const sequenceId = `com.tldraw.${typeName}.${subType}`;\n    if (!migrations) {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: []\n        })\n      );\n    } else if (\"sequenceId\" in migrations) {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        sequenceId === migrations.sequenceId,\n        `sequenceId mismatch for ${subType} ${_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.RecordType} migrations. Expected '${sequenceId}', got '${migrations.sequenceId}'`\n      );\n      result.push(migrations);\n    } else if (\"sequence\" in migrations) {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: migrations.sequence.map(\n            (m) => \"id\" in m ? createPropsMigration(typeName, subType, m) : m\n          )\n        })\n      );\n    } else {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: Object.keys(migrations.migrators).map((k) => Number(k)).sort((a, b) => a - b).map(\n            (version) => ({\n              id: `${sequenceId}/${version}`,\n              scope: \"record\",\n              filter: (r) => r.typeName === typeName && r.type === subType,\n              up: (record) => {\n                const result2 = migrations.migrators[version].up(record);\n                if (result2) {\n                  return result2;\n                }\n              },\n              down: (record) => {\n                const result2 = migrations.migrators[version].down(record);\n                if (result2) {\n                  return result2;\n                }\n              }\n            })\n          )\n        })\n      );\n    }\n  }\n  return result;\n}\nfunction createPropsMigration(typeName, subType, m) {\n  return {\n    id: m.id,\n    dependsOn: m.dependsOn,\n    scope: \"record\",\n    filter: (r) => r.typeName === typeName && r.type === subType,\n    up: (record) => {\n      const result = m.up(record.props);\n      if (result) {\n        record.props = result;\n      }\n    },\n    down: typeof m.down === \"function\" ? (record) => {\n      const result = m.down(record.props);\n      if (result) {\n        record.props = result;\n      }\n    } : void 0\n  };\n}\n\n//# sourceMappingURL=recordsWithProps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzV2l0aFByb3BzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR3VCO0FBQ2dCO0FBQ3ZDO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQyxxQ0FBcUMsU0FBUyxHQUFHLFFBQVE7QUFDekQ7QUFDQTtBQUNBLFFBQVEsc0VBQXVCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTixNQUFNLHFEQUFNO0FBQ1o7QUFDQSxtQ0FBbUMsU0FBUyxFQUFFLHFEQUFVLEVBQUUsd0JBQXdCLFdBQVcsVUFBVSxzQkFBc0I7QUFDN0g7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLFFBQVEsc0VBQXVCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQSxRQUFRLHNFQUF1QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixXQUFXLEdBQUcsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkc1dpdGhQcm9wcy5tanM/NzI3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBSZWNvcmRUeXBlLFxuICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIHByb2Nlc3NQcm9wc01pZ3JhdGlvbnModHlwZU5hbWUsIHJlY29yZHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAoY29uc3QgW3N1YlR5cGUsIHsgbWlncmF0aW9ucyB9XSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmRzKSkge1xuICAgIGNvbnN0IHNlcXVlbmNlSWQgPSBgY29tLnRsZHJhdy4ke3R5cGVOYW1lfS4ke3N1YlR5cGV9YDtcbiAgICBpZiAoIW1pZ3JhdGlvbnMpIHtcbiAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSh7XG4gICAgICAgICAgc2VxdWVuY2VJZCxcbiAgICAgICAgICByZXRyb2FjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgc2VxdWVuY2U6IFtdXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoXCJzZXF1ZW5jZUlkXCIgaW4gbWlncmF0aW9ucykge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBzZXF1ZW5jZUlkID09PSBtaWdyYXRpb25zLnNlcXVlbmNlSWQsXG4gICAgICAgIGBzZXF1ZW5jZUlkIG1pc21hdGNoIGZvciAke3N1YlR5cGV9ICR7UmVjb3JkVHlwZX0gbWlncmF0aW9ucy4gRXhwZWN0ZWQgJyR7c2VxdWVuY2VJZH0nLCBnb3QgJyR7bWlncmF0aW9ucy5zZXF1ZW5jZUlkfSdgXG4gICAgICApO1xuICAgICAgcmVzdWx0LnB1c2gobWlncmF0aW9ucyk7XG4gICAgfSBlbHNlIGlmIChcInNlcXVlbmNlXCIgaW4gbWlncmF0aW9ucykge1xuICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgICAgICAgICBzZXF1ZW5jZUlkLFxuICAgICAgICAgIHJldHJvYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBzZXF1ZW5jZTogbWlncmF0aW9ucy5zZXF1ZW5jZS5tYXAoXG4gICAgICAgICAgICAobSkgPT4gXCJpZFwiIGluIG0gPyBjcmVhdGVQcm9wc01pZ3JhdGlvbih0eXBlTmFtZSwgc3ViVHlwZSwgbSkgOiBtXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgICAgICAgICBzZXF1ZW5jZUlkLFxuICAgICAgICAgIHJldHJvYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBzZXF1ZW5jZTogT2JqZWN0LmtleXMobWlncmF0aW9ucy5taWdyYXRvcnMpLm1hcCgoaykgPT4gTnVtYmVyKGspKS5zb3J0KChhLCBiKSA9PiBhIC0gYikubWFwKFxuICAgICAgICAgICAgKHZlcnNpb24pID0+ICh7XG4gICAgICAgICAgICAgIGlkOiBgJHtzZXF1ZW5jZUlkfS8ke3ZlcnNpb259YCxcbiAgICAgICAgICAgICAgc2NvcGU6IFwicmVjb3JkXCIsXG4gICAgICAgICAgICAgIGZpbHRlcjogKHIpID0+IHIudHlwZU5hbWUgPT09IHR5cGVOYW1lICYmIHIudHlwZSA9PT0gc3ViVHlwZSxcbiAgICAgICAgICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQyID0gbWlncmF0aW9ucy5taWdyYXRvcnNbdmVyc2lvbl0udXAocmVjb3JkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Mikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkb3duOiAocmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IG1pZ3JhdGlvbnMubWlncmF0b3JzW3ZlcnNpb25dLmRvd24ocmVjb3JkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Mikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9wc01pZ3JhdGlvbih0eXBlTmFtZSwgc3ViVHlwZSwgbSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBtLmlkLFxuICAgIGRlcGVuZHNPbjogbS5kZXBlbmRzT24sXG4gICAgc2NvcGU6IFwicmVjb3JkXCIsXG4gICAgZmlsdGVyOiAocikgPT4gci50eXBlTmFtZSA9PT0gdHlwZU5hbWUgJiYgci50eXBlID09PSBzdWJUeXBlLFxuICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBtLnVwKHJlY29yZC5wcm9wcyk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJlY29yZC5wcm9wcyA9IHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRvd246IHR5cGVvZiBtLmRvd24gPT09IFwiZnVuY3Rpb25cIiA/IChyZWNvcmQpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG0uZG93bihyZWNvcmQucHJvcHMpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZWNvcmQucHJvcHMgPSByZXN1bHQ7XG4gICAgICB9XG4gICAgfSA6IHZvaWQgMFxuICB9O1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlUHJvcHNNaWdyYXRpb24sXG4gIHByb2Nlc3NQcm9wc01pZ3JhdGlvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmRzV2l0aFByb3BzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AssetRecordType: () => (/* binding */ AssetRecordType),\n/* harmony export */   assetMigrations: () => (/* binding */ assetMigrations),\n/* harmony export */   assetValidator: () => (/* binding */ assetValidator),\n/* harmony export */   assetVersions: () => (/* binding */ assetVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/TLBookmarkAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\");\n/* harmony import */ var _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets/TLImageAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\");\n/* harmony import */ var _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../assets/TLVideoAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\");\n\n\n\n\n\nconst assetValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"asset\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.union(\"type\", {\n    image: _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_3__.imageAssetValidator,\n    video: _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_4__.videoAssetValidator,\n    bookmark: _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.bookmarkAssetValidator\n  })\n);\nconst assetVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset\", {\n  AddMeta: 1\n});\nconst assetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset\",\n  recordType: \"asset\",\n  sequence: [\n    {\n      id: assetVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst AssetRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"asset\", {\n  validator: assetValidator,\n  scope: \"document\"\n}).withDefaultProperties(() => ({\n  meta: {}\n}));\n\n//# sourceMappingURL=TLAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQXNzZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUl1QjtBQUNjO0FBQ2tDO0FBQ047QUFDQTtBQUNqRSx1QkFBdUIscURBQU87QUFDOUI7QUFDQSxFQUFFLHFEQUFPO0FBQ1QsV0FBVyx5RUFBbUI7QUFDOUIsV0FBVyx5RUFBbUI7QUFDOUIsY0FBYywrRUFBc0I7QUFDcEMsR0FBRztBQUNIO0FBQ0Esc0JBQXNCLGlFQUFrQjtBQUN4QztBQUNBLENBQUM7QUFDRCx3QkFBd0IsNEVBQTZCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLCtEQUFnQjtBQUN4QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHMvVExBc3NldC5tanM/MjA5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGJvb2ttYXJrQXNzZXRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMQm9va21hcmtBc3NldC5tanNcIjtcbmltcG9ydCB7IGltYWdlQXNzZXRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMSW1hZ2VBc3NldC5tanNcIjtcbmltcG9ydCB7IHZpZGVvQXNzZXRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMVmlkZW9Bc3NldC5tanNcIjtcbmNvbnN0IGFzc2V0VmFsaWRhdG9yID0gVC5tb2RlbChcbiAgXCJhc3NldFwiLFxuICBULnVuaW9uKFwidHlwZVwiLCB7XG4gICAgaW1hZ2U6IGltYWdlQXNzZXRWYWxpZGF0b3IsXG4gICAgdmlkZW86IHZpZGVvQXNzZXRWYWxpZGF0b3IsXG4gICAgYm9va21hcms6IGJvb2ttYXJrQXNzZXRWYWxpZGF0b3JcbiAgfSlcbik7XG5jb25zdCBhc3NldFZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5hc3NldFwiLCB7XG4gIEFkZE1ldGE6IDFcbn0pO1xuY29uc3QgYXNzZXRNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuYXNzZXRcIixcbiAgcmVjb3JkVHlwZTogXCJhc3NldFwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBhc3NldFZlcnNpb25zLkFkZE1ldGEsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICA7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmNvbnN0IEFzc2V0UmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXCJhc3NldFwiLCB7XG4gIHZhbGlkYXRvcjogYXNzZXRWYWxpZGF0b3IsXG4gIHNjb3BlOiBcImRvY3VtZW50XCJcbn0pLndpdGhEZWZhdWx0UHJvcGVydGllcygoKSA9PiAoe1xuICBtZXRhOiB7fVxufSkpO1xuZXhwb3J0IHtcbiAgQXNzZXRSZWNvcmRUeXBlLFxuICBhc3NldE1pZ3JhdGlvbnMsXG4gIGFzc2V0VmFsaWRhdG9yLFxuICBhc3NldFZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExBc3NldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBindingId: () => (/* binding */ createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* binding */ createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* binding */ createBindingPropsMigrationSequence),\n/* harmony export */   createBindingRecordType: () => (/* binding */ createBindingRecordType),\n/* harmony export */   isBinding: () => (/* binding */ isBinding),\n/* harmony export */   isBindingId: () => (/* binding */ isBindingId),\n/* harmony export */   rootBindingMigrations: () => (/* binding */ rootBindingMigrations),\n/* harmony export */   rootBindingVersions: () => (/* binding */ rootBindingVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../bindings/TLBaseBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\");\n\n\n\n\nconst rootBindingVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.binding\", {});\nconst rootBindingMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.binding\",\n  recordType: \"binding\",\n  sequence: []\n});\nfunction isBinding(record) {\n  if (!record) return false;\n  return record.typeName === \"binding\";\n}\nfunction isBindingId(id) {\n  if (!id) return false;\n  return id.startsWith(\"binding:\");\n}\nfunction createBindingId(id) {\n  return `binding:${id ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)()}`;\n}\nfunction createBindingPropsMigrationSequence(migrations) {\n  return migrations;\n}\nfunction createBindingPropsMigrationIds(bindingType, ids) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(ids, (_k, v) => `com.tldraw.binding.${bindingType}/${v}`);\n}\nfunction createBindingRecordType(bindings) {\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"binding\", {\n    scope: \"document\",\n    validator: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n      \"binding\",\n      _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.union(\n        \"type\",\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(\n          bindings,\n          (type, { props, meta }) => (0,_bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingValidator)(type, props, meta)\n        )\n      )\n    )\n  }).withDefaultProperties(() => ({\n    meta: {}\n  }));\n}\n\n//# sourceMappingURL=TLBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQmluZGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBSXVCO0FBQ3NDO0FBQ3hCO0FBQ2tDO0FBQ3ZFLDRCQUE0QixpRUFBa0IseUJBQXlCO0FBQ3ZFLDhCQUE4Qiw0RUFBNkI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNLHVEQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUVBQWtCLHVDQUF1QyxZQUFZLEdBQUcsRUFBRTtBQUNuRjtBQUNBO0FBQ0EsU0FBUywrREFBZ0I7QUFDekI7QUFDQSxlQUFlLHFEQUFPO0FBQ3RCO0FBQ0EsTUFBTSxxREFBTztBQUNiO0FBQ0EsUUFBUSxpRUFBa0I7QUFDMUI7QUFDQSxtQkFBbUIsYUFBYSxLQUFLLG1GQUFzQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFVRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQmluZGluZy5tanM/YjY0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBtYXBPYmplY3RNYXBWYWx1ZXMsIHVuaXF1ZUlkIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlQmluZGluZ1ZhbGlkYXRvciB9IGZyb20gXCIuLi9iaW5kaW5ncy9UTEJhc2VCaW5kaW5nLm1qc1wiO1xuY29uc3Qgcm9vdEJpbmRpbmdWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYmluZGluZ1wiLCB7fSk7XG5jb25zdCByb290QmluZGluZ01pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5iaW5kaW5nXCIsXG4gIHJlY29yZFR5cGU6IFwiYmluZGluZ1wiLFxuICBzZXF1ZW5jZTogW11cbn0pO1xuZnVuY3Rpb24gaXNCaW5kaW5nKHJlY29yZCkge1xuICBpZiAoIXJlY29yZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gcmVjb3JkLnR5cGVOYW1lID09PSBcImJpbmRpbmdcIjtcbn1cbmZ1bmN0aW9uIGlzQmluZGluZ0lkKGlkKSB7XG4gIGlmICghaWQpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlkLnN0YXJ0c1dpdGgoXCJiaW5kaW5nOlwiKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJpbmRpbmdJZChpZCkge1xuICByZXR1cm4gYGJpbmRpbmc6JHtpZCA/PyB1bmlxdWVJZCgpfWA7XG59XG5mdW5jdGlvbiBjcmVhdGVCaW5kaW5nUHJvcHNNaWdyYXRpb25TZXF1ZW5jZShtaWdyYXRpb25zKSB7XG4gIHJldHVybiBtaWdyYXRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uSWRzKGJpbmRpbmdUeXBlLCBpZHMpIHtcbiAgcmV0dXJuIG1hcE9iamVjdE1hcFZhbHVlcyhpZHMsIChfaywgdikgPT4gYGNvbS50bGRyYXcuYmluZGluZy4ke2JpbmRpbmdUeXBlfS8ke3Z9YCk7XG59XG5mdW5jdGlvbiBjcmVhdGVCaW5kaW5nUmVjb3JkVHlwZShiaW5kaW5ncykge1xuICByZXR1cm4gY3JlYXRlUmVjb3JkVHlwZShcImJpbmRpbmdcIiwge1xuICAgIHNjb3BlOiBcImRvY3VtZW50XCIsXG4gICAgdmFsaWRhdG9yOiBULm1vZGVsKFxuICAgICAgXCJiaW5kaW5nXCIsXG4gICAgICBULnVuaW9uKFxuICAgICAgICBcInR5cGVcIixcbiAgICAgICAgbWFwT2JqZWN0TWFwVmFsdWVzKFxuICAgICAgICAgIGJpbmRpbmdzLFxuICAgICAgICAgICh0eXBlLCB7IHByb3BzLCBtZXRhIH0pID0+IGNyZWF0ZUJpbmRpbmdWYWxpZGF0b3IodHlwZSwgcHJvcHMsIG1ldGEpXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0pLndpdGhEZWZhdWx0UHJvcGVydGllcygoKSA9PiAoe1xuICAgIG1ldGE6IHt9XG4gIH0pKTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZUJpbmRpbmdJZCxcbiAgY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uSWRzLFxuICBjcmVhdGVCaW5kaW5nUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlQmluZGluZ1JlY29yZFR5cGUsXG4gIGlzQmluZGluZyxcbiAgaXNCaW5kaW5nSWQsXG4gIHJvb3RCaW5kaW5nTWlncmF0aW9ucyxcbiAgcm9vdEJpbmRpbmdWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQmluZGluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraRecordType: () => (/* binding */ CameraRecordType),\n/* harmony export */   cameraMigrations: () => (/* binding */ cameraMigrations),\n/* harmony export */   cameraValidator: () => (/* binding */ cameraValidator),\n/* harmony export */   cameraVersions: () => (/* binding */ cameraVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst cameraValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"camera\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"camera\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"camera\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst cameraVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.camera\", {\n  AddMeta: 1\n});\nconst cameraMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.camera\",\n  recordType: \"camera\",\n  sequence: [\n    {\n      id: cameraVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst CameraRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"camera\", {\n  validator: cameraValidator,\n  scope: \"session\"\n}).withDefaultProperties(\n  () => ({\n    x: 0,\n    y: 0,\n    z: 1,\n    meta: {}\n  })\n);\n\n//# sourceMappingURL=TLCamera.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQ2FtZXJhLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSXVCO0FBQ2M7QUFDa0I7QUFDdkQsd0JBQXdCLHFEQUFPO0FBQy9CO0FBQ0EsRUFBRSxzREFBUTtBQUNWLGNBQWMsdURBQVM7QUFDdkIsUUFBUSxtRUFBVztBQUNuQixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLE9BQU8sc0RBQVE7QUFDZixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLHVCQUF1QixpRUFBa0I7QUFDekM7QUFDQSxDQUFDO0FBQ0QseUJBQXlCLDRFQUE2QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHlCQUF5QiwrREFBZ0I7QUFDekM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTENhbWVyYS5tanM/NjFjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuY29uc3QgY2FtZXJhVmFsaWRhdG9yID0gVC5tb2RlbChcbiAgXCJjYW1lcmFcIixcbiAgVC5vYmplY3Qoe1xuICAgIHR5cGVOYW1lOiBULmxpdGVyYWwoXCJjYW1lcmFcIiksXG4gICAgaWQ6IGlkVmFsaWRhdG9yKFwiY2FtZXJhXCIpLFxuICAgIHg6IFQubnVtYmVyLFxuICAgIHk6IFQubnVtYmVyLFxuICAgIHo6IFQubnVtYmVyLFxuICAgIG1ldGE6IFQuanNvblZhbHVlXG4gIH0pXG4pO1xuY29uc3QgY2FtZXJhVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3LmNhbWVyYVwiLCB7XG4gIEFkZE1ldGE6IDFcbn0pO1xuY29uc3QgY2FtZXJhTWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmNhbWVyYVwiLFxuICByZWNvcmRUeXBlOiBcImNhbWVyYVwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBjYW1lcmFWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgO1xuICAgICAgICByZWNvcmQubWV0YSA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBDYW1lcmFSZWNvcmRUeXBlID0gY3JlYXRlUmVjb3JkVHlwZShcImNhbWVyYVwiLCB7XG4gIHZhbGlkYXRvcjogY2FtZXJhVmFsaWRhdG9yLFxuICBzY29wZTogXCJzZXNzaW9uXCJcbn0pLndpdGhEZWZhdWx0UHJvcGVydGllcyhcbiAgKCkgPT4gKHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgejogMSxcbiAgICBtZXRhOiB7fVxuICB9KVxuKTtcbmV4cG9ydCB7XG4gIENhbWVyYVJlY29yZFR5cGUsXG4gIGNhbWVyYU1pZ3JhdGlvbnMsXG4gIGNhbWVyYVZhbGlkYXRvcixcbiAgY2FtZXJhVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTENhbWVyYS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentRecordType: () => (/* binding */ DocumentRecordType),\n/* harmony export */   TLDOCUMENT_ID: () => (/* binding */ TLDOCUMENT_ID),\n/* harmony export */   documentMigrations: () => (/* binding */ documentMigrations),\n/* harmony export */   documentValidator: () => (/* binding */ documentValidator),\n/* harmony export */   documentVersions: () => (/* binding */ documentVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\n\nconst documentValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"document\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"document\"),\n    id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"document:document\"),\n    gridSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst documentVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.document\", {\n  AddName: 1,\n  AddMeta: 2\n});\nconst documentMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.document\",\n  recordType: \"document\",\n  sequence: [\n    {\n      id: documentVersions.AddName,\n      up: (document) => {\n        ;\n        document.name = \"\";\n      },\n      down: (document) => {\n        delete document.name;\n      }\n    },\n    {\n      id: documentVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst DocumentRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"document\", {\n  validator: documentValidator,\n  scope: \"document\"\n}).withDefaultProperties(\n  () => ({\n    gridSize: 10,\n    name: \"\",\n    meta: {}\n  })\n);\nconst TLDOCUMENT_ID = DocumentRecordType.createId(\"document\");\n\n//# sourceMappingURL=TLDocument.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMRG9jdW1lbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNyQywwQkFBMEIscURBQU87QUFDakM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLHVEQUFTO0FBQ2pCLGNBQWMsc0RBQVE7QUFDdEIsVUFBVSxzREFBUTtBQUNsQixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLHlCQUF5QixpRUFBa0I7QUFDM0M7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsNEVBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMkJBQTJCLCtEQUFnQjtBQUMzQztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMRG9jdW1lbnQubWpzP2UyMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5jb25zdCBkb2N1bWVudFZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwiZG9jdW1lbnRcIixcbiAgVC5vYmplY3Qoe1xuICAgIHR5cGVOYW1lOiBULmxpdGVyYWwoXCJkb2N1bWVudFwiKSxcbiAgICBpZDogVC5saXRlcmFsKFwiZG9jdW1lbnQ6ZG9jdW1lbnRcIiksXG4gICAgZ3JpZFNpemU6IFQubnVtYmVyLFxuICAgIG5hbWU6IFQuc3RyaW5nLFxuICAgIG1ldGE6IFQuanNvblZhbHVlXG4gIH0pXG4pO1xuY29uc3QgZG9jdW1lbnRWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuZG9jdW1lbnRcIiwge1xuICBBZGROYW1lOiAxLFxuICBBZGRNZXRhOiAyXG59KTtcbmNvbnN0IGRvY3VtZW50TWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmRvY3VtZW50XCIsXG4gIHJlY29yZFR5cGU6IFwiZG9jdW1lbnRcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogZG9jdW1lbnRWZXJzaW9ucy5BZGROYW1lLFxuICAgICAgdXA6IChkb2N1bWVudCkgPT4ge1xuICAgICAgICA7XG4gICAgICAgIGRvY3VtZW50Lm5hbWUgPSBcIlwiO1xuICAgICAgfSxcbiAgICAgIGRvd246IChkb2N1bWVudCkgPT4ge1xuICAgICAgICBkZWxldGUgZG9jdW1lbnQubmFtZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBkb2N1bWVudFZlcnNpb25zLkFkZE1ldGEsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICA7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmNvbnN0IERvY3VtZW50UmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXCJkb2N1bWVudFwiLCB7XG4gIHZhbGlkYXRvcjogZG9jdW1lbnRWYWxpZGF0b3IsXG4gIHNjb3BlOiBcImRvY3VtZW50XCJcbn0pLndpdGhEZWZhdWx0UHJvcGVydGllcyhcbiAgKCkgPT4gKHtcbiAgICBncmlkU2l6ZTogMTAsXG4gICAgbmFtZTogXCJcIixcbiAgICBtZXRhOiB7fVxuICB9KVxuKTtcbmNvbnN0IFRMRE9DVU1FTlRfSUQgPSBEb2N1bWVudFJlY29yZFR5cGUuY3JlYXRlSWQoXCJkb2N1bWVudFwiKTtcbmV4cG9ydCB7XG4gIERvY3VtZW50UmVjb3JkVHlwZSxcbiAgVExET0NVTUVOVF9JRCxcbiAgZG9jdW1lbnRNaWdyYXRpb25zLFxuICBkb2N1bWVudFZhbGlkYXRvcixcbiAgZG9jdW1lbnRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRG9jdW1lbnQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLINSTANCE_ID: () => (/* binding */ TLINSTANCE_ID),\n/* harmony export */   createInstanceRecordType: () => (/* binding */ createInstanceRecordType),\n/* harmony export */   instanceIdValidator: () => (/* binding */ instanceIdValidator),\n/* harmony export */   instanceMigrations: () => (/* binding */ instanceMigrations),\n/* harmony export */   instanceVersions: () => (/* binding */ instanceVersions),\n/* harmony export */   pluckPreservingValues: () => (/* binding */ pluckPreservingValues),\n/* harmony export */   shouldKeyBePreservedBetweenSessions: () => (/* binding */ shouldKeyBePreservedBetweenSessions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n/* harmony import */ var _TLPage_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n\n\n\n\n\n\n\n\n\nconst shouldKeyBePreservedBetweenSessions = {\n  // This object defines keys that should be preserved across calls to loadSnapshot()\n  id: false,\n  // meta\n  typeName: false,\n  // meta\n  currentPageId: false,\n  // does not preserve because who knows if the page still exists\n  opacityForNextShape: false,\n  // does not preserve because it's a temporary state\n  stylesForNextShape: false,\n  // does not preserve because it's a temporary state\n  followingUserId: false,\n  // does not preserve because it's a temporary state\n  highlightedUserIds: false,\n  // does not preserve because it's a temporary state\n  brush: false,\n  // does not preserve because it's a temporary state\n  cursor: false,\n  // does not preserve because it's a temporary state\n  scribbles: false,\n  // does not preserve because it's a temporary state\n  isFocusMode: true,\n  // preserves because it's a user preference\n  isDebugMode: true,\n  // preserves because it's a user preference\n  isToolLocked: true,\n  // preserves because it's a user preference\n  exportBackground: true,\n  // preserves because it's a user preference\n  screenBounds: true,\n  // preserves because it's capturing the user's screen state\n  insets: true,\n  // preserves because it's capturing the user's screen state\n  zoomBrush: false,\n  // does not preserve because it's a temporary state\n  chatMessage: false,\n  // does not preserve because it's a temporary state\n  isChatting: false,\n  // does not preserve because it's a temporary state\n  isPenMode: false,\n  // does not preserve because it's a temporary state\n  isGridMode: true,\n  // preserves because it's a user preference\n  isFocused: true,\n  // preserves because obviously\n  devicePixelRatio: true,\n  // preserves because it captures the user's screen state\n  isCoarsePointer: true,\n  // preserves because it captures the user's screen state\n  isHoveringCanvas: false,\n  // does not preserve because it's a temporary state\n  openMenus: false,\n  // does not preserve because it's a temporary state\n  isChangingStyle: false,\n  // does not preserve because it's a temporary state\n  isReadonly: true,\n  // preserves because it's a config option\n  meta: false,\n  // does not preserve because who knows what's in there, leave it up to sdk users to save and reinstate\n  duplicateProps: false\n  //\n};\nfunction pluckPreservingValues(val) {\n  return val ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(val, (key) => {\n    return shouldKeyBePreservedBetweenSessions[key];\n  }) : null;\n}\nconst instanceIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"instance\");\nfunction createInstanceRecordType(stylesById) {\n  const stylesForNextShapeValidators = {};\n  for (const [id, style] of stylesById) {\n    stylesForNextShapeValidators[id] = _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.optional(style);\n  }\n  const instanceTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n    \"instance\",\n    _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n      typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.literal(\"instance\"),\n      id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"instance\"),\n      currentPageId: _TLPage_mjs__WEBPACK_IMPORTED_MODULE_8__.pageIdValidator,\n      followingUserId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string.nullable(),\n      brush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator.nullable(),\n      opacityForNextShape: _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_6__.opacityValidator,\n      stylesForNextShape: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object(stylesForNextShapeValidators),\n      cursor: _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_5__.cursorValidator,\n      scribbles: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_7__.scribbleValidator),\n      isFocusMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isDebugMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isToolLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      exportBackground: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      screenBounds: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator,\n      insets: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean),\n      zoomBrush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator.nullable(),\n      isPenMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isGridMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      chatMessage: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string,\n      isChatting: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      highlightedUserIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string),\n      isFocused: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      devicePixelRatio: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number,\n      isCoarsePointer: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isHoveringCanvas: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean.nullable(),\n      openMenus: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string),\n      isChangingStyle: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isReadonly: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.jsonValue,\n      duplicateProps: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n        shapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf((0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"shape\")),\n        offset: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n          x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number,\n          y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number\n        })\n      }).nullable()\n    })\n  );\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"instance\", {\n    validator: instanceTypeValidator,\n    scope: \"session\",\n    ephemeralKeys: {\n      currentPageId: false,\n      meta: false,\n      followingUserId: true,\n      opacityForNextShape: true,\n      stylesForNextShape: true,\n      brush: true,\n      cursor: true,\n      scribbles: true,\n      isFocusMode: true,\n      isDebugMode: true,\n      isToolLocked: true,\n      exportBackground: true,\n      screenBounds: true,\n      insets: true,\n      zoomBrush: true,\n      isPenMode: true,\n      isGridMode: true,\n      chatMessage: true,\n      isChatting: true,\n      highlightedUserIds: true,\n      isFocused: true,\n      devicePixelRatio: true,\n      isCoarsePointer: true,\n      isHoveringCanvas: true,\n      openMenus: true,\n      isChangingStyle: true,\n      isReadonly: true,\n      duplicateProps: true\n    }\n  }).withDefaultProperties(\n    () => ({\n      followingUserId: null,\n      opacityForNextShape: 1,\n      stylesForNextShape: {},\n      brush: null,\n      scribbles: [],\n      cursor: {\n        type: \"default\",\n        rotation: 0\n      },\n      isFocusMode: false,\n      exportBackground: false,\n      isDebugMode: false,\n      isToolLocked: false,\n      screenBounds: { x: 0, y: 0, w: 1080, h: 720 },\n      insets: [false, false, false, false],\n      zoomBrush: null,\n      isGridMode: false,\n      isPenMode: false,\n      chatMessage: \"\",\n      isChatting: false,\n      highlightedUserIds: [],\n      isFocused: false,\n      devicePixelRatio: typeof window === \"undefined\" ? 1 : window.devicePixelRatio,\n      isCoarsePointer: false,\n      isHoveringCanvas: null,\n      openMenus: [],\n      isChangingStyle: false,\n      isReadonly: false,\n      meta: {},\n      duplicateProps: null\n    })\n  );\n}\nconst instanceVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance\", {\n  AddTransparentExportBgs: 1,\n  RemoveDialog: 2,\n  AddToolLockMode: 3,\n  RemoveExtraPropsForNextShape: 4,\n  AddLabelColor: 5,\n  AddFollowingUserId: 6,\n  RemoveAlignJustify: 7,\n  AddZoom: 8,\n  AddVerticalAlign: 9,\n  AddScribbleDelay: 10,\n  RemoveUserId: 11,\n  AddIsPenModeAndIsGridMode: 12,\n  HoistOpacity: 13,\n  AddChat: 14,\n  AddHighlightedUserIds: 15,\n  ReplacePropsForNextShapeWithStylesForNextShape: 16,\n  AddMeta: 17,\n  RemoveCursorColor: 18,\n  AddLonelyProperties: 19,\n  ReadOnlyReadonly: 20,\n  AddHoveringCanvas: 21,\n  AddScribbles: 22,\n  AddInset: 23,\n  AddDuplicateProps: 24,\n  RemoveCanMoveCamera: 25\n});\nconst instanceMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance\",\n  recordType: \"instance\",\n  sequence: [\n    {\n      id: instanceVersions.AddTransparentExportBgs,\n      up: (instance) => {\n        return { ...instance, exportBackground: true };\n      }\n    },\n    {\n      id: instanceVersions.RemoveDialog,\n      up: ({ dialog: _, ...instance }) => {\n        return instance;\n      }\n    },\n    {\n      id: instanceVersions.AddToolLockMode,\n      up: (instance) => {\n        return { ...instance, isToolLocked: false };\n      }\n    },\n    {\n      id: instanceVersions.RemoveExtraPropsForNextShape,\n      up: ({ propsForNextShape, ...instance }) => {\n        return {\n          ...instance,\n          propsForNextShape: Object.fromEntries(\n            Object.entries(propsForNextShape).filter(\n              ([key]) => [\n                \"color\",\n                \"labelColor\",\n                \"dash\",\n                \"fill\",\n                \"size\",\n                \"font\",\n                \"align\",\n                \"verticalAlign\",\n                \"icon\",\n                \"geo\",\n                \"arrowheadStart\",\n                \"arrowheadEnd\",\n                \"spline\"\n              ].includes(key)\n            )\n          )\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddLabelColor,\n      up: ({ propsForNextShape, ...instance }) => {\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...propsForNextShape,\n            labelColor: \"black\"\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddFollowingUserId,\n      up: (instance) => {\n        return { ...instance, followingUserId: null };\n      }\n    },\n    {\n      id: instanceVersions.RemoveAlignJustify,\n      up: (instance) => {\n        let newAlign = instance.propsForNextShape.align;\n        if (newAlign === \"justify\") {\n          newAlign = \"start\";\n        }\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...instance.propsForNextShape,\n            align: newAlign\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddZoom,\n      up: (instance) => {\n        return { ...instance, zoomBrush: null };\n      }\n    },\n    {\n      id: instanceVersions.AddVerticalAlign,\n      up: (instance) => {\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...instance.propsForNextShape,\n            verticalAlign: \"middle\"\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddScribbleDelay,\n      up: (instance) => {\n        if (instance.scribble !== null) {\n          return { ...instance, scribble: { ...instance.scribble, delay: 0 } };\n        }\n        return { ...instance };\n      }\n    },\n    {\n      id: instanceVersions.RemoveUserId,\n      up: ({ userId: _, ...instance }) => {\n        return instance;\n      }\n    },\n    {\n      id: instanceVersions.AddIsPenModeAndIsGridMode,\n      up: (instance) => {\n        return { ...instance, isPenMode: false, isGridMode: false };\n      }\n    },\n    {\n      id: instanceVersions.HoistOpacity,\n      up: ({ propsForNextShape: { opacity, ...propsForNextShape }, ...instance }) => {\n        return { ...instance, opacityForNextShape: Number(opacity ?? \"1\"), propsForNextShape };\n      }\n    },\n    {\n      id: instanceVersions.AddChat,\n      up: (instance) => {\n        return { ...instance, chatMessage: \"\", isChatting: false };\n      }\n    },\n    {\n      id: instanceVersions.AddHighlightedUserIds,\n      up: (instance) => {\n        return { ...instance, highlightedUserIds: [] };\n      }\n    },\n    {\n      id: instanceVersions.ReplacePropsForNextShapeWithStylesForNextShape,\n      up: ({ propsForNextShape: _, ...instance }) => {\n        return { ...instance, stylesForNextShape: {} };\n      }\n    },\n    {\n      id: instanceVersions.AddMeta,\n      up: (record) => {\n        return {\n          ...record,\n          meta: {}\n        };\n      }\n    },\n    {\n      id: instanceVersions.RemoveCursorColor,\n      up: (record) => {\n        const { color: _, ...cursor } = record.cursor;\n        return {\n          ...record,\n          cursor\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddLonelyProperties,\n      up: (record) => {\n        return {\n          ...record,\n          canMoveCamera: true,\n          isFocused: false,\n          devicePixelRatio: 1,\n          isCoarsePointer: false,\n          openMenus: [],\n          isChangingStyle: false,\n          isReadOnly: false\n        };\n      }\n    },\n    {\n      id: instanceVersions.ReadOnlyReadonly,\n      up: ({ isReadOnly: _isReadOnly, ...record }) => {\n        return {\n          ...record,\n          isReadonly: _isReadOnly\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddHoveringCanvas,\n      up: (record) => {\n        return {\n          ...record,\n          isHoveringCanvas: null\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddScribbles,\n      up: ({ scribble: _, ...record }) => {\n        return {\n          ...record,\n          scribbles: []\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddInset,\n      up: (record) => {\n        return {\n          ...record,\n          insets: [false, false, false, false]\n        };\n      },\n      down: ({ insets: _, ...record }) => {\n        return {\n          ...record\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddDuplicateProps,\n      up: (record) => {\n        return {\n          ...record,\n          duplicateProps: null\n        };\n      },\n      down: ({ duplicateProps: _, ...record }) => {\n        return {\n          ...record\n        };\n      }\n    },\n    {\n      id: instanceVersions.RemoveCanMoveCamera,\n      up: ({ canMoveCamera: _, ...record }) => {\n        return {\n          ...record\n        };\n      },\n      down: (instance) => {\n        return { ...instance, canMoveCamera: true };\n      }\n    }\n  ]\n});\nconst TLINSTANCE_ID = \"instance:instance\";\n\n//# sourceMappingURL=TLInstance.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMSW5zdGFuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJdUI7QUFDdUI7QUFDVDtBQUMwQjtBQUNSO0FBQ0E7QUFDRTtBQUNFO0FBQ1o7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFhO0FBQzVCO0FBQ0EsR0FBRztBQUNIO0FBQ0EsNEJBQTRCLG1FQUFXO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx3REFBVTtBQUNqRDtBQUNBLGdDQUFnQyxxREFBTztBQUN2QztBQUNBLElBQUksc0RBQVE7QUFDWixnQkFBZ0IsdURBQVM7QUFDekIsVUFBVSxtRUFBVztBQUNyQixxQkFBcUIsd0RBQWU7QUFDcEMsdUJBQXVCLHNEQUFRO0FBQy9CLGFBQWEsdUVBQWlCO0FBQzlCLDJCQUEyQixpRUFBZ0I7QUFDM0MsMEJBQTBCLHNEQUFRO0FBQ2xDLGNBQWMsK0RBQWU7QUFDN0IsaUJBQWlCLHVEQUFTLENBQUMsbUVBQWlCO0FBQzVDLG1CQUFtQix1REFBUztBQUM1QixtQkFBbUIsdURBQVM7QUFDNUIsb0JBQW9CLHVEQUFTO0FBQzdCLHdCQUF3Qix1REFBUztBQUNqQyxvQkFBb0IsdUVBQWlCO0FBQ3JDLGNBQWMsdURBQVMsQ0FBQyx1REFBUztBQUNqQyxpQkFBaUIsdUVBQWlCO0FBQ2xDLGlCQUFpQix1REFBUztBQUMxQixrQkFBa0IsdURBQVM7QUFDM0IsbUJBQW1CLHNEQUFRO0FBQzNCLGtCQUFrQix1REFBUztBQUMzQiwwQkFBMEIsdURBQVMsQ0FBQyxzREFBUTtBQUM1QyxpQkFBaUIsdURBQVM7QUFDMUIsd0JBQXdCLHNEQUFRO0FBQ2hDLHVCQUF1Qix1REFBUztBQUNoQyx3QkFBd0IsdURBQVM7QUFDakMsaUJBQWlCLHVEQUFTLENBQUMsc0RBQVE7QUFDbkMsdUJBQXVCLHVEQUFTO0FBQ2hDLGtCQUFrQix1REFBUztBQUMzQixZQUFZLHlEQUFXO0FBQ3ZCLHNCQUFzQixzREFBUTtBQUM5QixrQkFBa0IsdURBQVMsQ0FBQyxtRUFBVztBQUN2QyxnQkFBZ0Isc0RBQVE7QUFDeEIsYUFBYSxzREFBUTtBQUNyQixhQUFhLHNEQUFRO0FBQ3JCLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsU0FBUywrREFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2QkFBNkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLGlFQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsNEVBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsZ0NBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsZ0NBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsd0JBQXdCO0FBQ3JDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLHFCQUFxQiwrQkFBK0IsZUFBZTtBQUNoRixpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSxtQ0FBbUM7QUFDaEQsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsb0NBQW9DO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxlQUFlLDhCQUE4QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSw2QkFBNkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQVNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHMvVExJbnN0YW5jZS5tanM/ZjdhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBmaWx0ZXJFbnRyaWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgYm94TW9kZWxWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9nZW9tZXRyeS10eXBlcy5tanNcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuaW1wb3J0IHsgY3Vyc29yVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExDdXJzb3IubWpzXCI7XG5pbXBvcnQgeyBvcGFjaXR5VmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExPcGFjaXR5Lm1qc1wiO1xuaW1wb3J0IHsgc2NyaWJibGVWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9UTFNjcmliYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFnZUlkVmFsaWRhdG9yIH0gZnJvbSBcIi4vVExQYWdlLm1qc1wiO1xuY29uc3Qgc2hvdWxkS2V5QmVQcmVzZXJ2ZWRCZXR3ZWVuU2Vzc2lvbnMgPSB7XG4gIC8vIFRoaXMgb2JqZWN0IGRlZmluZXMga2V5cyB0aGF0IHNob3VsZCBiZSBwcmVzZXJ2ZWQgYWNyb3NzIGNhbGxzIHRvIGxvYWRTbmFwc2hvdCgpXG4gIGlkOiBmYWxzZSxcbiAgLy8gbWV0YVxuICB0eXBlTmFtZTogZmFsc2UsXG4gIC8vIG1ldGFcbiAgY3VycmVudFBhZ2VJZDogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2Ugd2hvIGtub3dzIGlmIHRoZSBwYWdlIHN0aWxsIGV4aXN0c1xuICBvcGFjaXR5Rm9yTmV4dFNoYXBlOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIHN0eWxlc0Zvck5leHRTaGFwZTogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBmb2xsb3dpbmdVc2VySWQ6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgaGlnaGxpZ2h0ZWRVc2VySWRzOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGJydXNoOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGN1cnNvcjogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBzY3JpYmJsZXM6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgaXNGb2N1c01vZGU6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0J3MgYSB1c2VyIHByZWZlcmVuY2VcbiAgaXNEZWJ1Z01vZGU6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0J3MgYSB1c2VyIHByZWZlcmVuY2VcbiAgaXNUb29sTG9ja2VkOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgdXNlciBwcmVmZXJlbmNlXG4gIGV4cG9ydEJhY2tncm91bmQ6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0J3MgYSB1c2VyIHByZWZlcmVuY2VcbiAgc2NyZWVuQm91bmRzOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGNhcHR1cmluZyB0aGUgdXNlcidzIHNjcmVlbiBzdGF0ZVxuICBpbnNldHM6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0J3MgY2FwdHVyaW5nIHRoZSB1c2VyJ3Mgc2NyZWVuIHN0YXRlXG4gIHpvb21CcnVzaDogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBjaGF0TWVzc2FnZTogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBpc0NoYXR0aW5nOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGlzUGVuTW9kZTogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBpc0dyaWRNb2RlOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgdXNlciBwcmVmZXJlbmNlXG4gIGlzRm9jdXNlZDogdHJ1ZSxcbiAgLy8gcHJlc2VydmVzIGJlY2F1c2Ugb2J2aW91c2x5XG4gIGRldmljZVBpeGVsUmF0aW86IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0IGNhcHR1cmVzIHRoZSB1c2VyJ3Mgc2NyZWVuIHN0YXRlXG4gIGlzQ29hcnNlUG9pbnRlcjogdHJ1ZSxcbiAgLy8gcHJlc2VydmVzIGJlY2F1c2UgaXQgY2FwdHVyZXMgdGhlIHVzZXIncyBzY3JlZW4gc3RhdGVcbiAgaXNIb3ZlcmluZ0NhbnZhczogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBvcGVuTWVudXM6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgaXNDaGFuZ2luZ1N0eWxlOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGlzUmVhZG9ubHk6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0J3MgYSBjb25maWcgb3B0aW9uXG4gIG1ldGE6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIHdobyBrbm93cyB3aGF0J3MgaW4gdGhlcmUsIGxlYXZlIGl0IHVwIHRvIHNkayB1c2VycyB0byBzYXZlIGFuZCByZWluc3RhdGVcbiAgZHVwbGljYXRlUHJvcHM6IGZhbHNlXG4gIC8vXG59O1xuZnVuY3Rpb24gcGx1Y2tQcmVzZXJ2aW5nVmFsdWVzKHZhbCkge1xuICByZXR1cm4gdmFsID8gZmlsdGVyRW50cmllcyh2YWwsIChrZXkpID0+IHtcbiAgICByZXR1cm4gc2hvdWxkS2V5QmVQcmVzZXJ2ZWRCZXR3ZWVuU2Vzc2lvbnNba2V5XTtcbiAgfSkgOiBudWxsO1xufVxuY29uc3QgaW5zdGFuY2VJZFZhbGlkYXRvciA9IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VcIik7XG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVJlY29yZFR5cGUoc3R5bGVzQnlJZCkge1xuICBjb25zdCBzdHlsZXNGb3JOZXh0U2hhcGVWYWxpZGF0b3JzID0ge307XG4gIGZvciAoY29uc3QgW2lkLCBzdHlsZV0gb2Ygc3R5bGVzQnlJZCkge1xuICAgIHN0eWxlc0Zvck5leHRTaGFwZVZhbGlkYXRvcnNbaWRdID0gVC5vcHRpb25hbChzdHlsZSk7XG4gIH1cbiAgY29uc3QgaW5zdGFuY2VUeXBlVmFsaWRhdG9yID0gVC5tb2RlbChcbiAgICBcImluc3RhbmNlXCIsXG4gICAgVC5vYmplY3Qoe1xuICAgICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImluc3RhbmNlXCIpLFxuICAgICAgaWQ6IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VcIiksXG4gICAgICBjdXJyZW50UGFnZUlkOiBwYWdlSWRWYWxpZGF0b3IsXG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IFQuc3RyaW5nLm51bGxhYmxlKCksXG4gICAgICBicnVzaDogYm94TW9kZWxWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgICAgIG9wYWNpdHlGb3JOZXh0U2hhcGU6IG9wYWNpdHlWYWxpZGF0b3IsXG4gICAgICBzdHlsZXNGb3JOZXh0U2hhcGU6IFQub2JqZWN0KHN0eWxlc0Zvck5leHRTaGFwZVZhbGlkYXRvcnMpLFxuICAgICAgY3Vyc29yOiBjdXJzb3JWYWxpZGF0b3IsXG4gICAgICBzY3JpYmJsZXM6IFQuYXJyYXlPZihzY3JpYmJsZVZhbGlkYXRvciksXG4gICAgICBpc0ZvY3VzTW9kZTogVC5ib29sZWFuLFxuICAgICAgaXNEZWJ1Z01vZGU6IFQuYm9vbGVhbixcbiAgICAgIGlzVG9vbExvY2tlZDogVC5ib29sZWFuLFxuICAgICAgZXhwb3J0QmFja2dyb3VuZDogVC5ib29sZWFuLFxuICAgICAgc2NyZWVuQm91bmRzOiBib3hNb2RlbFZhbGlkYXRvcixcbiAgICAgIGluc2V0czogVC5hcnJheU9mKFQuYm9vbGVhbiksXG4gICAgICB6b29tQnJ1c2g6IGJveE1vZGVsVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgICBpc1Blbk1vZGU6IFQuYm9vbGVhbixcbiAgICAgIGlzR3JpZE1vZGU6IFQuYm9vbGVhbixcbiAgICAgIGNoYXRNZXNzYWdlOiBULnN0cmluZyxcbiAgICAgIGlzQ2hhdHRpbmc6IFQuYm9vbGVhbixcbiAgICAgIGhpZ2hsaWdodGVkVXNlcklkczogVC5hcnJheU9mKFQuc3RyaW5nKSxcbiAgICAgIGlzRm9jdXNlZDogVC5ib29sZWFuLFxuICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogVC5udW1iZXIsXG4gICAgICBpc0NvYXJzZVBvaW50ZXI6IFQuYm9vbGVhbixcbiAgICAgIGlzSG92ZXJpbmdDYW52YXM6IFQuYm9vbGVhbi5udWxsYWJsZSgpLFxuICAgICAgb3Blbk1lbnVzOiBULmFycmF5T2YoVC5zdHJpbmcpLFxuICAgICAgaXNDaGFuZ2luZ1N0eWxlOiBULmJvb2xlYW4sXG4gICAgICBpc1JlYWRvbmx5OiBULmJvb2xlYW4sXG4gICAgICBtZXRhOiBULmpzb25WYWx1ZSxcbiAgICAgIGR1cGxpY2F0ZVByb3BzOiBULm9iamVjdCh7XG4gICAgICAgIHNoYXBlSWRzOiBULmFycmF5T2YoaWRWYWxpZGF0b3IoXCJzaGFwZVwiKSksXG4gICAgICAgIG9mZnNldDogVC5vYmplY3Qoe1xuICAgICAgICAgIHg6IFQubnVtYmVyLFxuICAgICAgICAgIHk6IFQubnVtYmVyXG4gICAgICAgIH0pXG4gICAgICB9KS5udWxsYWJsZSgpXG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIGNyZWF0ZVJlY29yZFR5cGUoXCJpbnN0YW5jZVwiLCB7XG4gICAgdmFsaWRhdG9yOiBpbnN0YW5jZVR5cGVWYWxpZGF0b3IsXG4gICAgc2NvcGU6IFwic2Vzc2lvblwiLFxuICAgIGVwaGVtZXJhbEtleXM6IHtcbiAgICAgIGN1cnJlbnRQYWdlSWQ6IGZhbHNlLFxuICAgICAgbWV0YTogZmFsc2UsXG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IHRydWUsXG4gICAgICBvcGFjaXR5Rm9yTmV4dFNoYXBlOiB0cnVlLFxuICAgICAgc3R5bGVzRm9yTmV4dFNoYXBlOiB0cnVlLFxuICAgICAgYnJ1c2g6IHRydWUsXG4gICAgICBjdXJzb3I6IHRydWUsXG4gICAgICBzY3JpYmJsZXM6IHRydWUsXG4gICAgICBpc0ZvY3VzTW9kZTogdHJ1ZSxcbiAgICAgIGlzRGVidWdNb2RlOiB0cnVlLFxuICAgICAgaXNUb29sTG9ja2VkOiB0cnVlLFxuICAgICAgZXhwb3J0QmFja2dyb3VuZDogdHJ1ZSxcbiAgICAgIHNjcmVlbkJvdW5kczogdHJ1ZSxcbiAgICAgIGluc2V0czogdHJ1ZSxcbiAgICAgIHpvb21CcnVzaDogdHJ1ZSxcbiAgICAgIGlzUGVuTW9kZTogdHJ1ZSxcbiAgICAgIGlzR3JpZE1vZGU6IHRydWUsXG4gICAgICBjaGF0TWVzc2FnZTogdHJ1ZSxcbiAgICAgIGlzQ2hhdHRpbmc6IHRydWUsXG4gICAgICBoaWdobGlnaHRlZFVzZXJJZHM6IHRydWUsXG4gICAgICBpc0ZvY3VzZWQ6IHRydWUsXG4gICAgICBkZXZpY2VQaXhlbFJhdGlvOiB0cnVlLFxuICAgICAgaXNDb2Fyc2VQb2ludGVyOiB0cnVlLFxuICAgICAgaXNIb3ZlcmluZ0NhbnZhczogdHJ1ZSxcbiAgICAgIG9wZW5NZW51czogdHJ1ZSxcbiAgICAgIGlzQ2hhbmdpbmdTdHlsZTogdHJ1ZSxcbiAgICAgIGlzUmVhZG9ubHk6IHRydWUsXG4gICAgICBkdXBsaWNhdGVQcm9wczogdHJ1ZVxuICAgIH1cbiAgfSkud2l0aERlZmF1bHRQcm9wZXJ0aWVzKFxuICAgICgpID0+ICh7XG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IG51bGwsXG4gICAgICBvcGFjaXR5Rm9yTmV4dFNoYXBlOiAxLFxuICAgICAgc3R5bGVzRm9yTmV4dFNoYXBlOiB7fSxcbiAgICAgIGJydXNoOiBudWxsLFxuICAgICAgc2NyaWJibGVzOiBbXSxcbiAgICAgIGN1cnNvcjoge1xuICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgcm90YXRpb246IDBcbiAgICAgIH0sXG4gICAgICBpc0ZvY3VzTW9kZTogZmFsc2UsXG4gICAgICBleHBvcnRCYWNrZ3JvdW5kOiBmYWxzZSxcbiAgICAgIGlzRGVidWdNb2RlOiBmYWxzZSxcbiAgICAgIGlzVG9vbExvY2tlZDogZmFsc2UsXG4gICAgICBzY3JlZW5Cb3VuZHM6IHsgeDogMCwgeTogMCwgdzogMTA4MCwgaDogNzIwIH0sXG4gICAgICBpbnNldHM6IFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV0sXG4gICAgICB6b29tQnJ1c2g6IG51bGwsXG4gICAgICBpc0dyaWRNb2RlOiBmYWxzZSxcbiAgICAgIGlzUGVuTW9kZTogZmFsc2UsXG4gICAgICBjaGF0TWVzc2FnZTogXCJcIixcbiAgICAgIGlzQ2hhdHRpbmc6IGZhbHNlLFxuICAgICAgaGlnaGxpZ2h0ZWRVc2VySWRzOiBbXSxcbiAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICBkZXZpY2VQaXhlbFJhdGlvOiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gMSA6IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgaXNDb2Fyc2VQb2ludGVyOiBmYWxzZSxcbiAgICAgIGlzSG92ZXJpbmdDYW52YXM6IG51bGwsXG4gICAgICBvcGVuTWVudXM6IFtdLFxuICAgICAgaXNDaGFuZ2luZ1N0eWxlOiBmYWxzZSxcbiAgICAgIGlzUmVhZG9ubHk6IGZhbHNlLFxuICAgICAgbWV0YToge30sXG4gICAgICBkdXBsaWNhdGVQcm9wczogbnVsbFxuICAgIH0pXG4gICk7XG59XG5jb25zdCBpbnN0YW5jZVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5pbnN0YW5jZVwiLCB7XG4gIEFkZFRyYW5zcGFyZW50RXhwb3J0QmdzOiAxLFxuICBSZW1vdmVEaWFsb2c6IDIsXG4gIEFkZFRvb2xMb2NrTW9kZTogMyxcbiAgUmVtb3ZlRXh0cmFQcm9wc0Zvck5leHRTaGFwZTogNCxcbiAgQWRkTGFiZWxDb2xvcjogNSxcbiAgQWRkRm9sbG93aW5nVXNlcklkOiA2LFxuICBSZW1vdmVBbGlnbkp1c3RpZnk6IDcsXG4gIEFkZFpvb206IDgsXG4gIEFkZFZlcnRpY2FsQWxpZ246IDksXG4gIEFkZFNjcmliYmxlRGVsYXk6IDEwLFxuICBSZW1vdmVVc2VySWQ6IDExLFxuICBBZGRJc1Blbk1vZGVBbmRJc0dyaWRNb2RlOiAxMixcbiAgSG9pc3RPcGFjaXR5OiAxMyxcbiAgQWRkQ2hhdDogMTQsXG4gIEFkZEhpZ2hsaWdodGVkVXNlcklkczogMTUsXG4gIFJlcGxhY2VQcm9wc0Zvck5leHRTaGFwZVdpdGhTdHlsZXNGb3JOZXh0U2hhcGU6IDE2LFxuICBBZGRNZXRhOiAxNyxcbiAgUmVtb3ZlQ3Vyc29yQ29sb3I6IDE4LFxuICBBZGRMb25lbHlQcm9wZXJ0aWVzOiAxOSxcbiAgUmVhZE9ubHlSZWFkb25seTogMjAsXG4gIEFkZEhvdmVyaW5nQ2FudmFzOiAyMSxcbiAgQWRkU2NyaWJibGVzOiAyMixcbiAgQWRkSW5zZXQ6IDIzLFxuICBBZGREdXBsaWNhdGVQcm9wczogMjQsXG4gIFJlbW92ZUNhbk1vdmVDYW1lcmE6IDI1XG59KTtcbmNvbnN0IGluc3RhbmNlTWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3Lmluc3RhbmNlXCIsXG4gIHJlY29yZFR5cGU6IFwiaW5zdGFuY2VcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRUcmFuc3BhcmVudEV4cG9ydEJncyxcbiAgICAgIHVwOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5zdGFuY2UsIGV4cG9ydEJhY2tncm91bmQ6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLlJlbW92ZURpYWxvZyxcbiAgICAgIHVwOiAoeyBkaWFsb2c6IF8sIC4uLmluc3RhbmNlIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkVG9vbExvY2tNb2RlLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgaXNUb29sTG9ja2VkOiBmYWxzZSB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVtb3ZlRXh0cmFQcm9wc0Zvck5leHRTaGFwZSxcbiAgICAgIHVwOiAoeyBwcm9wc0Zvck5leHRTaGFwZSwgLi4uaW5zdGFuY2UgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmluc3RhbmNlLFxuICAgICAgICAgIHByb3BzRm9yTmV4dFNoYXBlOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhwcm9wc0Zvck5leHRTaGFwZSkuZmlsdGVyKFxuICAgICAgICAgICAgICAoW2tleV0pID0+IFtcbiAgICAgICAgICAgICAgICBcImNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJsYWJlbENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJkYXNoXCIsXG4gICAgICAgICAgICAgICAgXCJmaWxsXCIsXG4gICAgICAgICAgICAgICAgXCJzaXplXCIsXG4gICAgICAgICAgICAgICAgXCJmb250XCIsXG4gICAgICAgICAgICAgICAgXCJhbGlnblwiLFxuICAgICAgICAgICAgICAgIFwidmVydGljYWxBbGlnblwiLFxuICAgICAgICAgICAgICAgIFwiaWNvblwiLFxuICAgICAgICAgICAgICAgIFwiZ2VvXCIsXG4gICAgICAgICAgICAgICAgXCJhcnJvd2hlYWRTdGFydFwiLFxuICAgICAgICAgICAgICAgIFwiYXJyb3doZWFkRW5kXCIsXG4gICAgICAgICAgICAgICAgXCJzcGxpbmVcIlxuICAgICAgICAgICAgICBdLmluY2x1ZGVzKGtleSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRMYWJlbENvbG9yLFxuICAgICAgdXA6ICh7IHByb3BzRm9yTmV4dFNoYXBlLCAuLi5pbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaW5zdGFuY2UsXG4gICAgICAgICAgcHJvcHNGb3JOZXh0U2hhcGU6IHtcbiAgICAgICAgICAgIC4uLnByb3BzRm9yTmV4dFNoYXBlLFxuICAgICAgICAgICAgbGFiZWxDb2xvcjogXCJibGFja1wiXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkRm9sbG93aW5nVXNlcklkLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgZm9sbG93aW5nVXNlcklkOiBudWxsIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5SZW1vdmVBbGlnbkp1c3RpZnksXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGxldCBuZXdBbGlnbiA9IGluc3RhbmNlLnByb3BzRm9yTmV4dFNoYXBlLmFsaWduO1xuICAgICAgICBpZiAobmV3QWxpZ24gPT09IFwianVzdGlmeVwiKSB7XG4gICAgICAgICAgbmV3QWxpZ24gPSBcInN0YXJ0XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5pbnN0YW5jZSxcbiAgICAgICAgICBwcm9wc0Zvck5leHRTaGFwZToge1xuICAgICAgICAgICAgLi4uaW5zdGFuY2UucHJvcHNGb3JOZXh0U2hhcGUsXG4gICAgICAgICAgICBhbGlnbjogbmV3QWxpZ25cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRab29tLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgem9vbUJydXNoOiBudWxsIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRWZXJ0aWNhbEFsaWduLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmluc3RhbmNlLFxuICAgICAgICAgIHByb3BzRm9yTmV4dFNoYXBlOiB7XG4gICAgICAgICAgICAuLi5pbnN0YW5jZS5wcm9wc0Zvck5leHRTaGFwZSxcbiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCJcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRTY3JpYmJsZURlbGF5LFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2Uuc2NyaWJibGUgIT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgc2NyaWJibGU6IHsgLi4uaW5zdGFuY2Uuc2NyaWJibGUsIGRlbGF5OiAwIH0gfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVtb3ZlVXNlcklkLFxuICAgICAgdXA6ICh7IHVzZXJJZDogXywgLi4uaW5zdGFuY2UgfSkgPT4ge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRJc1Blbk1vZGVBbmRJc0dyaWRNb2RlLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgaXNQZW5Nb2RlOiBmYWxzZSwgaXNHcmlkTW9kZTogZmFsc2UgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkhvaXN0T3BhY2l0eSxcbiAgICAgIHVwOiAoeyBwcm9wc0Zvck5leHRTaGFwZTogeyBvcGFjaXR5LCAuLi5wcm9wc0Zvck5leHRTaGFwZSB9LCAuLi5pbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBvcGFjaXR5Rm9yTmV4dFNoYXBlOiBOdW1iZXIob3BhY2l0eSA/PyBcIjFcIiksIHByb3BzRm9yTmV4dFNoYXBlIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRDaGF0LFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgY2hhdE1lc3NhZ2U6IFwiXCIsIGlzQ2hhdHRpbmc6IGZhbHNlIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRIaWdobGlnaHRlZFVzZXJJZHMsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBoaWdobGlnaHRlZFVzZXJJZHM6IFtdIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5SZXBsYWNlUHJvcHNGb3JOZXh0U2hhcGVXaXRoU3R5bGVzRm9yTmV4dFNoYXBlLFxuICAgICAgdXA6ICh7IHByb3BzRm9yTmV4dFNoYXBlOiBfLCAuLi5pbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBzdHlsZXNGb3JOZXh0U2hhcGU6IHt9IH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgbWV0YToge31cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLlJlbW92ZUN1cnNvckNvbG9yLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb2xvcjogXywgLi4uY3Vyc29yIH0gPSByZWNvcmQuY3Vyc29yO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBjdXJzb3JcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZExvbmVseVByb3BlcnRpZXMsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBjYW5Nb3ZlQ2FtZXJhOiB0cnVlLFxuICAgICAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogMSxcbiAgICAgICAgICBpc0NvYXJzZVBvaW50ZXI6IGZhbHNlLFxuICAgICAgICAgIG9wZW5NZW51czogW10sXG4gICAgICAgICAgaXNDaGFuZ2luZ1N0eWxlOiBmYWxzZSxcbiAgICAgICAgICBpc1JlYWRPbmx5OiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVhZE9ubHlSZWFkb25seSxcbiAgICAgIHVwOiAoeyBpc1JlYWRPbmx5OiBfaXNSZWFkT25seSwgLi4ucmVjb3JkIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgaXNSZWFkb25seTogX2lzUmVhZE9ubHlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZEhvdmVyaW5nQ2FudmFzLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgaXNIb3ZlcmluZ0NhbnZhczogbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkU2NyaWJibGVzLFxuICAgICAgdXA6ICh7IHNjcmliYmxlOiBfLCAuLi5yZWNvcmQgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBzY3JpYmJsZXM6IFtdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRJbnNldCxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVjb3JkLFxuICAgICAgICAgIGluc2V0czogW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGRvd246ICh7IGluc2V0czogXywgLi4ucmVjb3JkIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZER1cGxpY2F0ZVByb3BzLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgZHVwbGljYXRlUHJvcHM6IG51bGxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoeyBkdXBsaWNhdGVQcm9wczogXywgLi4ucmVjb3JkIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLlJlbW92ZUNhbk1vdmVDYW1lcmEsXG4gICAgICB1cDogKHsgY2FuTW92ZUNhbWVyYTogXywgLi4ucmVjb3JkIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmRcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5zdGFuY2UsIGNhbk1vdmVDYW1lcmE6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuY29uc3QgVExJTlNUQU5DRV9JRCA9IFwiaW5zdGFuY2U6aW5zdGFuY2VcIjtcbmV4cG9ydCB7XG4gIFRMSU5TVEFOQ0VfSUQsXG4gIGNyZWF0ZUluc3RhbmNlUmVjb3JkVHlwZSxcbiAgaW5zdGFuY2VJZFZhbGlkYXRvcixcbiAgaW5zdGFuY2VNaWdyYXRpb25zLFxuICBpbnN0YW5jZVZlcnNpb25zLFxuICBwbHVja1ByZXNlcnZpbmdWYWx1ZXMsXG4gIHNob3VsZEtleUJlUHJlc2VydmVkQmV0d2VlblNlc3Npb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExJbnN0YW5jZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PageRecordType: () => (/* binding */ PageRecordType),\n/* harmony export */   isPageId: () => (/* binding */ isPageId),\n/* harmony export */   pageIdValidator: () => (/* binding */ pageIdValidator),\n/* harmony export */   pageMigrations: () => (/* binding */ pageMigrations),\n/* harmony export */   pageValidator: () => (/* binding */ pageValidator),\n/* harmony export */   pageVersions: () => (/* binding */ pageVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst pageIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"page\");\nconst pageValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"page\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"page\"),\n    id: pageIdValidator,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.indexKey,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst pageVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.page\", {\n  AddMeta: 1\n});\nconst pageMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.page\",\n  recordType: \"page\",\n  sequence: [\n    {\n      id: pageVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst PageRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"page\", {\n  validator: pageValidator,\n  scope: \"document\"\n}).withDefaultProperties(() => ({\n  meta: {}\n}));\nfunction isPageId(id) {\n  return PageRecordType.isId(id);\n}\n\n//# sourceMappingURL=TLPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSXVCO0FBQ2M7QUFDa0I7QUFDdkQsd0JBQXdCLG1FQUFXO0FBQ25DLHNCQUFzQixxREFBTztBQUM3QjtBQUNBLEVBQUUsc0RBQVE7QUFDVixjQUFjLHVEQUFTO0FBQ3ZCO0FBQ0EsVUFBVSxzREFBUTtBQUNsQixXQUFXLHdEQUFVO0FBQ3JCLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBQ0EscUJBQXFCLGlFQUFrQjtBQUN2QztBQUNBLENBQUM7QUFDRCx1QkFBdUIsNEVBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHVCQUF1QiwrREFBZ0I7QUFDdkM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFRRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZS5tanM/YjFjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuY29uc3QgcGFnZUlkVmFsaWRhdG9yID0gaWRWYWxpZGF0b3IoXCJwYWdlXCIpO1xuY29uc3QgcGFnZVZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwicGFnZVwiLFxuICBULm9iamVjdCh7XG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcInBhZ2VcIiksXG4gICAgaWQ6IHBhZ2VJZFZhbGlkYXRvcixcbiAgICBuYW1lOiBULnN0cmluZyxcbiAgICBpbmRleDogVC5pbmRleEtleSxcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IHBhZ2VWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcucGFnZVwiLCB7XG4gIEFkZE1ldGE6IDFcbn0pO1xuY29uc3QgcGFnZU1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5wYWdlXCIsXG4gIHJlY29yZFR5cGU6IFwicGFnZVwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBwYWdlVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmNvbnN0IFBhZ2VSZWNvcmRUeXBlID0gY3JlYXRlUmVjb3JkVHlwZShcInBhZ2VcIiwge1xuICB2YWxpZGF0b3I6IHBhZ2VWYWxpZGF0b3IsXG4gIHNjb3BlOiBcImRvY3VtZW50XCJcbn0pLndpdGhEZWZhdWx0UHJvcGVydGllcygoKSA9PiAoe1xuICBtZXRhOiB7fVxufSkpO1xuZnVuY3Rpb24gaXNQYWdlSWQoaWQpIHtcbiAgcmV0dXJuIFBhZ2VSZWNvcmRUeXBlLmlzSWQoaWQpO1xufVxuZXhwb3J0IHtcbiAgUGFnZVJlY29yZFR5cGUsXG4gIGlzUGFnZUlkLFxuICBwYWdlSWRWYWxpZGF0b3IsXG4gIHBhZ2VNaWdyYXRpb25zLFxuICBwYWdlVmFsaWRhdG9yLFxuICBwYWdlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFBhZ2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancePageStateRecordType: () => (/* binding */ InstancePageStateRecordType),\n/* harmony export */   instancePageStateMigrations: () => (/* binding */ instancePageStateMigrations),\n/* harmony export */   instancePageStateValidator: () => (/* binding */ instancePageStateValidator),\n/* harmony export */   instancePageStateVersions: () => (/* binding */ instancePageStateVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n\n\n\n\n\nconst instancePageStateValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"instance_page_state\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"instance_page_state\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"instance_page_state\"),\n    pageId: _TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__.pageIdValidator,\n    selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    hintingShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    erasingShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    hoveredShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    editingShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    croppingShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    focusedGroupId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst instancePageStateVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance_page_state\", {\n  AddCroppingId: 1,\n  RemoveInstanceIdAndCameraId: 2,\n  AddMeta: 3,\n  RenameProperties: 4,\n  RenamePropertiesAgain: 5\n});\nconst instancePageStateMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance_page_state\",\n  recordType: \"instance_page_state\",\n  sequence: [\n    {\n      id: instancePageStateVersions.AddCroppingId,\n      up(instance) {\n        instance.croppingShapeId = null;\n      }\n    },\n    {\n      id: instancePageStateVersions.RemoveInstanceIdAndCameraId,\n      up(instance) {\n        delete instance.instanceId;\n        delete instance.cameraId;\n      }\n    },\n    {\n      id: instancePageStateVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: instancePageStateVersions.RenameProperties,\n      // this migration is cursed: it was written wrong and doesn't do anything.\n      // rather than replace it, I've added another migration below that fixes it.\n      up: (_record) => {\n      },\n      down: (_record) => {\n      }\n    },\n    {\n      id: instancePageStateVersions.RenamePropertiesAgain,\n      up: (record) => {\n        record.selectedShapeIds = record.selectedIds;\n        delete record.selectedIds;\n        record.hintingShapeIds = record.hintingIds;\n        delete record.hintingIds;\n        record.erasingShapeIds = record.erasingIds;\n        delete record.erasingIds;\n        record.hoveredShapeId = record.hoveredId;\n        delete record.hoveredId;\n        record.editingShapeId = record.editingId;\n        delete record.editingId;\n        record.croppingShapeId = record.croppingShapeId ?? record.croppingId ?? null;\n        delete record.croppingId;\n        record.focusedGroupId = record.focusLayerId;\n        delete record.focusLayerId;\n      },\n      down: (record) => {\n        record.selectedIds = record.selectedShapeIds;\n        delete record.selectedShapeIds;\n        record.hintingIds = record.hintingShapeIds;\n        delete record.hintingShapeIds;\n        record.erasingIds = record.erasingShapeIds;\n        delete record.erasingShapeIds;\n        record.hoveredId = record.hoveredShapeId;\n        delete record.hoveredShapeId;\n        record.editingId = record.editingShapeId;\n        delete record.editingShapeId;\n        record.croppingId = record.croppingShapeId;\n        delete record.croppingShapeId;\n        record.focusLayerId = record.focusedGroupId;\n        delete record.focusedGroupId;\n      }\n    }\n  ]\n});\nconst InstancePageStateRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\n  \"instance_page_state\",\n  {\n    validator: instancePageStateValidator,\n    scope: \"session\",\n    ephemeralKeys: {\n      pageId: false,\n      selectedShapeIds: false,\n      editingShapeId: false,\n      croppingShapeId: false,\n      meta: false,\n      hintingShapeIds: true,\n      erasingShapeIds: true,\n      hoveredShapeId: true,\n      focusedGroupId: true\n    }\n  }\n).withDefaultProperties(\n  () => ({\n    editingShapeId: null,\n    croppingShapeId: null,\n    selectedShapeIds: [],\n    hoveredShapeId: null,\n    erasingShapeIds: [],\n    hintingShapeIds: [],\n    focusedGroupId: null,\n    meta: {}\n  })\n);\n\n//# sourceMappingURL=TLPageState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNrQjtBQUNNO0FBQ2Q7QUFDL0MsbUNBQW1DLHFEQUFPO0FBQzFDO0FBQ0EsRUFBRSxzREFBUTtBQUNWLGNBQWMsdURBQVM7QUFDdkIsUUFBUSxtRUFBVztBQUNuQixZQUFZLHdEQUFlO0FBQzNCLHNCQUFzQix1REFBUyxDQUFDLHFFQUFnQjtBQUNoRCxxQkFBcUIsdURBQVMsQ0FBQyxxRUFBZ0I7QUFDL0MscUJBQXFCLHVEQUFTLENBQUMscUVBQWdCO0FBQy9DLG9CQUFvQixxRUFBZ0I7QUFDcEMsb0JBQW9CLHFFQUFnQjtBQUNwQyxxQkFBcUIscUVBQWdCO0FBQ3JDLG9CQUFvQixxRUFBZ0I7QUFDcEMsVUFBVSx5REFBVztBQUNyQixHQUFHO0FBQ0g7QUFDQSxrQ0FBa0MsaUVBQWtCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsb0NBQW9DLDRFQUE2QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0MsK0RBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qcz8zMGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNyZWF0ZU1pZ3JhdGlvbklkcyxcbiAgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZVJlY29yZFR5cGVcbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9pZC12YWxpZGF0b3IubWpzXCI7XG5pbXBvcnQgeyBzaGFwZUlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL3NoYXBlcy9UTEJhc2VTaGFwZS5tanNcIjtcbmltcG9ydCB7IHBhZ2VJZFZhbGlkYXRvciB9IGZyb20gXCIuL1RMUGFnZS5tanNcIjtcbmNvbnN0IGluc3RhbmNlUGFnZVN0YXRlVmFsaWRhdG9yID0gVC5tb2RlbChcbiAgXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIsXG4gIFQub2JqZWN0KHtcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiKSxcbiAgICBpZDogaWRWYWxpZGF0b3IoXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIpLFxuICAgIHBhZ2VJZDogcGFnZUlkVmFsaWRhdG9yLFxuICAgIHNlbGVjdGVkU2hhcGVJZHM6IFQuYXJyYXlPZihzaGFwZUlkVmFsaWRhdG9yKSxcbiAgICBoaW50aW5nU2hhcGVJZHM6IFQuYXJyYXlPZihzaGFwZUlkVmFsaWRhdG9yKSxcbiAgICBlcmFzaW5nU2hhcGVJZHM6IFQuYXJyYXlPZihzaGFwZUlkVmFsaWRhdG9yKSxcbiAgICBob3ZlcmVkU2hhcGVJZDogc2hhcGVJZFZhbGlkYXRvci5udWxsYWJsZSgpLFxuICAgIGVkaXRpbmdTaGFwZUlkOiBzaGFwZUlkVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgY3JvcHBpbmdTaGFwZUlkOiBzaGFwZUlkVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgZm9jdXNlZEdyb3VwSWQ6IHNoYXBlSWRWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IGluc3RhbmNlUGFnZVN0YXRlVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3Lmluc3RhbmNlX3BhZ2Vfc3RhdGVcIiwge1xuICBBZGRDcm9wcGluZ0lkOiAxLFxuICBSZW1vdmVJbnN0YW5jZUlkQW5kQ2FtZXJhSWQ6IDIsXG4gIEFkZE1ldGE6IDMsXG4gIFJlbmFtZVByb3BlcnRpZXM6IDQsXG4gIFJlbmFtZVByb3BlcnRpZXNBZ2FpbjogNVxufSk7XG5jb25zdCBpbnN0YW5jZVBhZ2VTdGF0ZU1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5pbnN0YW5jZV9wYWdlX3N0YXRlXCIsXG4gIHJlY29yZFR5cGU6IFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zLkFkZENyb3BwaW5nSWQsXG4gICAgICB1cChpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5jcm9wcGluZ1NoYXBlSWQgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUGFnZVN0YXRlVmVyc2lvbnMuUmVtb3ZlSW5zdGFuY2VJZEFuZENhbWVyYUlkLFxuICAgICAgdXAoaW5zdGFuY2UpIHtcbiAgICAgICAgZGVsZXRlIGluc3RhbmNlLmluc3RhbmNlSWQ7XG4gICAgICAgIGRlbGV0ZSBpbnN0YW5jZS5jYW1lcmFJZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zLkFkZE1ldGEsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZWNvcmQubWV0YSA9IHt9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUGFnZVN0YXRlVmVyc2lvbnMuUmVuYW1lUHJvcGVydGllcyxcbiAgICAgIC8vIHRoaXMgbWlncmF0aW9uIGlzIGN1cnNlZDogaXQgd2FzIHdyaXR0ZW4gd3JvbmcgYW5kIGRvZXNuJ3QgZG8gYW55dGhpbmcuXG4gICAgICAvLyByYXRoZXIgdGhhbiByZXBsYWNlIGl0LCBJJ3ZlIGFkZGVkIGFub3RoZXIgbWlncmF0aW9uIGJlbG93IHRoYXQgZml4ZXMgaXQuXG4gICAgICB1cDogKF9yZWNvcmQpID0+IHtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoX3JlY29yZCkgPT4ge1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUGFnZVN0YXRlVmVyc2lvbnMuUmVuYW1lUHJvcGVydGllc0FnYWluLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLnNlbGVjdGVkU2hhcGVJZHMgPSByZWNvcmQuc2VsZWN0ZWRJZHM7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuc2VsZWN0ZWRJZHM7XG4gICAgICAgIHJlY29yZC5oaW50aW5nU2hhcGVJZHMgPSByZWNvcmQuaGludGluZ0lkcztcbiAgICAgICAgZGVsZXRlIHJlY29yZC5oaW50aW5nSWRzO1xuICAgICAgICByZWNvcmQuZXJhc2luZ1NoYXBlSWRzID0gcmVjb3JkLmVyYXNpbmdJZHM7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuZXJhc2luZ0lkcztcbiAgICAgICAgcmVjb3JkLmhvdmVyZWRTaGFwZUlkID0gcmVjb3JkLmhvdmVyZWRJZDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5ob3ZlcmVkSWQ7XG4gICAgICAgIHJlY29yZC5lZGl0aW5nU2hhcGVJZCA9IHJlY29yZC5lZGl0aW5nSWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuZWRpdGluZ0lkO1xuICAgICAgICByZWNvcmQuY3JvcHBpbmdTaGFwZUlkID0gcmVjb3JkLmNyb3BwaW5nU2hhcGVJZCA/PyByZWNvcmQuY3JvcHBpbmdJZCA/PyBudWxsO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmNyb3BwaW5nSWQ7XG4gICAgICAgIHJlY29yZC5mb2N1c2VkR3JvdXBJZCA9IHJlY29yZC5mb2N1c0xheWVySWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuZm9jdXNMYXllcklkO1xuICAgICAgfSxcbiAgICAgIGRvd246IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLnNlbGVjdGVkSWRzID0gcmVjb3JkLnNlbGVjdGVkU2hhcGVJZHM7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuc2VsZWN0ZWRTaGFwZUlkcztcbiAgICAgICAgcmVjb3JkLmhpbnRpbmdJZHMgPSByZWNvcmQuaGludGluZ1NoYXBlSWRzO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmhpbnRpbmdTaGFwZUlkcztcbiAgICAgICAgcmVjb3JkLmVyYXNpbmdJZHMgPSByZWNvcmQuZXJhc2luZ1NoYXBlSWRzO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmVyYXNpbmdTaGFwZUlkcztcbiAgICAgICAgcmVjb3JkLmhvdmVyZWRJZCA9IHJlY29yZC5ob3ZlcmVkU2hhcGVJZDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5ob3ZlcmVkU2hhcGVJZDtcbiAgICAgICAgcmVjb3JkLmVkaXRpbmdJZCA9IHJlY29yZC5lZGl0aW5nU2hhcGVJZDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5lZGl0aW5nU2hhcGVJZDtcbiAgICAgICAgcmVjb3JkLmNyb3BwaW5nSWQgPSByZWNvcmQuY3JvcHBpbmdTaGFwZUlkO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmNyb3BwaW5nU2hhcGVJZDtcbiAgICAgICAgcmVjb3JkLmZvY3VzTGF5ZXJJZCA9IHJlY29yZC5mb2N1c2VkR3JvdXBJZDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5mb2N1c2VkR3JvdXBJZDtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuY29uc3QgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlID0gY3JlYXRlUmVjb3JkVHlwZShcbiAgXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIsXG4gIHtcbiAgICB2YWxpZGF0b3I6IGluc3RhbmNlUGFnZVN0YXRlVmFsaWRhdG9yLFxuICAgIHNjb3BlOiBcInNlc3Npb25cIixcbiAgICBlcGhlbWVyYWxLZXlzOiB7XG4gICAgICBwYWdlSWQ6IGZhbHNlLFxuICAgICAgc2VsZWN0ZWRTaGFwZUlkczogZmFsc2UsXG4gICAgICBlZGl0aW5nU2hhcGVJZDogZmFsc2UsXG4gICAgICBjcm9wcGluZ1NoYXBlSWQ6IGZhbHNlLFxuICAgICAgbWV0YTogZmFsc2UsXG4gICAgICBoaW50aW5nU2hhcGVJZHM6IHRydWUsXG4gICAgICBlcmFzaW5nU2hhcGVJZHM6IHRydWUsXG4gICAgICBob3ZlcmVkU2hhcGVJZDogdHJ1ZSxcbiAgICAgIGZvY3VzZWRHcm91cElkOiB0cnVlXG4gICAgfVxuICB9XG4pLndpdGhEZWZhdWx0UHJvcGVydGllcyhcbiAgKCkgPT4gKHtcbiAgICBlZGl0aW5nU2hhcGVJZDogbnVsbCxcbiAgICBjcm9wcGluZ1NoYXBlSWQ6IG51bGwsXG4gICAgc2VsZWN0ZWRTaGFwZUlkczogW10sXG4gICAgaG92ZXJlZFNoYXBlSWQ6IG51bGwsXG4gICAgZXJhc2luZ1NoYXBlSWRzOiBbXSxcbiAgICBoaW50aW5nU2hhcGVJZHM6IFtdLFxuICAgIGZvY3VzZWRHcm91cElkOiBudWxsLFxuICAgIG1ldGE6IHt9XG4gIH0pXG4pO1xuZXhwb3J0IHtcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLFxuICBpbnN0YW5jZVBhZ2VTdGF0ZU1pZ3JhdGlvbnMsXG4gIGluc3RhbmNlUGFnZVN0YXRlVmFsaWRhdG9yLFxuICBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExQYWdlU3RhdGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PointerRecordType: () => (/* binding */ PointerRecordType),\n/* harmony export */   TLPOINTER_ID: () => (/* binding */ TLPOINTER_ID),\n/* harmony export */   pointerMigrations: () => (/* binding */ pointerMigrations),\n/* harmony export */   pointerValidator: () => (/* binding */ pointerValidator),\n/* harmony export */   pointerVersions: () => (/* binding */ pointerVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst pointerValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"pointer\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"pointer\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"pointer\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    lastActivityTimestamp: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst pointerVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.pointer\", {\n  AddMeta: 1\n});\nconst pointerMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.pointer\",\n  recordType: \"pointer\",\n  sequence: [\n    {\n      id: pointerVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst PointerRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"pointer\", {\n  validator: pointerValidator,\n  scope: \"session\"\n}).withDefaultProperties(\n  () => ({\n    x: 0,\n    y: 0,\n    lastActivityTimestamp: 0,\n    meta: {}\n  })\n);\nconst TLPOINTER_ID = PointerRecordType.createId(\"pointer\");\n\n//# sourceMappingURL=TLPointer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUG9pbnRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNrQjtBQUN2RCx5QkFBeUIscURBQU87QUFDaEM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLG1FQUFXO0FBQ25CLE9BQU8sc0RBQVE7QUFDZixPQUFPLHNEQUFRO0FBQ2YsMkJBQTJCLHNEQUFRO0FBQ25DLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLGlFQUFrQjtBQUMxQztBQUNBLENBQUM7QUFDRCwwQkFBMEIsNEVBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBCQUEwQiwrREFBZ0I7QUFDMUM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUG9pbnRlci5tanM/ZjYyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuY29uc3QgcG9pbnRlclZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwicG9pbnRlclwiLFxuICBULm9iamVjdCh7XG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcInBvaW50ZXJcIiksXG4gICAgaWQ6IGlkVmFsaWRhdG9yKFwicG9pbnRlclwiKSxcbiAgICB4OiBULm51bWJlcixcbiAgICB5OiBULm51bWJlcixcbiAgICBsYXN0QWN0aXZpdHlUaW1lc3RhbXA6IFQubnVtYmVyLFxuICAgIG1ldGE6IFQuanNvblZhbHVlXG4gIH0pXG4pO1xuY29uc3QgcG9pbnRlclZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5wb2ludGVyXCIsIHtcbiAgQWRkTWV0YTogMVxufSk7XG5jb25zdCBwb2ludGVyTWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LnBvaW50ZXJcIixcbiAgcmVjb3JkVHlwZTogXCJwb2ludGVyXCIsXG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IHBvaW50ZXJWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLm1ldGEgPSB7fTtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuY29uc3QgUG9pbnRlclJlY29yZFR5cGUgPSBjcmVhdGVSZWNvcmRUeXBlKFwicG9pbnRlclwiLCB7XG4gIHZhbGlkYXRvcjogcG9pbnRlclZhbGlkYXRvcixcbiAgc2NvcGU6IFwic2Vzc2lvblwiXG59KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoXG4gICgpID0+ICh7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIGxhc3RBY3Rpdml0eVRpbWVzdGFtcDogMCxcbiAgICBtZXRhOiB7fVxuICB9KVxuKTtcbmNvbnN0IFRMUE9JTlRFUl9JRCA9IFBvaW50ZXJSZWNvcmRUeXBlLmNyZWF0ZUlkKFwicG9pbnRlclwiKTtcbmV4cG9ydCB7XG4gIFBvaW50ZXJSZWNvcmRUeXBlLFxuICBUTFBPSU5URVJfSUQsXG4gIHBvaW50ZXJNaWdyYXRpb25zLFxuICBwb2ludGVyVmFsaWRhdG9yLFxuICBwb2ludGVyVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFBvaW50ZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancePresenceRecordType: () => (/* binding */ InstancePresenceRecordType),\n/* harmony export */   instancePresenceMigrations: () => (/* binding */ instancePresenceMigrations),\n/* harmony export */   instancePresenceValidator: () => (/* binding */ instancePresenceValidator),\n/* harmony export */   instancePresenceVersions: () => (/* binding */ instancePresenceVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n\n\n\n\n\n\nconst instancePresenceValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"instance_presence\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"instance_presence\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"instance_presence\"),\n    userId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    userName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    lastActivityTimestamp: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    followingUserId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    cursor: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n      x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      type: _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_4__.cursorTypeValidator,\n      rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n    }),\n    color: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    camera: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n      x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n    }),\n    screenBounds: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.boxModelValidator,\n    selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf((0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"shape\")),\n    currentPageId: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"page\"),\n    brush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.boxModelValidator.nullable(),\n    scribbles: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_5__.scribbleValidator),\n    chatMessage: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst instancePresenceVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance_presence\", {\n  AddScribbleDelay: 1,\n  RemoveInstanceId: 2,\n  AddChatMessage: 3,\n  AddMeta: 4,\n  RenameSelectedShapeIds: 5\n});\nconst instancePresenceMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance_presence\",\n  recordType: \"instance_presence\",\n  sequence: [\n    {\n      id: instancePresenceVersions.AddScribbleDelay,\n      up: (instance) => {\n        if (instance.scribble !== null) {\n          instance.scribble.delay = 0;\n        }\n      }\n    },\n    {\n      id: instancePresenceVersions.RemoveInstanceId,\n      up: (instance) => {\n        delete instance.instanceId;\n      }\n    },\n    {\n      id: instancePresenceVersions.AddChatMessage,\n      up: (instance) => {\n        instance.chatMessage = \"\";\n      }\n    },\n    {\n      id: instancePresenceVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: instancePresenceVersions.RenameSelectedShapeIds,\n      up: (_record) => {\n      }\n    }\n  ]\n});\nconst InstancePresenceRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\n  \"instance_presence\",\n  {\n    validator: instancePresenceValidator,\n    scope: \"presence\"\n  }\n).withDefaultProperties(() => ({\n  lastActivityTimestamp: 0,\n  followingUserId: null,\n  color: \"#FF0000\",\n  camera: {\n    x: 0,\n    y: 0,\n    z: 1\n  },\n  cursor: {\n    x: 0,\n    y: 0,\n    type: \"default\",\n    rotation: 0\n  },\n  screenBounds: {\n    x: 0,\n    y: 0,\n    w: 1,\n    h: 1\n  },\n  selectedShapeIds: [],\n  brush: null,\n  scribbles: [],\n  chatMessage: \"\",\n  meta: {}\n}));\n\n//# sourceMappingURL=TLPresence.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUHJlc2VuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUMwQjtBQUNSO0FBQ0k7QUFDQTtBQUMzRCxrQ0FBa0MscURBQU87QUFDekM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLG1FQUFXO0FBQ25CLFlBQVksc0RBQVE7QUFDcEIsY0FBYyxzREFBUTtBQUN0QiwyQkFBMkIsc0RBQVE7QUFDbkMscUJBQXFCLHNEQUFRO0FBQzdCLFlBQVksc0RBQVE7QUFDcEIsU0FBUyxzREFBUTtBQUNqQixTQUFTLHNEQUFRO0FBQ2pCLFlBQVksbUVBQW1CO0FBQy9CLGdCQUFnQixzREFBUTtBQUN4QixLQUFLO0FBQ0wsV0FBVyxzREFBUTtBQUNuQixZQUFZLHNEQUFRO0FBQ3BCLFNBQVMsc0RBQVE7QUFDakIsU0FBUyxzREFBUTtBQUNqQixTQUFTLHNEQUFRO0FBQ2pCLEtBQUs7QUFDTCxrQkFBa0IsdUVBQWlCO0FBQ25DLHNCQUFzQix1REFBUyxDQUFDLG1FQUFXO0FBQzNDLG1CQUFtQixtRUFBVztBQUM5QixXQUFXLHVFQUFpQjtBQUM1QixlQUFlLHVEQUFTLENBQUMsbUVBQWlCO0FBQzFDLGlCQUFpQixzREFBUTtBQUN6QixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLGlDQUFpQyxpRUFBa0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQ0FBbUMsNEVBQTZCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQ0FBbUMsK0RBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHMvVExQcmVzZW5jZS5tanM/YjZkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGJveE1vZGVsVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvZ2VvbWV0cnktdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmltcG9ydCB7IGN1cnNvclR5cGVWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9UTEN1cnNvci5tanNcIjtcbmltcG9ydCB7IHNjcmliYmxlVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExTY3JpYmJsZS5tanNcIjtcbmNvbnN0IGluc3RhbmNlUHJlc2VuY2VWYWxpZGF0b3IgPSBULm1vZGVsKFxuICBcImluc3RhbmNlX3ByZXNlbmNlXCIsXG4gIFQub2JqZWN0KHtcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwiaW5zdGFuY2VfcHJlc2VuY2VcIiksXG4gICAgaWQ6IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VfcHJlc2VuY2VcIiksXG4gICAgdXNlcklkOiBULnN0cmluZyxcbiAgICB1c2VyTmFtZTogVC5zdHJpbmcsXG4gICAgbGFzdEFjdGl2aXR5VGltZXN0YW1wOiBULm51bWJlcixcbiAgICBmb2xsb3dpbmdVc2VySWQ6IFQuc3RyaW5nLm51bGxhYmxlKCksXG4gICAgY3Vyc29yOiBULm9iamVjdCh7XG4gICAgICB4OiBULm51bWJlcixcbiAgICAgIHk6IFQubnVtYmVyLFxuICAgICAgdHlwZTogY3Vyc29yVHlwZVZhbGlkYXRvcixcbiAgICAgIHJvdGF0aW9uOiBULm51bWJlclxuICAgIH0pLFxuICAgIGNvbG9yOiBULnN0cmluZyxcbiAgICBjYW1lcmE6IFQub2JqZWN0KHtcbiAgICAgIHg6IFQubnVtYmVyLFxuICAgICAgeTogVC5udW1iZXIsXG4gICAgICB6OiBULm51bWJlclxuICAgIH0pLFxuICAgIHNjcmVlbkJvdW5kczogYm94TW9kZWxWYWxpZGF0b3IsXG4gICAgc2VsZWN0ZWRTaGFwZUlkczogVC5hcnJheU9mKGlkVmFsaWRhdG9yKFwic2hhcGVcIikpLFxuICAgIGN1cnJlbnRQYWdlSWQ6IGlkVmFsaWRhdG9yKFwicGFnZVwiKSxcbiAgICBicnVzaDogYm94TW9kZWxWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgICBzY3JpYmJsZXM6IFQuYXJyYXlPZihzY3JpYmJsZVZhbGlkYXRvciksXG4gICAgY2hhdE1lc3NhZ2U6IFQuc3RyaW5nLFxuICAgIG1ldGE6IFQuanNvblZhbHVlXG4gIH0pXG4pO1xuY29uc3QgaW5zdGFuY2VQcmVzZW5jZVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5pbnN0YW5jZV9wcmVzZW5jZVwiLCB7XG4gIEFkZFNjcmliYmxlRGVsYXk6IDEsXG4gIFJlbW92ZUluc3RhbmNlSWQ6IDIsXG4gIEFkZENoYXRNZXNzYWdlOiAzLFxuICBBZGRNZXRhOiA0LFxuICBSZW5hbWVTZWxlY3RlZFNoYXBlSWRzOiA1XG59KTtcbmNvbnN0IGluc3RhbmNlUHJlc2VuY2VNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuaW5zdGFuY2VfcHJlc2VuY2VcIixcbiAgcmVjb3JkVHlwZTogXCJpbnN0YW5jZV9wcmVzZW5jZVwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVByZXNlbmNlVmVyc2lvbnMuQWRkU2NyaWJibGVEZWxheSxcbiAgICAgIHVwOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnNjcmliYmxlICE9PSBudWxsKSB7XG4gICAgICAgICAgaW5zdGFuY2Uuc2NyaWJibGUuZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VQcmVzZW5jZVZlcnNpb25zLlJlbW92ZUluc3RhbmNlSWQsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBpbnN0YW5jZS5pbnN0YW5jZUlkO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUHJlc2VuY2VWZXJzaW9ucy5BZGRDaGF0TWVzc2FnZSxcbiAgICAgIHVwOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgaW5zdGFuY2UuY2hhdE1lc3NhZ2UgPSBcIlwiO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUHJlc2VuY2VWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLm1ldGEgPSB7fTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVByZXNlbmNlVmVyc2lvbnMuUmVuYW1lU2VsZWN0ZWRTaGFwZUlkcyxcbiAgICAgIHVwOiAoX3JlY29yZCkgPT4ge1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXG4gIFwiaW5zdGFuY2VfcHJlc2VuY2VcIixcbiAge1xuICAgIHZhbGlkYXRvcjogaW5zdGFuY2VQcmVzZW5jZVZhbGlkYXRvcixcbiAgICBzY29wZTogXCJwcmVzZW5jZVwiXG4gIH1cbikud2l0aERlZmF1bHRQcm9wZXJ0aWVzKCgpID0+ICh7XG4gIGxhc3RBY3Rpdml0eVRpbWVzdGFtcDogMCxcbiAgZm9sbG93aW5nVXNlcklkOiBudWxsLFxuICBjb2xvcjogXCIjRkYwMDAwXCIsXG4gIGNhbWVyYToge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB6OiAxXG4gIH0sXG4gIGN1cnNvcjoge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICByb3RhdGlvbjogMFxuICB9LFxuICBzY3JlZW5Cb3VuZHM6IHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgdzogMSxcbiAgICBoOiAxXG4gIH0sXG4gIHNlbGVjdGVkU2hhcGVJZHM6IFtdLFxuICBicnVzaDogbnVsbCxcbiAgc2NyaWJibGVzOiBbXSxcbiAgY2hhdE1lc3NhZ2U6IFwiXCIsXG4gIG1ldGE6IHt9XG59KSk7XG5leHBvcnQge1xuICBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSxcbiAgaW5zdGFuY2VQcmVzZW5jZU1pZ3JhdGlvbnMsXG4gIGluc3RhbmNlUHJlc2VuY2VWYWxpZGF0b3IsXG4gIGluc3RhbmNlUHJlc2VuY2VWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMUHJlc2VuY2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createShapeId: () => (/* binding */ createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* binding */ createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* binding */ createShapePropsMigrationSequence),\n/* harmony export */   createShapeRecordType: () => (/* binding */ createShapeRecordType),\n/* harmony export */   getShapePropKeysByStyle: () => (/* binding */ getShapePropKeysByStyle),\n/* harmony export */   isShape: () => (/* binding */ isShape),\n/* harmony export */   isShapeId: () => (/* binding */ isShapeId),\n/* harmony export */   rootShapeMigrations: () => (/* binding */ rootShapeMigrations),\n/* harmony export */   rootShapeVersions: () => (/* binding */ rootShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\n\n\n\n\nconst rootShapeVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.shape\", {\n  AddIsLocked: 1,\n  HoistOpacity: 2,\n  AddMeta: 3,\n  AddWhite: 4\n});\nconst rootShapeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.shape\",\n  recordType: \"shape\",\n  sequence: [\n    {\n      id: rootShapeVersions.AddIsLocked,\n      up: (record) => {\n        record.isLocked = false;\n      },\n      down: (record) => {\n        delete record.isLocked;\n      }\n    },\n    {\n      id: rootShapeVersions.HoistOpacity,\n      up: (record) => {\n        record.opacity = Number(record.props.opacity ?? \"1\");\n        delete record.props.opacity;\n      },\n      down: (record) => {\n        const opacity = record.opacity;\n        delete record.opacity;\n        record.props.opacity = opacity < 0.175 ? \"0.1\" : opacity < 0.375 ? \"0.25\" : opacity < 0.625 ? \"0.5\" : opacity < 0.875 ? \"0.75\" : \"1\";\n      }\n    },\n    {\n      id: rootShapeVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: rootShapeVersions.AddWhite,\n      up: (_record) => {\n      },\n      down: (record) => {\n        if (record.props.color === \"white\") {\n          record.props.color = \"black\";\n        }\n      }\n    }\n  ]\n});\nfunction isShape(record) {\n  if (!record) return false;\n  return record.typeName === \"shape\";\n}\nfunction isShapeId(id) {\n  if (!id) return false;\n  return id.startsWith(\"shape:\");\n}\nfunction createShapeId(id) {\n  return `shape:${id ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.uniqueId)()}`;\n}\nfunction getShapePropKeysByStyle(props) {\n  const propKeysByStyle = /* @__PURE__ */ new Map();\n  for (const [key, prop] of Object.entries(props)) {\n    if (prop instanceof _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_4__.StyleProp) {\n      if (propKeysByStyle.has(prop)) {\n        throw new Error(\n          `Duplicate style prop ${prop.id}. Each style prop can only be used once within a shape.`\n        );\n      }\n      propKeysByStyle.set(prop, key);\n    }\n  }\n  return propKeysByStyle;\n}\nfunction createShapePropsMigrationSequence(migrations) {\n  return migrations;\n}\nfunction createShapePropsMigrationIds(shapeType, ids) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(ids, (_k, v) => `com.tldraw.shape.${shapeType}/${v}`);\n}\nfunction createShapeRecordType(shapes) {\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"shape\", {\n    scope: \"document\",\n    validator: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n      \"shape\",\n      _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.union(\n        \"type\",\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(\n          shapes,\n          (type, { props, meta }) => (0,_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapeValidator)(type, props, meta)\n        )\n      )\n    )\n  }).withDefaultProperties(() => ({\n    x: 0,\n    y: 0,\n    rotation: 0,\n    isLocked: false,\n    opacity: 1,\n    meta: {}\n  }));\n}\n\n//# sourceMappingURL=TLShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSXVCO0FBQ3NDO0FBQ3hCO0FBQzRCO0FBQ2I7QUFDcEQsMEJBQTBCLGlFQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIsNEVBQTZCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU0sdURBQVEsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0REFBUztBQUNqQztBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUVBQWtCLHFDQUFxQyxVQUFVLEdBQUcsRUFBRTtBQUMvRTtBQUNBO0FBQ0EsU0FBUywrREFBZ0I7QUFDekI7QUFDQSxlQUFlLHFEQUFPO0FBQ3RCO0FBQ0EsTUFBTSxxREFBTztBQUNiO0FBQ0EsUUFBUSxpRUFBa0I7QUFDMUI7QUFDQSxtQkFBbUIsYUFBYSxLQUFLLDZFQUFvQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTFNoYXBlLm1qcz82YzM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNyZWF0ZU1pZ3JhdGlvbklkcyxcbiAgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZVJlY29yZFR5cGVcbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IG1hcE9iamVjdE1hcFZhbHVlcywgdW5pcXVlSWQgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVZhbGlkYXRvciB9IGZyb20gXCIuLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi4vc3R5bGVzL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IHJvb3RTaGFwZVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5zaGFwZVwiLCB7XG4gIEFkZElzTG9ja2VkOiAxLFxuICBIb2lzdE9wYWNpdHk6IDIsXG4gIEFkZE1ldGE6IDMsXG4gIEFkZFdoaXRlOiA0XG59KTtcbmNvbnN0IHJvb3RTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5zaGFwZVwiLFxuICByZWNvcmRUeXBlOiBcInNoYXBlXCIsXG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IHJvb3RTaGFwZVZlcnNpb25zLkFkZElzTG9ja2VkLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLmlzTG9ja2VkID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgZG93bjogKHJlY29yZCkgPT4ge1xuICAgICAgICBkZWxldGUgcmVjb3JkLmlzTG9ja2VkO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IHJvb3RTaGFwZVZlcnNpb25zLkhvaXN0T3BhY2l0eSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5vcGFjaXR5ID0gTnVtYmVyKHJlY29yZC5wcm9wcy5vcGFjaXR5ID8/IFwiMVwiKTtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5wcm9wcy5vcGFjaXR5O1xuICAgICAgfSxcbiAgICAgIGRvd246IChyZWNvcmQpID0+IHtcbiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHJlY29yZC5vcGFjaXR5O1xuICAgICAgICBkZWxldGUgcmVjb3JkLm9wYWNpdHk7XG4gICAgICAgIHJlY29yZC5wcm9wcy5vcGFjaXR5ID0gb3BhY2l0eSA8IDAuMTc1ID8gXCIwLjFcIiA6IG9wYWNpdHkgPCAwLjM3NSA/IFwiMC4yNVwiIDogb3BhY2l0eSA8IDAuNjI1ID8gXCIwLjVcIiA6IG9wYWNpdHkgPCAwLjg3NSA/IFwiMC43NVwiIDogXCIxXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogcm9vdFNoYXBlVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogcm9vdFNoYXBlVmVyc2lvbnMuQWRkV2hpdGUsXG4gICAgICB1cDogKF9yZWNvcmQpID0+IHtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIGlmIChyZWNvcmQucHJvcHMuY29sb3IgPT09IFwid2hpdGVcIikge1xuICAgICAgICAgIHJlY29yZC5wcm9wcy5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5mdW5jdGlvbiBpc1NoYXBlKHJlY29yZCkge1xuICBpZiAoIXJlY29yZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gcmVjb3JkLnR5cGVOYW1lID09PSBcInNoYXBlXCI7XG59XG5mdW5jdGlvbiBpc1NoYXBlSWQoaWQpIHtcbiAgaWYgKCFpZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gaWQuc3RhcnRzV2l0aChcInNoYXBlOlwiKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlSWQoaWQpIHtcbiAgcmV0dXJuIGBzaGFwZToke2lkID8/IHVuaXF1ZUlkKCl9YDtcbn1cbmZ1bmN0aW9uIGdldFNoYXBlUHJvcEtleXNCeVN0eWxlKHByb3BzKSB7XG4gIGNvbnN0IHByb3BLZXlzQnlTdHlsZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3QgW2tleSwgcHJvcF0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMpKSB7XG4gICAgaWYgKHByb3AgaW5zdGFuY2VvZiBTdHlsZVByb3ApIHtcbiAgICAgIGlmIChwcm9wS2V5c0J5U3R5bGUuaGFzKHByb3ApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRHVwbGljYXRlIHN0eWxlIHByb3AgJHtwcm9wLmlkfS4gRWFjaCBzdHlsZSBwcm9wIGNhbiBvbmx5IGJlIHVzZWQgb25jZSB3aXRoaW4gYSBzaGFwZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBwcm9wS2V5c0J5U3R5bGUuc2V0KHByb3AsIGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wS2V5c0J5U3R5bGU7XG59XG5mdW5jdGlvbiBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UobWlncmF0aW9ucykge1xuICByZXR1cm4gbWlncmF0aW9ucztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoc2hhcGVUeXBlLCBpZHMpIHtcbiAgcmV0dXJuIG1hcE9iamVjdE1hcFZhbHVlcyhpZHMsIChfaywgdikgPT4gYGNvbS50bGRyYXcuc2hhcGUuJHtzaGFwZVR5cGV9LyR7dn1gKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlUmVjb3JkVHlwZShzaGFwZXMpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlY29yZFR5cGUoXCJzaGFwZVwiLCB7XG4gICAgc2NvcGU6IFwiZG9jdW1lbnRcIixcbiAgICB2YWxpZGF0b3I6IFQubW9kZWwoXG4gICAgICBcInNoYXBlXCIsXG4gICAgICBULnVuaW9uKFxuICAgICAgICBcInR5cGVcIixcbiAgICAgICAgbWFwT2JqZWN0TWFwVmFsdWVzKFxuICAgICAgICAgIHNoYXBlcyxcbiAgICAgICAgICAodHlwZSwgeyBwcm9wcywgbWV0YSB9KSA9PiBjcmVhdGVTaGFwZVZhbGlkYXRvcih0eXBlLCBwcm9wcywgbWV0YSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSkud2l0aERlZmF1bHRQcm9wZXJ0aWVzKCgpID0+ICh7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHJvdGF0aW9uOiAwLFxuICAgIGlzTG9ja2VkOiBmYWxzZSxcbiAgICBvcGFjaXR5OiAxLFxuICAgIG1ldGE6IHt9XG4gIH0pKTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVNoYXBlSWQsXG4gIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlU2hhcGVSZWNvcmRUeXBlLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgaXNTaGFwZSxcbiAgaXNTaGFwZUlkLFxuICByb290U2hhcGVNaWdyYXRpb25zLFxuICByb290U2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* binding */ ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* binding */ ArrowShapeArrowheadStartStyle),\n/* harmony export */   arrowShapeMigrations: () => (/* binding */ arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* binding */ arrowShapeProps),\n/* harmony export */   arrowShapeVersions: () => (/* binding */ arrowShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../recordsWithProps.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst arrowheadTypes = [\n  \"arrow\",\n  \"triangle\",\n  \"square\",\n  \"dot\",\n  \"pipe\",\n  \"diamond\",\n  \"inverted\",\n  \"bar\",\n  \"none\"\n];\nconst ArrowShapeArrowheadStartStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__.StyleProp.defineEnum(\"tldraw:arrowheadStart\", {\n  defaultValue: \"none\",\n  values: arrowheadTypes\n});\nconst ArrowShapeArrowheadEndStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__.StyleProp.defineEnum(\"tldraw:arrowheadEnd\", {\n  defaultValue: \"arrow\",\n  values: arrowheadTypes\n});\nconst arrowShapeProps = {\n  labelColor: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultLabelColorStyle,\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_11__.DefaultSizeStyle,\n  arrowheadStart: ArrowShapeArrowheadStartStyle,\n  arrowheadEnd: ArrowShapeArrowheadEndStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_10__.DefaultFontStyle,\n  start: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  end: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  bend: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n  labelPosition: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.nonZeroNumber\n};\nconst arrowShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_4__.createShapePropsMigrationIds)(\"arrow\", {\n  AddLabelColor: 1,\n  AddIsPrecise: 2,\n  AddLabelPosition: 3,\n  ExtractBindings: 4,\n  AddScale: 5\n});\nfunction propsMigration(migration) {\n  return (0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_5__.createPropsMigration)(\"shape\", \"arrow\", migration);\n}\nconst arrowShapeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n  sequenceId: \"com.tldraw.shape.arrow\",\n  retroactive: false,\n  sequence: [\n    propsMigration({\n      id: arrowShapeVersions.AddLabelColor,\n      up: (props) => {\n        props.labelColor = \"black\";\n      },\n      down: \"retired\"\n    }),\n    propsMigration({\n      id: arrowShapeVersions.AddIsPrecise,\n      up: ({ start, end }) => {\n        if (start.type === \"binding\") {\n          start.isPrecise = !(start.normalizedAnchor.x === 0.5 && start.normalizedAnchor.y === 0.5);\n        }\n        if (end.type === \"binding\") {\n          end.isPrecise = !(end.normalizedAnchor.x === 0.5 && end.normalizedAnchor.y === 0.5);\n        }\n      },\n      down: ({ start, end }) => {\n        if (start.type === \"binding\") {\n          if (!start.isPrecise) {\n            start.normalizedAnchor = { x: 0.5, y: 0.5 };\n          }\n          delete start.isPrecise;\n        }\n        if (end.type === \"binding\") {\n          if (!end.isPrecise) {\n            end.normalizedAnchor = { x: 0.5, y: 0.5 };\n          }\n          delete end.isPrecise;\n        }\n      }\n    }),\n    propsMigration({\n      id: arrowShapeVersions.AddLabelPosition,\n      up: (props) => {\n        props.labelPosition = 0.5;\n      },\n      down: (props) => {\n        delete props.labelPosition;\n      }\n    }),\n    {\n      id: arrowShapeVersions.ExtractBindings,\n      scope: \"store\",\n      up: (oldStore) => {\n        const arrows = Object.values(oldStore).filter(\n          (r) => r.typeName === \"shape\" && r.type === \"arrow\"\n        );\n        for (const arrow of arrows) {\n          const { start, end } = arrow.props;\n          if (start.type === \"binding\") {\n            const id = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingId)();\n            const binding = {\n              typeName: \"binding\",\n              id,\n              type: \"arrow\",\n              fromId: arrow.id,\n              toId: start.boundShapeId,\n              meta: {},\n              props: {\n                terminal: \"start\",\n                normalizedAnchor: start.normalizedAnchor,\n                isExact: start.isExact,\n                isPrecise: start.isPrecise\n              }\n            };\n            oldStore[id] = binding;\n            arrow.props.start = { x: 0, y: 0 };\n          } else {\n            delete arrow.props.start.type;\n          }\n          if (end.type === \"binding\") {\n            const id = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingId)();\n            const binding = {\n              typeName: \"binding\",\n              id,\n              type: \"arrow\",\n              fromId: arrow.id,\n              toId: end.boundShapeId,\n              meta: {},\n              props: {\n                terminal: \"end\",\n                normalizedAnchor: end.normalizedAnchor,\n                isExact: end.isExact,\n                isPrecise: end.isPrecise\n              }\n            };\n            oldStore[id] = binding;\n            arrow.props.end = { x: 0, y: 0 };\n          } else {\n            delete arrow.props.end.type;\n          }\n        }\n      }\n    },\n    propsMigration({\n      id: arrowShapeVersions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    })\n  ]\n});\n\n//# sourceMappingURL=TLArrowShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExBcnJvd1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNuQjtBQUMwQjtBQUNKO0FBQ1c7QUFDUDtBQUNYO0FBSWhCO0FBQ3lCO0FBQ0E7QUFDQTtBQUNBO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNERBQVM7QUFDL0M7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0MsNERBQVM7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGNBQWMsNEVBQXNCO0FBQ3BDLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEsc0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxRQUFRLHNFQUFnQjtBQUN4QixTQUFTLHVFQUFpQjtBQUMxQixPQUFPLHVFQUFpQjtBQUN4QixRQUFRLHNEQUFRO0FBQ2hCLFFBQVEsc0RBQVE7QUFDaEIsaUJBQWlCLHNEQUFRO0FBQ3pCLFNBQVMsNkRBQWU7QUFDeEI7QUFDQSwyQkFBMkIsa0ZBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxTQUFTLDJFQUFvQjtBQUM3QjtBQUNBLDZCQUE2QixzRUFBdUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhO0FBQy9CO0FBQ0EsdUJBQXVCLHVFQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFPQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExBcnJvd1NoYXBlLm1qcz8zNjhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgdmVjTW9kZWxWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9nZW9tZXRyeS10eXBlcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUJpbmRpbmdJZCB9IGZyb20gXCIuLi9yZWNvcmRzL1RMQmluZGluZy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUHJvcHNNaWdyYXRpb24gfSBmcm9tIFwiLi4vcmVjb3Jkc1dpdGhQcm9wcy5tanNcIjtcbmltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuLi9zdHlsZXMvU3R5bGVQcm9wLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdENvbG9yU3R5bGUsXG4gIERlZmF1bHRMYWJlbENvbG9yU3R5bGVcbn0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RGFzaFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTERhc2hTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGaWxsU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRmlsbFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZvbnRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExGb250U3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmNvbnN0IGFycm93aGVhZFR5cGVzID0gW1xuICBcImFycm93XCIsXG4gIFwidHJpYW5nbGVcIixcbiAgXCJzcXVhcmVcIixcbiAgXCJkb3RcIixcbiAgXCJwaXBlXCIsXG4gIFwiZGlhbW9uZFwiLFxuICBcImludmVydGVkXCIsXG4gIFwiYmFyXCIsXG4gIFwibm9uZVwiXG5dO1xuY29uc3QgQXJyb3dTaGFwZUFycm93aGVhZFN0YXJ0U3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzphcnJvd2hlYWRTdGFydFwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJub25lXCIsXG4gIHZhbHVlczogYXJyb3doZWFkVHlwZXNcbn0pO1xuY29uc3QgQXJyb3dTaGFwZUFycm93aGVhZEVuZFN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6YXJyb3doZWFkRW5kXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcImFycm93XCIsXG4gIHZhbHVlczogYXJyb3doZWFkVHlwZXNcbn0pO1xuY29uc3QgYXJyb3dTaGFwZVByb3BzID0ge1xuICBsYWJlbENvbG9yOiBEZWZhdWx0TGFiZWxDb2xvclN0eWxlLFxuICBjb2xvcjogRGVmYXVsdENvbG9yU3R5bGUsXG4gIGZpbGw6IERlZmF1bHRGaWxsU3R5bGUsXG4gIGRhc2g6IERlZmF1bHREYXNoU3R5bGUsXG4gIHNpemU6IERlZmF1bHRTaXplU3R5bGUsXG4gIGFycm93aGVhZFN0YXJ0OiBBcnJvd1NoYXBlQXJyb3doZWFkU3RhcnRTdHlsZSxcbiAgYXJyb3doZWFkRW5kOiBBcnJvd1NoYXBlQXJyb3doZWFkRW5kU3R5bGUsXG4gIGZvbnQ6IERlZmF1bHRGb250U3R5bGUsXG4gIHN0YXJ0OiB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgZW5kOiB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgYmVuZDogVC5udW1iZXIsXG4gIHRleHQ6IFQuc3RyaW5nLFxuICBsYWJlbFBvc2l0aW9uOiBULm51bWJlcixcbiAgc2NhbGU6IFQubm9uWmVyb051bWJlclxufTtcbmNvbnN0IGFycm93U2hhcGVWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJhcnJvd1wiLCB7XG4gIEFkZExhYmVsQ29sb3I6IDEsXG4gIEFkZElzUHJlY2lzZTogMixcbiAgQWRkTGFiZWxQb3NpdGlvbjogMyxcbiAgRXh0cmFjdEJpbmRpbmdzOiA0LFxuICBBZGRTY2FsZTogNVxufSk7XG5mdW5jdGlvbiBwcm9wc01pZ3JhdGlvbihtaWdyYXRpb24pIHtcbiAgcmV0dXJuIGNyZWF0ZVByb3BzTWlncmF0aW9uKFwic2hhcGVcIiwgXCJhcnJvd1wiLCBtaWdyYXRpb24pO1xufVxuY29uc3QgYXJyb3dTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5zaGFwZS5hcnJvd1wiLFxuICByZXRyb2FjdGl2ZTogZmFsc2UsXG4gIHNlcXVlbmNlOiBbXG4gICAgcHJvcHNNaWdyYXRpb24oe1xuICAgICAgaWQ6IGFycm93U2hhcGVWZXJzaW9ucy5BZGRMYWJlbENvbG9yLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5sYWJlbENvbG9yID0gXCJibGFja1wiO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSksXG4gICAgcHJvcHNNaWdyYXRpb24oe1xuICAgICAgaWQ6IGFycm93U2hhcGVWZXJzaW9ucy5BZGRJc1ByZWNpc2UsXG4gICAgICB1cDogKHsgc3RhcnQsIGVuZCB9KSA9PiB7XG4gICAgICAgIGlmIChzdGFydC50eXBlID09PSBcImJpbmRpbmdcIikge1xuICAgICAgICAgIHN0YXJ0LmlzUHJlY2lzZSA9ICEoc3RhcnQubm9ybWFsaXplZEFuY2hvci54ID09PSAwLjUgJiYgc3RhcnQubm9ybWFsaXplZEFuY2hvci55ID09PSAwLjUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmQudHlwZSA9PT0gXCJiaW5kaW5nXCIpIHtcbiAgICAgICAgICBlbmQuaXNQcmVjaXNlID0gIShlbmQubm9ybWFsaXplZEFuY2hvci54ID09PSAwLjUgJiYgZW5kLm5vcm1hbGl6ZWRBbmNob3IueSA9PT0gMC41KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246ICh7IHN0YXJ0LCBlbmQgfSkgPT4ge1xuICAgICAgICBpZiAoc3RhcnQudHlwZSA9PT0gXCJiaW5kaW5nXCIpIHtcbiAgICAgICAgICBpZiAoIXN0YXJ0LmlzUHJlY2lzZSkge1xuICAgICAgICAgICAgc3RhcnQubm9ybWFsaXplZEFuY2hvciA9IHsgeDogMC41LCB5OiAwLjUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIHN0YXJ0LmlzUHJlY2lzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kLnR5cGUgPT09IFwiYmluZGluZ1wiKSB7XG4gICAgICAgICAgaWYgKCFlbmQuaXNQcmVjaXNlKSB7XG4gICAgICAgICAgICBlbmQubm9ybWFsaXplZEFuY2hvciA9IHsgeDogMC41LCB5OiAwLjUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIGVuZC5pc1ByZWNpc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBwcm9wc01pZ3JhdGlvbih7XG4gICAgICBpZDogYXJyb3dTaGFwZVZlcnNpb25zLkFkZExhYmVsUG9zaXRpb24sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmxhYmVsUG9zaXRpb24gPSAwLjU7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5sYWJlbFBvc2l0aW9uO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHtcbiAgICAgIGlkOiBhcnJvd1NoYXBlVmVyc2lvbnMuRXh0cmFjdEJpbmRpbmdzLFxuICAgICAgc2NvcGU6IFwic3RvcmVcIixcbiAgICAgIHVwOiAob2xkU3RvcmUpID0+IHtcbiAgICAgICAgY29uc3QgYXJyb3dzID0gT2JqZWN0LnZhbHVlcyhvbGRTdG9yZSkuZmlsdGVyKFxuICAgICAgICAgIChyKSA9PiByLnR5cGVOYW1lID09PSBcInNoYXBlXCIgJiYgci50eXBlID09PSBcImFycm93XCJcbiAgICAgICAgKTtcbiAgICAgICAgZm9yIChjb25zdCBhcnJvdyBvZiBhcnJvd3MpIHtcbiAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGFycm93LnByb3BzO1xuICAgICAgICAgIGlmIChzdGFydC50eXBlID09PSBcImJpbmRpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBjcmVhdGVCaW5kaW5nSWQoKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmcgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImJpbmRpbmdcIixcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIHR5cGU6IFwiYXJyb3dcIixcbiAgICAgICAgICAgICAgZnJvbUlkOiBhcnJvdy5pZCxcbiAgICAgICAgICAgICAgdG9JZDogc3RhcnQuYm91bmRTaGFwZUlkLFxuICAgICAgICAgICAgICBtZXRhOiB7fSxcbiAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRBbmNob3I6IHN0YXJ0Lm5vcm1hbGl6ZWRBbmNob3IsXG4gICAgICAgICAgICAgICAgaXNFeGFjdDogc3RhcnQuaXNFeGFjdCxcbiAgICAgICAgICAgICAgICBpc1ByZWNpc2U6IHN0YXJ0LmlzUHJlY2lzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb2xkU3RvcmVbaWRdID0gYmluZGluZztcbiAgICAgICAgICAgIGFycm93LnByb3BzLnN0YXJ0ID0geyB4OiAwLCB5OiAwIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBhcnJvdy5wcm9wcy5zdGFydC50eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZW5kLnR5cGUgPT09IFwiYmluZGluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGNyZWF0ZUJpbmRpbmdJZCgpO1xuICAgICAgICAgICAgY29uc3QgYmluZGluZyA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwiYmluZGluZ1wiLFxuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgdHlwZTogXCJhcnJvd1wiLFxuICAgICAgICAgICAgICBmcm9tSWQ6IGFycm93LmlkLFxuICAgICAgICAgICAgICB0b0lkOiBlbmQuYm91bmRTaGFwZUlkLFxuICAgICAgICAgICAgICBtZXRhOiB7fSxcbiAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogXCJlbmRcIixcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkQW5jaG9yOiBlbmQubm9ybWFsaXplZEFuY2hvcixcbiAgICAgICAgICAgICAgICBpc0V4YWN0OiBlbmQuaXNFeGFjdCxcbiAgICAgICAgICAgICAgICBpc1ByZWNpc2U6IGVuZC5pc1ByZWNpc2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9sZFN0b3JlW2lkXSA9IGJpbmRpbmc7XG4gICAgICAgICAgICBhcnJvdy5wcm9wcy5lbmQgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIGFycm93LnByb3BzLmVuZC50eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcHJvcHNNaWdyYXRpb24oe1xuICAgICAgaWQ6IGFycm93U2hhcGVWZXJzaW9ucy5BZGRTY2FsZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuc2NhbGUgPSAxO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMuc2NhbGU7XG4gICAgICB9XG4gICAgfSlcbiAgXVxufSk7XG5leHBvcnQge1xuICBBcnJvd1NoYXBlQXJyb3doZWFkRW5kU3R5bGUsXG4gIEFycm93U2hhcGVBcnJvd2hlYWRTdGFydFN0eWxlLFxuICBhcnJvd1NoYXBlTWlncmF0aW9ucyxcbiAgYXJyb3dTaGFwZVByb3BzLFxuICBhcnJvd1NoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEFycm93U2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createShapeValidator: () => (/* binding */ createShapeValidator),\n/* harmony export */   parentIdValidator: () => (/* binding */ parentIdValidator),\n/* harmony export */   shapeIdValidator: () => (/* binding */ shapeIdValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst parentIdValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string.refine((id) => {\n  if (!id.startsWith(\"page:\") && !id.startsWith(\"shape:\")) {\n    throw new Error('Parent ID must start with \"page:\" or \"shape:\"');\n  }\n  return id;\n});\nconst shapeIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"shape\");\nfunction createShapeValidator(type, props, meta) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: shapeIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"shape\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.indexKey,\n    parentId: parentIdValidator,\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    isLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n    opacity: _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_1__.opacityValidator,\n    props: props ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(props) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue,\n    meta: meta ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(meta) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCYXNlU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxQztBQUNvQjtBQUNGO0FBQ3ZELDBCQUEwQixzREFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx5QkFBeUIsbUVBQVc7QUFDcEM7QUFDQSxTQUFTLHNEQUFRO0FBQ2pCO0FBQ0EsY0FBYyx1REFBUztBQUN2QixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLGNBQWMsc0RBQVE7QUFDdEIsV0FBVyx3REFBVTtBQUNyQjtBQUNBLFVBQVUsdURBQVM7QUFDbkIsY0FBYyx1REFBUztBQUN2QixhQUFhLGlFQUFnQjtBQUM3QixtQkFBbUIsc0RBQVEsVUFBVSx5REFBVztBQUNoRCxpQkFBaUIsc0RBQVEsU0FBUyx5REFBVztBQUM3QyxHQUFHO0FBQ0g7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCYXNlU2hhcGUubWpzP2YxNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBvcGFjaXR5VmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExPcGFjaXR5Lm1qc1wiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9pZC12YWxpZGF0b3IubWpzXCI7XG5jb25zdCBwYXJlbnRJZFZhbGlkYXRvciA9IFQuc3RyaW5nLnJlZmluZSgoaWQpID0+IHtcbiAgaWYgKCFpZC5zdGFydHNXaXRoKFwicGFnZTpcIikgJiYgIWlkLnN0YXJ0c1dpdGgoXCJzaGFwZTpcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcmVudCBJRCBtdXN0IHN0YXJ0IHdpdGggXCJwYWdlOlwiIG9yIFwic2hhcGU6XCInKTtcbiAgfVxuICByZXR1cm4gaWQ7XG59KTtcbmNvbnN0IHNoYXBlSWRWYWxpZGF0b3IgPSBpZFZhbGlkYXRvcihcInNoYXBlXCIpO1xuZnVuY3Rpb24gY3JlYXRlU2hhcGVWYWxpZGF0b3IodHlwZSwgcHJvcHMsIG1ldGEpIHtcbiAgcmV0dXJuIFQub2JqZWN0KHtcbiAgICBpZDogc2hhcGVJZFZhbGlkYXRvcixcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwic2hhcGVcIiksXG4gICAgeDogVC5udW1iZXIsXG4gICAgeTogVC5udW1iZXIsXG4gICAgcm90YXRpb246IFQubnVtYmVyLFxuICAgIGluZGV4OiBULmluZGV4S2V5LFxuICAgIHBhcmVudElkOiBwYXJlbnRJZFZhbGlkYXRvcixcbiAgICB0eXBlOiBULmxpdGVyYWwodHlwZSksXG4gICAgaXNMb2NrZWQ6IFQuYm9vbGVhbixcbiAgICBvcGFjaXR5OiBvcGFjaXR5VmFsaWRhdG9yLFxuICAgIHByb3BzOiBwcm9wcyA/IFQub2JqZWN0KHByb3BzKSA6IFQuanNvblZhbHVlLFxuICAgIG1ldGE6IG1ldGEgPyBULm9iamVjdChtZXRhKSA6IFQuanNvblZhbHVlXG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlU2hhcGVWYWxpZGF0b3IsXG4gIHBhcmVudElkVmFsaWRhdG9yLFxuICBzaGFwZUlkVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExCYXNlU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bookmarkShapeMigrations: () => (/* binding */ bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* binding */ bookmarkShapeProps),\n/* harmony export */   bookmarkShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\nconst bookmarkShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable(),\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"bookmark\", {\n  NullAssetId: 1,\n  MakeUrlsValid: 2\n});\nconst bookmarkShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.NullAssetId,\n      up: (props) => {\n        if (props.assetId === void 0) {\n          props.assetId = null;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLBookmarkShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCb29rbWFya1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDd0I7QUFDNEM7QUFDekc7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsV0FBVyxxRUFBZ0I7QUFDM0IsT0FBTyx1REFBUztBQUNoQjtBQUNBLGlCQUFpQixrRkFBNEI7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCxnQ0FBZ0MsdUZBQWlDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCb29rbWFya1NoYXBlLm1qcz9jMWQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgYXNzZXRJZFZhbGlkYXRvciB9IGZyb20gXCIuLi9hc3NldHMvVExCYXNlQXNzZXQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuY29uc3QgYm9va21hcmtTaGFwZVByb3BzID0ge1xuICB3OiBULm5vblplcm9OdW1iZXIsXG4gIGg6IFQubm9uWmVyb051bWJlcixcbiAgYXNzZXRJZDogYXNzZXRJZFZhbGlkYXRvci5udWxsYWJsZSgpLFxuICB1cmw6IFQubGlua1VybFxufTtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcImJvb2ttYXJrXCIsIHtcbiAgTnVsbEFzc2V0SWQ6IDEsXG4gIE1ha2VVcmxzVmFsaWQ6IDJcbn0pO1xuY29uc3QgYm9va21hcmtTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5OdWxsQXNzZXRJZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKHByb3BzLmFzc2V0SWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHByb3BzLmFzc2V0SWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5NYWtlVXJsc1ZhbGlkLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAoIVQubGlua1VybC5pc1ZhbGlkKHByb3BzLnVybCkpIHtcbiAgICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogKF9wcm9wcykgPT4ge1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBib29rbWFya1NoYXBlTWlncmF0aW9ucyxcbiAgYm9va21hcmtTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBib29rbWFya1NoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEJvb2ttYXJrU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DrawShapeSegment: () => (/* binding */ DrawShapeSegment),\n/* harmony export */   drawShapeMigrations: () => (/* binding */ drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* binding */ drawShapeProps),\n/* harmony export */   drawShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\nconst DrawShapeSegment = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(\"free\", \"straight\"),\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__.vecModelValidator)\n});\nconst drawShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultSizeStyle,\n  segments: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(DrawShapeSegment),\n  isComplete: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isClosed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPen: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"draw\", {\n  AddInPen: 1,\n  AddScale: 2\n});\nconst drawShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddInPen,\n      up: (props) => {\n        const { points } = props.segments[0];\n        if (points.length === 0) {\n          props.isPen = false;\n          return;\n        }\n        let isPen = !(points[0].z === 0 || points[0].z === 0.5);\n        if (points[1]) {\n          isPen = isPen && !(points[1].z === 0 || points[1].z === 0.5);\n        }\n        props.isPen = isPen;\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLDrawShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExEcmF3U2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQzBCO0FBQzBDO0FBQzFDO0FBQ0Y7QUFDQTtBQUNBO0FBQzdELHlCQUF5QixzREFBUTtBQUNqQyxRQUFRLDJEQUFhO0FBQ3JCLFVBQVUsdURBQVMsQ0FBQyx1RUFBaUI7QUFDckMsQ0FBQztBQUNEO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsWUFBWSx1REFBUztBQUNyQixjQUFjLHVEQUFTO0FBQ3ZCLFlBQVksdURBQVM7QUFDckIsU0FBUyx1REFBUztBQUNsQixTQUFTLDZEQUFlO0FBQ3hCO0FBQ0EsaUJBQWlCLGtGQUE0QjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDRCQUE0Qix1RkFBaUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFNQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExEcmF3U2hhcGUubWpzPzJiM2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyB2ZWNNb2RlbFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RGFzaFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTERhc2hTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGaWxsU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRmlsbFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNpemVTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExTaXplU3R5bGUubWpzXCI7XG5jb25zdCBEcmF3U2hhcGVTZWdtZW50ID0gVC5vYmplY3Qoe1xuICB0eXBlOiBULmxpdGVyYWxFbnVtKFwiZnJlZVwiLCBcInN0cmFpZ2h0XCIpLFxuICBwb2ludHM6IFQuYXJyYXlPZih2ZWNNb2RlbFZhbGlkYXRvcilcbn0pO1xuY29uc3QgZHJhd1NoYXBlUHJvcHMgPSB7XG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgZmlsbDogRGVmYXVsdEZpbGxTdHlsZSxcbiAgZGFzaDogRGVmYXVsdERhc2hTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgc2VnbWVudHM6IFQuYXJyYXlPZihEcmF3U2hhcGVTZWdtZW50KSxcbiAgaXNDb21wbGV0ZTogVC5ib29sZWFuLFxuICBpc0Nsb3NlZDogVC5ib29sZWFuLFxuICBpc1BlbjogVC5ib29sZWFuLFxuICBzY2FsZTogVC5ub25aZXJvTnVtYmVyXG59O1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzKFwiZHJhd1wiLCB7XG4gIEFkZEluUGVuOiAxLFxuICBBZGRTY2FsZTogMlxufSk7XG5jb25zdCBkcmF3U2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkSW5QZW4sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcG9pbnRzIH0gPSBwcm9wcy5zZWdtZW50c1swXTtcbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBwcm9wcy5pc1BlbiA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaXNQZW4gPSAhKHBvaW50c1swXS56ID09PSAwIHx8IHBvaW50c1swXS56ID09PSAwLjUpO1xuICAgICAgICBpZiAocG9pbnRzWzFdKSB7XG4gICAgICAgICAgaXNQZW4gPSBpc1BlbiAmJiAhKHBvaW50c1sxXS56ID09PSAwIHx8IHBvaW50c1sxXS56ID09PSAwLjUpO1xuICAgICAgICB9XG4gICAgICAgIHByb3BzLmlzUGVuID0gaXNQZW47XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRTY2FsZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuc2NhbGUgPSAxO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMuc2NhbGU7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIERyYXdTaGFwZVNlZ21lbnQsXG4gIGRyYXdTaGFwZU1pZ3JhdGlvbnMsXG4gIGRyYXdTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBkcmF3U2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRHJhd1NoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embedShapeMigrations: () => (/* binding */ embedShapeMigrations),\n/* harmony export */   embedShapeProps: () => (/* binding */ embedShapeProps),\n/* harmony export */   embedShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\nconst TLDRAW_APP_RE = /(^\\/r\\/[^/]+\\/?$)/;\nconst EMBED_DEFINITIONS = [\n  {\n    hostnames: [\"beta.tldraw.com\", \"tldraw.com\", \"localhost:3000\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(TLDRAW_APP_RE)) {\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"figma.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/?$/)) {\n        const outUrl = urlObj.searchParams.get(\"url\");\n        if (outUrl) {\n          return outUrl;\n        }\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"google.*\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (!urlObj) return;\n      const matches = urlObj.pathname.match(/^\\/maps\\/embed\\/v1\\/view\\/?$/);\n      if (matches && urlObj.searchParams.has(\"center\") && urlObj.searchParams.get(\"zoom\")) {\n        const zoom = urlObj.searchParams.get(\"zoom\");\n        const [lat, lon] = urlObj.searchParams.get(\"center\").split(\",\");\n        return `https://www.google.com/maps/@${lat},${lon},${zoom}z`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"val.town\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/embed\\/(.+)\\/?/);\n      if (matches) {\n        return `https://www.val.town/v/${matches[1]}`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"codesandbox.io\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/embed\\/([^/]+)\\/?/);\n      if (matches) {\n        return `https://codesandbox.io/s/${matches[1]}`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"codepen.io\"],\n    fromEmbedUrl: (url) => {\n      const CODEPEN_EMBED_REGEXP = /https:\\/\\/codepen.io\\/([^/]+)\\/embed\\/([^/]+)/;\n      const matches = url.match(CODEPEN_EMBED_REGEXP);\n      if (matches) {\n        const [_, user, id] = matches;\n        return `https://codepen.io/${user}/pen/${id}`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"scratch.mit.edu\"],\n    fromEmbedUrl: (url) => {\n      const SCRATCH_EMBED_REGEXP = /https:\\/\\/scratch.mit.edu\\/projects\\/embed\\/([^/]+)/;\n      const matches = url.match(SCRATCH_EMBED_REGEXP);\n      if (matches) {\n        const [_, id] = matches;\n        return `https://scratch.mit.edu/projects/${id}`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"*.youtube.com\", \"youtube.com\", \"youtu.be\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (!urlObj) return;\n      const hostname = urlObj.hostname.replace(/^www./, \"\");\n      if (hostname === \"youtube.com\") {\n        const matches = urlObj.pathname.match(/^\\/embed\\/([^/]+)\\/?/);\n        if (matches) {\n          return `https://www.youtube.com/watch?v=${matches[1]}`;\n        }\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"calendar.google.*\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      const srcQs = urlObj?.searchParams.get(\"src\");\n      if (urlObj?.pathname.match(/\\/calendar\\/embed/) && srcQs) {\n        urlObj.pathname = \"/calendar/u/0\";\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        urlObj.searchParams.set(\"cid\", srcQs);\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"docs.google.*\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj?.pathname.match(/^\\/presentation/) && urlObj?.pathname.match(/\\/embed\\/?$/)) {\n        urlObj.pathname = urlObj.pathname.replace(/\\/embed$/, \"/pub\");\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"gist.github.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/\\/([^/]+)\\/([^/]+)/)) {\n        if (!url.split(\"/\").pop()) return;\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"replit.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/\\/@([^/]+)\\/([^/]+)/) && urlObj.searchParams.has(\"embed\")) {\n        urlObj.searchParams.delete(\"embed\");\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"felt.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/map\\//)) {\n        urlObj.pathname = urlObj.pathname.replace(/^\\/embed/, \"\");\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"open.spotify.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/(artist|album)\\//)) {\n        return urlObj.origin + urlObj.pathname.replace(/^\\/embed/, \"\");\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"vimeo.com\", \"player.vimeo.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.hostname === \"player.vimeo.com\") {\n        const matches = urlObj.pathname.match(/^\\/video\\/([^/]+)\\/?$/);\n        if (matches) {\n          return \"https://vimeo.com/\" + matches[1];\n        }\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"excalidraw.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.hash.match(/#room=/)) {\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"observablehq.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/@([^/]+)\\/([^/]+)\\/?$/)) {\n        return `${urlObj.origin}${urlObj.pathname.replace(\"/embed\", \"\")}#cell-*`;\n      }\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/([^/]+)\\/?$/)) {\n        return `${urlObj.origin}${urlObj.pathname.replace(\"/embed\", \"/d\")}#cell-*`;\n      }\n      return;\n    }\n  },\n  {\n    hostnames: [\"desmos.com\"],\n    fromEmbedUrl: (url) => {\n      const urlObj = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.safeParseUrl)(url);\n      if (urlObj && urlObj.hostname === \"www.desmos.com\" && urlObj.pathname.match(/^\\/calculator\\/([^/]+)\\/?$/) && urlObj.search === \"?embed\" && urlObj.hash === \"\") {\n        return url.replace(\"?embed\", \"\");\n      }\n      return;\n    }\n  }\n];\nconst embedShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.nonZeroNumber,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"embed\", {\n  GenOriginalUrlInEmbed: 1,\n  RemoveDoesResize: 2,\n  RemoveTmpOldUrl: 3,\n  RemovePermissionOverrides: 4\n});\nconst embedShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.GenOriginalUrlInEmbed,\n      // add tmpOldUrl property\n      up: (props) => {\n        try {\n          const url = props.url;\n          const host = new URL(url).host.replace(\"www.\", \"\");\n          let originalUrl;\n          for (const localEmbedDef of EMBED_DEFINITIONS) {\n            if (localEmbedDef.hostnames.includes(host)) {\n              try {\n                originalUrl = localEmbedDef.fromEmbedUrl(url);\n              } catch (err) {\n                console.warn(err);\n              }\n            }\n          }\n          props.tmpOldUrl = props.url;\n          props.url = originalUrl ?? \"\";\n        } catch (e) {\n          props.url = \"\";\n          props.tmpOldUrl = props.url;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveDoesResize,\n      up: (props) => {\n        delete props.doesResize;\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveTmpOldUrl,\n      up: (props) => {\n        delete props.tmpOldUrl;\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemovePermissionOverrides,\n      up: (props) => {\n        delete props.overridePermissions;\n      },\n      down: \"retired\"\n    }\n  ]\n});\n\n//# sourceMappingURL=TLEmbedShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExFbWJlZFNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkM7QUFDUjtBQUNvRTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsSUFBSSxHQUFHLElBQUksR0FBRyxLQUFLO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBLHlDQUF5QyxXQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBLDJDQUEyQyxXQUFXO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxLQUFLLE9BQU8sR0FBRztBQUNwRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsR0FBRztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsV0FBVztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwyREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwyREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFZO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVk7QUFDakM7QUFDQSxrQkFBa0IsY0FBYyxFQUFFLHNDQUFzQztBQUN4RTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWMsRUFBRSx3Q0FBd0M7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwyREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyw2REFBZTtBQUNwQixLQUFLLDZEQUFlO0FBQ3BCLE9BQU8sc0RBQVE7QUFDZjtBQUNBLGlCQUFpQixrRkFBNEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLHVGQUFpQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExFbWJlZFNoYXBlLm1qcz9mOWE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhZmVQYXJzZVVybCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMsIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCIuLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5jb25zdCBUTERSQVdfQVBQX1JFID0gLyheXFwvclxcL1teL10rXFwvPyQpLztcbmNvbnN0IEVNQkVEX0RFRklOSVRJT05TID0gW1xuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJiZXRhLnRsZHJhdy5jb21cIiwgXCJ0bGRyYXcuY29tXCIsIFwibG9jYWxob3N0OjMwMDBcIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKFRMRFJBV19BUFBfUkUpKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJmaWdtYS5jb21cIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvZW1iZWRcXC8/JC8pKSB7XG4gICAgICAgIGNvbnN0IG91dFVybCA9IHVybE9iai5zZWFyY2hQYXJhbXMuZ2V0KFwidXJsXCIpO1xuICAgICAgICBpZiAob3V0VXJsKSB7XG4gICAgICAgICAgcmV0dXJuIG91dFVybDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGhvc3RuYW1lczogW1wiZ29vZ2xlLipcIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICghdXJsT2JqKSByZXR1cm47XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvbWFwc1xcL2VtYmVkXFwvdjFcXC92aWV3XFwvPyQvKTtcbiAgICAgIGlmIChtYXRjaGVzICYmIHVybE9iai5zZWFyY2hQYXJhbXMuaGFzKFwiY2VudGVyXCIpICYmIHVybE9iai5zZWFyY2hQYXJhbXMuZ2V0KFwiem9vbVwiKSkge1xuICAgICAgICBjb25zdCB6b29tID0gdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoXCJ6b29tXCIpO1xuICAgICAgICBjb25zdCBbbGF0LCBsb25dID0gdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoXCJjZW50ZXJcIikuc3BsaXQoXCIsXCIpO1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vbWFwcy9AJHtsYXR9LCR7bG9ufSwke3pvb219emA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJ2YWwudG93blwiXSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL1xcL2VtYmVkXFwvKC4rKVxcLz8vKTtcbiAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cudmFsLnRvd24vdi8ke21hdGNoZXNbMV19YDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcImNvZGVzYW5kYm94LmlvXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXFwvZW1iZWRcXC8oW14vXSspXFwvPy8pO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIGBodHRwczovL2NvZGVzYW5kYm94LmlvL3MvJHttYXRjaGVzWzFdfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJjb2RlcGVuLmlvXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgQ09ERVBFTl9FTUJFRF9SRUdFWFAgPSAvaHR0cHM6XFwvXFwvY29kZXBlbi5pb1xcLyhbXi9dKylcXC9lbWJlZFxcLyhbXi9dKykvO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IHVybC5tYXRjaChDT0RFUEVOX0VNQkVEX1JFR0VYUCk7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBjb25zdCBbXywgdXNlciwgaWRdID0gbWF0Y2hlcztcbiAgICAgICAgcmV0dXJuIGBodHRwczovL2NvZGVwZW4uaW8vJHt1c2VyfS9wZW4vJHtpZH1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGhvc3RuYW1lczogW1wic2NyYXRjaC5taXQuZWR1XCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgU0NSQVRDSF9FTUJFRF9SRUdFWFAgPSAvaHR0cHM6XFwvXFwvc2NyYXRjaC5taXQuZWR1XFwvcHJvamVjdHNcXC9lbWJlZFxcLyhbXi9dKykvO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IHVybC5tYXRjaChTQ1JBVENIX0VNQkVEX1JFR0VYUCk7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBjb25zdCBbXywgaWRdID0gbWF0Y2hlcztcbiAgICAgICAgcmV0dXJuIGBodHRwczovL3NjcmF0Y2gubWl0LmVkdS9wcm9qZWN0cy8ke2lkfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCIqLnlvdXR1YmUuY29tXCIsIFwieW91dHViZS5jb21cIiwgXCJ5b3V0dS5iZVwiXSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKCF1cmxPYmopIHJldHVybjtcbiAgICAgIGNvbnN0IGhvc3RuYW1lID0gdXJsT2JqLmhvc3RuYW1lLnJlcGxhY2UoL153d3cuLywgXCJcIik7XG4gICAgICBpZiAoaG9zdG5hbWUgPT09IFwieW91dHViZS5jb21cIikge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvZW1iZWRcXC8oW14vXSspXFwvPy8pO1xuICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke21hdGNoZXNbMV19YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGhvc3RuYW1lczogW1wiY2FsZW5kYXIuZ29vZ2xlLipcIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGNvbnN0IHNyY1FzID0gdXJsT2JqPy5zZWFyY2hQYXJhbXMuZ2V0KFwic3JjXCIpO1xuICAgICAgaWYgKHVybE9iaj8ucGF0aG5hbWUubWF0Y2goL1xcL2NhbGVuZGFyXFwvZW1iZWQvKSAmJiBzcmNRcykge1xuICAgICAgICB1cmxPYmoucGF0aG5hbWUgPSBcIi9jYWxlbmRhci91LzBcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IEFycmF5LmZyb20odXJsT2JqLnNlYXJjaFBhcmFtcy5rZXlzKCkpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgICAgdXJsT2JqLnNlYXJjaFBhcmFtcy5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB1cmxPYmouc2VhcmNoUGFyYW1zLnNldChcImNpZFwiLCBzcmNRcyk7XG4gICAgICAgIHJldHVybiB1cmxPYmouaHJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcImRvY3MuZ29vZ2xlLipcIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmo/LnBhdGhuYW1lLm1hdGNoKC9eXFwvcHJlc2VudGF0aW9uLykgJiYgdXJsT2JqPy5wYXRobmFtZS5tYXRjaCgvXFwvZW1iZWRcXC8/JC8pKSB7XG4gICAgICAgIHVybE9iai5wYXRobmFtZSA9IHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9cXC9lbWJlZCQvLCBcIi9wdWJcIik7XG4gICAgICAgIGNvbnN0IGtleXMgPSBBcnJheS5mcm9tKHVybE9iai5zZWFyY2hQYXJhbXMua2V5cygpKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgIHVybE9iai5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybE9iai5ocmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGhvc3RuYW1lczogW1wiZ2lzdC5naXRodWIuY29tXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXFwvKFteL10rKVxcLyhbXi9dKykvKSkge1xuICAgICAgICBpZiAoIXVybC5zcGxpdChcIi9cIikucG9wKCkpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcInJlcGxpdC5jb21cIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9cXC9AKFteL10rKVxcLyhbXi9dKykvKSAmJiB1cmxPYmouc2VhcmNoUGFyYW1zLmhhcyhcImVtYmVkXCIpKSB7XG4gICAgICAgIHVybE9iai5zZWFyY2hQYXJhbXMuZGVsZXRlKFwiZW1iZWRcIik7XG4gICAgICAgIHJldHVybiB1cmxPYmouaHJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcImZlbHQuY29tXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2VtYmVkXFwvbWFwXFwvLykpIHtcbiAgICAgICAgdXJsT2JqLnBhdGhuYW1lID0gdXJsT2JqLnBhdGhuYW1lLnJlcGxhY2UoL15cXC9lbWJlZC8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gdXJsT2JqLmhyZWY7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJvcGVuLnNwb3RpZnkuY29tXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2VtYmVkXFwvKGFydGlzdHxhbGJ1bSlcXC8vKSkge1xuICAgICAgICByZXR1cm4gdXJsT2JqLm9yaWdpbiArIHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9eXFwvZW1iZWQvLCBcIlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcInZpbWVvLmNvbVwiLCBcInBsYXllci52aW1lby5jb21cIl0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLmhvc3RuYW1lID09PSBcInBsYXllci52aW1lby5jb21cIikge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvdmlkZW9cXC8oW14vXSspXFwvPyQvKTtcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICByZXR1cm4gXCJodHRwczovL3ZpbWVvLmNvbS9cIiArIG1hdGNoZXNbMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBob3N0bmFtZXM6IFtcImV4Y2FsaWRyYXcuY29tXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5oYXNoLm1hdGNoKC8jcm9vbT0vKSkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGhvc3RuYW1lczogW1wib2JzZXJ2YWJsZWhxLmNvbVwiXSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC9lbWJlZFxcL0AoW14vXSspXFwvKFteL10rKVxcLz8kLykpIHtcbiAgICAgICAgcmV0dXJuIGAke3VybE9iai5vcmlnaW59JHt1cmxPYmoucGF0aG5hbWUucmVwbGFjZShcIi9lbWJlZFwiLCBcIlwiKX0jY2VsbC0qYDtcbiAgICAgIH1cbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvZW1iZWRcXC8oW14vXSspXFwvPyQvKSkge1xuICAgICAgICByZXR1cm4gYCR7dXJsT2JqLm9yaWdpbn0ke3VybE9iai5wYXRobmFtZS5yZXBsYWNlKFwiL2VtYmVkXCIsIFwiL2RcIil9I2NlbGwtKmA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgaG9zdG5hbWVzOiBbXCJkZXNtb3MuY29tXCJdLFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5ob3N0bmFtZSA9PT0gXCJ3d3cuZGVzbW9zLmNvbVwiICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2NhbGN1bGF0b3JcXC8oW14vXSspXFwvPyQvKSAmJiB1cmxPYmouc2VhcmNoID09PSBcIj9lbWJlZFwiICYmIHVybE9iai5oYXNoID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiB1cmwucmVwbGFjZShcIj9lbWJlZFwiLCBcIlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbl07XG5jb25zdCBlbWJlZFNoYXBlUHJvcHMgPSB7XG4gIHc6IFQubm9uWmVyb051bWJlcixcbiAgaDogVC5ub25aZXJvTnVtYmVyLFxuICB1cmw6IFQuc3RyaW5nXG59O1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzKFwiZW1iZWRcIiwge1xuICBHZW5PcmlnaW5hbFVybEluRW1iZWQ6IDEsXG4gIFJlbW92ZURvZXNSZXNpemU6IDIsXG4gIFJlbW92ZVRtcE9sZFVybDogMyxcbiAgUmVtb3ZlUGVybWlzc2lvbk92ZXJyaWRlczogNFxufSk7XG5jb25zdCBlbWJlZFNoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkdlbk9yaWdpbmFsVXJsSW5FbWJlZCxcbiAgICAgIC8vIGFkZCB0bXBPbGRVcmwgcHJvcGVydHlcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBwcm9wcy51cmw7XG4gICAgICAgICAgY29uc3QgaG9zdCA9IG5ldyBVUkwodXJsKS5ob3N0LnJlcGxhY2UoXCJ3d3cuXCIsIFwiXCIpO1xuICAgICAgICAgIGxldCBvcmlnaW5hbFVybDtcbiAgICAgICAgICBmb3IgKGNvbnN0IGxvY2FsRW1iZWREZWYgb2YgRU1CRURfREVGSU5JVElPTlMpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbEVtYmVkRGVmLmhvc3RuYW1lcy5pbmNsdWRlcyhob3N0KSkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsVXJsID0gbG9jYWxFbWJlZERlZi5mcm9tRW1iZWRVcmwodXJsKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvcHMudG1wT2xkVXJsID0gcHJvcHMudXJsO1xuICAgICAgICAgIHByb3BzLnVybCA9IG9yaWdpbmFsVXJsID8/IFwiXCI7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgICAgIHByb3BzLnRtcE9sZFVybCA9IHByb3BzLnVybDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuUmVtb3ZlRG9lc1Jlc2l6ZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLmRvZXNSZXNpemU7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVUbXBPbGRVcmwsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy50bXBPbGRVcmw7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVQZXJtaXNzaW9uT3ZlcnJpZGVzLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMub3ZlcnJpZGVQZXJtaXNzaW9ucztcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBlbWJlZFNoYXBlTWlncmF0aW9ucyxcbiAgZW1iZWRTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBlbWJlZFNoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEVtYmVkU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   frameShapeMigrations: () => (/* binding */ frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* binding */ frameShapeProps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\nconst frameShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string\n};\nconst frameShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: []\n});\n\n//# sourceMappingURL=TLFrameShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExGcmFtZVNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBQ3NDO0FBQzNFO0FBQ0EsS0FBSyw2REFBZTtBQUNwQixLQUFLLDZEQUFlO0FBQ3BCLFFBQVEsc0RBQVE7QUFDaEI7QUFDQSw2QkFBNkIsdUZBQWlDO0FBQzlEO0FBQ0EsQ0FBQztBQUlDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTEZyYW1lU2hhcGUubWpzPzZmNjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuY29uc3QgZnJhbWVTaGFwZVByb3BzID0ge1xuICB3OiBULm5vblplcm9OdW1iZXIsXG4gIGg6IFQubm9uWmVyb051bWJlcixcbiAgbmFtZTogVC5zdHJpbmdcbn07XG5jb25zdCBmcmFtZVNoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXVxufSk7XG5leHBvcnQge1xuICBmcmFtZVNoYXBlTWlncmF0aW9ucyxcbiAgZnJhbWVTaGFwZVByb3BzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExGcmFtZVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeoShapeGeoStyle: () => (/* binding */ GeoShapeGeoStyle),\n/* harmony export */   geoShapeMigrations: () => (/* binding */ geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* binding */ geoShapeProps),\n/* harmony export */   geoShapeVersions: () => (/* binding */ geoShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst GeoShapeGeoStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_2__.StyleProp.defineEnum(\"tldraw:geo\", {\n  defaultValue: \"rectangle\",\n  values: [\n    \"cloud\",\n    \"rectangle\",\n    \"ellipse\",\n    \"triangle\",\n    \"diamond\",\n    \"pentagon\",\n    \"hexagon\",\n    \"octagon\",\n    \"star\",\n    \"rhombus\",\n    \"rhombus-2\",\n    \"oval\",\n    \"trapezoid\",\n    \"arrow-right\",\n    \"arrow-left\",\n    \"arrow-up\",\n    \"arrow-down\",\n    \"x-box\",\n    \"check-box\",\n    \"heart\"\n  ]\n});\nconst geoShapeProps = {\n  geo: GeoShapeGeoStyle,\n  labelColor: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultLabelColorStyle,\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultFontStyle,\n  align: _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultHorizontalAlignStyle,\n  verticalAlign: _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultVerticalAlignStyle,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  growY: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber\n};\nconst geoShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"geo\", {\n  AddUrlProp: 1,\n  AddLabelColor: 2,\n  RemoveJustify: 3,\n  AddCheckBox: 4,\n  AddVerticalAlign: 5,\n  MigrateLegacyAlign: 6,\n  AddCloud: 7,\n  MakeUrlsValid: 8,\n  AddScale: 9\n});\nconst geoShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: geoShapeVersions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddLabelColor,\n      up: (props) => {\n        props.labelColor = \"black\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddCheckBox,\n      up: (_props) => {\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddVerticalAlign,\n      up: (props) => {\n        props.verticalAlign = \"middle\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.MigrateLegacyAlign,\n      up: (props) => {\n        let newAlign;\n        switch (props.align) {\n          case \"start\":\n            newAlign = \"start-legacy\";\n            break;\n          case \"end\":\n            newAlign = \"end-legacy\";\n            break;\n          default:\n            newAlign = \"middle-legacy\";\n            break;\n        }\n        props.align = newAlign;\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddCloud,\n      up: (_props) => {\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    },\n    {\n      id: geoShapeVersions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLGeoShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHZW9TaGFwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0U7QUFDckQ7QUFJaEI7QUFDeUI7QUFDQTtBQUNBO0FBR2Y7QUFDZTtBQUdqQjtBQUM1Qyx5QkFBeUIsNERBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsY0FBYyw0RUFBc0I7QUFDcEMsU0FBUyx1RUFBaUI7QUFDMUIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsU0FBUywyRkFBMkI7QUFDcEMsaUJBQWlCLHVGQUF5QjtBQUMxQyxPQUFPLHVEQUFTO0FBQ2hCLEtBQUssNkRBQWU7QUFDcEIsS0FBSyw2REFBZTtBQUNwQixTQUFTLDhEQUFnQjtBQUN6QixRQUFRLHNEQUFRO0FBQ2hCLFNBQVMsNkRBQWU7QUFDeEI7QUFDQSx5QkFBeUIsa0ZBQTRCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsdUZBQWlDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBUztBQUN0QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFNQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHZW9TaGFwZS5tanM/YjFmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMsIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCIuLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi4vc3R5bGVzL1N0eWxlUHJvcC5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRDb2xvclN0eWxlLFxuICBEZWZhdWx0TGFiZWxDb2xvclN0eWxlXG59IGZyb20gXCIuLi9zdHlsZXMvVExDb2xvclN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdERhc2hTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExEYXNoU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RmlsbFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTEZpbGxTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGb250U3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRm9udFN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlXG59IGZyb20gXCIuLi9zdHlsZXMvVExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZVxufSBmcm9tIFwiLi4vc3R5bGVzL1RMVmVydGljYWxBbGlnblN0eWxlLm1qc1wiO1xuY29uc3QgR2VvU2hhcGVHZW9TdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3Omdlb1wiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJyZWN0YW5nbGVcIixcbiAgdmFsdWVzOiBbXG4gICAgXCJjbG91ZFwiLFxuICAgIFwicmVjdGFuZ2xlXCIsXG4gICAgXCJlbGxpcHNlXCIsXG4gICAgXCJ0cmlhbmdsZVwiLFxuICAgIFwiZGlhbW9uZFwiLFxuICAgIFwicGVudGFnb25cIixcbiAgICBcImhleGFnb25cIixcbiAgICBcIm9jdGFnb25cIixcbiAgICBcInN0YXJcIixcbiAgICBcInJob21idXNcIixcbiAgICBcInJob21idXMtMlwiLFxuICAgIFwib3ZhbFwiLFxuICAgIFwidHJhcGV6b2lkXCIsXG4gICAgXCJhcnJvdy1yaWdodFwiLFxuICAgIFwiYXJyb3ctbGVmdFwiLFxuICAgIFwiYXJyb3ctdXBcIixcbiAgICBcImFycm93LWRvd25cIixcbiAgICBcIngtYm94XCIsXG4gICAgXCJjaGVjay1ib3hcIixcbiAgICBcImhlYXJ0XCJcbiAgXVxufSk7XG5jb25zdCBnZW9TaGFwZVByb3BzID0ge1xuICBnZW86IEdlb1NoYXBlR2VvU3R5bGUsXG4gIGxhYmVsQ29sb3I6IERlZmF1bHRMYWJlbENvbG9yU3R5bGUsXG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgZmlsbDogRGVmYXVsdEZpbGxTdHlsZSxcbiAgZGFzaDogRGVmYXVsdERhc2hTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgZm9udDogRGVmYXVsdEZvbnRTdHlsZSxcbiAgYWxpZ246IERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZSxcbiAgdmVydGljYWxBbGlnbjogRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSxcbiAgdXJsOiBULmxpbmtVcmwsXG4gIHc6IFQubm9uWmVyb051bWJlcixcbiAgaDogVC5ub25aZXJvTnVtYmVyLFxuICBncm93WTogVC5wb3NpdGl2ZU51bWJlcixcbiAgdGV4dDogVC5zdHJpbmcsXG4gIHNjYWxlOiBULm5vblplcm9OdW1iZXJcbn07XG5jb25zdCBnZW9TaGFwZVZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcImdlb1wiLCB7XG4gIEFkZFVybFByb3A6IDEsXG4gIEFkZExhYmVsQ29sb3I6IDIsXG4gIFJlbW92ZUp1c3RpZnk6IDMsXG4gIEFkZENoZWNrQm94OiA0LFxuICBBZGRWZXJ0aWNhbEFsaWduOiA1LFxuICBNaWdyYXRlTGVnYWN5QWxpZ246IDYsXG4gIEFkZENsb3VkOiA3LFxuICBNYWtlVXJsc1ZhbGlkOiA4LFxuICBBZGRTY2FsZTogOVxufSk7XG5jb25zdCBnZW9TaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLkFkZFVybFByb3AsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnVybCA9IFwiXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLkFkZExhYmVsQ29sb3IsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmxhYmVsQ29sb3IgPSBcImJsYWNrXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLlJlbW92ZUp1c3RpZnksXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5hbGlnbiA9PT0gXCJqdXN0aWZ5XCIpIHtcbiAgICAgICAgICBwcm9wcy5hbGlnbiA9IFwic3RhcnRcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogZ2VvU2hhcGVWZXJzaW9ucy5BZGRDaGVja0JveCxcbiAgICAgIHVwOiAoX3Byb3BzKSA9PiB7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLkFkZFZlcnRpY2FsQWxpZ24sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogZ2VvU2hhcGVWZXJzaW9ucy5NaWdyYXRlTGVnYWN5QWxpZ24sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGxldCBuZXdBbGlnbjtcbiAgICAgICAgc3dpdGNoIChwcm9wcy5hbGlnbikge1xuICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgbmV3QWxpZ24gPSBcInN0YXJ0LWxlZ2FjeVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgbmV3QWxpZ24gPSBcImVuZC1sZWdhY3lcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuZXdBbGlnbiA9IFwibWlkZGxlLWxlZ2FjeVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcHMuYWxpZ24gPSBuZXdBbGlnbjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuQWRkQ2xvdWQsXG4gICAgICB1cDogKF9wcm9wcykgPT4ge1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogZ2VvU2hhcGVWZXJzaW9ucy5NYWtlVXJsc1ZhbGlkLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAoIVQubGlua1VybC5pc1ZhbGlkKHByb3BzLnVybCkpIHtcbiAgICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogKF9wcm9wcykgPT4ge1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuQWRkU2NhbGUsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnNjYWxlID0gMTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLnNjYWxlO1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBHZW9TaGFwZUdlb1N0eWxlLFxuICBnZW9TaGFwZU1pZ3JhdGlvbnMsXG4gIGdlb1NoYXBlUHJvcHMsXG4gIGdlb1NoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEdlb1NoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupShapeMigrations: () => (/* binding */ groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* binding */ groupShapeProps)\n/* harmony export */ });\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\nconst groupShapeProps = {};\nconst groupShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_0__.createShapePropsMigrationSequence)({ sequence: [] });\n\n//# sourceMappingURL=TLGroupShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHcm91cFNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkU7QUFDM0U7QUFDQSw2QkFBNkIsdUZBQWlDLEdBQUcsY0FBYztBQUk3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHcm91cFNoYXBlLm1qcz9hOTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCIuLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5jb25zdCBncm91cFNoYXBlUHJvcHMgPSB7fTtcbmNvbnN0IGdyb3VwU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHsgc2VxdWVuY2U6IFtdIH0pO1xuZXhwb3J0IHtcbiAgZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsXG4gIGdyb3VwU2hhcGVQcm9wc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMR3JvdXBTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   highlightShapeMigrations: () => (/* binding */ highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* binding */ highlightShapeProps),\n/* harmony export */   highlightShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n\n\n\n\n\nconst highlightShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultSizeStyle,\n  segments: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_4__.DrawShapeSegment),\n  isComplete: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPen: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"highlight\", {\n  AddScale: 1\n});\nconst highlightShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLHighlightShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExIaWdobGlnaHRTaGFwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0U7QUFDMUM7QUFDRjtBQUNSO0FBQ3JEO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUIsUUFBUSxxRUFBZ0I7QUFDeEIsWUFBWSx1REFBUyxDQUFDLDhEQUFnQjtBQUN0QyxjQUFjLHVEQUFTO0FBQ3ZCLFNBQVMsdURBQVM7QUFDbEIsU0FBUyw2REFBZTtBQUN4QjtBQUNBLGlCQUFpQixrRkFBNEI7QUFDN0M7QUFDQSxDQUFDO0FBQ0QsaUNBQWlDLHVGQUFpQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMSGlnaGxpZ2h0U2hhcGUubWpzPzNkOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdENvbG9yU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRHJhd1NoYXBlU2VnbWVudCB9IGZyb20gXCIuL1RMRHJhd1NoYXBlLm1qc1wiO1xuY29uc3QgaGlnaGxpZ2h0U2hhcGVQcm9wcyA9IHtcbiAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICBzaXplOiBEZWZhdWx0U2l6ZVN0eWxlLFxuICBzZWdtZW50czogVC5hcnJheU9mKERyYXdTaGFwZVNlZ21lbnQpLFxuICBpc0NvbXBsZXRlOiBULmJvb2xlYW4sXG4gIGlzUGVuOiBULmJvb2xlYW4sXG4gIHNjYWxlOiBULm5vblplcm9OdW1iZXJcbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJoaWdobGlnaHRcIiwge1xuICBBZGRTY2FsZTogMVxufSk7XG5jb25zdCBoaWdobGlnaHRTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRTY2FsZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuc2NhbGUgPSAxO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMuc2NhbGU7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIGhpZ2hsaWdodFNoYXBlTWlncmF0aW9ucyxcbiAgaGlnaGxpZ2h0U2hhcGVQcm9wcyxcbiAgVmVyc2lvbnMgYXMgaGlnaGxpZ2h0U2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMSGlnaGxpZ2h0U2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageShapeCrop: () => (/* binding */ ImageShapeCrop),\n/* harmony export */   imageShapeMigrations: () => (/* binding */ imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* binding */ imageShapeProps),\n/* harmony export */   imageShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\n\nconst ImageShapeCrop = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  topLeft: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  bottomRight: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator\n});\nconst imageShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  playing: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable(),\n  crop: ImageShapeCrop.nullable(),\n  flipX: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  flipY: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapePropsMigrationIds)(\"image\", {\n  AddUrlProp: 1,\n  AddCropProp: 2,\n  MakeUrlsValid: 3,\n  AddFlipProps: 4\n});\nconst imageShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddCropProp,\n      up: (props) => {\n        props.crop = null;\n      },\n      down: (props) => {\n        delete props.crop;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    },\n    {\n      id: Versions.AddFlipProps,\n      up: (props) => {\n        props.flipX = false;\n        props.flipY = false;\n      },\n      down: (props) => {\n        delete props.flipX;\n        delete props.flipY;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLImageShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExJbWFnZVNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxQztBQUN3QjtBQUNFO0FBQzBDO0FBQ3pHLHVCQUF1QixzREFBUTtBQUMvQixXQUFXLHVFQUFpQjtBQUM1QixlQUFlLHVFQUFpQjtBQUNoQyxDQUFDO0FBQ0Q7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsV0FBVyx1REFBUztBQUNwQixPQUFPLHVEQUFTO0FBQ2hCLFdBQVcscUVBQWdCO0FBQzNCO0FBQ0EsU0FBUyx1REFBUztBQUNsQixTQUFTLHVEQUFTO0FBQ2xCO0FBQ0EsaUJBQWlCLGtGQUE0QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsdUZBQWlDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTEltYWdlU2hhcGUubWpzPzhiMWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBhc3NldElkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2Fzc2V0cy9UTEJhc2VBc3NldC5tanNcIjtcbmltcG9ydCB7IHZlY01vZGVsVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvZ2VvbWV0cnktdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuY29uc3QgSW1hZ2VTaGFwZUNyb3AgPSBULm9iamVjdCh7XG4gIHRvcExlZnQ6IHZlY01vZGVsVmFsaWRhdG9yLFxuICBib3R0b21SaWdodDogdmVjTW9kZWxWYWxpZGF0b3Jcbn0pO1xuY29uc3QgaW1hZ2VTaGFwZVByb3BzID0ge1xuICB3OiBULm5vblplcm9OdW1iZXIsXG4gIGg6IFQubm9uWmVyb051bWJlcixcbiAgcGxheWluZzogVC5ib29sZWFuLFxuICB1cmw6IFQubGlua1VybCxcbiAgYXNzZXRJZDogYXNzZXRJZFZhbGlkYXRvci5udWxsYWJsZSgpLFxuICBjcm9wOiBJbWFnZVNoYXBlQ3JvcC5udWxsYWJsZSgpLFxuICBmbGlwWDogVC5ib29sZWFuLFxuICBmbGlwWTogVC5ib29sZWFuXG59O1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzKFwiaW1hZ2VcIiwge1xuICBBZGRVcmxQcm9wOiAxLFxuICBBZGRDcm9wUHJvcDogMixcbiAgTWFrZVVybHNWYWxpZDogMyxcbiAgQWRkRmxpcFByb3BzOiA0XG59KTtcbmNvbnN0IGltYWdlU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkVXJsUHJvcCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZENyb3BQcm9wLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5jcm9wID0gbnVsbDtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLmNyb3A7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKCFULmxpbmtVcmwuaXNWYWxpZChwcm9wcy51cmwpKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfcHJvcHMpID0+IHtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRGbGlwUHJvcHMsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmZsaXBYID0gZmFsc2U7XG4gICAgICAgIHByb3BzLmZsaXBZID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5mbGlwWDtcbiAgICAgICAgZGVsZXRlIHByb3BzLmZsaXBZO1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBJbWFnZVNoYXBlQ3JvcCxcbiAgaW1hZ2VTaGFwZU1pZ3JhdGlvbnMsXG4gIGltYWdlU2hhcGVQcm9wcyxcbiAgVmVyc2lvbnMgYXMgaW1hZ2VTaGFwZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExJbWFnZVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineShapeSplineStyle: () => (/* binding */ LineShapeSplineStyle),\n/* harmony export */   lineShapeMigrations: () => (/* binding */ lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* binding */ lineShapeProps),\n/* harmony export */   lineShapeVersions: () => (/* binding */ lineShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\nconst LineShapeSplineStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_3__.StyleProp.defineEnum(\"tldraw:spline\", {\n  defaultValue: \"line\",\n  values: [\"cubic\", \"line\"]\n});\nconst lineShapePointValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n  index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.indexKey,\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n});\nconst lineShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultColorStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultSizeStyle,\n  spline: LineShapeSplineStyle,\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.dict(_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string, lineShapePointValidator),\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.nonZeroNumber\n};\nconst lineShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"line\", {\n  AddSnapHandles: 1,\n  RemoveExtraHandleProps: 2,\n  HandlesToPoints: 3,\n  PointIndexIds: 4,\n  AddScale: 5\n});\nconst lineShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: lineShapeVersions.AddSnapHandles,\n      up: (props) => {\n        for (const handle of Object.values(props.handles)) {\n          ;\n          handle.canSnap = true;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: lineShapeVersions.RemoveExtraHandleProps,\n      up: (props) => {\n        props.handles = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapFromEntries)(\n          Object.values(props.handles).map((handle) => [\n            handle.index,\n            {\n              x: handle.x,\n              y: handle.y\n            }\n          ])\n        );\n      },\n      down: (props) => {\n        const handles = Object.entries(props.handles).map(([index, handle]) => ({ index, ...handle })).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.handles = Object.fromEntries(\n          handles.map((handle, i) => {\n            const id = i === 0 ? \"start\" : i === handles.length - 1 ? \"end\" : `handle:${handle.index}`;\n            return [\n              id,\n              {\n                id,\n                type: \"vertex\",\n                canBind: false,\n                canSnap: true,\n                index: handle.index,\n                x: handle.x,\n                y: handle.y\n              }\n            ];\n          })\n        );\n      }\n    },\n    {\n      id: lineShapeVersions.HandlesToPoints,\n      up: (props) => {\n        const sortedHandles = Object.entries(props.handles).map(([index, { x, y }]) => ({ x, y, index })).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.points = sortedHandles.map(({ x, y }) => ({ x, y }));\n        delete props.handles;\n      },\n      down: (props) => {\n        const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndices)(props.points.length);\n        props.handles = Object.fromEntries(\n          props.points.map((handle, i) => {\n            const index = indices[i];\n            return [\n              index,\n              {\n                x: handle.x,\n                y: handle.y\n              }\n            ];\n          })\n        );\n        delete props.points;\n      }\n    },\n    {\n      id: lineShapeVersions.PointIndexIds,\n      up: (props) => {\n        const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndices)(props.points.length);\n        props.points = Object.fromEntries(\n          props.points.map((point, i) => {\n            const id = indices[i];\n            return [\n              id,\n              {\n                id,\n                index: id,\n                x: point.x,\n                y: point.y\n              }\n            ];\n          })\n        );\n      },\n      down: (props) => {\n        const sortedHandles = Object.values(props.points).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.points = sortedHandles.map(({ x, y }) => ({ x, y }));\n      }\n    },\n    {\n      id: lineShapeVersions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLLineShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExMaW5lU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQThFO0FBQ3pDO0FBQ29FO0FBQ3JEO0FBQ1c7QUFDRjtBQUNBO0FBQzdELDZCQUE2Qiw0REFBUztBQUN0QztBQUNBO0FBQ0EsQ0FBQztBQUNELGdDQUFnQyxzREFBUTtBQUN4QyxNQUFNLHNEQUFRO0FBQ2QsU0FBUyx3REFBVTtBQUNuQixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFDRDtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCO0FBQ0EsVUFBVSxvREFBTSxDQUFDLHNEQUFRO0FBQ3pCLFNBQVMsNkRBQWU7QUFDeEI7QUFDQSwwQkFBMEIsa0ZBQTRCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLHVGQUFpQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtRUFBb0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGtGQUFrRixrQkFBa0IsUUFBUSxzREFBVztBQUN2SDtBQUNBO0FBQ0Esd0ZBQXdGLGFBQWE7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLE1BQU0sU0FBUyxhQUFhLFFBQVEsc0RBQVc7QUFDMUgsNENBQTRDLE1BQU0sUUFBUSxNQUFNO0FBQ2hFO0FBQ0EsT0FBTztBQUNQO0FBQ0Esd0JBQXdCLHlEQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsK0RBQStELHNEQUFXO0FBQzFFLDRDQUE0QyxNQUFNLFFBQVEsTUFBTTtBQUNoRTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTExpbmVTaGFwZS5tanM/MDJmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJbmRpY2VzLCBvYmplY3RNYXBGcm9tRW50cmllcywgc29ydEJ5SW5kZXggfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4uL3N0eWxlcy9TdHlsZVByb3AubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q29sb3JTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExDb2xvclN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdERhc2hTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExEYXNoU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmNvbnN0IExpbmVTaGFwZVNwbGluZVN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6c3BsaW5lXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcImxpbmVcIixcbiAgdmFsdWVzOiBbXCJjdWJpY1wiLCBcImxpbmVcIl1cbn0pO1xuY29uc3QgbGluZVNoYXBlUG9pbnRWYWxpZGF0b3IgPSBULm9iamVjdCh7XG4gIGlkOiBULnN0cmluZyxcbiAgaW5kZXg6IFQuaW5kZXhLZXksXG4gIHg6IFQubnVtYmVyLFxuICB5OiBULm51bWJlclxufSk7XG5jb25zdCBsaW5lU2hhcGVQcm9wcyA9IHtcbiAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICBkYXNoOiBEZWZhdWx0RGFzaFN0eWxlLFxuICBzaXplOiBEZWZhdWx0U2l6ZVN0eWxlLFxuICBzcGxpbmU6IExpbmVTaGFwZVNwbGluZVN0eWxlLFxuICBwb2ludHM6IFQuZGljdChULnN0cmluZywgbGluZVNoYXBlUG9pbnRWYWxpZGF0b3IpLFxuICBzY2FsZTogVC5ub25aZXJvTnVtYmVyXG59O1xuY29uc3QgbGluZVNoYXBlVmVyc2lvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzKFwibGluZVwiLCB7XG4gIEFkZFNuYXBIYW5kbGVzOiAxLFxuICBSZW1vdmVFeHRyYUhhbmRsZVByb3BzOiAyLFxuICBIYW5kbGVzVG9Qb2ludHM6IDMsXG4gIFBvaW50SW5kZXhJZHM6IDQsXG4gIEFkZFNjYWxlOiA1XG59KTtcbmNvbnN0IGxpbmVTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBsaW5lU2hhcGVWZXJzaW9ucy5BZGRTbmFwSGFuZGxlcyxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGUgb2YgT2JqZWN0LnZhbHVlcyhwcm9wcy5oYW5kbGVzKSkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBoYW5kbGUuY2FuU25hcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGxpbmVTaGFwZVZlcnNpb25zLlJlbW92ZUV4dHJhSGFuZGxlUHJvcHMsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmhhbmRsZXMgPSBvYmplY3RNYXBGcm9tRW50cmllcyhcbiAgICAgICAgICBPYmplY3QudmFsdWVzKHByb3BzLmhhbmRsZXMpLm1hcCgoaGFuZGxlKSA9PiBbXG4gICAgICAgICAgICBoYW5kbGUuaW5kZXgsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHg6IGhhbmRsZS54LFxuICAgICAgICAgICAgICB5OiBoYW5kbGUueVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXMgPSBPYmplY3QuZW50cmllcyhwcm9wcy5oYW5kbGVzKS5tYXAoKFtpbmRleCwgaGFuZGxlXSkgPT4gKHsgaW5kZXgsIC4uLmhhbmRsZSB9KSkuc29ydChzb3J0QnlJbmRleCk7XG4gICAgICAgIHByb3BzLmhhbmRsZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgaGFuZGxlcy5tYXAoKGhhbmRsZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBpID09PSAwID8gXCJzdGFydFwiIDogaSA9PT0gaGFuZGxlcy5sZW5ndGggLSAxID8gXCJlbmRcIiA6IGBoYW5kbGU6JHtoYW5kbGUuaW5kZXh9YDtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ2ZXJ0ZXhcIixcbiAgICAgICAgICAgICAgICBjYW5CaW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjYW5TbmFwOiB0cnVlLFxuICAgICAgICAgICAgICAgIGluZGV4OiBoYW5kbGUuaW5kZXgsXG4gICAgICAgICAgICAgICAgeDogaGFuZGxlLngsXG4gICAgICAgICAgICAgICAgeTogaGFuZGxlLnlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGxpbmVTaGFwZVZlcnNpb25zLkhhbmRsZXNUb1BvaW50cyxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgY29uc3Qgc29ydGVkSGFuZGxlcyA9IE9iamVjdC5lbnRyaWVzKHByb3BzLmhhbmRsZXMpLm1hcCgoW2luZGV4LCB7IHgsIHkgfV0pID0+ICh7IHgsIHksIGluZGV4IH0pKS5zb3J0KHNvcnRCeUluZGV4KTtcbiAgICAgICAgcHJvcHMucG9pbnRzID0gc29ydGVkSGFuZGxlcy5tYXAoKHsgeCwgeSB9KSA9PiAoeyB4LCB5IH0pKTtcbiAgICAgICAgZGVsZXRlIHByb3BzLmhhbmRsZXM7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGljZXMgPSBnZXRJbmRpY2VzKHByb3BzLnBvaW50cy5sZW5ndGgpO1xuICAgICAgICBwcm9wcy5oYW5kbGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgIHByb3BzLnBvaW50cy5tYXAoKGhhbmRsZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpbmRpY2VzW2ldO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB4OiBoYW5kbGUueCxcbiAgICAgICAgICAgICAgICB5OiBoYW5kbGUueVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5wb2ludHM7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogbGluZVNoYXBlVmVyc2lvbnMuUG9pbnRJbmRleElkcyxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IGdldEluZGljZXMocHJvcHMucG9pbnRzLmxlbmd0aCk7XG4gICAgICAgIHByb3BzLnBvaW50cyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICBwcm9wcy5wb2ludHMubWFwKChwb2ludCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBpbmRpY2VzW2ldO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBpbmRleDogaWQsXG4gICAgICAgICAgICAgICAgeDogcG9pbnQueCxcbiAgICAgICAgICAgICAgICB5OiBwb2ludC55XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgY29uc3Qgc29ydGVkSGFuZGxlcyA9IE9iamVjdC52YWx1ZXMocHJvcHMucG9pbnRzKS5zb3J0KHNvcnRCeUluZGV4KTtcbiAgICAgICAgcHJvcHMucG9pbnRzID0gc29ydGVkSGFuZGxlcy5tYXAoKHsgeCwgeSB9KSA9PiAoeyB4LCB5IH0pKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBsaW5lU2hhcGVWZXJzaW9ucy5BZGRTY2FsZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuc2NhbGUgPSAxO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMuc2NhbGU7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIExpbmVTaGFwZVNwbGluZVN0eWxlLFxuICBsaW5lU2hhcGVNaWdyYXRpb25zLFxuICBsaW5lU2hhcGVQcm9wcyxcbiAgbGluZVNoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTExpbmVTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   noteShapeMigrations: () => (/* binding */ noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* binding */ noteShapeProps),\n/* harmony export */   noteShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n\n\n\n\n\n\n\nconst noteShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultFontStyle,\n  fontSizeAdjustment: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  align: _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultHorizontalAlignStyle,\n  verticalAlign: _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultVerticalAlignStyle,\n  growY: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"note\", {\n  AddUrlProp: 1,\n  RemoveJustify: 2,\n  MigrateLegacyAlign: 3,\n  AddVerticalAlign: 4,\n  MakeUrlsValid: 5,\n  AddFontSizeAdjustment: 6,\n  AddScale: 7\n});\nconst noteShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MigrateLegacyAlign,\n      up: (props) => {\n        switch (props.align) {\n          case \"start\":\n            props.align = \"start-legacy\";\n            return;\n          case \"end\":\n            props.align = \"end-legacy\";\n            return;\n          default:\n            props.align = \"middle-legacy\";\n            return;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddVerticalAlign,\n      up: (props) => {\n        props.verticalAlign = \"middle\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    },\n    {\n      id: Versions.AddFontSizeAdjustment,\n      up: (props) => {\n        props.fontSizeAdjustment = 0;\n      },\n      down: (props) => {\n        delete props.fontSizeAdjustment;\n      }\n    },\n    {\n      id: Versions.AddScale,\n      up: (props) => {\n        props.scale = 1;\n      },\n      down: (props) => {\n        delete props.scale;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLNoteShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExOb3RlU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0U7QUFDMUM7QUFDRjtBQUdmO0FBQ2U7QUFHakI7QUFDNUM7QUFDQSxTQUFTLHVFQUFpQjtBQUMxQixRQUFRLHFFQUFnQjtBQUN4QixRQUFRLHFFQUFnQjtBQUN4QixzQkFBc0IsOERBQWdCO0FBQ3RDLFNBQVMsMkZBQTJCO0FBQ3BDLGlCQUFpQix1RkFBeUI7QUFDMUMsU0FBUyw4REFBZ0I7QUFDekIsT0FBTyx1REFBUztBQUNoQixRQUFRLHNEQUFRO0FBQ2hCLFNBQVMsNkRBQWU7QUFDeEI7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDRCQUE0Qix1RkFBaUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExOb3RlU2hhcGUubWpzP2VkNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdENvbG9yU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGb250U3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRm9udFN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlXG59IGZyb20gXCIuLi9zdHlsZXMvVExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZVxufSBmcm9tIFwiLi4vc3R5bGVzL1RMVmVydGljYWxBbGlnblN0eWxlLm1qc1wiO1xuY29uc3Qgbm90ZVNoYXBlUHJvcHMgPSB7XG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgZm9udDogRGVmYXVsdEZvbnRTdHlsZSxcbiAgZm9udFNpemVBZGp1c3RtZW50OiBULnBvc2l0aXZlTnVtYmVyLFxuICBhbGlnbjogRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlLFxuICB2ZXJ0aWNhbEFsaWduOiBEZWZhdWx0VmVydGljYWxBbGlnblN0eWxlLFxuICBncm93WTogVC5wb3NpdGl2ZU51bWJlcixcbiAgdXJsOiBULmxpbmtVcmwsXG4gIHRleHQ6IFQuc3RyaW5nLFxuICBzY2FsZTogVC5ub25aZXJvTnVtYmVyXG59O1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzKFwibm90ZVwiLCB7XG4gIEFkZFVybFByb3A6IDEsXG4gIFJlbW92ZUp1c3RpZnk6IDIsXG4gIE1pZ3JhdGVMZWdhY3lBbGlnbjogMyxcbiAgQWRkVmVydGljYWxBbGlnbjogNCxcbiAgTWFrZVVybHNWYWxpZDogNSxcbiAgQWRkRm9udFNpemVBZGp1c3RtZW50OiA2LFxuICBBZGRTY2FsZTogN1xufSk7XG5jb25zdCBub3RlU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkVXJsUHJvcCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbW92ZUp1c3RpZnksXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5hbGlnbiA9PT0gXCJqdXN0aWZ5XCIpIHtcbiAgICAgICAgICBwcm9wcy5hbGlnbiA9IFwic3RhcnRcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWlncmF0ZUxlZ2FjeUFsaWduLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBzd2l0Y2ggKHByb3BzLmFsaWduKSB7XG4gICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICBwcm9wcy5hbGlnbiA9IFwic3RhcnQtbGVnYWN5XCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgcHJvcHMuYWxpZ24gPSBcImVuZC1sZWdhY3lcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcHJvcHMuYWxpZ24gPSBcIm1pZGRsZS1sZWdhY3lcIjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkVmVydGljYWxBbGlnbixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5NYWtlVXJsc1ZhbGlkLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAoIVQubGlua1VybC5pc1ZhbGlkKHByb3BzLnVybCkpIHtcbiAgICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogKF9wcm9wcykgPT4ge1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZEZvbnRTaXplQWRqdXN0bWVudCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuZm9udFNpemVBZGp1c3RtZW50ID0gMDtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLmZvbnRTaXplQWRqdXN0bWVudDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRTY2FsZSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuc2NhbGUgPSAxO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMuc2NhbGU7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIG5vdGVTaGFwZU1pZ3JhdGlvbnMsXG4gIG5vdGVTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBub3RlU2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMTm90ZVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   textShapeMigrations: () => (/* binding */ textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* binding */ textShapeProps),\n/* harmony export */   textShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLTextAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\");\n\n\n\n\n\n\nconst textShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultFontStyle,\n  textAlign: _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultTextAlignStyle,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  autoSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"text\", {\n  RemoveJustify: 1,\n  AddTextAlign: 2\n});\nconst textShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddTextAlign,\n      up: (props) => {\n        props.textAlign = props.align;\n        delete props.align;\n      },\n      down: (props) => {\n        props.align = props.textAlign;\n        delete props.textAlign;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLTextShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExUZXh0U2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxQztBQUNvRTtBQUMxQztBQUNGO0FBQ0E7QUFDVTtBQUN2RTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCLGFBQWEsK0VBQXFCO0FBQ2xDLEtBQUssNkRBQWU7QUFDcEIsUUFBUSxzREFBUTtBQUNoQixTQUFTLDZEQUFlO0FBQ3hCLFlBQVksdURBQVM7QUFDckI7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLHVGQUFpQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExUZXh0U2hhcGUubWpzP2E2ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdENvbG9yU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGb250U3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRm9udFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNpemVTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExTaXplU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0VGV4dEFsaWduU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMVGV4dEFsaWduU3R5bGUubWpzXCI7XG5jb25zdCB0ZXh0U2hhcGVQcm9wcyA9IHtcbiAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICBzaXplOiBEZWZhdWx0U2l6ZVN0eWxlLFxuICBmb250OiBEZWZhdWx0Rm9udFN0eWxlLFxuICB0ZXh0QWxpZ246IERlZmF1bHRUZXh0QWxpZ25TdHlsZSxcbiAgdzogVC5ub25aZXJvTnVtYmVyLFxuICB0ZXh0OiBULnN0cmluZyxcbiAgc2NhbGU6IFQubm9uWmVyb051bWJlcixcbiAgYXV0b1NpemU6IFQuYm9vbGVhblxufTtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcInRleHRcIiwge1xuICBSZW1vdmVKdXN0aWZ5OiAxLFxuICBBZGRUZXh0QWxpZ246IDJcbn0pO1xuY29uc3QgdGV4dFNoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbW92ZUp1c3RpZnksXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5hbGlnbiA9PT0gXCJqdXN0aWZ5XCIpIHtcbiAgICAgICAgICBwcm9wcy5hbGlnbiA9IFwic3RhcnRcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkVGV4dEFsaWduLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy50ZXh0QWxpZ24gPSBwcm9wcy5hbGlnbjtcbiAgICAgICAgZGVsZXRlIHByb3BzLmFsaWduO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5hbGlnbiA9IHByb3BzLnRleHRBbGlnbjtcbiAgICAgICAgZGVsZXRlIHByb3BzLnRleHRBbGlnbjtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgdGV4dFNoYXBlTWlncmF0aW9ucyxcbiAgdGV4dFNoYXBlUHJvcHMsXG4gIFZlcnNpb25zIGFzIHRleHRTaGFwZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExUZXh0U2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   videoShapeMigrations: () => (/* binding */ videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* binding */ videoShapeProps),\n/* harmony export */   videoShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\nconst videoShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  time: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  playing: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable()\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"video\", {\n  AddUrlProp: 1,\n  MakeUrlsValid: 2\n});\nconst videoShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLVideoShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExWaWRlb1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDd0I7QUFDNEM7QUFDekc7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsUUFBUSxzREFBUTtBQUNoQixXQUFXLHVEQUFTO0FBQ3BCLE9BQU8sdURBQVM7QUFDaEIsV0FBVyxxRUFBZ0I7QUFDM0I7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLHVGQUFpQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExWaWRlb1NoYXBlLm1qcz9mYzM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgYXNzZXRJZFZhbGlkYXRvciB9IGZyb20gXCIuLi9hc3NldHMvVExCYXNlQXNzZXQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuY29uc3QgdmlkZW9TaGFwZVByb3BzID0ge1xuICB3OiBULm5vblplcm9OdW1iZXIsXG4gIGg6IFQubm9uWmVyb051bWJlcixcbiAgdGltZTogVC5udW1iZXIsXG4gIHBsYXlpbmc6IFQuYm9vbGVhbixcbiAgdXJsOiBULmxpbmtVcmwsXG4gIGFzc2V0SWQ6IGFzc2V0SWRWYWxpZGF0b3IubnVsbGFibGUoKVxufTtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcInZpZGVvXCIsIHtcbiAgQWRkVXJsUHJvcDogMSxcbiAgTWFrZVVybHNWYWxpZDogMlxufSk7XG5jb25zdCB2aWRlb1NoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZFVybFByb3AsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnVybCA9IFwiXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5NYWtlVXJsc1ZhbGlkLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAoIVQubGlua1VybC5pc1ZhbGlkKHByb3BzLnVybCkpIHtcbiAgICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogKF9wcm9wcykgPT4ge1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICB2aWRlb1NoYXBlTWlncmF0aW9ucyxcbiAgdmlkZW9TaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyB2aWRlb1NoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFZpZGVvU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storeMigrations: () => (/* binding */ storeMigrations),\n/* harmony export */   storeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.store\", {\n  RemoveCodeAndIconShapeTypes: 1,\n  AddInstancePresenceType: 2,\n  RemoveTLUserAndPresenceAndAddPointer: 3,\n  RemoveUserDocument: 4\n});\nconst storeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n  sequenceId: \"com.tldraw.store\",\n  retroactive: false,\n  sequence: [\n    {\n      id: Versions.RemoveCodeAndIconShapeTypes,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName === \"shape\" && (record.type === \"icon\" || record.type === \"code\")) {\n            delete store[id];\n          }\n        }\n      }\n    },\n    {\n      id: Versions.AddInstancePresenceType,\n      scope: \"store\",\n      up(_store) {\n      }\n    },\n    {\n      // remove user and presence records and add pointer records\n      id: Versions.RemoveTLUserAndPresenceAndAddPointer,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName.match(/^(user|user_presence)$/)) {\n            delete store[id];\n          }\n        }\n      }\n    },\n    {\n      // remove user document records\n      id: Versions.RemoveUserDocument,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName.match(\"user_document\")) {\n            delete store[id];\n          }\n        }\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=store-migrations.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdG9yZS1taWdyYXRpb25zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRFO0FBQzNCO0FBQ2pELGlCQUFpQixpRUFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLHNFQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsK0RBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBSUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc3RvcmUtbWlncmF0aW9ucy5tanM/NmU2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVNaWdyYXRpb25JZHMsIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IG9iamVjdE1hcEVudHJpZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuY29uc3QgVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3LnN0b3JlXCIsIHtcbiAgUmVtb3ZlQ29kZUFuZEljb25TaGFwZVR5cGVzOiAxLFxuICBBZGRJbnN0YW5jZVByZXNlbmNlVHlwZTogMixcbiAgUmVtb3ZlVExVc2VyQW5kUHJlc2VuY2VBbmRBZGRQb2ludGVyOiAzLFxuICBSZW1vdmVVc2VyRG9jdW1lbnQ6IDRcbn0pO1xuY29uc3Qgc3RvcmVNaWdyYXRpb25zID0gY3JlYXRlTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuc3RvcmVcIixcbiAgcmV0cm9hY3RpdmU6IGZhbHNlLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVDb2RlQW5kSWNvblNoYXBlVHlwZXMsXG4gICAgICBzY29wZTogXCJzdG9yZVwiLFxuICAgICAgdXA6IChzdG9yZSkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgcmVjb3JkXSBvZiBvYmplY3RNYXBFbnRyaWVzKHN0b3JlKSkge1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZU5hbWUgPT09IFwic2hhcGVcIiAmJiAocmVjb3JkLnR5cGUgPT09IFwiaWNvblwiIHx8IHJlY29yZC50eXBlID09PSBcImNvZGVcIikpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdG9yZVtpZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkSW5zdGFuY2VQcmVzZW5jZVR5cGUsXG4gICAgICBzY29wZTogXCJzdG9yZVwiLFxuICAgICAgdXAoX3N0b3JlKSB7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAvLyByZW1vdmUgdXNlciBhbmQgcHJlc2VuY2UgcmVjb3JkcyBhbmQgYWRkIHBvaW50ZXIgcmVjb3Jkc1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbW92ZVRMVXNlckFuZFByZXNlbmNlQW5kQWRkUG9pbnRlcixcbiAgICAgIHNjb3BlOiBcInN0b3JlXCIsXG4gICAgICB1cDogKHN0b3JlKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIG9iamVjdE1hcEVudHJpZXMoc3RvcmUpKSB7XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlTmFtZS5tYXRjaCgvXih1c2VyfHVzZXJfcHJlc2VuY2UpJC8pKSB7XG4gICAgICAgICAgICBkZWxldGUgc3RvcmVbaWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gcmVtb3ZlIHVzZXIgZG9jdW1lbnQgcmVjb3Jkc1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbW92ZVVzZXJEb2N1bWVudCxcbiAgICAgIHNjb3BlOiBcInN0b3JlXCIsXG4gICAgICB1cDogKHN0b3JlKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIG9iamVjdE1hcEVudHJpZXMoc3RvcmUpKSB7XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlTmFtZS5tYXRjaChcInVzZXJfZG9jdW1lbnRcIikpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdG9yZVtpZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIHN0b3JlTWlncmF0aW9ucyxcbiAgVmVyc2lvbnMgYXMgc3RvcmVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlLW1pZ3JhdGlvbnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnumStyleProp: () => (/* binding */ EnumStyleProp),\n/* harmony export */   StyleProp: () => (/* binding */ StyleProp)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nclass StyleProp {\n  /** @internal */\n  constructor(id, defaultValue, type) {\n    this.id = id;\n    this.defaultValue = defaultValue;\n    this.type = type;\n  }\n  /**\n   * Define a new {@link StyleProp}.\n   *\n   * @param uniqueId - Each StyleProp must have a unique ID. We recommend you prefix this with\n   * your app/library name.\n   * @param options -\n   * - `defaultValue`: The default value for this style prop.\n   *\n   * - `type`: Optionally, describe what type of data you expect for this style prop.\n   *\n   * @example\n   * ```ts\n   * import {T} from '@tldraw/validate'\n   * import {StyleProp} from '@tldraw/tlschema'\n   *\n   * const MyLineWidthProp = StyleProp.define('myApp:lineWidth', {\n   *   defaultValue: 1,\n   *   type: T.number,\n   * })\n   * ```\n   * @public\n   */\n  static define(uniqueId, options) {\n    const { defaultValue, type = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.any } = options;\n    return new StyleProp(uniqueId, defaultValue, type);\n  }\n  /**\n   * Define a new {@link StyleProp} as a list of possible values.\n   *\n   * @param uniqueId - Each StyleProp must have a unique ID. We recommend you prefix this with\n   * your app/library name.\n   * @param options -\n   * - `defaultValue`: The default value for this style prop.\n   *\n   * - `values`: An array of possible values of this style prop.\n   *\n   * @example\n   * ```ts\n   * import {StyleProp} from '@tldraw/tlschema'\n   *\n   * const MySizeProp = StyleProp.defineEnum('myApp:size', {\n   *   defaultValue: 'medium',\n   *   values: ['small', 'medium', 'large'],\n   * })\n   * ```\n   */\n  static defineEnum(uniqueId, options) {\n    const { defaultValue, values } = options;\n    return new EnumStyleProp(uniqueId, defaultValue, values);\n  }\n  setDefaultValue(value) {\n    this.defaultValue = value;\n  }\n  validate(value) {\n    return this.type.validate(value);\n  }\n  validateUsingKnownGoodVersion(prevValue, newValue) {\n    if (this.type.validateUsingKnownGoodVersion) {\n      return this.type.validateUsingKnownGoodVersion(prevValue, newValue);\n    } else {\n      return this.validate(newValue);\n    }\n  }\n}\nclass EnumStyleProp extends StyleProp {\n  /** @internal */\n  constructor(id, defaultValue, values) {\n    super(id, defaultValue, _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(...values));\n    this.values = values;\n  }\n}\n\n//# sourceMappingURL=StyleProp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvU3R5bGVQcm9wLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLEdBQUc7QUFDaEIsYUFBYSxXQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxQkFBcUIsbURBQUssR0FBRztBQUN6QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQWE7QUFDekM7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc3R5bGVzL1N0eWxlUHJvcC5tanM/MDNkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmNsYXNzIFN0eWxlUHJvcCB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY29uc3RydWN0b3IoaWQsIGRlZmF1bHRWYWx1ZSwgdHlwZSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICB9XG4gIC8qKlxuICAgKiBEZWZpbmUgYSBuZXcge0BsaW5rIFN0eWxlUHJvcH0uXG4gICAqXG4gICAqIEBwYXJhbSB1bmlxdWVJZCAtIEVhY2ggU3R5bGVQcm9wIG11c3QgaGF2ZSBhIHVuaXF1ZSBJRC4gV2UgcmVjb21tZW5kIHlvdSBwcmVmaXggdGhpcyB3aXRoXG4gICAqIHlvdXIgYXBwL2xpYnJhcnkgbmFtZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgLVxuICAgKiAtIGBkZWZhdWx0VmFsdWVgOiBUaGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyBzdHlsZSBwcm9wLlxuICAgKlxuICAgKiAtIGB0eXBlYDogT3B0aW9uYWxseSwgZGVzY3JpYmUgd2hhdCB0eXBlIG9mIGRhdGEgeW91IGV4cGVjdCBmb3IgdGhpcyBzdHlsZSBwcm9wLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBpbXBvcnQge1R9IGZyb20gJ0B0bGRyYXcvdmFsaWRhdGUnXG4gICAqIGltcG9ydCB7U3R5bGVQcm9wfSBmcm9tICdAdGxkcmF3L3Rsc2NoZW1hJ1xuICAgKlxuICAgKiBjb25zdCBNeUxpbmVXaWR0aFByb3AgPSBTdHlsZVByb3AuZGVmaW5lKCdteUFwcDpsaW5lV2lkdGgnLCB7XG4gICAqICAgZGVmYXVsdFZhbHVlOiAxLFxuICAgKiAgIHR5cGU6IFQubnVtYmVyLFxuICAgKiB9KVxuICAgKiBgYGBcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGRlZmluZSh1bmlxdWVJZCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgZGVmYXVsdFZhbHVlLCB0eXBlID0gVC5hbnkgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIG5ldyBTdHlsZVByb3AodW5pcXVlSWQsIGRlZmF1bHRWYWx1ZSwgdHlwZSk7XG4gIH1cbiAgLyoqXG4gICAqIERlZmluZSBhIG5ldyB7QGxpbmsgU3R5bGVQcm9wfSBhcyBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0gdW5pcXVlSWQgLSBFYWNoIFN0eWxlUHJvcCBtdXN0IGhhdmUgYSB1bmlxdWUgSUQuIFdlIHJlY29tbWVuZCB5b3UgcHJlZml4IHRoaXMgd2l0aFxuICAgKiB5b3VyIGFwcC9saWJyYXJ5IG5hbWUuXG4gICAqIEBwYXJhbSBvcHRpb25zIC1cbiAgICogLSBgZGVmYXVsdFZhbHVlYDogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoaXMgc3R5bGUgcHJvcC5cbiAgICpcbiAgICogLSBgdmFsdWVzYDogQW4gYXJyYXkgb2YgcG9zc2libGUgdmFsdWVzIG9mIHRoaXMgc3R5bGUgcHJvcC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHtTdHlsZVByb3B9IGZyb20gJ0B0bGRyYXcvdGxzY2hlbWEnXG4gICAqXG4gICAqIGNvbnN0IE15U2l6ZVByb3AgPSBTdHlsZVByb3AuZGVmaW5lRW51bSgnbXlBcHA6c2l6ZScsIHtcbiAgICogICBkZWZhdWx0VmFsdWU6ICdtZWRpdW0nLFxuICAgKiAgIHZhbHVlczogWydzbWFsbCcsICdtZWRpdW0nLCAnbGFyZ2UnXSxcbiAgICogfSlcbiAgICogYGBgXG4gICAqL1xuICBzdGF0aWMgZGVmaW5lRW51bSh1bmlxdWVJZCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgZGVmYXVsdFZhbHVlLCB2YWx1ZXMgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIG5ldyBFbnVtU3R5bGVQcm9wKHVuaXF1ZUlkLCBkZWZhdWx0VmFsdWUsIHZhbHVlcyk7XG4gIH1cbiAgc2V0RGVmYXVsdFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5kZWZhdWx0VmFsdWUgPSB2YWx1ZTtcbiAgfVxuICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLnR5cGUudmFsaWRhdGUodmFsdWUpO1xuICB9XG4gIHZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHByZXZWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICBpZiAodGhpcy50eXBlLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy50eXBlLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHByZXZWYWx1ZSwgbmV3VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZShuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG59XG5jbGFzcyBFbnVtU3R5bGVQcm9wIGV4dGVuZHMgU3R5bGVQcm9wIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBjb25zdHJ1Y3RvcihpZCwgZGVmYXVsdFZhbHVlLCB2YWx1ZXMpIHtcbiAgICBzdXBlcihpZCwgZGVmYXVsdFZhbHVlLCBULmxpdGVyYWxFbnVtKC4uLnZhbHVlcykpO1xuICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICB9XG59XG5leHBvcnQge1xuICBFbnVtU3R5bGVQcm9wLFxuICBTdHlsZVByb3Bcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHlsZVByb3AubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultColorStyle: () => (/* binding */ DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* binding */ DefaultColorThemePalette),\n/* harmony export */   DefaultLabelColorStyle: () => (/* binding */ DefaultLabelColorStyle),\n/* harmony export */   defaultColorNames: () => (/* binding */ defaultColorNames),\n/* harmony export */   getDefaultColorTheme: () => (/* binding */ getDefaultColorTheme)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst defaultColorNames = [\n  \"black\",\n  \"grey\",\n  \"light-violet\",\n  \"violet\",\n  \"blue\",\n  \"light-blue\",\n  \"yellow\",\n  \"orange\",\n  \"green\",\n  \"light-green\",\n  \"light-red\",\n  \"red\",\n  \"white\"\n];\nconst DefaultColorThemePalette = {\n  lightMode: {\n    id: \"light\",\n    text: \"#000000\",\n    background: \"rgb(249, 250, 251)\",\n    solid: \"#fcfffe\",\n    black: {\n      solid: \"#1d1d1d\",\n      fill: \"#1d1d1d\",\n      note: {\n        fill: \"#FCE19C\",\n        text: \"#000000\"\n      },\n      semi: \"#e8e8e8\",\n      pattern: \"#494949\",\n      highlight: {\n        srgb: \"#fddd00\",\n        p3: \"color(display-p3 0.972 0.8705 0.05)\"\n      }\n    },\n    blue: {\n      solid: \"#4465e9\",\n      fill: \"#4465e9\",\n      note: {\n        fill: \"#8AA3FF\",\n        text: \"#000000\"\n      },\n      semi: \"#dce1f8\",\n      pattern: \"#6681ee\",\n      highlight: {\n        srgb: \"#10acff\",\n        p3: \"color(display-p3 0.308 0.6632 0.9996)\"\n      }\n    },\n    green: {\n      solid: \"#099268\",\n      fill: \"#099268\",\n      note: {\n        fill: \"#6FC896\",\n        text: \"#000000\"\n      },\n      semi: \"#d3e9e3\",\n      pattern: \"#39a785\",\n      highlight: {\n        srgb: \"#00ffc8\",\n        p3: \"color(display-p3 0.2536 0.984 0.7981)\"\n      }\n    },\n    grey: {\n      solid: \"#9fa8b2\",\n      fill: \"#9fa8b2\",\n      note: {\n        fill: \"#C0CAD3\",\n        text: \"#000000\"\n      },\n      semi: \"#eceef0\",\n      pattern: \"#bcc3c9\",\n      highlight: {\n        srgb: \"#cbe7f1\",\n        p3: \"color(display-p3 0.8163 0.9023 0.9416)\"\n      }\n    },\n    \"light-blue\": {\n      solid: \"#4ba1f1\",\n      fill: \"#4ba1f1\",\n      note: {\n        fill: \"#9BC4FD\",\n        text: \"#000000\"\n      },\n      semi: \"#ddedfa\",\n      pattern: \"#6fbbf8\",\n      highlight: {\n        srgb: \"#00f4ff\",\n        p3: \"color(display-p3 0.1512 0.9414 0.9996)\"\n      }\n    },\n    \"light-green\": {\n      solid: \"#4cb05e\",\n      fill: \"#4cb05e\",\n      note: {\n        fill: \"#98D08A\",\n        text: \"#000000\"\n      },\n      semi: \"#dbf0e0\",\n      pattern: \"#65cb78\",\n      highlight: {\n        srgb: \"#65f641\",\n        p3: \"color(display-p3 0.563 0.9495 0.3857)\"\n      }\n    },\n    \"light-red\": {\n      solid: \"#f87777\",\n      fill: \"#f87777\",\n      note: {\n        fill: \"#F7A5A1\",\n        text: \"#000000\"\n      },\n      semi: \"#f4dadb\",\n      pattern: \"#fe9e9e\",\n      highlight: {\n        srgb: \"#ff7fa3\",\n        p3: \"color(display-p3 0.9988 0.5301 0.6397)\"\n      }\n    },\n    \"light-violet\": {\n      solid: \"#e085f4\",\n      fill: \"#e085f4\",\n      note: {\n        fill: \"#DFB0F9\",\n        text: \"#000000\"\n      },\n      semi: \"#f5eafa\",\n      pattern: \"#e9acf8\",\n      highlight: {\n        srgb: \"#ff88ff\",\n        p3: \"color(display-p3 0.9676 0.5652 0.9999)\"\n      }\n    },\n    orange: {\n      solid: \"#e16919\",\n      fill: \"#e16919\",\n      note: {\n        fill: \"#FAA475\",\n        text: \"#000000\"\n      },\n      semi: \"#f8e2d4\",\n      pattern: \"#f78438\",\n      highlight: {\n        srgb: \"#ffa500\",\n        p3: \"color(display-p3 0.9988 0.6905 0.266)\"\n      }\n    },\n    red: {\n      solid: \"#e03131\",\n      fill: \"#e03131\",\n      note: {\n        fill: \"#FC8282\",\n        text: \"#000000\"\n      },\n      semi: \"#f4dadb\",\n      pattern: \"#e55959\",\n      highlight: {\n        srgb: \"#ff636e\",\n        p3: \"color(display-p3 0.9992 0.4376 0.45)\"\n      }\n    },\n    violet: {\n      solid: \"#ae3ec9\",\n      fill: \"#ae3ec9\",\n      note: {\n        fill: \"#DB91FD\",\n        text: \"#000000\"\n      },\n      semi: \"#ecdcf2\",\n      pattern: \"#bd63d3\",\n      highlight: {\n        srgb: \"#c77cff\",\n        p3: \"color(display-p3 0.7469 0.5089 0.9995)\"\n      }\n    },\n    yellow: {\n      solid: \"#f1ac4b\",\n      fill: \"#f1ac4b\",\n      note: {\n        fill: \"#FED49A\",\n        text: \"#000000\"\n      },\n      semi: \"#f9f0e6\",\n      pattern: \"#fecb92\",\n      highlight: {\n        srgb: \"#fddd00\",\n        p3: \"color(display-p3 0.972 0.8705 0.05)\"\n      }\n    },\n    white: {\n      solid: \"#FFFFFF\",\n      fill: \"#FFFFFF\",\n      semi: \"#f5f5f5\",\n      pattern: \"#f9f9f9\",\n      note: {\n        fill: \"#FFFFFF\",\n        text: \"#000000\"\n      },\n      highlight: {\n        srgb: \"#ffffff\",\n        p3: \"color(display-p3 1 1 1)\"\n      }\n    }\n  },\n  darkMode: {\n    id: \"dark\",\n    text: \"hsl(210, 17%, 98%)\",\n    background: \"hsl(240, 5%, 6.5%)\",\n    solid: \"#010403\",\n    black: {\n      solid: \"#f2f2f2\",\n      fill: \"#f2f2f2\",\n      note: {\n        fill: \"#2c2c2c\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2c3036\",\n      pattern: \"#989898\",\n      highlight: {\n        srgb: \"#d2b700\",\n        p3: \"color(display-p3 0.8078 0.7225 0.0312)\"\n      }\n    },\n    blue: {\n      solid: \"#4f72fc\",\n      // 3c60f0\n      fill: \"#4f72fc\",\n      note: {\n        fill: \"#2A3F98\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#262d40\",\n      pattern: \"#3a4b9e\",\n      highlight: {\n        srgb: \"#0079d2\",\n        p3: \"color(display-p3 0.0032 0.4655 0.7991)\"\n      }\n    },\n    green: {\n      solid: \"#099268\",\n      fill: \"#099268\",\n      note: {\n        fill: \"#014429\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#253231\",\n      pattern: \"#366a53\",\n      highlight: {\n        srgb: \"#009774\",\n        p3: \"color(display-p3 0.0085 0.582 0.4604)\"\n      }\n    },\n    grey: {\n      solid: \"#9398b0\",\n      fill: \"#9398b0\",\n      note: {\n        fill: \"#56595F\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#33373c\",\n      pattern: \"#7c8187\",\n      highlight: {\n        srgb: \"#9cb4cb\",\n        p3: \"color(display-p3 0.6299 0.7012 0.7856)\"\n      }\n    },\n    \"light-blue\": {\n      solid: \"#4dabf7\",\n      fill: \"#4dabf7\",\n      note: {\n        fill: \"#1F5495\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2a3642\",\n      pattern: \"#4d7aa9\",\n      highlight: {\n        srgb: \"#00bdc8\",\n        p3: \"color(display-p3 0.0023 0.7259 0.7735)\"\n      }\n    },\n    \"light-green\": {\n      solid: \"#40c057\",\n      fill: \"#40c057\",\n      note: {\n        fill: \"#21581D\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2a3830\",\n      pattern: \"#4e874e\",\n      highlight: {\n        srgb: \"#00a000\",\n        p3: \"color(display-p3 0.2711 0.6172 0.0195)\"\n      }\n    },\n    \"light-red\": {\n      solid: \"#ff8787\",\n      fill: \"#ff8787\",\n      note: {\n        fill: \"#923632\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3b3235\",\n      pattern: \"#a56767\",\n      highlight: {\n        srgb: \"#db005b\",\n        p3: \"color(display-p3 0.7849 0.0585 0.3589)\"\n      }\n    },\n    \"light-violet\": {\n      solid: \"#e599f7\",\n      fill: \"#e599f7\",\n      note: {\n        fill: \"#762F8E\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#383442\",\n      pattern: \"#9770a9\",\n      highlight: {\n        srgb: \"#c400c7\",\n        p3: \"color(display-p3 0.7024 0.0403 0.753)\"\n      }\n    },\n    orange: {\n      solid: \"#f76707\",\n      fill: \"#f76707\",\n      note: {\n        fill: \"#843906\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3a2e2a\",\n      pattern: \"#9f552d\",\n      highlight: {\n        srgb: \"#d07a00\",\n        p3: \"color(display-p3 0.7699 0.4937 0.0085)\"\n      }\n    },\n    red: {\n      solid: \"#e03131\",\n      fill: \"#e03131\",\n      note: {\n        fill: \"#89231A\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#36292b\",\n      pattern: \"#8f3734\",\n      highlight: {\n        srgb: \"#de002c\",\n        p3: \"color(display-p3 0.7978 0.0509 0.2035)\"\n      }\n    },\n    violet: {\n      solid: \"#ae3ec9\",\n      fill: \"#ae3ec9\",\n      note: {\n        fill: \"#681683\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#31293c\",\n      pattern: \"#763a8b\",\n      highlight: {\n        srgb: \"#9e00ee\",\n        p3: \"color(display-p3 0.5651 0.0079 0.8986)\"\n      }\n    },\n    yellow: {\n      solid: \"#ffc034\",\n      fill: \"#ffc034\",\n      note: {\n        fill: \"#98571B\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3c3934\",\n      pattern: \"#fecb92\",\n      highlight: {\n        srgb: \"#d2b700\",\n        p3: \"color(display-p3 0.8078 0.7225 0.0312)\"\n      }\n    },\n    white: {\n      solid: \"#f3f3f3\",\n      fill: \"#f3f3f3\",\n      semi: \"#f5f5f5\",\n      pattern: \"#f9f9f9\",\n      note: {\n        fill: \"#eaeaea\",\n        text: \"#1d1d1d\"\n      },\n      highlight: {\n        srgb: \"#ffffff\",\n        p3: \"color(display-p3 1 1 1)\"\n      }\n    }\n  }\n};\nfunction getDefaultColorTheme(opts) {\n  return opts.isDarkMode ? DefaultColorThemePalette.darkMode : DefaultColorThemePalette.lightMode;\n}\nconst DefaultColorStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:color\", {\n  defaultValue: \"black\",\n  values: defaultColorNames\n});\nconst DefaultLabelColorStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:labelColor\", {\n  defaultValue: \"black\",\n  values: defaultColorNames\n});\n\n//# sourceMappingURL=TLColorStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExDb2xvclN0eWxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIscURBQVM7QUFDbkM7QUFDQTtBQUNBLENBQUM7QUFDRCwrQkFBK0IscURBQVM7QUFDeEM7QUFDQTtBQUNBLENBQUM7QUFPQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExDb2xvclN0eWxlLm1qcz9kMTNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IGRlZmF1bHRDb2xvck5hbWVzID0gW1xuICBcImJsYWNrXCIsXG4gIFwiZ3JleVwiLFxuICBcImxpZ2h0LXZpb2xldFwiLFxuICBcInZpb2xldFwiLFxuICBcImJsdWVcIixcbiAgXCJsaWdodC1ibHVlXCIsXG4gIFwieWVsbG93XCIsXG4gIFwib3JhbmdlXCIsXG4gIFwiZ3JlZW5cIixcbiAgXCJsaWdodC1ncmVlblwiLFxuICBcImxpZ2h0LXJlZFwiLFxuICBcInJlZFwiLFxuICBcIndoaXRlXCJcbl07XG5jb25zdCBEZWZhdWx0Q29sb3JUaGVtZVBhbGV0dGUgPSB7XG4gIGxpZ2h0TW9kZToge1xuICAgIGlkOiBcImxpZ2h0XCIsXG4gICAgdGV4dDogXCIjMDAwMDAwXCIsXG4gICAgYmFja2dyb3VuZDogXCJyZ2IoMjQ5LCAyNTAsIDI1MSlcIixcbiAgICBzb2xpZDogXCIjZmNmZmZlXCIsXG4gICAgYmxhY2s6IHtcbiAgICAgIHNvbGlkOiBcIiMxZDFkMWRcIixcbiAgICAgIGZpbGw6IFwiIzFkMWQxZFwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiNGQ0UxOUNcIixcbiAgICAgICAgdGV4dDogXCIjMDAwMDAwXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiNlOGU4ZThcIixcbiAgICAgIHBhdHRlcm46IFwiIzQ5NDk0OVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiI2ZkZGQwMFwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuOTcyIDAuODcwNSAwLjA1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBibHVlOiB7XG4gICAgICBzb2xpZDogXCIjNDQ2NWU5XCIsXG4gICAgICBmaWxsOiBcIiM0NDY1ZTlcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOEFBM0ZGXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZGNlMWY4XCIsXG4gICAgICBwYXR0ZXJuOiBcIiM2NjgxZWVcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiMxMGFjZmZcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjMwOCAwLjY2MzIgMC45OTk2KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBncmVlbjoge1xuICAgICAgc29saWQ6IFwiIzA5OTI2OFwiLFxuICAgICAgZmlsbDogXCIjMDk5MjY4XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzZGQzg5NlwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2QzZTllM1wiLFxuICAgICAgcGF0dGVybjogXCIjMzlhNzg1XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjMDBmZmM4XCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC4yNTM2IDAuOTg0IDAuNzk4MSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgZ3JleToge1xuICAgICAgc29saWQ6IFwiIzlmYThiMlwiLFxuICAgICAgZmlsbDogXCIjOWZhOGIyXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0MwQ0FEM1wiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2VjZWVmMFwiLFxuICAgICAgcGF0dGVybjogXCIjYmNjM2M5XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjY2JlN2YxXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC44MTYzIDAuOTAyMyAwLjk0MTYpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIFwibGlnaHQtYmx1ZVwiOiB7XG4gICAgICBzb2xpZDogXCIjNGJhMWYxXCIsXG4gICAgICBmaWxsOiBcIiM0YmExZjFcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOUJDNEZEXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZGRlZGZhXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM2ZmJiZjhcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiMwMGY0ZmZcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjE1MTIgMC45NDE0IDAuOTk5NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgXCJsaWdodC1ncmVlblwiOiB7XG4gICAgICBzb2xpZDogXCIjNGNiMDVlXCIsXG4gICAgICBmaWxsOiBcIiM0Y2IwNWVcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOThEMDhBXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZGJmMGUwXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM2NWNiNzhcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiM2NWY2NDFcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjU2MyAwLjk0OTUgMC4zODU3KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LXJlZFwiOiB7XG4gICAgICBzb2xpZDogXCIjZjg3Nzc3XCIsXG4gICAgICBmaWxsOiBcIiNmODc3NzdcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjRjdBNUExXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZjRkYWRiXCIsXG4gICAgICBwYXR0ZXJuOiBcIiNmZTllOWVcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNmZjdmYTNcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjk5ODggMC41MzAxIDAuNjM5NylcIlxuICAgICAgfVxuICAgIH0sXG4gICAgXCJsaWdodC12aW9sZXRcIjoge1xuICAgICAgc29saWQ6IFwiI2UwODVmNFwiLFxuICAgICAgZmlsbDogXCIjZTA4NWY0XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0RGQjBGOVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y1ZWFmYVwiLFxuICAgICAgcGF0dGVybjogXCIjZTlhY2Y4XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmY4OGZmXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45Njc2IDAuNTY1MiAwLjk5OTkpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIG9yYW5nZToge1xuICAgICAgc29saWQ6IFwiI2UxNjkxOVwiLFxuICAgICAgZmlsbDogXCIjZTE2OTE5XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZBQTQ3NVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y4ZTJkNFwiLFxuICAgICAgcGF0dGVybjogXCIjZjc4NDM4XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmZhNTAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45OTg4IDAuNjkwNSAwLjI2NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgcmVkOiB7XG4gICAgICBzb2xpZDogXCIjZTAzMTMxXCIsXG4gICAgICBmaWxsOiBcIiNlMDMxMzFcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjRkM4MjgyXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZjRkYWRiXCIsXG4gICAgICBwYXR0ZXJuOiBcIiNlNTU5NTlcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNmZjYzNmVcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjk5OTIgMC40Mzc2IDAuNDUpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHZpb2xldDoge1xuICAgICAgc29saWQ6IFwiI2FlM2VjOVwiLFxuICAgICAgZmlsbDogXCIjYWUzZWM5XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0RCOTFGRFwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2VjZGNmMlwiLFxuICAgICAgcGF0dGVybjogXCIjYmQ2M2QzXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjYzc3Y2ZmXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC43NDY5IDAuNTA4OSAwLjk5OTUpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHllbGxvdzoge1xuICAgICAgc29saWQ6IFwiI2YxYWM0YlwiLFxuICAgICAgZmlsbDogXCIjZjFhYzRiXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZFRDQ5QVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y5ZjBlNlwiLFxuICAgICAgcGF0dGVybjogXCIjZmVjYjkyXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmRkZDAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45NzIgMC44NzA1IDAuMDUpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoaXRlOiB7XG4gICAgICBzb2xpZDogXCIjRkZGRkZGXCIsXG4gICAgICBmaWxsOiBcIiNGRkZGRkZcIixcbiAgICAgIHNlbWk6IFwiI2Y1ZjVmNVwiLFxuICAgICAgcGF0dGVybjogXCIjZjlmOWY5XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZGRkZGRlwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNmZmZmZmZcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAxIDEgMSlcIlxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZGFya01vZGU6IHtcbiAgICBpZDogXCJkYXJrXCIsXG4gICAgdGV4dDogXCJoc2woMjEwLCAxNyUsIDk4JSlcIixcbiAgICBiYWNrZ3JvdW5kOiBcImhzbCgyNDAsIDUlLCA2LjUlKVwiLFxuICAgIHNvbGlkOiBcIiMwMTA0MDNcIixcbiAgICBibGFjazoge1xuICAgICAgc29saWQ6IFwiI2YyZjJmMlwiLFxuICAgICAgZmlsbDogXCIjZjJmMmYyXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzJjMmMyY1wiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzJjMzAzNlwiLFxuICAgICAgcGF0dGVybjogXCIjOTg5ODk4XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZDJiNzAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC44MDc4IDAuNzIyNSAwLjAzMTIpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGJsdWU6IHtcbiAgICAgIHNvbGlkOiBcIiM0ZjcyZmNcIixcbiAgICAgIC8vIDNjNjBmMFxuICAgICAgZmlsbDogXCIjNGY3MmZjXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzJBM0Y5OFwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzI2MmQ0MFwiLFxuICAgICAgcGF0dGVybjogXCIjM2E0YjllXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjMDA3OWQyXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC4wMDMyIDAuNDY1NSAwLjc5OTEpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGdyZWVuOiB7XG4gICAgICBzb2xpZDogXCIjMDk5MjY4XCIsXG4gICAgICBmaWxsOiBcIiMwOTkyNjhcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjMDE0NDI5XCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMjUzMjMxXCIsXG4gICAgICBwYXR0ZXJuOiBcIiMzNjZhNTNcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiMwMDk3NzRcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjAwODUgMC41ODIgMC40NjA0KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBncmV5OiB7XG4gICAgICBzb2xpZDogXCIjOTM5OGIwXCIsXG4gICAgICBmaWxsOiBcIiM5Mzk4YjBcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjNTY1OTVGXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMzMzNzNjXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM3YzgxODdcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiM5Y2I0Y2JcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjYyOTkgMC43MDEyIDAuNzg1NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgXCJsaWdodC1ibHVlXCI6IHtcbiAgICAgIHNvbGlkOiBcIiM0ZGFiZjdcIixcbiAgICAgIGZpbGw6IFwiIzRkYWJmN1wiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiMxRjU0OTVcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMyYTM2NDJcIixcbiAgICAgIHBhdHRlcm46IFwiIzRkN2FhOVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzAwYmRjOFwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuMDAyMyAwLjcyNTkgMC43NzM1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LWdyZWVuXCI6IHtcbiAgICAgIHNvbGlkOiBcIiM0MGMwNTdcIixcbiAgICAgIGZpbGw6IFwiIzQwYzA1N1wiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiMyMTU4MURcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMyYTM4MzBcIixcbiAgICAgIHBhdHRlcm46IFwiIzRlODc0ZVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzAwYTAwMFwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuMjcxMSAwLjYxNzIgMC4wMTk1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LXJlZFwiOiB7XG4gICAgICBzb2xpZDogXCIjZmY4Nzg3XCIsXG4gICAgICBmaWxsOiBcIiNmZjg3ODdcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOTIzNjMyXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjM2IzMjM1XCIsXG4gICAgICBwYXR0ZXJuOiBcIiNhNTY3NjdcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNkYjAwNWJcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjc4NDkgMC4wNTg1IDAuMzU4OSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgXCJsaWdodC12aW9sZXRcIjoge1xuICAgICAgc29saWQ6IFwiI2U1OTlmN1wiLFxuICAgICAgZmlsbDogXCIjZTU5OWY3XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzc2MkY4RVwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzM4MzQ0MlwiLFxuICAgICAgcGF0dGVybjogXCIjOTc3MGE5XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjYzQwMGM3XCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC43MDI0IDAuMDQwMyAwLjc1MylcIlxuICAgICAgfVxuICAgIH0sXG4gICAgb3JhbmdlOiB7XG4gICAgICBzb2xpZDogXCIjZjc2NzA3XCIsXG4gICAgICBmaWxsOiBcIiNmNzY3MDdcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjODQzOTA2XCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjM2EyZTJhXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM5ZjU1MmRcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNkMDdhMDBcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjc2OTkgMC40OTM3IDAuMDA4NSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgcmVkOiB7XG4gICAgICBzb2xpZDogXCIjZTAzMTMxXCIsXG4gICAgICBmaWxsOiBcIiNlMDMxMzFcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjODkyMzFBXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMzYyOTJiXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM4ZjM3MzRcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNkZTAwMmNcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjc5NzggMC4wNTA5IDAuMjAzNSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgdmlvbGV0OiB7XG4gICAgICBzb2xpZDogXCIjYWUzZWM5XCIsXG4gICAgICBmaWxsOiBcIiNhZTNlYzlcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjNjgxNjgzXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMzEyOTNjXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM3NjNhOGJcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiM5ZTAwZWVcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjU2NTEgMC4wMDc5IDAuODk4NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgeWVsbG93OiB7XG4gICAgICBzb2xpZDogXCIjZmZjMDM0XCIsXG4gICAgICBmaWxsOiBcIiNmZmMwMzRcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOTg1NzFCXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjM2MzOTM0XCIsXG4gICAgICBwYXR0ZXJuOiBcIiNmZWNiOTJcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNkMmI3MDBcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjgwNzggMC43MjI1IDAuMDMxMilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgd2hpdGU6IHtcbiAgICAgIHNvbGlkOiBcIiNmM2YzZjNcIixcbiAgICAgIGZpbGw6IFwiI2YzZjNmM1wiLFxuICAgICAgc2VtaTogXCIjZjVmNWY1XCIsXG4gICAgICBwYXR0ZXJuOiBcIiNmOWY5ZjlcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjZWFlYWVhXCIsXG4gICAgICAgIHRleHQ6IFwiIzFkMWQxZFwiXG4gICAgICB9LFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiI2ZmZmZmZlwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDEgMSAxKVwiXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuZnVuY3Rpb24gZ2V0RGVmYXVsdENvbG9yVGhlbWUob3B0cykge1xuICByZXR1cm4gb3B0cy5pc0RhcmtNb2RlID8gRGVmYXVsdENvbG9yVGhlbWVQYWxldHRlLmRhcmtNb2RlIDogRGVmYXVsdENvbG9yVGhlbWVQYWxldHRlLmxpZ2h0TW9kZTtcbn1cbmNvbnN0IERlZmF1bHRDb2xvclN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6Y29sb3JcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwiYmxhY2tcIixcbiAgdmFsdWVzOiBkZWZhdWx0Q29sb3JOYW1lc1xufSk7XG5jb25zdCBEZWZhdWx0TGFiZWxDb2xvclN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6bGFiZWxDb2xvclwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJibGFja1wiLFxuICB2YWx1ZXM6IGRlZmF1bHRDb2xvck5hbWVzXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRDb2xvclN0eWxlLFxuICBEZWZhdWx0Q29sb3JUaGVtZVBhbGV0dGUsXG4gIERlZmF1bHRMYWJlbENvbG9yU3R5bGUsXG4gIGRlZmF1bHRDb2xvck5hbWVzLFxuICBnZXREZWZhdWx0Q29sb3JUaGVtZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQ29sb3JTdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultDashStyle: () => (/* binding */ DefaultDashStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultDashStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:dash\", {\n  defaultValue: \"draw\",\n  values: [\"draw\", \"solid\", \"dashed\", \"dotted\"]\n});\n\n//# sourceMappingURL=TLDashStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExEYXNoU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTERhc2hTdHlsZS5tanM/ZDQ4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi9TdHlsZVByb3AubWpzXCI7XG5jb25zdCBEZWZhdWx0RGFzaFN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6ZGFzaFwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJkcmF3XCIsXG4gIHZhbHVlczogW1wiZHJhd1wiLCBcInNvbGlkXCIsIFwiZGFzaGVkXCIsIFwiZG90dGVkXCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHREYXNoU3R5bGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTERhc2hTdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultFillStyle: () => (/* binding */ DefaultFillStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultFillStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:fill\", {\n  defaultValue: \"none\",\n  values: [\"none\", \"semi\", \"solid\", \"pattern\", \"fill\"]\n});\n\n//# sourceMappingURL=TLFillStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGaWxsU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTEZpbGxTdHlsZS5tanM/M2UwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi9TdHlsZVByb3AubWpzXCI7XG5jb25zdCBEZWZhdWx0RmlsbFN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6ZmlsbFwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJub25lXCIsXG4gIHZhbHVlczogW1wibm9uZVwiLCBcInNlbWlcIiwgXCJzb2xpZFwiLCBcInBhdHRlcm5cIiwgXCJmaWxsXCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRGaWxsU3R5bGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEZpbGxTdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultFontFamilies: () => (/* binding */ DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* binding */ DefaultFontStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultFontStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:font\", {\n  defaultValue: \"draw\",\n  values: [\"draw\", \"sans\", \"serif\", \"mono\"]\n});\nconst DefaultFontFamilies = {\n  draw: \"'tldraw_draw', sans-serif\",\n  sans: \"'tldraw_sans', sans-serif\",\n  serif: \"'tldraw_serif', serif\",\n  mono: \"'tldraw_mono', monospace\"\n};\n\n//# sourceMappingURL=TLFontStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGb250U3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUM1Qyx5QkFBeUIscURBQVM7QUFDbEM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGb250U3R5bGUubWpzPzZlMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdEZvbnRTdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OmZvbnRcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwiZHJhd1wiLFxuICB2YWx1ZXM6IFtcImRyYXdcIiwgXCJzYW5zXCIsIFwic2VyaWZcIiwgXCJtb25vXCJdXG59KTtcbmNvbnN0IERlZmF1bHRGb250RmFtaWxpZXMgPSB7XG4gIGRyYXc6IFwiJ3RsZHJhd19kcmF3Jywgc2Fucy1zZXJpZlwiLFxuICBzYW5zOiBcIid0bGRyYXdfc2FucycsIHNhbnMtc2VyaWZcIixcbiAgc2VyaWY6IFwiJ3RsZHJhd19zZXJpZicsIHNlcmlmXCIsXG4gIG1vbm86IFwiJ3RsZHJhd19tb25vJywgbW9ub3NwYWNlXCJcbn07XG5leHBvcnQge1xuICBEZWZhdWx0Rm9udEZhbWlsaWVzLFxuICBEZWZhdWx0Rm9udFN0eWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExGb250U3R5bGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* binding */ DefaultHorizontalAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultHorizontalAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:horizontalAlign\", {\n  defaultValue: \"middle\",\n  values: [\"start\", \"middle\", \"end\", \"start-legacy\", \"end-legacy\", \"middle-legacy\"]\n});\n\n//# sourceMappingURL=TLHorizontalAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUMsb0NBQW9DLHFEQUFTO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc3R5bGVzL1RMSG9yaXpvbnRhbEFsaWduU3R5bGUubWpzP2Q3YTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6aG9yaXpvbnRhbEFsaWduXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcIm1pZGRsZVwiLFxuICB2YWx1ZXM6IFtcInN0YXJ0XCIsIFwibWlkZGxlXCIsIFwiZW5kXCIsIFwic3RhcnQtbGVnYWN5XCIsIFwiZW5kLWxlZ2FjeVwiLCBcIm1pZGRsZS1sZWdhY3lcIl1cbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSizeStyle: () => (/* binding */ DefaultSizeStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultSizeStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:size\", {\n  defaultValue: \"m\",\n  values: [\"s\", \"m\", \"l\", \"xl\"]\n});\n\n//# sourceMappingURL=TLSizeStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExTaXplU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTFNpemVTdHlsZS5tanM/Y2E0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi9TdHlsZVByb3AubWpzXCI7XG5jb25zdCBEZWZhdWx0U2l6ZVN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6c2l6ZVwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJtXCIsXG4gIHZhbHVlczogW1wic1wiLCBcIm1cIiwgXCJsXCIsIFwieGxcIl1cbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdFNpemVTdHlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMU2l6ZVN0eWxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultTextAlignStyle: () => (/* binding */ DefaultTextAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultTextAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:textAlign\", {\n  defaultValue: \"start\",\n  values: [\"start\", \"middle\", \"end\"]\n});\n\n//# sourceMappingURL=TLTextAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExUZXh0QWxpZ25TdHlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUMsOEJBQThCLHFEQUFTO0FBQ3ZDO0FBQ0E7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc3R5bGVzL1RMVGV4dEFsaWduU3R5bGUubWpzPzBhMGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdFRleHRBbGlnblN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6dGV4dEFsaWduXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcInN0YXJ0XCIsXG4gIHZhbHVlczogW1wic3RhcnRcIiwgXCJtaWRkbGVcIiwgXCJlbmRcIl1cbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdFRleHRBbGlnblN0eWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExUZXh0QWxpZ25TdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* binding */ DefaultVerticalAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultVerticalAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:verticalAlign\", {\n  defaultValue: \"middle\",\n  values: [\"start\", \"middle\", \"end\"]\n});\n\n//# sourceMappingURL=TLVerticalAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExWZXJ0aWNhbEFsaWduU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLGtDQUFrQyxxREFBUztBQUMzQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTFZlcnRpY2FsQWxpZ25TdHlsZS5tanM/ZDRlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi9TdHlsZVByb3AubWpzXCI7XG5jb25zdCBEZWZhdWx0VmVydGljYWxBbGlnblN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6dmVydGljYWxBbGlnblwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJtaWRkbGVcIixcbiAgdmFsdWVzOiBbXCJzdGFydFwiLCBcIm1pZGRsZVwiLCBcImVuZFwiXVxufSk7XG5leHBvcnQge1xuICBEZWZhdWx0VmVydGljYWxBbGlnblN0eWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExWZXJ0aWNhbEFsaWduU3R5bGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LANGUAGES: () => (/* binding */ LANGUAGES)\n/* harmony export */ });\nconst LANGUAGES = [\n  { locale: \"id\", label: \"Bahasa Indonesia\" },\n  { locale: \"ca\", label: \"Catal\\xE0\" },\n  { locale: \"cs\", label: \"\\u010Ce\\u0161tina\" },\n  { locale: \"da\", label: \"Danish\" },\n  { locale: \"de\", label: \"Deutsch\" },\n  { locale: \"en\", label: \"English\" },\n  { locale: \"es\", label: \"Espa\\xF1ol\" },\n  { locale: \"fr\", label: \"Fran\\xE7ais\" },\n  { locale: \"gl\", label: \"Galego\" },\n  { locale: \"hr\", label: \"Hrvatski\" },\n  { locale: \"it\", label: \"Italiano\" },\n  { locale: \"hu\", label: \"Magyar\" },\n  { locale: \"no\", label: \"Norwegian\" },\n  { locale: \"pl\", label: \"Polski\" },\n  { locale: \"pt-br\", label: \"Portugu\\xEAs - Brasil\" },\n  { locale: \"pt-pt\", label: \"Portugu\\xEAs - Europeu\" },\n  { locale: \"ro\", label: \"Rom\\xE2n\\u0103\" },\n  { locale: \"ru\", label: \"Russian\" },\n  { locale: \"sl\", label: \"Sloven\\u0161\\u010Dina\" },\n  { locale: \"fi\", label: \"Suomi\" },\n  { locale: \"sv\", label: \"Svenska\" },\n  { locale: \"vi\", label: \"Ti\\u1EBFng Vi\\u1EC7t\" },\n  { locale: \"tr\", label: \"T\\xFCrk\\xE7e\" },\n  { locale: \"uk\", label: \"Ukrainian\" },\n  { locale: \"he\", label: \"\\u05E2\\u05D1\\u05E8\\u05D9\\u05EA\" },\n  { locale: \"ar\", label: \"\\u0639\\u0631\\u0628\\u064A\" },\n  { locale: \"fa\", label: \"\\u0641\\u0627\\u0631\\u0633\\u06CC\" },\n  { locale: \"ku\", label: \"\\u06A9\\u0648\\u0631\\u062F\\u06CC\" },\n  { locale: \"ne\", label: \"\\u0928\\u0947\\u092A\\u093E\\u0932\\u0940\" },\n  { locale: \"hi-in\", label: \"\\u0939\\u093F\\u0928\\u094D\\u0926\\u0940\" },\n  { locale: \"te\", label: \"\\u0C24\\u0C46\\u0C32\\u0C41\\u0C17\\u0C41\" },\n  { locale: \"th\", label: \"\\u0E20\\u0E32\\u0E29\\u0E32\\u0E44\\u0E17\\u0E22\" },\n  { locale: \"my\", label: \"\\u1019\\u103C\\u1014\\u103A\\u1019\\u102C\\u1005\\u102C\" },\n  { locale: \"ko-kr\", label: \"\\uD55C\\uAD6D\\uC5B4\" },\n  { locale: \"ja\", label: \"\\u65E5\\u672C\\u8A9E\" },\n  { locale: \"zh-cn\", label: \"\\u7B80\\u4F53\\u4E2D\\u6587\" },\n  { locale: \"zh-tw\", label: \"\\u7E41\\u9AD4\\u4E2D\\u6587 (\\u53F0\\u7063)\" }\n];\n\n//# sourceMappingURL=languages.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvbGFuZ3VhZ2VzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSxJQUFJLHlDQUF5QztBQUM3QyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLDBDQUEwQztBQUM5QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLG1DQUFtQztBQUN2QyxJQUFJLG9DQUFvQztBQUN4QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGlDQUFpQztBQUNyQyxJQUFJLGlDQUFpQztBQUNyQyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGlEQUFpRDtBQUNyRCxJQUFJLGtEQUFrRDtBQUN0RCxJQUFJLHVDQUF1QztBQUMzQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLDhDQUE4QztBQUNsRCxJQUFJLDhCQUE4QjtBQUNsQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLDZDQUE2QztBQUNqRCxJQUFJLHFDQUFxQztBQUN6QyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLGlEQUFpRDtBQUNyRCxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLDZEQUE2RDtBQUNqRSxJQUFJLGdFQUFnRTtBQUNwRSxJQUFJLDZEQUE2RDtBQUNqRSxJQUFJLG1FQUFtRTtBQUN2RSxJQUFJLHlFQUF5RTtBQUM3RSxJQUFJLDhDQUE4QztBQUNsRCxJQUFJLDJDQUEyQztBQUMvQyxJQUFJLG9EQUFvRDtBQUN4RCxJQUFJO0FBQ0o7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvbGFuZ3VhZ2VzLm1qcz8xODgzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IExBTkdVQUdFUyA9IFtcbiAgeyBsb2NhbGU6IFwiaWRcIiwgbGFiZWw6IFwiQmFoYXNhIEluZG9uZXNpYVwiIH0sXG4gIHsgbG9jYWxlOiBcImNhXCIsIGxhYmVsOiBcIkNhdGFsXFx4RTBcIiB9LFxuICB7IGxvY2FsZTogXCJjc1wiLCBsYWJlbDogXCJcXHUwMTBDZVxcdTAxNjF0aW5hXCIgfSxcbiAgeyBsb2NhbGU6IFwiZGFcIiwgbGFiZWw6IFwiRGFuaXNoXCIgfSxcbiAgeyBsb2NhbGU6IFwiZGVcIiwgbGFiZWw6IFwiRGV1dHNjaFwiIH0sXG4gIHsgbG9jYWxlOiBcImVuXCIsIGxhYmVsOiBcIkVuZ2xpc2hcIiB9LFxuICB7IGxvY2FsZTogXCJlc1wiLCBsYWJlbDogXCJFc3BhXFx4RjFvbFwiIH0sXG4gIHsgbG9jYWxlOiBcImZyXCIsIGxhYmVsOiBcIkZyYW5cXHhFN2Fpc1wiIH0sXG4gIHsgbG9jYWxlOiBcImdsXCIsIGxhYmVsOiBcIkdhbGVnb1wiIH0sXG4gIHsgbG9jYWxlOiBcImhyXCIsIGxhYmVsOiBcIkhydmF0c2tpXCIgfSxcbiAgeyBsb2NhbGU6IFwiaXRcIiwgbGFiZWw6IFwiSXRhbGlhbm9cIiB9LFxuICB7IGxvY2FsZTogXCJodVwiLCBsYWJlbDogXCJNYWd5YXJcIiB9LFxuICB7IGxvY2FsZTogXCJub1wiLCBsYWJlbDogXCJOb3J3ZWdpYW5cIiB9LFxuICB7IGxvY2FsZTogXCJwbFwiLCBsYWJlbDogXCJQb2xza2lcIiB9LFxuICB7IGxvY2FsZTogXCJwdC1iclwiLCBsYWJlbDogXCJQb3J0dWd1XFx4RUFzIC0gQnJhc2lsXCIgfSxcbiAgeyBsb2NhbGU6IFwicHQtcHRcIiwgbGFiZWw6IFwiUG9ydHVndVxceEVBcyAtIEV1cm9wZXVcIiB9LFxuICB7IGxvY2FsZTogXCJyb1wiLCBsYWJlbDogXCJSb21cXHhFMm5cXHUwMTAzXCIgfSxcbiAgeyBsb2NhbGU6IFwicnVcIiwgbGFiZWw6IFwiUnVzc2lhblwiIH0sXG4gIHsgbG9jYWxlOiBcInNsXCIsIGxhYmVsOiBcIlNsb3ZlblxcdTAxNjFcXHUwMTBEaW5hXCIgfSxcbiAgeyBsb2NhbGU6IFwiZmlcIiwgbGFiZWw6IFwiU3VvbWlcIiB9LFxuICB7IGxvY2FsZTogXCJzdlwiLCBsYWJlbDogXCJTdmVuc2thXCIgfSxcbiAgeyBsb2NhbGU6IFwidmlcIiwgbGFiZWw6IFwiVGlcXHUxRUJGbmcgVmlcXHUxRUM3dFwiIH0sXG4gIHsgbG9jYWxlOiBcInRyXCIsIGxhYmVsOiBcIlRcXHhGQ3JrXFx4RTdlXCIgfSxcbiAgeyBsb2NhbGU6IFwidWtcIiwgbGFiZWw6IFwiVWtyYWluaWFuXCIgfSxcbiAgeyBsb2NhbGU6IFwiaGVcIiwgbGFiZWw6IFwiXFx1MDVFMlxcdTA1RDFcXHUwNUU4XFx1MDVEOVxcdTA1RUFcIiB9LFxuICB7IGxvY2FsZTogXCJhclwiLCBsYWJlbDogXCJcXHUwNjM5XFx1MDYzMVxcdTA2MjhcXHUwNjRBXCIgfSxcbiAgeyBsb2NhbGU6IFwiZmFcIiwgbGFiZWw6IFwiXFx1MDY0MVxcdTA2MjdcXHUwNjMxXFx1MDYzM1xcdTA2Q0NcIiB9LFxuICB7IGxvY2FsZTogXCJrdVwiLCBsYWJlbDogXCJcXHUwNkE5XFx1MDY0OFxcdTA2MzFcXHUwNjJGXFx1MDZDQ1wiIH0sXG4gIHsgbG9jYWxlOiBcIm5lXCIsIGxhYmVsOiBcIlxcdTA5MjhcXHUwOTQ3XFx1MDkyQVxcdTA5M0VcXHUwOTMyXFx1MDk0MFwiIH0sXG4gIHsgbG9jYWxlOiBcImhpLWluXCIsIGxhYmVsOiBcIlxcdTA5MzlcXHUwOTNGXFx1MDkyOFxcdTA5NERcXHUwOTI2XFx1MDk0MFwiIH0sXG4gIHsgbG9jYWxlOiBcInRlXCIsIGxhYmVsOiBcIlxcdTBDMjRcXHUwQzQ2XFx1MEMzMlxcdTBDNDFcXHUwQzE3XFx1MEM0MVwiIH0sXG4gIHsgbG9jYWxlOiBcInRoXCIsIGxhYmVsOiBcIlxcdTBFMjBcXHUwRTMyXFx1MEUyOVxcdTBFMzJcXHUwRTQ0XFx1MEUxN1xcdTBFMjJcIiB9LFxuICB7IGxvY2FsZTogXCJteVwiLCBsYWJlbDogXCJcXHUxMDE5XFx1MTAzQ1xcdTEwMTRcXHUxMDNBXFx1MTAxOVxcdTEwMkNcXHUxMDA1XFx1MTAyQ1wiIH0sXG4gIHsgbG9jYWxlOiBcImtvLWtyXCIsIGxhYmVsOiBcIlxcdUQ1NUNcXHVBRDZEXFx1QzVCNFwiIH0sXG4gIHsgbG9jYWxlOiBcImphXCIsIGxhYmVsOiBcIlxcdTY1RTVcXHU2NzJDXFx1OEE5RVwiIH0sXG4gIHsgbG9jYWxlOiBcInpoLWNuXCIsIGxhYmVsOiBcIlxcdTdCODBcXHU0RjUzXFx1NEUyRFxcdTY1ODdcIiB9LFxuICB7IGxvY2FsZTogXCJ6aC10d1wiLCBsYWJlbDogXCJcXHU3RTQxXFx1OUFENFxcdTRFMkRcXHU2NTg3IChcXHU1M0YwXFx1NzA2MylcIiB9XG5dO1xuZXhwb3J0IHtcbiAgTEFOR1VBR0VTXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFuZ3VhZ2VzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES),\n/* harmony export */   _getDefaultTranslationLocale: () => (/* binding */ _getDefaultTranslationLocale),\n/* harmony export */   getDefaultTranslationLocale: () => (/* binding */ getDefaultTranslationLocale)\n/* harmony export */ });\n/* harmony import */ var _languages_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./languages.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs\");\n\nfunction getDefaultTranslationLocale() {\n  const locales = typeof window !== \"undefined\" ? window.navigator.languages ?? [\"en\"] : [\"en\"];\n  return _getDefaultTranslationLocale(locales);\n}\nfunction _getDefaultTranslationLocale(locales) {\n  for (const locale of locales) {\n    const supportedLocale = getSupportedLocale(locale);\n    if (supportedLocale) {\n      return supportedLocale;\n    }\n  }\n  return \"en\";\n}\nconst DEFAULT_LOCALE_REGIONS = {\n  zh: \"zh-cn\",\n  pt: \"pt-br\",\n  ko: \"ko-kr\",\n  hi: \"hi-in\"\n};\nfunction getSupportedLocale(locale) {\n  const exactMatch = _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES.find((t) => t.locale === locale.toLowerCase());\n  if (exactMatch) {\n    return exactMatch.locale;\n  }\n  const [language, region] = locale.split(/[-_]/).map((s) => s.toLowerCase());\n  if (region) {\n    const languageMatch = _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES.find((t) => t.locale === language);\n    if (languageMatch) {\n      return languageMatch.locale;\n    }\n  }\n  if (language in DEFAULT_LOCALE_REGIONS) {\n    return DEFAULT_LOCALE_REGIONS[language];\n  }\n  return null;\n}\n\n//# sourceMappingURL=translations.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvdHJhbnNsYXRpb25zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvdHJhbnNsYXRpb25zLm1qcz80MjZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExBTkdVQUdFUyB9IGZyb20gXCIuL2xhbmd1YWdlcy5tanNcIjtcbmZ1bmN0aW9uIGdldERlZmF1bHRUcmFuc2xhdGlvbkxvY2FsZSgpIHtcbiAgY29uc3QgbG9jYWxlcyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlcyA/PyBbXCJlblwiXSA6IFtcImVuXCJdO1xuICByZXR1cm4gX2dldERlZmF1bHRUcmFuc2xhdGlvbkxvY2FsZShsb2NhbGVzKTtcbn1cbmZ1bmN0aW9uIF9nZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGUobG9jYWxlcykge1xuICBmb3IgKGNvbnN0IGxvY2FsZSBvZiBsb2NhbGVzKSB7XG4gICAgY29uc3Qgc3VwcG9ydGVkTG9jYWxlID0gZ2V0U3VwcG9ydGVkTG9jYWxlKGxvY2FsZSk7XG4gICAgaWYgKHN1cHBvcnRlZExvY2FsZSkge1xuICAgICAgcmV0dXJuIHN1cHBvcnRlZExvY2FsZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFwiZW5cIjtcbn1cbmNvbnN0IERFRkFVTFRfTE9DQUxFX1JFR0lPTlMgPSB7XG4gIHpoOiBcInpoLWNuXCIsXG4gIHB0OiBcInB0LWJyXCIsXG4gIGtvOiBcImtvLWtyXCIsXG4gIGhpOiBcImhpLWluXCJcbn07XG5mdW5jdGlvbiBnZXRTdXBwb3J0ZWRMb2NhbGUobG9jYWxlKSB7XG4gIGNvbnN0IGV4YWN0TWF0Y2ggPSBMQU5HVUFHRVMuZmluZCgodCkgPT4gdC5sb2NhbGUgPT09IGxvY2FsZS50b0xvd2VyQ2FzZSgpKTtcbiAgaWYgKGV4YWN0TWF0Y2gpIHtcbiAgICByZXR1cm4gZXhhY3RNYXRjaC5sb2NhbGU7XG4gIH1cbiAgY29uc3QgW2xhbmd1YWdlLCByZWdpb25dID0gbG9jYWxlLnNwbGl0KC9bLV9dLykubWFwKChzKSA9PiBzLnRvTG93ZXJDYXNlKCkpO1xuICBpZiAocmVnaW9uKSB7XG4gICAgY29uc3QgbGFuZ3VhZ2VNYXRjaCA9IExBTkdVQUdFUy5maW5kKCh0KSA9PiB0LmxvY2FsZSA9PT0gbGFuZ3VhZ2UpO1xuICAgIGlmIChsYW5ndWFnZU1hdGNoKSB7XG4gICAgICByZXR1cm4gbGFuZ3VhZ2VNYXRjaC5sb2NhbGU7XG4gICAgfVxuICB9XG4gIGlmIChsYW5ndWFnZSBpbiBERUZBVUxUX0xPQ0FMRV9SRUdJT05TKSB7XG4gICAgcmV0dXJuIERFRkFVTFRfTE9DQUxFX1JFR0lPTlNbbGFuZ3VhZ2VdO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZXhwb3J0IHtcbiAgTEFOR1VBR0VTLFxuICBfZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlLFxuICBnZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2xhdGlvbnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_15__.DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_15__.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_15__.DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   FileHelpers: () => (/* reexport safe */ _lib_file_mjs__WEBPACK_IMPORTED_MODULE_10__.FileHelpers),\n/* harmony export */   Image: () => (/* reexport safe */ _lib_network_mjs__WEBPACK_IMPORTED_MODULE_17__.Image),\n/* harmony export */   MediaHelpers: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_15__.MediaHelpers),\n/* harmony export */   PerformanceTracker: () => (/* reexport safe */ _lib_PerformanceTracker_mjs__WEBPACK_IMPORTED_MODULE_3__.PerformanceTracker),\n/* harmony export */   PngHelpers: () => (/* reexport safe */ _lib_media_png_mjs__WEBPACK_IMPORTED_MODULE_16__.PngHelpers),\n/* harmony export */   Result: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.Result),\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   Timers: () => (/* reexport safe */ _lib_timers_mjs__WEBPACK_IMPORTED_MODULE_25__.Timers),\n/* harmony export */   WeakCache: () => (/* reexport safe */ _lib_cache_mjs__WEBPACK_IMPORTED_MODULE_6__.WeakCache),\n/* harmony export */   ZERO_INDEX_KEY: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.ZERO_INDEX_KEY),\n/* harmony export */   annotateError: () => (/* reexport safe */ _lib_error_mjs__WEBPACK_IMPORTED_MODULE_9__.annotateError),\n/* harmony export */   areArraysShallowEqual: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.areArraysShallowEqual),\n/* harmony export */   areObjectsShallowEqual: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.areObjectsShallowEqual),\n/* harmony export */   assert: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.assert),\n/* harmony export */   assertExists: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.assertExists),\n/* harmony export */   bind: () => (/* reexport safe */ _lib_bind_mjs__WEBPACK_IMPORTED_MODULE_5__.bind),\n/* harmony export */   clearLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.clearSessionStorage),\n/* harmony export */   compact: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.compact),\n/* harmony export */   debounce: () => (/* reexport safe */ _lib_debounce_mjs__WEBPACK_IMPORTED_MODULE_8__.debounce),\n/* harmony export */   dedupe: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.dedupe),\n/* harmony export */   deleteFromLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.deleteFromSessionStorage),\n/* harmony export */   exhaustiveSwitchError: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.exhaustiveSwitchError),\n/* harmony export */   fetch: () => (/* reexport safe */ _lib_network_mjs__WEBPACK_IMPORTED_MODULE_17__.fetch),\n/* harmony export */   filterEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.filterEntries),\n/* harmony export */   fpsThrottle: () => (/* reexport safe */ _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_24__.fpsThrottle),\n/* harmony export */   getErrorAnnotations: () => (/* reexport safe */ _lib_error_mjs__WEBPACK_IMPORTED_MODULE_9__.getErrorAnnotations),\n/* harmony export */   getFirstFromIterable: () => (/* reexport safe */ _lib_iterable_mjs__WEBPACK_IMPORTED_MODULE_14__.getFirstFromIterable),\n/* harmony export */   getFromLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.getFromSessionStorage),\n/* harmony export */   getHashForBuffer: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_12__.getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_12__.getHashForObject),\n/* harmony export */   getHashForString: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_12__.getHashForString),\n/* harmony export */   getIndexAbove: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndexBetween),\n/* harmony export */   getIndices: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndices),\n/* harmony export */   getIndicesAbove: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.getIndicesBetween),\n/* harmony export */   getOwnProperty: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.getOwnProperty),\n/* harmony export */   groupBy: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.groupBy),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.hasOwnProperty),\n/* harmony export */   invLerp: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_18__.invLerp),\n/* harmony export */   isDefined: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.isNonNull),\n/* harmony export */   isNonNullish: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.isNonNullish),\n/* harmony export */   last: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.last),\n/* harmony export */   lerp: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_18__.lerp),\n/* harmony export */   lns: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_12__.lns),\n/* harmony export */   mapObjectMapValues: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.mapObjectMapValues),\n/* harmony export */   measureAverageDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_20__.measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_20__.measureCbDuration),\n/* harmony export */   measureDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_20__.measureDuration),\n/* harmony export */   minBy: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.minBy),\n/* harmony export */   mockUniqueId: () => (/* reexport safe */ _lib_id_mjs__WEBPACK_IMPORTED_MODULE_13__.mockUniqueId),\n/* harmony export */   modulate: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_18__.modulate),\n/* harmony export */   noop: () => (/* reexport safe */ _lib_function_mjs__WEBPACK_IMPORTED_MODULE_11__.noop),\n/* harmony export */   objectMapEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__.objectMapValues),\n/* harmony export */   omitFromStackTrace: () => (/* reexport safe */ _lib_function_mjs__WEBPACK_IMPORTED_MODULE_11__.omitFromStackTrace),\n/* harmony export */   partition: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.partition),\n/* harmony export */   promiseWithResolve: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.promiseWithResolve),\n/* harmony export */   registerTldrawLibraryVersion: () => (/* reexport safe */ _lib_version_mjs__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion),\n/* harmony export */   restoreUniqueId: () => (/* reexport safe */ _lib_id_mjs__WEBPACK_IMPORTED_MODULE_13__.restoreUniqueId),\n/* harmony export */   rng: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_18__.rng),\n/* harmony export */   rotateArray: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__.rotateArray),\n/* harmony export */   safeParseUrl: () => (/* reexport safe */ _lib_url_mjs__WEBPACK_IMPORTED_MODULE_26__.safeParseUrl),\n/* harmony export */   setInLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__.setInSessionStorage),\n/* harmony export */   sleep: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__.sleep),\n/* harmony export */   sortById: () => (/* reexport safe */ _lib_sort_mjs__WEBPACK_IMPORTED_MODULE_22__.sortById),\n/* harmony export */   sortByIndex: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.sortByIndex),\n/* harmony export */   structuredClone: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__.structuredClone),\n/* harmony export */   throttle: () => (/* reexport default export from named module */ lodash_throttle__WEBPACK_IMPORTED_MODULE_1__),\n/* harmony export */   throttleToNextFrame: () => (/* reexport safe */ _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_24__.throttleToNextFrame),\n/* harmony export */   uniq: () => (/* reexport default export from named module */ lodash_uniq__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   uniqueId: () => (/* reexport safe */ _lib_id_mjs__WEBPACK_IMPORTED_MODULE_13__.uniqueId),\n/* harmony export */   validateIndexKey: () => (/* reexport safe */ _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__.validateIndexKey),\n/* harmony export */   warnDeprecatedGetter: () => (/* reexport safe */ _lib_warn_mjs__WEBPACK_IMPORTED_MODULE_28__.warnDeprecatedGetter),\n/* harmony export */   warnOnce: () => (/* reexport safe */ _lib_warn_mjs__WEBPACK_IMPORTED_MODULE_28__.warnOnce)\n/* harmony export */ });\n/* harmony import */ var _lib_version_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/version.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/version.mjs\");\n/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash.throttle */ \"(ssr)/./node_modules/lodash.throttle/index.js\");\n/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.uniq */ \"(ssr)/./node_modules/lodash.uniq/index.js\");\n/* harmony import */ var _lib_PerformanceTracker_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/PerformanceTracker.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs\");\n/* harmony import */ var _lib_array_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/array.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs\");\n/* harmony import */ var _lib_bind_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/bind.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/bind.mjs\");\n/* harmony import */ var _lib_cache_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/cache.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs\");\n/* harmony import */ var _lib_control_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/control.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\");\n/* harmony import */ var _lib_debounce_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/debounce.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs\");\n/* harmony import */ var _lib_error_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/error.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs\");\n/* harmony import */ var _lib_file_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/file.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs\");\n/* harmony import */ var _lib_function_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/function.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\");\n/* harmony import */ var _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/hash.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs\");\n/* harmony import */ var _lib_id_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/id.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/id.mjs\");\n/* harmony import */ var _lib_iterable_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/iterable.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs\");\n/* harmony import */ var _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/media/media.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs\");\n/* harmony import */ var _lib_media_png_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/media/png.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\");\n/* harmony import */ var _lib_network_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/network.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/network.mjs\");\n/* harmony import */ var _lib_number_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/number.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs\");\n/* harmony import */ var _lib_object_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/object.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs\");\n/* harmony import */ var _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/perf.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\");\n/* harmony import */ var _lib_reordering_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/reordering.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering.mjs\");\n/* harmony import */ var _lib_sort_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lib/sort.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs\");\n/* harmony import */ var _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./lib/storage.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs\");\n/* harmony import */ var _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./lib/throttle.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs\");\n/* harmony import */ var _lib_timers_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./lib/timers.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs\");\n/* harmony import */ var _lib_url_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./lib/url.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/url.mjs\");\n/* harmony import */ var _lib_value_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./lib/value.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs\");\n/* harmony import */ var _lib_warn_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./lib/warn.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warn.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n(0,_lib_version_mjs__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/utils\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ1g7QUFDSjtBQUNnQjtBQVN6QztBQUNhO0FBQ007QUFRakI7QUFDbUI7QUFDdUI7QUFDeEI7QUFDaUI7QUFDNkI7QUFDcEI7QUFDYjtBQU0zQjtBQUNrQjtBQUNBO0FBQ2U7QUFZdEM7QUFDa0U7QUFZOUQ7QUFDWTtBQVVmO0FBQzJDO0FBQzVCO0FBQ0c7QUFRcEI7QUFDeUU7QUFDbEM7QUFDaEUsOEVBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBMEZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2luZGV4Lm1qcz8yNzIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZ2lzdGVyVGxkcmF3TGlicmFyeVZlcnNpb24gfSBmcm9tIFwiLi9saWIvdmVyc2lvbi5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHQgYXMgZGVmYXVsdDIgfSBmcm9tIFwibG9kYXNoLnRocm90dGxlXCI7XG5pbXBvcnQgeyBkZWZhdWx0IGFzIGRlZmF1bHQzIH0gZnJvbSBcImxvZGFzaC51bmlxXCI7XG5pbXBvcnQgeyBQZXJmb3JtYW5jZVRyYWNrZXIgfSBmcm9tIFwiLi9saWIvUGVyZm9ybWFuY2VUcmFja2VyLm1qc1wiO1xuaW1wb3J0IHtcbiAgYXJlQXJyYXlzU2hhbGxvd0VxdWFsLFxuICBjb21wYWN0LFxuICBkZWR1cGUsXG4gIGxhc3QsXG4gIG1pbkJ5LFxuICBwYXJ0aXRpb24sXG4gIHJvdGF0ZUFycmF5XG59IGZyb20gXCIuL2xpYi9hcnJheS5tanNcIjtcbmltcG9ydCB7IGJpbmQgfSBmcm9tIFwiLi9saWIvYmluZC5tanNcIjtcbmltcG9ydCB7IFdlYWtDYWNoZSB9IGZyb20gXCIuL2xpYi9jYWNoZS5tanNcIjtcbmltcG9ydCB7XG4gIFJlc3VsdCxcbiAgYXNzZXJ0LFxuICBhc3NlcnRFeGlzdHMsXG4gIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcixcbiAgcHJvbWlzZVdpdGhSZXNvbHZlLFxuICBzbGVlcFxufSBmcm9tIFwiLi9saWIvY29udHJvbC5tanNcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4vbGliL2RlYm91bmNlLm1qc1wiO1xuaW1wb3J0IHsgYW5ub3RhdGVFcnJvciwgZ2V0RXJyb3JBbm5vdGF0aW9ucyB9IGZyb20gXCIuL2xpYi9lcnJvci5tanNcIjtcbmltcG9ydCB7IEZpbGVIZWxwZXJzIH0gZnJvbSBcIi4vbGliL2ZpbGUubWpzXCI7XG5pbXBvcnQgeyBub29wLCBvbWl0RnJvbVN0YWNrVHJhY2UgfSBmcm9tIFwiLi9saWIvZnVuY3Rpb24ubWpzXCI7XG5pbXBvcnQgeyBnZXRIYXNoRm9yQnVmZmVyLCBnZXRIYXNoRm9yT2JqZWN0LCBnZXRIYXNoRm9yU3RyaW5nLCBsbnMgfSBmcm9tIFwiLi9saWIvaGFzaC5tanNcIjtcbmltcG9ydCB7IG1vY2tVbmlxdWVJZCwgcmVzdG9yZVVuaXF1ZUlkLCB1bmlxdWVJZCB9IGZyb20gXCIuL2xpYi9pZC5tanNcIjtcbmltcG9ydCB7IGdldEZpcnN0RnJvbUl0ZXJhYmxlIH0gZnJvbSBcIi4vbGliL2l0ZXJhYmxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVEVEX01FRElBX1RZUEVfTElTVCxcbiAgREVGQVVMVF9TVVBQT1JUX1ZJREVPX1RZUEVTLFxuICBNZWRpYUhlbHBlcnNcbn0gZnJvbSBcIi4vbGliL21lZGlhL21lZGlhLm1qc1wiO1xuaW1wb3J0IHsgUG5nSGVscGVycyB9IGZyb20gXCIuL2xpYi9tZWRpYS9wbmcubWpzXCI7XG5pbXBvcnQgeyBJbWFnZSwgZmV0Y2ggfSBmcm9tIFwiLi9saWIvbmV0d29yay5tanNcIjtcbmltcG9ydCB7IGludkxlcnAsIGxlcnAsIG1vZHVsYXRlLCBybmcgfSBmcm9tIFwiLi9saWIvbnVtYmVyLm1qc1wiO1xuaW1wb3J0IHtcbiAgYXJlT2JqZWN0c1NoYWxsb3dFcXVhbCxcbiAgZmlsdGVyRW50cmllcyxcbiAgZ2V0T3duUHJvcGVydHksXG4gIGdyb3VwQnksXG4gIGhhc093blByb3BlcnR5LFxuICBtYXBPYmplY3RNYXBWYWx1ZXMsXG4gIG9iamVjdE1hcEVudHJpZXMsXG4gIG9iamVjdE1hcEZyb21FbnRyaWVzLFxuICBvYmplY3RNYXBLZXlzLFxuICBvYmplY3RNYXBWYWx1ZXNcbn0gZnJvbSBcIi4vbGliL29iamVjdC5tanNcIjtcbmltcG9ydCB7IG1lYXN1cmVBdmVyYWdlRHVyYXRpb24sIG1lYXN1cmVDYkR1cmF0aW9uLCBtZWFzdXJlRHVyYXRpb24gfSBmcm9tIFwiLi9saWIvcGVyZi5tanNcIjtcbmltcG9ydCB7XG4gIFpFUk9fSU5ERVhfS0VZLFxuICBnZXRJbmRleEFib3ZlLFxuICBnZXRJbmRleEJlbG93LFxuICBnZXRJbmRleEJldHdlZW4sXG4gIGdldEluZGljZXMsXG4gIGdldEluZGljZXNBYm92ZSxcbiAgZ2V0SW5kaWNlc0JlbG93LFxuICBnZXRJbmRpY2VzQmV0d2VlbixcbiAgc29ydEJ5SW5kZXgsXG4gIHZhbGlkYXRlSW5kZXhLZXlcbn0gZnJvbSBcIi4vbGliL3Jlb3JkZXJpbmcubWpzXCI7XG5pbXBvcnQgeyBzb3J0QnlJZCB9IGZyb20gXCIuL2xpYi9zb3J0Lm1qc1wiO1xuaW1wb3J0IHtcbiAgY2xlYXJMb2NhbFN0b3JhZ2UsXG4gIGNsZWFyU2Vzc2lvblN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSxcbiAgZ2V0RnJvbUxvY2FsU3RvcmFnZSxcbiAgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLFxuICBzZXRJbkxvY2FsU3RvcmFnZSxcbiAgc2V0SW5TZXNzaW9uU3RvcmFnZVxufSBmcm9tIFwiLi9saWIvc3RvcmFnZS5tanNcIjtcbmltcG9ydCB7IGZwc1Rocm90dGxlLCB0aHJvdHRsZVRvTmV4dEZyYW1lIH0gZnJvbSBcIi4vbGliL3Rocm90dGxlLm1qc1wiO1xuaW1wb3J0IHsgVGltZXJzIH0gZnJvbSBcIi4vbGliL3RpbWVycy5tanNcIjtcbmltcG9ydCB7IHNhZmVQYXJzZVVybCB9IGZyb20gXCIuL2xpYi91cmwubWpzXCI7XG5pbXBvcnQge1xuICBTVFJVQ1RVUkVEX0NMT05FX09CSkVDVF9QUk9UT1RZUEUsXG4gIGlzRGVmaW5lZCxcbiAgaXNOYXRpdmVTdHJ1Y3R1cmVkQ2xvbmUsXG4gIGlzTm9uTnVsbCxcbiAgaXNOb25OdWxsaXNoLFxuICBzdHJ1Y3R1cmVkQ2xvbmVcbn0gZnJvbSBcIi4vbGliL3ZhbHVlLm1qc1wiO1xuaW1wb3J0IHsgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbiBhcyByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uMiB9IGZyb20gXCIuL2xpYi92ZXJzaW9uLm1qc1wiO1xuaW1wb3J0IHsgd2FybkRlcHJlY2F0ZWRHZXR0ZXIsIHdhcm5PbmNlIH0gZnJvbSBcIi4vbGliL3dhcm4ubWpzXCI7XG5yZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKFxuICBcIkB0bGRyYXcvdXRpbHNcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVEVEX01FRElBX1RZUEVfTElTVCxcbiAgREVGQVVMVF9TVVBQT1JUX1ZJREVPX1RZUEVTLFxuICBGaWxlSGVscGVycyxcbiAgSW1hZ2UsXG4gIE1lZGlhSGVscGVycyxcbiAgUGVyZm9ybWFuY2VUcmFja2VyLFxuICBQbmdIZWxwZXJzLFxuICBSZXN1bHQsXG4gIFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSxcbiAgVGltZXJzLFxuICBXZWFrQ2FjaGUsXG4gIFpFUk9fSU5ERVhfS0VZLFxuICBhbm5vdGF0ZUVycm9yLFxuICBhcmVBcnJheXNTaGFsbG93RXF1YWwsXG4gIGFyZU9iamVjdHNTaGFsbG93RXF1YWwsXG4gIGFzc2VydCxcbiAgYXNzZXJ0RXhpc3RzLFxuICBiaW5kLFxuICBjbGVhckxvY2FsU3RvcmFnZSxcbiAgY2xlYXJTZXNzaW9uU3RvcmFnZSxcbiAgY29tcGFjdCxcbiAgZGVib3VuY2UsXG4gIGRlZHVwZSxcbiAgZGVsZXRlRnJvbUxvY2FsU3RvcmFnZSxcbiAgZGVsZXRlRnJvbVNlc3Npb25TdG9yYWdlLFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIGZldGNoLFxuICBmaWx0ZXJFbnRyaWVzLFxuICBmcHNUaHJvdHRsZSxcbiAgZ2V0RXJyb3JBbm5vdGF0aW9ucyxcbiAgZ2V0Rmlyc3RGcm9tSXRlcmFibGUsXG4gIGdldEZyb21Mb2NhbFN0b3JhZ2UsXG4gIGdldEZyb21TZXNzaW9uU3RvcmFnZSxcbiAgZ2V0SGFzaEZvckJ1ZmZlcixcbiAgZ2V0SGFzaEZvck9iamVjdCxcbiAgZ2V0SGFzaEZvclN0cmluZyxcbiAgZ2V0SW5kZXhBYm92ZSxcbiAgZ2V0SW5kZXhCZWxvdyxcbiAgZ2V0SW5kZXhCZXR3ZWVuLFxuICBnZXRJbmRpY2VzLFxuICBnZXRJbmRpY2VzQWJvdmUsXG4gIGdldEluZGljZXNCZWxvdyxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIGdldE93blByb3BlcnR5LFxuICBncm91cEJ5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaW52TGVycCxcbiAgaXNEZWZpbmVkLFxuICBpc05hdGl2ZVN0cnVjdHVyZWRDbG9uZSxcbiAgaXNOb25OdWxsLFxuICBpc05vbk51bGxpc2gsXG4gIGxhc3QsXG4gIGxlcnAsXG4gIGxucyxcbiAgbWFwT2JqZWN0TWFwVmFsdWVzLFxuICBtZWFzdXJlQXZlcmFnZUR1cmF0aW9uLFxuICBtZWFzdXJlQ2JEdXJhdGlvbixcbiAgbWVhc3VyZUR1cmF0aW9uLFxuICBtaW5CeSxcbiAgbW9ja1VuaXF1ZUlkLFxuICBtb2R1bGF0ZSxcbiAgbm9vcCxcbiAgb2JqZWN0TWFwRW50cmllcyxcbiAgb2JqZWN0TWFwRnJvbUVudHJpZXMsXG4gIG9iamVjdE1hcEtleXMsXG4gIG9iamVjdE1hcFZhbHVlcyxcbiAgb21pdEZyb21TdGFja1RyYWNlLFxuICBwYXJ0aXRpb24sXG4gIHByb21pc2VXaXRoUmVzb2x2ZSxcbiAgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbjIgYXMgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvbixcbiAgcmVzdG9yZVVuaXF1ZUlkLFxuICBybmcsXG4gIHJvdGF0ZUFycmF5LFxuICBzYWZlUGFyc2VVcmwsXG4gIHNldEluTG9jYWxTdG9yYWdlLFxuICBzZXRJblNlc3Npb25TdG9yYWdlLFxuICBzbGVlcCxcbiAgc29ydEJ5SWQsXG4gIHNvcnRCeUluZGV4LFxuICBzdHJ1Y3R1cmVkQ2xvbmUsXG4gIGRlZmF1bHQyIGFzIHRocm90dGxlLFxuICB0aHJvdHRsZVRvTmV4dEZyYW1lLFxuICBkZWZhdWx0MyBhcyB1bmlxLFxuICB1bmlxdWVJZCxcbiAgdmFsaWRhdGVJbmRleEtleSxcbiAgd2FybkRlcHJlY2F0ZWRHZXR0ZXIsXG4gIHdhcm5PbmNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PerformanceTracker: () => (/* binding */ PerformanceTracker)\n/* harmony export */ });\n/* harmony import */ var _perf_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./perf.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\");\n\nclass PerformanceTracker {\n  startTime = 0;\n  name = \"\";\n  frames = 0;\n  started = false;\n  frame = null;\n  // eslint-disable-next-line local/prefer-class-methods\n  recordFrame = () => {\n    this.frames++;\n    if (!this.started) return;\n    this.frame = requestAnimationFrame(this.recordFrame);\n  };\n  start(name) {\n    this.name = name;\n    this.frames = 0;\n    this.started = true;\n    if (this.frame !== null) cancelAnimationFrame(this.frame);\n    this.frame = requestAnimationFrame(this.recordFrame);\n    this.startTime = performance.now();\n  }\n  stop() {\n    this.started = false;\n    if (this.frame !== null) cancelAnimationFrame(this.frame);\n    const duration = (performance.now() - this.startTime) / 1e3;\n    const fps = duration === 0 ? 0 : Math.floor(this.frames / duration);\n    const background = fps > 55 ? _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Good : fps > 30 ? _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Mid : _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Poor;\n    const color = background === _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Mid ? \"black\" : \"white\";\n    const capitalized = this.name[0].toUpperCase() + this.name.slice(1);\n    console.debug(\n      `%cPerf%c ${capitalized} %c${fps}%c fps`,\n      `color: white; background: ${_perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n      \"font-weight: normal\",\n      `font-weight: bold; padding: 2px; background: ${background};color: ${color};`,\n      \"font-weight: normal\"\n    );\n  }\n  isStarted() {\n    return this.started;\n  }\n}\n\n//# sourceMappingURL=PerformanceTracker.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvUGVyZm9ybWFuY2VUcmFja2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx5REFBa0IsbUJBQW1CLHlEQUFrQixPQUFPLHlEQUFrQjtBQUNsSCxpQ0FBaUMseURBQWtCO0FBQ25EO0FBQ0E7QUFDQSxrQkFBa0IsYUFBYSxJQUFJLElBQUk7QUFDdkMscUJBQXFCLGNBQWMsK0RBQXdCLEVBQUUsYUFBYSxtQkFBbUI7QUFDN0Y7QUFDQSwwQkFBMEIsY0FBYyxjQUFjLFlBQVksU0FBUyxPQUFPO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL1BlcmZvcm1hbmNlVHJhY2tlci5tanM/MTliYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQRVJGT1JNQU5DRV9DT0xPUlMsIFBFUkZPUk1BTkNFX1BSRUZJWF9DT0xPUiB9IGZyb20gXCIuL3BlcmYubWpzXCI7XG5jbGFzcyBQZXJmb3JtYW5jZVRyYWNrZXIge1xuICBzdGFydFRpbWUgPSAwO1xuICBuYW1lID0gXCJcIjtcbiAgZnJhbWVzID0gMDtcbiAgc3RhcnRlZCA9IGZhbHNlO1xuICBmcmFtZSA9IG51bGw7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBsb2NhbC9wcmVmZXItY2xhc3MtbWV0aG9kc1xuICByZWNvcmRGcmFtZSA9ICgpID0+IHtcbiAgICB0aGlzLmZyYW1lcysrO1xuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm47XG4gICAgdGhpcy5mcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlY29yZEZyYW1lKTtcbiAgfTtcbiAgc3RhcnQobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5mcmFtZXMgPSAwO1xuICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuZnJhbWUgIT09IG51bGwpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWUpO1xuICAgIHRoaXMuZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZWNvcmRGcmFtZSk7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuICBzdG9wKCkge1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmZyYW1lICE9PSBudWxsKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IChwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDFlMztcbiAgICBjb25zdCBmcHMgPSBkdXJhdGlvbiA9PT0gMCA/IDAgOiBNYXRoLmZsb29yKHRoaXMuZnJhbWVzIC8gZHVyYXRpb24pO1xuICAgIGNvbnN0IGJhY2tncm91bmQgPSBmcHMgPiA1NSA/IFBFUkZPUk1BTkNFX0NPTE9SUy5Hb29kIDogZnBzID4gMzAgPyBQRVJGT1JNQU5DRV9DT0xPUlMuTWlkIDogUEVSRk9STUFOQ0VfQ09MT1JTLlBvb3I7XG4gICAgY29uc3QgY29sb3IgPSBiYWNrZ3JvdW5kID09PSBQRVJGT1JNQU5DRV9DT0xPUlMuTWlkID8gXCJibGFja1wiIDogXCJ3aGl0ZVwiO1xuICAgIGNvbnN0IGNhcGl0YWxpemVkID0gdGhpcy5uYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyB0aGlzLm5hbWUuc2xpY2UoMSk7XG4gICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgIGAlY1BlcmYlYyAke2NhcGl0YWxpemVkfSAlYyR7ZnBzfSVjIGZwc2AsXG4gICAgICBgY29sb3I6IHdoaXRlOyBiYWNrZ3JvdW5kOiAke1BFUkZPUk1BTkNFX1BSRUZJWF9DT0xPUn07cGFkZGluZzogMnB4O2JvcmRlci1yYWRpdXM6IDNweDtgLFxuICAgICAgXCJmb250LXdlaWdodDogbm9ybWFsXCIsXG4gICAgICBgZm9udC13ZWlnaHQ6IGJvbGQ7IHBhZGRpbmc6IDJweDsgYmFja2dyb3VuZDogJHtiYWNrZ3JvdW5kfTtjb2xvcjogJHtjb2xvcn07YCxcbiAgICAgIFwiZm9udC13ZWlnaHQ6IG5vcm1hbFwiXG4gICAgKTtcbiAgfVxuICBpc1N0YXJ0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRlZDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUGVyZm9ybWFuY2VUcmFja2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGVyZm9ybWFuY2VUcmFja2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/array.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   areArraysShallowEqual: () => (/* binding */ areArraysShallowEqual),\n/* harmony export */   compact: () => (/* binding */ compact),\n/* harmony export */   dedupe: () => (/* binding */ dedupe),\n/* harmony export */   last: () => (/* binding */ last),\n/* harmony export */   minBy: () => (/* binding */ minBy),\n/* harmony export */   partition: () => (/* binding */ partition),\n/* harmony export */   rotateArray: () => (/* binding */ rotateArray)\n/* harmony export */ });\nfunction rotateArray(arr, offset) {\n  return arr.map((_, i) => arr[(i + offset) % arr.length]);\n}\nfunction dedupe(input, equals) {\n  const result = [];\n  mainLoop: for (const item of input) {\n    for (const existing of result) {\n      if (equals ? equals(item, existing) : item === existing) {\n        continue mainLoop;\n      }\n    }\n    result.push(item);\n  }\n  return result;\n}\nfunction compact(arr) {\n  return arr.filter((i) => i !== void 0 && i !== null);\n}\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\nfunction minBy(arr, fn) {\n  let min;\n  let minVal = Infinity;\n  for (const item of arr) {\n    const val = fn(item);\n    if (val < minVal) {\n      min = item;\n      minVal = val;\n    }\n  }\n  return min;\n}\nfunction partition(arr, predicate) {\n  const satisfies = [];\n  const doesNotSatisfy = [];\n  for (const item of arr) {\n    if (predicate(item)) {\n      satisfies.push(item);\n    } else {\n      doesNotSatisfy.push(item);\n    }\n  }\n  return [satisfies, doesNotSatisfy];\n}\nfunction areArraysShallowEqual(arr1, arr2) {\n  if (arr1 === arr2) return true;\n  if (arr1.length !== arr2.length) return false;\n  for (let i = 0; i < arr1.length; i++) {\n    if (!Object.is(arr1[i], arr2[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n//# sourceMappingURL=array.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvYXJyYXkubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2FycmF5Lm1qcz8zMDY1Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJvdGF0ZUFycmF5KGFyciwgb2Zmc2V0KSB7XG4gIHJldHVybiBhcnIubWFwKChfLCBpKSA9PiBhcnJbKGkgKyBvZmZzZXQpICUgYXJyLmxlbmd0aF0pO1xufVxuZnVuY3Rpb24gZGVkdXBlKGlucHV0LCBlcXVhbHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIG1haW5Mb29wOiBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXQpIHtcbiAgICBmb3IgKGNvbnN0IGV4aXN0aW5nIG9mIHJlc3VsdCkge1xuICAgICAgaWYgKGVxdWFscyA/IGVxdWFscyhpdGVtLCBleGlzdGluZykgOiBpdGVtID09PSBleGlzdGluZykge1xuICAgICAgICBjb250aW51ZSBtYWluTG9vcDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LnB1c2goaXRlbSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXBhY3QoYXJyKSB7XG4gIHJldHVybiBhcnIuZmlsdGVyKChpKSA9PiBpICE9PSB2b2lkIDAgJiYgaSAhPT0gbnVsbCk7XG59XG5mdW5jdGlvbiBsYXN0KGFycikge1xuICByZXR1cm4gYXJyW2Fyci5sZW5ndGggLSAxXTtcbn1cbmZ1bmN0aW9uIG1pbkJ5KGFyciwgZm4pIHtcbiAgbGV0IG1pbjtcbiAgbGV0IG1pblZhbCA9IEluZmluaXR5O1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgY29uc3QgdmFsID0gZm4oaXRlbSk7XG4gICAgaWYgKHZhbCA8IG1pblZhbCkge1xuICAgICAgbWluID0gaXRlbTtcbiAgICAgIG1pblZhbCA9IHZhbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1pbjtcbn1cbmZ1bmN0aW9uIHBhcnRpdGlvbihhcnIsIHByZWRpY2F0ZSkge1xuICBjb25zdCBzYXRpc2ZpZXMgPSBbXTtcbiAgY29uc3QgZG9lc05vdFNhdGlzZnkgPSBbXTtcbiAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgIGlmIChwcmVkaWNhdGUoaXRlbSkpIHtcbiAgICAgIHNhdGlzZmllcy5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2VzTm90U2F0aXNmeS5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW3NhdGlzZmllcywgZG9lc05vdFNhdGlzZnldO1xufVxuZnVuY3Rpb24gYXJlQXJyYXlzU2hhbGxvd0VxdWFsKGFycjEsIGFycjIpIHtcbiAgaWYgKGFycjEgPT09IGFycjIpIHJldHVybiB0cnVlO1xuICBpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGlmICghT2JqZWN0LmlzKGFycjFbaV0sIGFycjJbaV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IHtcbiAgYXJlQXJyYXlzU2hhbGxvd0VxdWFsLFxuICBjb21wYWN0LFxuICBkZWR1cGUsXG4gIGxhc3QsXG4gIG1pbkJ5LFxuICBwYXJ0aXRpb24sXG4gIHJvdGF0ZUFycmF5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/bind.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/bind.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bind: () => (/* binding */ bind)\n/* harmony export */ });\n/* harmony import */ var _control_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./control.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\");\n\nfunction bind(...args) {\n  if (args.length === 2) {\n    const [originalMethod, context] = args;\n    context.addInitializer(function initializeMethod() {\n      (0,_control_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(Reflect.isExtensible(this), \"Cannot bind to a non-extensible class.\");\n      const value = originalMethod.bind(this);\n      const ok = Reflect.defineProperty(this, context.name, {\n        value,\n        writable: true,\n        configurable: true\n      });\n      (0,_control_mjs__WEBPACK_IMPORTED_MODULE_0__.assert)(ok, \"Cannot bind a non-configurable class method.\");\n    });\n  } else {\n    const [_target, propertyKey, descriptor] = args;\n    if (!descriptor || typeof descriptor.value !== \"function\") {\n      throw new TypeError(\n        `Only methods can be decorated with @bind. <${propertyKey}> is not a method!`\n      );\n    }\n    return {\n      configurable: true,\n      get() {\n        const bound = descriptor.value.bind(this);\n        Object.defineProperty(this, propertyKey, {\n          value: bound,\n          configurable: true,\n          writable: true\n        });\n        return bound;\n      }\n    };\n  }\n}\n\n//# sourceMappingURL=bind.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvYmluZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNLG9EQUFNO0FBQ1osS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsWUFBWTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2JpbmQubWpzPzZlODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSBcIi4vY29udHJvbC5tanNcIjtcbmZ1bmN0aW9uIGJpbmQoLi4uYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICBjb25zdCBbb3JpZ2luYWxNZXRob2QsIGNvbnRleHRdID0gYXJncztcbiAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyKGZ1bmN0aW9uIGluaXRpYWxpemVNZXRob2QoKSB7XG4gICAgICBhc3NlcnQoUmVmbGVjdC5pc0V4dGVuc2libGUodGhpcyksIFwiQ2Fubm90IGJpbmQgdG8gYSBub24tZXh0ZW5zaWJsZSBjbGFzcy5cIik7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcyk7XG4gICAgICBjb25zdCBvayA9IFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcywgY29udGV4dC5uYW1lLCB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGFzc2VydChvaywgXCJDYW5ub3QgYmluZCBhIG5vbi1jb25maWd1cmFibGUgY2xhc3MgbWV0aG9kLlwiKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbX3RhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3JdID0gYXJncztcbiAgICBpZiAoIWRlc2NyaXB0b3IgfHwgdHlwZW9mIGRlc2NyaXB0b3IudmFsdWUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgYE9ubHkgbWV0aG9kcyBjYW4gYmUgZGVjb3JhdGVkIHdpdGggQGJpbmQuIDwke3Byb3BlcnR5S2V5fT4gaXMgbm90IGEgbWV0aG9kIWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kID0gZGVzY3JpcHRvci52YWx1ZS5iaW5kKHRoaXMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgcHJvcGVydHlLZXksIHtcbiAgICAgICAgICB2YWx1ZTogYm91bmQsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYm91bmQ7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgYmluZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/bind.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WeakCache: () => (/* binding */ WeakCache)\n/* harmony export */ });\nclass WeakCache {\n  /** The map of items to their cached values. */\n  items = /* @__PURE__ */ new WeakMap();\n  /**\n   * Get the cached value for a given record. If the record is not present in the map, the callback\n   * will be used to create the value (with the result being stored in the cache for next time).\n   *\n   * @param item - The item to get.\n   * @param cb - The callback to use to create the value when a cached value is not found.\n   */\n  get(item, cb) {\n    if (!this.items.has(item)) {\n      this.items.set(item, cb(item));\n    }\n    return this.items.get(item);\n  }\n}\n\n//# sourceMappingURL=cache.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvY2FjaGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2NhY2hlLm1qcz84NDgxIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFdlYWtDYWNoZSB7XG4gIC8qKiBUaGUgbWFwIG9mIGl0ZW1zIHRvIHRoZWlyIGNhY2hlZCB2YWx1ZXMuICovXG4gIGl0ZW1zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNhY2hlZCB2YWx1ZSBmb3IgYSBnaXZlbiByZWNvcmQuIElmIHRoZSByZWNvcmQgaXMgbm90IHByZXNlbnQgaW4gdGhlIG1hcCwgdGhlIGNhbGxiYWNrXG4gICAqIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIHZhbHVlICh3aXRoIHRoZSByZXN1bHQgYmVpbmcgc3RvcmVkIGluIHRoZSBjYWNoZSBmb3IgbmV4dCB0aW1lKS5cbiAgICpcbiAgICogQHBhcmFtIGl0ZW0gLSBUaGUgaXRlbSB0byBnZXQuXG4gICAqIEBwYXJhbSBjYiAtIFRoZSBjYWxsYmFjayB0byB1c2UgdG8gY3JlYXRlIHRoZSB2YWx1ZSB3aGVuIGEgY2FjaGVkIHZhbHVlIGlzIG5vdCBmb3VuZC5cbiAgICovXG4gIGdldChpdGVtLCBjYikge1xuICAgIGlmICghdGhpcy5pdGVtcy5oYXMoaXRlbSkpIHtcbiAgICAgIHRoaXMuaXRlbXMuc2V0KGl0ZW0sIGNiKGl0ZW0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZ2V0KGl0ZW0pO1xuICB9XG59XG5leHBvcnQge1xuICBXZWFrQ2FjaGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/control.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Result: () => (/* binding */ Result),\n/* harmony export */   assert: () => (/* binding */ assert),\n/* harmony export */   assertExists: () => (/* binding */ assertExists),\n/* harmony export */   exhaustiveSwitchError: () => (/* binding */ exhaustiveSwitchError),\n/* harmony export */   promiseWithResolve: () => (/* binding */ promiseWithResolve),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\n/* harmony import */ var _function_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./function.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\");\n\nconst Result = {\n  ok(value) {\n    return { ok: true, value };\n  },\n  err(error) {\n    return { ok: false, error };\n  }\n};\nfunction exhaustiveSwitchError(value, property) {\n  const debugValue = property && value && typeof value === \"object\" && property in value ? value[property] : value;\n  throw new Error(`Unknown switch case ${debugValue}`);\n}\nconst assert = (0,_function_mjs__WEBPACK_IMPORTED_MODULE_0__.omitFromStackTrace)(\n  (value, message) => {\n    if (!value) {\n      throw new Error(message || \"Assertion Error\");\n    }\n  }\n);\nconst assertExists = (0,_function_mjs__WEBPACK_IMPORTED_MODULE_0__.omitFromStackTrace)((value, message) => {\n  if (value == null) {\n    throw new Error(message ?? \"value must be defined\");\n  }\n  return value;\n});\nfunction promiseWithResolve() {\n  let resolve;\n  let reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return Object.assign(promise, {\n    resolve,\n    reject\n  });\n}\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n//# sourceMappingURL=control.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvY29udHJvbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUNwRDtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxXQUFXO0FBQ3BEO0FBQ0EsZUFBZSxpRUFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGlFQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBUUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2NvbnRyb2wubWpzPzUzOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb21pdEZyb21TdGFja1RyYWNlIH0gZnJvbSBcIi4vZnVuY3Rpb24ubWpzXCI7XG5jb25zdCBSZXN1bHQgPSB7XG4gIG9rKHZhbHVlKSB7XG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIHZhbHVlIH07XG4gIH0sXG4gIGVycihlcnJvcikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufTtcbmZ1bmN0aW9uIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcih2YWx1ZSwgcHJvcGVydHkpIHtcbiAgY29uc3QgZGVidWdWYWx1ZSA9IHByb3BlcnR5ICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBwcm9wZXJ0eSBpbiB2YWx1ZSA/IHZhbHVlW3Byb3BlcnR5XSA6IHZhbHVlO1xuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc3dpdGNoIGNhc2UgJHtkZWJ1Z1ZhbHVlfWApO1xufVxuY29uc3QgYXNzZXJ0ID0gb21pdEZyb21TdGFja1RyYWNlKFxuICAodmFsdWUsIG1lc3NhZ2UpID0+IHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSB8fCBcIkFzc2VydGlvbiBFcnJvclwiKTtcbiAgICB9XG4gIH1cbik7XG5jb25zdCBhc3NlcnRFeGlzdHMgPSBvbWl0RnJvbVN0YWNrVHJhY2UoKHZhbHVlLCBtZXNzYWdlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UgPz8gXCJ2YWx1ZSBtdXN0IGJlIGRlZmluZWRcIik7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufSk7XG5mdW5jdGlvbiBwcm9taXNlV2l0aFJlc29sdmUoKSB7XG4gIGxldCByZXNvbHZlO1xuICBsZXQgcmVqZWN0O1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgcmVzb2x2ZSA9IHJlcztcbiAgICByZWplY3QgPSByZWo7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgcmVzb2x2ZSxcbiAgICByZWplY3RcbiAgfSk7XG59XG5mdW5jdGlvbiBzbGVlcChtcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmV4cG9ydCB7XG4gIFJlc3VsdCxcbiAgYXNzZXJ0LFxuICBhc3NlcnRFeGlzdHMsXG4gIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcixcbiAgcHJvbWlzZVdpdGhSZXNvbHZlLFxuICBzbGVlcFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2wubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debounce: () => (/* binding */ debounce)\n/* harmony export */ });\nfunction debounce(callback, wait) {\n  let state = void 0;\n  const fn = (...args) => {\n    if (!state) {\n      state = {};\n      state.promise = new Promise((resolve, reject) => {\n        state.resolve = resolve;\n        state.reject = reject;\n      });\n    }\n    clearTimeout(state.timeout);\n    state.latestArgs = args;\n    state.timeout = setTimeout(() => {\n      const s = state;\n      state = void 0;\n      try {\n        s.resolve(callback(...s.latestArgs));\n      } catch (e) {\n        s.reject(e);\n      }\n    }, wait);\n    return state.promise;\n  };\n  fn.cancel = () => {\n    if (!state) return;\n    clearTimeout(state.timeout);\n  };\n  return fn;\n}\n\n//# sourceMappingURL=debounce.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZGVib3VuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2RlYm91bmNlLm1qcz80NzljIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGRlYm91bmNlKGNhbGxiYWNrLCB3YWl0KSB7XG4gIGxldCBzdGF0ZSA9IHZvaWQgMDtcbiAgY29uc3QgZm4gPSAoLi4uYXJncykgPT4ge1xuICAgIGlmICghc3RhdGUpIHtcbiAgICAgIHN0YXRlID0ge307XG4gICAgICBzdGF0ZS5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBzdGF0ZS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgc3RhdGUucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0KTtcbiAgICBzdGF0ZS5sYXRlc3RBcmdzID0gYXJncztcbiAgICBzdGF0ZS50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBzID0gc3RhdGU7XG4gICAgICBzdGF0ZSA9IHZvaWQgMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHMucmVzb2x2ZShjYWxsYmFjayguLi5zLmxhdGVzdEFyZ3MpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcy5yZWplY3QoZSk7XG4gICAgICB9XG4gICAgfSwgd2FpdCk7XG4gICAgcmV0dXJuIHN0YXRlLnByb21pc2U7XG4gIH07XG4gIGZuLmNhbmNlbCA9ICgpID0+IHtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XG4gICAgY2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXQpO1xuICB9O1xuICByZXR1cm4gZm47XG59XG5leHBvcnQge1xuICBkZWJvdW5jZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/error.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   annotateError: () => (/* binding */ annotateError),\n/* harmony export */   getErrorAnnotations: () => (/* binding */ getErrorAnnotations)\n/* harmony export */ });\nconst annotationsByError = /* @__PURE__ */ new WeakMap();\nfunction annotateError(error, annotations) {\n  if (typeof error !== \"object\" || error === null) return;\n  let currentAnnotations = annotationsByError.get(error);\n  if (!currentAnnotations) {\n    currentAnnotations = { tags: {}, extras: {} };\n    annotationsByError.set(error, currentAnnotations);\n  }\n  if (annotations.tags) {\n    currentAnnotations.tags = {\n      ...currentAnnotations.tags,\n      ...annotations.tags\n    };\n  }\n  if (annotations.extras) {\n    currentAnnotations.extras = {\n      ...currentAnnotations.extras,\n      ...annotations.extras\n    };\n  }\n}\nfunction getErrorAnnotations(error) {\n  return annotationsByError.get(error) ?? { tags: {}, extras: {} };\n}\n\n//# sourceMappingURL=error.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZXJyb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixRQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFFBQVE7QUFDcEQ7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZXJyb3IubWpzP2U3YmUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYW5ub3RhdGlvbnNCeUVycm9yID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhbm5vdGF0ZUVycm9yKGVycm9yLCBhbm5vdGF0aW9ucykge1xuICBpZiAodHlwZW9mIGVycm9yICE9PSBcIm9iamVjdFwiIHx8IGVycm9yID09PSBudWxsKSByZXR1cm47XG4gIGxldCBjdXJyZW50QW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9uc0J5RXJyb3IuZ2V0KGVycm9yKTtcbiAgaWYgKCFjdXJyZW50QW5ub3RhdGlvbnMpIHtcbiAgICBjdXJyZW50QW5ub3RhdGlvbnMgPSB7IHRhZ3M6IHt9LCBleHRyYXM6IHt9IH07XG4gICAgYW5ub3RhdGlvbnNCeUVycm9yLnNldChlcnJvciwgY3VycmVudEFubm90YXRpb25zKTtcbiAgfVxuICBpZiAoYW5ub3RhdGlvbnMudGFncykge1xuICAgIGN1cnJlbnRBbm5vdGF0aW9ucy50YWdzID0ge1xuICAgICAgLi4uY3VycmVudEFubm90YXRpb25zLnRhZ3MsXG4gICAgICAuLi5hbm5vdGF0aW9ucy50YWdzXG4gICAgfTtcbiAgfVxuICBpZiAoYW5ub3RhdGlvbnMuZXh0cmFzKSB7XG4gICAgY3VycmVudEFubm90YXRpb25zLmV4dHJhcyA9IHtcbiAgICAgIC4uLmN1cnJlbnRBbm5vdGF0aW9ucy5leHRyYXMsXG4gICAgICAuLi5hbm5vdGF0aW9ucy5leHRyYXNcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBnZXRFcnJvckFubm90YXRpb25zKGVycm9yKSB7XG4gIHJldHVybiBhbm5vdGF0aW9uc0J5RXJyb3IuZ2V0KGVycm9yKSA/PyB7IHRhZ3M6IHt9LCBleHRyYXM6IHt9IH07XG59XG5leHBvcnQge1xuICBhbm5vdGF0ZUVycm9yLFxuICBnZXRFcnJvckFubm90YXRpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/file.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileHelpers: () => (/* binding */ FileHelpers)\n/* harmony export */ });\n/* harmony import */ var _network_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./network.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/network.mjs\");\n\nclass FileHelpers {\n  /**\n   * @param dataURL - The file as a string.\n   *\n   * from https://stackoverflow.com/a/53817185\n   */\n  static async dataUrlToArrayBuffer(dataURL) {\n    return (0,_network_mjs__WEBPACK_IMPORTED_MODULE_0__.fetch)(dataURL).then(function(result) {\n      return result.arrayBuffer();\n    });\n  }\n  /**\n   * Convert a file to a base64 encoded data url.\n   *\n   * @example\n   *\n   * ```ts\n   * const A = FileHelpers.toDataUrl(myImageFile)\n   * ```\n   *\n   * @param file - The file as a blob.\n   */\n  static async blobToDataUrl(file) {\n    return await new Promise((resolve, reject) => {\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (error) => reject(error);\n        reader.onabort = (error) => reject(error);\n        reader.readAsDataURL(file);\n      }\n    });\n  }\n  /**\n   * Convert a file to a unicode text string.\n   *\n   * @example\n   *\n   * ```ts\n   * const A = FileHelpers.fileToDataUrl(myTextFile)\n   * ```\n   *\n   * @param file - The file as a blob.\n   */\n  static async blobToText(file) {\n    return await new Promise((resolve, reject) => {\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (error) => reject(error);\n        reader.onabort = (error) => reject(error);\n        reader.readAsText(file);\n      }\n    });\n  }\n}\n\n//# sourceMappingURL=file.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZmlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFLO0FBQ2hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9maWxlLm1qcz9mM2ZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZldGNoIH0gZnJvbSBcIi4vbmV0d29yay5tanNcIjtcbmNsYXNzIEZpbGVIZWxwZXJzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSBkYXRhVVJMIC0gVGhlIGZpbGUgYXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUzODE3MTg1XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZGF0YVVybFRvQXJyYXlCdWZmZXIoZGF0YVVSTCkge1xuICAgIHJldHVybiBmZXRjaChkYXRhVVJMKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJlc3VsdC5hcnJheUJ1ZmZlcigpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgZmlsZSB0byBhIGJhc2U2NCBlbmNvZGVkIGRhdGEgdXJsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBBID0gRmlsZUhlbHBlcnMudG9EYXRhVXJsKG15SW1hZ2VGaWxlKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBhcyBhIGJsb2IuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgYmxvYlRvRGF0YVVybChmaWxlKSB7XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xuICAgICAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmVhZGVyLm9uYWJvcnQgPSAoZXJyb3IpID0+IHJlamVjdChlcnJvcik7XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgZmlsZSB0byBhIHVuaWNvZGUgdGV4dCBzdHJpbmcuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IEEgPSBGaWxlSGVscGVycy5maWxlVG9EYXRhVXJsKG15VGV4dEZpbGUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGFzIGEgYmxvYi5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBibG9iVG9UZXh0KGZpbGUpIHtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiByZWplY3QoZXJyb3IpO1xuICAgICAgICByZWFkZXIub25hYm9ydCA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEZpbGVIZWxwZXJzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/function.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   noop: () => (/* binding */ noop),\n/* harmony export */   omitFromStackTrace: () => (/* binding */ omitFromStackTrace)\n/* harmony export */ });\nfunction omitFromStackTrace(fn) {\n  const wrappedFn = (...args) => {\n    try {\n      return fn(...args);\n    } catch (error) {\n      if (error instanceof Error && Error.captureStackTrace) {\n        Error.captureStackTrace(error, wrappedFn);\n      }\n      throw error;\n    }\n  };\n  return wrappedFn;\n}\nconst noop = () => {\n};\n\n//# sourceMappingURL=function.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZnVuY3Rpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZnVuY3Rpb24ubWpzPzA0NzYiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gb21pdEZyb21TdGFja1RyYWNlKGZuKSB7XG4gIGNvbnN0IHdyYXBwZWRGbiA9ICguLi5hcmdzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmbiguLi5hcmdzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyb3IsIHdyYXBwZWRGbik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIHJldHVybiB3cmFwcGVkRm47XG59XG5jb25zdCBub29wID0gKCkgPT4ge1xufTtcbmV4cG9ydCB7XG4gIG5vb3AsXG4gIG9taXRGcm9tU3RhY2tUcmFjZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9uLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getHashForBuffer: () => (/* binding */ getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* binding */ getHashForObject),\n/* harmony export */   getHashForString: () => (/* binding */ getHashForString),\n/* harmony export */   lns: () => (/* binding */ lns)\n/* harmony export */ });\nfunction getHashForString(string) {\n  let hash = 0;\n  for (let i = 0; i < string.length; i++) {\n    hash = (hash << 5) - hash + string.charCodeAt(i);\n    hash |= 0;\n  }\n  return hash + \"\";\n}\nfunction getHashForObject(obj) {\n  return getHashForString(JSON.stringify(obj));\n}\nfunction getHashForBuffer(buffer) {\n  const view = new DataView(buffer);\n  let hash = 0;\n  for (let i = 0; i < view.byteLength; i++) {\n    hash = (hash << 5) - hash + view.getUint8(i);\n    hash |= 0;\n  }\n  return hash + \"\";\n}\nfunction lns(str) {\n  const result = str.split(\"\");\n  result.push(...result.splice(0, Math.round(result.length / 5)));\n  result.push(...result.splice(0, Math.round(result.length / 4)));\n  result.push(...result.splice(0, Math.round(result.length / 3)));\n  result.push(...result.splice(0, Math.round(result.length / 2)));\n  return result.reverse().map((n) => +n ? +n < 5 ? 5 + +n : +n > 5 ? +n - 5 : n : n).join(\"\");\n}\n\n//# sourceMappingURL=hash.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaGFzaC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2hhc2gubWpzP2UyYjAiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0SGFzaEZvclN0cmluZyhzdHJpbmcpIHtcbiAgbGV0IGhhc2ggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICBoYXNoIHw9IDA7XG4gIH1cbiAgcmV0dXJuIGhhc2ggKyBcIlwiO1xufVxuZnVuY3Rpb24gZ2V0SGFzaEZvck9iamVjdChvYmopIHtcbiAgcmV0dXJuIGdldEhhc2hGb3JTdHJpbmcoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG59XG5mdW5jdGlvbiBnZXRIYXNoRm9yQnVmZmVyKGJ1ZmZlcikge1xuICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gIGxldCBoYXNoID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aWV3LmJ5dGVMZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyB2aWV3LmdldFVpbnQ4KGkpO1xuICAgIGhhc2ggfD0gMDtcbiAgfVxuICByZXR1cm4gaGFzaCArIFwiXCI7XG59XG5mdW5jdGlvbiBsbnMoc3RyKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHN0ci5zcGxpdChcIlwiKTtcbiAgcmVzdWx0LnB1c2goLi4ucmVzdWx0LnNwbGljZSgwLCBNYXRoLnJvdW5kKHJlc3VsdC5sZW5ndGggLyA1KSkpO1xuICByZXN1bHQucHVzaCguLi5yZXN1bHQuc3BsaWNlKDAsIE1hdGgucm91bmQocmVzdWx0Lmxlbmd0aCAvIDQpKSk7XG4gIHJlc3VsdC5wdXNoKC4uLnJlc3VsdC5zcGxpY2UoMCwgTWF0aC5yb3VuZChyZXN1bHQubGVuZ3RoIC8gMykpKTtcbiAgcmVzdWx0LnB1c2goLi4ucmVzdWx0LnNwbGljZSgwLCBNYXRoLnJvdW5kKHJlc3VsdC5sZW5ndGggLyAyKSkpO1xuICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKS5tYXAoKG4pID0+ICtuID8gK24gPCA1ID8gNSArICtuIDogK24gPiA1ID8gK24gLSA1IDogbiA6IG4pLmpvaW4oXCJcIik7XG59XG5leHBvcnQge1xuICBnZXRIYXNoRm9yQnVmZmVyLFxuICBnZXRIYXNoRm9yT2JqZWN0LFxuICBnZXRIYXNoRm9yU3RyaW5nLFxuICBsbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXNoLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/id.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/id.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mockUniqueId: () => (/* binding */ mockUniqueId),\n/* harmony export */   restoreUniqueId: () => (/* binding */ restoreUniqueId),\n/* harmony export */   uniqueId: () => (/* binding */ uniqueId)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/ai/nanoid/blob/main/LICENSE\n * Modified code originally from <https://github.com/ai/nanoid>\n * Copyright 2017 Andrey Sitnik <andrey@sitnik.ru>\n *\n * `nanoid` is currently only distributed as an ES module. Some tools (jest, playwright) don't\n * properly support ESM-only code yet, and tldraw itself is distributed as both an ES module and a\n * CommonJS module. By including nanoid here, we can make sure it works well in every environment\n * where tldraw is used. We can also remove some unused features like custom alphabets.\n */\nconst crypto = globalThis.crypto;\nconst urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nconst POOL_SIZE_MULTIPLIER = 128;\nlet pool, poolOffset;\nfunction fillPool(bytes) {\n  if (!pool || pool.length < bytes) {\n    pool = new Uint8Array(bytes * POOL_SIZE_MULTIPLIER);\n    crypto.getRandomValues(pool);\n    poolOffset = 0;\n  } else if (poolOffset + bytes > pool.length) {\n    crypto.getRandomValues(pool);\n    poolOffset = 0;\n  }\n  poolOffset += bytes;\n}\nfunction nanoid(size = 21) {\n  fillPool(size -= 0);\n  let id = \"\";\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += urlAlphabet[pool[i] & 63];\n  }\n  return id;\n}\nlet impl = nanoid;\nfunction mockUniqueId(fn) {\n  impl = fn;\n}\nfunction restoreUniqueId() {\n  impl = nanoid;\n}\nfunction uniqueId(size) {\n  return impl(size);\n}\n\n//# sourceMappingURL=id.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaWQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaWQubWpzP2FlNDQiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2FpL25hbm9pZC9ibG9iL21haW4vTElDRU5TRVxuICogTW9kaWZpZWQgY29kZSBvcmlnaW5hbGx5IGZyb20gPGh0dHBzOi8vZ2l0aHViLmNvbS9haS9uYW5vaWQ+XG4gKiBDb3B5cmlnaHQgMjAxNyBBbmRyZXkgU2l0bmlrIDxhbmRyZXlAc2l0bmlrLnJ1PlxuICpcbiAqIGBuYW5vaWRgIGlzIGN1cnJlbnRseSBvbmx5IGRpc3RyaWJ1dGVkIGFzIGFuIEVTIG1vZHVsZS4gU29tZSB0b29scyAoamVzdCwgcGxheXdyaWdodCkgZG9uJ3RcbiAqIHByb3Blcmx5IHN1cHBvcnQgRVNNLW9ubHkgY29kZSB5ZXQsIGFuZCB0bGRyYXcgaXRzZWxmIGlzIGRpc3RyaWJ1dGVkIGFzIGJvdGggYW4gRVMgbW9kdWxlIGFuZCBhXG4gKiBDb21tb25KUyBtb2R1bGUuIEJ5IGluY2x1ZGluZyBuYW5vaWQgaGVyZSwgd2UgY2FuIG1ha2Ugc3VyZSBpdCB3b3JrcyB3ZWxsIGluIGV2ZXJ5IGVudmlyb25tZW50XG4gKiB3aGVyZSB0bGRyYXcgaXMgdXNlZC4gV2UgY2FuIGFsc28gcmVtb3ZlIHNvbWUgdW51c2VkIGZlYXR1cmVzIGxpa2UgY3VzdG9tIGFscGhhYmV0cy5cbiAqL1xuY29uc3QgY3J5cHRvID0gZ2xvYmFsVGhpcy5jcnlwdG87XG5jb25zdCB1cmxBbHBoYWJldCA9IFwidXNlYW5kb20tMjZUMTk4MzQwUFg3NXB4SkFDS1ZFUllNSU5EQlVTSFdPTEZfR1FaYmZnaGprbHF2d3l6cmljdFwiO1xuY29uc3QgUE9PTF9TSVpFX01VTFRJUExJRVIgPSAxMjg7XG5sZXQgcG9vbCwgcG9vbE9mZnNldDtcbmZ1bmN0aW9uIGZpbGxQb29sKGJ5dGVzKSB7XG4gIGlmICghcG9vbCB8fCBwb29sLmxlbmd0aCA8IGJ5dGVzKSB7XG4gICAgcG9vbCA9IG5ldyBVaW50OEFycmF5KGJ5dGVzICogUE9PTF9TSVpFX01VTFRJUExJRVIpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocG9vbCk7XG4gICAgcG9vbE9mZnNldCA9IDA7XG4gIH0gZWxzZSBpZiAocG9vbE9mZnNldCArIGJ5dGVzID4gcG9vbC5sZW5ndGgpIHtcbiAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHBvb2wpO1xuICAgIHBvb2xPZmZzZXQgPSAwO1xuICB9XG4gIHBvb2xPZmZzZXQgKz0gYnl0ZXM7XG59XG5mdW5jdGlvbiBuYW5vaWQoc2l6ZSA9IDIxKSB7XG4gIGZpbGxQb29sKHNpemUgLT0gMCk7XG4gIGxldCBpZCA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSBwb29sT2Zmc2V0IC0gc2l6ZTsgaSA8IHBvb2xPZmZzZXQ7IGkrKykge1xuICAgIGlkICs9IHVybEFscGhhYmV0W3Bvb2xbaV0gJiA2M107XG4gIH1cbiAgcmV0dXJuIGlkO1xufVxubGV0IGltcGwgPSBuYW5vaWQ7XG5mdW5jdGlvbiBtb2NrVW5pcXVlSWQoZm4pIHtcbiAgaW1wbCA9IGZuO1xufVxuZnVuY3Rpb24gcmVzdG9yZVVuaXF1ZUlkKCkge1xuICBpbXBsID0gbmFub2lkO1xufVxuZnVuY3Rpb24gdW5pcXVlSWQoc2l6ZSkge1xuICByZXR1cm4gaW1wbChzaXplKTtcbn1cbmV4cG9ydCB7XG4gIG1vY2tVbmlxdWVJZCxcbiAgcmVzdG9yZVVuaXF1ZUlkLFxuICB1bmlxdWVJZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/id.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFirstFromIterable: () => (/* binding */ getFirstFromIterable)\n/* harmony export */ });\nfunction getFirstFromIterable(set) {\n  return set.values().next().value;\n}\n\n//# sourceMappingURL=iterable.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaXRlcmFibGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaXRlcmFibGUubWpzPzJlYmMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0Rmlyc3RGcm9tSXRlcmFibGUoc2V0KSB7XG4gIHJldHVybiBzZXQudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xufVxuZXhwb3J0IHtcbiAgZ2V0Rmlyc3RGcm9tSXRlcmFibGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYWJsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isApngAnimated: () => (/* binding */ isApngAnimated)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license\n * Copyright (c) Philip van Heemstra\n */\nfunction isApngAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  if (!view || !(typeof Buffer !== \"undefined\" && Buffer.isBuffer(view) || view instanceof Uint8Array) || view.length < 16) {\n    return false;\n  }\n  const isPNG = view[0] === 137 && view[1] === 80 && view[2] === 78 && view[3] === 71 && view[4] === 13 && view[5] === 10 && view[6] === 26 && view[7] === 10;\n  if (!isPNG) {\n    return false;\n  }\n  function indexOfSubstring(haystack, needle, fromIndex, upToIndex, chunksize = 1024) {\n    if (!needle) {\n      return -1;\n    }\n    needle = new RegExp(needle, \"g\");\n    const needle_length = needle.source.length;\n    const decoder = new TextDecoder();\n    const full_haystack_length = haystack.length;\n    if (typeof upToIndex === \"undefined\") {\n      upToIndex = full_haystack_length;\n    }\n    if (fromIndex >= full_haystack_length || upToIndex <= 0 || fromIndex >= upToIndex) {\n      return -1;\n    }\n    haystack = haystack.subarray(fromIndex, upToIndex);\n    let position = -1;\n    let current_index = 0;\n    let full_length = 0;\n    let needle_buffer = \"\";\n    outer: while (current_index < haystack.length) {\n      const next_index = current_index + chunksize;\n      const chunk = haystack.subarray(current_index, next_index);\n      const decoded = decoder.decode(chunk, { stream: true });\n      const text = needle_buffer + decoded;\n      let match;\n      let last_index = -1;\n      while ((match = needle.exec(text)) !== null) {\n        last_index = match.index - needle_buffer.length;\n        position = full_length + last_index;\n        break outer;\n      }\n      current_index = next_index;\n      full_length += decoded.length;\n      const needle_index = last_index > -1 ? last_index + needle_length : decoded.length - needle_length;\n      needle_buffer = decoded.slice(needle_index);\n    }\n    if (position >= 0) {\n      position += fromIndex >= 0 ? fromIndex : full_haystack_length + fromIndex;\n    }\n    return position;\n  }\n  const idatIdx = indexOfSubstring(view, \"IDAT\", 12);\n  if (idatIdx >= 12) {\n    const actlIdx = indexOfSubstring(view, \"acTL\", 8, idatIdx);\n    return actlIdx >= 8;\n  }\n  return false;\n}\n\n//# sourceMappingURL=apng.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvYXBuZy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9hcG5nLm1qcz85OTE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogTUlUIExpY2Vuc2U6IGh0dHBzOi8vZ2l0aHViLmNvbS92SGVlbXN0cmEvaXMtYXBuZy9ibG9iL21haW4vbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSBQaGlsaXAgdmFuIEhlZW1zdHJhXG4gKi9cbmZ1bmN0aW9uIGlzQXBuZ0FuaW1hdGVkKGJ1ZmZlcikge1xuICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgaWYgKCF2aWV3IHx8ICEodHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBCdWZmZXIuaXNCdWZmZXIodmlldykgfHwgdmlldyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHx8IHZpZXcubGVuZ3RoIDwgMTYpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgaXNQTkcgPSB2aWV3WzBdID09PSAxMzcgJiYgdmlld1sxXSA9PT0gODAgJiYgdmlld1syXSA9PT0gNzggJiYgdmlld1szXSA9PT0gNzEgJiYgdmlld1s0XSA9PT0gMTMgJiYgdmlld1s1XSA9PT0gMTAgJiYgdmlld1s2XSA9PT0gMjYgJiYgdmlld1s3XSA9PT0gMTA7XG4gIGlmICghaXNQTkcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZnVuY3Rpb24gaW5kZXhPZlN1YnN0cmluZyhoYXlzdGFjaywgbmVlZGxlLCBmcm9tSW5kZXgsIHVwVG9JbmRleCwgY2h1bmtzaXplID0gMTAyNCkge1xuICAgIGlmICghbmVlZGxlKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIG5lZWRsZSA9IG5ldyBSZWdFeHAobmVlZGxlLCBcImdcIik7XG4gICAgY29uc3QgbmVlZGxlX2xlbmd0aCA9IG5lZWRsZS5zb3VyY2UubGVuZ3RoO1xuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICBjb25zdCBmdWxsX2hheXN0YWNrX2xlbmd0aCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgICBpZiAodHlwZW9mIHVwVG9JbmRleCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdXBUb0luZGV4ID0gZnVsbF9oYXlzdGFja19sZW5ndGg7XG4gICAgfVxuICAgIGlmIChmcm9tSW5kZXggPj0gZnVsbF9oYXlzdGFja19sZW5ndGggfHwgdXBUb0luZGV4IDw9IDAgfHwgZnJvbUluZGV4ID49IHVwVG9JbmRleCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBoYXlzdGFjayA9IGhheXN0YWNrLnN1YmFycmF5KGZyb21JbmRleCwgdXBUb0luZGV4KTtcbiAgICBsZXQgcG9zaXRpb24gPSAtMTtcbiAgICBsZXQgY3VycmVudF9pbmRleCA9IDA7XG4gICAgbGV0IGZ1bGxfbGVuZ3RoID0gMDtcbiAgICBsZXQgbmVlZGxlX2J1ZmZlciA9IFwiXCI7XG4gICAgb3V0ZXI6IHdoaWxlIChjdXJyZW50X2luZGV4IDwgaGF5c3RhY2subGVuZ3RoKSB7XG4gICAgICBjb25zdCBuZXh0X2luZGV4ID0gY3VycmVudF9pbmRleCArIGNodW5rc2l6ZTtcbiAgICAgIGNvbnN0IGNodW5rID0gaGF5c3RhY2suc3ViYXJyYXkoY3VycmVudF9pbmRleCwgbmV4dF9pbmRleCk7XG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2Rlci5kZWNvZGUoY2h1bmssIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgY29uc3QgdGV4dCA9IG5lZWRsZV9idWZmZXIgKyBkZWNvZGVkO1xuICAgICAgbGV0IG1hdGNoO1xuICAgICAgbGV0IGxhc3RfaW5kZXggPSAtMTtcbiAgICAgIHdoaWxlICgobWF0Y2ggPSBuZWVkbGUuZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcbiAgICAgICAgbGFzdF9pbmRleCA9IG1hdGNoLmluZGV4IC0gbmVlZGxlX2J1ZmZlci5sZW5ndGg7XG4gICAgICAgIHBvc2l0aW9uID0gZnVsbF9sZW5ndGggKyBsYXN0X2luZGV4O1xuICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRfaW5kZXggPSBuZXh0X2luZGV4O1xuICAgICAgZnVsbF9sZW5ndGggKz0gZGVjb2RlZC5sZW5ndGg7XG4gICAgICBjb25zdCBuZWVkbGVfaW5kZXggPSBsYXN0X2luZGV4ID4gLTEgPyBsYXN0X2luZGV4ICsgbmVlZGxlX2xlbmd0aCA6IGRlY29kZWQubGVuZ3RoIC0gbmVlZGxlX2xlbmd0aDtcbiAgICAgIG5lZWRsZV9idWZmZXIgPSBkZWNvZGVkLnNsaWNlKG5lZWRsZV9pbmRleCk7XG4gICAgfVxuICAgIGlmIChwb3NpdGlvbiA+PSAwKSB7XG4gICAgICBwb3NpdGlvbiArPSBmcm9tSW5kZXggPj0gMCA/IGZyb21JbmRleCA6IGZ1bGxfaGF5c3RhY2tfbGVuZ3RoICsgZnJvbUluZGV4O1xuICAgIH1cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cbiAgY29uc3QgaWRhdElkeCA9IGluZGV4T2ZTdWJzdHJpbmcodmlldywgXCJJREFUXCIsIDEyKTtcbiAgaWYgKGlkYXRJZHggPj0gMTIpIHtcbiAgICBjb25zdCBhY3RsSWR4ID0gaW5kZXhPZlN1YnN0cmluZyh2aWV3LCBcImFjVExcIiwgOCwgaWRhdElkeCk7XG4gICAgcmV0dXJuIGFjdGxJZHggPj0gODtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1xuICBpc0FwbmdBbmltYXRlZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAvifAnimated: () => (/* binding */ isAvifAnimated)\n/* harmony export */ });\nconst isAvifAnimated = (buffer) => {\n  const view = new Uint8Array(buffer);\n  return view[3] === 44;\n};\n\n//# sourceMappingURL=avif.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvYXZpZi5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL21lZGlhL2F2aWYubWpzPzg3OTQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNBdmlmQW5pbWF0ZWQgPSAoYnVmZmVyKSA9PiB7XG4gIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICByZXR1cm4gdmlld1szXSA9PT0gNDQ7XG59O1xuZXhwb3J0IHtcbiAgaXNBdmlmQW5pbWF0ZWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdmlmLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isGIF: () => (/* binding */ isGIF),\n/* harmony export */   isGifAnimated: () => (/* binding */ isGifAnimated)\n/* harmony export */ });\n/*!\n * MIT License\n * Modified code originally from <https://github.com/qzb/is-animated>\n * Copyright (c) 2016 Jzef Sokoowski <j.k.sokolowski@gmail.com>\n */\nfunction getDataBlocksLength(buffer, offset) {\n  let length = 0;\n  while (buffer[offset + length]) {\n    length += buffer[offset + length] + 1;\n  }\n  return length + 1;\n}\nfunction isGIF(buffer) {\n  const enc = new TextDecoder(\"ascii\");\n  const header = enc.decode(buffer.slice(0, 3));\n  return header === \"GIF\";\n}\nfunction isGifAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  let hasColorTable, colorTableSize;\n  let offset = 0;\n  let imagesCount = 0;\n  if (!isGIF(buffer)) {\n    return false;\n  }\n  hasColorTable = view[10] & 128;\n  colorTableSize = view[10] & 7;\n  offset += 6;\n  offset += 7;\n  offset += hasColorTable ? 3 * Math.pow(2, colorTableSize + 1) : 0;\n  while (imagesCount < 2 && offset < view.length) {\n    switch (view[offset]) {\n      case 44:\n        imagesCount += 1;\n        hasColorTable = view[offset + 9] & 128;\n        colorTableSize = view[offset + 9] & 7;\n        offset += 10;\n        offset += hasColorTable ? 3 * Math.pow(2, colorTableSize + 1) : 0;\n        offset += getDataBlocksLength(view, offset + 1) + 1;\n        break;\n      case 33:\n        offset += 2;\n        offset += getDataBlocksLength(view, offset);\n        break;\n      case 59:\n        offset = view.length;\n        break;\n      default:\n        offset = view.length;\n        break;\n    }\n  }\n  return imagesCount > 1;\n}\n\n//# sourceMappingURL=gif.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvZ2lmLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9naWYubWpzP2M2ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBNSVQgTGljZW5zZVxuICogTW9kaWZpZWQgY29kZSBvcmlnaW5hbGx5IGZyb20gPGh0dHBzOi8vZ2l0aHViLmNvbS9xemIvaXMtYW5pbWF0ZWQ+XG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgSsOzemVmIFNva2/Fgm93c2tpIDxqLmsuc29rb2xvd3NraUBnbWFpbC5jb20+XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFCbG9ja3NMZW5ndGgoYnVmZmVyLCBvZmZzZXQpIHtcbiAgbGV0IGxlbmd0aCA9IDA7XG4gIHdoaWxlIChidWZmZXJbb2Zmc2V0ICsgbGVuZ3RoXSkge1xuICAgIGxlbmd0aCArPSBidWZmZXJbb2Zmc2V0ICsgbGVuZ3RoXSArIDE7XG4gIH1cbiAgcmV0dXJuIGxlbmd0aCArIDE7XG59XG5mdW5jdGlvbiBpc0dJRihidWZmZXIpIHtcbiAgY29uc3QgZW5jID0gbmV3IFRleHREZWNvZGVyKFwiYXNjaWlcIik7XG4gIGNvbnN0IGhlYWRlciA9IGVuYy5kZWNvZGUoYnVmZmVyLnNsaWNlKDAsIDMpKTtcbiAgcmV0dXJuIGhlYWRlciA9PT0gXCJHSUZcIjtcbn1cbmZ1bmN0aW9uIGlzR2lmQW5pbWF0ZWQoYnVmZmVyKSB7XG4gIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICBsZXQgaGFzQ29sb3JUYWJsZSwgY29sb3JUYWJsZVNpemU7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBsZXQgaW1hZ2VzQ291bnQgPSAwO1xuICBpZiAoIWlzR0lGKGJ1ZmZlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaGFzQ29sb3JUYWJsZSA9IHZpZXdbMTBdICYgMTI4O1xuICBjb2xvclRhYmxlU2l6ZSA9IHZpZXdbMTBdICYgNztcbiAgb2Zmc2V0ICs9IDY7XG4gIG9mZnNldCArPSA3O1xuICBvZmZzZXQgKz0gaGFzQ29sb3JUYWJsZSA/IDMgKiBNYXRoLnBvdygyLCBjb2xvclRhYmxlU2l6ZSArIDEpIDogMDtcbiAgd2hpbGUgKGltYWdlc0NvdW50IDwgMiAmJiBvZmZzZXQgPCB2aWV3Lmxlbmd0aCkge1xuICAgIHN3aXRjaCAodmlld1tvZmZzZXRdKSB7XG4gICAgICBjYXNlIDQ0OlxuICAgICAgICBpbWFnZXNDb3VudCArPSAxO1xuICAgICAgICBoYXNDb2xvclRhYmxlID0gdmlld1tvZmZzZXQgKyA5XSAmIDEyODtcbiAgICAgICAgY29sb3JUYWJsZVNpemUgPSB2aWV3W29mZnNldCArIDldICYgNztcbiAgICAgICAgb2Zmc2V0ICs9IDEwO1xuICAgICAgICBvZmZzZXQgKz0gaGFzQ29sb3JUYWJsZSA/IDMgKiBNYXRoLnBvdygyLCBjb2xvclRhYmxlU2l6ZSArIDEpIDogMDtcbiAgICAgICAgb2Zmc2V0ICs9IGdldERhdGFCbG9ja3NMZW5ndGgodmlldywgb2Zmc2V0ICsgMSkgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzM6XG4gICAgICAgIG9mZnNldCArPSAyO1xuICAgICAgICBvZmZzZXQgKz0gZ2V0RGF0YUJsb2Nrc0xlbmd0aCh2aWV3LCBvZmZzZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTk6XG4gICAgICAgIG9mZnNldCA9IHZpZXcubGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIG9mZnNldCA9IHZpZXcubGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGltYWdlc0NvdW50ID4gMTtcbn1cbmV4cG9ydCB7XG4gIGlzR0lGLFxuICBpc0dpZkFuaW1hdGVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2lmLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* binding */ DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* binding */ DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   MediaHelpers: () => (/* binding */ MediaHelpers)\n/* harmony export */ });\n/* harmony import */ var _control_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../control.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\");\n/* harmony import */ var _network_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../network.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/network.mjs\");\n/* harmony import */ var _apng_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apng.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs\");\n/* harmony import */ var _avif_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./avif.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs\");\n/* harmony import */ var _gif_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gif.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs\");\n/* harmony import */ var _png_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./png.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\");\n/* harmony import */ var _webp_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./webp.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs\");\n\n\n\n\n\n\n\nconst DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES = Object.freeze([\"image/svg+xml\"]);\nconst DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES = Object.freeze([\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\"\n]);\nconst DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES = Object.freeze([\n  \"image/gif\",\n  \"image/apng\",\n  \"image/avif\"\n]);\nconst DEFAULT_SUPPORTED_IMAGE_TYPES = Object.freeze([\n  ...DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES,\n  ...DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES,\n  ...DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES\n]);\nconst DEFAULT_SUPPORT_VIDEO_TYPES = Object.freeze([\n  \"video/mp4\",\n  \"video/webm\",\n  \"video/quicktime\"\n]);\nconst DEFAULT_SUPPORTED_MEDIA_TYPE_LIST = [\n  ...DEFAULT_SUPPORTED_IMAGE_TYPES,\n  ...DEFAULT_SUPPORT_VIDEO_TYPES\n].join(\",\");\nclass MediaHelpers {\n  /**\n   * Load a video from a url.\n   * @public\n   */\n  static loadVideo(src) {\n    return new Promise((resolve, reject) => {\n      const video = document.createElement(\"video\");\n      video.onloadeddata = () => resolve(video);\n      video.onerror = (e) => {\n        console.error(e);\n        reject(new Error(\"Could not load video\"));\n      };\n      video.crossOrigin = \"anonymous\";\n      video.src = src;\n    });\n  }\n  static async getVideoFrameAsDataUrl(video, time = 0) {\n    const promise = (0,_control_mjs__WEBPACK_IMPORTED_MODULE_0__.promiseWithResolve)();\n    let didSetTime = false;\n    const onReadyStateChanged = () => {\n      if (!didSetTime) {\n        if (video.readyState >= video.HAVE_METADATA) {\n          didSetTime = true;\n          video.currentTime = time;\n        } else {\n          return;\n        }\n      }\n      if (video.readyState >= video.HAVE_CURRENT_DATA) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n          throw new Error(\"Could not get 2d context\");\n        }\n        ctx.drawImage(video, 0, 0);\n        promise.resolve(canvas.toDataURL());\n      }\n    };\n    const onError = (e) => {\n      console.error(e);\n      promise.reject(new Error(\"Could not get video frame\"));\n    };\n    video.addEventListener(\"loadedmetadata\", onReadyStateChanged);\n    video.addEventListener(\"loadeddata\", onReadyStateChanged);\n    video.addEventListener(\"canplay\", onReadyStateChanged);\n    video.addEventListener(\"seeked\", onReadyStateChanged);\n    video.addEventListener(\"error\", onError);\n    video.addEventListener(\"stalled\", onError);\n    onReadyStateChanged();\n    try {\n      return await promise;\n    } finally {\n      video.removeEventListener(\"loadedmetadata\", onReadyStateChanged);\n      video.removeEventListener(\"loadeddata\", onReadyStateChanged);\n      video.removeEventListener(\"canplay\", onReadyStateChanged);\n      video.removeEventListener(\"seeked\", onReadyStateChanged);\n      video.removeEventListener(\"error\", onError);\n      video.removeEventListener(\"stalled\", onError);\n    }\n  }\n  /**\n   * Load an image from a url.\n   * @public\n   */\n  static loadImage(src) {\n    return new Promise((resolve, reject) => {\n      const img = (0,_network_mjs__WEBPACK_IMPORTED_MODULE_1__.Image)();\n      img.onload = () => resolve(img);\n      img.onerror = (e) => {\n        console.error(e);\n        reject(new Error(\"Could not load image\"));\n      };\n      img.crossOrigin = \"anonymous\";\n      img.referrerPolicy = \"strict-origin-when-cross-origin\";\n      img.src = src;\n    });\n  }\n  /**\n   * Get the size of a video blob\n   *\n   * @param blob - A SharedBlob containing the video\n   * @public\n   */\n  static async getVideoSize(blob) {\n    return MediaHelpers.usingObjectURL(blob, async (url) => {\n      const video = await MediaHelpers.loadVideo(url);\n      return { w: video.videoWidth, h: video.videoHeight };\n    });\n  }\n  /**\n   * Get the size of an image blob\n   *\n   * @param blob - A Blob containing the image.\n   * @public\n   */\n  static async getImageSize(blob) {\n    const image = await MediaHelpers.usingObjectURL(blob, MediaHelpers.loadImage);\n    try {\n      if (blob.type === \"image/png\") {\n        const view = new DataView(await blob.arrayBuffer());\n        if (_png_mjs__WEBPACK_IMPORTED_MODULE_5__.PngHelpers.isPng(view, 0)) {\n          const physChunk = _png_mjs__WEBPACK_IMPORTED_MODULE_5__.PngHelpers.findChunk(view, \"pHYs\");\n          if (physChunk) {\n            const physData = _png_mjs__WEBPACK_IMPORTED_MODULE_5__.PngHelpers.parsePhys(view, physChunk.dataOffset);\n            if (physData.unit === 0 && physData.ppux === physData.ppuy) {\n              const pixelRatio = Math.max(physData.ppux / 2834.5, 1);\n              return {\n                w: Math.round(image.naturalWidth / pixelRatio),\n                h: Math.round(image.naturalHeight / pixelRatio)\n              };\n            }\n          }\n        }\n      }\n    } catch (err) {\n      console.error(err);\n      return { w: image.naturalWidth, h: image.naturalHeight };\n    }\n    return { w: image.naturalWidth, h: image.naturalHeight };\n  }\n  static async isAnimated(file) {\n    if (file.type === \"image/gif\") {\n      return (0,_gif_mjs__WEBPACK_IMPORTED_MODULE_4__.isGifAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/avif\") {\n      return (0,_avif_mjs__WEBPACK_IMPORTED_MODULE_3__.isAvifAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/webp\") {\n      return (0,_webp_mjs__WEBPACK_IMPORTED_MODULE_6__.isWebpAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/apng\") {\n      return (0,_apng_mjs__WEBPACK_IMPORTED_MODULE_2__.isApngAnimated)(await file.arrayBuffer());\n    }\n    return false;\n  }\n  static isAnimatedImageType(mimeType) {\n    return DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES.includes(mimeType || \"\");\n  }\n  static isStaticImageType(mimeType) {\n    return DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES.includes(mimeType || \"\");\n  }\n  static isVectorImageType(mimeType) {\n    return DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES.includes(mimeType || \"\");\n  }\n  static isImageType(mimeType) {\n    return DEFAULT_SUPPORTED_IMAGE_TYPES.includes(mimeType);\n  }\n  static async usingObjectURL(blob, fn) {\n    const url = URL.createObjectURL(blob);\n    try {\n      return await fn(url);\n    } finally {\n      URL.revokeObjectURL(url);\n    }\n  }\n}\n\n//# sourceMappingURL=media.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvbWVkaWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ2I7QUFDSztBQUNBO0FBQ0Y7QUFDSDtBQUNLO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0RBQVU7QUFDdEIsNEJBQTRCLGdEQUFVO0FBQ3RDO0FBQ0EsNkJBQTZCLGdEQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQWE7QUFDMUI7QUFDQTtBQUNBLGFBQWEseURBQWM7QUFDM0I7QUFDQTtBQUNBLGFBQWEseURBQWM7QUFDM0I7QUFDQTtBQUNBLGFBQWEseURBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFTRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvbWVkaWEubWpzP2ExODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvbWlzZVdpdGhSZXNvbHZlIH0gZnJvbSBcIi4uL2NvbnRyb2wubWpzXCI7XG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gXCIuLi9uZXR3b3JrLm1qc1wiO1xuaW1wb3J0IHsgaXNBcG5nQW5pbWF0ZWQgfSBmcm9tIFwiLi9hcG5nLm1qc1wiO1xuaW1wb3J0IHsgaXNBdmlmQW5pbWF0ZWQgfSBmcm9tIFwiLi9hdmlmLm1qc1wiO1xuaW1wb3J0IHsgaXNHaWZBbmltYXRlZCB9IGZyb20gXCIuL2dpZi5tanNcIjtcbmltcG9ydCB7IFBuZ0hlbHBlcnMgfSBmcm9tIFwiLi9wbmcubWpzXCI7XG5pbXBvcnQgeyBpc1dlYnBBbmltYXRlZCB9IGZyb20gXCIuL3dlYnAubWpzXCI7XG5jb25zdCBERUZBVUxUX1NVUFBPUlRFRF9WRUNUT1JfSU1BR0VfVFlQRVMgPSBPYmplY3QuZnJlZXplKFtcImltYWdlL3N2Zyt4bWxcIl0pO1xuY29uc3QgREVGQVVMVF9TVVBQT1JURURfU1RBVElDX0lNQUdFX1RZUEVTID0gT2JqZWN0LmZyZWV6ZShbXG4gIFwiaW1hZ2UvanBlZ1wiLFxuICBcImltYWdlL3BuZ1wiLFxuICBcImltYWdlL3dlYnBcIlxuXSk7XG5jb25zdCBERUZBVUxUX1NVUFBPUlRFRF9BTklNQVRFRF9JTUFHRV9UWVBFUyA9IE9iamVjdC5mcmVlemUoW1xuICBcImltYWdlL2dpZlwiLFxuICBcImltYWdlL2FwbmdcIixcbiAgXCJpbWFnZS9hdmlmXCJcbl0pO1xuY29uc3QgREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMgPSBPYmplY3QuZnJlZXplKFtcbiAgLi4uREVGQVVMVF9TVVBQT1JURURfU1RBVElDX0lNQUdFX1RZUEVTLFxuICAuLi5ERUZBVUxUX1NVUFBPUlRFRF9WRUNUT1JfSU1BR0VfVFlQRVMsXG4gIC4uLkRFRkFVTFRfU1VQUE9SVEVEX0FOSU1BVEVEX0lNQUdFX1RZUEVTXG5dKTtcbmNvbnN0IERFRkFVTFRfU1VQUE9SVF9WSURFT19UWVBFUyA9IE9iamVjdC5mcmVlemUoW1xuICBcInZpZGVvL21wNFwiLFxuICBcInZpZGVvL3dlYm1cIixcbiAgXCJ2aWRlby9xdWlja3RpbWVcIlxuXSk7XG5jb25zdCBERUZBVUxUX1NVUFBPUlRFRF9NRURJQV9UWVBFX0xJU1QgPSBbXG4gIC4uLkRFRkFVTFRfU1VQUE9SVEVEX0lNQUdFX1RZUEVTLFxuICAuLi5ERUZBVUxUX1NVUFBPUlRfVklERU9fVFlQRVNcbl0uam9pbihcIixcIik7XG5jbGFzcyBNZWRpYUhlbHBlcnMge1xuICAvKipcbiAgICogTG9hZCBhIHZpZGVvIGZyb20gYSB1cmwuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBsb2FkVmlkZW8oc3JjKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuICAgICAgdmlkZW8ub25sb2FkZWRkYXRhID0gKCkgPT4gcmVzb2x2ZSh2aWRlbyk7XG4gICAgICB2aWRlby5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIHZpZGVvXCIpKTtcbiAgICAgIH07XG4gICAgICB2aWRlby5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XG4gICAgICB2aWRlby5zcmMgPSBzcmM7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIGFzeW5jIGdldFZpZGVvRnJhbWVBc0RhdGFVcmwodmlkZW8sIHRpbWUgPSAwKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHByb21pc2VXaXRoUmVzb2x2ZSgpO1xuICAgIGxldCBkaWRTZXRUaW1lID0gZmFsc2U7XG4gICAgY29uc3Qgb25SZWFkeVN0YXRlQ2hhbmdlZCA9ICgpID0+IHtcbiAgICAgIGlmICghZGlkU2V0VGltZSkge1xuICAgICAgICBpZiAodmlkZW8ucmVhZHlTdGF0ZSA+PSB2aWRlby5IQVZFX01FVEFEQVRBKSB7XG4gICAgICAgICAgZGlkU2V0VGltZSA9IHRydWU7XG4gICAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSB0aW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHZpZGVvLnJlYWR5U3RhdGUgPj0gdmlkZW8uSEFWRV9DVVJSRU5UX0RBVEEpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gdmlkZW8udmlkZW9XaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBnZXQgMmQgY29udGV4dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjdHguZHJhd0ltYWdlKHZpZGVvLCAwLCAwKTtcbiAgICAgICAgcHJvbWlzZS5yZXNvbHZlKGNhbnZhcy50b0RhdGFVUkwoKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvbkVycm9yID0gKGUpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICBwcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJDb3VsZCBub3QgZ2V0IHZpZGVvIGZyYW1lXCIpKTtcbiAgICB9O1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCBvblJlYWR5U3RhdGVDaGFuZ2VkKTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLCBvblJlYWR5U3RhdGVDaGFuZ2VkKTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwiY2FucGxheVwiLCBvblJlYWR5U3RhdGVDaGFuZ2VkKTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwic2Vla2VkXCIsIG9uUmVhZHlTdGF0ZUNoYW5nZWQpO1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwic3RhbGxlZFwiLCBvbkVycm9yKTtcbiAgICBvblJlYWR5U3RhdGVDaGFuZ2VkKCk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBwcm9taXNlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB2aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIiwgb25SZWFkeVN0YXRlQ2hhbmdlZCk7XG4gICAgICB2aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkZGF0YVwiLCBvblJlYWR5U3RhdGVDaGFuZ2VkKTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsIG9uUmVhZHlTdGF0ZUNoYW5nZWQpO1xuICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlZWtlZFwiLCBvblJlYWR5U3RhdGVDaGFuZ2VkKTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdGFsbGVkXCIsIG9uRXJyb3IpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTG9hZCBhbiBpbWFnZSBmcm9tIGEgdXJsLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGF0aWMgbG9hZEltYWdlKHNyYykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBJbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcbiAgICAgIGltZy5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIGltYWdlXCIpKTtcbiAgICAgIH07XG4gICAgICBpbWcuY3Jvc3NPcmlnaW4gPSBcImFub255bW91c1wiO1xuICAgICAgaW1nLnJlZmVycmVyUG9saWN5ID0gXCJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luXCI7XG4gICAgICBpbWcuc3JjID0gc3JjO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgYSB2aWRlbyBibG9iXG4gICAqXG4gICAqIEBwYXJhbSBibG9iIC0gQSBTaGFyZWRCbG9iIGNvbnRhaW5pbmcgdGhlIHZpZGVvXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRWaWRlb1NpemUoYmxvYikge1xuICAgIHJldHVybiBNZWRpYUhlbHBlcnMudXNpbmdPYmplY3RVUkwoYmxvYiwgYXN5bmMgKHVybCkgPT4ge1xuICAgICAgY29uc3QgdmlkZW8gPSBhd2FpdCBNZWRpYUhlbHBlcnMubG9hZFZpZGVvKHVybCk7XG4gICAgICByZXR1cm4geyB3OiB2aWRlby52aWRlb1dpZHRoLCBoOiB2aWRlby52aWRlb0hlaWdodCB9O1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgYW4gaW1hZ2UgYmxvYlxuICAgKlxuICAgKiBAcGFyYW0gYmxvYiAtIEEgQmxvYiBjb250YWluaW5nIHRoZSBpbWFnZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldEltYWdlU2l6ZShibG9iKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBNZWRpYUhlbHBlcnMudXNpbmdPYmplY3RVUkwoYmxvYiwgTWVkaWFIZWxwZXJzLmxvYWRJbWFnZSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChibG9iLnR5cGUgPT09IFwiaW1hZ2UvcG5nXCIpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICBpZiAoUG5nSGVscGVycy5pc1BuZyh2aWV3LCAwKSkge1xuICAgICAgICAgIGNvbnN0IHBoeXNDaHVuayA9IFBuZ0hlbHBlcnMuZmluZENodW5rKHZpZXcsIFwicEhZc1wiKTtcbiAgICAgICAgICBpZiAocGh5c0NodW5rKSB7XG4gICAgICAgICAgICBjb25zdCBwaHlzRGF0YSA9IFBuZ0hlbHBlcnMucGFyc2VQaHlzKHZpZXcsIHBoeXNDaHVuay5kYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChwaHlzRGF0YS51bml0ID09PSAwICYmIHBoeXNEYXRhLnBwdXggPT09IHBoeXNEYXRhLnBwdXkpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGl4ZWxSYXRpbyA9IE1hdGgubWF4KHBoeXNEYXRhLnBwdXggLyAyODM0LjUsIDEpO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHc6IE1hdGgucm91bmQoaW1hZ2UubmF0dXJhbFdpZHRoIC8gcGl4ZWxSYXRpbyksXG4gICAgICAgICAgICAgICAgaDogTWF0aC5yb3VuZChpbWFnZS5uYXR1cmFsSGVpZ2h0IC8gcGl4ZWxSYXRpbylcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiB7IHc6IGltYWdlLm5hdHVyYWxXaWR0aCwgaDogaW1hZ2UubmF0dXJhbEhlaWdodCB9O1xuICAgIH1cbiAgICByZXR1cm4geyB3OiBpbWFnZS5uYXR1cmFsV2lkdGgsIGg6IGltYWdlLm5hdHVyYWxIZWlnaHQgfTtcbiAgfVxuICBzdGF0aWMgYXN5bmMgaXNBbmltYXRlZChmaWxlKSB7XG4gICAgaWYgKGZpbGUudHlwZSA9PT0gXCJpbWFnZS9naWZcIikge1xuICAgICAgcmV0dXJuIGlzR2lmQW5pbWF0ZWQoYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKTtcbiAgICB9XG4gICAgaWYgKGZpbGUudHlwZSA9PT0gXCJpbWFnZS9hdmlmXCIpIHtcbiAgICAgIHJldHVybiBpc0F2aWZBbmltYXRlZChhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpO1xuICAgIH1cbiAgICBpZiAoZmlsZS50eXBlID09PSBcImltYWdlL3dlYnBcIikge1xuICAgICAgcmV0dXJuIGlzV2VicEFuaW1hdGVkKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSk7XG4gICAgfVxuICAgIGlmIChmaWxlLnR5cGUgPT09IFwiaW1hZ2UvYXBuZ1wiKSB7XG4gICAgICByZXR1cm4gaXNBcG5nQW5pbWF0ZWQoYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YXRpYyBpc0FuaW1hdGVkSW1hZ2VUeXBlKG1pbWVUeXBlKSB7XG4gICAgcmV0dXJuIERFRkFVTFRfU1VQUE9SVEVEX0FOSU1BVEVEX0lNQUdFX1RZUEVTLmluY2x1ZGVzKG1pbWVUeXBlIHx8IFwiXCIpO1xuICB9XG4gIHN0YXRpYyBpc1N0YXRpY0ltYWdlVHlwZShtaW1lVHlwZSkge1xuICAgIHJldHVybiBERUZBVUxUX1NVUFBPUlRFRF9TVEFUSUNfSU1BR0VfVFlQRVMuaW5jbHVkZXMobWltZVR5cGUgfHwgXCJcIik7XG4gIH1cbiAgc3RhdGljIGlzVmVjdG9ySW1hZ2VUeXBlKG1pbWVUeXBlKSB7XG4gICAgcmV0dXJuIERFRkFVTFRfU1VQUE9SVEVEX1ZFQ1RPUl9JTUFHRV9UWVBFUy5pbmNsdWRlcyhtaW1lVHlwZSB8fCBcIlwiKTtcbiAgfVxuICBzdGF0aWMgaXNJbWFnZVR5cGUobWltZVR5cGUpIHtcbiAgICByZXR1cm4gREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMuaW5jbHVkZXMobWltZVR5cGUpO1xuICB9XG4gIHN0YXRpYyBhc3luYyB1c2luZ09iamVjdFVSTChibG9iLCBmbikge1xuICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBmbih1cmwpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBERUZBVUxUX1NVUFBPUlRFRF9BTklNQVRFRF9JTUFHRV9UWVBFUyxcbiAgREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVEVEX01FRElBX1RZUEVfTElTVCxcbiAgREVGQVVMVF9TVVBQT1JURURfU1RBVElDX0lNQUdFX1RZUEVTLFxuICBERUZBVUxUX1NVUFBPUlRFRF9WRUNUT1JfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVF9WSURFT19UWVBFUyxcbiAgTWVkaWFIZWxwZXJzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVkaWEubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PngHelpers: () => (/* binding */ PngHelpers)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE\n * Copyright: 2014 Alex Gorbatchev\n * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts\n */\nlet TABLE = [\n  0,\n  1996959894,\n  3993919788,\n  2567524794,\n  124634137,\n  1886057615,\n  3915621685,\n  2657392035,\n  249268274,\n  2044508324,\n  3772115230,\n  2547177864,\n  162941995,\n  2125561021,\n  3887607047,\n  2428444049,\n  498536548,\n  1789927666,\n  4089016648,\n  2227061214,\n  450548861,\n  1843258603,\n  4107580753,\n  2211677639,\n  325883990,\n  1684777152,\n  4251122042,\n  2321926636,\n  335633487,\n  1661365465,\n  4195302755,\n  2366115317,\n  997073096,\n  1281953886,\n  3579855332,\n  2724688242,\n  1006888145,\n  1258607687,\n  3524101629,\n  2768942443,\n  901097722,\n  1119000684,\n  3686517206,\n  2898065728,\n  853044451,\n  1172266101,\n  3705015759,\n  2882616665,\n  651767980,\n  1373503546,\n  3369554304,\n  3218104598,\n  565507253,\n  1454621731,\n  3485111705,\n  3099436303,\n  671266974,\n  1594198024,\n  3322730930,\n  2970347812,\n  795835527,\n  1483230225,\n  3244367275,\n  3060149565,\n  1994146192,\n  31158534,\n  2563907772,\n  4023717930,\n  1907459465,\n  112637215,\n  2680153253,\n  3904427059,\n  2013776290,\n  251722036,\n  2517215374,\n  3775830040,\n  2137656763,\n  141376813,\n  2439277719,\n  3865271297,\n  1802195444,\n  476864866,\n  2238001368,\n  4066508878,\n  1812370925,\n  453092731,\n  2181625025,\n  4111451223,\n  1706088902,\n  314042704,\n  2344532202,\n  4240017532,\n  1658658271,\n  366619977,\n  2362670323,\n  4224994405,\n  1303535960,\n  984961486,\n  2747007092,\n  3569037538,\n  1256170817,\n  1037604311,\n  2765210733,\n  3554079995,\n  1131014506,\n  879679996,\n  2909243462,\n  3663771856,\n  1141124467,\n  855842277,\n  2852801631,\n  3708648649,\n  1342533948,\n  654459306,\n  3188396048,\n  3373015174,\n  1466479909,\n  544179635,\n  3110523913,\n  3462522015,\n  1591671054,\n  702138776,\n  2966460450,\n  3352799412,\n  1504918807,\n  783551873,\n  3082640443,\n  3233442989,\n  3988292384,\n  2596254646,\n  62317068,\n  1957810842,\n  3939845945,\n  2647816111,\n  81470997,\n  1943803523,\n  3814918930,\n  2489596804,\n  225274430,\n  2053790376,\n  3826175755,\n  2466906013,\n  167816743,\n  2097651377,\n  4027552580,\n  2265490386,\n  503444072,\n  1762050814,\n  4150417245,\n  2154129355,\n  426522225,\n  1852507879,\n  4275313526,\n  2312317920,\n  282753626,\n  1742555852,\n  4189708143,\n  2394877945,\n  397917763,\n  1622183637,\n  3604390888,\n  2714866558,\n  953729732,\n  1340076626,\n  3518719985,\n  2797360999,\n  1068828381,\n  1219638859,\n  3624741850,\n  2936675148,\n  906185462,\n  1090812512,\n  3747672003,\n  2825379669,\n  829329135,\n  1181335161,\n  3412177804,\n  3160834842,\n  628085408,\n  1382605366,\n  3423369109,\n  3138078467,\n  570562233,\n  1426400815,\n  3317316542,\n  2998733608,\n  733239954,\n  1555261956,\n  3268935591,\n  3050360625,\n  752459403,\n  1541320221,\n  2607071920,\n  3965973030,\n  1969922972,\n  40735498,\n  2617837225,\n  3943577151,\n  1913087877,\n  83908371,\n  2512341634,\n  3803740692,\n  2075208622,\n  213261112,\n  2463272603,\n  3855990285,\n  2094854071,\n  198958881,\n  2262029012,\n  4057260610,\n  1759359992,\n  534414190,\n  2176718541,\n  4139329115,\n  1873836001,\n  414664567,\n  2282248934,\n  4279200368,\n  1711684554,\n  285281116,\n  2405801727,\n  4167216745,\n  1634467795,\n  376229701,\n  2685067896,\n  3608007406,\n  1308918612,\n  956543938,\n  2808555105,\n  3495958263,\n  1231636301,\n  1047427035,\n  2932959818,\n  3654703836,\n  1088359270,\n  936918e3,\n  2847714899,\n  3736837829,\n  1202900863,\n  817233897,\n  3183342108,\n  3401237130,\n  1404277552,\n  615818150,\n  3134207493,\n  3453421203,\n  1423857449,\n  601450431,\n  3009837614,\n  3294710456,\n  1567103746,\n  711928724,\n  3020668471,\n  3272380065,\n  1510334235,\n  755167117\n];\nif (typeof Int32Array !== \"undefined\") {\n  TABLE = new Int32Array(TABLE);\n}\nconst crc = (current, previous) => {\n  let crc2 = previous === 0 ? 0 : ~~previous ^ -1;\n  for (let index = 0; index < current.length; index++) {\n    crc2 = TABLE[(crc2 ^ current[index]) & 255] ^ crc2 >>> 8;\n  }\n  return crc2 ^ -1;\n};\nconst LEN_SIZE = 4;\nconst CRC_SIZE = 4;\nclass PngHelpers {\n  static isPng(view, offset) {\n    if (view.getUint8(offset + 0) === 137 && view.getUint8(offset + 1) === 80 && view.getUint8(offset + 2) === 78 && view.getUint8(offset + 3) === 71 && view.getUint8(offset + 4) === 13 && view.getUint8(offset + 5) === 10 && view.getUint8(offset + 6) === 26 && view.getUint8(offset + 7) === 10) {\n      return true;\n    }\n    return false;\n  }\n  static getChunkType(view, offset) {\n    return [\n      String.fromCharCode(view.getUint8(offset)),\n      String.fromCharCode(view.getUint8(offset + 1)),\n      String.fromCharCode(view.getUint8(offset + 2)),\n      String.fromCharCode(view.getUint8(offset + 3))\n    ].join(\"\");\n  }\n  static readChunks(view, offset = 0) {\n    const chunks = {};\n    if (!PngHelpers.isPng(view, offset)) {\n      throw new Error(\"Not a PNG\");\n    }\n    offset += 8;\n    while (offset <= view.buffer.byteLength) {\n      const start = offset;\n      const len = view.getInt32(offset);\n      offset += 4;\n      const chunkType = PngHelpers.getChunkType(view, offset);\n      if (chunkType === \"IDAT\" && chunks[chunkType]) {\n        offset += len + LEN_SIZE + CRC_SIZE;\n        continue;\n      }\n      if (chunkType === \"IEND\") {\n        break;\n      }\n      chunks[chunkType] = {\n        start,\n        dataOffset: offset + 4,\n        size: len\n      };\n      offset += len + LEN_SIZE + CRC_SIZE;\n    }\n    return chunks;\n  }\n  static parsePhys(view, offset) {\n    return {\n      ppux: view.getUint32(offset),\n      ppuy: view.getUint32(offset + 4),\n      unit: view.getUint8(offset + 4)\n    };\n  }\n  static findChunk(view, type) {\n    const chunks = PngHelpers.readChunks(view);\n    return chunks[type];\n  }\n  static setPhysChunk(view, dpr = 1, options) {\n    let offset = 46;\n    let size = 0;\n    const res1 = PngHelpers.findChunk(view, \"pHYs\");\n    if (res1) {\n      offset = res1.start;\n      size = res1.size;\n    }\n    const res2 = PngHelpers.findChunk(view, \"IDAT\");\n    if (res2) {\n      offset = res2.start;\n      size = 0;\n    }\n    const pHYsData = new ArrayBuffer(21);\n    const pHYsDataView = new DataView(pHYsData);\n    pHYsDataView.setUint32(0, 9);\n    pHYsDataView.setUint8(4, \"p\".charCodeAt(0));\n    pHYsDataView.setUint8(5, \"H\".charCodeAt(0));\n    pHYsDataView.setUint8(6, \"Y\".charCodeAt(0));\n    pHYsDataView.setUint8(7, \"s\".charCodeAt(0));\n    const DPI_96 = 2835.5;\n    pHYsDataView.setInt32(8, DPI_96 * dpr);\n    pHYsDataView.setInt32(12, DPI_96 * dpr);\n    pHYsDataView.setInt8(16, 1);\n    const crcBit = new Uint8Array(pHYsData.slice(4, 17));\n    pHYsDataView.setInt32(17, crc(crcBit));\n    const startBuf = view.buffer.slice(0, offset);\n    const endBuf = view.buffer.slice(offset + size);\n    return new Blob([startBuf, pHYsData, endBuf], options);\n  }\n}\n\n//# sourceMappingURL=png.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvcG5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0JBQXdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9wbmcubWpzPzU3NzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2FsZXhnb3JiYXRjaGV2L2NyYy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBDb3B5cmlnaHQ6IDIwMTQgQWxleCBHb3JiYXRjaGV2XG4gKiBDb2RlOiBjcmMzMiwgaHR0cHM6Ly9naXRodWIuY29tL2FsZXhnb3JiYXRjaGV2L2NyYy9ibG9iL21hc3Rlci9zcmMvY2FsY3VsYXRvcnMvY3JjMzIudHNcbiAqL1xubGV0IFRBQkxFID0gW1xuICAwLFxuICAxOTk2OTU5ODk0LFxuICAzOTkzOTE5Nzg4LFxuICAyNTY3NTI0Nzk0LFxuICAxMjQ2MzQxMzcsXG4gIDE4ODYwNTc2MTUsXG4gIDM5MTU2MjE2ODUsXG4gIDI2NTczOTIwMzUsXG4gIDI0OTI2ODI3NCxcbiAgMjA0NDUwODMyNCxcbiAgMzc3MjExNTIzMCxcbiAgMjU0NzE3Nzg2NCxcbiAgMTYyOTQxOTk1LFxuICAyMTI1NTYxMDIxLFxuICAzODg3NjA3MDQ3LFxuICAyNDI4NDQ0MDQ5LFxuICA0OTg1MzY1NDgsXG4gIDE3ODk5Mjc2NjYsXG4gIDQwODkwMTY2NDgsXG4gIDIyMjcwNjEyMTQsXG4gIDQ1MDU0ODg2MSxcbiAgMTg0MzI1ODYwMyxcbiAgNDEwNzU4MDc1MyxcbiAgMjIxMTY3NzYzOSxcbiAgMzI1ODgzOTkwLFxuICAxNjg0Nzc3MTUyLFxuICA0MjUxMTIyMDQyLFxuICAyMzIxOTI2NjM2LFxuICAzMzU2MzM0ODcsXG4gIDE2NjEzNjU0NjUsXG4gIDQxOTUzMDI3NTUsXG4gIDIzNjYxMTUzMTcsXG4gIDk5NzA3MzA5NixcbiAgMTI4MTk1Mzg4NixcbiAgMzU3OTg1NTMzMixcbiAgMjcyNDY4ODI0MixcbiAgMTAwNjg4ODE0NSxcbiAgMTI1ODYwNzY4NyxcbiAgMzUyNDEwMTYyOSxcbiAgMjc2ODk0MjQ0MyxcbiAgOTAxMDk3NzIyLFxuICAxMTE5MDAwNjg0LFxuICAzNjg2NTE3MjA2LFxuICAyODk4MDY1NzI4LFxuICA4NTMwNDQ0NTEsXG4gIDExNzIyNjYxMDEsXG4gIDM3MDUwMTU3NTksXG4gIDI4ODI2MTY2NjUsXG4gIDY1MTc2Nzk4MCxcbiAgMTM3MzUwMzU0NixcbiAgMzM2OTU1NDMwNCxcbiAgMzIxODEwNDU5OCxcbiAgNTY1NTA3MjUzLFxuICAxNDU0NjIxNzMxLFxuICAzNDg1MTExNzA1LFxuICAzMDk5NDM2MzAzLFxuICA2NzEyNjY5NzQsXG4gIDE1OTQxOTgwMjQsXG4gIDMzMjI3MzA5MzAsXG4gIDI5NzAzNDc4MTIsXG4gIDc5NTgzNTUyNyxcbiAgMTQ4MzIzMDIyNSxcbiAgMzI0NDM2NzI3NSxcbiAgMzA2MDE0OTU2NSxcbiAgMTk5NDE0NjE5MixcbiAgMzExNTg1MzQsXG4gIDI1NjM5MDc3NzIsXG4gIDQwMjM3MTc5MzAsXG4gIDE5MDc0NTk0NjUsXG4gIDExMjYzNzIxNSxcbiAgMjY4MDE1MzI1MyxcbiAgMzkwNDQyNzA1OSxcbiAgMjAxMzc3NjI5MCxcbiAgMjUxNzIyMDM2LFxuICAyNTE3MjE1Mzc0LFxuICAzNzc1ODMwMDQwLFxuICAyMTM3NjU2NzYzLFxuICAxNDEzNzY4MTMsXG4gIDI0MzkyNzc3MTksXG4gIDM4NjUyNzEyOTcsXG4gIDE4MDIxOTU0NDQsXG4gIDQ3Njg2NDg2NixcbiAgMjIzODAwMTM2OCxcbiAgNDA2NjUwODg3OCxcbiAgMTgxMjM3MDkyNSxcbiAgNDUzMDkyNzMxLFxuICAyMTgxNjI1MDI1LFxuICA0MTExNDUxMjIzLFxuICAxNzA2MDg4OTAyLFxuICAzMTQwNDI3MDQsXG4gIDIzNDQ1MzIyMDIsXG4gIDQyNDAwMTc1MzIsXG4gIDE2NTg2NTgyNzEsXG4gIDM2NjYxOTk3NyxcbiAgMjM2MjY3MDMyMyxcbiAgNDIyNDk5NDQwNSxcbiAgMTMwMzUzNTk2MCxcbiAgOTg0OTYxNDg2LFxuICAyNzQ3MDA3MDkyLFxuICAzNTY5MDM3NTM4LFxuICAxMjU2MTcwODE3LFxuICAxMDM3NjA0MzExLFxuICAyNzY1MjEwNzMzLFxuICAzNTU0MDc5OTk1LFxuICAxMTMxMDE0NTA2LFxuICA4Nzk2Nzk5OTYsXG4gIDI5MDkyNDM0NjIsXG4gIDM2NjM3NzE4NTYsXG4gIDExNDExMjQ0NjcsXG4gIDg1NTg0MjI3NyxcbiAgMjg1MjgwMTYzMSxcbiAgMzcwODY0ODY0OSxcbiAgMTM0MjUzMzk0OCxcbiAgNjU0NDU5MzA2LFxuICAzMTg4Mzk2MDQ4LFxuICAzMzczMDE1MTc0LFxuICAxNDY2NDc5OTA5LFxuICA1NDQxNzk2MzUsXG4gIDMxMTA1MjM5MTMsXG4gIDM0NjI1MjIwMTUsXG4gIDE1OTE2NzEwNTQsXG4gIDcwMjEzODc3NixcbiAgMjk2NjQ2MDQ1MCxcbiAgMzM1Mjc5OTQxMixcbiAgMTUwNDkxODgwNyxcbiAgNzgzNTUxODczLFxuICAzMDgyNjQwNDQzLFxuICAzMjMzNDQyOTg5LFxuICAzOTg4MjkyMzg0LFxuICAyNTk2MjU0NjQ2LFxuICA2MjMxNzA2OCxcbiAgMTk1NzgxMDg0MixcbiAgMzkzOTg0NTk0NSxcbiAgMjY0NzgxNjExMSxcbiAgODE0NzA5OTcsXG4gIDE5NDM4MDM1MjMsXG4gIDM4MTQ5MTg5MzAsXG4gIDI0ODk1OTY4MDQsXG4gIDIyNTI3NDQzMCxcbiAgMjA1Mzc5MDM3NixcbiAgMzgyNjE3NTc1NSxcbiAgMjQ2NjkwNjAxMyxcbiAgMTY3ODE2NzQzLFxuICAyMDk3NjUxMzc3LFxuICA0MDI3NTUyNTgwLFxuICAyMjY1NDkwMzg2LFxuICA1MDM0NDQwNzIsXG4gIDE3NjIwNTA4MTQsXG4gIDQxNTA0MTcyNDUsXG4gIDIxNTQxMjkzNTUsXG4gIDQyNjUyMjIyNSxcbiAgMTg1MjUwNzg3OSxcbiAgNDI3NTMxMzUyNixcbiAgMjMxMjMxNzkyMCxcbiAgMjgyNzUzNjI2LFxuICAxNzQyNTU1ODUyLFxuICA0MTg5NzA4MTQzLFxuICAyMzk0ODc3OTQ1LFxuICAzOTc5MTc3NjMsXG4gIDE2MjIxODM2MzcsXG4gIDM2MDQzOTA4ODgsXG4gIDI3MTQ4NjY1NTgsXG4gIDk1MzcyOTczMixcbiAgMTM0MDA3NjYyNixcbiAgMzUxODcxOTk4NSxcbiAgMjc5NzM2MDk5OSxcbiAgMTA2ODgyODM4MSxcbiAgMTIxOTYzODg1OSxcbiAgMzYyNDc0MTg1MCxcbiAgMjkzNjY3NTE0OCxcbiAgOTA2MTg1NDYyLFxuICAxMDkwODEyNTEyLFxuICAzNzQ3NjcyMDAzLFxuICAyODI1Mzc5NjY5LFxuICA4MjkzMjkxMzUsXG4gIDExODEzMzUxNjEsXG4gIDM0MTIxNzc4MDQsXG4gIDMxNjA4MzQ4NDIsXG4gIDYyODA4NTQwOCxcbiAgMTM4MjYwNTM2NixcbiAgMzQyMzM2OTEwOSxcbiAgMzEzODA3ODQ2NyxcbiAgNTcwNTYyMjMzLFxuICAxNDI2NDAwODE1LFxuICAzMzE3MzE2NTQyLFxuICAyOTk4NzMzNjA4LFxuICA3MzMyMzk5NTQsXG4gIDE1NTUyNjE5NTYsXG4gIDMyNjg5MzU1OTEsXG4gIDMwNTAzNjA2MjUsXG4gIDc1MjQ1OTQwMyxcbiAgMTU0MTMyMDIyMSxcbiAgMjYwNzA3MTkyMCxcbiAgMzk2NTk3MzAzMCxcbiAgMTk2OTkyMjk3MixcbiAgNDA3MzU0OTgsXG4gIDI2MTc4MzcyMjUsXG4gIDM5NDM1NzcxNTEsXG4gIDE5MTMwODc4NzcsXG4gIDgzOTA4MzcxLFxuICAyNTEyMzQxNjM0LFxuICAzODAzNzQwNjkyLFxuICAyMDc1MjA4NjIyLFxuICAyMTMyNjExMTIsXG4gIDI0NjMyNzI2MDMsXG4gIDM4NTU5OTAyODUsXG4gIDIwOTQ4NTQwNzEsXG4gIDE5ODk1ODg4MSxcbiAgMjI2MjAyOTAxMixcbiAgNDA1NzI2MDYxMCxcbiAgMTc1OTM1OTk5MixcbiAgNTM0NDE0MTkwLFxuICAyMTc2NzE4NTQxLFxuICA0MTM5MzI5MTE1LFxuICAxODczODM2MDAxLFxuICA0MTQ2NjQ1NjcsXG4gIDIyODIyNDg5MzQsXG4gIDQyNzkyMDAzNjgsXG4gIDE3MTE2ODQ1NTQsXG4gIDI4NTI4MTExNixcbiAgMjQwNTgwMTcyNyxcbiAgNDE2NzIxNjc0NSxcbiAgMTYzNDQ2Nzc5NSxcbiAgMzc2MjI5NzAxLFxuICAyNjg1MDY3ODk2LFxuICAzNjA4MDA3NDA2LFxuICAxMzA4OTE4NjEyLFxuICA5NTY1NDM5MzgsXG4gIDI4MDg1NTUxMDUsXG4gIDM0OTU5NTgyNjMsXG4gIDEyMzE2MzYzMDEsXG4gIDEwNDc0MjcwMzUsXG4gIDI5MzI5NTk4MTgsXG4gIDM2NTQ3MDM4MzYsXG4gIDEwODgzNTkyNzAsXG4gIDkzNjkxOGUzLFxuICAyODQ3NzE0ODk5LFxuICAzNzM2ODM3ODI5LFxuICAxMjAyOTAwODYzLFxuICA4MTcyMzM4OTcsXG4gIDMxODMzNDIxMDgsXG4gIDM0MDEyMzcxMzAsXG4gIDE0MDQyNzc1NTIsXG4gIDYxNTgxODE1MCxcbiAgMzEzNDIwNzQ5MyxcbiAgMzQ1MzQyMTIwMyxcbiAgMTQyMzg1NzQ0OSxcbiAgNjAxNDUwNDMxLFxuICAzMDA5ODM3NjE0LFxuICAzMjk0NzEwNDU2LFxuICAxNTY3MTAzNzQ2LFxuICA3MTE5Mjg3MjQsXG4gIDMwMjA2Njg0NzEsXG4gIDMyNzIzODAwNjUsXG4gIDE1MTAzMzQyMzUsXG4gIDc1NTE2NzExN1xuXTtcbmlmICh0eXBlb2YgSW50MzJBcnJheSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBUQUJMRSA9IG5ldyBJbnQzMkFycmF5KFRBQkxFKTtcbn1cbmNvbnN0IGNyYyA9IChjdXJyZW50LCBwcmV2aW91cykgPT4ge1xuICBsZXQgY3JjMiA9IHByZXZpb3VzID09PSAwID8gMCA6IH5+cHJldmlvdXMgXiAtMTtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGN1cnJlbnQubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY3JjMiA9IFRBQkxFWyhjcmMyIF4gY3VycmVudFtpbmRleF0pICYgMjU1XSBeIGNyYzIgPj4+IDg7XG4gIH1cbiAgcmV0dXJuIGNyYzIgXiAtMTtcbn07XG5jb25zdCBMRU5fU0laRSA9IDQ7XG5jb25zdCBDUkNfU0laRSA9IDQ7XG5jbGFzcyBQbmdIZWxwZXJzIHtcbiAgc3RhdGljIGlzUG5nKHZpZXcsIG9mZnNldCkge1xuICAgIGlmICh2aWV3LmdldFVpbnQ4KG9mZnNldCArIDApID09PSAxMzcgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyAxKSA9PT0gODAgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyAyKSA9PT0gNzggJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyAzKSA9PT0gNzEgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyA0KSA9PT0gMTMgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyA1KSA9PT0gMTAgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyA2KSA9PT0gMjYgJiYgdmlldy5nZXRVaW50OChvZmZzZXQgKyA3KSA9PT0gMTApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhdGljIGdldENodW5rVHlwZSh2aWV3LCBvZmZzZXQpIHtcbiAgICByZXR1cm4gW1xuICAgICAgU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3LmdldFVpbnQ4KG9mZnNldCkpLFxuICAgICAgU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3LmdldFVpbnQ4KG9mZnNldCArIDEpKSxcbiAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUodmlldy5nZXRVaW50OChvZmZzZXQgKyAyKSksXG4gICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMykpXG4gICAgXS5qb2luKFwiXCIpO1xuICB9XG4gIHN0YXRpYyByZWFkQ2h1bmtzKHZpZXcsIG9mZnNldCA9IDApIHtcbiAgICBjb25zdCBjaHVua3MgPSB7fTtcbiAgICBpZiAoIVBuZ0hlbHBlcnMuaXNQbmcodmlldywgb2Zmc2V0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGEgUE5HXCIpO1xuICAgIH1cbiAgICBvZmZzZXQgKz0gODtcbiAgICB3aGlsZSAob2Zmc2V0IDw9IHZpZXcuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gb2Zmc2V0O1xuICAgICAgY29uc3QgbGVuID0gdmlldy5nZXRJbnQzMihvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICBjb25zdCBjaHVua1R5cGUgPSBQbmdIZWxwZXJzLmdldENodW5rVHlwZSh2aWV3LCBvZmZzZXQpO1xuICAgICAgaWYgKGNodW5rVHlwZSA9PT0gXCJJREFUXCIgJiYgY2h1bmtzW2NodW5rVHlwZV0pIHtcbiAgICAgICAgb2Zmc2V0ICs9IGxlbiArIExFTl9TSVpFICsgQ1JDX1NJWkU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNodW5rVHlwZSA9PT0gXCJJRU5EXCIpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjaHVua3NbY2h1bmtUeXBlXSA9IHtcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGRhdGFPZmZzZXQ6IG9mZnNldCArIDQsXG4gICAgICAgIHNpemU6IGxlblxuICAgICAgfTtcbiAgICAgIG9mZnNldCArPSBsZW4gKyBMRU5fU0laRSArIENSQ19TSVpFO1xuICAgIH1cbiAgICByZXR1cm4gY2h1bmtzO1xuICB9XG4gIHN0YXRpYyBwYXJzZVBoeXModmlldywgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBwdXg6IHZpZXcuZ2V0VWludDMyKG9mZnNldCksXG4gICAgICBwcHV5OiB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0KSxcbiAgICAgIHVuaXQ6IHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNClcbiAgICB9O1xuICB9XG4gIHN0YXRpYyBmaW5kQ2h1bmsodmlldywgdHlwZSkge1xuICAgIGNvbnN0IGNodW5rcyA9IFBuZ0hlbHBlcnMucmVhZENodW5rcyh2aWV3KTtcbiAgICByZXR1cm4gY2h1bmtzW3R5cGVdO1xuICB9XG4gIHN0YXRpYyBzZXRQaHlzQ2h1bmsodmlldywgZHByID0gMSwgb3B0aW9ucykge1xuICAgIGxldCBvZmZzZXQgPSA0NjtcbiAgICBsZXQgc2l6ZSA9IDA7XG4gICAgY29uc3QgcmVzMSA9IFBuZ0hlbHBlcnMuZmluZENodW5rKHZpZXcsIFwicEhZc1wiKTtcbiAgICBpZiAocmVzMSkge1xuICAgICAgb2Zmc2V0ID0gcmVzMS5zdGFydDtcbiAgICAgIHNpemUgPSByZXMxLnNpemU7XG4gICAgfVxuICAgIGNvbnN0IHJlczIgPSBQbmdIZWxwZXJzLmZpbmRDaHVuayh2aWV3LCBcIklEQVRcIik7XG4gICAgaWYgKHJlczIpIHtcbiAgICAgIG9mZnNldCA9IHJlczIuc3RhcnQ7XG4gICAgICBzaXplID0gMDtcbiAgICB9XG4gICAgY29uc3QgcEhZc0RhdGEgPSBuZXcgQXJyYXlCdWZmZXIoMjEpO1xuICAgIGNvbnN0IHBIWXNEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhwSFlzRGF0YSk7XG4gICAgcEhZc0RhdGFWaWV3LnNldFVpbnQzMigwLCA5KTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0VWludDgoNCwgXCJwXCIuY2hhckNvZGVBdCgwKSk7XG4gICAgcEhZc0RhdGFWaWV3LnNldFVpbnQ4KDUsIFwiSFwiLmNoYXJDb2RlQXQoMCkpO1xuICAgIHBIWXNEYXRhVmlldy5zZXRVaW50OCg2LCBcIllcIi5jaGFyQ29kZUF0KDApKTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0VWludDgoNywgXCJzXCIuY2hhckNvZGVBdCgwKSk7XG4gICAgY29uc3QgRFBJXzk2ID0gMjgzNS41O1xuICAgIHBIWXNEYXRhVmlldy5zZXRJbnQzMig4LCBEUElfOTYgKiBkcHIpO1xuICAgIHBIWXNEYXRhVmlldy5zZXRJbnQzMigxMiwgRFBJXzk2ICogZHByKTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0SW50OCgxNiwgMSk7XG4gICAgY29uc3QgY3JjQml0ID0gbmV3IFVpbnQ4QXJyYXkocEhZc0RhdGEuc2xpY2UoNCwgMTcpKTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0SW50MzIoMTcsIGNyYyhjcmNCaXQpKTtcbiAgICBjb25zdCBzdGFydEJ1ZiA9IHZpZXcuYnVmZmVyLnNsaWNlKDAsIG9mZnNldCk7XG4gICAgY29uc3QgZW5kQnVmID0gdmlldy5idWZmZXIuc2xpY2Uob2Zmc2V0ICsgc2l6ZSk7XG4gICAgcmV0dXJuIG5ldyBCbG9iKFtzdGFydEJ1ZiwgcEhZc0RhdGEsIGVuZEJ1Zl0sIG9wdGlvbnMpO1xuICB9XG59XG5leHBvcnQge1xuICBQbmdIZWxwZXJzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isWebpAnimated: () => (/* binding */ isWebpAnimated)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n */\nfunction isWebp(view) {\n  if (!view || view.length < 12) {\n    return false;\n  }\n  return view[8] === 87 && view[9] === 69 && view[10] === 66 && view[11] === 80;\n}\nfunction isWebpAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  if (!isWebp(view)) {\n    return false;\n  }\n  if (!view || view.length < 21) {\n    return false;\n  }\n  return (view[20] >> 1 & 1) === 1;\n}\n\n//# sourceMappingURL=webp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvd2VicC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvd2VicC5tanM/Y2QzMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIE1JVCBMaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2lzLXdlYnAvYmxvYi9tYWluL2xpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgU2luZHJlIFNvcmh1cyA8c2luZHJlc29yaHVzQGdtYWlsLmNvbT4gKGh0dHBzOi8vc2luZHJlc29yaHVzLmNvbSlcbiAqL1xuZnVuY3Rpb24gaXNXZWJwKHZpZXcpIHtcbiAgaWYgKCF2aWV3IHx8IHZpZXcubGVuZ3RoIDwgMTIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHZpZXdbOF0gPT09IDg3ICYmIHZpZXdbOV0gPT09IDY5ICYmIHZpZXdbMTBdID09PSA2NiAmJiB2aWV3WzExXSA9PT0gODA7XG59XG5mdW5jdGlvbiBpc1dlYnBBbmltYXRlZChidWZmZXIpIHtcbiAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGlmICghaXNXZWJwKHZpZXcpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghdmlldyB8fCB2aWV3Lmxlbmd0aCA8IDIxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAodmlld1syMF0gPj4gMSAmIDEpID09PSAxO1xufVxuZXhwb3J0IHtcbiAgaXNXZWJwQW5pbWF0ZWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13ZWJwLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/network.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/network.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Image: () => (/* binding */ Image),\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\nasync function fetch(input, init) {\n  return window.fetch(input, {\n    // We want to make sure that the referrer is not sent to other domains.\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    ...init\n  });\n}\nconst Image = (width, height) => {\n  const img = new window.Image(width, height);\n  img.referrerPolicy = \"strict-origin-when-cross-origin\";\n  return img;\n};\n\n//# sourceMappingURL=network.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbmV0d29yay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9uZXR3b3JrLm1qcz80MTRjIl0sInNvdXJjZXNDb250ZW50IjpbImFzeW5jIGZ1bmN0aW9uIGZldGNoKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiB3aW5kb3cuZmV0Y2goaW5wdXQsIHtcbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSByZWZlcnJlciBpcyBub3Qgc2VudCB0byBvdGhlciBkb21haW5zLlxuICAgIHJlZmVycmVyUG9saWN5OiBcInN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW5cIixcbiAgICAuLi5pbml0XG4gIH0pO1xufVxuY29uc3QgSW1hZ2UgPSAod2lkdGgsIGhlaWdodCkgPT4ge1xuICBjb25zdCBpbWcgPSBuZXcgd2luZG93LkltYWdlKHdpZHRoLCBoZWlnaHQpO1xuICBpbWcucmVmZXJyZXJQb2xpY3kgPSBcInN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW5cIjtcbiAgcmV0dXJuIGltZztcbn07XG5leHBvcnQge1xuICBJbWFnZSxcbiAgZmV0Y2hcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXR3b3JrLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/network.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/number.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invLerp: () => (/* binding */ invLerp),\n/* harmony export */   lerp: () => (/* binding */ lerp),\n/* harmony export */   modulate: () => (/* binding */ modulate),\n/* harmony export */   rng: () => (/* binding */ rng)\n/* harmony export */ });\nfunction lerp(a, b, t) {\n  return a + (b - a) * t;\n}\nfunction invLerp(a, b, t) {\n  return (t - a) / (b - a);\n}\nfunction rng(seed = \"\") {\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  let w = 0;\n  function next() {\n    const t = x ^ x << 11;\n    x = y;\n    y = z;\n    z = w;\n    w ^= (w >>> 19 ^ t ^ t >>> 8) >>> 0;\n    return w / 4294967296 * 2;\n  }\n  for (let k = 0; k < seed.length + 64; k++) {\n    x ^= seed.charCodeAt(k) | 0;\n    next();\n  }\n  return next;\n}\nfunction modulate(value, rangeA, rangeB, clamp = false) {\n  const [fromLow, fromHigh] = rangeA;\n  const [v0, v1] = rangeB;\n  const result = v0 + (value - fromLow) / (fromHigh - fromLow) * (v1 - v0);\n  return clamp ? v0 < v1 ? Math.max(Math.min(result, v1), v0) : Math.max(Math.min(result, v0), v1) : result;\n}\n\n//# sourceMappingURL=number.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbnVtYmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbnVtYmVyLm1qcz9jZTYzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGxlcnAoYSwgYiwgdCkge1xuICByZXR1cm4gYSArIChiIC0gYSkgKiB0O1xufVxuZnVuY3Rpb24gaW52TGVycChhLCBiLCB0KSB7XG4gIHJldHVybiAodCAtIGEpIC8gKGIgLSBhKTtcbn1cbmZ1bmN0aW9uIHJuZyhzZWVkID0gXCJcIikge1xuICBsZXQgeCA9IDA7XG4gIGxldCB5ID0gMDtcbiAgbGV0IHogPSAwO1xuICBsZXQgdyA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgY29uc3QgdCA9IHggXiB4IDw8IDExO1xuICAgIHggPSB5O1xuICAgIHkgPSB6O1xuICAgIHogPSB3O1xuICAgIHcgXj0gKHcgPj4+IDE5IF4gdCBeIHQgPj4+IDgpID4+PiAwO1xuICAgIHJldHVybiB3IC8gNDI5NDk2NzI5NiAqIDI7XG4gIH1cbiAgZm9yIChsZXQgayA9IDA7IGsgPCBzZWVkLmxlbmd0aCArIDY0OyBrKyspIHtcbiAgICB4IF49IHNlZWQuY2hhckNvZGVBdChrKSB8IDA7XG4gICAgbmV4dCgpO1xuICB9XG4gIHJldHVybiBuZXh0O1xufVxuZnVuY3Rpb24gbW9kdWxhdGUodmFsdWUsIHJhbmdlQSwgcmFuZ2VCLCBjbGFtcCA9IGZhbHNlKSB7XG4gIGNvbnN0IFtmcm9tTG93LCBmcm9tSGlnaF0gPSByYW5nZUE7XG4gIGNvbnN0IFt2MCwgdjFdID0gcmFuZ2VCO1xuICBjb25zdCByZXN1bHQgPSB2MCArICh2YWx1ZSAtIGZyb21Mb3cpIC8gKGZyb21IaWdoIC0gZnJvbUxvdykgKiAodjEgLSB2MCk7XG4gIHJldHVybiBjbGFtcCA/IHYwIDwgdjEgPyBNYXRoLm1heChNYXRoLm1pbihyZXN1bHQsIHYxKSwgdjApIDogTWF0aC5tYXgoTWF0aC5taW4ocmVzdWx0LCB2MCksIHYxKSA6IHJlc3VsdDtcbn1cbmV4cG9ydCB7XG4gIGludkxlcnAsXG4gIGxlcnAsXG4gIG1vZHVsYXRlLFxuICBybmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udW1iZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/object.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   areObjectsShallowEqual: () => (/* binding */ areObjectsShallowEqual),\n/* harmony export */   filterEntries: () => (/* binding */ filterEntries),\n/* harmony export */   getOwnProperty: () => (/* binding */ getOwnProperty),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   mapObjectMapValues: () => (/* binding */ mapObjectMapValues),\n/* harmony export */   objectMapEntries: () => (/* binding */ objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* binding */ objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* binding */ objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* binding */ objectMapValues)\n/* harmony export */ });\nfunction hasOwnProperty(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction getOwnProperty(obj, key) {\n  if (!hasOwnProperty(obj, key)) {\n    return void 0;\n  }\n  return obj[key];\n}\nfunction objectMapKeys(object) {\n  return Object.keys(object);\n}\nfunction objectMapValues(object) {\n  return Object.values(object);\n}\nfunction objectMapEntries(object) {\n  return Object.entries(object);\n}\nfunction objectMapFromEntries(entries) {\n  return Object.fromEntries(entries);\n}\nfunction filterEntries(object, predicate) {\n  const result = {};\n  let didChange = false;\n  for (const [key, value] of objectMapEntries(object)) {\n    if (predicate(key, value)) {\n      result[key] = value;\n    } else {\n      didChange = true;\n    }\n  }\n  return didChange ? result : object;\n}\nfunction mapObjectMapValues(object, mapper) {\n  const result = {};\n  for (const [key, value] of objectMapEntries(object)) {\n    const newValue = mapper(key, value);\n    result[key] = newValue;\n  }\n  return result;\n}\nfunction areObjectsShallowEqual(obj1, obj2) {\n  if (obj1 === obj2) return true;\n  const keys1 = new Set(Object.keys(obj1));\n  const keys2 = new Set(Object.keys(obj2));\n  if (keys1.size !== keys2.size) return false;\n  for (const key of keys1) {\n    if (!keys2.has(key)) return false;\n    if (!Object.is(obj1[key], obj2[key])) return false;\n  }\n  return true;\n}\nfunction groupBy(array, keySelector) {\n  const result = {};\n  for (const value of array) {\n    const key = keySelector(value);\n    if (!result[key]) result[key] = [];\n    result[key].push(value);\n  }\n  return result;\n}\n\n//# sourceMappingURL=object.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvb2JqZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9vYmplY3QubWpzPzJkMjUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5mdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwga2V5KSkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIG9ialtrZXldO1xufVxuZnVuY3Rpb24gb2JqZWN0TWFwS2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCk7XG59XG5mdW5jdGlvbiBvYmplY3RNYXBWYWx1ZXMob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKG9iamVjdCk7XG59XG5mdW5jdGlvbiBvYmplY3RNYXBFbnRyaWVzKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqZWN0KTtcbn1cbmZ1bmN0aW9uIG9iamVjdE1hcEZyb21FbnRyaWVzKGVudHJpZXMpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzKTtcbn1cbmZ1bmN0aW9uIGZpbHRlckVudHJpZXMob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGxldCBkaWRDaGFuZ2UgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygb2JqZWN0TWFwRW50cmllcyhvYmplY3QpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShrZXksIHZhbHVlKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlkQ2hhbmdlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRpZENoYW5nZSA/IHJlc3VsdCA6IG9iamVjdDtcbn1cbmZ1bmN0aW9uIG1hcE9iamVjdE1hcFZhbHVlcyhvYmplY3QsIG1hcHBlcikge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygb2JqZWN0TWFwRW50cmllcyhvYmplY3QpKSB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBtYXBwZXIoa2V5LCB2YWx1ZSk7XG4gICAgcmVzdWx0W2tleV0gPSBuZXdWYWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gYXJlT2JqZWN0c1NoYWxsb3dFcXVhbChvYmoxLCBvYmoyKSB7XG4gIGlmIChvYmoxID09PSBvYmoyKSByZXR1cm4gdHJ1ZTtcbiAgY29uc3Qga2V5czEgPSBuZXcgU2V0KE9iamVjdC5rZXlzKG9iajEpKTtcbiAgY29uc3Qga2V5czIgPSBuZXcgU2V0KE9iamVjdC5rZXlzKG9iajIpKTtcbiAgaWYgKGtleXMxLnNpemUgIT09IGtleXMyLnNpemUpIHJldHVybiBmYWxzZTtcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5czEpIHtcbiAgICBpZiAoIWtleXMyLmhhcyhrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFPYmplY3QuaXMob2JqMVtrZXldLCBvYmoyW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBncm91cEJ5KGFycmF5LCBrZXlTZWxlY3Rvcikge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgZm9yIChjb25zdCB2YWx1ZSBvZiBhcnJheSkge1xuICAgIGNvbnN0IGtleSA9IGtleVNlbGVjdG9yKHZhbHVlKTtcbiAgICBpZiAoIXJlc3VsdFtrZXldKSByZXN1bHRba2V5XSA9IFtdO1xuICAgIHJlc3VsdFtrZXldLnB1c2godmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQge1xuICBhcmVPYmplY3RzU2hhbGxvd0VxdWFsLFxuICBmaWx0ZXJFbnRyaWVzLFxuICBnZXRPd25Qcm9wZXJ0eSxcbiAgZ3JvdXBCeSxcbiAgaGFzT3duUHJvcGVydHksXG4gIG1hcE9iamVjdE1hcFZhbHVlcyxcbiAgb2JqZWN0TWFwRW50cmllcyxcbiAgb2JqZWN0TWFwRnJvbUVudHJpZXMsXG4gIG9iamVjdE1hcEtleXMsXG4gIG9iamVjdE1hcFZhbHVlc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iamVjdC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PERFORMANCE_COLORS: () => (/* binding */ PERFORMANCE_COLORS),\n/* harmony export */   PERFORMANCE_PREFIX_COLOR: () => (/* binding */ PERFORMANCE_PREFIX_COLOR),\n/* harmony export */   measureAverageDuration: () => (/* binding */ measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* binding */ measureCbDuration),\n/* harmony export */   measureDuration: () => (/* binding */ measureDuration)\n/* harmony export */ });\nconst PERFORMANCE_COLORS = {\n  Good: \"#40C057\",\n  Mid: \"#FFC078\",\n  Poor: \"#E03131\"\n};\nconst PERFORMANCE_PREFIX_COLOR = PERFORMANCE_COLORS.Good;\nfunction measureCbDuration(name, cb) {\n  const start = performance.now();\n  const result = cb();\n  console.debug(\n    `%cPerf%c ${name} took ${performance.now() - start}ms`,\n    `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n    \"font-weight: normal\"\n  );\n  return result;\n}\nfunction measureDuration(_target, propertyKey, descriptor) {\n  const originalMethod = descriptor.value;\n  descriptor.value = function(...args) {\n    const start = performance.now();\n    const result = originalMethod.apply(this, args);\n    console.debug(\n      `%cPerf%c ${propertyKey} took: ${performance.now() - start}ms`,\n      `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n      \"font-weight: normal\"\n    );\n    return result;\n  };\n  return descriptor;\n}\nconst averages = /* @__PURE__ */ new Map();\nfunction measureAverageDuration(_target, propertyKey, descriptor) {\n  const originalMethod = descriptor.value;\n  descriptor.value = function(...args) {\n    const start = performance.now();\n    const result = originalMethod.apply(this, args);\n    const end = performance.now();\n    const length = end - start;\n    if (length !== 0) {\n      const value = averages.get(descriptor.value);\n      const total = value.total + length;\n      const count = value.count + 1;\n      averages.set(descriptor.value, { total, count });\n      console.debug(\n        `%cPerf%c ${propertyKey} took ${(end - start).toFixed(2)}ms | average ${(total / count).toFixed(2)}ms`,\n        `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n        \"font-weight: normal\"\n      );\n    }\n    return result;\n  };\n  averages.set(descriptor.value, { total: 0, count: 0 });\n  return descriptor;\n}\n\n//# sourceMappingURL=perf.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvcGVyZi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNLE9BQU8sMEJBQTBCO0FBQ3ZELG1CQUFtQixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhLFFBQVEsMEJBQTBCO0FBQ2pFLHFCQUFxQixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsY0FBYztBQUNyRDtBQUNBLG9CQUFvQixhQUFhLE9BQU8seUJBQXlCLGVBQWUsMkJBQTJCO0FBQzNHLHVCQUF1QixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9CQUFvQjtBQUN2RDtBQUNBO0FBT0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL3BlcmYubWpzP2QxOGIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEVSRk9STUFOQ0VfQ09MT1JTID0ge1xuICBHb29kOiBcIiM0MEMwNTdcIixcbiAgTWlkOiBcIiNGRkMwNzhcIixcbiAgUG9vcjogXCIjRTAzMTMxXCJcbn07XG5jb25zdCBQRVJGT1JNQU5DRV9QUkVGSVhfQ09MT1IgPSBQRVJGT1JNQU5DRV9DT0xPUlMuR29vZDtcbmZ1bmN0aW9uIG1lYXN1cmVDYkR1cmF0aW9uKG5hbWUsIGNiKSB7XG4gIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIGNvbnN0IHJlc3VsdCA9IGNiKCk7XG4gIGNvbnNvbGUuZGVidWcoXG4gICAgYCVjUGVyZiVjICR7bmFtZX0gdG9vayAke3BlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnR9bXNgLFxuICAgIGBjb2xvcjogd2hpdGU7IGJhY2tncm91bmQ6ICR7UEVSRk9STUFOQ0VfUFJFRklYX0NPTE9SfTtwYWRkaW5nOiAycHg7Ym9yZGVyLXJhZGl1czogM3B4O2AsXG4gICAgXCJmb250LXdlaWdodDogbm9ybWFsXCJcbiAgKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1lYXN1cmVEdXJhdGlvbihfdGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgYCVjUGVyZiVjICR7cHJvcGVydHlLZXl9IHRvb2s6ICR7cGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydH1tc2AsXG4gICAgICBgY29sb3I6IHdoaXRlOyBiYWNrZ3JvdW5kOiAke1BFUkZPUk1BTkNFX1BSRUZJWF9DT0xPUn07cGFkZGluZzogMnB4O2JvcmRlci1yYWRpdXM6IDNweDtgLFxuICAgICAgXCJmb250LXdlaWdodDogbm9ybWFsXCJcbiAgICApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufVxuY29uc3QgYXZlcmFnZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gbWVhc3VyZUF2ZXJhZ2VEdXJhdGlvbihfdGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5hbE1ldGhvZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBsZW5ndGggPSBlbmQgLSBzdGFydDtcbiAgICBpZiAobGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGF2ZXJhZ2VzLmdldChkZXNjcmlwdG9yLnZhbHVlKTtcbiAgICAgIGNvbnN0IHRvdGFsID0gdmFsdWUudG90YWwgKyBsZW5ndGg7XG4gICAgICBjb25zdCBjb3VudCA9IHZhbHVlLmNvdW50ICsgMTtcbiAgICAgIGF2ZXJhZ2VzLnNldChkZXNjcmlwdG9yLnZhbHVlLCB7IHRvdGFsLCBjb3VudCB9KTtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGAlY1BlcmYlYyAke3Byb3BlcnR5S2V5fSB0b29rICR7KGVuZCAtIHN0YXJ0KS50b0ZpeGVkKDIpfW1zIHwgYXZlcmFnZSAkeyh0b3RhbCAvIGNvdW50KS50b0ZpeGVkKDIpfW1zYCxcbiAgICAgICAgYGNvbG9yOiB3aGl0ZTsgYmFja2dyb3VuZDogJHtQRVJGT1JNQU5DRV9QUkVGSVhfQ09MT1J9O3BhZGRpbmc6IDJweDtib3JkZXItcmFkaXVzOiAzcHg7YCxcbiAgICAgICAgXCJmb250LXdlaWdodDogbm9ybWFsXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGF2ZXJhZ2VzLnNldChkZXNjcmlwdG9yLnZhbHVlLCB7IHRvdGFsOiAwLCBjb3VudDogMCB9KTtcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XG59XG5leHBvcnQge1xuICBQRVJGT1JNQU5DRV9DT0xPUlMsXG4gIFBFUkZPUk1BTkNFX1BSRUZJWF9DT0xPUixcbiAgbWVhc3VyZUF2ZXJhZ2VEdXJhdGlvbixcbiAgbWVhc3VyZUNiRHVyYXRpb24sXG4gIG1lYXN1cmVEdXJhdGlvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBlcmYubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/reordering.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZERO_INDEX_KEY: () => (/* binding */ ZERO_INDEX_KEY),\n/* harmony export */   getIndexAbove: () => (/* binding */ getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* binding */ getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* binding */ getIndexBetween),\n/* harmony export */   getIndices: () => (/* binding */ getIndices),\n/* harmony export */   getIndicesAbove: () => (/* binding */ getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* binding */ getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* binding */ getIndicesBetween),\n/* harmony export */   sortByIndex: () => (/* binding */ sortByIndex),\n/* harmony export */   validateIndexKey: () => (/* binding */ validateIndexKey)\n/* harmony export */ });\n/* harmony import */ var fractional_indexing_jittered__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fractional-indexing-jittered */ \"(ssr)/./node_modules/fractional-indexing-jittered/lib/index.js\");\n\nconst generateKeysFn =  false ? 0 : fractional_indexing_jittered__WEBPACK_IMPORTED_MODULE_0__.generateNJitteredKeysBetween;\nconst ZERO_INDEX_KEY = \"a0\";\nfunction validateIndexKey(index) {\n  try {\n    (0,fractional_indexing_jittered__WEBPACK_IMPORTED_MODULE_0__.generateJitteredKeyBetween)(index, null);\n  } catch (e) {\n    throw new Error(\"invalid index: \" + index);\n  }\n}\nfunction getIndicesBetween(below, above, n) {\n  return generateKeysFn(below ?? null, above ?? null, n);\n}\nfunction getIndicesAbove(below, n) {\n  return generateKeysFn(below ?? null, null, n);\n}\nfunction getIndicesBelow(above, n) {\n  return generateKeysFn(null, above ?? null, n);\n}\nfunction getIndexBetween(below, above) {\n  return generateKeysFn(below ?? null, above ?? null, 1)[0];\n}\nfunction getIndexAbove(below = null) {\n  return generateKeysFn(below, null, 1)[0];\n}\nfunction getIndexBelow(above = null) {\n  return generateKeysFn(null, above, 1)[0];\n}\nfunction getIndices(n, start = \"a1\") {\n  return [start, ...generateKeysFn(start, null, n)];\n}\nfunction sortByIndex(a, b) {\n  if (a.index < b.index) {\n    return -1;\n  } else if (a.index > b.index) {\n    return 1;\n  }\n  return 0;\n}\n\n//# sourceMappingURL=reordering.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvcmVvcmRlcmluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFJc0M7QUFDdEMsdUJBQXVCLE1BQStCLEdBQUcsQ0FBb0IsR0FBRyxzRkFBNEI7QUFDNUc7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3RkFBMEI7QUFDOUIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQVlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9yZW9yZGVyaW5nLm1qcz82NTBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGdlbmVyYXRlSml0dGVyZWRLZXlCZXR3ZWVuLFxuICBnZW5lcmF0ZU5KaXR0ZXJlZEtleXNCZXR3ZWVuLFxuICBnZW5lcmF0ZU5LZXlzQmV0d2VlblxufSBmcm9tIFwiZnJhY3Rpb25hbC1pbmRleGluZy1qaXR0ZXJlZFwiO1xuY29uc3QgZ2VuZXJhdGVLZXlzRm4gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCIgPyBnZW5lcmF0ZU5LZXlzQmV0d2VlbiA6IGdlbmVyYXRlTkppdHRlcmVkS2V5c0JldHdlZW47XG5jb25zdCBaRVJPX0lOREVYX0tFWSA9IFwiYTBcIjtcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhLZXkoaW5kZXgpIHtcbiAgdHJ5IHtcbiAgICBnZW5lcmF0ZUppdHRlcmVkS2V5QmV0d2VlbihpbmRleCwgbnVsbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGluZGV4OiBcIiArIGluZGV4KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0SW5kaWNlc0JldHdlZW4oYmVsb3csIGFib3ZlLCBuKSB7XG4gIHJldHVybiBnZW5lcmF0ZUtleXNGbihiZWxvdyA/PyBudWxsLCBhYm92ZSA/PyBudWxsLCBuKTtcbn1cbmZ1bmN0aW9uIGdldEluZGljZXNBYm92ZShiZWxvdywgbikge1xuICByZXR1cm4gZ2VuZXJhdGVLZXlzRm4oYmVsb3cgPz8gbnVsbCwgbnVsbCwgbik7XG59XG5mdW5jdGlvbiBnZXRJbmRpY2VzQmVsb3coYWJvdmUsIG4pIHtcbiAgcmV0dXJuIGdlbmVyYXRlS2V5c0ZuKG51bGwsIGFib3ZlID8/IG51bGwsIG4pO1xufVxuZnVuY3Rpb24gZ2V0SW5kZXhCZXR3ZWVuKGJlbG93LCBhYm92ZSkge1xuICByZXR1cm4gZ2VuZXJhdGVLZXlzRm4oYmVsb3cgPz8gbnVsbCwgYWJvdmUgPz8gbnVsbCwgMSlbMF07XG59XG5mdW5jdGlvbiBnZXRJbmRleEFib3ZlKGJlbG93ID0gbnVsbCkge1xuICByZXR1cm4gZ2VuZXJhdGVLZXlzRm4oYmVsb3csIG51bGwsIDEpWzBdO1xufVxuZnVuY3Rpb24gZ2V0SW5kZXhCZWxvdyhhYm92ZSA9IG51bGwpIHtcbiAgcmV0dXJuIGdlbmVyYXRlS2V5c0ZuKG51bGwsIGFib3ZlLCAxKVswXTtcbn1cbmZ1bmN0aW9uIGdldEluZGljZXMobiwgc3RhcnQgPSBcImExXCIpIHtcbiAgcmV0dXJuIFtzdGFydCwgLi4uZ2VuZXJhdGVLZXlzRm4oc3RhcnQsIG51bGwsIG4pXTtcbn1cbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGEsIGIpIHtcbiAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGEuaW5kZXggPiBiLmluZGV4KSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5leHBvcnQge1xuICBaRVJPX0lOREVYX0tFWSxcbiAgZ2V0SW5kZXhBYm92ZSxcbiAgZ2V0SW5kZXhCZWxvdyxcbiAgZ2V0SW5kZXhCZXR3ZWVuLFxuICBnZXRJbmRpY2VzLFxuICBnZXRJbmRpY2VzQWJvdmUsXG4gIGdldEluZGljZXNCZWxvdyxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIHNvcnRCeUluZGV4LFxuICB2YWxpZGF0ZUluZGV4S2V5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVvcmRlcmluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sortById: () => (/* binding */ sortById)\n/* harmony export */ });\nfunction sortById(a, b) {\n  return a.id > b.id ? 1 : -1;\n}\n\n//# sourceMappingURL=sort.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc29ydC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9zb3J0Lm1qcz83Yzk2Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNvcnRCeUlkKGEsIGIpIHtcbiAgcmV0dXJuIGEuaWQgPiBiLmlkID8gMSA6IC0xO1xufVxuZXhwb3J0IHtcbiAgc29ydEJ5SWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zb3J0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearLocalStorage: () => (/* binding */ clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* binding */ clearSessionStorage),\n/* harmony export */   deleteFromLocalStorage: () => (/* binding */ deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* binding */ deleteFromSessionStorage),\n/* harmony export */   getFromLocalStorage: () => (/* binding */ getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* binding */ getFromSessionStorage),\n/* harmony export */   setInLocalStorage: () => (/* binding */ setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* binding */ setInSessionStorage)\n/* harmony export */ });\nfunction getFromLocalStorage(key) {\n  try {\n    return localStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\nfunction setInLocalStorage(key, value) {\n  try {\n    localStorage.setItem(key, value);\n  } catch {\n  }\n}\nfunction deleteFromLocalStorage(key) {\n  try {\n    localStorage.removeItem(key);\n  } catch {\n  }\n}\nfunction clearLocalStorage() {\n  try {\n    localStorage.clear();\n  } catch {\n  }\n}\nfunction getFromSessionStorage(key) {\n  try {\n    return sessionStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\nfunction setInSessionStorage(key, value) {\n  try {\n    sessionStorage.setItem(key, value);\n  } catch {\n  }\n}\nfunction deleteFromSessionStorage(key) {\n  try {\n    sessionStorage.removeItem(key);\n  } catch {\n  }\n}\nfunction clearSessionStorage() {\n  try {\n    sessionStorage.clear();\n  } catch {\n  }\n}\n\n//# sourceMappingURL=storage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc3RvcmFnZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQVVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9zdG9yYWdlLm1qcz8zMWEzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEZyb21Mb2NhbFN0b3JhZ2Uoa2V5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBzZXRJbkxvY2FsU3RvcmFnZShrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBkZWxldGVGcm9tTG9jYWxTdG9yYWdlKGtleSkge1xuICB0cnkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBjbGVhckxvY2FsU3RvcmFnZSgpIHtcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEZyb21TZXNzaW9uU3RvcmFnZShrZXkpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gc2V0SW5TZXNzaW9uU3RvcmFnZShrZXksIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZShrZXkpIHtcbiAgdHJ5IHtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBjbGVhclNlc3Npb25TdG9yYWdlKCkge1xuICB0cnkge1xuICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5leHBvcnQge1xuICBjbGVhckxvY2FsU3RvcmFnZSxcbiAgY2xlYXJTZXNzaW9uU3RvcmFnZSxcbiAgZGVsZXRlRnJvbUxvY2FsU3RvcmFnZSxcbiAgZGVsZXRlRnJvbVNlc3Npb25TdG9yYWdlLFxuICBnZXRGcm9tTG9jYWxTdG9yYWdlLFxuICBnZXRGcm9tU2Vzc2lvblN0b3JhZ2UsXG4gIHNldEluTG9jYWxTdG9yYWdlLFxuICBzZXRJblNlc3Npb25TdG9yYWdlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmFnZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fpsThrottle: () => (/* binding */ fpsThrottle),\n/* harmony export */   throttleToNextFrame: () => (/* binding */ throttleToNextFrame)\n/* harmony export */ });\nconst isTest = () => typeof process !== \"undefined\" && \"development\" === \"test\" && // @ts-expect-error\n0;\nconst fpsQueue = [];\nconst targetFps = 60;\nconst targetTimePerFrame = Math.ceil(1e3 / targetFps);\nlet frame;\nlet time = 0;\nlet last = 0;\nconst flush = () => {\n  const queue = fpsQueue.splice(0, fpsQueue.length);\n  for (const fn of queue) {\n    fn();\n  }\n};\nfunction tick() {\n  if (frame) {\n    return;\n  }\n  const now = Date.now();\n  const elapsed = now - last;\n  if (time + elapsed < targetTimePerFrame) {\n    frame = requestAnimationFrame(() => {\n      frame = void 0;\n      tick();\n    });\n    return;\n  }\n  frame = requestAnimationFrame(() => {\n    frame = void 0;\n    last = now;\n    time = Math.min(time + elapsed - targetTimePerFrame, targetTimePerFrame * 10);\n    flush();\n  });\n}\nlet started = false;\nfunction fpsThrottle(fn) {\n  if (isTest()) {\n    fn.cancel = () => frame && cancelAnimationFrame(frame);\n    return fn;\n  }\n  const throttledFn = () => {\n    if (fpsQueue.includes(fn)) {\n      return;\n    }\n    fpsQueue.push(fn);\n    if (!started) {\n      started = true;\n      last = Date.now() - targetTimePerFrame - 1;\n    }\n    tick();\n  };\n  throttledFn.cancel = () => {\n    const index = fpsQueue.indexOf(fn);\n    if (index > -1) {\n      fpsQueue.splice(index, 1);\n    }\n  };\n  return throttledFn;\n}\nfunction throttleToNextFrame(fn) {\n  if (isTest()) {\n    fn();\n    return () => {\n    };\n  }\n  if (!fpsQueue.includes(fn)) {\n    fpsQueue.push(fn);\n    if (!started) {\n      started = true;\n      last = Date.now() - targetTimePerFrame - 1;\n    }\n    tick();\n  }\n  return () => {\n    const index = fpsQueue.indexOf(fn);\n    if (index > -1) {\n      fpsQueue.splice(index, 1);\n    }\n  };\n}\n\n//# sourceMappingURL=throttle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGhyb3R0bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdURBQXVELGFBQW9CO0FBQzNFLENBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGhyb3R0bGUubWpzPzVmYzAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNUZXN0ID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiICYmIC8vIEB0cy1leHBlY3QtZXJyb3JcbiFnbG9iYWxUaGlzLl9fRk9SQ0VfUkFGX0lOX1RFU1RTX187XG5jb25zdCBmcHNRdWV1ZSA9IFtdO1xuY29uc3QgdGFyZ2V0RnBzID0gNjA7XG5jb25zdCB0YXJnZXRUaW1lUGVyRnJhbWUgPSBNYXRoLmNlaWwoMWUzIC8gdGFyZ2V0RnBzKTtcbmxldCBmcmFtZTtcbmxldCB0aW1lID0gMDtcbmxldCBsYXN0ID0gMDtcbmNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICBjb25zdCBxdWV1ZSA9IGZwc1F1ZXVlLnNwbGljZSgwLCBmcHNRdWV1ZS5sZW5ndGgpO1xuICBmb3IgKGNvbnN0IGZuIG9mIHF1ZXVlKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHRpY2soKSB7XG4gIGlmIChmcmFtZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCBlbGFwc2VkID0gbm93IC0gbGFzdDtcbiAgaWYgKHRpbWUgKyBlbGFwc2VkIDwgdGFyZ2V0VGltZVBlckZyYW1lKSB7XG4gICAgZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgZnJhbWUgPSB2b2lkIDA7XG4gICAgICB0aWNrKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBmcmFtZSA9IHZvaWQgMDtcbiAgICBsYXN0ID0gbm93O1xuICAgIHRpbWUgPSBNYXRoLm1pbih0aW1lICsgZWxhcHNlZCAtIHRhcmdldFRpbWVQZXJGcmFtZSwgdGFyZ2V0VGltZVBlckZyYW1lICogMTApO1xuICAgIGZsdXNoKCk7XG4gIH0pO1xufVxubGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGZwc1Rocm90dGxlKGZuKSB7XG4gIGlmIChpc1Rlc3QoKSkge1xuICAgIGZuLmNhbmNlbCA9ICgpID0+IGZyYW1lICYmIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcbiAgICByZXR1cm4gZm47XG4gIH1cbiAgY29uc3QgdGhyb3R0bGVkRm4gPSAoKSA9PiB7XG4gICAgaWYgKGZwc1F1ZXVlLmluY2x1ZGVzKGZuKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmcHNRdWV1ZS5wdXNoKGZuKTtcbiAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgbGFzdCA9IERhdGUubm93KCkgLSB0YXJnZXRUaW1lUGVyRnJhbWUgLSAxO1xuICAgIH1cbiAgICB0aWNrKCk7XG4gIH07XG4gIHRocm90dGxlZEZuLmNhbmNlbCA9ICgpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IGZwc1F1ZXVlLmluZGV4T2YoZm4pO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBmcHNRdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHRocm90dGxlZEZuO1xufVxuZnVuY3Rpb24gdGhyb3R0bGVUb05leHRGcmFtZShmbikge1xuICBpZiAoaXNUZXN0KCkpIHtcbiAgICBmbigpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgfTtcbiAgfVxuICBpZiAoIWZwc1F1ZXVlLmluY2x1ZGVzKGZuKSkge1xuICAgIGZwc1F1ZXVlLnB1c2goZm4pO1xuICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICBsYXN0ID0gRGF0ZS5ub3coKSAtIHRhcmdldFRpbWVQZXJGcmFtZSAtIDE7XG4gICAgfVxuICAgIHRpY2soKTtcbiAgfVxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gZnBzUXVldWUuaW5kZXhPZihmbik7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIGZwc1F1ZXVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IHtcbiAgZnBzVGhyb3R0bGUsXG4gIHRocm90dGxlVG9OZXh0RnJhbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Timers: () => (/* binding */ Timers)\n/* harmony export */ });\nclass Timers {\n  timeouts = /* @__PURE__ */ new Map();\n  intervals = /* @__PURE__ */ new Map();\n  rafs = /* @__PURE__ */ new Map();\n  constructor() {\n    this.setTimeout = this.setTimeout.bind(this);\n    this.setInterval = this.setInterval.bind(this);\n    this.requestAnimationFrame = this.requestAnimationFrame.bind(this);\n    this.dispose = this.dispose.bind(this);\n  }\n  /** @public */\n  setTimeout(contextId, handler, timeout, ...args) {\n    const id = window.setTimeout(handler, timeout, args);\n    const current = this.timeouts.get(contextId) ?? [];\n    this.timeouts.set(contextId, [...current, id]);\n    return id;\n  }\n  /** @public */\n  setInterval(contextId, handler, timeout, ...args) {\n    const id = window.setInterval(handler, timeout, args);\n    const current = this.intervals.get(contextId) ?? [];\n    this.intervals.set(contextId, [...current, id]);\n    return id;\n  }\n  /** @public */\n  requestAnimationFrame(contextId, callback) {\n    const id = window.requestAnimationFrame(callback);\n    const current = this.rafs.get(contextId) ?? [];\n    this.rafs.set(contextId, [...current, id]);\n    return id;\n  }\n  /** @public */\n  dispose(contextId) {\n    this.timeouts.get(contextId)?.forEach((id) => clearTimeout(id));\n    this.intervals.get(contextId)?.forEach((id) => clearInterval(id));\n    this.rafs.get(contextId)?.forEach((id) => cancelAnimationFrame(id));\n    this.timeouts.delete(contextId);\n    this.intervals.delete(contextId);\n    this.rafs.delete(contextId);\n  }\n  disposeAll() {\n    for (const contextId of this.timeouts.keys()) {\n      this.dispose(contextId);\n    }\n  }\n  forContext(contextId) {\n    return {\n      setTimeout: (handler, timeout, ...args) => this.setTimeout(contextId, handler, timeout, args),\n      setInterval: (handler, timeout, ...args) => this.setInterval(contextId, handler, timeout, args),\n      requestAnimationFrame: (callback) => this.requestAnimationFrame(contextId, callback),\n      dispose: () => this.dispose(contextId)\n    };\n  }\n}\n\n//# sourceMappingURL=timers.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGltZXJzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL3RpbWVycy5tanM/Y2VjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUaW1lcnMge1xuICB0aW1lb3V0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGludGVydmFscyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIHJhZnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNldFRpbWVvdXQgPSB0aGlzLnNldFRpbWVvdXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNldEludGVydmFsID0gdGhpcy5zZXRJbnRlcnZhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRpc3Bvc2UgPSB0aGlzLmRpc3Bvc2UuYmluZCh0aGlzKTtcbiAgfVxuICAvKiogQHB1YmxpYyAqL1xuICBzZXRUaW1lb3V0KGNvbnRleHRJZCwgaGFuZGxlciwgdGltZW91dCwgLi4uYXJncykge1xuICAgIGNvbnN0IGlkID0gd2luZG93LnNldFRpbWVvdXQoaGFuZGxlciwgdGltZW91dCwgYXJncyk7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMudGltZW91dHMuZ2V0KGNvbnRleHRJZCkgPz8gW107XG4gICAgdGhpcy50aW1lb3V0cy5zZXQoY29udGV4dElkLCBbLi4uY3VycmVudCwgaWRdKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqIEBwdWJsaWMgKi9cbiAgc2V0SW50ZXJ2YWwoY29udGV4dElkLCBoYW5kbGVyLCB0aW1lb3V0LCAuLi5hcmdzKSB7XG4gICAgY29uc3QgaWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoaGFuZGxlciwgdGltZW91dCwgYXJncyk7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuaW50ZXJ2YWxzLmdldChjb250ZXh0SWQpID8/IFtdO1xuICAgIHRoaXMuaW50ZXJ2YWxzLnNldChjb250ZXh0SWQsIFsuLi5jdXJyZW50LCBpZF0pO1xuICAgIHJldHVybiBpZDtcbiAgfVxuICAvKiogQHB1YmxpYyAqL1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY29udGV4dElkLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGlkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMucmFmcy5nZXQoY29udGV4dElkKSA/PyBbXTtcbiAgICB0aGlzLnJhZnMuc2V0KGNvbnRleHRJZCwgWy4uLmN1cnJlbnQsIGlkXSk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIC8qKiBAcHVibGljICovXG4gIGRpc3Bvc2UoY29udGV4dElkKSB7XG4gICAgdGhpcy50aW1lb3V0cy5nZXQoY29udGV4dElkKT8uZm9yRWFjaCgoaWQpID0+IGNsZWFyVGltZW91dChpZCkpO1xuICAgIHRoaXMuaW50ZXJ2YWxzLmdldChjb250ZXh0SWQpPy5mb3JFYWNoKChpZCkgPT4gY2xlYXJJbnRlcnZhbChpZCkpO1xuICAgIHRoaXMucmFmcy5nZXQoY29udGV4dElkKT8uZm9yRWFjaCgoaWQpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSk7XG4gICAgdGhpcy50aW1lb3V0cy5kZWxldGUoY29udGV4dElkKTtcbiAgICB0aGlzLmludGVydmFscy5kZWxldGUoY29udGV4dElkKTtcbiAgICB0aGlzLnJhZnMuZGVsZXRlKGNvbnRleHRJZCk7XG4gIH1cbiAgZGlzcG9zZUFsbCgpIHtcbiAgICBmb3IgKGNvbnN0IGNvbnRleHRJZCBvZiB0aGlzLnRpbWVvdXRzLmtleXMoKSkge1xuICAgICAgdGhpcy5kaXNwb3NlKGNvbnRleHRJZCk7XG4gICAgfVxuICB9XG4gIGZvckNvbnRleHQoY29udGV4dElkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldFRpbWVvdXQ6IChoYW5kbGVyLCB0aW1lb3V0LCAuLi5hcmdzKSA9PiB0aGlzLnNldFRpbWVvdXQoY29udGV4dElkLCBoYW5kbGVyLCB0aW1lb3V0LCBhcmdzKSxcbiAgICAgIHNldEludGVydmFsOiAoaGFuZGxlciwgdGltZW91dCwgLi4uYXJncykgPT4gdGhpcy5zZXRJbnRlcnZhbChjb250ZXh0SWQsIGhhbmRsZXIsIHRpbWVvdXQsIGFyZ3MpLFxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAoY2FsbGJhY2spID0+IHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNvbnRleHRJZCwgY2FsbGJhY2spLFxuICAgICAgZGlzcG9zZTogKCkgPT4gdGhpcy5kaXNwb3NlKGNvbnRleHRJZClcbiAgICB9O1xuICB9XG59XG5leHBvcnQge1xuICBUaW1lcnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lcnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/url.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/url.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   safeParseUrl: () => (/* binding */ safeParseUrl)\n/* harmony export */ });\nconst safeParseUrl = (url, baseUrl) => {\n  try {\n    return new URL(url, baseUrl);\n  } catch (err) {\n    return;\n  }\n};\n\n//# sourceMappingURL=url.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdXJsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi91cmwubWpzPzljMjMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2FmZVBhcnNlVXJsID0gKHVybCwgYmFzZVVybCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCwgYmFzZVVybCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybjtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIHNhZmVQYXJzZVVybFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/url.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/value.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* binding */ STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   isDefined: () => (/* binding */ isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* binding */ isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* binding */ isNonNull),\n/* harmony export */   isNonNullish: () => (/* binding */ isNonNullish),\n/* harmony export */   structuredClone: () => (/* binding */ structuredClone)\n/* harmony export */ });\nfunction isDefined(value) {\n  return value !== void 0;\n}\nfunction isNonNull(value) {\n  return value !== null;\n}\nfunction isNonNullish(value) {\n  return value !== null && value !== void 0;\n}\nfunction getStructuredClone() {\n  if (typeof globalThis !== \"undefined\" && globalThis.structuredClone) {\n    return [globalThis.structuredClone, true];\n  }\n  if (typeof global !== \"undefined\" && global.structuredClone) {\n    return [global.structuredClone, true];\n  }\n  if (typeof window !== \"undefined\" && window.structuredClone) {\n    return [window.structuredClone, true];\n  }\n  return [(i) => i ? JSON.parse(JSON.stringify(i)) : i, false];\n}\nconst _structuredClone = getStructuredClone();\nconst structuredClone = _structuredClone[0];\nconst isNativeStructuredClone = _structuredClone[1];\nconst STRUCTURED_CLONE_OBJECT_PROTOTYPE = Object.getPrototypeOf(structuredClone({}));\n\n//# sourceMappingURL=value.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdmFsdWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRjtBQVFoRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdmFsdWUubWpzPzRiMTkiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gaXNOb25OdWxsKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzTm9uTnVsbGlzaCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGdldFN0cnVjdHVyZWRDbG9uZSgpIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbFRoaXMuc3RydWN0dXJlZENsb25lKSB7XG4gICAgcmV0dXJuIFtnbG9iYWxUaGlzLnN0cnVjdHVyZWRDbG9uZSwgdHJ1ZV07XG4gIH1cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnN0cnVjdHVyZWRDbG9uZSkge1xuICAgIHJldHVybiBbZ2xvYmFsLnN0cnVjdHVyZWRDbG9uZSwgdHJ1ZV07XG4gIH1cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LnN0cnVjdHVyZWRDbG9uZSkge1xuICAgIHJldHVybiBbd2luZG93LnN0cnVjdHVyZWRDbG9uZSwgdHJ1ZV07XG4gIH1cbiAgcmV0dXJuIFsoaSkgPT4gaSA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaSkpIDogaSwgZmFsc2VdO1xufVxuY29uc3QgX3N0cnVjdHVyZWRDbG9uZSA9IGdldFN0cnVjdHVyZWRDbG9uZSgpO1xuY29uc3Qgc3RydWN0dXJlZENsb25lID0gX3N0cnVjdHVyZWRDbG9uZVswXTtcbmNvbnN0IGlzTmF0aXZlU3RydWN0dXJlZENsb25lID0gX3N0cnVjdHVyZWRDbG9uZVsxXTtcbmNvbnN0IFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzdHJ1Y3R1cmVkQ2xvbmUoe30pKTtcbmV4cG9ydCB7XG4gIFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSxcbiAgaXNEZWZpbmVkLFxuICBpc05hdGl2ZVN0cnVjdHVyZWRDbG9uZSxcbiAgaXNOb25OdWxsLFxuICBpc05vbk51bGxpc2gsXG4gIHN0cnVjdHVyZWRDbG9uZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbHVlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/version.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/version.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearRegisteredVersionsForTests: () => (/* binding */ clearRegisteredVersionsForTests),\n/* harmony export */   registerTldrawLibraryVersion: () => (/* binding */ registerTldrawLibraryVersion)\n/* harmony export */ });\nconst TLDRAW_LIBRARY_VERSION_KEY = \"__TLDRAW_LIBRARY_VERSIONS__\";\nfunction getLibraryVersions() {\n  if (globalThis[TLDRAW_LIBRARY_VERSION_KEY]) {\n    return globalThis[TLDRAW_LIBRARY_VERSION_KEY];\n  }\n  const info = {\n    versions: [],\n    didWarn: false,\n    scheduledNotice: null\n  };\n  Object.defineProperty(globalThis, TLDRAW_LIBRARY_VERSION_KEY, {\n    value: info,\n    writable: false,\n    configurable: false,\n    enumerable: false\n  });\n  return info;\n}\nfunction clearRegisteredVersionsForTests() {\n  const info = getLibraryVersions();\n  info.versions = [];\n  info.didWarn = false;\n  if (info.scheduledNotice) {\n    clearTimeout(info.scheduledNotice);\n    info.scheduledNotice = null;\n  }\n}\nfunction registerTldrawLibraryVersion(name, version, modules) {\n  if (!name || !version || !modules) {\n    if (true) {\n      throw new Error(\"Missing name/version/module system in built version of tldraw library\");\n    }\n    return;\n  }\n  const info = getLibraryVersions();\n  info.versions.push({ name, version, modules });\n  if (!info.scheduledNotice) {\n    try {\n      info.scheduledNotice = setTimeout(() => {\n        info.scheduledNotice = null;\n        checkLibraryVersions(info);\n      }, 100);\n    } catch {\n      checkLibraryVersions(info);\n    }\n  }\n}\nfunction checkLibraryVersions(info) {\n  if (!info.versions.length) return;\n  if (info.didWarn) return;\n  const sorted = info.versions.sort((a, b) => compareVersions(a.version, b.version));\n  const latestVersion = sorted[sorted.length - 1].version;\n  const matchingVersions = /* @__PURE__ */ new Set();\n  const nonMatchingVersions = /* @__PURE__ */ new Map();\n  for (const lib of sorted) {\n    if (nonMatchingVersions.has(lib.name)) {\n      matchingVersions.delete(lib.name);\n      entry(nonMatchingVersions, lib.name, /* @__PURE__ */ new Set()).add(lib.version);\n      continue;\n    }\n    if (lib.version === latestVersion) {\n      matchingVersions.add(lib.name);\n    } else {\n      matchingVersions.delete(lib.name);\n      entry(nonMatchingVersions, lib.name, /* @__PURE__ */ new Set()).add(lib.version);\n    }\n  }\n  if (nonMatchingVersions.size > 0) {\n    const message = [\n      `${format(\"[tldraw]\", [\"bold\", \"bgRed\", \"textWhite\"])} ${format(\"You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.\", [\"textRed\", \"bold\"])}`,\n      \"\",\n      `The latest version you have installed is ${format(`v${latestVersion}`, [\"bold\", \"textBlue\"])}. The following libraries are on the latest version:`,\n      ...Array.from(matchingVersions, (name) => `  \\u2022 \\u2705 ${format(name, [\"bold\"])}`),\n      \"\",\n      `The following libraries are not on the latest version, or have multiple versions installed:`,\n      ...Array.from(nonMatchingVersions, ([name, versions]) => {\n        const sortedVersions = Array.from(versions).sort(compareVersions).map((v) => format(`v${v}`, v === latestVersion ? [\"textGreen\"] : [\"textRed\"]));\n        return `  \\u2022 \\u274C ${format(name, [\"bold\"])} (${sortedVersions.join(\", \")})`;\n      })\n    ];\n    console.log(message.join(\"\\n\"));\n    info.didWarn = true;\n    return;\n  }\n  const potentialDuplicates = /* @__PURE__ */ new Map();\n  for (const lib of sorted) {\n    entry(potentialDuplicates, lib.name, { version: lib.version, modules: [] }).modules.push(\n      lib.modules\n    );\n  }\n  const duplicates = /* @__PURE__ */ new Map();\n  for (const [name, lib] of potentialDuplicates) {\n    if (lib.modules.length > 1) duplicates.set(name, lib);\n  }\n  if (duplicates.size > 0) {\n    const message = [\n      `${format(\"[tldraw]\", [\"bold\", \"bgRed\", \"textWhite\"])} ${format(\"You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. \", [\"textRed\", \"bold\"])}`,\n      \"\",\n      \"This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.\",\n      \"\",\n      \"The following libraries have been imported multiple times:\",\n      ...Array.from(duplicates, ([name, lib]) => {\n        const modules = lib.modules.map((m, i) => m === \"esm\" ? `      ${i + 1}. ES Modules` : `      ${i + 1}. CommonJS`).join(\"\\n\");\n        return `  \\u2022 \\u274C ${format(name, [\"bold\"])} v${lib.version}: \n${modules}`;\n      }),\n      \"\",\n      \"You should configure your bundler to only import one version of each library.\"\n    ];\n    console.log(message.join(\"\\n\"));\n    info.didWarn = true;\n    return;\n  }\n}\nfunction compareVersions(a, b) {\n  const aMatch = a.match(/^(\\d+)\\.(\\d+)\\.(\\d+)(?:-(\\w+))?$/);\n  const bMatch = b.match(/^(\\d+)\\.(\\d+)\\.(\\d+)(?:-(\\w+))?$/);\n  if (!aMatch || !bMatch) return a.localeCompare(b);\n  if (aMatch[1] !== bMatch[1]) return Number(aMatch[1]) - Number(bMatch[1]);\n  if (aMatch[2] !== bMatch[2]) return Number(aMatch[2]) - Number(bMatch[2]);\n  if (aMatch[3] !== bMatch[3]) return Number(aMatch[3]) - Number(bMatch[3]);\n  if (aMatch[4] && bMatch[4]) return aMatch[4].localeCompare(bMatch[4]);\n  if (aMatch[4]) return 1;\n  if (bMatch[4]) return -1;\n  return 0;\n}\nconst formats = {\n  bold: \"1\",\n  textBlue: \"94\",\n  textRed: \"31\",\n  textGreen: \"32\",\n  bgRed: \"41\",\n  textWhite: \"97\"\n};\nfunction format(value, formatters = []) {\n  return `\\x1B[${formatters.map((f) => formats[f]).join(\";\")}m${value}\\x1B[m`;\n}\nfunction entry(map, key, defaultValue) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n  map.set(key, defaultValue);\n  return defaultValue;\n}\n\n//# sourceMappingURL=version.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdmVyc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9EQUFvRCxFQUFFLHdJQUF3STtBQUN2TTtBQUNBLGtEQUFrRCxXQUFXLGNBQWMseUJBQXlCO0FBQ3BHLG1FQUFtRSx1QkFBdUI7QUFDMUY7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLEVBQUU7QUFDbEcsa0NBQWtDLHdCQUF3QixHQUFHLDBCQUEwQjtBQUN2RixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbUNBQW1DO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0RBQW9ELEVBQUUsNElBQTRJO0FBQzNNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsTUFBTSx5QkFBeUIsTUFBTTtBQUM5RyxrQ0FBa0Msd0JBQXdCLEdBQUcsWUFBWTtBQUN6RSxFQUFFLFFBQVE7QUFDVixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix5Q0FBeUMsR0FBRyxHQUFHLE1BQU07QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi92ZXJzaW9uLm1qcz8xN2M0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRMRFJBV19MSUJSQVJZX1ZFUlNJT05fS0VZID0gXCJfX1RMRFJBV19MSUJSQVJZX1ZFUlNJT05TX19cIjtcbmZ1bmN0aW9uIGdldExpYnJhcnlWZXJzaW9ucygpIHtcbiAgaWYgKGdsb2JhbFRoaXNbVExEUkFXX0xJQlJBUllfVkVSU0lPTl9LRVldKSB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXNbVExEUkFXX0xJQlJBUllfVkVSU0lPTl9LRVldO1xuICB9XG4gIGNvbnN0IGluZm8gPSB7XG4gICAgdmVyc2lvbnM6IFtdLFxuICAgIGRpZFdhcm46IGZhbHNlLFxuICAgIHNjaGVkdWxlZE5vdGljZTogbnVsbFxuICB9O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcywgVExEUkFXX0xJQlJBUllfVkVSU0lPTl9LRVksIHtcbiAgICB2YWx1ZTogaW5mbyxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICB9KTtcbiAgcmV0dXJuIGluZm87XG59XG5mdW5jdGlvbiBjbGVhclJlZ2lzdGVyZWRWZXJzaW9uc0ZvclRlc3RzKCkge1xuICBjb25zdCBpbmZvID0gZ2V0TGlicmFyeVZlcnNpb25zKCk7XG4gIGluZm8udmVyc2lvbnMgPSBbXTtcbiAgaW5mby5kaWRXYXJuID0gZmFsc2U7XG4gIGlmIChpbmZvLnNjaGVkdWxlZE5vdGljZSkge1xuICAgIGNsZWFyVGltZW91dChpbmZvLnNjaGVkdWxlZE5vdGljZSk7XG4gICAgaW5mby5zY2hlZHVsZWROb3RpY2UgPSBudWxsO1xuICB9XG59XG5mdW5jdGlvbiByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKG5hbWUsIHZlcnNpb24sIG1vZHVsZXMpIHtcbiAgaWYgKCFuYW1lIHx8ICF2ZXJzaW9uIHx8ICFtb2R1bGVzKSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgbmFtZS92ZXJzaW9uL21vZHVsZSBzeXN0ZW0gaW4gYnVpbHQgdmVyc2lvbiBvZiB0bGRyYXcgbGlicmFyeVwiKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGluZm8gPSBnZXRMaWJyYXJ5VmVyc2lvbnMoKTtcbiAgaW5mby52ZXJzaW9ucy5wdXNoKHsgbmFtZSwgdmVyc2lvbiwgbW9kdWxlcyB9KTtcbiAgaWYgKCFpbmZvLnNjaGVkdWxlZE5vdGljZSkge1xuICAgIHRyeSB7XG4gICAgICBpbmZvLnNjaGVkdWxlZE5vdGljZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpbmZvLnNjaGVkdWxlZE5vdGljZSA9IG51bGw7XG4gICAgICAgIGNoZWNrTGlicmFyeVZlcnNpb25zKGluZm8pO1xuICAgICAgfSwgMTAwKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNoZWNrTGlicmFyeVZlcnNpb25zKGluZm8pO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tMaWJyYXJ5VmVyc2lvbnMoaW5mbykge1xuICBpZiAoIWluZm8udmVyc2lvbnMubGVuZ3RoKSByZXR1cm47XG4gIGlmIChpbmZvLmRpZFdhcm4pIHJldHVybjtcbiAgY29uc3Qgc29ydGVkID0gaW5mby52ZXJzaW9ucy5zb3J0KChhLCBiKSA9PiBjb21wYXJlVmVyc2lvbnMoYS52ZXJzaW9uLCBiLnZlcnNpb24pKTtcbiAgY29uc3QgbGF0ZXN0VmVyc2lvbiA9IHNvcnRlZFtzb3J0ZWQubGVuZ3RoIC0gMV0udmVyc2lvbjtcbiAgY29uc3QgbWF0Y2hpbmdWZXJzaW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IG5vbk1hdGNoaW5nVmVyc2lvbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGxpYiBvZiBzb3J0ZWQpIHtcbiAgICBpZiAobm9uTWF0Y2hpbmdWZXJzaW9ucy5oYXMobGliLm5hbWUpKSB7XG4gICAgICBtYXRjaGluZ1ZlcnNpb25zLmRlbGV0ZShsaWIubmFtZSk7XG4gICAgICBlbnRyeShub25NYXRjaGluZ1ZlcnNpb25zLCBsaWIubmFtZSwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkuYWRkKGxpYi52ZXJzaW9uKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAobGliLnZlcnNpb24gPT09IGxhdGVzdFZlcnNpb24pIHtcbiAgICAgIG1hdGNoaW5nVmVyc2lvbnMuYWRkKGxpYi5uYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2hpbmdWZXJzaW9ucy5kZWxldGUobGliLm5hbWUpO1xuICAgICAgZW50cnkobm9uTWF0Y2hpbmdWZXJzaW9ucywgbGliLm5hbWUsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLmFkZChsaWIudmVyc2lvbik7XG4gICAgfVxuICB9XG4gIGlmIChub25NYXRjaGluZ1ZlcnNpb25zLnNpemUgPiAwKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IFtcbiAgICAgIGAke2Zvcm1hdChcIlt0bGRyYXddXCIsIFtcImJvbGRcIiwgXCJiZ1JlZFwiLCBcInRleHRXaGl0ZVwiXSl9ICR7Zm9ybWF0KFwiWW91IGhhdmUgbXVsdGlwbGUgdmVyc2lvbnMgb2YgdGxkcmF3IGxpYnJhcmllcyBpbnN0YWxsZWQuIFRoaXMgY2FuIGxlYWQgdG8gYnVncyBhbmQgdW5leHBlY3RlZCBiZWhhdmlvci5cIiwgW1widGV4dFJlZFwiLCBcImJvbGRcIl0pfWAsXG4gICAgICBcIlwiLFxuICAgICAgYFRoZSBsYXRlc3QgdmVyc2lvbiB5b3UgaGF2ZSBpbnN0YWxsZWQgaXMgJHtmb3JtYXQoYHYke2xhdGVzdFZlcnNpb259YCwgW1wiYm9sZFwiLCBcInRleHRCbHVlXCJdKX0uIFRoZSBmb2xsb3dpbmcgbGlicmFyaWVzIGFyZSBvbiB0aGUgbGF0ZXN0IHZlcnNpb246YCxcbiAgICAgIC4uLkFycmF5LmZyb20obWF0Y2hpbmdWZXJzaW9ucywgKG5hbWUpID0+IGAgIFxcdTIwMjIgXFx1MjcwNSAke2Zvcm1hdChuYW1lLCBbXCJib2xkXCJdKX1gKSxcbiAgICAgIFwiXCIsXG4gICAgICBgVGhlIGZvbGxvd2luZyBsaWJyYXJpZXMgYXJlIG5vdCBvbiB0aGUgbGF0ZXN0IHZlcnNpb24sIG9yIGhhdmUgbXVsdGlwbGUgdmVyc2lvbnMgaW5zdGFsbGVkOmAsXG4gICAgICAuLi5BcnJheS5mcm9tKG5vbk1hdGNoaW5nVmVyc2lvbnMsIChbbmFtZSwgdmVyc2lvbnNdKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvcnRlZFZlcnNpb25zID0gQXJyYXkuZnJvbSh2ZXJzaW9ucykuc29ydChjb21wYXJlVmVyc2lvbnMpLm1hcCgodikgPT4gZm9ybWF0KGB2JHt2fWAsIHYgPT09IGxhdGVzdFZlcnNpb24gPyBbXCJ0ZXh0R3JlZW5cIl0gOiBbXCJ0ZXh0UmVkXCJdKSk7XG4gICAgICAgIHJldHVybiBgICBcXHUyMDIyIFxcdTI3NEMgJHtmb3JtYXQobmFtZSwgW1wiYm9sZFwiXSl9ICgke3NvcnRlZFZlcnNpb25zLmpvaW4oXCIsIFwiKX0pYDtcbiAgICAgIH0pXG4gICAgXTtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLmpvaW4oXCJcXG5cIikpO1xuICAgIGluZm8uZGlkV2FybiA9IHRydWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHBvdGVudGlhbER1cGxpY2F0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGxpYiBvZiBzb3J0ZWQpIHtcbiAgICBlbnRyeShwb3RlbnRpYWxEdXBsaWNhdGVzLCBsaWIubmFtZSwgeyB2ZXJzaW9uOiBsaWIudmVyc2lvbiwgbW9kdWxlczogW10gfSkubW9kdWxlcy5wdXNoKFxuICAgICAgbGliLm1vZHVsZXNcbiAgICApO1xuICB9XG4gIGNvbnN0IGR1cGxpY2F0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IFtuYW1lLCBsaWJdIG9mIHBvdGVudGlhbER1cGxpY2F0ZXMpIHtcbiAgICBpZiAobGliLm1vZHVsZXMubGVuZ3RoID4gMSkgZHVwbGljYXRlcy5zZXQobmFtZSwgbGliKTtcbiAgfVxuICBpZiAoZHVwbGljYXRlcy5zaXplID4gMCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBbXG4gICAgICBgJHtmb3JtYXQoXCJbdGxkcmF3XVwiLCBbXCJib2xkXCIsIFwiYmdSZWRcIiwgXCJ0ZXh0V2hpdGVcIl0pfSAke2Zvcm1hdChcIllvdSBoYXZlIG11bHRpcGxlIGluc3RhbmNlcyBvZiBzb21lIHRsZHJhdyBsaWJyYXJpZXMgYWN0aXZlLiBUaGlzIGNhbiBsZWFkIHRvIGJ1Z3MgYW5kIHVuZXhwZWN0ZWQgYmVoYXZpb3IuIFwiLCBbXCJ0ZXh0UmVkXCIsIFwiYm9sZFwiXSl9YCxcbiAgICAgIFwiXCIsXG4gICAgICBcIlRoaXMgdXN1YWxseSBtZWFucyB0aGF0IHlvdXIgYnVuZGxlciBpcyBtaXNjb25maWd1cmVkLCBhbmQgaXMgaW1wb3J0aW5nIHRoZSBzYW1lIGxpYnJhcnkgbXVsdGlwbGUgdGltZXMgLSB1c3VhbGx5IG9uY2UgYXMgYW4gRVMgTW9kdWxlLCBhbmQgb25jZSBhcyBhIENvbW1vbkpTIG1vZHVsZS5cIixcbiAgICAgIFwiXCIsXG4gICAgICBcIlRoZSBmb2xsb3dpbmcgbGlicmFyaWVzIGhhdmUgYmVlbiBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lczpcIixcbiAgICAgIC4uLkFycmF5LmZyb20oZHVwbGljYXRlcywgKFtuYW1lLCBsaWJdKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZHVsZXMgPSBsaWIubW9kdWxlcy5tYXAoKG0sIGkpID0+IG0gPT09IFwiZXNtXCIgPyBgICAgICAgJHtpICsgMX0uIEVTIE1vZHVsZXNgIDogYCAgICAgICR7aSArIDF9LiBDb21tb25KU2ApLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIHJldHVybiBgICBcXHUyMDIyIFxcdTI3NEMgJHtmb3JtYXQobmFtZSwgW1wiYm9sZFwiXSl9IHYke2xpYi52ZXJzaW9ufTogXG4ke21vZHVsZXN9YDtcbiAgICAgIH0pLFxuICAgICAgXCJcIixcbiAgICAgIFwiWW91IHNob3VsZCBjb25maWd1cmUgeW91ciBidW5kbGVyIHRvIG9ubHkgaW1wb3J0IG9uZSB2ZXJzaW9uIG9mIGVhY2ggbGlicmFyeS5cIlxuICAgIF07XG4gICAgY29uc29sZS5sb2cobWVzc2FnZS5qb2luKFwiXFxuXCIpKTtcbiAgICBpbmZvLmRpZFdhcm4gPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxufVxuZnVuY3Rpb24gY29tcGFyZVZlcnNpb25zKGEsIGIpIHtcbiAgY29uc3QgYU1hdGNoID0gYS5tYXRjaCgvXihcXGQrKVxcLihcXGQrKVxcLihcXGQrKSg/Oi0oXFx3KykpPyQvKTtcbiAgY29uc3QgYk1hdGNoID0gYi5tYXRjaCgvXihcXGQrKVxcLihcXGQrKVxcLihcXGQrKSg/Oi0oXFx3KykpPyQvKTtcbiAgaWYgKCFhTWF0Y2ggfHwgIWJNYXRjaCkgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgaWYgKGFNYXRjaFsxXSAhPT0gYk1hdGNoWzFdKSByZXR1cm4gTnVtYmVyKGFNYXRjaFsxXSkgLSBOdW1iZXIoYk1hdGNoWzFdKTtcbiAgaWYgKGFNYXRjaFsyXSAhPT0gYk1hdGNoWzJdKSByZXR1cm4gTnVtYmVyKGFNYXRjaFsyXSkgLSBOdW1iZXIoYk1hdGNoWzJdKTtcbiAgaWYgKGFNYXRjaFszXSAhPT0gYk1hdGNoWzNdKSByZXR1cm4gTnVtYmVyKGFNYXRjaFszXSkgLSBOdW1iZXIoYk1hdGNoWzNdKTtcbiAgaWYgKGFNYXRjaFs0XSAmJiBiTWF0Y2hbNF0pIHJldHVybiBhTWF0Y2hbNF0ubG9jYWxlQ29tcGFyZShiTWF0Y2hbNF0pO1xuICBpZiAoYU1hdGNoWzRdKSByZXR1cm4gMTtcbiAgaWYgKGJNYXRjaFs0XSkgcmV0dXJuIC0xO1xuICByZXR1cm4gMDtcbn1cbmNvbnN0IGZvcm1hdHMgPSB7XG4gIGJvbGQ6IFwiMVwiLFxuICB0ZXh0Qmx1ZTogXCI5NFwiLFxuICB0ZXh0UmVkOiBcIjMxXCIsXG4gIHRleHRHcmVlbjogXCIzMlwiLFxuICBiZ1JlZDogXCI0MVwiLFxuICB0ZXh0V2hpdGU6IFwiOTdcIlxufTtcbmZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSwgZm9ybWF0dGVycyA9IFtdKSB7XG4gIHJldHVybiBgXFx4MUJbJHtmb3JtYXR0ZXJzLm1hcCgoZikgPT4gZm9ybWF0c1tmXSkuam9pbihcIjtcIil9bSR7dmFsdWV9XFx4MUJbbWA7XG59XG5mdW5jdGlvbiBlbnRyeShtYXAsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmIChtYXAuaGFzKGtleSkpIHtcbiAgICByZXR1cm4gbWFwLmdldChrZXkpO1xuICB9XG4gIG1hcC5zZXQoa2V5LCBkZWZhdWx0VmFsdWUpO1xuICByZXR1cm4gZGVmYXVsdFZhbHVlO1xufVxuZXhwb3J0IHtcbiAgY2xlYXJSZWdpc3RlcmVkVmVyc2lvbnNGb3JUZXN0cyxcbiAgcmVnaXN0ZXJUbGRyYXdMaWJyYXJ5VmVyc2lvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/version.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warn.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/warn.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   warnDeprecatedGetter: () => (/* binding */ warnDeprecatedGetter),\n/* harmony export */   warnOnce: () => (/* binding */ warnOnce)\n/* harmony export */ });\nconst usedWarnings = /* @__PURE__ */ new Set();\nfunction warnDeprecatedGetter(name) {\n  warnOnce(\n    `Using '${name}' is deprecated and will be removed in the near future. Please refactor to use 'get${name[0].toLocaleUpperCase()}${name.slice(\n      1\n    )}' instead.`\n  );\n}\nfunction warnOnce(message) {\n  if (usedWarnings.has(message)) return;\n  usedWarnings.add(message);\n  console.warn(`[tldraw] ${message}`);\n}\n\n//# sourceMappingURL=warn.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvd2Fybi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLEtBQUsscUZBQXFGLDRCQUE0QixFQUFFO0FBQ3RJO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbHV0by1sZWFybmluZy8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi93YXJuLm1qcz8yZmIxIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVzZWRXYXJuaW5ncyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5mdW5jdGlvbiB3YXJuRGVwcmVjYXRlZEdldHRlcihuYW1lKSB7XG4gIHdhcm5PbmNlKFxuICAgIGBVc2luZyAnJHtuYW1lfScgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZS4gUGxlYXNlIHJlZmFjdG9yIHRvIHVzZSAnZ2V0JHtuYW1lWzBdLnRvTG9jYWxlVXBwZXJDYXNlKCl9JHtuYW1lLnNsaWNlKFxuICAgICAgMVxuICAgICl9JyBpbnN0ZWFkLmBcbiAgKTtcbn1cbmZ1bmN0aW9uIHdhcm5PbmNlKG1lc3NhZ2UpIHtcbiAgaWYgKHVzZWRXYXJuaW5ncy5oYXMobWVzc2FnZSkpIHJldHVybjtcbiAgdXNlZFdhcm5pbmdzLmFkZChtZXNzYWdlKTtcbiAgY29uc29sZS53YXJuKGBbdGxkcmF3XSAke21lc3NhZ2V9YCk7XG59XG5leHBvcnQge1xuICB3YXJuRGVwcmVjYXRlZEdldHRlcixcbiAgd2Fybk9uY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXJuLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warn.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/validate/dist-esm/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayOfValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.ArrayOfValidator),\n/* harmony export */   DictValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.DictValidator),\n/* harmony export */   ObjectValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.ObjectValidator),\n/* harmony export */   T: () => (/* reexport module object */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__),\n/* harmony export */   UnionValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.UnionValidator),\n/* harmony export */   Validator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__.Validator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/validation.mjs */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs\");\n\n\n\n(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.registerTldrawLibraryVersion)(\n  \"@tldraw/validate\",\n  \"3.3.1\",\n  \"esm\"\n);\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNkQ7QUFDbkI7QUFPWjtBQUM5QiwyRUFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFRRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGx1dG8tbGVhcm5pbmcvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9pbmRleC5tanM/NWNmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCAqIGFzIFQgZnJvbSBcIi4vbGliL3ZhbGlkYXRpb24ubWpzXCI7XG5pbXBvcnQge1xuICBBcnJheU9mVmFsaWRhdG9yLFxuICBEaWN0VmFsaWRhdG9yLFxuICBPYmplY3RWYWxpZGF0b3IsXG4gIFVuaW9uVmFsaWRhdG9yLFxuICBWYWxpZGF0b3Jcbn0gZnJvbSBcIi4vbGliL3ZhbGlkYXRpb24ubWpzXCI7XG5yZWdpc3RlclRsZHJhd0xpYnJhcnlWZXJzaW9uKFxuICBcIkB0bGRyYXcvdmFsaWRhdGVcIixcbiAgXCIzLjMuMVwiLFxuICBcImVzbVwiXG4pO1xuZXhwb3J0IHtcbiAgQXJyYXlPZlZhbGlkYXRvcixcbiAgRGljdFZhbGlkYXRvcixcbiAgT2JqZWN0VmFsaWRhdG9yLFxuICBULFxuICBVbmlvblZhbGlkYXRvcixcbiAgVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayOfValidator: () => (/* binding */ ArrayOfValidator),\n/* harmony export */   DictValidator: () => (/* binding */ DictValidator),\n/* harmony export */   ObjectValidator: () => (/* binding */ ObjectValidator),\n/* harmony export */   UnionValidator: () => (/* binding */ UnionValidator),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   Validator: () => (/* binding */ Validator),\n/* harmony export */   any: () => (/* binding */ any),\n/* harmony export */   array: () => (/* binding */ array),\n/* harmony export */   arrayOf: () => (/* binding */ arrayOf),\n/* harmony export */   bigint: () => (/* binding */ bigint),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   dict: () => (/* binding */ dict),\n/* harmony export */   httpUrl: () => (/* binding */ httpUrl),\n/* harmony export */   indexKey: () => (/* binding */ indexKey),\n/* harmony export */   integer: () => (/* binding */ integer),\n/* harmony export */   jsonDict: () => (/* binding */ jsonDict),\n/* harmony export */   jsonValue: () => (/* binding */ jsonValue),\n/* harmony export */   linkUrl: () => (/* binding */ linkUrl),\n/* harmony export */   literal: () => (/* binding */ literal),\n/* harmony export */   literalEnum: () => (/* binding */ literalEnum),\n/* harmony export */   model: () => (/* binding */ model),\n/* harmony export */   nonZeroInteger: () => (/* binding */ nonZeroInteger),\n/* harmony export */   nonZeroNumber: () => (/* binding */ nonZeroNumber),\n/* harmony export */   nullable: () => (/* binding */ nullable),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   numberUnion: () => (/* binding */ numberUnion),\n/* harmony export */   object: () => (/* binding */ object),\n/* harmony export */   optional: () => (/* binding */ optional),\n/* harmony export */   or: () => (/* binding */ or),\n/* harmony export */   positiveInteger: () => (/* binding */ positiveInteger),\n/* harmony export */   positiveNumber: () => (/* binding */ positiveNumber),\n/* harmony export */   setEnum: () => (/* binding */ setEnum),\n/* harmony export */   srcUrl: () => (/* binding */ srcUrl),\n/* harmony export */   string: () => (/* binding */ string),\n/* harmony export */   union: () => (/* binding */ union),\n/* harmony export */   unknown: () => (/* binding */ unknown),\n/* harmony export */   unknownObject: () => (/* binding */ unknownObject)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction formatPath(path) {\n  if (!path.length) {\n    return null;\n  }\n  let formattedPath = \"\";\n  for (const item of path) {\n    if (typeof item === \"number\") {\n      formattedPath += `.${item}`;\n    } else if (item.startsWith(\"(\")) {\n      if (formattedPath.endsWith(\")\")) {\n        formattedPath = `${formattedPath.slice(0, -1)}, ${item.slice(1)}`;\n      } else {\n        formattedPath += item;\n      }\n    } else {\n      formattedPath += `.${item}`;\n    }\n  }\n  formattedPath = formattedPath.replace(/id = [^,]+, /, \"\").replace(/id = [^)]+/, \"\");\n  if (formattedPath.startsWith(\".\")) {\n    return formattedPath.slice(1);\n  }\n  return formattedPath;\n}\nclass ValidationError extends Error {\n  constructor(rawMessage, path = []) {\n    const formattedPath = formatPath(path);\n    const indentedMessage = rawMessage.split(\"\\n\").map((line, i) => i === 0 ? line : `  ${line}`).join(\"\\n\");\n    super(path ? `At ${formattedPath}: ${indentedMessage}` : indentedMessage);\n    this.rawMessage = rawMessage;\n    this.path = path;\n  }\n  name = \"ValidationError\";\n}\nfunction prefixError(path, fn) {\n  try {\n    return fn();\n  } catch (err) {\n    if (err instanceof ValidationError) {\n      throw new ValidationError(err.rawMessage, [path, ...err.path]);\n    }\n    throw new ValidationError(err.toString(), [path]);\n  }\n}\nfunction typeToString(value) {\n  if (value === null) return \"null\";\n  if (Array.isArray(value)) return \"an array\";\n  const type = typeof value;\n  switch (type) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"function\":\n    case \"number\":\n    case \"string\":\n    case \"symbol\":\n      return `a ${type}`;\n    case \"object\":\n      return `an ${type}`;\n    case \"undefined\":\n      return \"undefined\";\n    default:\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(type);\n  }\n}\nclass Validator {\n  constructor(validationFn, validateUsingKnownGoodVersionFn) {\n    this.validationFn = validationFn;\n    this.validateUsingKnownGoodVersionFn = validateUsingKnownGoodVersionFn;\n  }\n  /**\n   * Asserts that the passed value is of the correct type and returns it. The returned value is\n   * guaranteed to be referentially equal to the passed value.\n   */\n  validate(value) {\n    const validated = this.validationFn(value);\n    if ( true && !Object.is(value, validated)) {\n      throw new ValidationError(\"Validator functions must return the same value they were passed\");\n    }\n    return validated;\n  }\n  validateUsingKnownGoodVersion(knownGoodValue, newValue) {\n    if (Object.is(knownGoodValue, newValue)) {\n      return knownGoodValue;\n    }\n    if (this.validateUsingKnownGoodVersionFn) {\n      return this.validateUsingKnownGoodVersionFn(knownGoodValue, newValue);\n    }\n    return this.validate(newValue);\n  }\n  /** Checks that the passed value is of the correct type. */\n  isValid(value) {\n    try {\n      this.validate(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Returns a new validator that also accepts null or undefined. The resulting value will always be\n   * null.\n   */\n  nullable() {\n    return nullable(this);\n  }\n  /**\n   * Returns a new validator that also accepts null or undefined. The resulting value will always be\n   * null.\n   */\n  optional() {\n    return optional(this);\n  }\n  /**\n   * Refine this validation to a new type. The passed-in validation function should throw an error\n   * if the value can't be converted to the new type, or return the new type otherwise.\n   */\n  refine(otherValidationFn) {\n    return new Validator(\n      (value) => {\n        return otherValidationFn(this.validate(value));\n      },\n      (knownGoodValue, newValue) => {\n        const validated = this.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n        if (Object.is(knownGoodValue, validated)) {\n          return knownGoodValue;\n        }\n        return otherValidationFn(validated);\n      }\n    );\n  }\n  check(nameOrCheckFn, checkFn) {\n    if (typeof nameOrCheckFn === \"string\") {\n      return this.refine((value) => {\n        prefixError(`(check ${nameOrCheckFn})`, () => checkFn(value));\n        return value;\n      });\n    } else {\n      return this.refine((value) => {\n        nameOrCheckFn(value);\n        return value;\n      });\n    }\n  }\n}\nclass ArrayOfValidator extends Validator {\n  constructor(itemValidator) {\n    super(\n      (value) => {\n        const arr = array.validate(value);\n        for (let i = 0; i < arr.length; i++) {\n          prefixError(i, () => itemValidator.validate(arr[i]));\n        }\n        return arr;\n      },\n      (knownGoodValue, newValue) => {\n        if (!itemValidator.validateUsingKnownGoodVersion) return this.validate(newValue);\n        const arr = array.validate(newValue);\n        let isDifferent = knownGoodValue.length !== arr.length;\n        for (let i = 0; i < arr.length; i++) {\n          const item = arr[i];\n          if (i >= knownGoodValue.length) {\n            isDifferent = true;\n            prefixError(i, () => itemValidator.validate(item));\n            continue;\n          }\n          if (Object.is(knownGoodValue[i], item)) {\n            continue;\n          }\n          const checkedItem = prefixError(\n            i,\n            () => itemValidator.validateUsingKnownGoodVersion(knownGoodValue[i], item)\n          );\n          if (!Object.is(checkedItem, knownGoodValue[i])) {\n            isDifferent = true;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.itemValidator = itemValidator;\n  }\n  nonEmpty() {\n    return this.check((value) => {\n      if (value.length === 0) {\n        throw new ValidationError(\"Expected a non-empty array\");\n      }\n    });\n  }\n  lengthGreaterThan1() {\n    return this.check((value) => {\n      if (value.length <= 1) {\n        throw new ValidationError(\"Expected an array with length greater than 1\");\n      }\n    });\n  }\n}\nclass ObjectValidator extends Validator {\n  constructor(config, shouldAllowUnknownProperties = false) {\n    super(\n      (object2) => {\n        if (typeof object2 !== \"object\" || object2 === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(object2)}`);\n        }\n        for (const [key, validator] of Object.entries(config)) {\n          prefixError(key, () => {\n            ;\n            validator.validate((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(object2, key));\n          });\n        }\n        if (!shouldAllowUnknownProperties) {\n          for (const key of Object.keys(object2)) {\n            if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(config, key)) {\n              throw new ValidationError(`Unexpected property`, [key]);\n            }\n          }\n        }\n        return object2;\n      },\n      (knownGoodValue, newValue) => {\n        if (typeof newValue !== \"object\" || newValue === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(newValue)}`);\n        }\n        let isDifferent = false;\n        for (const [key, validator] of Object.entries(config)) {\n          const prev = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(knownGoodValue, key);\n          const next = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(newValue, key);\n          if (Object.is(prev, next)) {\n            continue;\n          }\n          const checked = prefixError(key, () => {\n            const validatable = validator;\n            if (validatable.validateUsingKnownGoodVersion) {\n              return validatable.validateUsingKnownGoodVersion(prev, next);\n            } else {\n              return validatable.validate(next);\n            }\n          });\n          if (!Object.is(checked, prev)) {\n            isDifferent = true;\n          }\n        }\n        if (!shouldAllowUnknownProperties) {\n          for (const key of Object.keys(newValue)) {\n            if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(config, key)) {\n              throw new ValidationError(`Unexpected property`, [key]);\n            }\n          }\n        }\n        for (const key of Object.keys(knownGoodValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n            isDifferent = true;\n            break;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.config = config;\n    this.shouldAllowUnknownProperties = shouldAllowUnknownProperties;\n  }\n  allowUnknownProperties() {\n    return new ObjectValidator(this.config, true);\n  }\n  /**\n   * Extend an object validator by adding additional properties.\n   *\n   * @example\n   *\n   * ```ts\n   * const animalValidator = T.object({\n   * \tname: T.string,\n   * })\n   * const catValidator = animalValidator.extend({\n   * \tmeowVolume: T.number,\n   * })\n   * ```\n   */\n  extend(extension) {\n    return new ObjectValidator({ ...this.config, ...extension });\n  }\n}\nclass UnionValidator extends Validator {\n  constructor(key, config, unknownValueValidation, useNumberKeys) {\n    super(\n      (input) => {\n        this.expectObject(input);\n        const { matchingSchema, variant } = this.getMatchingSchemaAndVariant(input);\n        if (matchingSchema === void 0) {\n          return this.unknownValueValidation(input, variant);\n        }\n        return prefixError(`(${key} = ${variant})`, () => matchingSchema.validate(input));\n      },\n      (prevValue, newValue) => {\n        this.expectObject(newValue);\n        this.expectObject(prevValue);\n        const { matchingSchema, variant } = this.getMatchingSchemaAndVariant(newValue);\n        if (matchingSchema === void 0) {\n          return this.unknownValueValidation(newValue, variant);\n        }\n        if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(prevValue, key) !== (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(newValue, key)) {\n          return prefixError(`(${key} = ${variant})`, () => matchingSchema.validate(newValue));\n        }\n        return prefixError(`(${key} = ${variant})`, () => {\n          if (matchingSchema.validateUsingKnownGoodVersion) {\n            return matchingSchema.validateUsingKnownGoodVersion(prevValue, newValue);\n          } else {\n            return matchingSchema.validate(newValue);\n          }\n        });\n      }\n    );\n    this.key = key;\n    this.config = config;\n    this.unknownValueValidation = unknownValueValidation;\n    this.useNumberKeys = useNumberKeys;\n  }\n  expectObject(value) {\n    if (typeof value !== \"object\" || value === null) {\n      throw new ValidationError(`Expected an object, got ${typeToString(value)}`, []);\n    }\n  }\n  getMatchingSchemaAndVariant(object2) {\n    const variant = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(object2, this.key);\n    if (!this.useNumberKeys && typeof variant !== \"string\") {\n      throw new ValidationError(\n        `Expected a string for key \"${this.key}\", got ${typeToString(variant)}`\n      );\n    } else if (this.useNumberKeys && !Number.isFinite(Number(variant))) {\n      throw new ValidationError(`Expected a number for key \"${this.key}\", got \"${variant}\"`);\n    }\n    const matchingSchema = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(this.config, variant) ? this.config[variant] : void 0;\n    return { matchingSchema, variant };\n  }\n  validateUnknownVariants(unknownValueValidation) {\n    return new UnionValidator(this.key, this.config, unknownValueValidation, this.useNumberKeys);\n  }\n}\nclass DictValidator extends Validator {\n  constructor(keyValidator, valueValidator) {\n    super(\n      (object2) => {\n        if (typeof object2 !== \"object\" || object2 === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(object2)}`);\n        }\n        for (const [key, value] of Object.entries(object2)) {\n          prefixError(key, () => {\n            keyValidator.validate(key);\n            valueValidator.validate(value);\n          });\n        }\n        return object2;\n      },\n      (knownGoodValue, newValue) => {\n        if (typeof newValue !== \"object\" || newValue === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(newValue)}`);\n        }\n        let isDifferent = false;\n        for (const [key, value] of Object.entries(newValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(knownGoodValue, key)) {\n            isDifferent = true;\n            prefixError(key, () => {\n              keyValidator.validate(key);\n              valueValidator.validate(value);\n            });\n            continue;\n          }\n          const prev = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(knownGoodValue, key);\n          const next = value;\n          if (Object.is(prev, next)) {\n            continue;\n          }\n          const checked = prefixError(key, () => {\n            if (valueValidator.validateUsingKnownGoodVersion) {\n              return valueValidator.validateUsingKnownGoodVersion(prev, next);\n            } else {\n              return valueValidator.validate(next);\n            }\n          });\n          if (!Object.is(checked, prev)) {\n            isDifferent = true;\n          }\n        }\n        for (const key of Object.keys(knownGoodValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n            isDifferent = true;\n            break;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.keyValidator = keyValidator;\n    this.valueValidator = valueValidator;\n  }\n}\nfunction typeofValidator(type) {\n  return new Validator((value) => {\n    if (typeof value !== type) {\n      throw new ValidationError(`Expected ${type}, got ${typeToString(value)}`);\n    }\n    return value;\n  });\n}\nconst unknown = new Validator((value) => value);\nconst any = new Validator((value) => value);\nconst string = typeofValidator(\"string\");\nconst number = typeofValidator(\"number\").check((number2) => {\n  if (Number.isNaN(number2)) {\n    throw new ValidationError(\"Expected a number, got NaN\");\n  }\n  if (!Number.isFinite(number2)) {\n    throw new ValidationError(`Expected a finite number, got ${number2}`);\n  }\n});\nconst positiveNumber = number.check((value) => {\n  if (value < 0) throw new ValidationError(`Expected a positive number, got ${value}`);\n});\nconst nonZeroNumber = number.check((value) => {\n  if (value <= 0) throw new ValidationError(`Expected a non-zero positive number, got ${value}`);\n});\nconst integer = number.check((value) => {\n  if (!Number.isInteger(value)) throw new ValidationError(`Expected an integer, got ${value}`);\n});\nconst positiveInteger = integer.check((value) => {\n  if (value < 0) throw new ValidationError(`Expected a positive integer, got ${value}`);\n});\nconst nonZeroInteger = integer.check((value) => {\n  if (value <= 0) throw new ValidationError(`Expected a non-zero positive integer, got ${value}`);\n});\nconst boolean = typeofValidator(\"boolean\");\nconst bigint = typeofValidator(\"bigint\");\nfunction literal(expectedValue) {\n  return new Validator((actualValue) => {\n    if (actualValue !== expectedValue) {\n      throw new ValidationError(`Expected ${expectedValue}, got ${JSON.stringify(actualValue)}`);\n    }\n    return expectedValue;\n  });\n}\nconst array = new Validator((value) => {\n  if (!Array.isArray(value)) {\n    throw new ValidationError(`Expected an array, got ${typeToString(value)}`);\n  }\n  return value;\n});\nfunction arrayOf(itemValidator) {\n  return new ArrayOfValidator(itemValidator);\n}\nconst unknownObject = new Validator((value) => {\n  if (typeof value !== \"object\" || value === null) {\n    throw new ValidationError(`Expected object, got ${typeToString(value)}`);\n  }\n  return value;\n});\nfunction object(config) {\n  return new ObjectValidator(config);\n}\nfunction isPlainObject(value) {\n  return typeof value === \"object\" && value !== null && (Object.getPrototypeOf(value) === Object.prototype || Object.getPrototypeOf(value) === null || Object.getPrototypeOf(value) === _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.STRUCTURED_CLONE_OBJECT_PROTOTYPE);\n}\nfunction isValidJson(value) {\n  if (value === null || typeof value === \"number\" || typeof value === \"string\" || typeof value === \"boolean\") {\n    return true;\n  }\n  if (Array.isArray(value)) {\n    return value.every(isValidJson);\n  }\n  if (isPlainObject(value)) {\n    return Object.values(value).every(isValidJson);\n  }\n  return false;\n}\nconst jsonValue = new Validator(\n  (value) => {\n    if (isValidJson(value)) {\n      return value;\n    }\n    throw new ValidationError(`Expected json serializable value, got ${typeof value}`);\n  },\n  (knownGoodValue, newValue) => {\n    if (Array.isArray(knownGoodValue) && Array.isArray(newValue)) {\n      let isDifferent = knownGoodValue.length !== newValue.length;\n      for (let i = 0; i < newValue.length; i++) {\n        if (i >= knownGoodValue.length) {\n          isDifferent = true;\n          jsonValue.validate(newValue[i]);\n          continue;\n        }\n        const prev = knownGoodValue[i];\n        const next = newValue[i];\n        if (Object.is(prev, next)) {\n          continue;\n        }\n        const checked = jsonValue.validateUsingKnownGoodVersion(prev, next);\n        if (!Object.is(checked, prev)) {\n          isDifferent = true;\n        }\n      }\n      return isDifferent ? newValue : knownGoodValue;\n    } else if (isPlainObject(knownGoodValue) && isPlainObject(newValue)) {\n      let isDifferent = false;\n      for (const key of Object.keys(newValue)) {\n        if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(knownGoodValue, key)) {\n          isDifferent = true;\n          jsonValue.validate(newValue[key]);\n          continue;\n        }\n        const prev = knownGoodValue[key];\n        const next = newValue[key];\n        if (Object.is(prev, next)) {\n          continue;\n        }\n        const checked = jsonValue.validateUsingKnownGoodVersion(prev, next);\n        if (!Object.is(checked, prev)) {\n          isDifferent = true;\n        }\n      }\n      for (const key of Object.keys(knownGoodValue)) {\n        if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n          isDifferent = true;\n          break;\n        }\n      }\n      return isDifferent ? newValue : knownGoodValue;\n    } else {\n      return jsonValue.validate(newValue);\n    }\n  }\n);\nfunction jsonDict() {\n  return dict(string, jsonValue);\n}\nfunction dict(keyValidator, valueValidator) {\n  return new DictValidator(keyValidator, valueValidator);\n}\nfunction union(key, config) {\n  return new UnionValidator(\n    key,\n    config,\n    (_unknownValue, unknownVariant) => {\n      throw new ValidationError(\n        `Expected one of ${Object.keys(config).map((key2) => JSON.stringify(key2)).join(\" or \")}, got ${JSON.stringify(unknownVariant)}`,\n        [key]\n      );\n    },\n    false\n  );\n}\nfunction numberUnion(key, config) {\n  return new UnionValidator(\n    key,\n    config,\n    (unknownValue, unknownVariant) => {\n      throw new ValidationError(\n        `Expected one of ${Object.keys(config).map((key2) => JSON.stringify(key2)).join(\" or \")}, got ${JSON.stringify(unknownVariant)}`,\n        [key]\n      );\n    },\n    true\n  );\n}\nfunction model(name, validator) {\n  return new Validator(\n    (value) => {\n      return prefixError(name, () => validator.validate(value));\n    },\n    (prevValue, newValue) => {\n      return prefixError(name, () => {\n        if (validator.validateUsingKnownGoodVersion) {\n          return validator.validateUsingKnownGoodVersion(prevValue, newValue);\n        } else {\n          return validator.validate(newValue);\n        }\n      });\n    }\n  );\n}\nfunction setEnum(values) {\n  return new Validator((value) => {\n    if (!values.has(value)) {\n      const valuesString = Array.from(values, (value2) => JSON.stringify(value2)).join(\" or \");\n      throw new ValidationError(`Expected ${valuesString}, got ${value}`);\n    }\n    return value;\n  });\n}\nfunction optional(validator) {\n  return new Validator(\n    (value) => {\n      if (value === void 0) return void 0;\n      return validator.validate(value);\n    },\n    (knownGoodValue, newValue) => {\n      if (knownGoodValue === void 0 && newValue === void 0) return void 0;\n      if (newValue === void 0) return void 0;\n      if (validator.validateUsingKnownGoodVersion && knownGoodValue !== void 0) {\n        return validator.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n      }\n      return validator.validate(newValue);\n    }\n  );\n}\nfunction nullable(validator) {\n  return new Validator(\n    (value) => {\n      if (value === null) return null;\n      return validator.validate(value);\n    },\n    (knownGoodValue, newValue) => {\n      if (newValue === null) return null;\n      if (validator.validateUsingKnownGoodVersion && knownGoodValue !== null) {\n        return validator.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n      }\n      return validator.validate(newValue);\n    }\n  );\n}\nfunction literalEnum(...values) {\n  return setEnum(new Set(values));\n}\nfunction parseUrl(str) {\n  try {\n    return new URL(str);\n  } catch (error) {\n    if (str.startsWith(\"/\") || str.startsWith(\"./\")) {\n      try {\n        return new URL(str, \"http://example.com\");\n      } catch (error2) {\n        throw new ValidationError(`Expected a valid url, got ${JSON.stringify(str)}`);\n      }\n    }\n    throw new ValidationError(`Expected a valid url, got ${JSON.stringify(str)}`);\n  }\n}\nconst validLinkProtocols = /* @__PURE__ */ new Set([\"http:\", \"https:\", \"mailto:\"]);\nconst linkUrl = string.check((value) => {\n  if (value === \"\") return;\n  const url = parseUrl(value);\n  if (!validLinkProtocols.has(url.protocol.toLowerCase())) {\n    throw new ValidationError(\n      `Expected a valid url, got ${JSON.stringify(value)} (invalid protocol)`\n    );\n  }\n});\nconst validSrcProtocols = /* @__PURE__ */ new Set([\"http:\", \"https:\", \"data:\", \"asset:\"]);\nconst srcUrl = string.check((value) => {\n  if (value === \"\") return;\n  const url = parseUrl(value);\n  if (!validSrcProtocols.has(url.protocol.toLowerCase())) {\n    throw new ValidationError(\n      `Expected a valid url, got ${JSON.stringify(value)} (invalid protocol)`\n    );\n  }\n});\nconst httpUrl = string.check((value) => {\n  if (value === \"\") return;\n  const url = parseUrl(value);\n  if (!url.protocol.toLowerCase().match(/^https?:$/)) {\n    throw new ValidationError(\n      `Expected a valid url, got ${JSON.stringify(value)} (invalid protocol)`\n    );\n  }\n});\nconst indexKey = string.refine((key) => {\n  try {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.validateIndexKey)(key);\n    return key;\n  } catch {\n    throw new ValidationError(`Expected an index key, got ${JSON.stringify(key)}`);\n  }\n});\nfunction or(v1, v2) {\n  return new Validator((value) => {\n    try {\n      return v1.validate(value);\n    } catch {\n      return v2.validate(value);\n    }\n  });\n}\n\n//# sourceMappingURL=validation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9saWIvdmFsaWRhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsS0FBSztBQUNoQyxNQUFNO0FBQ047QUFDQSwyQkFBMkIsMkJBQTJCLElBQUksY0FBYztBQUN4RSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTiwyQkFBMkIsS0FBSztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEZBQTBGLEtBQUs7QUFDL0YsdUJBQXVCLGNBQWMsSUFBSSxnQkFBZ0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQSxtQkFBbUIsS0FBSztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9FQUFxQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixjQUFjO0FBQzVDO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHNCQUFzQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw2REFBYztBQUM3QyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZEQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLDREQUE0RCx1QkFBdUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDZEQUFjO0FBQ3JDLHVCQUF1Qiw2REFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2REFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsOEJBQThCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBCQUEwQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSyxJQUFJLFFBQVE7QUFDaEQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQkFBMEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2REFBYyxxQkFBcUIsNkRBQWM7QUFDN0QsaUNBQWlDLEtBQUssSUFBSSxRQUFRO0FBQ2xEO0FBQ0EsK0JBQStCLEtBQUssSUFBSSxRQUFRO0FBQ2hEO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsb0JBQW9CO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBYztBQUNsQztBQUNBO0FBQ0Esc0NBQXNDLFNBQVMsU0FBUyxzQkFBc0I7QUFDOUU7QUFDQSxNQUFNO0FBQ04sOERBQThELFNBQVMsVUFBVSxRQUFRO0FBQ3pGO0FBQ0EsMkJBQTJCLDZEQUFjO0FBQ3pDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxzQkFBc0I7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSw0REFBNEQsdUJBQXVCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkRBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHVCQUF1Qiw2REFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZEQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsS0FBSyxRQUFRLG9CQUFvQjtBQUM3RTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsOEVBQThFLE1BQU07QUFDcEYsQ0FBQztBQUNEO0FBQ0Esd0ZBQXdGLE1BQU07QUFDOUYsQ0FBQztBQUNEO0FBQ0Esc0ZBQXNGLE1BQU07QUFDNUYsQ0FBQztBQUNEO0FBQ0EsK0VBQStFLE1BQU07QUFDckYsQ0FBQztBQUNEO0FBQ0EseUZBQXlGLE1BQU07QUFDL0YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsY0FBYyxRQUFRLDRCQUE0QjtBQUM5RjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxvQkFBb0I7QUFDNUU7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELG9CQUFvQjtBQUMxRTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0xBQXdMLDRFQUFpQztBQUN6TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsYUFBYTtBQUNwRixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHFCQUFxQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsYUFBYSw2REFBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDZEQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUVBQXFFLFFBQVEsK0JBQStCO0FBQ3ZJO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFFQUFxRSxRQUFRLCtCQUErQjtBQUN2STtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsYUFBYSxRQUFRLE1BQU07QUFDdkU7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsK0RBQStELG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0EsMkRBQTJELG9CQUFvQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHVCQUF1QjtBQUMxRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1QkFBdUI7QUFDMUQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHVCQUF1QjtBQUMxRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxJQUFJLCtEQUFnQjtBQUNwQjtBQUNBLElBQUk7QUFDSiw0REFBNEQsb0JBQW9CO0FBQ2hGO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUF1Q0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsdXRvLWxlYXJuaW5nLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdmFsaWRhdGUvZGlzdC1lc20vbGliL3ZhbGlkYXRpb24ubWpzP2Q4MzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgU1RSVUNUVVJFRF9DTE9ORV9PQkpFQ1RfUFJPVE9UWVBFLFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIGdldE93blByb3BlcnR5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgdmFsaWRhdGVJbmRleEtleVxufSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoKSB7XG4gIGlmICghcGF0aC5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgZm9ybWF0dGVkUGF0aCA9IFwiXCI7XG4gIGZvciAoY29uc3QgaXRlbSBvZiBwYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICBmb3JtYXR0ZWRQYXRoICs9IGAuJHtpdGVtfWA7XG4gICAgfSBlbHNlIGlmIChpdGVtLnN0YXJ0c1dpdGgoXCIoXCIpKSB7XG4gICAgICBpZiAoZm9ybWF0dGVkUGF0aC5lbmRzV2l0aChcIilcIikpIHtcbiAgICAgICAgZm9ybWF0dGVkUGF0aCA9IGAke2Zvcm1hdHRlZFBhdGguc2xpY2UoMCwgLTEpfSwgJHtpdGVtLnNsaWNlKDEpfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JtYXR0ZWRQYXRoICs9IGl0ZW07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1hdHRlZFBhdGggKz0gYC4ke2l0ZW19YDtcbiAgICB9XG4gIH1cbiAgZm9ybWF0dGVkUGF0aCA9IGZvcm1hdHRlZFBhdGgucmVwbGFjZSgvaWQgPSBbXixdKywgLywgXCJcIikucmVwbGFjZSgvaWQgPSBbXildKy8sIFwiXCIpO1xuICBpZiAoZm9ybWF0dGVkUGF0aC5zdGFydHNXaXRoKFwiLlwiKSkge1xuICAgIHJldHVybiBmb3JtYXR0ZWRQYXRoLnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBmb3JtYXR0ZWRQYXRoO1xufVxuY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyYXdNZXNzYWdlLCBwYXRoID0gW10pIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRQYXRoID0gZm9ybWF0UGF0aChwYXRoKTtcbiAgICBjb25zdCBpbmRlbnRlZE1lc3NhZ2UgPSByYXdNZXNzYWdlLnNwbGl0KFwiXFxuXCIpLm1hcCgobGluZSwgaSkgPT4gaSA9PT0gMCA/IGxpbmUgOiBgICAke2xpbmV9YCkuam9pbihcIlxcblwiKTtcbiAgICBzdXBlcihwYXRoID8gYEF0ICR7Zm9ybWF0dGVkUGF0aH06ICR7aW5kZW50ZWRNZXNzYWdlfWAgOiBpbmRlbnRlZE1lc3NhZ2UpO1xuICAgIHRoaXMucmF3TWVzc2FnZSA9IHJhd01lc3NhZ2U7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgfVxuICBuYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjtcbn1cbmZ1bmN0aW9uIHByZWZpeEVycm9yKHBhdGgsIGZuKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoZXJyLnJhd01lc3NhZ2UsIFtwYXRoLCAuLi5lcnIucGF0aF0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGVyci50b1N0cmluZygpLCBbcGF0aF0pO1xuICB9XG59XG5mdW5jdGlvbiB0eXBlVG9TdHJpbmcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gXCJudWxsXCI7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImJpZ2ludFwiOlxuICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgY2FzZSBcIm51bWJlclwiOlxuICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICByZXR1cm4gYGEgJHt0eXBlfWA7XG4gICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgcmV0dXJuIGBhbiAke3R5cGV9YDtcbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKHR5cGUpO1xuICB9XG59XG5jbGFzcyBWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uRm4sIHZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4pIHtcbiAgICB0aGlzLnZhbGlkYXRpb25GbiA9IHZhbGlkYXRpb25GbjtcbiAgICB0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4gPSB2YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbkZuO1xuICB9XG4gIC8qKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHBhc3NlZCB2YWx1ZSBpcyBvZiB0aGUgY29ycmVjdCB0eXBlIGFuZCByZXR1cm5zIGl0LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXNcbiAgICogZ3VhcmFudGVlZCB0byBiZSByZWZlcmVudGlhbGx5IGVxdWFsIHRvIHRoZSBwYXNzZWQgdmFsdWUuXG4gICAqL1xuICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgIGNvbnN0IHZhbGlkYXRlZCA9IHRoaXMudmFsaWRhdGlvbkZuKHZhbHVlKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmICFPYmplY3QuaXModmFsdWUsIHZhbGlkYXRlZCkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJWYWxpZGF0b3IgZnVuY3Rpb25zIG11c3QgcmV0dXJuIHRoZSBzYW1lIHZhbHVlIHRoZXkgd2VyZSBwYXNzZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZWQ7XG4gIH1cbiAgdmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgaWYgKE9iamVjdC5pcyhrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpKSB7XG4gICAgICByZXR1cm4ga25vd25Hb29kVmFsdWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4pIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdGUobmV3VmFsdWUpO1xuICB9XG4gIC8qKiBDaGVja3MgdGhhdCB0aGUgcGFzc2VkIHZhbHVlIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuICovXG4gIGlzVmFsaWQodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgdmFsaWRhdG9yIHRoYXQgYWxzbyBhY2NlcHRzIG51bGwgb3IgdW5kZWZpbmVkLiBUaGUgcmVzdWx0aW5nIHZhbHVlIHdpbGwgYWx3YXlzIGJlXG4gICAqIG51bGwuXG4gICAqL1xuICBudWxsYWJsZSgpIHtcbiAgICByZXR1cm4gbnVsbGFibGUodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgdmFsaWRhdG9yIHRoYXQgYWxzbyBhY2NlcHRzIG51bGwgb3IgdW5kZWZpbmVkLiBUaGUgcmVzdWx0aW5nIHZhbHVlIHdpbGwgYWx3YXlzIGJlXG4gICAqIG51bGwuXG4gICAqL1xuICBvcHRpb25hbCgpIHtcbiAgICByZXR1cm4gb3B0aW9uYWwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJlZmluZSB0aGlzIHZhbGlkYXRpb24gdG8gYSBuZXcgdHlwZS4gVGhlIHBhc3NlZC1pbiB2YWxpZGF0aW9uIGZ1bmN0aW9uIHNob3VsZCB0aHJvdyBhbiBlcnJvclxuICAgKiBpZiB0aGUgdmFsdWUgY2FuJ3QgYmUgY29udmVydGVkIHRvIHRoZSBuZXcgdHlwZSwgb3IgcmV0dXJuIHRoZSBuZXcgdHlwZSBvdGhlcndpc2UuXG4gICAqL1xuICByZWZpbmUob3RoZXJWYWxpZGF0aW9uRm4pIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRvcihcbiAgICAgICh2YWx1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gb3RoZXJWYWxpZGF0aW9uRm4odGhpcy52YWxpZGF0ZSh2YWx1ZSkpO1xuICAgICAgfSxcbiAgICAgIChrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkID0gdGhpcy52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKGtub3duR29vZFZhbHVlLCB2YWxpZGF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuIGtub3duR29vZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdGhlclZhbGlkYXRpb25Gbih2YWxpZGF0ZWQpO1xuICAgICAgfVxuICAgICk7XG4gIH1cbiAgY2hlY2sobmFtZU9yQ2hlY2tGbiwgY2hlY2tGbikge1xuICAgIGlmICh0eXBlb2YgbmFtZU9yQ2hlY2tGbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVmaW5lKCh2YWx1ZSkgPT4ge1xuICAgICAgICBwcmVmaXhFcnJvcihgKGNoZWNrICR7bmFtZU9yQ2hlY2tGbn0pYCwgKCkgPT4gY2hlY2tGbih2YWx1ZSkpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVmaW5lKCh2YWx1ZSkgPT4ge1xuICAgICAgICBuYW1lT3JDaGVja0ZuKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5jbGFzcyBBcnJheU9mVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoaXRlbVZhbGlkYXRvcikge1xuICAgIHN1cGVyKFxuICAgICAgKHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGFyciA9IGFycmF5LnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBwcmVmaXhFcnJvcihpLCAoKSA9PiBpdGVtVmFsaWRhdG9yLnZhbGlkYXRlKGFycltpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9LFxuICAgICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIWl0ZW1WYWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24pIHJldHVybiB0aGlzLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgY29uc3QgYXJyID0gYXJyYXkudmFsaWRhdGUobmV3VmFsdWUpO1xuICAgICAgICBsZXQgaXNEaWZmZXJlbnQgPSBrbm93bkdvb2RWYWx1ZS5sZW5ndGggIT09IGFyci5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGFycltpXTtcbiAgICAgICAgICBpZiAoaSA+PSBrbm93bkdvb2RWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHByZWZpeEVycm9yKGksICgpID0+IGl0ZW1WYWxpZGF0b3IudmFsaWRhdGUoaXRlbSkpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChPYmplY3QuaXMoa25vd25Hb29kVmFsdWVbaV0sIGl0ZW0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY2hlY2tlZEl0ZW0gPSBwcmVmaXhFcnJvcihcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICAoKSA9PiBpdGVtVmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKGtub3duR29vZFZhbHVlW2ldLCBpdGVtKVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZEl0ZW0sIGtub3duR29vZFZhbHVlW2ldKSkge1xuICAgICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNEaWZmZXJlbnQgPyBuZXdWYWx1ZSA6IGtub3duR29vZFZhbHVlO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5pdGVtVmFsaWRhdG9yID0gaXRlbVZhbGlkYXRvcjtcbiAgfVxuICBub25FbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGVjaygodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIkV4cGVjdGVkIGEgbm9uLWVtcHR5IGFycmF5XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGxlbmd0aEdyZWF0ZXJUaGFuMSgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGVjaygodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiRXhwZWN0ZWQgYW4gYXJyYXkgd2l0aCBsZW5ndGggZ3JlYXRlciB0aGFuIDFcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmNsYXNzIE9iamVjdFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgc2hvdWxkQWxsb3dVbmtub3duUHJvcGVydGllcyA9IGZhbHNlKSB7XG4gICAgc3VwZXIoXG4gICAgICAob2JqZWN0MikgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIG9iamVjdDIgIT09IFwib2JqZWN0XCIgfHwgb2JqZWN0MiA9PT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKG9iamVjdDIpfWApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsaWRhdG9yXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcpKSB7XG4gICAgICAgICAgcHJlZml4RXJyb3Ioa2V5LCAoKSA9PiB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICB2YWxpZGF0b3IudmFsaWRhdGUoZ2V0T3duUHJvcGVydHkob2JqZWN0Miwga2V5KSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaG91bGRBbGxvd1Vua25vd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob2JqZWN0MikpIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkoY29uZmlnLCBrZXkpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFVuZXhwZWN0ZWQgcHJvcGVydHlgLCBba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3QyO1xuICAgICAgfSxcbiAgICAgIChrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSAhPT0gXCJvYmplY3RcIiB8fCBuZXdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKG5ld1ZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxpZGF0b3JdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpZykpIHtcbiAgICAgICAgICBjb25zdCBwcmV2ID0gZ2V0T3duUHJvcGVydHkoa25vd25Hb29kVmFsdWUsIGtleSk7XG4gICAgICAgICAgY29uc3QgbmV4dCA9IGdldE93blByb3BlcnR5KG5ld1ZhbHVlLCBrZXkpO1xuICAgICAgICAgIGlmIChPYmplY3QuaXMocHJldiwgbmV4dCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjaGVja2VkID0gcHJlZml4RXJyb3Ioa2V5LCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0YWJsZSA9IHZhbGlkYXRvcjtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0YWJsZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGFibGUudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24ocHJldiwgbmV4dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGFibGUudmFsaWRhdGUobmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaG91bGRBbGxvd1Vua25vd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KGNvbmZpZywga2V5KSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBVbmV4cGVjdGVkIHByb3BlcnR5YCwgW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhrbm93bkdvb2RWYWx1ZSkpIHtcbiAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzRGlmZmVyZW50ID8gbmV3VmFsdWUgOiBrbm93bkdvb2RWYWx1ZTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc2hvdWxkQWxsb3dVbmtub3duUHJvcGVydGllcyA9IHNob3VsZEFsbG93VW5rbm93blByb3BlcnRpZXM7XG4gIH1cbiAgYWxsb3dVbmtub3duUHJvcGVydGllcygpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFZhbGlkYXRvcih0aGlzLmNvbmZpZywgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEV4dGVuZCBhbiBvYmplY3QgdmFsaWRhdG9yIGJ5IGFkZGluZyBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGFuaW1hbFZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgICogXHRuYW1lOiBULnN0cmluZyxcbiAgICogfSlcbiAgICogY29uc3QgY2F0VmFsaWRhdG9yID0gYW5pbWFsVmFsaWRhdG9yLmV4dGVuZCh7XG4gICAqIFx0bWVvd1ZvbHVtZTogVC5udW1iZXIsXG4gICAqIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgZXh0ZW5kKGV4dGVuc2lvbikge1xuICAgIHJldHVybiBuZXcgT2JqZWN0VmFsaWRhdG9yKHsgLi4udGhpcy5jb25maWcsIC4uLmV4dGVuc2lvbiB9KTtcbiAgfVxufVxuY2xhc3MgVW5pb25WYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihrZXksIGNvbmZpZywgdW5rbm93blZhbHVlVmFsaWRhdGlvbiwgdXNlTnVtYmVyS2V5cykge1xuICAgIHN1cGVyKFxuICAgICAgKGlucHV0KSA9PiB7XG4gICAgICAgIHRoaXMuZXhwZWN0T2JqZWN0KGlucHV0KTtcbiAgICAgICAgY29uc3QgeyBtYXRjaGluZ1NjaGVtYSwgdmFyaWFudCB9ID0gdGhpcy5nZXRNYXRjaGluZ1NjaGVtYUFuZFZhcmlhbnQoaW5wdXQpO1xuICAgICAgICBpZiAobWF0Y2hpbmdTY2hlbWEgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnVua25vd25WYWx1ZVZhbGlkYXRpb24oaW5wdXQsIHZhcmlhbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmVmaXhFcnJvcihgKCR7a2V5fSA9ICR7dmFyaWFudH0pYCwgKCkgPT4gbWF0Y2hpbmdTY2hlbWEudmFsaWRhdGUoaW5wdXQpKTtcbiAgICAgIH0sXG4gICAgICAocHJldlZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICB0aGlzLmV4cGVjdE9iamVjdChuZXdWYWx1ZSk7XG4gICAgICAgIHRoaXMuZXhwZWN0T2JqZWN0KHByZXZWYWx1ZSk7XG4gICAgICAgIGNvbnN0IHsgbWF0Y2hpbmdTY2hlbWEsIHZhcmlhbnQgfSA9IHRoaXMuZ2V0TWF0Y2hpbmdTY2hlbWFBbmRWYXJpYW50KG5ld1ZhbHVlKTtcbiAgICAgICAgaWYgKG1hdGNoaW5nU2NoZW1hID09PSB2b2lkIDApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy51bmtub3duVmFsdWVWYWxpZGF0aW9uKG5ld1ZhbHVlLCB2YXJpYW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0T3duUHJvcGVydHkocHJldlZhbHVlLCBrZXkpICE9PSBnZXRPd25Qcm9wZXJ0eShuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgIHJldHVybiBwcmVmaXhFcnJvcihgKCR7a2V5fSA9ICR7dmFyaWFudH0pYCwgKCkgPT4gbWF0Y2hpbmdTY2hlbWEudmFsaWRhdGUobmV3VmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJlZml4RXJyb3IoYCgke2tleX0gPSAke3ZhcmlhbnR9KWAsICgpID0+IHtcbiAgICAgICAgICBpZiAobWF0Y2hpbmdTY2hlbWEudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGluZ1NjaGVtYS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2VmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nU2NoZW1hLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy51bmtub3duVmFsdWVWYWxpZGF0aW9uID0gdW5rbm93blZhbHVlVmFsaWRhdGlvbjtcbiAgICB0aGlzLnVzZU51bWJlcktleXMgPSB1c2VOdW1iZXJLZXlzO1xuICB9XG4gIGV4cGVjdE9iamVjdCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGFuIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKHZhbHVlKX1gLCBbXSk7XG4gICAgfVxuICB9XG4gIGdldE1hdGNoaW5nU2NoZW1hQW5kVmFyaWFudChvYmplY3QyKSB7XG4gICAgY29uc3QgdmFyaWFudCA9IGdldE93blByb3BlcnR5KG9iamVjdDIsIHRoaXMua2V5KTtcbiAgICBpZiAoIXRoaXMudXNlTnVtYmVyS2V5cyAmJiB0eXBlb2YgdmFyaWFudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIGEgc3RyaW5nIGZvciBrZXkgXCIke3RoaXMua2V5fVwiLCBnb3QgJHt0eXBlVG9TdHJpbmcodmFyaWFudCl9YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXNlTnVtYmVyS2V5cyAmJiAhTnVtYmVyLmlzRmluaXRlKE51bWJlcih2YXJpYW50KSkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgbnVtYmVyIGZvciBrZXkgXCIke3RoaXMua2V5fVwiLCBnb3QgXCIke3ZhcmlhbnR9XCJgKTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hpbmdTY2hlbWEgPSBoYXNPd25Qcm9wZXJ0eSh0aGlzLmNvbmZpZywgdmFyaWFudCkgPyB0aGlzLmNvbmZpZ1t2YXJpYW50XSA6IHZvaWQgMDtcbiAgICByZXR1cm4geyBtYXRjaGluZ1NjaGVtYSwgdmFyaWFudCB9O1xuICB9XG4gIHZhbGlkYXRlVW5rbm93blZhcmlhbnRzKHVua25vd25WYWx1ZVZhbGlkYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFVuaW9uVmFsaWRhdG9yKHRoaXMua2V5LCB0aGlzLmNvbmZpZywgdW5rbm93blZhbHVlVmFsaWRhdGlvbiwgdGhpcy51c2VOdW1iZXJLZXlzKTtcbiAgfVxufVxuY2xhc3MgRGljdFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGtleVZhbGlkYXRvciwgdmFsdWVWYWxpZGF0b3IpIHtcbiAgICBzdXBlcihcbiAgICAgIChvYmplY3QyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0MiAhPT0gXCJvYmplY3RcIiB8fCBvYmplY3QyID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgb2JqZWN0LCBnb3QgJHt0eXBlVG9TdHJpbmcob2JqZWN0Mil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMob2JqZWN0MikpIHtcbiAgICAgICAgICBwcmVmaXhFcnJvcihrZXksICgpID0+IHtcbiAgICAgICAgICAgIGtleVZhbGlkYXRvci52YWxpZGF0ZShrZXkpO1xuICAgICAgICAgICAgdmFsdWVWYWxpZGF0b3IudmFsaWRhdGUodmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3QyO1xuICAgICAgfSxcbiAgICAgIChrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSAhPT0gXCJvYmplY3RcIiB8fCBuZXdWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKG5ld1ZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobmV3VmFsdWUpKSB7XG4gICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShrbm93bkdvb2RWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgcHJlZml4RXJyb3Ioa2V5LCAoKSA9PiB7XG4gICAgICAgICAgICAgIGtleVZhbGlkYXRvci52YWxpZGF0ZShrZXkpO1xuICAgICAgICAgICAgICB2YWx1ZVZhbGlkYXRvci52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwcmV2ID0gZ2V0T3duUHJvcGVydHkoa25vd25Hb29kVmFsdWUsIGtleSk7XG4gICAgICAgICAgY29uc3QgbmV4dCA9IHZhbHVlO1xuICAgICAgICAgIGlmIChPYmplY3QuaXMocHJldiwgbmV4dCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjaGVja2VkID0gcHJlZml4RXJyb3Ioa2V5LCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWVWYWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlVmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHByZXYsIG5leHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlVmFsaWRhdG9yLnZhbGlkYXRlKG5leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghT2JqZWN0LmlzKGNoZWNrZWQsIHByZXYpKSB7XG4gICAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGtub3duR29vZFZhbHVlKSkge1xuICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobmV3VmFsdWUsIGtleSkpIHtcbiAgICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNEaWZmZXJlbnQgPyBuZXdWYWx1ZSA6IGtub3duR29vZFZhbHVlO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5rZXlWYWxpZGF0b3IgPSBrZXlWYWxpZGF0b3I7XG4gICAgdGhpcy52YWx1ZVZhbGlkYXRvciA9IHZhbHVlVmFsaWRhdG9yO1xuICB9XG59XG5mdW5jdGlvbiB0eXBlb2ZWYWxpZGF0b3IodHlwZSkge1xuICByZXR1cm4gbmV3IFZhbGlkYXRvcigodmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSB0eXBlKSB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCAke3R5cGV9LCBnb3QgJHt0eXBlVG9TdHJpbmcodmFsdWUpfWApO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0pO1xufVxuY29uc3QgdW5rbm93biA9IG5ldyBWYWxpZGF0b3IoKHZhbHVlKSA9PiB2YWx1ZSk7XG5jb25zdCBhbnkgPSBuZXcgVmFsaWRhdG9yKCh2YWx1ZSkgPT4gdmFsdWUpO1xuY29uc3Qgc3RyaW5nID0gdHlwZW9mVmFsaWRhdG9yKFwic3RyaW5nXCIpO1xuY29uc3QgbnVtYmVyID0gdHlwZW9mVmFsaWRhdG9yKFwibnVtYmVyXCIpLmNoZWNrKChudW1iZXIyKSA9PiB7XG4gIGlmIChOdW1iZXIuaXNOYU4obnVtYmVyMikpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiRXhwZWN0ZWQgYSBudW1iZXIsIGdvdCBOYU5cIik7XG4gIH1cbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobnVtYmVyMikpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhIGZpbml0ZSBudW1iZXIsIGdvdCAke251bWJlcjJ9YCk7XG4gIH1cbn0pO1xuY29uc3QgcG9zaXRpdmVOdW1iZXIgPSBudW1iZXIuY2hlY2soKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA8IDApIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgcG9zaXRpdmUgbnVtYmVyLCBnb3QgJHt2YWx1ZX1gKTtcbn0pO1xuY29uc3Qgbm9uWmVyb051bWJlciA9IG51bWJlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlIDw9IDApIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgbm9uLXplcm8gcG9zaXRpdmUgbnVtYmVyLCBnb3QgJHt2YWx1ZX1gKTtcbn0pO1xuY29uc3QgaW50ZWdlciA9IG51bWJlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYW4gaW50ZWdlciwgZ290ICR7dmFsdWV9YCk7XG59KTtcbmNvbnN0IHBvc2l0aXZlSW50ZWdlciA9IGludGVnZXIuY2hlY2soKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA8IDApIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgcG9zaXRpdmUgaW50ZWdlciwgZ290ICR7dmFsdWV9YCk7XG59KTtcbmNvbnN0IG5vblplcm9JbnRlZ2VyID0gaW50ZWdlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlIDw9IDApIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgbm9uLXplcm8gcG9zaXRpdmUgaW50ZWdlciwgZ290ICR7dmFsdWV9YCk7XG59KTtcbmNvbnN0IGJvb2xlYW4gPSB0eXBlb2ZWYWxpZGF0b3IoXCJib29sZWFuXCIpO1xuY29uc3QgYmlnaW50ID0gdHlwZW9mVmFsaWRhdG9yKFwiYmlnaW50XCIpO1xuZnVuY3Rpb24gbGl0ZXJhbChleHBlY3RlZFZhbHVlKSB7XG4gIHJldHVybiBuZXcgVmFsaWRhdG9yKChhY3R1YWxWYWx1ZSkgPT4ge1xuICAgIGlmIChhY3R1YWxWYWx1ZSAhPT0gZXhwZWN0ZWRWYWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgJHtleHBlY3RlZFZhbHVlfSwgZ290ICR7SlNPTi5zdHJpbmdpZnkoYWN0dWFsVmFsdWUpfWApO1xuICAgIH1cbiAgICByZXR1cm4gZXhwZWN0ZWRWYWx1ZTtcbiAgfSk7XG59XG5jb25zdCBhcnJheSA9IG5ldyBWYWxpZGF0b3IoKHZhbHVlKSA9PiB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhbiBhcnJheSwgZ290ICR7dHlwZVRvU3RyaW5nKHZhbHVlKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59KTtcbmZ1bmN0aW9uIGFycmF5T2YoaXRlbVZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IEFycmF5T2ZWYWxpZGF0b3IoaXRlbVZhbGlkYXRvcik7XG59XG5jb25zdCB1bmtub3duT2JqZWN0ID0gbmV3IFZhbGlkYXRvcigodmFsdWUpID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKHZhbHVlKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59KTtcbmZ1bmN0aW9uIG9iamVjdChjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBPYmplY3RWYWxpZGF0b3IoY29uZmlnKTtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBudWxsIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSkgPT09IFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSnNvbih2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGlzVmFsaWRKc29uKTtcbiAgfVxuICBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh2YWx1ZSkuZXZlcnkoaXNWYWxpZEpzb24pO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmNvbnN0IGpzb25WYWx1ZSA9IG5ldyBWYWxpZGF0b3IoXG4gICh2YWx1ZSkgPT4ge1xuICAgIGlmIChpc1ZhbGlkSnNvbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQganNvbiBzZXJpYWxpemFibGUgdmFsdWUsIGdvdCAke3R5cGVvZiB2YWx1ZX1gKTtcbiAgfSxcbiAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtub3duR29vZFZhbHVlKSAmJiBBcnJheS5pc0FycmF5KG5ld1ZhbHVlKSkge1xuICAgICAgbGV0IGlzRGlmZmVyZW50ID0ga25vd25Hb29kVmFsdWUubGVuZ3RoICE9PSBuZXdWYWx1ZS5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1ZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpID49IGtub3duR29vZFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBqc29uVmFsdWUudmFsaWRhdGUobmV3VmFsdWVbaV0pO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXYgPSBrbm93bkdvb2RWYWx1ZVtpXTtcbiAgICAgICAgY29uc3QgbmV4dCA9IG5ld1ZhbHVlW2ldO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGpzb25WYWx1ZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpc0RpZmZlcmVudCA/IG5ld1ZhbHVlIDoga25vd25Hb29kVmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGtub3duR29vZFZhbHVlKSAmJiBpc1BsYWluT2JqZWN0KG5ld1ZhbHVlKSkge1xuICAgICAgbGV0IGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhuZXdWYWx1ZSkpIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShrbm93bkdvb2RWYWx1ZSwga2V5KSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBqc29uVmFsdWUudmFsaWRhdGUobmV3VmFsdWVba2V5XSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldiA9IGtub3duR29vZFZhbHVlW2tleV07XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGpzb25WYWx1ZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGtub3duR29vZFZhbHVlKSkge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNEaWZmZXJlbnQgPyBuZXdWYWx1ZSA6IGtub3duR29vZFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganNvblZhbHVlLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICB9XG4gIH1cbik7XG5mdW5jdGlvbiBqc29uRGljdCgpIHtcbiAgcmV0dXJuIGRpY3Qoc3RyaW5nLCBqc29uVmFsdWUpO1xufVxuZnVuY3Rpb24gZGljdChrZXlWYWxpZGF0b3IsIHZhbHVlVmFsaWRhdG9yKSB7XG4gIHJldHVybiBuZXcgRGljdFZhbGlkYXRvcihrZXlWYWxpZGF0b3IsIHZhbHVlVmFsaWRhdG9yKTtcbn1cbmZ1bmN0aW9uIHVuaW9uKGtleSwgY29uZmlnKSB7XG4gIHJldHVybiBuZXcgVW5pb25WYWxpZGF0b3IoXG4gICAga2V5LFxuICAgIGNvbmZpZyxcbiAgICAoX3Vua25vd25WYWx1ZSwgdW5rbm93blZhcmlhbnQpID0+IHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgIGBFeHBlY3RlZCBvbmUgb2YgJHtPYmplY3Qua2V5cyhjb25maWcpLm1hcCgoa2V5MikgPT4gSlNPTi5zdHJpbmdpZnkoa2V5MikpLmpvaW4oXCIgb3IgXCIpfSwgZ290ICR7SlNPTi5zdHJpbmdpZnkodW5rbm93blZhcmlhbnQpfWAsXG4gICAgICAgIFtrZXldXG4gICAgICApO1xuICAgIH0sXG4gICAgZmFsc2VcbiAgKTtcbn1cbmZ1bmN0aW9uIG51bWJlclVuaW9uKGtleSwgY29uZmlnKSB7XG4gIHJldHVybiBuZXcgVW5pb25WYWxpZGF0b3IoXG4gICAga2V5LFxuICAgIGNvbmZpZyxcbiAgICAodW5rbm93blZhbHVlLCB1bmtub3duVmFyaWFudCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIG9uZSBvZiAke09iamVjdC5rZXlzKGNvbmZpZykubWFwKChrZXkyKSA9PiBKU09OLnN0cmluZ2lmeShrZXkyKSkuam9pbihcIiBvciBcIil9LCBnb3QgJHtKU09OLnN0cmluZ2lmeSh1bmtub3duVmFyaWFudCl9YCxcbiAgICAgICAgW2tleV1cbiAgICAgICk7XG4gICAgfSxcbiAgICB0cnVlXG4gICk7XG59XG5mdW5jdGlvbiBtb2RlbChuYW1lLCB2YWxpZGF0b3IpIHtcbiAgcmV0dXJuIG5ldyBWYWxpZGF0b3IoXG4gICAgKHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gcHJlZml4RXJyb3IobmFtZSwgKCkgPT4gdmFsaWRhdG9yLnZhbGlkYXRlKHZhbHVlKSk7XG4gICAgfSxcbiAgICAocHJldlZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuIHByZWZpeEVycm9yKG5hbWUsICgpID0+IHtcbiAgICAgICAgaWYgKHZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24ocHJldlZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIHNldEVudW0odmFsdWVzKSB7XG4gIHJldHVybiBuZXcgVmFsaWRhdG9yKCh2YWx1ZSkgPT4ge1xuICAgIGlmICghdmFsdWVzLmhhcyh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IHZhbHVlc1N0cmluZyA9IEFycmF5LmZyb20odmFsdWVzLCAodmFsdWUyKSA9PiBKU09OLnN0cmluZ2lmeSh2YWx1ZTIpKS5qb2luKFwiIG9yIFwiKTtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkICR7dmFsdWVzU3RyaW5nfSwgZ290ICR7dmFsdWV9YCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvcHRpb25hbCh2YWxpZGF0b3IpIHtcbiAgcmV0dXJuIG5ldyBWYWxpZGF0b3IoXG4gICAgKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGUodmFsdWUpO1xuICAgIH0sXG4gICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgaWYgKGtub3duR29vZFZhbHVlID09PSB2b2lkIDAgJiYgbmV3VmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdm9pZCAwKSByZXR1cm4gdm9pZCAwO1xuICAgICAgaWYgKHZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbiAmJiBrbm93bkdvb2RWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGUobmV3VmFsdWUpO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIG51bGxhYmxlKHZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IFZhbGlkYXRvcihcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdmFsaWRhdG9yLnZhbGlkYXRlKHZhbHVlKTtcbiAgICB9LFxuICAgIChrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAodmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uICYmIGtub3duR29vZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGUobmV3VmFsdWUpO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGxpdGVyYWxFbnVtKC4uLnZhbHVlcykge1xuICByZXR1cm4gc2V0RW51bShuZXcgU2V0KHZhbHVlcykpO1xufVxuZnVuY3Rpb24gcGFyc2VVcmwoc3RyKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBVUkwoc3RyKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoc3RyLnN0YXJ0c1dpdGgoXCIvXCIpIHx8IHN0ci5zdGFydHNXaXRoKFwiLi9cIikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgVVJMKHN0ciwgXCJodHRwOi8vZXhhbXBsZS5jb21cIik7XG4gICAgICB9IGNhdGNoIChlcnJvcjIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYSB2YWxpZCB1cmwsIGdvdCAke0pTT04uc3RyaW5naWZ5KHN0cil9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgdmFsaWQgdXJsLCBnb3QgJHtKU09OLnN0cmluZ2lmeShzdHIpfWApO1xuICB9XG59XG5jb25zdCB2YWxpZExpbmtQcm90b2NvbHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJodHRwOlwiLCBcImh0dHBzOlwiLCBcIm1haWx0bzpcIl0pO1xuY29uc3QgbGlua1VybCA9IHN0cmluZy5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlID09PSBcIlwiKSByZXR1cm47XG4gIGNvbnN0IHVybCA9IHBhcnNlVXJsKHZhbHVlKTtcbiAgaWYgKCF2YWxpZExpbmtQcm90b2NvbHMuaGFzKHVybC5wcm90b2NvbC50b0xvd2VyQ2FzZSgpKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXG4gICAgICBgRXhwZWN0ZWQgYSB2YWxpZCB1cmwsIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX0gKGludmFsaWQgcHJvdG9jb2wpYFxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgdmFsaWRTcmNQcm90b2NvbHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJodHRwOlwiLCBcImh0dHBzOlwiLCBcImRhdGE6XCIsIFwiYXNzZXQ6XCJdKTtcbmNvbnN0IHNyY1VybCA9IHN0cmluZy5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlID09PSBcIlwiKSByZXR1cm47XG4gIGNvbnN0IHVybCA9IHBhcnNlVXJsKHZhbHVlKTtcbiAgaWYgKCF2YWxpZFNyY1Byb3RvY29scy5oYXModXJsLnByb3RvY29sLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcbiAgICAgIGBFeHBlY3RlZCBhIHZhbGlkIHVybCwgZ290ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfSAoaW52YWxpZCBwcm90b2NvbClgXG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBodHRwVXJsID0gc3RyaW5nLmNoZWNrKCh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT09IFwiXCIpIHJldHVybjtcbiAgY29uc3QgdXJsID0gcGFyc2VVcmwodmFsdWUpO1xuICBpZiAoIXVybC5wcm90b2NvbC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eaHR0cHM/OiQvKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXG4gICAgICBgRXhwZWN0ZWQgYSB2YWxpZCB1cmwsIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX0gKGludmFsaWQgcHJvdG9jb2wpYFxuICAgICk7XG4gIH1cbn0pO1xuY29uc3QgaW5kZXhLZXkgPSBzdHJpbmcucmVmaW5lKChrZXkpID0+IHtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZUluZGV4S2V5KGtleSk7XG4gICAgcmV0dXJuIGtleTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYW4gaW5kZXgga2V5LCBnb3QgJHtKU09OLnN0cmluZ2lmeShrZXkpfWApO1xuICB9XG59KTtcbmZ1bmN0aW9uIG9yKHYxLCB2Mikge1xuICByZXR1cm4gbmV3IFZhbGlkYXRvcigodmFsdWUpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHYxLnZhbGlkYXRlKHZhbHVlKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB2Mi52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCB7XG4gIEFycmF5T2ZWYWxpZGF0b3IsXG4gIERpY3RWYWxpZGF0b3IsXG4gIE9iamVjdFZhbGlkYXRvcixcbiAgVW5pb25WYWxpZGF0b3IsXG4gIFZhbGlkYXRpb25FcnJvcixcbiAgVmFsaWRhdG9yLFxuICBhbnksXG4gIGFycmF5LFxuICBhcnJheU9mLFxuICBiaWdpbnQsXG4gIGJvb2xlYW4sXG4gIGRpY3QsXG4gIGh0dHBVcmwsXG4gIGluZGV4S2V5LFxuICBpbnRlZ2VyLFxuICBqc29uRGljdCxcbiAganNvblZhbHVlLFxuICBsaW5rVXJsLFxuICBsaXRlcmFsLFxuICBsaXRlcmFsRW51bSxcbiAgbW9kZWwsXG4gIG5vblplcm9JbnRlZ2VyLFxuICBub25aZXJvTnVtYmVyLFxuICBudWxsYWJsZSxcbiAgbnVtYmVyLFxuICBudW1iZXJVbmlvbixcbiAgb2JqZWN0LFxuICBvcHRpb25hbCxcbiAgb3IsXG4gIHBvc2l0aXZlSW50ZWdlcixcbiAgcG9zaXRpdmVOdW1iZXIsXG4gIHNldEVudW0sXG4gIHNyY1VybCxcbiAgc3RyaW5nLFxuICB1bmlvbixcbiAgdW5rbm93bixcbiAgdW5rbm93bk9iamVjdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbGlkYXRpb24ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs\n");

/***/ })

};
;